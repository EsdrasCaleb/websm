/*! For license information please see main.6a2f2e1b.js.LICENSE.txt */
(()=>{var e={105:(e,t)=>{!function(e){function t(){this.months=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],this.notKey=[",","{","}"," ","="],this.pos=0,this.input="",this.entries=new Array,this.currentEntry="",this.setInput=function(e){this.input=e},this.getEntries=function(){return this.entries},this.isWhitespace=function(e){return" "==e||"\r"==e||"\t"==e||"\n"==e},this.match=function(e,t){if(void 0!=t&&null!=t||(t=!0),this.skipWhitespace(t),this.input.substring(this.pos,this.pos+e.length)!=e)throw"Token mismatch, expected "+e+", found "+this.input.substring(this.pos);this.pos+=e.length,this.skipWhitespace(t)},this.tryMatch=function(e,t){return void 0!=t&&null!=t||(t=!0),this.skipWhitespace(t),this.input.substring(this.pos,this.pos+e.length)==e},this.matchAt=function(){for(;this.input.length>this.pos&&"@"!=this.input[this.pos];)this.pos++;return"@"==this.input[this.pos]},this.skipWhitespace=function(e){for(;this.isWhitespace(this.input[this.pos]);)this.pos++;if("%"==this.input[this.pos]&&1==e){for(;"\n"!=this.input[this.pos];)this.pos++;this.skipWhitespace(e)}},this.value_braces=function(){var e=0;this.match("{",!1);for(var t=this.pos,n=!1;;){if(!n)if("}"==this.input[this.pos]){if(!(e>0)){var r=this.pos;return this.match("}",!1),this.input.substring(t,r)}e--}else if("{"==this.input[this.pos])e++;else if(this.pos>=this.input.length-1)throw"Unterminated value";n="\\"==this.input[this.pos]&&0==n,this.pos++}},this.value_comment=function(){for(var e="",t=0;!this.tryMatch("}",!1)||0!=t;){if(e+=this.input[this.pos],"{"==this.input[this.pos]&&t++,"}"==this.input[this.pos]&&t--,this.pos>=this.input.length-1)throw"Unterminated value:"+this.input.substring(start);this.pos++}return e},this.value_quotes=function(){this.match('"',!1);for(var e=this.pos,t=!1;;){if(!t){if('"'==this.input[this.pos]){var n=this.pos;return this.match('"',!1),this.input.substring(e,n)}if(this.pos>=this.input.length-1)throw"Unterminated value:"+this.input.substring(e)}t="\\"==this.input[this.pos]&&0==t,this.pos++}},this.single_value=function(){var e=this.pos;if(this.tryMatch("{"))return this.value_braces();if(this.tryMatch('"'))return this.value_quotes();var t=this.key();if(t.match("^[0-9]+$"))return t;if(this.months.indexOf(t.toLowerCase())>=0)return t.toLowerCase();throw"Value expected:"+this.input.substring(e)+" for key: "+t},this.value=function(){var e=[];for(e.push(this.single_value());this.tryMatch("#");)this.match("#"),e.push(this.single_value());return e.join("")},this.key=function(){for(var e=this.pos;;){if(this.pos>=this.input.length)throw"Runaway key";if(this.notKey.indexOf(this.input[this.pos])>=0)return this.input.substring(e,this.pos);this.pos++}},this.key_equals_value=function(){var e=this.key();if(this.tryMatch("="))return this.match("="),[e,this.value()];throw"... = value expected, equals sign missing:"+this.input.substring(this.pos)},this.key_value_list=function(){var e=this.key_equals_value();for(this.currentEntry.entryTags={},this.currentEntry.entryTags[e[0]]=e[1];this.tryMatch(",")&&(this.match(","),!this.tryMatch("}"));)e=this.key_equals_value(),this.currentEntry.entryTags[e[0]]=e[1]},this.entry_body=function(e){this.currentEntry={},this.currentEntry.citationKey=this.key(),this.currentEntry.entryType=e.substring(1),this.match(","),this.key_value_list(),this.entries.push(this.currentEntry)},this.directive=function(){return this.match("@"),"@"+this.key()},this.preamble=function(){this.currentEntry={},this.currentEntry.entryType="PREAMBLE",this.currentEntry.entry=this.value_comment(),this.entries.push(this.currentEntry)},this.comment=function(){this.currentEntry={},this.currentEntry.entryType="COMMENT",this.currentEntry.entry=this.value_comment(),this.entries.push(this.currentEntry)},this.entry=function(e){this.entry_body(e)},this.bibtex=function(){for(;this.matchAt();){var e=this.directive();this.match("{"),"@STRING"==e?this.string():"@PREAMBLE"==e?this.preamble():"@COMMENT"==e?this.comment():this.entry(e),this.match("}")}}}e.toJSON=function(e){var n=new t;return n.setInput(e),n.bibtex(),n.entries},e.toBibtex=function(e){var t="";for(var n in e){if(t+="@"+e[n].entryType,t+="{",e[n].citationKey&&(t+=e[n].citationKey+", "),e[n].entry&&(t+=e[n].entry),e[n].entryTags){var r="";for(var o in e[n].entryTags)0!=r.length&&(r+=", "),r+=o+"= {"+e[n].entryTags[o]+"}";t+=r}t+="}\n\n"}return t}}(t)},270:(e,t,n)=>{"use strict";var r=n(520),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,a,i,s,l,u,c=!1;t||(t={}),n=t.debug||!1;try{if(i=r(),s=document.createRange(),l=document.getSelection(),(u=document.createElement("span")).textContent=e,u.ariaHidden="true",u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),"undefined"===typeof r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var a=o[t.format]||o.default;window.clipboardData.setData(a,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(u),s.selectNodeContents(u),l.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");c=!0}catch(d){n&&console.error("unable to copy using execCommand: ",d),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),c=!0}catch(d){n&&console.error("unable to copy using clipboardData: ",d),n&&console.error("falling back to prompt"),a=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(a,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(s):l.removeAllRanges()),u&&document.body.removeChild(u),i()}return c}},353:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(E){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var o={},a={};function i(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=a[e])?r:(n=l(e,(0|e)<0?-1:0,!0),i&&(a[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=o[e])?r:(n=l(e,e<0?-1:0,!1),i&&(o[e]=n),n)}function s(e,t){if(isNaN(e))return t?v:g;if(t){if(e<0)return v;if(e>=p)return k}else{if(e<=-f)return C;if(e+1>=f)return x}return e<0?s(-e,t).neg():l(e%h|0,e/h|0,t)}function l(e,t,r){return new n(e,t,r)}n.fromInt=i,n.fromNumber=s,n.fromBits=l;var u=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var o=s(u(n,8)),a=g,i=0;i<e.length;i+=8){var l=Math.min(8,e.length-i),d=parseInt(e.substring(i,i+l),n);if(l<8){var h=s(u(n,l));a=a.mul(h).add(s(d))}else a=(a=a.mul(o)).add(s(d))}return a.unsigned=t,a}function d(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?c(e,t):l(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=c,n.fromValue=d;var h=4294967296,p=h*h,f=p/2,m=i(1<<24),g=i(0);n.ZERO=g;var v=i(0,!0);n.UZERO=v;var b=i(1);n.ONE=b;var y=i(1,!0);n.UONE=y;var w=i(-1);n.NEG_ONE=w;var x=l(-1,2147483647,!1);n.MAX_VALUE=x;var k=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var C=l(0,-2147483648,!1);n.MIN_VALUE=C;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(C)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=s(u(e,6),this.unsigned),a=this,i="";;){var l=a.div(o),c=(a.sub(l.mul(o)).toInt()>>>0).toString(e);if((a=l).isZero())return c+i;for(;c.length<6;)c="0"+c;i=""+c+i}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1===(1&this.low)},S.isEven=function(){return 0===(1&this.low)},S.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(b)},S.neg=S.negate,S.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,o=this.low>>>16,a=65535&this.low,i=e.high>>>16,s=65535&e.high,u=e.low>>>16,c=0,h=0,p=0,f=0;return p+=(f+=a+(65535&e.low))>>>16,h+=(p+=o+u)>>>16,c+=(h+=n+s)>>>16,c+=t+i,l((p&=65535)<<16|(f&=65535),(c&=65535)<<16|(h&=65535),this.unsigned)},S.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=d(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(C))return e.isOdd()?C:g;if(e.eq(C))return this.isOdd()?C:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,o=65535&this.high,a=this.low>>>16,i=65535&this.low,u=e.high>>>16,c=65535&e.high,h=e.low>>>16,p=65535&e.low,f=0,v=0,b=0,y=0;return b+=(y+=i*p)>>>16,v+=(b+=a*p)>>>16,b&=65535,v+=(b+=i*h)>>>16,f+=(v+=o*p)>>>16,v&=65535,f+=(v+=a*h)>>>16,v&=65535,f+=(v+=i*c)>>>16,f+=n*p+o*h+a*c+i*u,l((b&=65535)<<16|(y&=65535),(f&=65535)<<16|(v&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,o,a;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return y;a=v}else{if(this.eq(C))return e.eq(b)||e.eq(w)?C:e.eq(C)?b:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?b:w:(o=this.sub(e.mul(n)),a=n.add(o.div(e)));if(e.eq(C))return this.unsigned?v:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=g}for(o=this;o.gte(e);){n=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),c=i<=48?1:u(2,i-48),h=s(n),p=h.mul(e);p.isNegative()||p.gt(o);)p=(h=s(n-=c,this.unsigned)).mul(e);h.isZero()&&(h=b),a=a.add(h),o=o.sub(p)}return a},S.div=S.divide,S.modulo=function(e){return r(e)||(e=d(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return l(~this.low,~this.high,this.unsigned)},S.and=function(e){return r(e)||(e=d(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return r(e)||(e=d(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return r(e)||(e=d(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},766:function(e,t){var n,r,o;r=[],n=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},n=!t.document&&!!t.postMessage,r=t.IS_PAPA_WORKER||!1,o={},a=0,i={parse:function(n,r){var s=(r=r||{}).dynamicTyping||!1;if(x(s)&&(r.dynamicTypingFunction=s,s={}),r.dynamicTyping=s,r.transform=!!x(r.transform)&&r.transform,r.worker&&i.WORKERS_SUPPORTED){var l=function(){if(!i.WORKERS_SUPPORTED)return!1;var n,r,s=(n=t.URL||t.webkitURL||null,r=e.toString(),i.BLOB_URL||(i.BLOB_URL=n.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))),l=new t.Worker(s);return l.onmessage=g,l.id=a++,o[l.id]=l}();return l.userStep=r.step,l.userChunk=r.chunk,l.userComplete=r.complete,l.userError=r.error,r.step=x(r.step),r.chunk=x(r.chunk),r.complete=x(r.complete),r.error=x(r.error),delete r.worker,void l.postMessage({input:n,config:r,workerId:l.id})}var p=null;return i.NODE_STREAM_INPUT,"string"==typeof n?(n=function(e){return 65279===e.charCodeAt(0)?e.slice(1):e}(n),p=r.download?new u(r):new d(r)):!0===n.readable&&x(n.read)&&x(n.on)?p=new h(r):(t.File&&n instanceof File||n instanceof Object)&&(p=new c(r)),p.stream(n)},unparse:function(e,t){var n=!1,r=!0,o=",",a="\r\n",s='"',l=s+s,u=!1,c=null,d=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||i.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(o=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(u=t.skipEmptyLines),"string"==typeof t.newline&&(a=t.newline),"string"==typeof t.quoteChar&&(s=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");c=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+s),("boolean"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(d=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var h=new RegExp(f(s),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return p(null,e,u);if("object"==typeof e[0])return p(c||Object.keys(e[0]),e,u)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||c),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),p(e.fields||[],e.data||[],u);throw new Error("Unable to serialize unrecognized input");function p(e,t,n){var i="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var s=Array.isArray(e)&&0<e.length,l=!Array.isArray(t[0]);if(s&&r){for(var u=0;u<e.length;u++)0<u&&(i+=o),i+=m(e[u],u);0<t.length&&(i+=a)}for(var c=0;c<t.length;c++){var d=s?e.length:t[c].length,h=!1,p=s?0===Object.keys(t[c]).length:0===t[c].length;if(n&&!s&&(h="greedy"===n?""===t[c].join("").trim():1===t[c].length&&0===t[c][0].length),"greedy"===n&&s){for(var f=[],g=0;g<d;g++){var v=l?e[g]:g;f.push(t[c][v])}h=""===f.join("").trim()}if(!h){for(var b=0;b<d;b++){0<b&&!p&&(i+=o);var y=s&&l?e[b]:b;i+=m(t[c][y],b)}c<t.length-1&&(!n||0<d&&!p)&&(i+=a)}}return i}function m(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var r=!1;d&&"string"==typeof e&&d.test(e)&&(e="'"+e,r=!0);var a=e.toString().replace(h,l);return(r=r||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(a,i.BAD_DELIMITERS)||-1<a.indexOf(o)||" "===a.charAt(0)||" "===a.charAt(a.length-1))?s+a+s:a}}};if(i.RECORD_SEP=String.fromCharCode(30),i.UNIT_SEP=String.fromCharCode(31),i.BYTE_ORDER_MARK="\ufeff",i.BAD_DELIMITERS=["\r","\n",'"',i.BYTE_ORDER_MARK],i.WORKERS_SUPPORTED=!n&&!!t.Worker,i.NODE_STREAM_INPUT=1,i.LocalChunkSize=10485760,i.RemoteChunkSize=5242880,i.DefaultDelimiter=",",i.Parser=m,i.ParserHandle=p,i.NetworkStreamer=u,i.FileStreamer=c,i.StringStreamer=d,i.ReadableStreamStreamer=h,t.jQuery){var s=t.jQuery;s.fn.parse=function(e){var n=e.config||{},r=[];return this.each((function(e){if("INPUT"!==s(this).prop("tagName").toUpperCase()||"file"!==s(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var o=0;o<this.files.length;o++)r.push({file:this.files[o],inputElem:this,instanceConfig:s.extend({},n)})})),o(),this;function o(){if(0!==r.length){var t,n,o,l,u=r[0];if(x(e.before)){var c=e.before(u.file,u.inputElem);if("object"==typeof c){if("abort"===c.action)return t="AbortError",n=u.file,o=u.inputElem,l=c.reason,void(x(e.error)&&e.error({name:t},n,o,l));if("skip"===c.action)return void a();"object"==typeof c.config&&(u.instanceConfig=s.extend(u.instanceConfig,c.config))}else if("skip"===c)return void a()}var d=u.instanceConfig.complete;u.instanceConfig.complete=function(e){x(d)&&d(e,u.file,u.inputElem),a()},i.parse(u.file,u.instanceConfig)}else x(e.complete)&&e.complete()}function a(){r.splice(0,1),o()}}}function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=y(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new p(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,n){if(this.isFirstChunk&&x(this._config.beforeFirstChunk)){var o=this._config.beforeFirstChunk(e);void 0!==o&&(e=o)}this.isFirstChunk=!1,this._halted=!1;var a=this._partialLine+e;this._partialLine="";var s=this._handle.parse(a,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=s.meta.cursor;this._finished||(this._partialLine=a.substring(l-this._baseIndex),this._baseIndex=l),s&&s.data&&(this._rowCount+=s.data.length);var u=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)t.postMessage({results:s,workerId:i.WORKER_ID,finished:u});else if(x(this._config.chunk)&&!n){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!u||!x(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),u||s&&s.meta.paused||this._nextChunk(),s}this._halted=!0},this._sendError=function(e){x(this._config.error)?this._config.error(e):r&&this._config.error&&t.postMessage({workerId:i.WORKER_ID,error:e,finished:!1})}}function u(e){var t;(e=e||{}).chunkSize||(e.chunkSize=i.RemoteChunkSize),l.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var r in e)t.setRequestHeader(r,e[r])}if(this._config.chunkSize){var o=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+o)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var n=t.statusText||e;this._sendError(new Error(n))}}function c(e){var t,n;(e=e||{}).chunkSize||(e.chunkSize=i.LocalChunkSize),l.call(this,e);var r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var o=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,o)}var a=t.readAsText(e,this._config.encoding);r||this._chunkLoaded({target:{result:a}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function d(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,n=this._config.chunkSize;return n?(e=t.substring(0,n),t=t.substring(n)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function h(e){l.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=w((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=w((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=w((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=w((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function p(e){var t,n,r,o=Math.pow(2,53),a=-o,s=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,l=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,u=this,c=0,d=0,h=!1,p=!1,g=[],v={data:[],errors:[],meta:{}};if(x(e.step)){var b=e.step;e.step=function(t){if(v=t,C())k();else{if(k(),0===v.data.length)return;c+=t.data.length,e.preview&&c>e.preview?n.abort():(v.data=v.data[0],b(v,u))}}}function w(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function k(){return v&&r&&(E("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+i.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines&&(v.data=v.data.filter((function(e){return!w(e)}))),C()&&function(){if(v)if(Array.isArray(v.data[0])){for(var t=0;C()&&t<v.data.length;t++)v.data[t].forEach(n);v.data.splice(0,1)}else v.data.forEach(n);function n(t,n){x(e.transformHeader)&&(t=e.transformHeader(t,n)),g.push(t)}}(),function(){if(!v||!e.header&&!e.dynamicTyping&&!e.transform)return v;function t(t,n){var r,o=e.header?{}:[];for(r=0;r<t.length;r++){var a=r,i=t[r];e.header&&(a=r>=g.length?"__parsed_extra":g[r]),e.transform&&(i=e.transform(i,a)),i=S(a,i),"__parsed_extra"===a?(o[a]=o[a]||[],o[a].push(i)):o[a]=i}return e.header&&(r>g.length?E("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+r,d+n):r<g.length&&E("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+r,d+n)),o}var n=1;return!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(t),n=v.data.length):v.data=t(v.data,0),e.header&&v.meta&&(v.meta.fields=g),d+=n,v}()}function C(){return e.header&&0===g.length}function S(t,n){return r=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[r]&&(e.dynamicTyping[r]=e.dynamicTypingFunction(r)),!0===(e.dynamicTyping[r]||e.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(e){if(s.test(e)){var t=parseFloat(e);if(a<t&&t<o)return!0}return!1}(n)?parseFloat(n):l.test(n)?new Date(n):""===n?null:n):n;var r}function E(e,t,n,r){var o={type:e,code:t,message:n};void 0!==r&&(o.row=r),v.errors.push(o)}this.parse=function(o,a,s){var l=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var n=new RegExp(f(t)+"([^]*?)"+f(t),"gm"),r=(e=e.replace(n,"")).split("\r"),o=e.split("\n"),a=1<o.length&&o[0].length<r[0].length;if(1===r.length||a)return"\n";for(var i=0,s=0;s<r.length;s++)"\n"===r[s][0]&&i++;return i>=r.length/2?"\r\n":"\r"}(o,l)),r=!1,e.delimiter)x(e.delimiter)&&(e.delimiter=e.delimiter(o),v.meta.delimiter=e.delimiter);else{var u=function(t,n,r,o,a){var s,l,u,c;a=a||[",","\t","|",";",i.RECORD_SEP,i.UNIT_SEP];for(var d=0;d<a.length;d++){var h=a[d],p=0,f=0,g=0;u=void 0;for(var v=new m({comments:o,delimiter:h,newline:n,preview:10}).parse(t),b=0;b<v.data.length;b++)if(r&&w(v.data[b]))g++;else{var y=v.data[b].length;f+=y,void 0!==u?0<y&&(p+=Math.abs(y-u),u=y):u=y}0<v.data.length&&(f/=v.data.length-g),(void 0===l||p<=l)&&(void 0===c||c<f)&&1.99<f&&(l=p,s=h,c=f)}return{successful:!!(e.delimiter=s),bestDelimiter:s}}(o,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);u.successful?e.delimiter=u.bestDelimiter:(r=!0,e.delimiter=i.DefaultDelimiter),v.meta.delimiter=e.delimiter}var c=y(e);return e.preview&&e.header&&c.preview++,t=o,n=new m(c),v=n.parse(t,a,s),k(),h?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return h},this.pause=function(){h=!0,n.abort(),t=x(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){u.streamer._halted?(h=!1,u.streamer.parseChunk(t,!0)):setTimeout(u.resume,3)},this.aborted=function(){return p},this.abort=function(){p=!0,n.abort(),v.meta.aborted=!0,x(e.complete)&&e.complete(v),t=""}}function f(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){var t,n=(e=e||{}).delimiter,r=e.newline,o=e.comments,a=e.step,s=e.preview,l=e.fastMode,u=t=void 0===e.quoteChar||null===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(u=e.escapeChar),("string"!=typeof n||-1<i.BAD_DELIMITERS.indexOf(n))&&(n=","),o===n)throw new Error("Comment character same as delimiter");!0===o?o="#":("string"!=typeof o||-1<i.BAD_DELIMITERS.indexOf(o))&&(o=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var c=0,d=!1;this.parse=function(i,h,p){if("string"!=typeof i)throw new Error("Input must be a string");var m=i.length,g=n.length,v=r.length,b=o.length,y=x(a),w=[],k=[],C=[],S=c=0;if(!i)return U();if(e.header&&!h){var E=i.split(r)[0].split(n),N=[],I={},$=!1;for(var T in E){var A=E[T];x(e.transformHeader)&&(A=e.transformHeader(A,T));var O=A,R=I[A]||0;for(0<R&&($=!0,O=A+"_"+R),I[A]=R+1;N.includes(O);)O=O+"_"+R;N.push(O)}if($){var P=i.split(r);P[0]=N.join(n),i=P.join(r)}}if(l||!1!==l&&-1===i.indexOf(t)){for(var D=i.split(r),F=0;F<D.length;F++){if(C=D[F],c+=C.length,F!==D.length-1)c+=r.length;else if(p)return U();if(!o||C.substring(0,b)!==o){if(y){if(w=[],H(C.split(n)),K(),d)return U()}else H(C.split(n));if(s&&s<=F)return w=w.slice(0,s),U(!0)}}return U()}for(var _=i.indexOf(n,c),M=i.indexOf(r,c),z=new RegExp(f(u)+f(t),"g"),L=i.indexOf(t,c);;)if(i[c]!==t)if(o&&0===C.length&&i.substring(c,c+b)===o){if(-1===M)return U();c=M+v,M=i.indexOf(r,c),_=i.indexOf(n,c)}else if(-1!==_&&(_<M||-1===M))C.push(i.substring(c,_)),c=_+g,_=i.indexOf(n,c);else{if(-1===M)break;if(C.push(i.substring(c,M)),G(M+v),y&&(K(),d))return U();if(s&&w.length>=s)return U(!0)}else for(L=c,c++;;){if(-1===(L=i.indexOf(t,L+1)))return p||k.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:w.length,index:c}),W();if(L===m-1)return W(i.substring(c,L).replace(z,t));if(t!==u||i[L+1]!==u){if(t===u||0===L||i[L-1]!==u){-1!==_&&_<L+1&&(_=i.indexOf(n,L+1)),-1!==M&&M<L+1&&(M=i.indexOf(r,L+1));var B=V(-1===M?_:Math.min(_,M));if(i.substr(L+1+B,g)===n){C.push(i.substring(c,L).replace(z,t)),i[c=L+1+B+g]!==t&&(L=i.indexOf(t,c)),_=i.indexOf(n,c),M=i.indexOf(r,c);break}var j=V(M);if(i.substring(L+1+j,L+1+j+v)===r){if(C.push(i.substring(c,L).replace(z,t)),G(L+1+j+v),_=i.indexOf(n,c),L=i.indexOf(t,c),y&&(K(),d))return U();if(s&&w.length>=s)return U(!0);break}k.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:w.length,index:c}),L++}}else L++}return W();function H(e){w.push(e),S=c}function V(e){var t=0;if(-1!==e){var n=i.substring(L+1,e);n&&""===n.trim()&&(t=n.length)}return t}function W(e){return p||(void 0===e&&(e=i.substring(c)),C.push(e),c=m,H(C),y&&K()),U()}function G(e){c=e,H(C),C=[],M=i.indexOf(r,c)}function U(e){return{data:w,errors:k,meta:{delimiter:n,linebreak:r,aborted:d,truncated:!!e,cursor:S+(h||0)}}}function K(){a(U()),w=[],k=[]}},this.abort=function(){d=!0},this.getCharIndex=function(){return c}}function g(e){var t=e.data,n=o[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var a={abort:function(){r=!0,v(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(x(n.userStep)){for(var i=0;i<t.results.data.length&&(n.userStep({data:t.results.data[i],errors:t.results.errors,meta:t.results.meta},a),!r);i++);delete t.results}else x(n.userChunk)&&(n.userChunk(t.results,a,t.file),delete t.results)}t.finished&&!r&&v(t.workerId,t.results)}function v(e,t){var n=o[e];x(n.userComplete)&&n.userComplete(t),n.terminate(),delete o[e]}function b(){throw new Error("Not implemented.")}function y(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=y(e[n]);return t}function w(e,t){return function(){e.apply(t,arguments)}}function x(e){return"function"==typeof e}return r&&(t.onmessage=function(e){var n=e.data;if(void 0===i.WORKER_ID&&n&&(i.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:i.WORKER_ID,results:i.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var r=i.parse(n.input,n.config);r&&t.postMessage({workerId:i.WORKER_ID,results:r,finished:!0})}}),(u.prototype=Object.create(l.prototype)).constructor=u,(c.prototype=Object.create(l.prototype)).constructor=c,(d.prototype=Object.create(d.prototype)).constructor=d,(h.prototype=Object.create(l.prototype)).constructor=h,i},void 0===(o="function"===typeof n?n.apply(t,r):n)||(e.exports=o)},132:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case s:case i:case h:case p:return e;default:switch(e=e&&e.$$typeof){case c:case u:case d:case m:case f:case l:return e;default:return t}}case o:return t}}}n=Symbol.for("react.module.reference"),t.ForwardRef=d,t.isFragment=function(e){return v(e)===a},t.isMemo=function(e){return v(e)===f}},816:(e,t,n)=>{"use strict";e.exports=n(132)},730:(e,t,n)=>{"use strict";var r=n(43),o=n(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)i.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,o,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,r){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),I=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function F(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var _,M=Object.assign;function z(e){if(void 0===_)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);_=t&&t[1]||""}return"\n"+_+e}var L=!1;function B(e,t){if(!e||L)return"";L=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var o=u.stack.split("\n"),a=r.stack.split("\n"),i=o.length-1,s=a.length-1;1<=i&&0<=s&&o[i]!==a[s];)s--;for(;1<=i&&0<=s;i--,s--)if(o[i]!==a[s]){if(1!==i||1!==s)do{if(i--,0>--s||o[i]!==a[s]){var l="\n"+o[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=s);break}}}finally{L=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function j(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case k:return"Portal";case E:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case $:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function U(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Q(e,t){Y(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ce=null,Se=null;function Ee(e){if(e=wo(e)){if("function"!==typeof ke)throw Error(a(280));var t=e.stateNode;t&&(t=ko(t),ke(e.stateNode,e.type,t))}}function Ne(e){Ce?Se?Se.push(e):Se=[e]:Ce=e}function Ie(){if(Ce){var e=Ce,t=Se;if(Se=Ce=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function $e(e,t){return e(t)}function Te(){}var Ae=!1;function Oe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return $e(e,t,n)}finally{Ae=!1,(null!==Ce||null!==Se)&&(Te(),Ie())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=ko(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(c)try{var De={};Object.defineProperty(De,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ce){Pe=!1}function Fe(e,t,n,r,o,a,i,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var _e=!1,Me=null,ze=!1,Le=null,Be={onError:function(e){_e=!0,Me=e}};function je(e,t,n,r,o,a,i,s,l){_e=!1,Me=null,Fe.apply(Be,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(He(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return We(o),e;if(i===r)return We(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ue(e):null}function Ue(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ue(e);if(null!==t)return t;e=e.sibling}return null}var Ke=o.unstable_scheduleCallback,qe=o.unstable_cancelCallback,Xe=o.unstable_shouldYield,Je=o.unstable_requestPaint,Ye=o.unstable_now,Qe=o.unstable_getCurrentPriorityLevel,Ze=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var s=i&~o;0!==s?r=dt(s):0!==(a&=i)&&(r=dt(a))}else 0!==(i=n&~o)?r=dt(i):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(a=t&-t)||16===o&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-it(t)),r|=e[n],t&=~o;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var yt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,kt,Ct,St,Et,Nt=!1,It=[],$t=null,Tt=null,At=null,Ot=new Map,Rt=new Map,Pt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ft(e,t){switch(e){case"focusin":case"focusout":$t=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function _t(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},null!==t&&(null!==(t=wo(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Mt(e){var t=yo(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Et(e.priority,(function(){Ct(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wo(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Lt(e,t,n){zt(e)&&n.delete(t)}function Bt(){Nt=!1,null!==$t&&zt($t)&&($t=null),null!==Tt&&zt(Tt)&&(Tt=null),null!==At&&zt(At)&&(At=null),Ot.forEach(Lt),Rt.forEach(Lt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Bt)))}function Ht(e){function t(t){return jt(t,e)}if(0<It.length){jt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==$t&&jt($t,e),null!==Tt&&jt(Tt,e),null!==At&&jt(At,e),Ot.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var Vt=w.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,n,r){var o=yt,a=Vt.transition;Vt.transition=null;try{yt=1,Kt(e,t,n,r)}finally{yt=o,Vt.transition=a}}function Ut(e,t,n,r){var o=yt,a=Vt.transition;Vt.transition=null;try{yt=4,Kt(e,t,n,r)}finally{yt=o,Vt.transition=a}}function Kt(e,t,n,r){if(Wt){var o=Xt(e,t,n,r);if(null===o)Wr(e,t,r,qt,n),Ft(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return $t=_t($t,e,t,n,r,o),!0;case"dragenter":return Tt=_t(Tt,e,t,n,r,o),!0;case"mouseover":return At=_t(At,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return Ot.set(a,_t(Ot.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,Rt.set(a,_t(Rt.get(a)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Ft(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==o;){var a=wo(o);if(null!==a&&xt(a),null===(a=Xt(e,t,n,r))&&Wr(e,t,r,qt,n),a===o)break;o=a}null!==o&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var qt=null;function Xt(e,t,n,r){if(qt=null,null!==(e=yo(e=xe(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Qt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Qt,r=n.length,o="value"in Yt?Yt.value:Yt.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===o[a-t];t++);return Zt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(o):o[i]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),dn=M({},un,{view:0,detail:0}),hn=on(dn),pn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=on(pn),mn=on(M({},pn,{dataTransfer:0})),gn=on(M({},dn,{relatedTarget:0})),vn=on(M({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=M({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=on(bn),wn=on(M({},un,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function En(){return Sn}var Nn=M({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=on(Nn),$n=on(M({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=on(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=on(M({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=M({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(On),Pn=[9,13,27,32],Dn=c&&"CompositionEvent"in window,Fn=null;c&&"documentMode"in document&&(Fn=document.documentMode);var _n=c&&"TextEvent"in window&&!Fn,Mn=c&&(!Dn||Fn&&8<Fn&&11>=Fn),zn=String.fromCharCode(32),Ln=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ne(r),0<(t=Ur(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Un=null,Kn=null;function qn(e){zr(e,0)}function Xn(e){if(K(xo(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(c){var Qn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Qn=Zn}else Qn=!1;Yn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Un&&(Un.detachEvent("onpropertychange",nr),Kn=Un=null)}function nr(e){if("value"===e.propertyName&&Xn(Kn)){var t=[];Gn(t,Kn,e,xe(e)),Oe(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Un=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Kn)}function ar(e,t){if("click"===e)return Xn(t)}function ir(e,t){if("input"===e||"change"===e)return Xn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=void 0===r.end?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=cr(n,a);var i=cr(n,r);o&&i&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,br=null,yr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==gr||gr!==q(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Ur(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Cr={},Sr={};function Er(e){if(Cr[e])return Cr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Cr[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Nr=Er("animationend"),Ir=Er("animationiteration"),$r=Er("animationstart"),Tr=Er("transitionend"),Ar=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),l(t,[e])}for(var Pr=0;Pr<Or.length;Pr++){var Dr=Or[Pr];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Nr,"onAnimationEnd"),Rr(Ir,"onAnimationIteration"),Rr($r,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Tr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_r=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,i,s,l,u){if(je.apply(this,arguments),_e){if(!_e)throw Error(a(198));var c=Me;_e=!1,Me=null,ze||(ze=!0,Le=c)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&o.isPropagationStopped())break e;Mr(o,s,u),a=l}else for(i=0;i<r.length;i++){if(l=(s=r[i]).instance,u=s.currentTarget,s=s.listener,l!==a&&o.isPropagationStopped())break e;Mr(o,s,u),a=l}}}if(ze)throw e=Le,ze=!1,Le=null,e}function Lr(e,t){var n=t[go];void 0===n&&(n=t[go]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[jr]){e[jr]=!0,i.forEach((function(t){"selectionchange"!==t&&(_r.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Br("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Jt(t)){case 1:var o=Gt;break;case 4:o=Ut;break;default:o=Kt}n=o.bind(null,t,n,e),o=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,o){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;i=i.return}for(;null!==s;){if(null===(i=yo(s)))return;if(5===(l=i.tag)||6===l){r=a=i;continue e}s=s.parentNode}}r=r.return}Oe((function(){var r=a,o=xe(n),i=[];e:{var s=Ar.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Nr:case Ir:case $r:l=vn;break;case Tr:l=An;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=$n}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Re(f,h))&&c.push(Gr(f,m,p)))),d)break;f=f.return}0<c.length&&(s=new l(s,u,null,n,o),i.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(u=n.relatedTarget||n.fromElement)||!yo(u)&&!u[mo])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yo(u):null)&&(u!==(d=He(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=$n,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?s:xo(l),p=null==u?s:xo(u),(s=new c(m,f+"leave",l,n,o)).target=d,s.relatedTarget=p,m=null,yo(o)===r&&((c=new c(h,f+"enter",u,n,o)).target=p,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,f=0,p=c=l;p;p=Kr(p))f++;for(p=0,m=h;m;m=Kr(m))p++;for(;0<f-p;)c=Kr(c),f--;for(;0<p-f;)h=Kr(h),p--;for(;f--;){if(c===h||null!==h&&c===h.alternate)break e;c=Kr(c),h=Kr(h)}c=null}else c=null;null!==l&&qr(i,s,l,c,!1),null!==u&&null!==d&&qr(i,d,u,c,!0)}if("select"===(l=(s=r?xo(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Jn;else if(Wn(s))if(Yn)g=ir;else{g=or;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?Gn(i,g,n,o):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?xo(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,br=null);break;case"focusout":br=vr=gr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,wr(i,n,o);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(i,n,o)}var b;if(Dn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Hn?Bn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Mn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Hn&&(b=en()):(Qt="value"in(Yt=o)?Yt.value:Yt.textContent,Hn=!0)),0<(v=Ur(r,y)).length&&(y=new wn(y,e,null,n,o),i.push({event:y,listeners:v}),b?y.data=b:null!==(b=jn(n))&&(y.data=b))),(b=_n?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Ln=!0,zn);case"textInput":return(e=t.data)===zn&&Ln?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Dn&&Bn(e,t)?(e=en(),Zt=Qt=Yt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Ur(r,"onBeforeInput")).length&&(o=new wn("onBeforeInput","beforeinput",null,n,o),i.push({event:o,listeners:r}),o.data=b))}zr(i,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ur(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;5===o.tag&&null!==a&&(o=a,null!=(a=Re(e,n))&&r.unshift(Gr(e,a,o)),null!=(a=Re(e,t))&&r.push(Gr(e,a,o))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,o){for(var a=t._reactName,i=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,o?null!=(l=Re(n,a))&&i.unshift(Gr(n,l,s)):o||null!=(l=Re(n,a))&&i.push(Gr(n,l,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Xr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Jr,"")}function Qr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Zr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,ao="function"===typeof Promise?Promise:void 0,io="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ao?function(e){return ao.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout((function(){throw e}))}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Ht(t)}function uo(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function co(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),po="__reactFiber$"+ho,fo="__reactProps$"+ho,mo="__reactContainer$"+ho,go="__reactEvents$"+ho,vo="__reactListeners$"+ho,bo="__reactHandles$"+ho;function yo(e){var t=e[po];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mo]||n[po]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=co(e);null!==e;){if(n=e[po])return n;e=co(e)}return t}n=(e=n).parentNode}return null}function wo(e){return!(e=e[po]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ko(e){return e[fo]||null}var Co=[],So=-1;function Eo(e){return{current:e}}function No(e){0>So||(e.current=Co[So],Co[So]=null,So--)}function Io(e,t){So++,Co[So]=e.current,e.current=t}var $o={},To=Eo($o),Ao=Eo(!1),Oo=$o;function Ro(e,t){var n=e.type.contextTypes;if(!n)return $o;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in n)a[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Po(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Do(){No(Ao),No(To)}function Fo(e,t,n){if(To.current!==$o)throw Error(a(168));Io(To,t),Io(Ao,n)}function _o(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,V(e)||"Unknown",o));return M({},n,r)}function Mo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$o,Oo=To.current,Io(To,e),Io(Ao,Ao.current),!0}function zo(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=_o(e,t,Oo),r.__reactInternalMemoizedMergedChildContext=e,No(Ao),No(To),Io(To,e)):No(Ao),Io(Ao,n)}var Lo=null,Bo=!1,jo=!1;function Ho(e){null===Lo?Lo=[e]:Lo.push(e)}function Vo(){if(!jo&&null!==Lo){jo=!0;var e=0,t=yt;try{var n=Lo;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Lo=null,Bo=!1}catch(o){throw null!==Lo&&(Lo=Lo.slice(e+1)),Ke(Ze,Vo),o}finally{yt=t,jo=!1}}return null}var Wo=[],Go=0,Uo=null,Ko=0,qo=[],Xo=0,Jo=null,Yo=1,Qo="";function Zo(e,t){Wo[Go++]=Ko,Wo[Go++]=Uo,Uo=e,Ko=t}function ea(e,t,n){qo[Xo++]=Yo,qo[Xo++]=Qo,qo[Xo++]=Jo,Jo=e;var r=Yo;e=Qo;var o=32-it(r)-1;r&=~(1<<o),n+=1;var a=32-it(t)+o;if(30<a){var i=o-o%5;a=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Yo=1<<32-it(t)+o|n<<o|r,Qo=a+e}else Yo=1<<a|n<<o|r,Qo=e}function ta(e){null!==e.return&&(Zo(e,1),ea(e,1,0))}function na(e){for(;e===Uo;)Uo=Wo[--Go],Wo[Go]=null,Ko=Wo[--Go],Wo[Go]=null;for(;e===Jo;)Jo=qo[--Xo],qo[Xo]=null,Qo=qo[--Xo],qo[Xo]=null,Yo=qo[--Xo],qo[Xo]=null}var ra=null,oa=null,aa=!1,ia=null;function sa(e,t){var n=Ou(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function la(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,oa=uo(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,oa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Jo?{id:Yo,overflow:Qo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ou(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ra=e,oa=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(aa){var t=oa;if(t){var n=t;if(!la(e,t)){if(ua(e))throw Error(a(418));t=uo(n.nextSibling);var r=ra;t&&la(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,aa=!1,ra=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,aa=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function ha(e){if(e!==ra)return!1;if(!aa)return da(e),aa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oa)){if(ua(e))throw pa(),Error(a(418));for(;t;)sa(e,t),t=uo(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oa=uo(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oa=null}}else oa=ra?uo(e.stateNode.nextSibling):null;return!0}function pa(){for(var e=oa;e;)e=uo(e.nextSibling)}function fa(){oa=ra=null,aa=!1}function ma(e){null===ia?ia=[e]:ia.push(e)}var ga=w.ReactCurrentBatchConfig;function va(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var o=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=o.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ba(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ya(e){return(0,e._init)(e._payload)}function wa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Pu(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mu(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===C?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&ya(a)===t.type)?((r=o(t,n.props)).ref=va(e,t,n),r.return=e,r):((r=Du(n.type,n.key,n.props,null,e.mode,r)).ref=va(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zu(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Fu(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Du(t.type,t.key,t.props,null,e.mode,n)).ref=va(e,null,t),n.return=e,n;case k:return(t=zu(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||F(t))return(t=Fu(t,e.mode,n,null)).return=e,t;ba(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===o?u(e,t,n,r):null;case k:return n.key===o?c(e,t,n,r):null;case R:return p(e,t,(o=n._init)(n._payload),r)}if(te(n)||F(n))return null!==o?null:d(e,t,n,r,null);ba(e,n)}return null}function f(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case R:return f(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||F(r))return d(t,e=e.get(n)||null,r,o,null);ba(t,r)}return null}function m(o,a,s,l){for(var u=null,c=null,d=a,m=a=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(o,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(o,d),a=i(v,a,m),null===c?u=v:c.sibling=v,c=v,d=g}if(m===s.length)return n(o,d),aa&&Zo(o,m),u;if(null===d){for(;m<s.length;m++)null!==(d=h(o,s[m],l))&&(a=i(d,a,m),null===c?u=d:c.sibling=d,c=d);return aa&&Zo(o,m),u}for(d=r(o,d);m<s.length;m++)null!==(g=f(d,o,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=i(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(o,e)})),aa&&Zo(o,m),u}function g(o,s,l,u){var c=F(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var d=c=null,m=s,g=s=0,v=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var y=p(o,m,b.value,u);if(null===y){null===m&&(m=v);break}e&&m&&null===y.alternate&&t(o,m),s=i(y,s,g),null===d?c=y:d.sibling=y,d=y,m=v}if(b.done)return n(o,m),aa&&Zo(o,g),c;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=h(o,b.value,u))&&(s=i(b,s,g),null===d?c=b:d.sibling=b,d=b);return aa&&Zo(o,g),c}for(m=r(o,m);!b.done;g++,b=l.next())null!==(b=f(m,o,g,b.value,u))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),s=i(b,s,g),null===d?c=b:d.sibling=b,d=b);return e&&m.forEach((function(e){return t(o,e)})),aa&&Zo(o,g),c}return function e(r,a,i,l){if("object"===typeof i&&null!==i&&i.type===C&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case x:e:{for(var u=i.key,c=a;null!==c;){if(c.key===u){if((u=i.type)===C){if(7===c.tag){n(r,c.sibling),(a=o(c,i.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&ya(u)===c.type){n(r,c.sibling),(a=o(c,i.props)).ref=va(r,c,i),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}i.type===C?((a=Fu(i.props.children,r.mode,l,i.key)).return=r,r=a):((l=Du(i.type,i.key,i.props,null,r.mode,l)).ref=va(r,a,i),l.return=r,r=l)}return s(r);case k:e:{for(c=i.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){n(r,a.sibling),(a=o(a,i.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=zu(i,r.mode,l)).return=r,r=a}return s(r);case R:return e(r,a,(c=i._init)(i._payload),l)}if(te(i))return m(r,a,i,l);if(F(i))return g(r,a,i,l);ba(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(n(r,a.sibling),(a=o(a,i)).return=r,r=a):(n(r,a),(a=Mu(i,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var xa=wa(!0),ka=wa(!1),Ca=Eo(null),Sa=null,Ea=null,Na=null;function Ia(){Na=Ea=Sa=null}function $a(e){var t=Ca.current;No(Ca),e._currentValue=t}function Ta(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Aa(e,t){Sa=e,Na=Ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ys=!0),e.firstContext=null)}function Oa(e){var t=e._currentValue;if(Na!==e)if(e={context:e,memoizedValue:t,next:null},null===Ea){if(null===Sa)throw Error(a(308));Ea=e,Sa.dependencies={lanes:0,firstContext:e}}else Ea=Ea.next=e;return t}var Ra=null;function Pa(e){null===Ra?Ra=[e]:Ra.push(e)}function Da(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Pa(t)):(n.next=o.next,o.next=n),t.interleaved=n,Fa(e,r)}function Fa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var _a=!1;function Ma(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function za(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function La(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ba(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&$l)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Fa(e,n)}return null===(o=r.interleaved)?(t.next=t,Pa(r)):(t.next=o.next,o.next=t),r.interleaved=t,Fa(e,n)}function ja(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?o=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Va(e,t,n,r){var o=e.updateQueue;_a=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,u=l.next;l.next=null,null===i?a=u:i.next=u,i=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==i&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var d=o.baseState;for(i=0,c=u=l=null,s=a;;){var h=s.lane,p=s.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=M({},d,h);break e;case 2:_a=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,i|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===c&&(l=d),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=c,null!==(t=o.shared.interleaved)){o=t;do{i|=o.lane,o=o.next}while(o!==t)}else null===a&&(o.shared.lanes=0);_l|=i,e.lanes=i,e.memoizedState=d}}function Wa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(a(191,o));o.call(r)}}}var Ga={},Ua=Eo(Ga),Ka=Eo(Ga),qa=Eo(Ga);function Xa(e){if(e===Ga)throw Error(a(174));return e}function Ja(e,t){switch(Io(qa,t),Io(Ka,e),Io(Ua,Ga),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}No(Ua),Io(Ua,t)}function Ya(){No(Ua),No(Ka),No(qa)}function Qa(e){Xa(qa.current);var t=Xa(Ua.current),n=le(t,e.type);t!==n&&(Io(Ka,e),Io(Ua,n))}function Za(e){Ka.current===e&&(No(Ua),No(Ka))}var ei=Eo(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=[];function ri(){for(var e=0;e<ni.length;e++)ni[e]._workInProgressVersionPrimary=null;ni.length=0}var oi=w.ReactCurrentDispatcher,ai=w.ReactCurrentBatchConfig,ii=0,si=null,li=null,ui=null,ci=!1,di=!1,hi=0,pi=0;function fi(){throw Error(a(321))}function mi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function gi(e,t,n,r,o,i){if(ii=i,si=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oi.current=null===e||null===e.memoizedState?Zi:es,e=n(r,o),di){i=0;do{if(di=!1,hi=0,25<=i)throw Error(a(301));i+=1,ui=li=null,t.updateQueue=null,oi.current=ts,e=n(r,o)}while(di)}if(oi.current=Qi,t=null!==li&&null!==li.next,ii=0,ui=li=si=null,ci=!1,t)throw Error(a(300));return e}function vi(){var e=0!==hi;return hi=0,e}function bi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ui?si.memoizedState=ui=e:ui=ui.next=e,ui}function yi(){if(null===li){var e=si.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===ui?si.memoizedState:ui.next;if(null!==t)ui=t,li=e;else{if(null===e)throw Error(a(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===ui?si.memoizedState=ui=e:ui=ui.next=e}return ui}function wi(e,t){return"function"===typeof t?t(e):t}function xi(e){var t=yi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=li,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(null!==o){i=o.next,r=r.baseState;var l=s=null,u=null,c=i;do{var d=c.lane;if((ii&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,s=r):u=u.next=h,si.lanes|=d,_l|=d}c=c.next}while(null!==c&&c!==i);null===u?s=r:u.next=l,sr(r,t.memoizedState)||(ys=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{i=o.lane,si.lanes|=i,_l|=i,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ki(e){var t=yi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{i=e(i,s.action),s=s.next}while(s!==o);sr(i,t.memoizedState)||(ys=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ci(){}function Si(e,t){var n=si,r=yi(),o=t(),i=!sr(r.memoizedState,o);if(i&&(r.memoizedState=o,ys=!0),r=r.queue,_i(Ii.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==ui&&1&ui.memoizedState.tag){if(n.flags|=2048,Oi(9,Ni.bind(null,n,r,o,t),void 0,null),null===Tl)throw Error(a(349));0!==(30&ii)||Ei(n,t,o)}return o}function Ei(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ni(e,t,n,r){t.value=n,t.getSnapshot=r,$i(t)&&Ti(e)}function Ii(e,t,n){return n((function(){$i(t)&&Ti(e)}))}function $i(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ti(e){var t=Fa(e,1);null!==t&&nu(t,e,1,-1)}function Ai(e){var t=bi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:e},t.queue=e,e=e.dispatch=qi.bind(null,si,e),[t.memoizedState,e]}function Oi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ri(){return yi().memoizedState}function Pi(e,t,n,r){var o=bi();si.flags|=e,o.memoizedState=Oi(1|t,n,void 0,void 0===r?null:r)}function Di(e,t,n,r){var o=yi();r=void 0===r?null:r;var a=void 0;if(null!==li){var i=li.memoizedState;if(a=i.destroy,null!==r&&mi(r,i.deps))return void(o.memoizedState=Oi(t,n,a,r))}si.flags|=e,o.memoizedState=Oi(1|t,n,a,r)}function Fi(e,t){return Pi(8390656,8,e,t)}function _i(e,t){return Di(2048,8,e,t)}function Mi(e,t){return Di(4,2,e,t)}function zi(e,t){return Di(4,4,e,t)}function Li(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Di(4,4,Li.bind(null,t,e),n)}function ji(){}function Hi(e,t){var n=yi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Vi(e,t){var n=yi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wi(e,t,n){return 0===(21&ii)?(e.baseState&&(e.baseState=!1,ys=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),si.lanes|=n,_l|=n,e.baseState=!0),t)}function Gi(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=ai.transition;ai.transition={};try{e(!1),t()}finally{yt=n,ai.transition=r}}function Ui(){return yi().memoizedState}function Ki(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xi(e))Ji(t,n);else if(null!==(n=Da(e,t,n,r))){nu(n,e,r,eu()),Yi(n,t,r)}}function qi(e,t,n){var r=tu(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xi(e))Ji(t,o);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=a(i,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,i)){var l=t.interleaved;return null===l?(o.next=o,Pa(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(u){}null!==(n=Da(e,t,o,r))&&(nu(n,e,r,o=eu()),Yi(n,t,r))}}function Xi(e){var t=e.alternate;return e===si||null!==t&&t===si}function Ji(e,t){di=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Qi={readContext:Oa,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:!1},Zi={readContext:Oa,useCallback:function(e,t){return bi().memoizedState=[e,void 0===t?null:t],e},useContext:Oa,useEffect:Fi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pi(4194308,4,Li.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pi(4,2,e,t)},useMemo:function(e,t){var n=bi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ki.bind(null,si,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bi().memoizedState=e},useState:Ai,useDebugValue:ji,useDeferredValue:function(e){return bi().memoizedState=e},useTransition:function(){var e=Ai(!1),t=e[0];return e=Gi.bind(null,e[1]),bi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=si,o=bi();if(aa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Tl)throw Error(a(349));0!==(30&ii)||Ei(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Fi(Ii.bind(null,r,i,e),[e]),r.flags|=2048,Oi(9,Ni.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=bi(),t=Tl.identifierPrefix;if(aa){var n=Qo;t=":"+t+"R"+(n=(Yo&~(1<<32-it(Yo)-1)).toString(32)+n),0<(n=hi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Oa,useCallback:Hi,useContext:Oa,useEffect:_i,useImperativeHandle:Bi,useInsertionEffect:Mi,useLayoutEffect:zi,useMemo:Vi,useReducer:xi,useRef:Ri,useState:function(){return xi(wi)},useDebugValue:ji,useDeferredValue:function(e){return Wi(yi(),li.memoizedState,e)},useTransition:function(){return[xi(wi)[0],yi().memoizedState]},useMutableSource:Ci,useSyncExternalStore:Si,useId:Ui,unstable_isNewReconciler:!1},ts={readContext:Oa,useCallback:Hi,useContext:Oa,useEffect:_i,useImperativeHandle:Bi,useInsertionEffect:Mi,useLayoutEffect:zi,useMemo:Vi,useReducer:ki,useRef:Ri,useState:function(){return ki(wi)},useDebugValue:ji,useDeferredValue:function(e){var t=yi();return null===li?t.memoizedState=e:Wi(t,li.memoizedState,e)},useTransition:function(){return[ki(wi)[0],yi().memoizedState]},useMutableSource:Ci,useSyncExternalStore:Si,useId:Ui,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var os={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),o=tu(e),a=La(r,o);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ba(e,a,o))&&(nu(t,e,o,r),ja(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),o=tu(e),a=La(r,o);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ba(e,a,o))&&(nu(t,e,o,r),ja(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),o=La(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Ba(e,o,r))&&(nu(t,e,r,n),ja(t,e,r))}};function as(e,t,n,r,o,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(o,a))}function is(e,t,n){var r=!1,o=$o,a=t.contextType;return"object"===typeof a&&null!==a?a=Oa(a):(o=Po(t)?Oo:To.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ro(e,o):$o),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ma(e);var a=t.contextType;"object"===typeof a&&null!==a?o.context=Oa(a):(a=Po(t)?Oo:To.current,o.context=Ro(e,a)),o.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(rs(e,t,a,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&os.enqueueReplaceState(o,o.state,null),Va(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function us(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var o=n}catch(a){o="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:o,digest:null}}function cs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=La(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Gl=r),ds(0,t)},n}function fs(e,t,n){(n=La(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ds(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Ul?Ul=new Set([this]):Ul.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Eu.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=La(-1,1)).tag=2,Ba(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var bs=w.ReactCurrentOwner,ys=!1;function ws(e,t,n,r){t.child=null===e?ka(t,null,n,r):xa(t,e.child,n,r)}function xs(e,t,n,r,o){n=n.render;var a=t.ref;return Aa(t,o),r=gi(e,t,n,r,a,o),n=vi(),null===e||ys?(aa&&n&&ta(t),t.flags|=1,ws(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ws(e,t,o))}function ks(e,t,n,r,o){if(null===e){var a=n.type;return"function"!==typeof a||Ru(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Du(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Cs(e,t,a,r,o))}if(a=e.child,0===(e.lanes&o)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Ws(e,t,o)}return t.flags|=1,(e=Pu(a,r)).ref=t.ref,e.return=t,t.child=e}function Cs(e,t,n,r,o){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(ys=!1,t.pendingProps=r=a,0===(e.lanes&o))return t.lanes=e.lanes,Ws(e,t,o);0!==(131072&e.flags)&&(ys=!0)}}return Ns(e,t,n,r,o)}function Ss(e,t,n){var r=t.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Io(Pl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Io(Pl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Io(Pl,Rl),Rl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Io(Pl,Rl),Rl|=r;return ws(e,t,o,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ns(e,t,n,r,o){var a=Po(n)?Oo:To.current;return a=Ro(t,a),Aa(t,o),n=gi(e,t,n,r,a,o),r=vi(),null===e||ys?(aa&&r&&ta(t),t.flags|=1,ws(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ws(e,t,o))}function Is(e,t,n,r,o){if(Po(n)){var a=!0;Mo(t)}else a=!1;if(Aa(t,o),null===t.stateNode)Vs(e,t),is(t,n,r),ls(t,n,r,o),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var l=i.context,u=n.contextType;"object"===typeof u&&null!==u?u=Oa(u):u=Ro(t,u=Po(n)?Oo:To.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==r||l!==u)&&ss(t,i,r,u),_a=!1;var h=t.memoizedState;i.state=h,Va(t,r,i,o),l=t.memoizedState,s!==r||h!==l||Ao.current||_a?("function"===typeof c&&(rs(t,n,c,r),l=t.memoizedState),(s=_a||as(t,n,s,r,h,l,u))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=u,r=s):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,za(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ns(t.type,s),i.props=u,d=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Oa(l):l=Ro(t,l=Po(n)?Oo:To.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==d||h!==l)&&ss(t,i,r,l),_a=!1,h=t.memoizedState,i.state=h,Va(t,r,i,o);var f=t.memoizedState;s!==d||h!==f||Ao.current||_a?("function"===typeof p&&(rs(t,n,p,r),f=t.memoizedState),(u=_a||as(t,n,u,r,h,f,l)||!1)?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return $s(e,t,n,r,a,o)}function $s(e,t,n,r,o,a){Es(e,t);var i=0!==(128&t.flags);if(!r&&!i)return o&&zo(t,n,!1),Ws(e,t,a);r=t.stateNode,bs.current=t;var s=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=xa(t,e.child,null,a),t.child=xa(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,o&&zo(t,n,!0),t.child}function Ts(e){var t=e.stateNode;t.pendingContext?Fo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Fo(0,t.context,!1),Ja(e,t.containerInfo)}function As(e,t,n,r,o){return fa(),ma(o),t.flags|=256,ws(e,t,n,r),t.child}var Os,Rs,Ps,Ds,Fs={dehydrated:null,treeContext:null,retryLane:0};function _s(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ms(e,t,n){var r,o=t.pendingProps,i=ei.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Io(ei,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,s?(o=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=_u(l,o,0,null),e=Fu(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=_s(n),t.memoizedState=Fs,e):zs(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,o,i,s){if(n)return 256&t.flags?(t.flags&=-257,Ls(e,t,s,r=cs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=_u({mode:"visible",children:r.children},o,0,null),(i=Fu(i,o,s,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&xa(t,e.child,null,s),t.child.memoizedState=_s(s),t.memoizedState=Fs,i);if(0===(1&t.mode))return Ls(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,Ls(e,t,s,r=cs(i=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),ys||l){if(null!==(r=Tl)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==i.retryLane&&(i.retryLane=o,Fa(e,o),nu(r,e,o,-1))}return mu(),Ls(e,t,s,r=cs(Error(a(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Iu.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,oa=uo(o.nextSibling),ra=t,aa=!0,ia=null,null!==e&&(qo[Xo++]=Yo,qo[Xo++]=Qo,qo[Xo++]=Jo,Yo=e.id,Qo=e.overflow,Jo=t),t=zs(t,r.children),t.flags|=4096,t)}(e,t,l,o,r,i,n);if(s){s=o.fallback,l=t.mode,r=(i=e.child).sibling;var u={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==i?((o=t.child).childLanes=0,o.pendingProps=u,t.deletions=null):(o=Pu(i,u)).subtreeFlags=14680064&i.subtreeFlags,null!==r?s=Pu(r,s):(s=Fu(s,l,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,l=null===(l=e.child.memoizedState)?_s(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Fs,o}return e=(s=e.child).sibling,o=Pu(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function zs(e,t){return(t=_u({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ls(e,t,n,r){return null!==r&&ma(r),xa(t,e.child,null,n),(e=zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ta(e.return,t,n)}function js(e,t,n,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function Hs(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=ei.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Io(ei,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ti(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),js(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ti(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}js(t,!0,n,null,a);break;case"together":js(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),_l|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!aa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Us(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ks(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Us(t),null;case 1:case 17:return Po(t.type)&&Do(),Us(t),null;case 3:return r=t.stateNode,Ya(),No(Ao),No(To),ri(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ia&&(iu(ia),ia=null))),Rs(e,t),Us(t),null;case 5:Za(t);var o=Xa(qa.current);if(n=t.type,null!==e&&null!=t.stateNode)Ps(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Us(t),null}if(e=Xa(Ua.current),ha(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[po]=t,r[fo]=i,e=0!==(1&t.mode),n){case"dialog":Lr("cancel",r),Lr("close",r);break;case"iframe":case"object":case"embed":Lr("load",r);break;case"video":case"audio":for(o=0;o<Fr.length;o++)Lr(Fr[o],r);break;case"source":Lr("error",r);break;case"img":case"image":case"link":Lr("error",r),Lr("load",r);break;case"details":Lr("toggle",r);break;case"input":J(r,i),Lr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Lr("invalid",r);break;case"textarea":oe(r,i),Lr("invalid",r)}for(var l in be(n,i),o=null,i)if(i.hasOwnProperty(l)){var u=i[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==i.suppressHydrationWarning&&Qr(r.textContent,u,e),o=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==i.suppressHydrationWarning&&Qr(r.textContent,u,e),o=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Lr("scroll",r)}switch(n){case"input":U(r),Z(r,i,!0);break;case"textarea":U(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Zr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[po]=t,e[fo]=r,Os(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":Lr("cancel",e),Lr("close",e),o=r;break;case"iframe":case"object":case"embed":Lr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Fr.length;o++)Lr(Fr[o],e);o=r;break;case"source":Lr("error",e),o=r;break;case"img":case"image":case"link":Lr("error",e),Lr("load",e),o=r;break;case"details":Lr("toggle",e),o=r;break;case"input":J(e,r),o=X(e,r),Lr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=M({},r,{value:void 0}),Lr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Lr("invalid",e)}for(i in be(n,o),u=o)if(u.hasOwnProperty(i)){var c=u[i];"style"===i?ge(e,c):"dangerouslySetInnerHTML"===i?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===i?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(s.hasOwnProperty(i)?null!=c&&"onScroll"===i&&Lr("scroll",e):null!=c&&y(e,i,c,l))}switch(n){case"input":U(e),Z(e,r,!1);break;case"textarea":U(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Us(t),null;case 6:if(e&&null!=t.stateNode)Ds(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Xa(qa.current),Xa(Ua.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[po]=t,(i=r.nodeValue!==n)&&null!==(e=ra))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[po]=t,t.stateNode=r}return Us(t),null;case 13:if(No(ei),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(aa&&null!==oa&&0!==(1&t.mode)&&0===(128&t.flags))pa(),fa(),t.flags|=98560,i=!1;else if(i=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[po]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Us(t),i=!1}else null!==ia&&(iu(ia),ia=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ei.current)?0===Dl&&(Dl=3):mu())),null!==t.updateQueue&&(t.flags|=4),Us(t),null);case 4:return Ya(),Rs(e,t),null===e&&Hr(t.stateNode.containerInfo),Us(t),null;case 10:return $a(t.type._context),Us(t),null;case 19:if(No(ei),null===(i=t.memoizedState))return Us(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Gs(i,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ti(e))){for(t.flags|=128,Gs(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Io(ei,1&ei.current|2),t.child}e=e.sibling}null!==i.tail&&Ye()>Hl&&(t.flags|=128,r=!0,Gs(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ti(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!aa)return Us(t),null}else 2*Ye()-i.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Gs(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ye(),t.sibling=null,n=ei.current,Io(ei,r?1&n|2:1&n),t):(Us(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Us(t),6&t.subtreeFlags&&(t.flags|=8192)):Us(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function qs(e,t){switch(na(t),t.tag){case 1:return Po(t.type)&&Do(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ya(),No(Ao),No(To),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(No(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return No(ei),null;case 4:return Ya(),null;case 10:return $a(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rs=function(){},Ps=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Xa(Ua.current);var a,i=null;switch(n){case"input":o=X(e,o),r=X(e,r),i=[];break;case"select":o=M({},o,{value:void 0}),r=M({},r,{value:void 0}),i=[];break;case"textarea":o=re(e,o),r=re(e,r),i=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in be(n,r),n=null,o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&null!=o[c])if("style"===c){var l=o[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=o?o[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(i=i||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(i=i||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Lr("scroll",e),i||l===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xs=!1,Js=!1,Ys="function"===typeof WeakSet?WeakSet:Set,Qs=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Su(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Su(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,void 0!==a&&el(t,n,a)}o=o.next}while(o!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[po],delete t[fo],delete t[go],delete t[vo],delete t[bo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:Js||Zs(n,t);case 6:var r=cl,o=dl;cl=null,hl(e,t,n),dl=o,null!==(cl=r)&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),Ht(e)):lo(cl,n.stateNode));break;case 4:r=cl,o=dl,cl=n.stateNode.containerInfo,dl=!0,hl(e,t,n),cl=r,dl=o;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var a=o,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&el(n,t,i),o=o.next}while(o!==r)}hl(e,t,n);break;case 1:if(!Js&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Su(n,t,s)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,hl(e,t,n),Js=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ys),t.forEach((function(t){var r=$u.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,dl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===cl)throw Error(a(160));pl(i,s,o),cl=null,dl=!1;var u=o.alternate;null!==u&&(u.return=null),o.return=null}catch(c){Su(o,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Su(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Su(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(g){Su(e,e.return,g)}}if(4&r&&null!=(o=e.stateNode)){var i=e.memoizedProps,s=null!==n?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===i.type&&null!=i.name&&Y(o,i),ye(l,s);var c=ye(l,i);for(s=0;s<u.length;s+=2){var d=u[s],h=u[s+1];"style"===d?ge(o,h):"dangerouslySetInnerHTML"===d?de(o,h):"children"===d?he(o,h):y(o,d,h,c)}switch(l){case"input":Q(o,i);break;case"textarea":ae(o,i);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var f=i.value;null!=f?ne(o,!!i.multiple,f,!1):p!==!!i.multiple&&(null!=i.defaultValue?ne(o,!!i.multiple,i.defaultValue,!0):ne(o,!!i.multiple,i.multiple?[]:"",!1))}o[fo]=i}catch(g){Su(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(a(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(g){Su(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){Su(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(o=e.child).flags&&(i=null!==o.memoizedState,o.stateNode.isHidden=i,!i||null!==o.alternate&&null!==o.alternate.memoizedState||(jl=Ye())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(c=Js)||d,ml(t,e),Js=c):ml(t,e),vl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Qs=e,d=e.child;null!==d;){for(h=Qs=d;null!==Qs;){switch(f=(p=Qs).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zs(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Su(r,n,g)}}break;case 5:Zs(p,p.return);break;case 22:if(null!==p.memoizedState){xl(h);continue}}null!==f?(f.return=p,Qs=f):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,c?"function"===typeof(i=o.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,s=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",s))}catch(g){Su(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Su(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(he(o,""),r.flags&=-33),ul(e,sl(e),o);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,sl(e),i);break;default:throw Error(a(161))}}catch(s){Su(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Qs=e,yl(e,t,n)}function yl(e,t,n){for(var r=0!==(1&e.mode);null!==Qs;){var o=Qs,a=o.child;if(22===o.tag&&r){var i=null!==o.memoizedState||Xs;if(!i){var s=o.alternate,l=null!==s&&null!==s.memoizedState||Js;s=Xs;var u=Js;if(Xs=i,(Js=l)&&!u)for(Qs=o;null!==Qs;)l=(i=Qs).child,22===i.tag&&null!==i.memoizedState?kl(o):null!==l?(l.return=i,Qs=l):kl(o);for(;null!==a;)Qs=a,yl(a,t,n),a=a.sibling;Qs=o,Xs=s,Js=u}wl(e)}else 0!==(8772&o.subtreeFlags)&&null!==a?(a.return=o,Qs=a):wl(e)}}function wl(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Wa(t,i,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wa(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(a(163))}Js||512&t.flags&&ol(t)}catch(p){Su(t,t.return,p)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function xl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function kl(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Su(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(l){Su(t,o,l)}}var a=t.return;try{ol(t)}catch(l){Su(t,a,l)}break;case 5:var i=t.return;try{ol(t)}catch(l){Su(t,i,l)}}}catch(l){Su(t,t.return,l)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var Cl,Sl=Math.ceil,El=w.ReactCurrentDispatcher,Nl=w.ReactCurrentOwner,Il=w.ReactCurrentBatchConfig,$l=0,Tl=null,Al=null,Ol=0,Rl=0,Pl=Eo(0),Dl=0,Fl=null,_l=0,Ml=0,zl=0,Ll=null,Bl=null,jl=0,Hl=1/0,Vl=null,Wl=!1,Gl=null,Ul=null,Kl=!1,ql=null,Xl=0,Jl=0,Yl=null,Ql=-1,Zl=0;function eu(){return 0!==(6&$l)?Ye():-1!==Ql?Ql:Ql=Ye()}function tu(e){return 0===(1&e.mode)?1:0!==(2&$l)&&0!==Ol?Ol&-Ol:null!==ga.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nu(e,t,n,r){if(50<Jl)throw Jl=0,Yl=null,Error(a(185));vt(e,n,r),0!==(2&$l)&&e===Tl||(e===Tl&&(0===(2&$l)&&(Ml|=n),4===Dl&&su(e,Ol)),ru(e,r),1===n&&0===$l&&0===(1&t.mode)&&(Hl=Ye()+500,Bo&&Vo()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),s=1<<i,l=o[i];-1===l?0!==(s&n)&&0===(s&r)||(o[i]=pt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Tl?Ol:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Bo=!0,Ho(e)}(lu.bind(null,e)):Ho(lu.bind(null,e)),io((function(){0===(6&$l)&&Vo()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tu(n,ou.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ou(e,t){if(Ql=-1,Zl=0,0!==(6&$l))throw Error(a(327));var n=e.callbackNode;if(ku()&&e.callbackNode!==n)return null;var r=ht(e,e===Tl?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var o=$l;$l|=2;var i=fu();for(Tl===e&&Ol===t||(Vl=null,Hl=Ye()+500,hu(e,t));;)try{bu();break}catch(l){pu(e,l)}Ia(),El.current=i,$l=o,null!==Al?t=0:(Tl=null,Ol=0,t=Dl)}if(0!==t){if(2===t&&(0!==(o=ft(e))&&(r=o,t=au(e,o))),1===t)throw n=Fl,hu(e,0),su(e,r),ru(e,Ye()),n;if(6===t)su(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!sr(a(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=gu(e,r))&&(0!==(i=ft(e))&&(r=i,t=au(e,i))),1===t))throw n=Fl,hu(e,0),su(e,r),ru(e,Ye()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xu(e,Bl,Vl);break;case 3:if(su(e,r),(130023424&r)===r&&10<(t=jl+500-Ye())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(xu.bind(null,e,Bl,Vl),t);break}xu(e,Bl,Vl);break;case 4:if(su(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-it(r);i=1<<s,(s=t[s])>o&&(o=s),r&=~i}if(r=o,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ro(xu.bind(null,e,Bl,Vl),r);break}xu(e,Bl,Vl);break;default:throw Error(a(329))}}}return ru(e,Ye()),e.callbackNode===n?ou.bind(null,e):null}function au(e,t){var n=Ll;return e.current.memoizedState.isDehydrated&&(hu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=Bl,Bl=n,null!==t&&iu(t)),e}function iu(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function su(e,t){for(t&=~zl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&$l))throw Error(a(327));ku();var t=ht(e,0);if(0===(1&t))return ru(e,Ye()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=au(e,r))}if(1===n)throw n=Fl,hu(e,0),su(e,t),ru(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xu(e,Bl,Vl),ru(e,Ye()),null}function uu(e,t){var n=$l;$l|=1;try{return e(t)}finally{0===($l=n)&&(Hl=Ye()+500,Bo&&Vo())}}function cu(e){null!==ql&&0===ql.tag&&0===(6&$l)&&ku();var t=$l;$l|=1;var n=Il.transition,r=yt;try{if(Il.transition=null,yt=1,e)return e()}finally{yt=r,Il.transition=n,0===(6&($l=t))&&Vo()}}function du(){Rl=Pl.current,No(Pl)}function hu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Do();break;case 3:Ya(),No(Ao),No(To),ri();break;case 5:Za(r);break;case 4:Ya();break;case 13:case 19:No(ei);break;case 10:$a(r.type._context);break;case 22:case 23:du()}n=n.return}if(Tl=e,Al=e=Pu(e.current,null),Ol=Rl=t,Dl=0,Fl=null,zl=Ml=_l=0,Bl=Ll=null,null!==Ra){for(t=0;t<Ra.length;t++)if(null!==(r=(n=Ra[t]).interleaved)){n.interleaved=null;var o=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=o,r.next=i}n.pending=r}Ra=null}return e}function pu(e,t){for(;;){var n=Al;try{if(Ia(),oi.current=Qi,ci){for(var r=si.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ci=!1}if(ii=0,ui=li=si=null,di=!1,hi=0,Nl.current=null,null===n||null===n.return){Dl=1,Fl=t,Al=null;break}e:{var i=e,s=n.return,l=n,u=t;if(t=Ol,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,vs(f,s,l,0,t),1&f.mode&&ms(i,c,t),u=c;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){ms(i,c,t),mu();break e}u=Error(a(426))}else if(aa&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),ma(us(u,l));break e}}i=u=us(u,l),4!==Dl&&(Dl=2),null===Ll?Ll=[i]:Ll.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ha(i,ps(0,u,t));break e;case 1:l=u;var b=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Ul||!Ul.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,Ha(i,fs(i,l,t));break e}}i=i.return}while(null!==i)}wu(n)}catch(w){t=w,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function fu(){var e=El.current;return El.current=Qi,null===e?Qi:e}function mu(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Tl||0===(268435455&_l)&&0===(268435455&Ml)||su(Tl,Ol)}function gu(e,t){var n=$l;$l|=2;var r=fu();for(Tl===e&&Ol===t||(Vl=null,hu(e,t));;)try{vu();break}catch(o){pu(e,o)}if(Ia(),$l=n,El.current=r,null!==Al)throw Error(a(261));return Tl=null,Ol=0,Dl}function vu(){for(;null!==Al;)yu(Al)}function bu(){for(;null!==Al&&!Xe();)yu(Al)}function yu(e){var t=Cl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?wu(e):Al=t,Nl.current=null}function wu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ks(n,t,Rl)))return void(Al=n)}else{if(null!==(n=qs(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Dl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Dl&&(Dl=5)}function xu(e,t,n){var r=yt,o=Il.transition;try{Il.transition=null,yt=1,function(e,t,n,r){do{ku()}while(null!==ql);if(0!==(6&$l))throw Error(a(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-it(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}(e,i),e===Tl&&(Al=Tl=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Tu(tt,(function(){return ku(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Il.transition,Il.transition=null;var s=yt;yt=1;var l=$l;$l|=4,Nl.current=null,function(e,t){if(eo=Wt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(x){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==o&&3!==h.nodeType||(l=s+o),h!==i||0!==r&&3!==h.nodeType||(u=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++c===o&&(l=s),p===i&&++d===r&&(u=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Wt=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(x){Su(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(to),Wt=!!eo,to=eo=null,e.current=n,bl(n,e,o),Je(),$l=l,yt=s,Il.transition=i}else e.current=n;if(Kl&&(Kl=!1,ql=e,Xl=o),i=e.pendingLanes,0===i&&(Ul=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Wl)throw Wl=!1,e=Gl,Gl=null,e;0!==(1&Xl)&&0!==e.tag&&ku(),i=e.pendingLanes,0!==(1&i)?e===Yl?Jl++:(Jl=0,Yl=e):Jl=0,Vo()}(e,t,n,r)}finally{Il.transition=o,yt=r}return null}function ku(){if(null!==ql){var e=wt(Xl),t=Il.transition,n=yt;try{if(Il.transition=null,yt=16>e?16:e,null===ql)var r=!1;else{if(e=ql,ql=null,Xl=0,0!==(6&$l))throw Error(a(331));var o=$l;for($l|=4,Qs=e.current;null!==Qs;){var i=Qs,s=i.child;if(0!==(16&Qs.flags)){var l=i.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Qs=c;null!==Qs;){var d=Qs;switch(d.tag){case 0:case 11:case 15:nl(8,d,i)}var h=d.child;if(null!==h)h.return=d,Qs=h;else for(;null!==Qs;){var p=(d=Qs).sibling,f=d.return;if(al(d),d===c){Qs=null;break}if(null!==p){p.return=f,Qs=p;break}Qs=f}}}var m=i.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Qs=i}}if(0!==(2064&i.subtreeFlags)&&null!==s)s.return=i,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(i=Qs).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var b=i.sibling;if(null!==b){b.return=i.return,Qs=b;break e}Qs=i.return}}var y=e.current;for(Qs=y;null!==Qs;){var w=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Qs=w;else e:for(s=y;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){Su(l,l.return,k)}if(l===s){Qs=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Qs=x;break e}Qs=l.return}}if($l=o,Vo(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(ot,e)}catch(k){}r=!0}return r}finally{yt=n,Il.transition=t}}return!1}function Cu(e,t,n){e=Ba(e,t=ps(0,t=us(n,t),1),1),t=eu(),null!==e&&(vt(e,1,t),ru(e,t))}function Su(e,t,n){if(3===e.tag)Cu(e,e,n);else for(;null!==t;){if(3===t.tag){Cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ul||!Ul.has(r))){t=Ba(t,e=fs(t,e=us(n,e),1),1),e=eu(),null!==t&&(vt(t,1,e),ru(t,e));break}}t=t.return}}function Eu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Ol&n)===n&&(4===Dl||3===Dl&&(130023424&Ol)===Ol&&500>Ye()-jl?hu(e,0):zl|=n),ru(e,t)}function Nu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Fa(e,t))&&(vt(e,t,n),ru(e,n))}function Iu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nu(e,n)}function $u(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Nu(e,n)}function Tu(e,t){return Ke(e,t)}function Au(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ou(e,t,n,r){return new Au(e,t,n,r)}function Ru(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pu(e,t){var n=e.alternate;return null===n?((n=Ou(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Du(e,t,n,r,o,i){var s=2;if(r=e,"function"===typeof e)Ru(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case C:return Fu(n.children,o,i,t);case S:s=8,o|=8;break;case E:return(e=Ou(12,n,t,2|o)).elementType=E,e.lanes=i,e;case T:return(e=Ou(13,n,t,o)).elementType=T,e.lanes=i,e;case A:return(e=Ou(19,n,t,o)).elementType=A,e.lanes=i,e;case P:return _u(n,o,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:s=10;break e;case I:s=9;break e;case $:s=11;break e;case O:s=14;break e;case R:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ou(s,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Fu(e,t,n,r){return(e=Ou(7,e,r,t)).lanes=n,e}function _u(e,t,n,r){return(e=Ou(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Mu(e,t,n){return(e=Ou(6,e,null,t)).lanes=n,e}function zu(e,t,n){return(t=Ou(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lu(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Bu(e,t,n,r,o,a,i,s,l){return e=new Lu(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ou(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ma(a),e}function ju(e){if(!e)return $o;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Po(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Po(n))return _o(e,n,t)}return t}function Hu(e,t,n,r,o,a,i,s,l){return(e=Bu(n,r,!0,e,0,a,0,s,l)).context=ju(null),n=e.current,(a=La(r=eu(),o=tu(n))).callback=void 0!==t&&null!==t?t:null,Ba(n,a,o),e.current.lanes=o,vt(e,o,r),ru(e,r),e}function Vu(e,t,n,r){var o=t.current,a=eu(),i=tu(o);return n=ju(n),null===t.context?t.context=n:t.pendingContext=n,(t=La(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ba(o,t,i))&&(nu(e,o,i,a),ja(e,o,i)),i}function Wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Uu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ao.current)ys=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ys=!1,function(e,t,n){switch(t.tag){case 3:Ts(t),fa();break;case 5:Qa(t);break;case 1:Po(t.type)&&Mo(t);break;case 4:Ja(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Io(Ca,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Io(ei,1&ei.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ms(e,t,n):(Io(ei,1&ei.current),null!==(e=Ws(e,t,n))?e.sibling:null);Io(ei,1&ei.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Hs(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Io(ei,ei.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Ws(e,t,n)}(e,t,n);ys=0!==(131072&e.flags)}else ys=!1,aa&&0!==(1048576&t.flags)&&ea(t,Ko,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vs(e,t),e=t.pendingProps;var o=Ro(t,To.current);Aa(t,n),o=gi(null,t,r,e,o,n);var i=vi();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Po(r)?(i=!0,Mo(t)):i=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ma(t),o.updater=os,t.stateNode=o,o._reactInternals=t,ls(t,r,e,n),t=$s(null,t,r,!0,i,n)):(t.tag=0,aa&&i&&ta(t),ws(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Ru(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===$)return 11;if(e===O)return 14}return 2}(r),e=ns(r,e),o){case 0:t=Ns(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=ks(null,t,r,ns(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ns(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 1:return r=t.type,o=t.pendingProps,Is(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 3:e:{if(Ts(t),null===e)throw Error(a(387));r=t.pendingProps,o=(i=t.memoizedState).element,za(e,t),Va(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=As(e,t,r,n,o=us(Error(a(423)),t));break e}if(r!==o){t=As(e,t,r,n,o=us(Error(a(424)),t));break e}for(oa=uo(t.stateNode.containerInfo.firstChild),ra=t,aa=!0,ia=null,n=ka(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===o){t=Ws(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return Qa(t),null===e&&ca(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==i&&no(r,i)&&(t.flags|=32),Es(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Ms(e,t,n);case 4:return Ja(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xa(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,xs(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,Io(Ca,r._currentValue),r._currentValue=s,null!==i)if(sr(i.value,s)){if(i.children===o.children&&!Ao.current){t=Ws(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){s=i.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===i.tag){(u=La(-1,n&-n)).tag=2;var c=i.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=n,null!==(u=i.alternate)&&(u.lanes|=n),Ta(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===i.tag)s=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ta(s,n,t),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===t){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}ws(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Aa(t,n),r=r(o=Oa(o)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return o=ns(r=t.type,t.pendingProps),ks(e,t,r,o=ns(r.type,o),n);case 15:return Cs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ns(r,o),Vs(e,t),t.tag=1,Po(r)?(e=!0,Mo(t)):e=!1,Aa(t,n),is(t,r,o),ls(t,r,o,n),$s(null,t,r,!0,e,n);case 19:return Hs(e,t,n);case 22:return Ss(e,t,n)}throw Error(a(156,t.tag))};var Ku="function"===typeof reportError?reportError:function(e){console.error(e)};function qu(e){this._internalRoot=e}function Xu(e){this._internalRoot=e}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qu(){}function Zu(e,t,n,r,o){var a=n._reactRootContainer;if(a){var i=a;if("function"===typeof o){var s=o;o=function(){var e=Wu(i);s.call(e)}}Vu(t,i,e,o)}else i=function(e,t,n,r,o){if(o){if("function"===typeof r){var a=r;r=function(){var e=Wu(i);a.call(e)}}var i=Hu(t,r,e,0,null,!1,0,"",Qu);return e._reactRootContainer=i,e[mo]=i.current,Hr(8===e.nodeType?e.parentNode:e),cu(),i}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=Wu(l);s.call(e)}}var l=Bu(e,0,!1,null,0,!1,0,"",Qu);return e._reactRootContainer=l,e[mo]=l.current,Hr(8===e.nodeType?e.parentNode:e),cu((function(){Vu(t,l,n,r)})),l}(n,t,e,o,r);return Wu(i)}Xu.prototype.render=qu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vu(e,t,null,null)},Xu.prototype.unmount=qu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){Vu(null,e,null,null)})),t[mo]=null}},Xu.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),ru(t,Ye()),0===(6&$l)&&(Hl=Ye()+500,Vo()))}break;case 13:cu((function(){var t=Fa(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),Uu(e,1)}},kt=function(e){if(13===e.tag){var t=Fa(e,134217728);if(null!==t)nu(t,e,134217728,eu());Uu(e,134217728)}},Ct=function(e){if(13===e.tag){var t=tu(e),n=Fa(e,t);if(null!==n)nu(n,e,t,eu());Uu(e,t)}},St=function(){return yt},Et=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},ke=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ko(r);if(!o)throw Error(a(90));K(r),Q(r,o)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},$e=uu,Te=cu;var ec={usingClientEntryPoint:!1,Events:[wo,xo,ko,Ne,Ie,uu]},tc={findFiberByHostInstance:yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{ot=rc.inject(nc),at=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ju(e))throw Error(a(299));var n=!1,r="",o=Ku;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Bu(e,1,!1,null,0,n,0,r,o),e[mo]=t.current,Hr(8===e.nodeType?e.parentNode:e),new qu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Yu(t))throw Error(a(200));return Zu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ju(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,o=!1,i="",s=Ku;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Hu(t,null,e,1,null!=n?n:null,o,0,i,s),e[mo]=t.current,Hr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Xu(t)},t.render=function(e,t,n){if(!Yu(t))throw Error(a(200));return Zu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yu(e))throw Error(a(40));return!!e._reactRootContainer&&(cu((function(){Zu(null,null,e,!1,(function(){e._reactRootContainer=null,e[mo]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yu(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:o,type:e,key:u,ref:c,props:a,_owner:s.current}}t.jsx=u,t.jsxs=u},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var w=y.prototype=new b;w.constructor=y,m(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,C={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var o,a={},i=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)k.call(t,o)&&!S.hasOwnProperty(o)&&(a[o]=t[o]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===a[o]&&(a[o]=l[o]);return{$$typeof:n,type:e,key:i,ref:s,props:a,_owner:C.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function $(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,o,a,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===a?"."+$(l,0):a,x(i)?(o="",null!=e&&(o=e.replace(I,"$&/")+"/"),T(i,t,o,"",(function(e){return e}))):null!=i&&(N(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,o+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(I,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",x(e))for(var u=0;u<e.length;u++){var c=a+$(s=e[u],u);l+=T(s,t,o,c,i)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=T(s=s.value,t,o,c=a+$(s,u++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],o=0;return T(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:C};function F(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=i,t.PureComponent=y,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=F,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),a=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=C.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)k.call(t,u)&&!S.hasOwnProperty(u)&&(o[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}return{$$typeof:n,type:e.type,key:a,ref:i,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=F,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,i=o>>>1;r<i;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<o&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<o&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)o(c);else{if(!(t.startTime<=e))break;o(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function x(e){if(g=!1,w(e),!m)if(null!==r(u))m=!0,P(k);else{var t=r(c);null!==t&&D(x,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,b(N),N=-1),f=!0;var a=p;try{for(w(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!T());){var i=h.callback;if("function"===typeof i){h.callback=null,p=h.priorityLevel;var s=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(u)&&o(u),w(n)}else o(u);h=r(u)}if(null!==h)var l=!0;else{var d=r(c);null!==d&&D(x,d.startTime-n),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,S=!1,E=null,N=-1,I=5,$=-1;function T(){return!(t.unstable_now()-$<I)}function A(){if(null!==E){var e=t.unstable_now();$=e;var n=!0;try{n=E(!0,e)}finally{n?C():(S=!1,E=null)}}else S=!1}if("function"===typeof y)C=function(){y(A)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=A,C=function(){R.postMessage(null)}}else C=function(){v(A,0)};function P(e){E=e,S||(S=!0,C())}function D(e,n){N=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,P(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>i?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(g?(b(N),N=-1):g=!0,D(x,a-i))):(e.sortIndex=s,n(u,e),m||f||(m=!0,P(k))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},334:(e,t,n)=>{var r=n(359),o=n(66),a=n(16),i=n(538),s=n(288),l=n(262),u=n(430);u.alea=r,u.xor128=o,u.xorwow=a,u.xorshift7=i,u.xor4096=s,u.tychei=l,e.exports=u},359:function(e,t,n){var r;!function(e,o){function a(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new a(e),r=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.alea=s}(0,e=n.nmd(e),n.amdD)},262:function(e,t,n){var r;!function(e,o){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.tychei=s}(0,e=n.nmd(e),n.amdD)},66:function(e,t,n){var r;!function(e,o){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.xor128=s}(0,e=n.nmd(e),n.amdD)},288:function(e,t,n){var r;!function(e,o){function a(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,a=t.i;return t.w=r=r+1640531527|0,n=o[a+34&127],e=o[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,o,a,i,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),o=0,a=-32;a<l;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=i+1640531527|0,o=0==(n=s[127&a]^=r+i)?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,a=512;a>0;--a)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;e.w=i,e.X=s,e.i=o}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.X&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.xor4096=s}(0,e=n.nmd(e),n.amdD)},538:function(e,t,n){var r;!function(e,o){function a(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.x&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.xorshift7=s}(0,e=n.nmd(e),n.amdD)},16:function(e,t,n){var r;!function(e,o){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.xorwow=s}(0,e=n.nmd(e),n.amdD)},430:function(e,t,n){var r;!function(o,a,i){var s,l=256,u=i.pow(l,6),c=i.pow(2,52),d=2*c,h=255;function p(e,t,n){var r=[],h=v(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(a)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(l):(e=new Uint8Array(l),(o.crypto||o.msCrypto).getRandomValues(e)),b(e)}catch(r){var t=o.navigator,n=t&&t.plugins;return[+new Date,o,n,o.screen,b(a)]}}():e,3),r),p=new f(r),y=function(){for(var e=p.g(6),t=u,n=0;e<c;)e=(e+n)*l,t*=l,n=p.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|p.g(4)},y.quick=function(){return p.g(4)/4294967296},y.double=y,v(b(p.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,p),e.state=function(){return m(p,{})}),n?(i.random=e,t):e})(y,h,"global"in t?t.global:this==i,t.state)}function f(e){var t,n=e.length,r=this,o=0,a=r.i=r.j=0,i=r.S=[];for(n||(e=[n++]);o<l;)i[o]=o++;for(o=0;o<l;o++)i[o]=i[a=h&a+e[o%n]+(t=i[o])],i[a]=t;(r.g=function(e){for(var t,n=0,o=r.i,a=r.j,i=r.S;e--;)t=i[o=h&o+1],n=n*l+i[h&(i[o]=i[a=h&a+t])+(i[a]=t)];return r.i=o,r.j=a,n})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],o=typeof e;if(t&&"object"==o)for(n in e)try{r.push(g(e[n],t-1))}catch(a){}return r.length?r:"string"==o?e:e+"\0"}function v(e,t){for(var n,r=e+"",o=0;o<r.length;)t[h&o]=h&(n^=19*t[h&o])+r.charCodeAt(o++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(v(i.random(),a),e.exports){e.exports=p;try{s=n(996)}catch(y){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},520:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},817:()=>{},590:()=>{},78:()=>{},905:()=>{},637:()=>{},279:()=>{},222:()=>{},996:()=>{},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=i(e,a(n)))}return e}function a(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=i(t,n));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,n.d(a,i),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".0c3eae3a.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="websm:";n.l=(r,o,a,i)=>{if(e[r])e[r].push(o);else{var s,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+a){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[o];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/websm/",(()=>{var e={792:0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var a=new Promise(((n,r)=>o=e[t]=[n,r]));r.push(o[2]=a);var i=n.p+n.u(t),s=new Error;n.l(i,(r=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,o[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var o,a,i=r[0],s=r[1],l=r[2],u=0;if(i.some((t=>0!==e[t]))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(l)l(n)}for(t&&t(r);u<i.length;u++)a=i[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkwebsm=self.webpackChunkwebsm||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{assertParamsValid:()=>_M,computeFlatOffset:()=>XM,computeOutShape:()=>zM,getNormalizedAxes:()=>HM,isSliceContinous:()=>qM,maskToAxes:()=>MM,parseSliceParams:()=>JM,sliceInfo:()=>YM,startForAxis:()=>UM,startIndicesWithElidedDims:()=>VM,stopForAxis:()=>KM,stopIndicesWithElidedDims:()=>WM,stridesForAxis:()=>GM,stridesWithElidedDims:()=>LM});var t={};n.r(t),n.d(t,{collectGatherOpShapeInfo:()=>EH,computeOutShape:()=>SH,segOpComputeOptimalWindowSize:()=>CH});var r={};n.r(r),n.d(r,{ERF_A1:()=>jj,ERF_A2:()=>Hj,ERF_A3:()=>Vj,ERF_A4:()=>Wj,ERF_A5:()=>Gj,ERF_P:()=>Bj,PARALLELIZE_THRESHOLD:()=>Nj,RowPartitionType:()=>xj,SELU_SCALE:()=>Lj,SELU_SCALEALPHA:()=>zj,applyActivation:()=>fB,assertAndGetBroadcastShape:()=>yM,assertAxesAreInnerMostDims:()=>sL,assertParamsConsistent:()=>yj,assignToTypedArray:()=>Yj,axesAreInnerMostDims:()=>rL,calculateShapes:()=>Mj,checkEinsumDimSizes:()=>iH,checkPadOnDimRoundingMode:()=>gz,combineLocations:()=>oL,combineRaggedTensorToTensorShapes:()=>kj,complexWithEvenIndex:()=>qj,complexWithOddIndex:()=>Xj,computeConv2DInfo:()=>az,computeConv3DInfo:()=>iz,computeDefaultPad:()=>sz,computeDilation2DInfo:()=>nz,computeOptimalWindowSize:()=>Ij,computeOutAndReduceShapes:()=>aL,computeOutShape:()=>wj,computePool2DInfo:()=>rz,computePool3DInfo:()=>oz,convertConv2DDataFormat:()=>mz,decodeEinsumEquation:()=>oH,eitherStridesOrDilationsAreOne:()=>pz,expandShapeToKeepDim:()=>iL,exponent:()=>Zj,exponents:()=>Qj,fromStringArrayToUint8:()=>IH,fromUint8ToStringArray:()=>NH,getAxesPermutation:()=>lL,getBroadcastDims:()=>vM,getComplexWithIndex:()=>Jj,getEinsumComputePath:()=>sH,getEinsumPermutation:()=>aH,getFusedBiasGradient:()=>pB,getFusedDyActivation:()=>hB,getImageCenter:()=>$j,getInnerMostAxes:()=>cL,getPermuted:()=>Aj,getRaggedRank:()=>Sj,getReductionAxes:()=>bM,getReshaped:()=>Tj,getReshapedPermuted:()=>Oj,getRowPartitionTypesHelper:()=>Cj,getSliceBeginCoords:()=>Rj,getSliceSize:()=>Pj,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>dH,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>hH,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>pH,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>gH,getSparseReshapeInputOutputMismatchErrorMessage:()=>bH,getSparseReshapeInputOutputMultipleErrorMessage:()=>vH,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>fH,getSparseReshapeNegativeOutputDimErrorMessage:()=>mH,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>kH,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>yH,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>wH,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>xH,getUndoAxesPermutation:()=>uL,isIdentityPermutation:()=>lH,log:()=>TD,mergeRealAndImagArrays:()=>Uj,prepareAndValidate:()=>Dj,prepareSplitSize:()=>cH,segment_util:()=>t,shouldFuse:()=>mB,slice_util:()=>e,splitRealAndImagArrays:()=>Kj,stridesOrDilationsArePositive:()=>fz,tupleValuesAreOne:()=>hz,upcastType:()=>$F,validateDefaultValueShape:()=>Ej,validateInput:()=>_j,validateUpdateShape:()=>Fj,warn:()=>$D});var o={};n.r(o),n.d(o,{mx:()=>bQ,XI:()=>cZ,Nk:()=>dZ,f6:()=>pZ,ct:()=>pQ,YG:()=>gZ,hH:()=>kZ,z3:()=>i0,sG:()=>v0,uM:()=>k0,vS:()=>L0,qB:()=>K0,GG:()=>X0,lg:()=>e1,rq:()=>Y0,cu:()=>p1,WR:()=>c1,GE:()=>g1,px:()=>b1,jC:()=>P1,He:()=>_1,hE:()=>U1,BF:()=>QZ,Dk:()=>n2,cl:()=>c2,_B:()=>C2,ub:()=>$2,_f:()=>O2,Ku:()=>M2,qy:()=>L2,Zy:()=>Y2,bu:()=>e3,zv:()=>oQ,dH:()=>IQ,HS:()=>iZ,yH:()=>w3,l3:()=>k3,z9:()=>S3,x6:()=>T3,_m:()=>_3,eW:()=>j3,GK:()=>W3,SP:()=>K3,yr:()=>X3,dl:()=>$0,Dw:()=>t4,xT:()=>a4,_X:()=>DQ,wz:()=>h4});var a={};n.r(a),n.d(a,{browserFiles:()=>jie,browserHTTPRequest:()=>Jie,concatenateArrayBuffers:()=>Hae,copyModel:()=>$ie,decodeWeights:()=>zae,encodeWeights:()=>Mae,fromMemory:()=>ese,fromMemorySync:()=>tse,getLoadHandlers:()=>eie,getModelArtifactsForJSON:()=>Uae,getModelArtifactsForJSONSync:()=>Gae,getModelArtifactsInfoForJSON:()=>Kae,getSaveHandlers:()=>Zae,getWeightSpecs:()=>qae,http:()=>Xie,isHTTPScheme:()=>Kie,listModels:()=>Nie,loadWeights:()=>Wie,moveModel:()=>Tie,registerLoadRouter:()=>Qae,registerSaveRouter:()=>Yae,removeModel:()=>Iie,weightsLoaderFactory:()=>Gie,withSaveHandler:()=>nse,withSaveHandlerSync:()=>rse});var i={};n.r(i),n.d(i,{conv2d:()=>cde,depthwiseConv2d:()=>pde,matMul:()=>fde});var s={};n.r(s),n.d(s,{json:()=>Ehe});var l={};n.r(l),n.d(l,{json:()=>Nhe});var u={};n.r(u),n.d(u,{json:()=>Ihe});var c={};n.r(c),n.d(c,{json:()=>$he});var d={};n.r(d),n.d(d,{json:()=>The});var h={};n.r(h),n.d(h,{json:()=>Ahe});var p={};n.r(p),n.d(p,{json:()=>Ohe});var f={};n.r(f),n.d(f,{json:()=>Rhe});var m={};n.r(m),n.d(m,{json:()=>Phe});var g={};n.r(g),n.d(g,{json:()=>Dhe});var v={};n.r(v),n.d(v,{json:()=>Fhe});var b={};n.r(b),n.d(b,{json:()=>_he});var y={};n.r(y),n.d(y,{json:()=>Mhe});var w={};n.r(w),n.d(w,{json:()=>zhe});var x={};n.r(x),n.d(x,{json:()=>Lhe});var k={};n.r(k),n.d(k,{json:()=>Bhe});var C={};n.r(C),n.d(C,{json:()=>jhe});var S={};n.r(S),n.d(S,{json:()=>Hhe});var E={};n.r(E),n.d(E,{json:()=>Vhe});var N={};n.r(N),n.d(N,{OP_SCOPE_SUFFIX:()=>Aae,abs:()=>ose,acos:()=>ase,acosh:()=>ise,add:()=>sse,addN:()=>lse,all:()=>use,any:()=>cse,argMax:()=>dse,argMin:()=>hse,asin:()=>pse,asinh:()=>fse,atan:()=>mse,atan2:()=>gse,atanh:()=>vse,avgPool:()=>Ise,avgPool3d:()=>$se,basicLSTMCell:()=>Fse,batchNorm:()=>Mse,batchNorm2d:()=>zse,batchNorm3d:()=>Lse,batchNorm4d:()=>Bse,batchToSpaceND:()=>_se,bincount:()=>jse,booleanMaskAsync:()=>Uce,broadcastArgs:()=>Hse,broadcastTo:()=>Vse,buffer:()=>Die,cast:()=>Fie,ceil:()=>Wse,clipByValue:()=>Use,clone:()=>_ie,complex:()=>Rae,concat:()=>Tse,concat1d:()=>Kse,concat2d:()=>qse,concat3d:()=>Xse,concat4d:()=>Jse,conv1d:()=>Qse,conv2d:()=>Yse,conv2dTranspose:()=>ele,conv3d:()=>tle,conv3dTranspose:()=>rle,cos:()=>ole,cosh:()=>ale,cosineWindow:()=>rde,cumprod:()=>ile,cumsum:()=>sle,denseBincount:()=>lle,depthToSpace:()=>ule,depthwiseConv2d:()=>cle,diag:()=>dle,dilation2d:()=>hle,div:()=>fle,divNoNan:()=>yle,dot:()=>wle,dropout:()=>tde,einsum:()=>xle,elu:()=>kle,enclosingPowerOfTwo:()=>nde,equal:()=>gle,erf:()=>Cle,euclideanNorm:()=>Dle,exp:()=>Fle,expandDims:()=>_le,expm1:()=>Mle,eye:()=>Lle,fft:()=>xce,fill:()=>Gse,floor:()=>Ble,floorDiv:()=>ple,fused:()=>i,gather:()=>jle,gatherND:()=>ede,greater:()=>Hle,greaterEqual:()=>Vle,ifft:()=>kce,imag:()=>Wle,image:()=>uhe,inTopKAsync:()=>ode,irfft:()=>Cce,isFinite:()=>Gle,isInf:()=>Ule,isNaN:()=>Kle,leakyRelu:()=>qle,less:()=>Xle,lessEqual:()=>Jle,linalg:()=>che,linspace:()=>Yle,localResponseNormalization:()=>Qle,log:()=>Zle,log1p:()=>eue,logSigmoid:()=>oue,logSoftmax:()=>iue,logSumExp:()=>sue,logicalAnd:()=>lue,logicalNot:()=>uue,logicalOr:()=>cue,logicalXor:()=>due,losses:()=>dhe,lowerBound:()=>fue,matMul:()=>Ase,max:()=>Ele,maxPool:()=>mue,maxPool3d:()=>gue,maxPoolWithArgmax:()=>vue,maximum:()=>bue,mean:()=>yue,meshgrid:()=>kue,min:()=>Nle,minimum:()=>Cue,mirrorPad:()=>Sue,mod:()=>Eue,moments:()=>Nue,movingAverage:()=>Jce,mul:()=>Ose,multiRNNCell:()=>Iue,multinomial:()=>$ue,neg:()=>nue,norm:()=>Ple,notEqual:()=>Tue,oneHot:()=>Aue,ones:()=>xue,onesLike:()=>Oue,op:()=>Oae,outerProduct:()=>Rue,pad:()=>Pue,pad1d:()=>Due,pad2d:()=>Fue,pad3d:()=>_ue,pad4d:()=>Mue,pool:()=>Lue,pow:()=>Ile,prelu:()=>Bue,print:()=>Mie,prod:()=>jue,raggedGather:()=>Hue,raggedTensorToTensor:()=>Vue,rand:()=>Wue,randomGamma:()=>que,randomNormal:()=>Xue,randomStandardNormal:()=>Jue,randomUniform:()=>Yue,range:()=>Que,real:()=>Zue,reciprocal:()=>ece,relu:()=>tce,relu6:()=>nce,reshape:()=>Nse,reverse:()=>rce,reverse1d:()=>oce,reverse2d:()=>ace,reverse3d:()=>ice,reverse4d:()=>sce,rfft:()=>Ece,round:()=>lce,rsqrt:()=>uce,scalar:()=>$le,scatterND:()=>Qce,searchSorted:()=>pue,selu:()=>cce,separableConv2d:()=>dce,setdiff1dAsync:()=>hce,sigmoid:()=>Rse,sign:()=>pce,signal:()=>lhe,sin:()=>fce,sinh:()=>mce,slice:()=>Pse,slice1d:()=>gce,slice2d:()=>vce,slice3d:()=>bce,slice4d:()=>yce,softmax:()=>wce,softplus:()=>rue,spaceToBatchND:()=>zue,sparse:()=>hhe,sparseToDense:()=>Zce,spectral:()=>she,split:()=>Sce,sqrt:()=>Tle,square:()=>Ale,squaredDifference:()=>Nce,squeeze:()=>Ice,stack:()=>$ce,step:()=>Tce,stridedSlice:()=>Ace,string:()=>phe,sub:()=>aue,sum:()=>Ole,tan:()=>Oce,tanh:()=>Dse,tensor:()=>Dae,tensor1d:()=>Rce,tensor2d:()=>Pce,tensor3d:()=>Dce,tensor4d:()=>Fce,tensor5d:()=>_ce,tensor6d:()=>Mce,tile:()=>zle,topk:()=>zce,transpose:()=>Xce,truncatedNormal:()=>Lce,unique:()=>Bce,unsortedSegmentSum:()=>jce,unstack:()=>Hce,upperBound:()=>Vce,variable:()=>Wce,where:()=>vle,whereAsync:()=>Gce,zeros:()=>wue,zerosLike:()=>ble});var I=n(43),$=n.t(I,2),T=n(391);function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function O(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function R(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function P(e){return function(e){if(Array.isArray(e))return A(e)}(e)||O(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var D=n(139),F=n.n(D);function _(e,t){var n=Object.assign({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}const M="ant",z="anticon",L=["outlined","borderless","filled"],B=I.createContext({getPrefixCls:(e,t)=>t||(e?`${M}-${e}`:M),iconPrefixCls:z}),{Consumer:j}=B,H=I.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}});var V=n(816);function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return I.Children.forEach(e,(function(e){(void 0!==e&&null!==e||t.keepEmpty)&&(Array.isArray(e)?n=n.concat(W(e)):(0,V.isFragment)(e)&&e.props?n=n.concat(W(e.props.children,t)):n.push(e))})),n}function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(null,arguments)}const U={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"};function K(e){if(Array.isArray(e))return e}function q(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function X(e,t){return K(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return s}}(e,t)||R(e,t)||q()}function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function Y(e){var t=function(e,t){if("object"!=J(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==J(t)?t:t+""}function Q(e,t,n){return(t=Y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ee(e,t){(function(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function te(e){return Math.min(1,Math.max(0,e))}function ne(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function re(e){return e<=1?"".concat(100*Number(e),"%"):e}function oe(e){return 1===e.length?"0"+e:String(e)}function ae(e,t,n){e=ee(e,255),t=ee(t,255),n=ee(n,255);var r=Math.max(e,t,n),o=Math.min(e,t,n),a=0,i=0,s=(r+o)/2;if(r===o)i=0,a=0;else{var l=r-o;switch(i=s>.5?l/(2-r-o):l/(r+o),r){case e:a=(t-n)/l+(t<n?6:0);break;case t:a=(n-e)/l+2;break;case n:a=(e-t)/l+4}a/=6}return{h:a,s:i,l:s}}function ie(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function se(e,t,n){e=ee(e,255),t=ee(t,255),n=ee(n,255);var r=Math.max(e,t,n),o=Math.min(e,t,n),a=0,i=r,s=r-o,l=0===r?0:s/r;if(r===o)a=0;else{switch(r){case e:a=(t-n)/s+(t<n?6:0);break;case t:a=(n-e)/s+2;break;case n:a=(e-t)/s+4}a/=6}return{h:a,s:l,v:i}}function le(e,t,n,r){var o=[oe(Math.round(e).toString(16)),oe(Math.round(t).toString(16)),oe(Math.round(n).toString(16))];return r&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function ue(e){return Math.round(255*parseFloat(e)).toString(16)}function ce(e){return de(e)/255}function de(e){return parseInt(e,16)}var he={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function pe(e){var t={r:0,g:0,b:0},n=1,r=null,o=null,a=null,i=!1,s=!1;return"string"===typeof e&&(e=function(e){if(e=e.trim().toLowerCase(),0===e.length)return!1;var t=!1;if(he[e])e=he[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=ve.rgb.exec(e);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=ve.rgba.exec(e),n)return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=ve.hsl.exec(e),n)return{h:n[1],s:n[2],l:n[3]};if(n=ve.hsla.exec(e),n)return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=ve.hsv.exec(e),n)return{h:n[1],s:n[2],v:n[3]};if(n=ve.hsva.exec(e),n)return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=ve.hex8.exec(e),n)return{r:de(n[1]),g:de(n[2]),b:de(n[3]),a:ce(n[4]),format:t?"name":"hex8"};if(n=ve.hex6.exec(e),n)return{r:de(n[1]),g:de(n[2]),b:de(n[3]),format:t?"name":"hex"};if(n=ve.hex4.exec(e),n)return{r:de(n[1]+n[1]),g:de(n[2]+n[2]),b:de(n[3]+n[3]),a:ce(n[4]+n[4]),format:t?"name":"hex8"};if(n=ve.hex3.exec(e),n)return{r:de(n[1]+n[1]),g:de(n[2]+n[2]),b:de(n[3]+n[3]),format:t?"name":"hex"};return!1}(e)),"object"===typeof e&&(be(e.r)&&be(e.g)&&be(e.b)?(t=function(e,t,n){return{r:255*ee(e,255),g:255*ee(t,255),b:255*ee(n,255)}}(e.r,e.g,e.b),i=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):be(e.h)&&be(e.s)&&be(e.v)?(r=re(e.s),o=re(e.v),t=function(e,t,n){e=6*ee(e,360),t=ee(t,100),n=ee(n,100);var r=Math.floor(e),o=e-r,a=n*(1-t),i=n*(1-o*t),s=n*(1-(1-o)*t),l=r%6;return{r:255*[n,i,a,a,s,n][l],g:255*[s,n,n,i,a,a][l],b:255*[a,a,s,n,n,i][l]}}(e.h,r,o),i=!0,s="hsv"):be(e.h)&&be(e.s)&&be(e.l)&&(r=re(e.s),a=re(e.l),t=function(e,t,n){var r,o,a;if(e=ee(e,360),t=ee(t,100),n=ee(n,100),0===t)o=n,a=n,r=n;else{var i=n<.5?n*(1+t):n+t-n*t,s=2*n-i;r=ie(s,i,e+1/3),o=ie(s,i,e),a=ie(s,i,e-1/3)}return{r:255*r,g:255*o,b:255*a}}(e.h,r,a),i=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=ne(n),{ok:i,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var fe="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),me="[\\s|\\(]+(".concat(fe,")[,|\\s]+(").concat(fe,")[,|\\s]+(").concat(fe,")\\s*\\)?"),ge="[\\s|\\(]+(".concat(fe,")[,|\\s]+(").concat(fe,")[,|\\s]+(").concat(fe,")[,|\\s]+(").concat(fe,")\\s*\\)?"),ve={CSS_UNIT:new RegExp(fe),rgb:new RegExp("rgb"+me),rgba:new RegExp("rgba"+ge),hsl:new RegExp("hsl"+me),hsla:new RegExp("hsla"+ge),hsv:new RegExp("hsv"+me),hsva:new RegExp("hsva"+ge),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function be(e){return Boolean(ve.CSS_UNIT.exec(String(e)))}var ye=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function we(e){var t=se(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function xe(e){var t=e.r,n=e.g,r=e.b;return"#".concat(le(t,n,r,!1))}function ke(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-2*t:Math.round(e.h)+2*t:n?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?r+=360:r>=360&&(r-=360),r}function Ce(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(r=1),n&&5===t&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function Se(e,t,n){var r;return(r=n?e.v+.05*t:e.v-.15*t)>1&&(r=1),Number(r.toFixed(2))}function Ee(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=pe(e),o=5;o>0;o-=1){var a=we(r),i=xe(pe({h:ke(a,o,!0),s:Ce(a,o,!0),v:Se(a,o,!0)}));n.push(i)}n.push(xe(r));for(var s=1;s<=4;s+=1){var l=we(r),u=xe(pe({h:ke(l,s),s:Ce(l,s),v:Se(l,s)}));n.push(u)}return"dark"===t.theme?ye.map((function(e){var r=e.index,o=e.opacity,a=xe(function(e,t,n){var r=n/100;return{r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b}}(pe(t.backgroundColor||"#141414"),pe(n[r]),100*o));return a})):n}var Ne={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Ie=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];Ie.primary=Ie[5];var $e=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];$e.primary=$e[5];var Te=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];Te.primary=Te[5];var Ae=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];Ae.primary=Ae[5];var Oe=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];Oe.primary=Oe[5];var Re=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];Re.primary=Re[5];var Pe=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];Pe.primary=Pe[5];var De=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];De.primary=De[5];var Fe=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];Fe.primary=Fe[5];var _e=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];_e.primary=_e[5];var Me=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];Me.primary=Me[5];var ze=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];ze.primary=ze[5];var Le=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];Le.primary=Le[5];var Be={red:Ie,volcano:$e,orange:Te,gold:Ae,yellow:Oe,lime:Re,green:Pe,cyan:De,blue:Fe,geekblue:_e,purple:Me,magenta:ze,grey:Le},je=["#2a1215","#431418","#58181c","#791a1f","#a61d24","#d32029","#e84749","#f37370","#f89f9a","#fac8c3"];je.primary=je[5];var He=["#2b1611","#441d12","#592716","#7c3118","#aa3e19","#d84a1b","#e87040","#f3956a","#f8b692","#fad4bc"];He.primary=He[5];var Ve=["#2b1d11","#442a11","#593815","#7c4a15","#aa6215","#d87a16","#e89a3c","#f3b765","#f8cf8d","#fae3b7"];Ve.primary=Ve[5];var We=["#2b2111","#443111","#594214","#7c5914","#aa7714","#d89614","#e8b339","#f3cc62","#f8df8b","#faedb5"];We.primary=We[5];var Ge=["#2b2611","#443b11","#595014","#7c6e14","#aa9514","#d8bd14","#e8d639","#f3ea62","#f8f48b","#fafab5"];Ge.primary=Ge[5];var Ue=["#1f2611","#2e3c10","#3e4f13","#536d13","#6f9412","#8bbb11","#a9d134","#c9e75d","#e4f88b","#f0fab5"];Ue.primary=Ue[5];var Ke=["#162312","#1d3712","#274916","#306317","#3c8618","#49aa19","#6abe39","#8fd460","#b2e58b","#d5f2bb"];Ke.primary=Ke[5];var qe=["#112123","#113536","#144848","#146262","#138585","#13a8a8","#33bcb7","#58d1c9","#84e2d8","#b2f1e8"];qe.primary=qe[5];var Xe=["#111a2c","#112545","#15325b","#15417e","#1554ad","#1668dc","#3c89e8","#65a9f3","#8dc5f8","#b7dcfa"];Xe.primary=Xe[5];var Je=["#131629","#161d40","#1c2755","#203175","#263ea0","#2b4acb","#5273e0","#7f9ef3","#a8c1f8","#d2e0fa"];Je.primary=Je[5];var Ye=["#1a1325","#24163a","#301c4d","#3e2069","#51258f","#642ab5","#854eca","#ab7ae0","#cda8f0","#ebd7fa"];Ye.primary=Ye[5];var Qe=["#291321","#40162f","#551c3b","#75204f","#a02669","#cb2b83","#e0529c","#f37fb7","#f8a8cc","#fad2e3"];Qe.primary=Qe[5];var Ze=["#151515","#1f1f1f","#2d2d2d","#393939","#494949","#5a5a5a","#6a6a6a","#7b7b7b","#888888","#969696"];Ze.primary=Ze[5];const et=(0,I.createContext)({});function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rt(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}var ot="data-rc-order",at="data-rc-priority",it=new Map;function st(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):"rc-util-key"}function lt(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function ut(e){return Array.from((it.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!rt())return null;var n=t.csp,r=t.prepend,o=t.priority,a=void 0===o?0:o,i=function(e){return"queue"===e?"prependQueue":e?"prepend":"append"}(r),s="prependQueue"===i,l=document.createElement("style");l.setAttribute(ot,i),s&&a&&l.setAttribute(at,"".concat(a)),null!==n&&void 0!==n&&n.nonce&&(l.nonce=null===n||void 0===n?void 0:n.nonce),l.innerHTML=e;var u=lt(t),c=u.firstChild;if(r){if(s){var d=(t.styles||ut(u)).filter((function(e){if(!["prepend","prependQueue"].includes(e.getAttribute(ot)))return!1;var t=Number(e.getAttribute(at)||0);return a>=t}));if(d.length)return u.insertBefore(l,d[d.length-1].nextSibling),l}u.insertBefore(l,c)}else u.appendChild(l);return l}function dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=lt(t);return(t.styles||ut(n)).find((function(n){return n.getAttribute(st(t))===e}))}function ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=dt(e,t);n&&lt(t).removeChild(n)}function pt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=lt(n),o=ut(r),a=nt(nt({},n),{},{styles:o});!function(e,t){var n=it.get(e);if(!n||!function(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}(document,n)){var r=ct("",t),o=r.parentNode;it.set(e,o),e.removeChild(r)}}(r,a);var i=dt(t,a);if(i){var s,l,u;if(null!==(s=a.csp)&&void 0!==s&&s.nonce&&i.nonce!==(null===(l=a.csp)||void 0===l?void 0:l.nonce))i.nonce=null===(u=a.csp)||void 0===u?void 0:u.nonce;return i.innerHTML!==e&&(i.innerHTML=e),i}var c=ct(e,a);return c.setAttribute(st(a),t),c}function ft(e){var t;return null===e||void 0===e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}function mt(e){return function(e){return ft(e)instanceof ShadowRoot}(e)?ft(e):null}var gt={},vt=[];function bt(e,t){}function yt(e,t){}function wt(e,t,n){t||gt[n]||(e(!1,n),gt[n]=!0)}function xt(e,t){wt(bt,e,t)}xt.preMessage=function(e){vt.push(e)},xt.resetWarned=function(){gt={}},xt.noteOnce=function(e,t){wt(yt,e,t)};const kt=xt;function Ct(e){return"object"===J(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===J(e.icon)||"function"===typeof e.icon)}function St(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else delete t[n],t[function(e){return e.replace(/-(.)/g,(function(e,t){return t.toUpperCase()}))}(n)]=r;return t}),{})}function Et(e,t,n){return n?I.createElement(e.tag,nt(nt({key:t},St(e.attrs)),n),(e.children||[]).map((function(n,r){return Et(n,"".concat(t,"-").concat(e.tag,"-").concat(r))}))):I.createElement(e.tag,nt({key:t},St(e.attrs)),(e.children||[]).map((function(n,r){return Et(n,"".concat(t,"-").concat(e.tag,"-").concat(r))})))}function Nt(e){return Ee(e)[0]}function It(e){return e?Array.isArray(e)?e:[e]:[]}var $t=["icon","className","onClick","style","primaryColor","secondaryColor"],Tt={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var At=function(e){var t=e.icon,n=e.className,r=e.onClick,o=e.style,a=e.primaryColor,i=e.secondaryColor,s=Z(e,$t),l=I.useRef(),u=Tt;if(a&&(u={primaryColor:a,secondaryColor:i||Nt(a)}),function(e){var t=(0,I.useContext)(et),n=t.csp,r=t.prefixCls,o="\n.anticon {\n  display: inline-flex;\n  align-items: center;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n";r&&(o=o.replace(/anticon/g,r)),(0,I.useEffect)((function(){var t=mt(e.current);pt(o,"@ant-design-icons",{prepend:!0,csp:n,attachTo:t})}),[])}(l),function(e,t){kt(e,"[@ant-design/icons] ".concat(t))}(Ct(t),"icon should be icon definiton, but got ".concat(t)),!Ct(t))return null;var c=t;return c&&"function"===typeof c.icon&&(c=nt(nt({},c),{},{icon:c.icon(u.primaryColor,u.secondaryColor)})),Et(c.icon,"svg-".concat(c.name),nt(nt({className:n,onClick:r,style:o,"data-icon":c.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},s),{},{ref:l}))};At.displayName="IconReact",At.getTwoToneColors=function(){return nt({},Tt)},At.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;Tt.primaryColor=t,Tt.secondaryColor=n||Nt(t),Tt.calculated=!!n};const Ot=At;function Rt(e){var t=X(It(e),2),n=t[0],r=t[1];return Ot.setTwoToneColors({primaryColor:n,secondaryColor:r})}var Pt=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Rt(Fe.primary);var Dt=I.forwardRef((function(e,t){var n=e.className,r=e.icon,o=e.spin,a=e.rotate,i=e.tabIndex,s=e.onClick,l=e.twoToneColor,u=Z(e,Pt),c=I.useContext(et),d=c.prefixCls,h=void 0===d?"anticon":d,p=c.rootClassName,f=F()(p,h,Q(Q({},"".concat(h,"-").concat(r.name),!!r.name),"".concat(h,"-spin"),!!o||"loading"===r.name),n),m=i;void 0===m&&s&&(m=-1);var g=a?{msTransform:"rotate(".concat(a,"deg)"),transform:"rotate(".concat(a,"deg)")}:void 0,v=X(It(l),2),b=v[0],y=v[1];return I.createElement("span",G({role:"img","aria-label":r.name},u,{ref:t,tabIndex:m,onClick:s,className:f}),I.createElement(Ot,{icon:r,primaryColor:b,secondaryColor:y,style:g}))}));Dt.displayName="AntdIcon",Dt.getTwoToneColor=function(){var e=Ot.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},Dt.setTwoToneColor=Rt;const Ft=Dt;var _t=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:U}))};const Mt=I.forwardRef(_t);const zt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};var Lt=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:zt}))};const Bt=I.forwardRef(Lt);const jt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};var Ht=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:jt}))};const Vt=I.forwardRef(Ht),Wt=e=>!isNaN(parseFloat(e))&&isFinite(e);const Gt=function(e){for(var t,n=0,r=0,o=e.length;o>=4;++r,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(o){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)};function Ut(e,t,n){var r=I.useRef({});return"value"in r.current&&!n(r.current.condition,t)||(r.current.value=e(),r.current.condition=t),r.current.value}const Kt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;return function e(t,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=r.has(t);if(kt(!i,"Warning: There may be circular references"),i)return!1;if(t===o)return!0;if(n&&a>1)return!1;r.add(t);var s=a+1;if(Array.isArray(t)){if(!Array.isArray(o)||t.length!==o.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],o[l],s))return!1;return!0}if(t&&o&&"object"===J(t)&&"object"===J(o)){var u=Object.keys(t);return u.length===Object.keys(o).length&&u.every((function(n){return e(t[n],o[n],s)}))}return!1}(e,t)};function qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y(r.key),r)}}function Jt(e,t,n){return t&&Xt(e.prototype,t),n&&Xt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yt(e){return e.join("%")}var Qt=function(){function e(t){qt(this,e),Q(this,"instanceId",void 0),Q(this,"cache",new Map),this.instanceId=t}return Jt(e,[{key:"get",value:function(e){return this.opGet(Yt(e))}},{key:"opGet",value:function(e){return this.cache.get(e)||null}},{key:"update",value:function(e,t){return this.opUpdate(Yt(e),t)}},{key:"opUpdate",value:function(e,t){var n=t(this.cache.get(e));null===n?this.cache.delete(e):this.cache.set(e,n)}}]),e}();const Zt=Qt;var en="data-token-hash",tn="data-css-hash",nn="__cssinjs_instance__";function rn(){var e=Math.random().toString(12).slice(2);if("undefined"!==typeof document&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(tn,"]"))||[],n=document.head.firstChild;Array.from(t).forEach((function(t){t[nn]=t[nn]||e,t[nn]===e&&document.head.insertBefore(t,n)}));var r={};Array.from(document.querySelectorAll("style[".concat(tn,"]"))).forEach((function(t){var n,o=t.getAttribute(tn);r[o]?t[nn]===e&&(null===(n=t.parentNode)||void 0===n||n.removeChild(t)):r[o]=!0}))}return new Zt(e)}var on=I.createContext({hashPriority:"low",cache:rn(),defaultCache:!0});const an=on;var sn="CALC_UNIT";new RegExp(sn,"g");var ln=function(){function e(){qt(this,e),Q(this,"cache",void 0),Q(this,"keys",void 0),Q(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Jt(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o={map:this.cache};return e.forEach((function(e){var t;o?o=null===(t=o)||void 0===t||null===(t=t.map)||void 0===t?void 0:t.get(e):o=void 0})),null!==(t=o)&&void 0!==t&&t.value&&r&&(o.value[1]=this.cacheCallTimes++),null===(n=o)||void 0===n?void 0:n.value}},{key:"get",value:function(e){var t;return null===(t=this.internalGet(e,!0))||void 0===t?void 0:t[0]}},{key:"has",value:function(e){return!!this.internalGet(e)}},{key:"set",value:function(t,n){var r=this;if(!this.has(t)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var o=this.keys.reduce((function(e,t){var n=X(e,2)[1];return r.internalGet(t)[1]<n?[t,r.internalGet(t)[1]]:e}),[this.keys[0],this.cacheCallTimes]),a=X(o,1)[0];this.delete(a)}this.keys.push(t)}var i=this.cache;t.forEach((function(e,o){if(o===t.length-1)i.set(e,{value:[n,r.cacheCallTimes++]});else{var a=i.get(e);a?a.map||(a.map=new Map):i.set(e,{map:new Map}),i=i.get(e).map}}))}},{key:"deleteByPath",value:function(e,t){var n,r=e.get(t[0]);if(1===t.length)return r.map?e.set(t[0],{map:r.map}):e.delete(t[0]),null===(n=r.value)||void 0===n?void 0:n[0];var o=this.deleteByPath(r.map,t.slice(1));return r.map&&0!==r.map.size||r.value||e.delete(t[0]),o}},{key:"delete",value:function(e){if(this.has(e))return this.keys=this.keys.filter((function(t){return!function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,e)})),this.deleteByPath(this.cache,e)}}]),e}();Q(ln,"MAX_CACHE_SIZE",20),Q(ln,"MAX_CACHE_OFFSET",5);var un=0,cn=function(){function e(t){qt(this,e),Q(this,"derivatives",void 0),Q(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=un,0===t.length&&t.length,un+=1}return Jt(e,[{key:"getDerivativeToken",value:function(e){return this.derivatives.reduce((function(t,n){return n(e,t)}),void 0)}}]),e}(),dn=new ln;function hn(e){var t=Array.isArray(e)?e:[e];return dn.has(t)||dn.set(t,new cn(t)),dn.get(t)}var pn=new WeakMap,fn={};var mn=new WeakMap;function gn(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=mn.get(e)||"";return n||(Object.keys(e).forEach((function(r){var o=e[r];n+=r,o instanceof cn?n+=o.id:o&&"object"===J(o)?n+=gn(o,t):n+=o})),t&&(n=Gt(n)),mn.set(e,n)),n}function vn(e,t){return Gt("".concat(t,"_").concat(gn(e,!0)))}"random-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,"");var bn=rt();function yn(e){return"number"===typeof e?"".concat(e,"px"):e}function wn(e,t,n){if(arguments.length>4&&void 0!==arguments[4]&&arguments[4])return e;var r=nt(nt({},arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),{},Q(Q({},en,t),tn,n)),o=Object.keys(r).map((function(e){var t=r[e];return t?"".concat(e,'="').concat(t,'"'):null})).filter((function(e){return e})).join(" ");return"<style ".concat(o,">").concat(e,"</style>")}var xn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"--".concat(t?"".concat(t,"-"):"").concat(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},kn=function(e,t,n){return Object.keys(e).length?".".concat(t).concat(null!==n&&void 0!==n&&n.scope?".".concat(n.scope):"","{").concat(Object.entries(e).map((function(e){var t=X(e,2),n=t[0],r=t[1];return"".concat(n,":").concat(r,";")})).join(""),"}"):""},Cn=function(e,t,n){var r={},o={};return Object.entries(e).forEach((function(e){var t,a,i=X(e,2),s=i[0],l=i[1];if(null!==n&&void 0!==n&&null!==(t=n.preserve)&&void 0!==t&&t[s])o[s]=l;else if(("string"===typeof l||"number"===typeof l)&&(null===n||void 0===n||null===(a=n.ignore)||void 0===a||!a[s])){var u,c=xn(s,null===n||void 0===n?void 0:n.prefix);r[c]="number"!==typeof l||null!==n&&void 0!==n&&null!==(u=n.unitless)&&void 0!==u&&u[s]?String(l):"".concat(l,"px"),o[s]="var(".concat(c,")")}})),[o,kn(r,t,{scope:null===n||void 0===n?void 0:n.scope})]},Sn=rt()?I.useLayoutEffect:I.useEffect,En=function(e,t){var n=I.useRef(!0);Sn((function(){return e(n.current)}),t),Sn((function(){return n.current=!1,function(){n.current=!0}}),[])},Nn=function(e,t){En((function(t){if(!t)return e()}),t)};const In=En;var $n=nt({},$).useInsertionEffect;const Tn=$n?function(e,t,n){return $n((function(){return e(),t()}),n)}:function(e,t,n){I.useMemo(e,n),In((function(){return t(!0)}),n)};var An="undefined"!==typeof nt({},$).useInsertionEffect?function(e){var t=[],n=!1;return I.useEffect((function(){return n=!1,function(){n=!0,t.length&&t.forEach((function(e){return e()}))}}),e),function(e){n||t.push(e)}}:function(){return function(e){e()}};const On=An;const Rn=function(){return!1};function Pn(e,t,n,r,o){var a=I.useContext(an).cache,i=Yt([e].concat(P(t))),s=On([i]),l=(Rn(),function(e){a.opUpdate(i,(function(t){var r=X(t||[void 0,void 0],2),o=r[0];var a=[void 0===o?0:o,r[1]||n()];return e?e(a):a}))});I.useMemo((function(){l()}),[i]);var u=a.opGet(i)[1];return Tn((function(){null===o||void 0===o||o(u)}),(function(e){return l((function(t){var n=X(t,2),r=n[0],a=n[1];return e&&0===r&&(null===o||void 0===o||o(u)),[r+1,a]})),function(){a.opUpdate(i,(function(t){var n=X(t||[],2),o=n[0],l=void 0===o?0:o,u=n[1];return 0===l-1?(s((function(){!e&&a.opGet(i)||null===r||void 0===r||r(u,!1)})),null):[l-1,u]}))}}),[i]),u}var Dn={},Fn=new Map;function _n(e,t){Fn.set(e,(Fn.get(e)||0)-1);var n=Array.from(Fn.keys()),r=n.filter((function(e){return(Fn.get(e)||0)<=0}));n.length-r.length>0&&r.forEach((function(e){!function(e,t){"undefined"!==typeof document&&document.querySelectorAll("style[".concat(en,'="').concat(e,'"]')).forEach((function(e){var n;e[nn]===t&&(null===(n=e.parentNode)||void 0===n||n.removeChild(e))}))}(e,t),Fn.delete(e)}))}var Mn="token";function zn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,I.useContext)(an),o=r.cache.instanceId,a=r.container,i=n.salt,s=void 0===i?"":i,l=n.override,u=void 0===l?Dn:l,c=n.formatToken,d=n.getComputedToken,h=n.cssVar,p=function(e,t){for(var n=pn,r=0;r<t.length;r+=1){var o=t[r];n.has(o)||n.set(o,new WeakMap),n=n.get(o)}return n.has(fn)||n.set(fn,e()),n.get(fn)}((function(){return Object.assign.apply(Object,[{}].concat(P(t)))}),t),f=gn(p),m=gn(u),g=h?gn(h):"",v=Pn(Mn,[s,e.id,f,m,g],(function(){var t,n=d?d(p,u,e):function(e,t,n,r){var o=nt(nt({},n.getDerivativeToken(e)),t);return r&&(o=r(o)),o}(p,u,e,c),r=nt({},n),o="";if(h){var a=X(Cn(n,h.key,{prefix:h.prefix,ignore:h.ignore,unitless:h.unitless,preserve:h.preserve}),2);n=a[0],o=a[1]}var i=vn(n,s);n._tokenKey=i,r._tokenKey=vn(r,s);var l=null!==(t=null===h||void 0===h?void 0:h.key)&&void 0!==t?t:i;n._themeKey=l,function(e){Fn.set(e,(Fn.get(e)||0)+1)}(l);var f="".concat("css","-").concat(Gt(i));return n._hashId=f,[n,f,r,o,(null===h||void 0===h?void 0:h.key)||""]}),(function(e){_n(e[0]._themeKey,o)}),(function(e){var t=X(e,4),n=t[0],r=t[3];if(h&&r){var i=pt(r,Gt("css-variables-".concat(n._themeKey)),{mark:tn,prepend:"queue",attachTo:a,priority:-999});i[nn]=o,i.setAttribute(en,n._themeKey)}}));return v}const Ln={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var Bn="comm",jn="rule",Hn="decl",Vn=Math.abs,Wn=String.fromCharCode;Object.assign;function Gn(e){return e.trim()}function Un(e,t,n){return e.replace(t,n)}function Kn(e,t,n){return e.indexOf(t,n)}function qn(e,t){return 0|e.charCodeAt(t)}function Xn(e,t,n){return e.slice(t,n)}function Jn(e){return e.length}function Yn(e,t){return t.push(e),e}function Qn(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function Zn(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case Hn:return e.return=e.return||e.value;case Bn:return"";case"@keyframes":return e.return=e.value+"{"+Qn(e.children,r)+"}";case jn:if(!Jn(e.value=e.props.join(",")))return""}return Jn(n=Qn(e.children,r))?e.return=e.value+"{"+n+"}":""}var er=1,tr=1,nr=0,rr=0,or=0,ar="";function ir(e,t,n,r,o,a,i,s){return{value:e,root:t,parent:n,type:r,props:o,children:a,line:er,column:tr,length:i,return:"",siblings:s}}function sr(){return or=rr>0?qn(ar,--rr):0,tr--,10===or&&(tr=1,er--),or}function lr(){return or=rr<nr?qn(ar,rr++):0,tr++,10===or&&(tr=1,er++),or}function ur(){return qn(ar,rr)}function cr(){return rr}function dr(e,t){return Xn(ar,e,t)}function hr(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function pr(e){return er=tr=1,nr=Jn(ar=e),rr=0,[]}function fr(e){return ar="",e}function mr(e){return Gn(dr(rr-1,br(91===e?e+2:40===e?e+1:e)))}function gr(e){for(;(or=ur())&&or<33;)lr();return hr(e)>2||hr(or)>3?"":" "}function vr(e,t){for(;--t&&lr()&&!(or<48||or>102||or>57&&or<65||or>70&&or<97););return dr(e,cr()+(t<6&&32==ur()&&32==lr()))}function br(e){for(;lr();)switch(or){case e:return rr;case 34:case 39:34!==e&&39!==e&&br(or);break;case 40:41===e&&br(e);break;case 92:lr()}return rr}function yr(e,t){for(;lr()&&e+or!==57&&(e+or!==84||47!==ur()););return"/*"+dr(t,rr-1)+"*"+Wn(47===e?e:lr())}function wr(e){for(;!hr(ur());)lr();return dr(e,rr)}function xr(e){return fr(kr("",null,null,null,[""],e=pr(e),0,[0],e))}function kr(e,t,n,r,o,a,i,s,l){for(var u=0,c=0,d=i,h=0,p=0,f=0,m=1,g=1,v=1,b=0,y="",w=o,x=a,k=r,C=y;g;)switch(f=b,b=lr()){case 40:if(108!=f&&58==qn(C,d-1)){-1!=Kn(C+=Un(mr(b),"&","&\f"),"&\f",Vn(u?s[u-1]:0))&&(v=-1);break}case 34:case 39:case 91:C+=mr(b);break;case 9:case 10:case 13:case 32:C+=gr(f);break;case 92:C+=vr(cr()-1,7);continue;case 47:switch(ur()){case 42:case 47:Yn(Sr(yr(lr(),cr()),t,n,l),l),5!=hr(f||1)&&5!=hr(ur()||1)||!Jn(C)||" "===Xn(C,-1,void 0)||(C+=" ");break;default:C+="/"}break;case 123*m:s[u++]=Jn(C)*v;case 125*m:case 59:case 0:switch(b){case 0:case 125:g=0;case 59+c:-1==v&&(C=Un(C,/\f/g,"")),p>0&&(Jn(C)-d||0===m&&47===f)&&Yn(p>32?Er(C+";",r,n,d-1,l):Er(Un(C," ","")+";",r,n,d-2,l),l);break;case 59:C+=";";default:if(Yn(k=Cr(C,t,n,u,c,o,s,y,w=[],x=[],d,a),a),123===b)if(0===c)kr(C,t,k,k,w,a,d,s,x);else switch(99===h&&110===qn(C,3)?100:h){case 100:case 108:case 109:case 115:kr(e,k,k,r&&Yn(Cr(e,k,k,0,0,o,s,y,o,w=[],d,x),x),o,x,d,s,r?w:x);break;default:kr(C,k,k,k,[""],x,0,s,x)}}u=c=p=0,m=v=1,y=C="",d=i;break;case 58:d=1+Jn(C),p=f;default:if(m<1)if(123==b)--m;else if(125==b&&0==m++&&125==sr())continue;switch(C+=Wn(b),b*m){case 38:v=c>0?1:(C+="\f",-1);break;case 44:s[u++]=(Jn(C)-1)*v,v=1;break;case 64:45===ur()&&(C+=mr(lr())),h=ur(),c=d=Jn(y=C+=wr(cr())),b++;break;case 45:45===f&&2==Jn(C)&&(m=0)}}return a}function Cr(e,t,n,r,o,a,i,s,l,u,c,d){for(var h=o-1,p=0===o?a:[""],f=function(e){return e.length}(p),m=0,g=0,v=0;m<r;++m)for(var b=0,y=Xn(e,h+1,h=Vn(g=i[m])),w=e;b<f;++b)(w=Gn(g>0?p[b]+" "+y:Un(y,/&\f/g,p[b])))&&(l[v++]=w);return ir(e,t,n,0===o?jn:s,l,u,c,d)}function Sr(e,t,n,r){return ir(e,t,n,Bn,Wn(or),Xn(e,2,-2),0,r)}function Er(e,t,n,r,o){return ir(e,t,n,Hn,Xn(e,0,r),Xn(e,r+1,-1),r,o)}var Nr,Ir="data-ant-cssinjs-cache-path",$r="_FILE_STYLE__";var Tr=!0;function Ar(e){return function(){if(!Nr&&(Nr={},rt())){var e=document.createElement("div");e.className=Ir,e.style.position="fixed",e.style.visibility="hidden",e.style.top="-9999px",document.body.appendChild(e);var t=getComputedStyle(e).content||"";(t=t.replace(/^"/,"").replace(/"$/,"")).split(";").forEach((function(e){var t=X(e.split(":"),2),n=t[0],r=t[1];Nr[n]=r}));var n,r=document.querySelector("style[".concat(Ir,"]"));r&&(Tr=!1,null===(n=r.parentNode)||void 0===n||n.removeChild(r)),document.body.removeChild(e)}}(),!!Nr[e]}var Or="_multi_value_";function Rr(e){return Qn(xr(e),Zn).replace(/\{%%%\:[^;];}/g,";")}function Pr(e,t,n){if(!t)return e;var r=".".concat(t),o="low"===n?":where(".concat(r,")"):r,a=e.split(",").map((function(e){var t,n=e.trim().split(/\s+/),r=n[0]||"",a=(null===(t=r.match(/^\w+/))||void 0===t?void 0:t[0])||"";return[r="".concat(a).concat(o).concat(r.slice(a.length))].concat(P(n.slice(1))).join(" ")}));return a.join(",")}var Dr=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{root:!0,parentSelectors:[]},o=r.root,a=r.injectHash,i=r.parentSelectors,s=n.hashId,l=n.layer,u=(n.path,n.hashPriority),c=n.transformers,d=void 0===c?[]:c,h=(n.linters,""),p={};function f(t){var r=t.getName(s);if(!p[r]){var o=X(e(t.style,n,{root:!1,parentSelectors:i}),1)[0];p[r]="@keyframes ".concat(t.getName(s)).concat(o)}}var m=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.forEach((function(t){Array.isArray(t)?e(t,n):t&&n.push(t)})),n}(Array.isArray(t)?t:[t]);return m.forEach((function(t){var r="string"!==typeof t||o?t:{};if("string"===typeof r)h+="".concat(r,"\n");else if(r._keyframe)f(r);else{var l=d.reduce((function(e,t){var n;return(null===t||void 0===t||null===(n=t.visit)||void 0===n?void 0:n.call(t,e))||e}),r);Object.keys(l).forEach((function(t){var r=l[t];if("object"!==J(r)||!r||"animationName"===t&&r._keyframe||function(e){return"object"===J(e)&&e&&("_skip_check_"in e||Or in e)}(r)){var c;function x(e,t){var n=e.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())})),r=t;Ln[e]||"number"!==typeof r||0===r||(r="".concat(r,"px")),"animationName"===e&&null!==t&&void 0!==t&&t._keyframe&&(f(t),r=t.getName(s)),h+="".concat(n,":").concat(r,";")}var d=null!==(c=null===r||void 0===r?void 0:r.value)&&void 0!==c?c:r;"object"===J(r)&&null!==r&&void 0!==r&&r[Or]&&Array.isArray(d)?d.forEach((function(e){x(t,e)})):x(t,d)}else{var m=!1,g=t.trim(),v=!1;(o||a)&&s?g.startsWith("@")?m=!0:g=Pr("&"===g?"":t,s,u):!o||s||"&"!==g&&""!==g||(g="",v=!0);var b=X(e(r,n,{root:v,injectHash:m,parentSelectors:[].concat(P(i),[g])}),2),y=b[0],w=b[1];p=nt(nt({},p),w),h+="".concat(g).concat(y)}}))}})),o?l&&(h="@layer ".concat(l.name," {").concat(h,"}"),l.dependencies&&(p["@layer ".concat(l.name)]=l.dependencies.map((function(e){return"@layer ".concat(e,", ").concat(l.name,";")})).join("\n"))):h="{".concat(h,"}"),[h,p]};function Fr(e,t){return Gt("".concat(e.join("%")).concat(t))}function _r(){return null}var Mr="style";function zr(e,t){var n=e.token,r=e.path,o=e.hashId,a=e.layer,i=e.nonce,s=e.clientOnly,l=e.order,u=void 0===l?0:l,c=I.useContext(an),d=c.autoClear,h=(c.mock,c.defaultCache),p=c.hashPriority,f=c.container,m=c.ssrInline,g=c.transformers,v=c.linters,b=c.cache,y=c.layer,w=n._tokenKey,x=[w];y&&x.push("layer"),x.push.apply(x,P(r));var k=bn;var C=Pn(Mr,x,(function(){var e=x.join("|");if(Ar(e)){var n=function(e){var t=Nr[e],n=null;if(t&&rt())if(Tr)n=$r;else{var r=document.querySelector("style[".concat(tn,'="').concat(Nr[e],'"]'));r?n=r.innerHTML:delete Nr[e]}return[n,t]}(e),i=X(n,2),l=i[0],c=i[1];if(l)return[l,w,c,{},s,u]}var d=t(),h=X(Dr(d,{hashId:o,hashPriority:p,layer:y?a:void 0,path:r.join("-"),transformers:g,linters:v}),2),f=h[0],m=h[1],b=Rr(f),k=Fr(x,b);return[b,w,k,m,s,u]}),(function(e,t){var n=X(e,3)[2];(t||d)&&bn&&ht(n,{mark:tn})}),(function(e){var t=X(e,4),n=t[0],r=(t[1],t[2]),o=t[3];if(k&&n!==$r){var a={mark:tn,prepend:!y&&"queue",attachTo:f,priority:u},s="function"===typeof i?i():i;s&&(a.csp={nonce:s});var l=[],c=[];Object.keys(o).forEach((function(e){e.startsWith("@layer")?l.push(e):c.push(e)})),l.forEach((function(e){pt(Rr(o[e]),"_layer-".concat(e),nt(nt({},a),{},{prepend:!0}))}));var d=pt(n,r,a);d[nn]=b.instanceId,d.setAttribute(en,w),c.forEach((function(e){pt(Rr(o[e]),"_effect-".concat(e),a)}))}})),S=X(C,3),E=S[0],N=S[1],$=S[2];return function(e){var t;return t=m&&!k&&h?I.createElement("style",G({},Q(Q({},en,N),tn,$),{dangerouslySetInnerHTML:{__html:E}})):I.createElement(_r,null),I.createElement(I.Fragment,null,t,e)}}var Lr="cssVar";const Br=function(e,t){var n=e.key,r=e.prefix,o=e.unitless,a=e.ignore,i=e.token,s=e.scope,l=void 0===s?"":s,u=(0,I.useContext)(an),c=u.cache.instanceId,d=u.container,h=i._tokenKey,p=[].concat(P(e.path),[n,l,h]),f=Pn(Lr,p,(function(){var e=t(),i=X(Cn(e,n,{prefix:r,unitless:o,ignore:a,scope:l}),2),s=i[0],u=i[1];return[s,u,Fr(p,u),n]}),(function(e){var t=X(e,3)[2];bn&&ht(t,{mark:tn})}),(function(e){var t=X(e,3),r=t[1],o=t[2];if(r){var a=pt(r,o,{mark:tn,prepend:"queue",attachTo:d,priority:-999});a[nn]=c,a.setAttribute(en,n)}}));return f};Q(Q(Q({},Mr,(function(e,t,n){var r=X(e,6),o=r[0],a=r[1],i=r[2],s=r[3],l=r[4],u=r[5],c=(n||{}).plain;if(l)return null;var d=o,h={"data-rc-order":"prependQueue","data-rc-priority":"".concat(u)};return d=wn(o,a,i,h,c),s&&Object.keys(s).forEach((function(e){if(!t[e]){t[e]=!0;var n=wn(Rr(s[e]),a,"_effect-".concat(e),h,c);e.startsWith("@layer")?d=n+d:d+=n}})),[u,i,d]})),Mn,(function(e,t,n){var r=X(e,5),o=r[2],a=r[3],i=r[4],s=(n||{}).plain;if(!a)return null;var l=o._tokenKey;return[-999,l,wn(a,i,l,{"data-rc-order":"prependQueue","data-rc-priority":"".concat(-999)},s)]})),Lr,(function(e,t,n){var r=X(e,4),o=r[1],a=r[2],i=r[3],s=(n||{}).plain;if(!o)return null;return[-999,a,wn(o,i,a,{"data-rc-order":"prependQueue","data-rc-priority":"".concat(-999)},s)]}));var jr=function(){function e(t,n){qt(this,e),Q(this,"name",void 0),Q(this,"style",void 0),Q(this,"_keyframe",!0),this.name=t,this.style=n}return Jt(e,[{key:"getName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?"".concat(e,"-").concat(this.name):this.name}}]),e}();const Hr=jr;function Vr(e){return e.notSplit=!0,e}Vr(["borderTop","borderBottom"]),Vr(["borderTop"]),Vr(["borderBottom"]),Vr(["borderLeft","borderRight"]),Vr(["borderLeft"]),Vr(["borderRight"]);function Wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gr(e,t){return Gr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gr(e,t)}function Ur(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gr(e,t)}function Kr(e){return Kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kr(e)}function qr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qr=function(){return!!e})()}function Xr(e){var t=qr();return function(){var n,r=Kr(e);if(t){var o=Kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wr(e)}(this,n)}}const Jr=Jt((function e(){qt(this,e)}));var Yr="CALC_UNIT",Qr=new RegExp(Yr,"g");function Zr(e){return"number"===typeof e?"".concat(e).concat(Yr):e}var eo=function(e){Ur(n,e);var t=Xr(n);function n(e,r){var o;qt(this,n),Q(Wr(o=t.call(this)),"result",""),Q(Wr(o),"unitlessCssVar",void 0),Q(Wr(o),"lowPriority",void 0);var a=J(e);return o.unitlessCssVar=r,e instanceof n?o.result="(".concat(e.result,")"):"number"===a?o.result=Zr(e):"string"===a&&(o.result=e),o}return Jt(n,[{key:"add",value:function(e){return e instanceof n?this.result="".concat(this.result," + ").concat(e.getResult()):"number"!==typeof e&&"string"!==typeof e||(this.result="".concat(this.result," + ").concat(Zr(e))),this.lowPriority=!0,this}},{key:"sub",value:function(e){return e instanceof n?this.result="".concat(this.result," - ").concat(e.getResult()):"number"!==typeof e&&"string"!==typeof e||(this.result="".concat(this.result," - ").concat(Zr(e))),this.lowPriority=!0,this}},{key:"mul",value:function(e){return this.lowPriority&&(this.result="(".concat(this.result,")")),e instanceof n?this.result="".concat(this.result," * ").concat(e.getResult(!0)):"number"!==typeof e&&"string"!==typeof e||(this.result="".concat(this.result," * ").concat(e)),this.lowPriority=!1,this}},{key:"div",value:function(e){return this.lowPriority&&(this.result="(".concat(this.result,")")),e instanceof n?this.result="".concat(this.result," / ").concat(e.getResult(!0)):"number"!==typeof e&&"string"!==typeof e||(this.result="".concat(this.result," / ").concat(e)),this.lowPriority=!1,this}},{key:"getResult",value:function(e){return this.lowPriority||e?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(e){var t=this,n=(e||{}).unit,r=!0;return"boolean"===typeof n?r=n:Array.from(this.unitlessCssVar).some((function(e){return t.result.includes(e)}))&&(r=!1),this.result=this.result.replace(Qr,r?"px":""),"undefined"!==typeof this.lowPriority?"calc(".concat(this.result,")"):this.result}}]),n}(Jr);const to=function(e){Ur(n,e);var t=Xr(n);function n(e){var r;return qt(this,n),Q(Wr(r=t.call(this)),"result",0),e instanceof n?r.result=e.result:"number"===typeof e&&(r.result=e),r}return Jt(n,[{key:"add",value:function(e){return e instanceof n?this.result+=e.result:"number"===typeof e&&(this.result+=e),this}},{key:"sub",value:function(e){return e instanceof n?this.result-=e.result:"number"===typeof e&&(this.result-=e),this}},{key:"mul",value:function(e){return e instanceof n?this.result*=e.result:"number"===typeof e&&(this.result*=e),this}},{key:"div",value:function(e){return e instanceof n?this.result/=e.result:"number"===typeof e&&(this.result/=e),this}},{key:"equal",value:function(){return this.result}}]),n}(Jr);const no=function(e,t){var n="css"===e?eo:to;return function(e){return new n(e,t)}};const ro=function(e,t){return"".concat([t,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function oo(e){var t=I.useRef();t.current=e;var n=I.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return n}function ao(e){var t=I.useRef(!1),n=X(I.useState(e),2),r=n[0],o=n[1];return I.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),[r,function(e,n){n&&t.current||o(e)}]}function io(e){return void 0!==e}function so(e,t){var n=t||{},r=n.defaultValue,o=n.value,a=n.onChange,i=n.postState,s=X(ao((function(){return io(o)?o:io(r)?"function"===typeof r?r():r:"function"===typeof e?e():e})),2),l=s[0],u=s[1],c=void 0!==o?o:l,d=i?i(c):c,h=oo(a),p=X(ao([c]),2),f=p[0],m=p[1];return Nn((function(){var e=f[0];l!==e&&h(l,e)}),[f]),Nn((function(){io(o)||u(o)}),[o]),[d,oo((function(e,t){u(e,t),m([c],t)}))]}var lo=function(e,t){"function"===typeof e?e(t):"object"===J(e)&&e&&"current"in e&&(e.current=t)},uo=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length<=1?r[0]:function(e){t.forEach((function(t){lo(t,e)}))}},co=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ut((function(){return uo.apply(void 0,t)}),t,(function(e,t){return e.length!==t.length||e.every((function(e,n){return e!==t[n]}))}))},ho=function(e){var t,n,r=(0,V.isMemo)(e)?e.type.type:e.type;return!!("function"!==typeof r||null!==(t=r.prototype)&&void 0!==t&&t.render||r.$$typeof===V.ForwardRef)&&!!("function"!==typeof e||null!==(n=e.prototype)&&void 0!==n&&n.render||e.$$typeof===V.ForwardRef)};function po(e){return(0,I.isValidElement)(e)&&!(0,V.isFragment)(e)}Number(I.version.split(".")[0]);function fo(e){return K(e)||O(e)||R(e)||q()}function mo(e,t){for(var n=e,r=0;r<t.length;r+=1){if(null===n||void 0===n)return;n=n[t[r]]}return n}function go(e,t,n,r){if(!t.length)return n;var o,a=fo(t),i=a[0],s=a.slice(1);return o=e||"number"!==typeof i?Array.isArray(e)?P(e):nt({},e):[],r&&void 0===n&&1===s.length?delete o[i][s[0]]:o[i]=go(o[i],s,n,r),o}function vo(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.length&&r&&void 0===n&&!mo(e,t.slice(0,-1))?e:go(e,t,n,r)}function bo(e){return Array.isArray(e)?[]:{}}var yo="undefined"===typeof Reflect?Object.keys:Reflect.ownKeys;function wo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=bo(t[0]);return t.forEach((function(e){!function t(n,o){var a,i=new Set(o),s=mo(e,n),l=Array.isArray(s);if(l||"object"===J(a=s)&&null!==a&&Object.getPrototypeOf(a)===Object.prototype){if(!i.has(s)){i.add(s);var u=mo(r,n);l?r=vo(r,n,[]):u&&"object"===J(u)||(r=vo(r,n,bo(s))),yo(s).forEach((function(e){t([].concat(P(n),[e]),i)}))}}else r=vo(r,n,s)}([])})),r}const xo=function(e,t,n,r){var o=nt({},t[e]);null!==r&&void 0!==r&&r.deprecatedTokens&&r.deprecatedTokens.forEach((function(e){var t,n=X(e,2),r=n[0],a=n[1];(null!==o&&void 0!==o&&o[r]||null!==o&&void 0!==o&&o[a])&&(null!==(t=o[a])&&void 0!==t||(o[a]=null===o||void 0===o?void 0:o[r]))}));var a=nt(nt({},n),o);return Object.keys(a).forEach((function(e){a[e]===t[e]&&delete a[e]})),a};var ko="undefined"!==typeof CSSINJS_STATISTIC,Co=!0;function So(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!ko)return Object.assign.apply(Object,[{}].concat(t));Co=!1;var r={};return t.forEach((function(e){"object"===J(e)&&Object.keys(e).forEach((function(t){Object.defineProperty(r,t,{configurable:!0,enumerable:!0,get:function(){return e[t]}})}))})),Co=!0,r}var Eo={};function No(){}const Io=function(e){var t,n=e,r=No;return ko&&"undefined"!==typeof Proxy&&(t=new Set,n=new Proxy(e,{get:function(e,n){var r;Co&&(null===(r=t)||void 0===r||r.add(n));return e[n]}}),r=function(e,n){var r;Eo[e]={global:Array.from(t),component:nt(nt({},null===(r=Eo[e])||void 0===r?void 0:r.component),n)}}),{token:n,keys:t,flush:r}};const $o=function(e,t,n){var r;return"function"===typeof n?n(So(t,null!==(r=t[e])&&void 0!==r?r:{})):null!==n&&void 0!==n?n:{}};const To=function(e){return"js"===e?{max:Math.max,min:Math.min}:{max:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"max(".concat(t.map((function(e){return yn(e)})).join(","),")")},min:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"min(".concat(t.map((function(e){return yn(e)})).join(","),")")}}};var Ao=function(){function e(){qt(this,e),Q(this,"map",new Map),Q(this,"objectIDMap",new WeakMap),Q(this,"nextID",0),Q(this,"lastAccessBeat",new Map),Q(this,"accessBeat",0)}return Jt(e,[{key:"set",value:function(e,t){this.clear();var n=this.getCompositeKey(e);this.map.set(n,t),this.lastAccessBeat.set(n,Date.now())}},{key:"get",value:function(e){var t=this.getCompositeKey(e),n=this.map.get(t);return this.lastAccessBeat.set(t,Date.now()),this.accessBeat+=1,n}},{key:"getCompositeKey",value:function(e){var t=this;return e.map((function(e){return e&&"object"===J(e)?"obj_".concat(t.getObjectID(e)):"".concat(J(e),"_").concat(e)})).join("|")}},{key:"getObjectID",value:function(e){if(this.objectIDMap.has(e))return this.objectIDMap.get(e);var t=this.nextID;return this.objectIDMap.set(e,t),this.nextID+=1,t}},{key:"clear",value:function(){var e=this;if(this.accessBeat>1e4){var t=Date.now();this.lastAccessBeat.forEach((function(n,r){t-n>6e5&&(e.map.delete(r),e.lastAccessBeat.delete(r))})),this.accessBeat=0}}}]),e}(),Oo=new Ao;const Ro=function(e,t){return I.useMemo((function(){var n=Oo.get(t);if(n)return n;var r=e();return Oo.set(t,r),r}),t)};const Po=function(){return{}};const Do=function(e){var t=e.useCSP,n=void 0===t?Po:t,r=e.useToken,o=e.usePrefix,a=e.getResetStyles,i=e.getCommonStyle,s=e.getCompUnitless;function l(t,s,l){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=Array.isArray(t)?t:[t,t],d=X(c,1)[0],h=c.join("-"),p=e.layer||{name:"antd"};return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,c=r(),f=c.theme,m=c.realToken,g=c.hashId,v=c.token,b=c.cssVar,y=o(),w=y.rootPrefixCls,x=y.iconPrefixCls,k=n(),C=b?"css":"js",S=Ro((function(){var e=new Set;return b&&Object.keys(u.unitless||{}).forEach((function(t){e.add(xn(t,b.prefix)),e.add(xn(t,ro(d,b.prefix)))})),no(C,e)}),[C,d,null===b||void 0===b?void 0:b.prefix]),E=To(C),N=E.max,I=E.min,$={theme:f,token:v,hashId:g,nonce:function(){return k.nonce},clientOnly:u.clientOnly,layer:p,order:u.order||-999};return zr(nt(nt({},$),{},{clientOnly:!1,path:["Shared",w]}),(function(){return"function"===typeof a?a(v):[]})),[zr(nt(nt({},$),{},{path:[h,e,x]}),(function(){if(!1===u.injectStyle)return[];var n=Io(v),r=n.token,o=n.flush,a=$o(d,m,l),c=".".concat(e),h=xo(d,m,a,{deprecatedTokens:u.deprecatedTokens});b&&a&&"object"===J(a)&&Object.keys(a).forEach((function(e){a[e]="var(".concat(xn(e,ro(d,b.prefix)),")")}));var p=So(r,{componentCls:c,prefixCls:e,iconCls:".".concat(x),antCls:".".concat(w),calc:S,max:N,min:I},b?a:h),f=s(p,{hashId:g,prefixCls:e,rootPrefixCls:w,iconPrefixCls:x});o(d,h);var y="function"===typeof i?i(p,e,t,u.resetFont):null;return[!1===u.resetStyle?null:y,f]})),g]}}return{genStyleHooks:function(e,t,n,o){var a=Array.isArray(e)?e[0]:e;function i(e){return"".concat(String(a)).concat(e.slice(0,1).toUpperCase()).concat(e.slice(1))}var u=(null===o||void 0===o?void 0:o.unitless)||{},c=nt(nt({},"function"===typeof s?s(e):{}),{},Q({},i("zIndexPopup"),!0));Object.keys(u).forEach((function(e){c[i(e)]=u[e]}));var d=nt(nt({},o),{},{unitless:c,prefixToken:i}),h=l(e,t,n,d),p=function(e,t,n){var o=n.unitless,a=n.injectStyle,i=void 0===a||a,s=n.prefixToken,l=n.ignore,u=function(a){var i=a.rootCls,u=a.cssVar,c=void 0===u?{}:u,d=r().realToken;return Br({path:[e],prefix:c.prefix,key:c.key,unitless:o,ignore:l,token:d,scope:i},(function(){var r=$o(e,d,t),o=xo(e,d,r,{deprecatedTokens:null===n||void 0===n?void 0:n.deprecatedTokens});return Object.keys(r).forEach((function(e){o[s(e)]=o[e],delete o[e]})),o})),null},c=function(t){var n=r().cssVar;return[function(r){return i&&n?I.createElement(I.Fragment,null,I.createElement(u,{rootCls:t,cssVar:n,component:e}),r):r},null===n||void 0===n?void 0:n.key]};return c}(a,n,d);return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=X(h(e,t),2)[1],r=X(p(t),2);return[r[0],n,r[1]]}},genSubStyleComponent:function(e,t,n){var r=l(e,t,n,nt({resetStyle:!1,order:-998},arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}));return function(e){var t=e.prefixCls,n=e.rootCls;return r(t,void 0===n?t:n),null}},genComponentStyleHook:l}},Fo={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},_o=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:t?"inherit":e.fontFamily}},Mo=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active, &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),zo=e=>({outline:`${yn(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),Lo=e=>({"&:focus-visible":Object.assign({},zo(e))}),Bo=e=>Object.assign(Object.assign({color:e.colorLink,textDecoration:e.linkDecoration,outline:"none",cursor:"pointer",transition:`all ${e.motionDurationSlow}`,border:0,padding:0,background:"none",userSelect:"none"},Lo(e)),{"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}}),jo={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},Ho=Object.assign(Object.assign({},jo),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,\n'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n'Noto Color Emoji'",fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});var Vo=function(){function e(t,n){var r;if(void 0===t&&(t=""),void 0===n&&(n={}),t instanceof e)return t;"number"===typeof t&&(t=function(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}(t)),this.originalInput=t;var o=pe(t);this.originalInput=t,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(r=n.format)&&void 0!==r?r:o.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,r=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=ne(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){return 0===this.toHsl().s},e.prototype.toHsv=function(){var e=se(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=se(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=ae(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=ae(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),le(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),function(e,t,n,r,o){var a=[oe(Math.round(e).toString(16)),oe(Math.round(t).toString(16)),oe(Math.round(n).toString(16)),oe(ue(r))];return o&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toHexShortString=function(e){return void 0===e&&(e=!1),1===this.a?this.toHexString(e):this.toHex8String(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(n,")"):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*ee(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*ee(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+le(this.r,this.g,this.b,!1),t=0,n=Object.entries(he);t<n.length;t++){var r=n[t],o=r[0];if(e===r[1])return o}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!==e&&void 0!==e?e:this.format;var n=!1,r=this.a<1&&this.a>=0;return t||!r||!e.startsWith("hex")&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this.a?this.toName():this.toRgbString()},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=te(n.l),new e(n)},e.prototype.brighten=function(t){void 0===t&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),new e(n)},e.prototype.darken=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=te(n.l),new e(n)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=te(n.s),new e(n)},e.prototype.saturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=te(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new e(n)},e.prototype.mix=function(t,n){void 0===n&&(n=50);var r=this.toRgb(),o=new e(t).toRgb(),a=n/100;return new e({r:(o.r-r.r)*a+r.r,g:(o.g-r.g)*a+r.g,b:(o.b-r.b)*a+r.b,a:(o.a-r.a)*a+r.a})},e.prototype.analogous=function(t,n){void 0===t&&(t=6),void 0===n&&(n=30);var r=this.toHsl(),o=360/n,a=[this];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,a.push(new e(r));return a},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var n=this.toHsv(),r=n.h,o=n.s,a=n.v,i=[],s=1/t;t--;)i.push(new e({h:r,s:o,v:a})),a=(a+s)%1;return i},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),r=new e(t).toRgb(),o=n.a+r.a*(1-n.a);return new e({r:(n.r*n.a+r.r*r.a*(1-n.a))/o,g:(n.g*n.a+r.g*r.a*(1-n.a))/o,b:(n.b*n.a+r.b*r.a*(1-n.a))/o,a:o})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),r=n.h,o=[this],a=360/t,i=1;i<t;i++)o.push(new e({h:(r+i*a)%360,s:n.s,l:n.l}));return o},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();const Wo=e=>{let t=e,n=e,r=e,o=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?n=4:e<8&&e>=7?n=5:e<14&&e>=8?n=6:e<16&&e>=14?n=7:e>=16&&(n=8),e<6&&e>=2?r=1:e>=6&&(r=2),e>4&&e<8?o=4:e>=8&&(o=6),{borderRadius:e,borderRadiusXS:r,borderRadiusSM:n,borderRadiusLG:t,borderRadiusOuter:o}};const Go=e=>{const{controlHeight:t}=e;return{controlHeightSM:.75*t,controlHeightXS:.5*t,controlHeightLG:1.25*t}};function Uo(e){return(e+8)/e}const Ko=e=>{const t=function(e){const t=new Array(10).fill(null).map(((t,n)=>{const r=n-1,o=e*Math.pow(Math.E,r/5),a=n>1?Math.floor(o):Math.ceil(o);return 2*Math.floor(a/2)}));return t[1]=e,t.map((e=>({size:e,lineHeight:Uo(e)})))}(e),n=t.map((e=>e.size)),r=t.map((e=>e.lineHeight)),o=n[1],a=n[0],i=n[2],s=r[1],l=r[0],u=r[2];return{fontSizeSM:a,fontSize:o,fontSizeLG:i,fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:s,lineHeightLG:u,lineHeightSM:l,fontHeight:Math.round(s*o),fontHeightLG:Math.round(u*i),fontHeightSM:Math.round(l*a),lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}};const qo=(e,t)=>new Vo(e).setAlpha(t).toRgbString(),Xo=(e,t)=>new Vo(e).darken(t).toHexString(),Jo=e=>{const t=Ee(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},Yo=(e,t)=>{const n=e||"#fff",r=t||"#000";return{colorBgBase:n,colorTextBase:r,colorText:qo(r,.88),colorTextSecondary:qo(r,.65),colorTextTertiary:qo(r,.45),colorTextQuaternary:qo(r,.25),colorFill:qo(r,.15),colorFillSecondary:qo(r,.06),colorFillTertiary:qo(r,.04),colorFillQuaternary:qo(r,.02),colorBgSolid:qo(r,1),colorBgSolidHover:qo(r,.75),colorBgSolidActive:qo(r,.95),colorBgLayout:Xo(n,4),colorBgContainer:Xo(n,0),colorBgElevated:Xo(n,0),colorBgSpotlight:qo(r,.85),colorBgBlur:"transparent",colorBorder:Xo(n,15),colorBorderSecondary:Xo(n,6)}};const Qo=hn((function(e){Ne.pink=Ne.magenta,Be.pink=Be.magenta;const t=Object.keys(jo).map((t=>{const n=e[t]===Ne[t]?Be[t]:Ee(e[t]);return new Array(10).fill(1).reduce(((e,r,o)=>(e[`${t}-${o+1}`]=n[o],e[`${t}${o+1}`]=n[o],e)),{})})).reduce(((e,t)=>e=Object.assign(Object.assign({},e),t)),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),function(e,t){let{generateColorPalettes:n,generateNeutralColorPalettes:r}=t;const{colorSuccess:o,colorWarning:a,colorError:i,colorInfo:s,colorPrimary:l,colorBgBase:u,colorTextBase:c}=e,d=n(l),h=n(o),p=n(a),f=n(i),m=n(s),g=r(u,c),v=n(e.colorLink||e.colorInfo),b=new Vo(f[1]).mix(new Vo(f[3]),50).toHexString();return Object.assign(Object.assign({},g),{colorPrimaryBg:d[1],colorPrimaryBgHover:d[2],colorPrimaryBorder:d[3],colorPrimaryBorderHover:d[4],colorPrimaryHover:d[5],colorPrimary:d[6],colorPrimaryActive:d[7],colorPrimaryTextHover:d[8],colorPrimaryText:d[9],colorPrimaryTextActive:d[10],colorSuccessBg:h[1],colorSuccessBgHover:h[2],colorSuccessBorder:h[3],colorSuccessBorderHover:h[4],colorSuccessHover:h[4],colorSuccess:h[6],colorSuccessActive:h[7],colorSuccessTextHover:h[8],colorSuccessText:h[9],colorSuccessTextActive:h[10],colorErrorBg:f[1],colorErrorBgHover:f[2],colorErrorBgFilledHover:b,colorErrorBgActive:f[3],colorErrorBorder:f[3],colorErrorBorderHover:f[4],colorErrorHover:f[5],colorError:f[6],colorErrorActive:f[7],colorErrorTextHover:f[8],colorErrorText:f[9],colorErrorTextActive:f[10],colorWarningBg:p[1],colorWarningBgHover:p[2],colorWarningBorder:p[3],colorWarningBorderHover:p[4],colorWarningHover:p[4],colorWarning:p[6],colorWarningActive:p[7],colorWarningTextHover:p[8],colorWarningText:p[9],colorWarningTextActive:p[10],colorInfoBg:m[1],colorInfoBgHover:m[2],colorInfoBorder:m[3],colorInfoBorderHover:m[4],colorInfoHover:m[4],colorInfo:m[6],colorInfoActive:m[7],colorInfoTextHover:m[8],colorInfoText:m[9],colorInfoTextActive:m[10],colorLinkHover:v[4],colorLink:v[6],colorLinkActive:v[7],colorBgMask:new Vo("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}(e,{generateColorPalettes:Jo,generateNeutralColorPalettes:Yo})),Ko(e.fontSize)),function(e){const{sizeUnit:t,sizeStep:n}=e;return{sizeXXL:t*(n+8),sizeXL:t*(n+4),sizeLG:t*(n+2),sizeMD:t*(n+1),sizeMS:t*n,size:t*n,sizeSM:t*(n-1),sizeXS:t*(n-2),sizeXXS:t*(n-3)}}(e)),Go(e)),function(e){const{motionUnit:t,motionBase:n,borderRadius:r,lineWidth:o}=e;return Object.assign({motionDurationFast:`${(n+t).toFixed(1)}s`,motionDurationMid:`${(n+2*t).toFixed(1)}s`,motionDurationSlow:`${(n+3*t).toFixed(1)}s`,lineWidthBold:o+1},Wo(r))}(e))})),Zo={token:Ho,override:{override:Ho},hashed:!0},ea=I.createContext(Zo);function ta(e){return e>=0&&e<=255}const na=function(e,t){const{r:n,g:r,b:o,a:a}=new Vo(e).toRgb();if(a<1)return e;const{r:i,g:s,b:l}=new Vo(t).toRgb();for(let u=.01;u<=1;u+=.01){const e=Math.round((n-i*(1-u))/u),t=Math.round((r-s*(1-u))/u),a=Math.round((o-l*(1-u))/u);if(ta(e)&&ta(t)&&ta(a))return new Vo({r:e,g:t,b:a,a:Math.round(100*u)/100}).toRgbString()}return new Vo({r:n,g:r,b:o,a:1}).toRgbString()};var ra=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function oa(e){const{override:t}=e,n=ra(e,["override"]),r=Object.assign({},t);Object.keys(Ho).forEach((e=>{delete r[e]}));const o=Object.assign(Object.assign({},n),r),a=1200,i=1600;if(!1===o.motion){const e="0s";o.motionDurationFast=e,o.motionDurationMid=e,o.motionDurationSlow=e}return Object.assign(Object.assign(Object.assign({},o),{colorFillContent:o.colorFillSecondary,colorFillContentHover:o.colorFill,colorFillAlter:o.colorFillQuaternary,colorBgContainerDisabled:o.colorFillTertiary,colorBorderBg:o.colorBgContainer,colorSplit:na(o.colorBorderSecondary,o.colorBgContainer),colorTextPlaceholder:o.colorTextQuaternary,colorTextDisabled:o.colorTextQuaternary,colorTextHeading:o.colorText,colorTextLabel:o.colorTextSecondary,colorTextDescription:o.colorTextTertiary,colorTextLightSolid:o.colorWhite,colorHighlight:o.colorError,colorBgTextHover:o.colorFillSecondary,colorBgTextActive:o.colorFill,colorIcon:o.colorTextTertiary,colorIconHover:o.colorText,colorErrorOutline:na(o.colorErrorBg,o.colorBgContainer),colorWarningOutline:na(o.colorWarningBg,o.colorBgContainer),fontSizeIcon:o.fontSizeSM,lineWidthFocus:3*o.lineWidth,lineWidth:o.lineWidth,controlOutlineWidth:2*o.lineWidth,controlInteractiveSize:o.controlHeight/2,controlItemBgHover:o.colorFillTertiary,controlItemBgActive:o.colorPrimaryBg,controlItemBgActiveHover:o.colorPrimaryBgHover,controlItemBgActiveDisabled:o.colorFill,controlTmpOutline:o.colorFillQuaternary,controlOutline:na(o.colorPrimaryBg,o.colorBgContainer),lineType:o.lineType,borderRadius:o.borderRadius,borderRadiusXS:o.borderRadiusXS,borderRadiusSM:o.borderRadiusSM,borderRadiusLG:o.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:o.sizeXXS,paddingXS:o.sizeXS,paddingSM:o.sizeSM,padding:o.size,paddingMD:o.sizeMD,paddingLG:o.sizeLG,paddingXL:o.sizeXL,paddingContentHorizontalLG:o.sizeLG,paddingContentVerticalLG:o.sizeMS,paddingContentHorizontal:o.sizeMS,paddingContentVertical:o.sizeSM,paddingContentHorizontalSM:o.size,paddingContentVerticalSM:o.sizeXS,marginXXS:o.sizeXXS,marginXS:o.sizeXS,marginSM:o.sizeSM,margin:o.size,marginMD:o.sizeMD,marginLG:o.sizeLG,marginXL:o.sizeXL,marginXXL:o.sizeXXL,boxShadow:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowSecondary:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowTertiary:"\n      0 1px 2px 0 rgba(0, 0, 0, 0.03),\n      0 1px 6px -1px rgba(0, 0, 0, 0.02),\n      0 2px 4px 0 rgba(0, 0, 0, 0.02)\n    ",screenXS:480,screenXSMin:480,screenXSMax:575,screenSM:576,screenSMMin:576,screenSMMax:767,screenMD:768,screenMDMin:768,screenMDMax:991,screenLG:992,screenLGMin:992,screenLGMax:1199,screenXL:a,screenXLMin:a,screenXLMax:1599,screenXXL:i,screenXXLMin:i,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`\n      0 1px 2px -2px ${new Vo("rgba(0, 0, 0, 0.16)").toRgbString()},\n      0 3px 6px 0 ${new Vo("rgba(0, 0, 0, 0.12)").toRgbString()},\n      0 5px 12px 4px ${new Vo("rgba(0, 0, 0, 0.09)").toRgbString()}\n    `,boxShadowDrawerRight:"\n      -6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      -3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      -9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerLeft:"\n      6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerUp:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerDown:"\n      0 -6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 -3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 -9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),r)}var aa=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const ia={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},sa={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},la={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},ua=(e,t,n)=>{const r=n.getDerivativeToken(e),{override:o}=t,a=aa(t,["override"]);let i=Object.assign(Object.assign({},r),{override:o});return i=oa(i),a&&Object.entries(a).forEach((e=>{let[t,n]=e;const{theme:r}=n,o=aa(n,["theme"]);let a=o;r&&(a=ua(Object.assign(Object.assign({},i),o),{override:o},r)),i[t]=a})),i};function ca(){const{token:e,hashed:t,theme:n,override:r,cssVar:o}=I.useContext(ea),a=`5.21.3-${t||""}`,i=n||Qo,[s,l,u]=zn(i,[Ho,e],{salt:a,override:r,getComputedToken:ua,formatToken:oa,cssVar:o&&{prefix:o.prefix,key:o.key,unitless:ia,ignore:sa,preserve:la}});return[i,u,t?l:"",s,o]}const da=(e,t)=>{const[n,r]=ca();return zr({theme:n,token:r,hashId:"",path:["ant-design-icons",e],nonce:()=>null===t||void 0===t?void 0:t.nonce,layer:{name:"antd"}},(()=>[{[`.${e}`]:Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),{[`.${e} .${e}-icon`]:{display:"block"}})}]))},{genStyleHooks:ha,genComponentStyleHook:pa,genSubStyleComponent:fa}=Do({usePrefix:()=>{const{getPrefixCls:e,iconPrefixCls:t}=(0,I.useContext)(B);return{rootPrefixCls:e(),iconPrefixCls:t}},useToken:()=>{const[e,t,n,r,o]=ca();return{theme:e,realToken:t,hashId:n,token:r,cssVar:o}},useCSP:()=>{const{csp:e,iconPrefixCls:t}=(0,I.useContext)(B);return da(t,e),null!==e&&void 0!==e?e:{}},getResetStyles:e=>[{"&":Mo(e)}],getCommonStyle:(e,t,n,r)=>{const o=`[class^="${t}"], [class*=" ${t}"]`,a=n?`.${n}`:o,i={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let s={};return!1!==r&&(s={fontFamily:e.fontFamily,fontSize:e.fontSize}),{[a]:Object.assign(Object.assign(Object.assign({},s),i),{[o]:i})}},getCompUnitless:()=>ia}),ma=e=>{const{antCls:t,componentCls:n,colorText:r,footerBg:o,headerHeight:a,headerPadding:i,headerColor:s,footerPadding:l,fontSize:u,bodyBg:c,headerBg:d}=e;return{[n]:{display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:c,"&, *":{boxSizing:"border-box"},[`&${n}-has-sider`]:{flexDirection:"row",[`> ${n}, > ${n}-content`]:{width:0}},[`${n}-header, &${n}-footer`]:{flex:"0 0 auto"},"&-rtl":{direction:"rtl"}},[`${n}-header`]:{height:a,padding:i,color:s,lineHeight:yn(a),background:d,[`${t}-menu`]:{lineHeight:"inherit"}},[`${n}-footer`]:{padding:l,color:r,fontSize:u,background:o},[`${n}-content`]:{flex:"auto",color:r,minHeight:0}}},ga=e=>{const{colorBgLayout:t,controlHeight:n,controlHeightLG:r,colorText:o,controlHeightSM:a,marginXXS:i,colorTextLightSolid:s,colorBgContainer:l}=e,u=1.25*r;return{colorBgHeader:"#001529",colorBgBody:t,colorBgTrigger:"#002140",bodyBg:t,headerBg:"#001529",headerHeight:2*n,headerPadding:`0 ${u}px`,headerColor:o,footerPadding:`${a}px ${u}px`,footerBg:t,siderBg:"#001529",triggerHeight:r+2*i,triggerBg:"#002140",triggerColor:s,zeroTriggerWidth:r,zeroTriggerHeight:r,lightSiderBg:l,lightTriggerBg:l,lightTriggerColor:o}},va=[["colorBgBody","bodyBg"],["colorBgHeader","headerBg"],["colorBgTrigger","triggerBg"]],ba=ha("Layout",(e=>[ma(e)]),ga,{deprecatedTokens:va}),ya=e=>{const{componentCls:t,siderBg:n,motionDurationMid:r,motionDurationSlow:o,antCls:a,triggerHeight:i,triggerColor:s,triggerBg:l,headerHeight:u,zeroTriggerWidth:c,zeroTriggerHeight:d,borderRadius:h,lightSiderBg:p,lightTriggerColor:f,lightTriggerBg:m,bodyBg:g}=e;return{[t]:{position:"relative",minWidth:0,background:n,transition:`all ${r}, background 0s`,"&-has-trigger":{paddingBottom:i},"&-right":{order:1},[`${t}-children`]:{height:"100%",marginTop:-.1,paddingTop:.1,[`${a}-menu${a}-menu-inline-collapsed`]:{width:"auto"}},[`${t}-trigger`]:{position:"fixed",bottom:0,zIndex:1,height:i,color:s,lineHeight:yn(i),textAlign:"center",background:l,cursor:"pointer",transition:`all ${r}`},"&-zero-width":{"> *":{overflow:"hidden"},[`${t}-trigger`]:{position:"absolute",top:u,insetInlineEnd:e.calc(c).mul(-1).equal(),zIndex:1,width:c,height:d,color:s,fontSize:e.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:n,borderStartStartRadius:0,borderStartEndRadius:h,borderEndEndRadius:h,borderEndStartRadius:0,cursor:"pointer",transition:`background ${o} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${o}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:e.calc(c).mul(-1).equal(),borderStartStartRadius:h,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:h}}},"&-light":{background:p,[`${t}-trigger`]:{color:f,background:m},[`${t}-zero-width-trigger`]:{color:f,background:m,border:`1px solid ${g}`,borderInlineStart:0}}}}},wa=ha(["Layout","Sider"],(e=>[ya(e)]),ga,{deprecatedTokens:va});var xa=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const ka={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},Ca=I.createContext({}),Sa=(()=>{let e=0;return function(){return e+=1,`${arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}${e}`}})(),Ea=I.forwardRef(((e,t)=>{const{prefixCls:n,className:r,trigger:o,children:a,defaultCollapsed:i=!1,theme:s="dark",style:l={},collapsible:u=!1,reverseArrow:c=!1,width:d=200,collapsedWidth:h=80,zeroWidthTriggerStyle:p,breakpoint:f,onCollapse:m,onBreakpoint:g}=e,v=xa(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]),{siderHook:b}=(0,I.useContext)(H),[y,w]=(0,I.useState)("collapsed"in e?e.collapsed:i),[x,k]=(0,I.useState)(!1);(0,I.useEffect)((()=>{"collapsed"in e&&w(e.collapsed)}),[e.collapsed]);const C=(t,n)=>{"collapsed"in e||w(t),null===m||void 0===m||m(t,n)},{getPrefixCls:S}=(0,I.useContext)(B),E=S("layout-sider",n),[N,$,T]=wa(E),A=(0,I.useRef)();A.current=e=>{k(e.matches),null===g||void 0===g||g(e.matches),y!==e.matches&&C(e.matches,"responsive")},(0,I.useEffect)((()=>{function e(e){return A.current(e)}let t;if("undefined"!==typeof window){const{matchMedia:r}=window;if(r&&f&&f in ka){t=r(`screen and (max-width: ${ka[f]})`);try{t.addEventListener("change",e)}catch(n){t.addListener(e)}e(t)}}return()=>{try{null===t||void 0===t||t.removeEventListener("change",e)}catch(n){null===t||void 0===t||t.removeListener(e)}}}),[f]),(0,I.useEffect)((()=>{const e=Sa("ant-sider-");return b.addSider(e),()=>b.removeSider(e)}),[]);const O=()=>{C(!y,"clickTrigger")},R=I.useMemo((()=>({siderCollapsed:y})),[y]);return N(I.createElement(Ca.Provider,{value:R},(()=>{const e=_(v,["collapsed"]),n=y?h:d,i=Wt(n)?`${n}px`:String(n),f=0===parseFloat(String(h||0))?I.createElement("span",{onClick:O,className:F()(`${E}-zero-width-trigger`,`${E}-zero-width-trigger-${c?"right":"left"}`),style:p},o||I.createElement(Mt,null)):null,m={expanded:c?I.createElement(Vt,null):I.createElement(Bt,null),collapsed:c?I.createElement(Bt,null):I.createElement(Vt,null)}[y?"collapsed":"expanded"],g=null!==o?f||I.createElement("div",{className:`${E}-trigger`,onClick:O,style:{width:i}},o||m):null,b=Object.assign(Object.assign({},l),{flex:`0 0 ${i}`,maxWidth:i,minWidth:i,width:i}),w=F()(E,`${E}-${s}`,{[`${E}-collapsed`]:!!y,[`${E}-has-trigger`]:u&&null!==o&&!f,[`${E}-below`]:!!x,[`${E}-zero-width`]:0===parseFloat(i)},r,$,T);return I.createElement("aside",Object.assign({className:w},e,{style:b,ref:t}),I.createElement("div",{className:`${E}-children`},a),u||x&&f?g:null)})()))}));const Na=Ea;var Ia=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function $a(e){let{suffixCls:t,tagName:n,displayName:r}=e;return e=>I.forwardRef(((r,o)=>I.createElement(e,Object.assign({ref:o,suffixCls:t,tagName:n},r))))}const Ta=I.forwardRef(((e,t)=>{const{prefixCls:n,suffixCls:r,className:o,tagName:a}=e,i=Ia(e,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:s}=I.useContext(B),l=s("layout",n),[u,c,d]=ba(l),h=r?`${l}-${r}`:l;return u(I.createElement(a,Object.assign({className:F()(n||h,o,c,d),ref:t},i)))})),Aa=I.forwardRef(((e,t)=>{const{direction:n}=I.useContext(B),[r,o]=I.useState([]),{prefixCls:a,className:i,rootClassName:s,children:l,hasSider:u,tagName:c,style:d}=e,h=_(Ia(e,["prefixCls","className","rootClassName","children","hasSider","tagName","style"]),["suffixCls"]),{getPrefixCls:p,layout:f}=I.useContext(B),m=p("layout",a),g=function(e,t,n){return"boolean"===typeof n?n:!!e.length||W(t).some((e=>e.type===Na))}(r,l,u),[v,b,y]=ba(m),w=F()(m,{[`${m}-has-sider`]:g,[`${m}-rtl`]:"rtl"===n},null===f||void 0===f?void 0:f.className,i,s,b,y),x=I.useMemo((()=>({siderHook:{addSider:e=>{o((t=>[].concat(P(t),[e])))},removeSider:e=>{o((t=>t.filter((t=>t!==e))))}}})),[]);return v(I.createElement(H.Provider,{value:x},I.createElement(c,Object.assign({ref:t,className:w,style:Object.assign(Object.assign({},null===f||void 0===f?void 0:f.style),d)},h),l)))})),Oa=$a({tagName:"div",displayName:"Layout"})(Aa),Ra=$a({suffixCls:"header",tagName:"header",displayName:"Header"})(Ta),Pa=$a({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(Ta),Da=$a({suffixCls:"content",tagName:"main",displayName:"Content"})(Ta),Fa=Oa;Fa.Header=Ra,Fa.Footer=Pa,Fa.Content=Da,Fa.Sider=Na,Fa._InternalSiderContext=Ca;const _a=Fa;function Ma(){Ma=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),s=new A(r||[]);return o(i,"_invoke",{value:N(e,n,s)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function v(){}function b(){}function y(){}var w={};u(w,i,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(O([])));k&&k!==n&&r.call(k,i)&&(w=k);var C=y.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(o,a,i,s){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==J(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(c).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,s)}))}s(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=h;return function(a,i){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var l=I(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?m:p,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function I(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function $(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach($,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(J(t)+" is not iterable")}return b.prototype=y,o(C,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:b,configurable:!0}),b.displayName=u(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},S(E.prototype),u(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new E(c(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(C),u(C,l,"Generator"),u(C,i,(function(){return this})),u(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function za(e,t,n,r,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function La(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){za(a,r,o,i,s,"next",e)}function s(e){za(a,r,o,i,s,"throw",e)}i(void 0)}))}}var Ba="RC_FORM_INTERNAL_HOOKS",ja=function(){kt(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")};const Ha=I.createContext({getFieldValue:ja,getFieldsValue:ja,getFieldError:ja,getFieldWarning:ja,getFieldsError:ja,isFieldsTouched:ja,isFieldTouched:ja,isFieldValidating:ja,isFieldsValidating:ja,resetFields:ja,setFields:ja,setFieldValue:ja,setFieldsValue:ja,validateFields:ja,submit:ja,getInternalHooks:function(){return ja(),{dispatch:ja,initEntityValue:ja,registerField:ja,useSubscribe:ja,setInitialValues:ja,destroyForm:ja,setCallbacks:ja,registerWatch:ja,getFields:ja,setValidateMessages:ja,setPreserve:ja,getInitialValue:ja}}});const Va=I.createContext(null);function Wa(e){return void 0===e||null===e?[]:Array.isArray(e)?e:[e]}function Ga(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Ua=Ga();function Ka(e){var t="function"==typeof Map?new Map:void 0;return Ka=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(Sbe){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(qr())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&Gr(o,n.prototype),o}(e,arguments,Kr(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Gr(n,e)},Ka(e)}var qa=/%[sdj%]/g;function Xa(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function Ja(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,a=n.length;return"function"===typeof e?e.apply(null,n):"string"===typeof e?e.replace(qa,(function(e){if("%%"===e)return"%";if(o>=a)return e;switch(e){case"%s":return String(n[o++]);case"%d":return Number(n[o++]);case"%j":try{return JSON.stringify(n[o++])}catch(_be){return"[Circular]"}break;default:return e}})):e}function Ya(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!==typeof e||e))}function Qa(e,t,n){var r=0,o=e.length;!function a(i){if(i&&i.length)n(i);else{var s=r;r+=1,s<o?t(e[s],a):n([])}}([])}var Za=function(e){Ur(n,e);var t=Xr(n);function n(e,r){var o;return qt(this,n),Q(Wr(o=t.call(this,"Async Validation Error")),"errors",void 0),Q(Wr(o),"fields",void 0),o.errors=e,o.fields=r,o}return Jt(n)}(Ka(Error));function ei(e,t,n,r,o){if(t.first){var a=new Promise((function(t,a){var i=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,P(e[n]||[]))})),t}(e);Qa(i,n,(function(e){return r(e),e.length?a(new Za(e,Xa(e))):t(o)}))}));return a.catch((function(e){return e})),a}var i=!0===t.firstFields?Object.keys(e):t.firstFields||[],s=Object.keys(e),l=s.length,u=0,c=[],d=new Promise((function(t,a){var d=function(e){if(c.push.apply(c,e),++u===l)return r(c),c.length?a(new Za(c,Xa(c))):t(o)};s.length||(r(c),t(o)),s.forEach((function(t){var r=e[t];-1!==i.indexOf(t)?Qa(r,n,d):function(e,t,n){var r=[],o=0,a=e.length;function i(e){r.push.apply(r,P(e||[])),++o===a&&n(r)}e.forEach((function(e){t(e,i)}))}(r,n,d)}))}));return d.catch((function(e){return e})),d}function ti(e,t){return function(n){var r,o;return r=e.fullFields?function(e,t){for(var n=e,r=0;r<t.length;r++){if(void 0==n)return n;n=n[t[r]]}return n}(t,e.fullFields):t[n.field||e.fullField],(o=n)&&void 0!==o.message?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:"function"===typeof n?n():n,fieldValue:r,field:n.field||e.fullField}}}function ni(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===J(r)&&"object"===J(e[n])?e[n]=nt(nt({},e[n]),r):e[n]=r}return e}var ri="enum";const oi=function(e,t,n,r,o){var a="number"===typeof e.len,i="number"===typeof e.min,s="number"===typeof e.max,l=t,u=null,c="number"===typeof t,d="string"===typeof t,h=Array.isArray(t);if(c?u="number":d?u="string":h&&(u="array"),!u)return!1;h&&(l=t.length),d&&(l=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),a?l!==e.len&&r.push(Ja(o.messages[u].len,e.fullField,e.len)):i&&!s&&l<e.min?r.push(Ja(o.messages[u].min,e.fullField,e.min)):s&&!i&&l>e.max?r.push(Ja(o.messages[u].max,e.fullField,e.max)):i&&s&&(l<e.min||l>e.max)&&r.push(Ja(o.messages[u].range,e.fullField,e.min,e.max))};const ai=function(e,t,n,r,o,a){!e.required||n.hasOwnProperty(e.field)&&!Ya(t,a||e.type)||r.push(Ja(o.messages.required,e.fullField))};var ii;var si=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,li=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,ui={integer:function(e){return ui.number(e)&&parseInt(e,10)===e},float:function(e){return ui.number(e)&&!ui.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(kbe){return!1}},date:function(e){return"function"===typeof e.getTime&&"function"===typeof e.getMonth&&"function"===typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"===typeof e},object:function(e){return"object"===J(e)&&!ui.array(e)},method:function(e){return"function"===typeof e},email:function(e){return"string"===typeof e&&e.length<=320&&!!e.match(si)},url:function(e){return"string"===typeof e&&e.length<=2048&&!!e.match(function(){if(ii)return ii;var e="[a-fA-F\\d:]",t=function(t){return t&&t.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(e,")|(?<=").concat(e,")(?=\\s|$))"):""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",o=["(?:".concat(r,":){7}(?:").concat(r,"|:)"),"(?:".concat(r,":){6}(?:").concat(n,"|:").concat(r,"|:)"),"(?:".concat(r,":){5}(?::").concat(n,"|(?::").concat(r,"){1,2}|:)"),"(?:".concat(r,":){4}(?:(?::").concat(r,"){0,1}:").concat(n,"|(?::").concat(r,"){1,3}|:)"),"(?:".concat(r,":){3}(?:(?::").concat(r,"){0,2}:").concat(n,"|(?::").concat(r,"){1,4}|:)"),"(?:".concat(r,":){2}(?:(?::").concat(r,"){0,3}:").concat(n,"|(?::").concat(r,"){1,5}|:)"),"(?:".concat(r,":){1}(?:(?::").concat(r,"){0,4}:").concat(n,"|(?::").concat(r,"){1,6}|:)"),"(?::(?:(?::".concat(r,"){0,5}:").concat(n,"|(?::").concat(r,"){1,7}|:))")],a="(?:".concat(o.join("|"),")").concat("(?:%[0-9a-zA-Z]{1,})?"),i=new RegExp("(?:^".concat(n,"$)|(?:^").concat(a,"$)")),s=new RegExp("^".concat(n,"$")),l=new RegExp("^".concat(a,"$")),u=function(e){return e&&e.exact?i:new RegExp("(?:".concat(t(e)).concat(n).concat(t(e),")|(?:").concat(t(e)).concat(a).concat(t(e),")"),"g")};u.v4=function(e){return e&&e.exact?s:new RegExp("".concat(t(e)).concat(n).concat(t(e)),"g")},u.v6=function(e){return e&&e.exact?l:new RegExp("".concat(t(e)).concat(a).concat(t(e)),"g")};var c=u.v4().source,d=u.v6().source,h="(?:".concat("(?:(?:[a-z]+:)?//)","|www\\.)").concat("(?:\\S+(?::\\S*)?@)?","(?:localhost|").concat(c,"|").concat(d,"|").concat("(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)").concat("(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*").concat("(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",")").concat("(?::\\d{2,5})?").concat('(?:[/?#][^\\s"]*)?');return ii=new RegExp("(?:^".concat(h,"$)"),"i")}())},hex:function(e){return"string"===typeof e&&!!e.match(li)}};const ci=function(e,t,n,r,o){if(e.required&&void 0===t)ai(e,t,n,r,o);else{var a=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(a)>-1?ui[a](t)||r.push(Ja(o.messages.types[a],e.fullField,e.type)):a&&J(t)!==e.type&&r.push(Ja(o.messages.types[a],e.fullField,e.type))}};const di={required:ai,whitespace:function(e,t,n,r,o){(/^\s+$/.test(t)||""===t)&&r.push(Ja(o.messages.whitespace,e.fullField))},type:ci,range:oi,enum:function(e,t,n,r,o){e[ri]=Array.isArray(e[ri])?e[ri]:[],-1===e[ri].indexOf(t)&&r.push(Ja(o.messages[ri],e.fullField,e[ri].join(", ")))},pattern:function(e,t,n,r,o){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(Ja(o.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"===typeof e.pattern){new RegExp(e.pattern).test(t)||r.push(Ja(o.messages.pattern.mismatch,e.fullField,t,e.pattern))}}};const hi=function(e,t,n,r,o){var a=[],i=Array.isArray(t)?"array":J(t);di.required(e,t,r,a,o,i),n(a)};const pi=function(e,t,n,r,o){var a=e.type,i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Ya(t,a)&&!e.required)return n();di.required(e,t,r,i,o,a),Ya(t,a)||di.type(e,t,r,i,o)}n(i)},fi={string:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Ya(t,"string")&&!e.required)return n();di.required(e,t,r,a,o,"string"),Ya(t,"string")||(di.type(e,t,r,a,o),di.range(e,t,r,a,o),di.pattern(e,t,r,a,o),!0===e.whitespace&&di.whitespace(e,t,r,a,o))}n(a)},method:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Ya(t)&&!e.required)return n();di.required(e,t,r,a,o),void 0!==t&&di.type(e,t,r,a,o)}n(a)},number:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),Ya(t)&&!e.required)return n();di.required(e,t,r,a,o),void 0!==t&&(di.type(e,t,r,a,o),di.range(e,t,r,a,o))}n(a)},boolean:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Ya(t)&&!e.required)return n();di.required(e,t,r,a,o),void 0!==t&&di.type(e,t,r,a,o)}n(a)},regexp:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Ya(t)&&!e.required)return n();di.required(e,t,r,a,o),Ya(t)||di.type(e,t,r,a,o)}n(a)},integer:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Ya(t)&&!e.required)return n();di.required(e,t,r,a,o),void 0!==t&&(di.type(e,t,r,a,o),di.range(e,t,r,a,o))}n(a)},float:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Ya(t)&&!e.required)return n();di.required(e,t,r,a,o),void 0!==t&&(di.type(e,t,r,a,o),di.range(e,t,r,a,o))}n(a)},array:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((void 0===t||null===t)&&!e.required)return n();di.required(e,t,r,a,o,"array"),void 0!==t&&null!==t&&(di.type(e,t,r,a,o),di.range(e,t,r,a,o))}n(a)},object:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Ya(t)&&!e.required)return n();di.required(e,t,r,a,o),void 0!==t&&di.type(e,t,r,a,o)}n(a)},enum:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Ya(t)&&!e.required)return n();di.required(e,t,r,a,o),void 0!==t&&di.enum(e,t,r,a,o)}n(a)},pattern:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Ya(t,"string")&&!e.required)return n();di.required(e,t,r,a,o),Ya(t,"string")||di.pattern(e,t,r,a,o)}n(a)},date:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Ya(t,"date")&&!e.required)return n();var i;if(di.required(e,t,r,a,o),!Ya(t,"date"))i=t instanceof Date?t:new Date(t),di.type(e,i,r,a,o),i&&di.range(e,i.getTime(),r,a,o)}n(a)},url:pi,hex:pi,email:pi,required:hi,any:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Ya(t)&&!e.required)return n();di.required(e,t,r,a,o)}n(a)}};var mi=function(){function e(t){qt(this,e),Q(this,"rules",null),Q(this,"_messages",Ua),this.define(t)}return Jt(e,[{key:"define",value:function(e){var t=this;if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==J(e)||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach((function(n){var r=e[n];t.rules[n]=Array.isArray(r)?r:[r]}))}},{key:"messages",value:function(e){return e&&(this._messages=ni(Ga(),e)),this._messages}},{key:"validate",value:function(t){var n=this,r=t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if("function"===typeof o&&(a=o,o={}),!this.rules||0===Object.keys(this.rules).length)return a&&a(null,r),Promise.resolve(r);if(o.messages){var i=this.messages();i===Ua&&(i=Ga()),ni(i,o.messages),o.messages=i}else o.messages=this.messages();var s={};(o.keys||Object.keys(this.rules)).forEach((function(e){var o=n.rules[e],a=r[e];o.forEach((function(o){var i=o;"function"===typeof i.transform&&(r===t&&(r=nt({},r)),void 0!==(a=r[e]=i.transform(a))&&null!==a&&(i.type=i.type||(Array.isArray(a)?"array":J(a)))),(i="function"===typeof i?{validator:i}:nt({},i)).validator=n.getValidationMethod(i),i.validator&&(i.field=e,i.fullField=i.fullField||e,i.type=n.getType(i),s[e]=s[e]||[],s[e].push({rule:i,value:a,source:r,field:e}))}))}));var l={};return ei(s,o,(function(t,n){var a,i=t.rule,s=("object"===i.type||"array"===i.type)&&("object"===J(i.fields)||"object"===J(i.defaultField));function u(e,t){return nt(nt({},t),{},{fullField:"".concat(i.fullField,".").concat(e),fullFields:i.fullFields?[].concat(P(i.fullFields),[e]):[e]})}function c(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],c=Array.isArray(a)?a:[a];!o.suppressWarning&&c.length&&e.warning("async-validator:",c),c.length&&void 0!==i.message&&(c=[].concat(i.message));var d=c.map(ti(i,r));if(o.first&&d.length)return l[i.field]=1,n(d);if(s){if(i.required&&!t.value)return void 0!==i.message?d=[].concat(i.message).map(ti(i,r)):o.error&&(d=[o.error(i,Ja(o.messages.required,i.field))]),n(d);var h={};i.defaultField&&Object.keys(t.value).map((function(e){h[e]=i.defaultField})),h=nt(nt({},h),t.rule.fields);var p={};Object.keys(h).forEach((function(e){var t=h[e],n=Array.isArray(t)?t:[t];p[e]=n.map(u.bind(null,e))}));var f=new e(p);f.messages(o.messages),t.rule.options&&(t.rule.options.messages=o.messages,t.rule.options.error=o.error),f.validate(t.value,t.rule.options||o,(function(e){var t=[];d&&d.length&&t.push.apply(t,P(d)),e&&e.length&&t.push.apply(t,P(e)),n(t.length?t:null)}))}else n(d)}if(s=s&&(i.required||!i.required&&t.value),i.field=t.field,i.asyncValidator)a=i.asyncValidator(i,t.value,c,t.source,o);else if(i.validator){try{a=i.validator(i,t.value,c,t.source,o)}catch(p){var d,h;null===(d=(h=console).error)||void 0===d||d.call(h,p),o.suppressValidatorError||setTimeout((function(){throw p}),0),c(p.message)}!0===a?c():!1===a?c("function"===typeof i.message?i.message(i.fullField||i.field):i.message||"".concat(i.fullField||i.field," fails")):a instanceof Array?c(a):a instanceof Error&&c(a.message)}a&&a.then&&a.then((function(){return c()}),(function(e){return c(e)}))}),(function(e){!function(e){var t=[],n={};function o(e){var n;Array.isArray(e)?t=(n=t).concat.apply(n,P(e)):t.push(e)}for(var i=0;i<e.length;i++)o(e[i]);t.length?(n=Xa(t),a(t,n)):a(null,r)}(e)}),r)}},{key:"getType",value:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!==typeof e.validator&&e.type&&!fi.hasOwnProperty(e.type))throw new Error(Ja("Unknown rule type %s",e.type));return e.type||"string"}},{key:"getValidationMethod",value:function(e){if("function"===typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?fi.required:fi[this.getType(e)]||void 0}}]),e}();Q(mi,"register",(function(e,t){if("function"!==typeof t)throw new Error("Cannot register a validator by type, validator is not a function");fi[e]=t})),Q(mi,"warning",(function(){})),Q(mi,"messages",Ua),Q(mi,"validators",fi);var gi="'${name}' is not a valid ${type}",vi={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:gi,method:gi,array:gi,object:gi,number:gi,date:gi,boolean:gi,integer:gi,float:gi,regexp:gi,email:gi,url:gi,hex:gi},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},bi=mi;function yi(e,t){return e.replace(/\\?\$\{\w+\}/g,(function(e){if(e.startsWith("\\"))return e.slice(1);var n=e.slice(2,-1);return t[n]}))}var wi="CODE_LOGIC_ERROR";function xi(e,t,n,r,o){return ki.apply(this,arguments)}function ki(){return ki=La(Ma().mark((function e(t,n,r,o,a){var i,s,l,u,c,d,h,p,f;return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(i=nt({},r)).ruleIndex,bi.warning=function(){},i.validator&&(s=i.validator,i.validator=function(){try{return s.apply(void 0,arguments)}catch(e){return console.error(e),Promise.reject(wi)}}),l=null,i&&"array"===i.type&&i.defaultField&&(l=i.defaultField,delete i.defaultField),u=new bi(Q({},t,[i])),c=wo(vi,o.validateMessages),u.messages(c),d=[],e.prev=10,e.next=13,Promise.resolve(u.validate(Q({},t,n),nt({},o)));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),e.t0.errors&&(d=e.t0.errors.map((function(e,t){var n=e.message,r=n===wi?c.default:n;return I.isValidElement(r)?I.cloneElement(r,{key:"error_".concat(t)}):r})));case 18:if(d.length||!l){e.next=23;break}return e.next=21,Promise.all(n.map((function(e,n){return xi("".concat(t,".").concat(n),e,l,o,a)})));case 21:return h=e.sent,e.abrupt("return",h.reduce((function(e,t){return[].concat(P(e),P(t))}),[]));case 23:return p=nt(nt({},r),{},{name:t,enum:(r.enum||[]).join(", ")},a),f=d.map((function(e){return"string"===typeof e?yi(e,p):e})),e.abrupt("return",f);case 26:case"end":return e.stop()}}),e,null,[[10,15]])}))),ki.apply(this,arguments)}function Ci(e,t,n,r,o,a){var i,s=e.join("."),l=n.map((function(e,t){var n=e.validator,r=nt(nt({},e),{},{ruleIndex:t});return n&&(r.validator=function(e,t,r){var o=!1,a=n(e,t,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Promise.resolve().then((function(){kt(!o,"Your validator function has already return a promise. `callback` will be ignored."),o||r.apply(void 0,t)}))}));o=a&&"function"===typeof a.then&&"function"===typeof a.catch,kt(o,"`callback` is deprecated. Please return a promise instead."),o&&a.then((function(){r()})).catch((function(e){r(e||" ")}))}),r})).sort((function(e,t){var n=e.warningOnly,r=e.ruleIndex,o=t.warningOnly,a=t.ruleIndex;return!!n===!!o?r-a:n?1:-1}));if(!0===o)i=new Promise(function(){var e=La(Ma().mark((function e(n,o){var i,u,c;return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<l.length)){e.next=12;break}return u=l[i],e.next=5,xi(s,t,u,r,a);case 5:if(!(c=e.sent).length){e.next=9;break}return o([{errors:c,rule:u}]),e.abrupt("return");case 9:i+=1,e.next=1;break;case 12:n([]);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());else{var u=l.map((function(e){return xi(s,t,e,r,a).then((function(t){return{errors:t,rule:e}}))}));i=(o?function(e){return Ei.apply(this,arguments)}(u):function(e){return Si.apply(this,arguments)}(u)).then((function(e){return Promise.reject(e)}))}return i.catch((function(e){return e})),i}function Si(){return(Si=La(Ma().mark((function e(t){return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t;return(t=[]).concat.apply(t,P(e))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ei(){return Ei=La(Ma().mark((function e(t){var n;return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e){t.forEach((function(r){r.then((function(r){r.errors.length&&e([r]),(n+=1)===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)}))),Ei.apply(this,arguments)}function Ni(e){return Wa(e)}function Ii(e,t){var n={};return t.forEach((function(t){var r=mo(e,t);n=vo(n,t,r)})),n}function $i(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e&&e.some((function(e){return Ti(t,e,n)}))}function Ti(e,t){return!(!e||!t)&&(!(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&e.length!==t.length)&&t.every((function(t,n){return e[n]===t})))}function Ai(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&"object"===J(t.target)&&e in t.target?t.target[e]:t}function Oi(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var o=e[t],a=t-n;return a>0?[].concat(P(e.slice(0,n)),[o],P(e.slice(n,t)),P(e.slice(t+1,r))):a<0?[].concat(P(e.slice(0,t)),P(e.slice(t+1,n+1)),[o],P(e.slice(n+1,r))):e}var Ri=["name"],Pi=[];function Di(e,t,n,r,o,a){return"function"===typeof e?e(t,n,"source"in a?{source:a.source}:{}):r!==o}var Fi=function(e){Ur(n,e);var t=Xr(n);function n(e){var r;(qt(this,n),Q(Wr(r=t.call(this,e)),"state",{resetCount:0}),Q(Wr(r),"cancelRegisterFunc",null),Q(Wr(r),"mounted",!1),Q(Wr(r),"touched",!1),Q(Wr(r),"dirty",!1),Q(Wr(r),"validatePromise",void 0),Q(Wr(r),"prevValidating",void 0),Q(Wr(r),"errors",Pi),Q(Wr(r),"warnings",Pi),Q(Wr(r),"cancelRegister",(function(){var e=r.props,t=e.preserve,n=e.isListField,o=e.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(n,t,Ni(o)),r.cancelRegisterFunc=null})),Q(Wr(r),"getNamePath",(function(){var e=r.props,t=e.name,n=e.fieldContext.prefixName;return void 0!==t?[].concat(P(void 0===n?[]:n),P(t)):[]})),Q(Wr(r),"getRules",(function(){var e=r.props,t=e.rules,n=void 0===t?[]:t,o=e.fieldContext;return n.map((function(e){return"function"===typeof e?e(o):e}))})),Q(Wr(r),"refresh",(function(){r.mounted&&r.setState((function(e){return{resetCount:e.resetCount+1}}))})),Q(Wr(r),"metaCache",null),Q(Wr(r),"triggerMetaEvent",(function(e){var t=r.props.onMetaChange;if(t){var n=nt(nt({},r.getMeta()),{},{destroy:e});Kt(r.metaCache,n)||t(n),r.metaCache=n}else r.metaCache=null})),Q(Wr(r),"onStoreChange",(function(e,t,n){var o=r.props,a=o.shouldUpdate,i=o.dependencies,s=void 0===i?[]:i,l=o.onReset,u=n.store,c=r.getNamePath(),d=r.getValue(e),h=r.getValue(u),p=t&&$i(t,c);switch("valueUpdate"!==n.type||"external"!==n.source||Kt(d,h)||(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=Pi,r.warnings=Pi,r.triggerMetaEvent()),n.type){case"reset":if(!t||p)return r.touched=!1,r.dirty=!1,r.validatePromise=void 0,r.errors=Pi,r.warnings=Pi,r.triggerMetaEvent(),null===l||void 0===l||l(),void r.refresh();break;case"remove":if(a&&Di(a,e,u,d,h,n))return void r.reRender();break;case"setField":var f=n.data;if(p)return"touched"in f&&(r.touched=f.touched),"validating"in f&&!("originRCField"in f)&&(r.validatePromise=f.validating?Promise.resolve([]):null),"errors"in f&&(r.errors=f.errors||Pi),"warnings"in f&&(r.warnings=f.warnings||Pi),r.dirty=!0,r.triggerMetaEvent(),void r.reRender();if("value"in f&&$i(t,c,!0))return void r.reRender();if(a&&!c.length&&Di(a,e,u,d,h,n))return void r.reRender();break;case"dependenciesUpdate":if(s.map(Ni).some((function(e){return $i(n.relatedFields,e)})))return void r.reRender();break;default:if(p||(!s.length||c.length||a)&&Di(a,e,u,d,h,n))return void r.reRender()}!0===a&&r.reRender()})),Q(Wr(r),"validateRules",(function(e){var t=r.getNamePath(),n=r.getValue(),o=e||{},a=o.triggerName,i=o.validateOnly,s=void 0!==i&&i,l=Promise.resolve().then(La(Ma().mark((function o(){var i,s,u,c,d,h,p;return Ma().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(r.mounted){o.next=2;break}return o.abrupt("return",[]);case 2:if(i=r.props,s=i.validateFirst,u=void 0!==s&&s,c=i.messageVariables,d=i.validateDebounce,h=r.getRules(),a&&(h=h.filter((function(e){return e})).filter((function(e){var t=e.validateTrigger;return!t||Wa(t).includes(a)}))),!d||!a){o.next=10;break}return o.next=8,new Promise((function(e){setTimeout(e,d)}));case 8:if(r.validatePromise===l){o.next=10;break}return o.abrupt("return",[]);case 10:return(p=Ci(t,n,h,e,u,c)).catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi;if(r.validatePromise===l){var t;r.validatePromise=null;var n=[],o=[];null===(t=e.forEach)||void 0===t||t.call(e,(function(e){var t=e.rule.warningOnly,r=e.errors,a=void 0===r?Pi:r;t?o.push.apply(o,P(a)):n.push.apply(n,P(a))})),r.errors=n,r.warnings=o,r.triggerMetaEvent(),r.reRender()}})),o.abrupt("return",p);case 13:case"end":return o.stop()}}),o)}))));return s||(r.validatePromise=l,r.dirty=!0,r.errors=Pi,r.warnings=Pi,r.triggerMetaEvent(),r.reRender()),l})),Q(Wr(r),"isFieldValidating",(function(){return!!r.validatePromise})),Q(Wr(r),"isFieldTouched",(function(){return r.touched})),Q(Wr(r),"isFieldDirty",(function(){return!(!r.dirty&&void 0===r.props.initialValue)||void 0!==(0,r.props.fieldContext.getInternalHooks(Ba).getInitialValue)(r.getNamePath())})),Q(Wr(r),"getErrors",(function(){return r.errors})),Q(Wr(r),"getWarnings",(function(){return r.warnings})),Q(Wr(r),"isListField",(function(){return r.props.isListField})),Q(Wr(r),"isList",(function(){return r.props.isList})),Q(Wr(r),"isPreserve",(function(){return r.props.preserve})),Q(Wr(r),"getMeta",(function(){return r.prevValidating=r.isFieldValidating(),{touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,warnings:r.warnings,name:r.getNamePath(),validated:null===r.validatePromise}})),Q(Wr(r),"getOnlyChild",(function(e){if("function"===typeof e){var t=r.getMeta();return nt(nt({},r.getOnlyChild(e(r.getControlled(),t,r.props.fieldContext))),{},{isFunction:!0})}var n=W(e);return 1===n.length&&I.isValidElement(n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}})),Q(Wr(r),"getValue",(function(e){var t=r.props.fieldContext.getFieldsValue,n=r.getNamePath();return mo(e||t(!0),n)})),Q(Wr(r),"getControlled",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.props,n=t.name,o=t.trigger,a=t.validateTrigger,i=t.getValueFromEvent,s=t.normalize,l=t.valuePropName,u=t.getValueProps,c=t.fieldContext,d=void 0!==a?a:c.validateTrigger,h=r.getNamePath(),p=c.getInternalHooks,f=c.getFieldsValue,m=p(Ba).dispatch,g=r.getValue(),v=u||function(e){return Q({},l,e)},b=e[o],y=void 0!==n?v(g):{};var w=nt(nt({},e),y);return w[o]=function(){var e;r.touched=!0,r.dirty=!0,r.triggerMetaEvent();for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e=i?i.apply(void 0,n):Ai.apply(void 0,[l].concat(n)),s&&(e=s(e,g,f(!0))),m({type:"updateValue",namePath:h,value:e}),b&&b.apply(void 0,n)},Wa(d||[]).forEach((function(e){var t=w[e];w[e]=function(){t&&t.apply(void 0,arguments);var n=r.props.rules;n&&n.length&&m({type:"validateField",namePath:h,triggerName:e})}})),w})),e.fieldContext)&&(0,(0,e.fieldContext.getInternalHooks)(Ba).initEntityValue)(Wr(r));return r}return Jt(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(Ba).registerField;this.cancelRegisterFunc=r(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,n=this.props.children,r=this.getOnlyChild(n),o=r.child;return r.isFunction?e=o:I.isValidElement(o)?e=I.cloneElement(o,this.getControlled(o.props)):(kt(!o,"`children` of Field is not validate ReactElement."),e=o),I.createElement(I.Fragment,{key:t},e)}}]),n}(I.Component);Q(Fi,"contextType",Ha),Q(Fi,"defaultProps",{trigger:"onChange",valuePropName:"value"});const _i=function(e){var t=e.name,n=Z(e,Ri),r=I.useContext(Ha),o=I.useContext(Va),a=void 0!==t?Ni(t):void 0,i="keep";return n.isListField||(i="_".concat((a||[]).join("_"))),I.createElement(Fi,G({key:i,name:a,isListField:!!o},n,{fieldContext:r}))};const Mi=function(e){var t=e.name,n=e.initialValue,r=e.children,o=e.rules,a=e.validateTrigger,i=e.isListField,s=I.useContext(Ha),l=I.useContext(Va),u=I.useRef({keys:[],id:0}).current,c=I.useMemo((function(){var e=Ni(s.prefixName)||[];return[].concat(P(e),P(Ni(t)))}),[s.prefixName,t]),d=I.useMemo((function(){return nt(nt({},s),{},{prefixName:c})}),[s,c]),h=I.useMemo((function(){return{getKey:function(e){var t=c.length,n=e[t];return[u.keys[n],e.slice(t+1)]}}}),[c]);return"function"!==typeof r?(kt(!1,"Form.List only accepts function as children."),null):I.createElement(Va.Provider,{value:h},I.createElement(Ha.Provider,{value:d},I.createElement(_i,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:o,validateTrigger:a,initialValue:n,isList:!0,isListField:null!==i&&void 0!==i?i:!!l},(function(e,t){var n=e.value,o=void 0===n?[]:n,a=e.onChange,i=s.getFieldValue,l=function(){return i(c||[])||[]},d={add:function(e,t){var n=l();t>=0&&t<=n.length?(u.keys=[].concat(P(u.keys.slice(0,t)),[u.id],P(u.keys.slice(t))),a([].concat(P(n.slice(0,t)),[e],P(n.slice(t))))):(u.keys=[].concat(P(u.keys),[u.id]),a([].concat(P(n),[e]))),u.id+=1},remove:function(e){var t=l(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(u.keys=u.keys.filter((function(e,t){return!n.has(t)})),a(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=l();e<0||e>=n.length||t<0||t>=n.length||(u.keys=Oi(u.keys,e,t),a(Oi(n,e,t)))}}},h=o||[];return Array.isArray(h)||(h=[]),r(h.map((function(e,t){var n=u.keys[t];return void 0===n&&(u.keys[t]=u.id,n=u.keys[t],u.id+=1),{name:t,key:n,isListField:!0}})),d,t)}))))};var zi="__@field_split__";function Li(e){return e.map((function(e){return"".concat(J(e),":").concat(e)})).join(zi)}var Bi=function(){function e(){qt(this,e),Q(this,"kvs",new Map)}return Jt(e,[{key:"set",value:function(e,t){this.kvs.set(Li(e),t)}},{key:"get",value:function(e){return this.kvs.get(Li(e))}},{key:"update",value:function(e,t){var n=t(this.get(e));n?this.set(e,n):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(Li(e))}},{key:"map",value:function(e){return P(this.kvs.entries()).map((function(t){var n=X(t,2),r=n[0],o=n[1],a=r.split(zi);return e({key:a.map((function(e){var t=X(e.match(/^([^:]*):(.*)$/),3),n=t[1],r=t[2];return"number"===n?Number(r):r})),value:o})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var n=t.key,r=t.value;return e[n.join(".")]=r,null})),e}}]),e}();const ji=Bi;var Hi=["name"],Vi=Jt((function e(t){var n=this;qt(this,e),Q(this,"formHooked",!1),Q(this,"forceRootUpdate",void 0),Q(this,"subscribable",!0),Q(this,"store",{}),Q(this,"fieldEntities",[]),Q(this,"initialValues",{}),Q(this,"callbacks",{}),Q(this,"validateMessages",null),Q(this,"preserve",null),Q(this,"lastValidatePromise",null),Q(this,"getForm",(function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldValue:n.setFieldValue,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}})),Q(this,"getInternalHooks",(function(e){return e===Ba?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(kt(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)})),Q(this,"useSubscribe",(function(e){n.subscribable=e})),Q(this,"prevWithoutPreserves",null),Q(this,"setInitialValues",(function(e,t){if(n.initialValues=e||{},t){var r,o=wo(e,n.store);null===(r=n.prevWithoutPreserves)||void 0===r||r.map((function(t){var n=t.key;o=vo(o,n,mo(e,n))})),n.prevWithoutPreserves=null,n.updateStore(o)}})),Q(this,"destroyForm",(function(e){if(e)n.updateStore({});else{var t=new ji;n.getFieldEntities(!0).forEach((function(e){n.isMergedPreserve(e.isPreserve())||t.set(e.getNamePath(),!0)})),n.prevWithoutPreserves=t}})),Q(this,"getInitialValue",(function(e){var t=mo(n.initialValues,e);return e.length?wo(t):t})),Q(this,"setCallbacks",(function(e){n.callbacks=e})),Q(this,"setValidateMessages",(function(e){n.validateMessages=e})),Q(this,"setPreserve",(function(e){n.preserve=e})),Q(this,"watchList",[]),Q(this,"registerWatch",(function(e){return n.watchList.push(e),function(){n.watchList=n.watchList.filter((function(t){return t!==e}))}})),Q(this,"notifyWatch",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(n.watchList.length){var t=n.getFieldsValue(),r=n.getFieldsValue(!0);n.watchList.forEach((function(n){n(t,r,e)}))}})),Q(this,"timeoutId",null),Q(this,"warningUnhooked",(function(){0})),Q(this,"updateStore",(function(e){n.store=e})),Q(this,"getFieldEntities",(function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?n.fieldEntities.filter((function(e){return e.getNamePath().length})):n.fieldEntities})),Q(this,"getFieldsMap",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ji;return n.getFieldEntities(e).forEach((function(e){var n=e.getNamePath();t.set(n,e)})),t})),Q(this,"getFieldEntitiesForNamePathList",(function(e){if(!e)return n.getFieldEntities(!0);var t=n.getFieldsMap(!0);return e.map((function(e){var n=Ni(e);return t.get(n)||{INVALIDATE_NAME_PATH:Ni(e)}}))})),Q(this,"getFieldsValue",(function(e,t){var r,o,a;if(n.warningUnhooked(),!0===e||Array.isArray(e)?(r=e,o=t):e&&"object"===J(e)&&(a=e.strict,o=e.filter),!0===r&&!o)return n.store;var i=n.getFieldEntitiesForNamePathList(Array.isArray(r)?r:null),s=[];return i.forEach((function(e){var t,n,i,l,u="INVALIDATE_NAME_PATH"in e?e.INVALIDATE_NAME_PATH:e.getNamePath();if(a){if(null!==(i=(l=e).isList)&&void 0!==i&&i.call(l))return}else if(!r&&null!==(t=(n=e).isListField)&&void 0!==t&&t.call(n))return;if(o){var c="getMeta"in e?e.getMeta():null;o(c)&&s.push(u)}else s.push(u)})),Ii(n.store,s.map(Ni))})),Q(this,"getFieldValue",(function(e){n.warningUnhooked();var t=Ni(e);return mo(n.store,t)})),Q(this,"getFieldsError",(function(e){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(e).map((function(t,n){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors(),warnings:t.getWarnings()}:{name:Ni(e[n]),errors:[],warnings:[]}}))})),Q(this,"getFieldError",(function(e){n.warningUnhooked();var t=Ni(e);return n.getFieldsError([t])[0].errors})),Q(this,"getFieldWarning",(function(e){n.warningUnhooked();var t=Ni(e);return n.getFieldsError([t])[0].warnings})),Q(this,"isFieldsTouched",(function(){n.warningUnhooked();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o,a=t[0],i=t[1],s=!1;0===t.length?o=null:1===t.length?Array.isArray(a)?(o=a.map(Ni),s=!1):(o=null,s=a):(o=a.map(Ni),s=i);var l=n.getFieldEntities(!0),u=function(e){return e.isFieldTouched()};if(!o)return s?l.every((function(e){return u(e)||e.isList()})):l.some(u);var c=new ji;o.forEach((function(e){c.set(e,[])})),l.forEach((function(e){var t=e.getNamePath();o.forEach((function(n){n.every((function(e,n){return t[n]===e}))&&c.update(n,(function(t){return[].concat(P(t),[e])}))}))}));var d=function(e){return e.some(u)},h=c.map((function(e){return e.value}));return s?h.every(d):h.some(d)})),Q(this,"isFieldTouched",(function(e){return n.warningUnhooked(),n.isFieldsTouched([e])})),Q(this,"isFieldsValidating",(function(e){n.warningUnhooked();var t=n.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var r=e.map(Ni);return t.some((function(e){var t=e.getNamePath();return $i(r,t)&&e.isFieldValidating()}))})),Q(this,"isFieldValidating",(function(e){return n.warningUnhooked(),n.isFieldsValidating([e])})),Q(this,"resetWithFieldInitialValue",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new ji,r=n.getFieldEntities(!0);r.forEach((function(e){var n=e.props.initialValue,r=e.getNamePath();if(void 0!==n){var o=t.get(r)||new Set;o.add({entity:e,value:n}),t.set(r,o)}}));var o;e.entities?o=e.entities:e.namePathList?(o=[],e.namePathList.forEach((function(e){var n,r=t.get(e);r&&(n=o).push.apply(n,P(P(r).map((function(e){return e.entity}))))}))):o=r,o.forEach((function(r){if(void 0!==r.props.initialValue){var o=r.getNamePath();if(void 0!==n.getInitialValue(o))kt(!1,"Form already set 'initialValues' with path '".concat(o.join("."),"'. Field can not overwrite it."));else{var a=t.get(o);if(a&&a.size>1)kt(!1,"Multiple Field with path '".concat(o.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(a){var i=n.getFieldValue(o);r.isListField()||e.skipExist&&void 0!==i||n.updateStore(vo(n.store,o,P(a)[0].value))}}}}))})),Q(this,"resetFields",(function(e){n.warningUnhooked();var t=n.store;if(!e)return n.updateStore(wo(n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(t,null,{type:"reset"}),void n.notifyWatch();var r=e.map(Ni);r.forEach((function(e){var t=n.getInitialValue(e);n.updateStore(vo(n.store,e,t))})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(t,r,{type:"reset"}),n.notifyWatch(r)})),Q(this,"setFields",(function(e){n.warningUnhooked();var t=n.store,r=[];e.forEach((function(e){var o=e.name,a=Z(e,Hi),i=Ni(o);r.push(i),"value"in a&&n.updateStore(vo(n.store,i,a.value)),n.notifyObservers(t,[i],{type:"setField",data:e})})),n.notifyWatch(r)})),Q(this,"getFields",(function(){return n.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),r=nt(nt({},e.getMeta()),{},{name:t,value:n.getFieldValue(t)});return Object.defineProperty(r,"originRCField",{value:!0}),r}))})),Q(this,"initEntityValue",(function(e){var t=e.props.initialValue;if(void 0!==t){var r=e.getNamePath();void 0===mo(n.store,r)&&n.updateStore(vo(n.store,r,t))}})),Q(this,"isMergedPreserve",(function(e){var t=void 0!==e?e:n.preserve;return null===t||void 0===t||t})),Q(this,"registerField",(function(e){n.fieldEntities.push(e);var t=e.getNamePath();if(n.notifyWatch([t]),void 0!==e.props.initialValue){var r=n.store;n.resetWithFieldInitialValue({entities:[e],skipExist:!0}),n.notifyObservers(r,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(r,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter((function(t){return t!==e})),!n.isMergedPreserve(o)&&(!r||a.length>1)){var i=r?void 0:n.getInitialValue(t);if(t.length&&n.getFieldValue(t)!==i&&n.fieldEntities.every((function(e){return!Ti(e.getNamePath(),t)}))){var s=n.store;n.updateStore(vo(s,t,i,!0)),n.notifyObservers(s,[t],{type:"remove"}),n.triggerDependenciesUpdate(s,t)}}n.notifyWatch([t])}})),Q(this,"dispatch",(function(e){switch(e.type){case"updateValue":var t=e.namePath,r=e.value;n.updateValue(t,r);break;case"validateField":var o=e.namePath,a=e.triggerName;n.validateFields([o],{triggerName:a})}})),Q(this,"notifyObservers",(function(e,t,r){if(n.subscribable){var o=nt(nt({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(e,t,o)}))}else n.forceRootUpdate()})),Q(this,"triggerDependenciesUpdate",(function(e,t){var r=n.getDependencyChildrenFields(t);return r.length&&n.validateFields(r),n.notifyObservers(e,r,{type:"dependenciesUpdate",relatedFields:[t].concat(P(r))}),r})),Q(this,"updateValue",(function(e,t){var r=Ni(e),o=n.store;n.updateStore(vo(n.store,r,t)),n.notifyObservers(o,[r],{type:"valueUpdate",source:"internal"}),n.notifyWatch([r]);var a=n.triggerDependenciesUpdate(o,r),i=n.callbacks.onValuesChange;i&&i(Ii(n.store,[r]),n.getFieldsValue());n.triggerOnFieldsChange([r].concat(P(a)))})),Q(this,"setFieldsValue",(function(e){n.warningUnhooked();var t=n.store;if(e){var r=wo(n.store,e);n.updateStore(r)}n.notifyObservers(t,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()})),Q(this,"setFieldValue",(function(e,t){n.setFields([{name:e,value:t}])})),Q(this,"getDependencyChildrenFields",(function(e){var t=new Set,r=[],o=new ji;n.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var n=Ni(t);o.update(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))}));return function e(n){(o.get(n)||new Set).forEach((function(n){if(!t.has(n)){t.add(n);var o=n.getNamePath();n.isFieldDirty()&&o.length&&(r.push(o),e(o))}}))}(e),r})),Q(this,"triggerOnFieldsChange",(function(e,t){var r=n.callbacks.onFieldsChange;if(r){var o=n.getFields();if(t){var a=new ji;t.forEach((function(e){var t=e.name,n=e.errors;a.set(t,n)})),o.forEach((function(e){e.errors=a.get(e.name)||e.errors}))}var i=o.filter((function(t){var n=t.name;return $i(e,n)}));i.length&&r(i,o)}})),Q(this,"validateFields",(function(e,t){var r,o;n.warningUnhooked(),Array.isArray(e)||"string"===typeof e||"string"===typeof t?(r=e,o=t):o=e;var a=!!r,i=a?r.map(Ni):[],s=[],l=String(Date.now()),u=new Set,c=o||{},d=c.recursive,h=c.dirty;n.getFieldEntities(!0).forEach((function(e){if(a||i.push(e.getNamePath()),e.props.rules&&e.props.rules.length&&(!h||e.isFieldDirty())){var t=e.getNamePath();if(u.add(t.join(l)),!a||$i(i,t,d)){var r=e.validateRules(nt({validateMessages:nt(nt({},vi),n.validateMessages)},o));s.push(r.then((function(){return{name:t,errors:[],warnings:[]}})).catch((function(e){var n,r=[],o=[];return null===(n=e.forEach)||void 0===n||n.call(e,(function(e){var t=e.rule.warningOnly,n=e.errors;t?o.push.apply(o,P(n)):r.push.apply(r,P(n))})),r.length?Promise.reject({name:t,errors:r,warnings:o}):{name:t,errors:r,warnings:o}})))}}}));var p=function(e){var t=!1,n=e.length,r=[];return e.length?new Promise((function(o,a){e.forEach((function(e,i){e.catch((function(e){return t=!0,e})).then((function(e){n-=1,r[i]=e,n>0||(t&&a(r),o(r))}))}))})):Promise.resolve([])}(s);n.lastValidatePromise=p,p.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));n.notifyObservers(n.store,t,{type:"validateFinish"}),n.triggerOnFieldsChange(t,e)}));var f=p.then((function(){return n.lastValidatePromise===p?Promise.resolve(n.getFieldsValue(i)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n.getFieldsValue(i),errorFields:t,outOfDate:n.lastValidatePromise!==p})}));f.catch((function(e){return e}));var m=i.filter((function(e){return u.has(e.join(l))}));return n.triggerOnFieldsChange(m),f})),Q(this,"submit",(function(){n.warningUnhooked(),n.validateFields().then((function(e){var t=n.callbacks.onFinish;if(t)try{t(e)}catch(r){console.error(r)}})).catch((function(e){var t=n.callbacks.onFinishFailed;t&&t(e)}))})),this.forceRootUpdate=t}));const Wi=function(e){var t=I.useRef(),n=X(I.useState({}),2)[1];if(!t.current)if(e)t.current=e;else{var r=new Vi((function(){n({})}));t.current=r.getForm()}return[t.current]};var Gi=I.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}});const Ui=Gi;var Ki=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"];const qi=function(e,t){var n=e.name,r=e.initialValues,o=e.fields,a=e.form,i=e.preserve,s=e.children,l=e.component,u=void 0===l?"form":l,c=e.validateMessages,d=e.validateTrigger,h=void 0===d?"onChange":d,p=e.onValuesChange,f=e.onFieldsChange,m=e.onFinish,g=e.onFinishFailed,v=e.clearOnDestroy,b=Z(e,Ki),y=I.useRef(null),w=I.useContext(Ui),x=X(Wi(a),1)[0],k=x.getInternalHooks(Ba),C=k.useSubscribe,S=k.setInitialValues,E=k.setCallbacks,N=k.setValidateMessages,$=k.setPreserve,T=k.destroyForm;I.useImperativeHandle(t,(function(){return nt(nt({},x),{},{nativeElement:y.current})})),I.useEffect((function(){return w.registerForm(n,x),function(){w.unregisterForm(n)}}),[w,x,n]),N(nt(nt({},w.validateMessages),c)),E({onValuesChange:p,onFieldsChange:function(e){if(w.triggerFormChange(n,e),f){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];f.apply(void 0,[e].concat(r))}},onFinish:function(e){w.triggerFormFinish(n,e),m&&m(e)},onFinishFailed:g}),$(i);var A,O=I.useRef(null);S(r,!O.current),O.current||(O.current=!0),I.useEffect((function(){return function(){return T(v)}}),[]);var R="function"===typeof s;R?A=s(x.getFieldsValue(!0),x):A=s;C(!R);var D=I.useRef();I.useEffect((function(){(function(e,t){if(e===t)return!0;if(!e&&t||e&&!t)return!1;if(!e||!t||"object"!==J(e)||"object"!==J(t))return!1;var n=Object.keys(e),r=Object.keys(t);return P(new Set([].concat(n,r))).every((function(n){var r=e[n],o=t[n];return"function"===typeof r&&"function"===typeof o||r===o}))})(D.current||[],o||[])||x.setFields(o||[]),D.current=o}),[o,x]);var F=I.useMemo((function(){return nt(nt({},x),{},{validateTrigger:h})}),[x,h]),_=I.createElement(Va.Provider,{value:null},I.createElement(Ha.Provider,{value:F},A));return!1===u?_:I.createElement(u,G({},b,{ref:y,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),x.submit()},onReset:function(e){var t;e.preventDefault(),x.resetFields(),null===(t=b.onReset)||void 0===t||t.call(b,e)}}),_)};function Xi(e){try{return JSON.stringify(e)}catch(t){return Math.random()}}var Ji=function(){};const Yi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],o=t[1],a=void 0===o?{}:o,i=function(e){return e&&!!e._init}(a)?{form:a}:a,s=i.form,l=X((0,I.useState)(),2),u=l[0],c=l[1],d=(0,I.useMemo)((function(){return Xi(u)}),[u]),h=(0,I.useRef)(d);h.current=d;var p=(0,I.useContext)(Ha),f=s||p,m=f&&f._init,g=Ni(r),v=(0,I.useRef)(g);return v.current=g,Ji(g),(0,I.useEffect)((function(){if(m){var e=f.getFieldsValue,t=(0,f.getInternalHooks)(Ba).registerWatch,n=function(e,t){var n=i.preserve?t:e;return"function"===typeof r?r(n):mo(n,v.current)},o=t((function(e,t){var r=n(e,t),o=Xi(r);h.current!==o&&(h.current=o,c(r))})),a=n(e(),e(!0));return u!==a&&c(a),o}}),[m]),u};var Qi=I.forwardRef(qi);Qi.FormProvider=function(e){var t=e.validateMessages,n=e.onFormChange,r=e.onFormFinish,o=e.children,a=I.useContext(Gi),i=I.useRef({});return I.createElement(Gi.Provider,{value:nt(nt({},a),{},{validateMessages:nt(nt({},a.validateMessages),t),triggerFormChange:function(e,t){n&&n(e,{changedFields:t,forms:i.current}),a.triggerFormChange(e,t)},triggerFormFinish:function(e,t){r&&r(e,{values:t,forms:i.current}),a.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(i.current=nt(nt({},i.current),{},Q({},e,t))),a.registerForm(e,t)},unregisterForm:function(e){var t=nt({},i.current);delete t[e],i.current=t,a.unregisterForm(e)}})},o)},Qi.Field=_i,Qi.List=Mi,Qi.useForm=Wi,Qi.useWatch=Yi;const Zi=I.createContext({});const es=e=>{let{children:t,status:n,override:r}=e;const o=(0,I.useContext)(Zi),a=(0,I.useMemo)((()=>{const e=Object.assign({},o);return r&&delete e.isFormItemInput,n&&(delete e.status,delete e.hasFeedback,delete e.feedbackIcon),e}),[n,r,o]);return I.createElement(Zi.Provider,{value:a},t)},ts=(0,I.createContext)(void 0);function ns(e,t,n){const{focusElCls:r,focus:o,borderElCls:a}=n,i=a?"> *":"",s=["hover",o?"focus":null,"active"].filter(Boolean).map((e=>`&:${e} ${i}`)).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[s]:{zIndex:2}},r?{[`&${r}`]:{zIndex:2}}:{}),{[`&[disabled] ${i}`]:{zIndex:0}})}}function rs(e,t,n){const{borderElCls:r}=n,o=r?`> ${r}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${o}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${o}, &${e}-sm ${o}, &${e}-lg ${o}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${o}, &${e}-sm ${o}, &${e}-lg ${o}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function os(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{focus:!0};const{componentCls:n}=e,r=`${n}-compact`;return{[r]:Object.assign(Object.assign({},ns(e,r,t)),rs(n,r,t))}}function as(e){return So(e,{inputAffixPadding:e.paddingXXS})}const is=e=>{const{controlHeight:t,fontSize:n,lineHeight:r,lineWidth:o,controlHeightSM:a,controlHeightLG:i,fontSizeLG:s,lineHeightLG:l,paddingSM:u,controlPaddingHorizontalSM:c,controlPaddingHorizontal:d,colorFillAlter:h,colorPrimaryHover:p,colorPrimary:f,controlOutlineWidth:m,controlOutline:g,colorErrorOutline:v,colorWarningOutline:b,colorBgContainer:y}=e;return{paddingBlock:Math.max(Math.round((t-n*r)/2*10)/10-o,0),paddingBlockSM:Math.max(Math.round((a-n*r)/2*10)/10-o,0),paddingBlockLG:Math.ceil((i-s*l)/2*10)/10-o,paddingInline:u-o,paddingInlineSM:c-o,paddingInlineLG:d-o,addonBg:h,activeBorderColor:f,hoverBorderColor:p,activeShadow:`0 0 0 ${m}px ${g}`,errorActiveShadow:`0 0 0 ${m}px ${v}`,warningActiveShadow:`0 0 0 ${m}px ${b}`,hoverBg:y,activeBg:y,inputFontSize:n,inputFontSizeLG:s,inputFontSizeSM:n}},ss=e=>({borderColor:e.hoverBorderColor,backgroundColor:e.hoverBg}),ls=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},ss(So(e,{hoverBorderColor:e.colorBorder,hoverBg:e.colorBgContainerDisabled})))}),us=(e,t)=>({background:e.colorBgContainer,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:t.borderColor,"&:hover":{borderColor:t.hoverBorderColor,backgroundColor:e.hoverBg},"&:focus, &:focus-within":{borderColor:t.activeBorderColor,boxShadow:t.activeShadow,outline:0,backgroundColor:e.activeBg}}),cs=(e,t)=>({[`&${e.componentCls}-status-${t.status}:not(${e.componentCls}-disabled)`]:Object.assign(Object.assign({},us(e,t)),{[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:t.affixColor}}),[`&${e.componentCls}-status-${t.status}${e.componentCls}-disabled`]:{borderColor:t.borderColor}}),ds=(e,t)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},us(e,{borderColor:e.colorBorder,hoverBorderColor:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeShadow:e.activeShadow})),{[`&${e.componentCls}-disabled, &[disabled]`]:Object.assign({},ls(e))}),cs(e,{status:"error",borderColor:e.colorError,hoverBorderColor:e.colorErrorBorderHover,activeBorderColor:e.colorError,activeShadow:e.errorActiveShadow,affixColor:e.colorError})),cs(e,{status:"warning",borderColor:e.colorWarning,hoverBorderColor:e.colorWarningBorderHover,activeBorderColor:e.colorWarning,activeShadow:e.warningActiveShadow,affixColor:e.colorWarning})),t)}),hs=(e,t)=>({[`&${e.componentCls}-group-wrapper-status-${t.status}`]:{[`${e.componentCls}-group-addon`]:{borderColor:t.addonBorderColor,color:t.addonColor}}}),ps=e=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${e.componentCls}-group`]:{"&-addon":{background:e.addonBg,border:`${yn(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},hs(e,{status:"error",addonBorderColor:e.colorError,addonColor:e.colorErrorText})),hs(e,{status:"warning",addonBorderColor:e.colorWarning,addonColor:e.colorWarningText})),{[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group-addon`]:Object.assign({},ls(e))}})}),fs=(e,t)=>{const{componentCls:n}=e;return{"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${n}-disabled, &[disabled]`]:{color:e.colorTextDisabled},[`&${n}-status-error`]:{"&, & input, & textarea":{color:e.colorError}},[`&${n}-status-warning`]:{"&, & input, & textarea":{color:e.colorWarning}}},t)}},ms=(e,t)=>({background:t.bg,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:null===t||void 0===t?void 0:t.inputColor},"&:hover":{background:t.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:t.activeBorderColor,backgroundColor:e.activeBg}}),gs=(e,t)=>({[`&${e.componentCls}-status-${t.status}:not(${e.componentCls}-disabled)`]:Object.assign(Object.assign({},ms(e,t)),{[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:t.affixColor}})}),vs=(e,t)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ms(e,{bg:e.colorFillTertiary,hoverBg:e.colorFillSecondary,activeBorderColor:e.activeBorderColor})),{[`&${e.componentCls}-disabled, &[disabled]`]:Object.assign({},ls(e))}),gs(e,{status:"error",bg:e.colorErrorBg,hoverBg:e.colorErrorBgHover,activeBorderColor:e.colorError,inputColor:e.colorErrorText,affixColor:e.colorError})),gs(e,{status:"warning",bg:e.colorWarningBg,hoverBg:e.colorWarningBgHover,activeBorderColor:e.colorWarning,inputColor:e.colorWarningText,affixColor:e.colorWarning})),t)}),bs=(e,t)=>({[`&${e.componentCls}-group-wrapper-status-${t.status}`]:{[`${e.componentCls}-group-addon`]:{background:t.addonBg,color:t.addonColor}}}),ys=e=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${e.componentCls}-group`]:{"&-addon":{background:e.colorFillTertiary},[`${e.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${yn(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${yn(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}}}},bs(e,{status:"error",addonBg:e.colorErrorBg,addonColor:e.colorErrorText})),bs(e,{status:"warning",addonBg:e.colorWarningBg,addonColor:e.colorWarningText})),{[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group`]:{"&-addon":{background:e.colorFillTertiary,color:e.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${yn(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${yn(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${yn(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${yn(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${yn(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${yn(e.lineWidth)} ${e.lineType} ${e.colorBorder}`}}}})}),ws=e=>{const{paddingBlockLG:t,lineHeightLG:n,borderRadiusLG:r,paddingInlineLG:o}=e;return{padding:`${yn(t)} ${yn(o)}`,fontSize:e.inputFontSizeLG,lineHeight:n,borderRadius:r}},xs=e=>({padding:`${yn(e.paddingBlockSM)} ${yn(e.paddingInlineSM)}`,fontSize:e.inputFontSizeSM,borderRadius:e.borderRadiusSM}),ks=e=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${yn(e.paddingBlock)} ${yn(e.paddingInline)}`,color:e.colorText,fontSize:e.inputFontSize,lineHeight:e.lineHeight,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`},{"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e.colorTextPlaceholder,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},ws(e)),"&-sm":Object.assign({},xs(e)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),Cs=e=>{const{componentCls:t,antCls:n}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${t}, &-lg > ${t}-group-addon`]:Object.assign({},ws(e)),[`&-sm ${t}, &-sm > ${t}-group-addon`]:Object.assign({},xs(e)),[`&-lg ${n}-select-single ${n}-select-selector`]:{height:e.controlHeightLG},[`&-sm ${n}-select-single ${n}-select-selector`]:{height:e.controlHeightSM},[`> ${t}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${t}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${yn(e.paddingInline)}`,color:e.colorText,fontWeight:"normal",fontSize:e.inputFontSize,textAlign:"center",borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${n}-select`]:{margin:`${yn(e.calc(e.paddingBlock).add(1).mul(-1).equal())} ${yn(e.calc(e.paddingInline).mul(-1).equal())}`,[`&${n}-select-single:not(${n}-select-customize-input):not(${n}-pagination-size-changer)`]:{[`${n}-select-selector`]:{backgroundColor:"inherit",border:`${yn(e.lineWidth)} ${e.lineType} transparent`,boxShadow:"none"}}},[`${n}-cascader-picker`]:{margin:`-9px ${yn(e.calc(e.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${n}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[t]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${t}-search-with-button &`]:{zIndex:0}}},[`> ${t}:first-child, ${t}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}-affix-wrapper`]:{[`&:not(:first-child) ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}:last-child, ${t}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${t}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${t}-search &`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}},[`&:not(:first-child), ${t}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${t}-group-compact`]:Object.assign(Object.assign({display:"block"},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),{[`${t}-group-addon, ${t}-group-wrap, > ${t}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`\n        & > ${t}-affix-wrapper,\n        & > ${t}-number-affix-wrapper,\n        & > ${n}-picker-range\n      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal(),borderInlineEndWidth:e.lineWidth},[t]:{float:"none"},[`& > ${n}-select > ${n}-select-selector,\n      & > ${n}-select-auto-complete ${t},\n      & > ${n}-cascader-picker ${t},\n      & > ${t}-group-wrapper ${t}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${n}-select-focused`]:{zIndex:1},[`& > ${n}-select > ${n}-select-arrow`]:{zIndex:1},[`& > *:first-child,\n      & > ${n}-select:first-child > ${n}-select-selector,\n      & > ${n}-select-auto-complete:first-child ${t},\n      & > ${n}-cascader-picker:first-child ${t}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,\n      & > ${n}-select:last-child > ${n}-select-selector,\n      & > ${n}-cascader-picker:last-child ${t},\n      & > ${n}-cascader-picker-focused:last-child ${t}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${n}-select-auto-complete ${t}`]:{verticalAlign:"top"},[`${t}-group-wrapper + ${t}-group-wrapper`]:{marginInlineStart:e.calc(e.lineWidth).mul(-1).equal(),[`${t}-affix-wrapper`]:{borderRadius:0}},[`${t}-group-wrapper:not(:last-child)`]:{[`&${t}-search > ${t}-group`]:{[`& > ${t}-group-addon > ${t}-search-button`]:{borderRadius:0},[`& > ${t}`]:{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}}}})}},Ss=e=>{const{componentCls:t,controlHeightSM:n,lineWidth:r,calc:o}=e,a=o(n).sub(o(r).mul(2)).sub(16).div(2).equal();return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_o(e)),ks(e)),ds(e)),vs(e)),fs(e)),{'&[type="color"]':{height:e.controlHeight,[`&${t}-lg`]:{height:e.controlHeightLG},[`&${t}-sm`]:{height:n,paddingTop:a,paddingBottom:a}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},Es=e=>{const{componentCls:t}=e;return{[`${t}-clear-icon`]:{margin:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${yn(e.inputAffixPadding)}`}}}},Ns=e=>{const{componentCls:t,inputAffixPadding:n,colorTextDescription:r,motionDurationSlow:o,colorIcon:a,colorIconHover:i,iconCls:s}=e,l=`${t}-affix-wrapper`,u=`${t}-affix-wrapper-disabled`;return{[l]:Object.assign(Object.assign(Object.assign(Object.assign({},ks(e)),{display:"inline-flex",[`&:not(${t}-disabled):hover`]:{zIndex:1,[`${t}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${t}`]:{padding:0},[`> input${t}, > textarea${t}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[t]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:r},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:n},"&-suffix":{marginInlineStart:n}}}),Es(e)),{[`${s}${t}-password-icon`]:{color:a,cursor:"pointer",transition:`all ${o}`,"&:hover":{color:i}}}),[u]:{[`${s}${t}-password-icon`]:{color:a,cursor:"not-allowed","&:hover":{color:a}}}}},Is=e=>{const{componentCls:t,borderRadiusLG:n,borderRadiusSM:r}=e;return{[`${t}-group`]:Object.assign(Object.assign(Object.assign({},_o(e)),Cs(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${t}-group-addon`]:{borderRadius:n,fontSize:e.inputFontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:r}}},ps(e)),ys(e)),{[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},$s=e=>{const{componentCls:t,antCls:n}=e,r=`${t}-search`;return{[r]:{[t]:{"&:hover, &:focus":{borderColor:e.colorPrimaryHover,[`+ ${t}-group-addon ${r}-button:not(${n}-btn-primary)`]:{borderInlineStartColor:e.colorPrimaryHover}}},[`${t}-affix-wrapper`]:{height:e.controlHeight,borderRadius:0},[`${t}-lg`]:{lineHeight:e.calc(e.lineHeightLG).sub(2e-4).equal()},[`> ${t}-group`]:{[`> ${t}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${r}-button`]:{marginInlineEnd:-1,paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderEndStartRadius:0,boxShadow:"none"},[`${r}-button:not(${n}-btn-primary)`]:{color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive},[`&${n}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${r}-button`]:{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}},"&-large":{[`${t}-affix-wrapper, ${r}-button`]:{height:e.controlHeightLG}},"&-small":{[`${t}-affix-wrapper, ${r}-button`]:{height:e.controlHeightSM}},"&-rtl":{direction:"rtl"},[`&${t}-compact-item`]:{[`&:not(${t}-compact-last-item)`]:{[`${t}-group-addon`]:{[`${t}-search-button`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${t}-compact-first-item)`]:{[`${t},${t}-affix-wrapper`]:{borderRadius:0}},[`> ${t}-group-addon ${t}-search-button,\n        > ${t},\n        ${t}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${t}-affix-wrapper-focused`]:{zIndex:2}}}}},Ts=e=>{const{componentCls:t,paddingLG:n}=e,r=`${t}-textarea`;return{[r]:{position:"relative","&-show-count":{[`> ${t}`]:{height:"100%"},[`${t}-data-count`]:{position:"absolute",bottom:e.calc(e.fontSize).mul(e.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`\n        &-allow-clear > ${t},\n        &-affix-wrapper${r}-has-feedback ${t}\n      `]:{paddingInlineEnd:n},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingInline,insetBlockStart:e.paddingXS},[`${r}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${t}-affix-wrapper-sm`]:{[`${t}-suffix`]:{[`${t}-clear-icon`]:{insetInlineEnd:e.paddingInlineSM}}}}}},As=e=>{const{componentCls:t}=e;return{[`${t}-out-of-range`]:{[`&, & input, & textarea, ${t}-show-count-suffix, ${t}-data-count`]:{color:e.colorError}}}},Os=ha("Input",(e=>{const t=So(e,as(e));return[Ss(t),Ts(t),Ns(t),Is(t),$s(t),As(t),os(t)]}),is,{resetFont:!1}),Rs=e=>{const{getPrefixCls:t,direction:n}=(0,I.useContext)(B),{prefixCls:r,className:o}=e,a=t("input-group",r),i=t("input"),[s,l]=Os(i),u=F()(a,{[`${a}-lg`]:"large"===e.size,[`${a}-sm`]:"small"===e.size,[`${a}-compact`]:e.compact,[`${a}-rtl`]:"rtl"===n},l,o),c=(0,I.useContext)(Zi),d=(0,I.useMemo)((()=>Object.assign(Object.assign({},c),{isFormItemInput:!1})),[c]);return s(I.createElement("span",{className:u,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},I.createElement(Zi.Provider,{value:d},e.children)))};function Ps(e,t,n){var r=t.cloneNode(!0),o=Object.create(e,{target:{value:r},currentTarget:{value:r}});return r.value=n,"number"===typeof t.selectionStart&&"number"===typeof t.selectionEnd&&(r.selectionStart=t.selectionStart,r.selectionEnd=t.selectionEnd),r.setSelectionRange=function(){t.setSelectionRange.apply(t,arguments)},o}function Ds(e,t,n,r){if(n){var o=t;"click"!==t.type?"file"===e.type||void 0===r?n(o):n(o=Ps(t,e,r)):n(o=Ps(t,e,""))}}var Fs=I.forwardRef((function(e,t){var n,r,o=e.inputElement,a=e.children,i=e.prefixCls,s=e.prefix,l=e.suffix,u=e.addonBefore,c=e.addonAfter,d=e.className,h=e.style,p=e.disabled,f=e.readOnly,m=e.focused,g=e.triggerFocus,v=e.allowClear,b=e.value,y=e.handleReset,w=e.hidden,x=e.classes,k=e.classNames,C=e.dataAttrs,S=e.styles,E=e.components,N=e.onClear,$=null!==a&&void 0!==a?a:o,T=(null===E||void 0===E?void 0:E.affixWrapper)||"span",A=(null===E||void 0===E?void 0:E.groupWrapper)||"span",O=(null===E||void 0===E?void 0:E.wrapper)||"span",R=(null===E||void 0===E?void 0:E.groupAddon)||"span",P=(0,I.useRef)(null),D=function(e){return!!(e.prefix||e.suffix||e.allowClear)}(e),_=(0,I.cloneElement)($,{value:b,className:F()($.props.className,!D&&(null===k||void 0===k?void 0:k.variant))||null}),M=(0,I.useRef)(null);if(I.useImperativeHandle(t,(function(){return{nativeElement:M.current||P.current}})),D){var z=null;if(v){var L=!p&&!f&&b,B="".concat(i,"-clear-icon"),j="object"===J(v)&&null!==v&&void 0!==v&&v.clearIcon?v.clearIcon:"\u2716";z=I.createElement("span",{onClick:function(e){null===y||void 0===y||y(e),null===N||void 0===N||N()},onMouseDown:function(e){return e.preventDefault()},className:F()(B,Q(Q({},"".concat(B,"-hidden"),!L),"".concat(B,"-has-suffix"),!!l)),role:"button",tabIndex:-1},j)}var H="".concat(i,"-affix-wrapper"),V=F()(H,Q(Q(Q(Q(Q({},"".concat(i,"-disabled"),p),"".concat(H,"-disabled"),p),"".concat(H,"-focused"),m),"".concat(H,"-readonly"),f),"".concat(H,"-input-with-clear-btn"),l&&v&&b),null===x||void 0===x?void 0:x.affixWrapper,null===k||void 0===k?void 0:k.affixWrapper,null===k||void 0===k?void 0:k.variant),W=(l||v)&&I.createElement("span",{className:F()("".concat(i,"-suffix"),null===k||void 0===k?void 0:k.suffix),style:null===S||void 0===S?void 0:S.suffix},z,l);_=I.createElement(T,G({className:V,style:null===S||void 0===S?void 0:S.affixWrapper,onClick:function(e){var t;null!==(t=P.current)&&void 0!==t&&t.contains(e.target)&&(null===g||void 0===g||g())}},null===C||void 0===C?void 0:C.affixWrapper,{ref:P}),s&&I.createElement("span",{className:F()("".concat(i,"-prefix"),null===k||void 0===k?void 0:k.prefix),style:null===S||void 0===S?void 0:S.prefix},s),_,W)}if(function(e){return!(!e.addonBefore&&!e.addonAfter)}(e)){var U="".concat(i,"-group"),K="".concat(U,"-addon"),q="".concat(U,"-wrapper"),X=F()("".concat(i,"-wrapper"),U,null===x||void 0===x?void 0:x.wrapper,null===k||void 0===k?void 0:k.wrapper),Y=F()(q,Q({},"".concat(q,"-disabled"),p),null===x||void 0===x?void 0:x.group,null===k||void 0===k?void 0:k.groupWrapper);_=I.createElement(A,{className:Y,ref:M},I.createElement(O,{className:X},u&&I.createElement(R,{className:K},u),_,c&&I.createElement(R,{className:K},c)))}return I.cloneElement(_,{className:F()(null===(n=_.props)||void 0===n?void 0:n.className,d)||null,style:nt(nt({},null===(r=_.props)||void 0===r?void 0:r.style),h),hidden:w})}));const _s=Fs;var Ms=["show"];function zs(e,t){return I.useMemo((function(){var n={};t&&(n.show="object"===J(t)&&t.formatter?t.formatter:!!t);var r=n=nt(nt({},n),e),o=r.show,a=Z(r,Ms);return nt(nt({},a),{},{show:!!o,showFormatter:"function"===typeof o?o:void 0,strategy:a.strategy||function(e){return e.length}})}),[e,t])}var Ls=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],Bs=(0,I.forwardRef)((function(e,t){var n=e.autoComplete,r=e.onChange,o=e.onFocus,a=e.onBlur,i=e.onPressEnter,s=e.onKeyDown,l=e.onKeyUp,u=e.prefixCls,c=void 0===u?"rc-input":u,d=e.disabled,h=e.htmlSize,p=e.className,f=e.maxLength,m=e.suffix,g=e.showCount,v=e.count,b=e.type,y=void 0===b?"text":b,w=e.classes,x=e.classNames,k=e.styles,C=e.onCompositionStart,S=e.onCompositionEnd,E=Z(e,Ls),N=X((0,I.useState)(!1),2),$=N[0],T=N[1],A=(0,I.useRef)(!1),O=(0,I.useRef)(!1),R=(0,I.useRef)(null),D=(0,I.useRef)(null),M=function(e){R.current&&function(e,t){if(e){e.focus(t);var n=(t||{}).cursor;if(n){var r=e.value.length;switch(n){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}}(R.current,e)},z=X(so(e.defaultValue,{value:e.value}),2),L=z[0],B=z[1],j=void 0===L||null===L?"":String(L),H=X((0,I.useState)(null),2),V=H[0],W=H[1],U=zs(v,g),K=U.max||f,q=U.strategy(j),J=!!K&&q>K;(0,I.useImperativeHandle)(t,(function(){var e;return{focus:M,blur:function(){var e;null===(e=R.current)||void 0===e||e.blur()},setSelectionRange:function(e,t,n){var r;null===(r=R.current)||void 0===r||r.setSelectionRange(e,t,n)},select:function(){var e;null===(e=R.current)||void 0===e||e.select()},input:R.current,nativeElement:(null===(e=D.current)||void 0===e?void 0:e.nativeElement)||R.current}})),(0,I.useEffect)((function(){T((function(e){return(!e||!d)&&e}))}),[d]);var Y=function(e,t,n){var o,a,i=t;if(!A.current&&U.exceedFormatter&&U.max&&U.strategy(t)>U.max)t!==(i=U.exceedFormatter(t,{max:U.max}))&&W([(null===(o=R.current)||void 0===o?void 0:o.selectionStart)||0,(null===(a=R.current)||void 0===a?void 0:a.selectionEnd)||0]);else if("compositionEnd"===n.source)return;B(i),R.current&&Ds(R.current,e,r,i)};(0,I.useEffect)((function(){var e;V&&(null===(e=R.current)||void 0===e||e.setSelectionRange.apply(e,P(V)))}),[V]);var ee=function(e){Y(e,e.target.value,{source:"change"})},te=function(e){A.current=!1,Y(e,e.currentTarget.value,{source:"compositionEnd"}),null===S||void 0===S||S(e)},ne=function(e){i&&"Enter"===e.key&&!O.current&&(O.current=!0,i(e)),null===s||void 0===s||s(e)},re=function(e){"Enter"===e.key&&(O.current=!1),null===l||void 0===l||l(e)},oe=function(e){T(!0),null===o||void 0===o||o(e)},ae=function(e){T(!1),null===a||void 0===a||a(e)},ie=J&&"".concat(c,"-out-of-range");return I.createElement(_s,G({},E,{prefixCls:c,className:F()(p,ie),handleReset:function(e){B(""),M(),R.current&&Ds(R.current,e,r)},value:j,focused:$,triggerFocus:M,suffix:function(){var e=Number(K)>0;if(m||U.show){var t=U.showFormatter?U.showFormatter({value:j,count:q,maxLength:K}):"".concat(q).concat(e?" / ".concat(K):"");return I.createElement(I.Fragment,null,U.show&&I.createElement("span",{className:F()("".concat(c,"-show-count-suffix"),Q({},"".concat(c,"-show-count-has-suffix"),!!m),null===x||void 0===x?void 0:x.count),style:nt({},null===k||void 0===k?void 0:k.count)},t),m)}return null}(),disabled:d,classes:w,classNames:x,styles:k}),function(){var t=_(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return I.createElement("input",G({autoComplete:n},t,{onChange:ee,onFocus:oe,onBlur:ae,onKeyDown:ne,onKeyUp:re,className:F()(c,Q({},"".concat(c,"-disabled"),d),null===x||void 0===x?void 0:x.input),style:null===k||void 0===k?void 0:k.input,ref:R,size:h,type:y,onCompositionStart:function(e){A.current=!0,null===C||void 0===C||C(e)},onCompositionEnd:te}))}())}));const js=Bs,Hs=I.createContext(void 0),Vs=e=>{let{children:t,size:n}=e;const r=I.useContext(Hs);return I.createElement(Hs.Provider,{value:n||r},t)},Ws=Hs,Gs=e=>{const t=I.useContext(Ws);return I.useMemo((()=>e?"string"===typeof e?null!==e&&void 0!==e?e:t:e instanceof Function?e(t):t:t),[e,t])},Us=e=>{const{componentCls:t}=e;return{[t]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},Ks=e=>{const{componentCls:t,antCls:n}=e;return{[t]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${t}-item:empty`]:{display:"none"},[`${t}-item > ${n}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},qs=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-row-small":{rowGap:e.spaceGapSmallSize},"&-gap-row-middle":{rowGap:e.spaceGapMiddleSize},"&-gap-row-large":{rowGap:e.spaceGapLargeSize},"&-gap-col-small":{columnGap:e.spaceGapSmallSize},"&-gap-col-middle":{columnGap:e.spaceGapMiddleSize},"&-gap-col-large":{columnGap:e.spaceGapLargeSize}}}},Xs=ha("Space",(e=>{const t=So(e,{spaceGapSmallSize:e.paddingXS,spaceGapMiddleSize:e.padding,spaceGapLargeSize:e.paddingLG});return[Ks(t),qs(t),Us(t)]}),(()=>({})),{resetStyle:!1});var Js=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const Ys=I.createContext(null),Qs=(e,t)=>{const n=I.useContext(Ys),r=I.useMemo((()=>{if(!n)return"";const{compactDirection:r,isFirstItem:o,isLastItem:a}=n,i="vertical"===r?"-vertical-":"-";return F()(`${e}-compact${i}item`,{[`${e}-compact${i}first-item`]:o,[`${e}-compact${i}last-item`]:a,[`${e}-compact${i}item-rtl`]:"rtl"===t})}),[e,t,n]);return{compactSize:null===n||void 0===n?void 0:n.compactSize,compactDirection:null===n||void 0===n?void 0:n.compactDirection,compactItemClassnames:r}},Zs=e=>{let{children:t}=e;return I.createElement(Ys.Provider,{value:null},t)},el=e=>{var{children:t}=e,n=Js(e,["children"]);return I.createElement(Ys.Provider,{value:n},t)},tl=e=>{const{getPrefixCls:t,direction:n}=I.useContext(B),{size:r,direction:o,block:a,prefixCls:i,className:s,rootClassName:l,children:u}=e,c=Js(e,["size","direction","block","prefixCls","className","rootClassName","children"]),d=Gs((e=>null!==r&&void 0!==r?r:e)),h=t("space-compact",i),[p,f]=Xs(h),m=F()(h,f,{[`${h}-rtl`]:"rtl"===n,[`${h}-block`]:a,[`${h}-vertical`]:"vertical"===o},s,l),g=I.useContext(Ys),v=W(u),b=I.useMemo((()=>v.map(((e,t)=>{const n=(null===e||void 0===e?void 0:e.key)||`${h}-item-${t}`;return I.createElement(el,{key:n,compactSize:d,compactDirection:o,isFirstItem:0===t&&(!g||(null===g||void 0===g?void 0:g.isFirstItem)),isLastItem:t===v.length-1&&(!g||(null===g||void 0===g?void 0:g.isLastItem))},e)}))),[r,v,g]);return 0===v.length?null:p(I.createElement("div",Object.assign({className:m},c),b))},nl=e=>{const{space:t,form:n,children:r}=e;if(void 0===r||null===r)return null;let o=r;return n&&(o=I.createElement(es,{override:!0,status:!0},o)),t&&(o=I.createElement(Zs,null,o)),o};const rl={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};var ol=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:rl}))};const al=I.forwardRef(ol),il=e=>{let t;return"object"===typeof e&&(null===e||void 0===e?void 0:e.clearIcon)?t=e:e&&(t={clearIcon:I.createElement(al,null)}),t};function sl(e,t,n){return F()({[`${e}-status-success`]:"success"===t,[`${e}-status-warning`]:"warning"===t,[`${e}-status-error`]:"error"===t,[`${e}-status-validating`]:"validating"===t,[`${e}-has-feedback`]:n})}const ll=(e,t)=>t||e,ul=I.createContext(!1),cl=e=>{let{children:t,disabled:n}=e;const r=I.useContext(ul);return I.createElement(ul.Provider,{value:null!==n&&void 0!==n?n:r},t)},dl=ul,hl=e=>{const[,,,,t]=ca();return t?`${e}-css-var`:""},pl=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;var r,o;const{variant:a,[e]:i}=(0,I.useContext)(B),s=(0,I.useContext)(ts),l=null===i||void 0===i?void 0:i.variant;let u;u="undefined"!==typeof t?t:!1===n?"borderless":null!==(o=null!==(r=null!==s&&void 0!==s?s:l)&&void 0!==r?r:a)&&void 0!==o?o:"outlined";return[u,L.includes(u)]};function fl(e,t){const n=(0,I.useRef)([]),r=()=>{n.current.push(setTimeout((()=>{var t,n,r,o;(null===(t=e.current)||void 0===t?void 0:t.input)&&"password"===(null===(n=e.current)||void 0===n?void 0:n.input.getAttribute("type"))&&(null===(r=e.current)||void 0===r?void 0:r.input.hasAttribute("value"))&&(null===(o=e.current)||void 0===o||o.input.removeAttribute("value"))})))};return(0,I.useEffect)((()=>(t&&r(),()=>n.current.forEach((e=>{e&&clearTimeout(e)})))),[]),r}var ml=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const gl=(0,I.forwardRef)(((e,t)=>{var n;const{prefixCls:r,bordered:o=!0,status:a,size:i,disabled:s,onBlur:l,onFocus:u,suffix:c,allowClear:d,addonAfter:h,addonBefore:p,className:f,style:m,styles:g,rootClassName:v,onChange:b,classNames:y,variant:w}=e,x=ml(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]);const{getPrefixCls:k,direction:C,input:S}=I.useContext(B),E=k("input",r),N=(0,I.useRef)(null),$=hl(E),[T,A,O]=Os(E,$),{compactSize:R,compactItemClassnames:P}=Qs(E,C),D=Gs((e=>{var t;return null!==(t=null!==i&&void 0!==i?i:R)&&void 0!==t?t:e})),_=I.useContext(dl),M=null!==s&&void 0!==s?s:_,{status:z,hasFeedback:L,feedbackIcon:j}=(0,I.useContext)(Zi),H=ll(z,a),V=function(e){return!!(e.prefix||e.suffix||e.allowClear||e.showCount)}(e)||!!L;(0,I.useRef)(V);const W=fl(N,!0),G=(L||c)&&I.createElement(I.Fragment,null,c,L&&j),U=il(null!==d&&void 0!==d?d:null===S||void 0===S?void 0:S.allowClear),[K,q]=pl("input",w,o);return T(I.createElement(js,Object.assign({ref:uo(t,N),prefixCls:E,autoComplete:null===S||void 0===S?void 0:S.autoComplete},x,{disabled:M,onBlur:e=>{W(),null===l||void 0===l||l(e)},onFocus:e=>{W(),null===u||void 0===u||u(e)},style:Object.assign(Object.assign({},null===S||void 0===S?void 0:S.style),m),styles:Object.assign(Object.assign({},null===S||void 0===S?void 0:S.styles),g),suffix:G,allowClear:U,className:F()(f,v,O,$,P,null===S||void 0===S?void 0:S.className),onChange:e=>{W(),null===b||void 0===b||b(e)},addonBefore:p&&I.createElement(nl,{form:!0,space:!0},p),addonAfter:h&&I.createElement(nl,{form:!0,space:!0},h),classNames:Object.assign(Object.assign(Object.assign({},y),null===S||void 0===S?void 0:S.classNames),{input:F()({[`${E}-sm`]:"small"===D,[`${E}-lg`]:"large"===D,[`${E}-rtl`]:"rtl"===C},null===y||void 0===y?void 0:y.input,null===(n=null===S||void 0===S?void 0:S.classNames)||void 0===n?void 0:n.input,A),variant:F()({[`${E}-${K}`]:q},sl(E,H)),affixWrapper:F()({[`${E}-affix-wrapper-sm`]:"small"===D,[`${E}-affix-wrapper-lg`]:"large"===D,[`${E}-affix-wrapper-rtl`]:"rtl"===C},A),wrapper:F()({[`${E}-group-rtl`]:"rtl"===C},A),groupWrapper:F()({[`${E}-group-wrapper-sm`]:"small"===D,[`${E}-group-wrapper-lg`]:"large"===D,[`${E}-group-wrapper-rtl`]:"rtl"===C,[`${E}-group-wrapper-${K}`]:q},sl(`${E}-group-wrapper`,H,L),A)})})))}));const vl=gl;var bl="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/);function yl(e,t){return 0===e.indexOf(t)}function wl(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:nt({},n);var r={};return Object.keys(e).forEach((function(n){(t.aria&&("role"===n||yl(n,"aria-"))||t.data&&yl(n,"data-")||t.attr&&bl.includes(n))&&(r[n]=e[n])})),r}const xl=e=>{const{componentCls:t,paddingXS:n}=e;return{[t]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:n,"&-rtl":{direction:"rtl"},[`${t}-input`]:{textAlign:"center",paddingInline:e.paddingXXS},[`&${t}-sm ${t}-input`]:{paddingInline:e.calc(e.paddingXXS).div(2).equal()},[`&${t}-lg ${t}-input`]:{paddingInline:e.paddingXS}}}},kl=ha(["Input","OTP"],(e=>{const t=So(e,as(e));return[xl(t)]}),is);var Cl=function(e){return+setTimeout(e,16)},Sl=function(e){return clearTimeout(e)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(Cl=function(e){return window.requestAnimationFrame(e)},Sl=function(e){return window.cancelAnimationFrame(e)});var El=0,Nl=new Map;function Il(e){Nl.delete(e)}var $l=function(e){var t=El+=1;return function n(r){if(0===r)Il(t),e();else{var o=Cl((function(){n(r-1)}));Nl.set(t,o)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),t};$l.cancel=function(e){var t=Nl.get(e);return Il(e),Sl(t)};const Tl=$l;var Al=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const Ol=I.forwardRef(((e,t)=>{const{value:n,onChange:r,onActiveChange:o,index:a,mask:i}=e,s=Al(e,["value","onChange","onActiveChange","index","mask"]),l=n&&"string"===typeof i?i:n,u=I.useRef(null);I.useImperativeHandle(t,(()=>u.current));const c=()=>{Tl((()=>{var e;const t=null===(e=u.current)||void 0===e?void 0:e.input;document.activeElement===t&&t&&t.select()}))};return I.createElement(vl,Object.assign({type:!0===i?"password":"text"},s,{ref:u,value:l,onInput:e=>{r(a,e.target.value)},onFocus:c,onKeyDown:e=>{let{key:t}=e;"ArrowLeft"===t?o(a-1):"ArrowRight"===t&&o(a+1),c()},onKeyUp:e=>{"Backspace"!==e.key||n||o(a-1),c()},onMouseDown:c,onMouseUp:c}))})),Rl=Ol;var Pl=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function Dl(e){return(e||"").split("")}const Fl=I.forwardRef(((e,t)=>{const{prefixCls:n,length:r=6,size:o,defaultValue:a,value:i,onChange:s,formatter:l,variant:u,disabled:c,status:d,autoFocus:h,mask:p,type:f}=e,m=Pl(e,["prefixCls","length","size","defaultValue","value","onChange","formatter","variant","disabled","status","autoFocus","mask","type"]);const{getPrefixCls:g,direction:v}=I.useContext(B),b=g("otp",n),y=wl(m,{aria:!0,data:!0,attr:!0}),w=hl(b),[x,k,C]=kl(b,w),S=Gs((e=>null!==o&&void 0!==o?o:e)),E=I.useContext(Zi),N=ll(E.status,d),$=I.useMemo((()=>Object.assign(Object.assign({},E),{status:N,hasFeedback:!1,feedbackIcon:null})),[E,N]),T=I.useRef(null),A=I.useRef({});I.useImperativeHandle(t,(()=>({focus:()=>{var e;null===(e=A.current[0])||void 0===e||e.focus()},blur:()=>{var e;for(let t=0;t<r;t+=1)null===(e=A.current[t])||void 0===e||e.blur()},nativeElement:T.current})));const O=e=>l?l(e):e,[R,D]=I.useState(Dl(O(a||"")));I.useEffect((()=>{void 0!==i&&D(Dl(i))}),[i]);const _=oo((e=>{D(e),s&&e.length===r&&e.every((e=>e))&&e.some(((e,t)=>R[t]!==e))&&s(e.join(""))})),M=oo(((e,t)=>{let n=P(R);for(let r=0;r<e;r+=1)n[r]||(n[r]="");t.length<=1?n[e]=t:n=n.slice(0,e).concat(Dl(t)),n=n.slice(0,r);for(let r=n.length-1;r>=0&&!n[r];r-=1)n.pop();const o=O(n.map((e=>e||" ")).join(""));return n=Dl(o).map(((e,t)=>" "!==e||n[t]?e:n[t])),n})),z=(e,t)=>{var n;const o=M(e,t),a=Math.min(e+t.length,r-1);a!==e&&(null===(n=A.current[a])||void 0===n||n.focus()),_(o)},L=e=>{var t;null===(t=A.current[e])||void 0===t||t.focus()},j={variant:u,disabled:c,status:N,mask:p,type:f};return x(I.createElement("div",Object.assign({},y,{ref:T,className:F()(b,{[`${b}-sm`]:"small"===S,[`${b}-lg`]:"large"===S,[`${b}-rtl`]:"rtl"===v},C,k)}),I.createElement(Zi.Provider,{value:$},Array.from({length:r}).map(((e,t)=>{const n=`otp-${t}`,r=R[t]||"";return I.createElement(Rl,Object.assign({ref:e=>{A.current[t]=e},key:n,index:t,size:S,htmlSize:1,className:`${b}-input`,onChange:z,value:r,onActiveChange:L,autoFocus:0===t&&h},j))})))))})),_l=Fl;const Ml={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};var zl=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:Ml}))};const Ll=I.forwardRef(zl);const Bl={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};var jl=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:Bl}))};const Hl=I.forwardRef(jl);var Vl=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const Wl=e=>e?I.createElement(Hl,null):I.createElement(Ll,null),Gl={click:"onClick",hover:"onMouseOver"},Ul=I.forwardRef(((e,t)=>{const{disabled:n,action:r="click",visibilityToggle:o=!0,iconRender:a=Wl}=e,i=I.useContext(dl),s=null!==n&&void 0!==n?n:i,l="object"===typeof o&&void 0!==o.visible,[u,c]=(0,I.useState)((()=>!!l&&o.visible)),d=(0,I.useRef)(null);I.useEffect((()=>{l&&c(o.visible)}),[l,o]);const h=fl(d),p=()=>{s||(u&&h(),c((e=>{var t;const n=!e;return"object"===typeof o&&(null===(t=o.onVisibleChange)||void 0===t||t.call(o,n)),n})))},{className:f,prefixCls:m,inputPrefixCls:g,size:v}=e,b=Vl(e,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:y}=I.useContext(B),w=y("input",g),x=y("input-password",m),k=o&&(e=>{const t=Gl[r]||"",n=a(u),o={[t]:p,className:`${e}-icon`,key:"passwordIcon",onMouseDown:e=>{e.preventDefault()},onMouseUp:e=>{e.preventDefault()}};return I.cloneElement(I.isValidElement(n)?n:I.createElement("span",null,n),o)})(x),C=F()(x,f,{[`${x}-${v}`]:!!v}),S=Object.assign(Object.assign({},_(b,["suffix","iconRender","visibilityToggle"])),{type:u?"text":"password",className:C,prefixCls:w,suffix:k});return v&&(S.size=v),I.createElement(vl,Object.assign({ref:uo(t,d)},S))}));const Kl=Ul;const ql={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};var Xl=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:ql}))};const Jl=I.forwardRef(Xl);function Yl(e){return e&&I.isValidElement(e)&&e.type===I.Fragment}function Ql(e,t){return((e,t,n)=>I.isValidElement(e)?I.cloneElement(e,"function"===typeof n?n(e.props||{}):n):t)(e,e,t)}const Zl=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var o=e.getBoundingClientRect(),a=o.width,i=o.height;if(a||i)return!0}}return!1},eu=e=>{const{componentCls:t,colorPrimary:n}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${n})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut}`,`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`].join(",")}}}}},tu=pa("Wave",(e=>[eu(e)])),nu=`${M}-wave-target`;var ru=n(950),ou=n.t(ru,2);function au(e){return e instanceof HTMLElement||e instanceof SVGElement}function iu(e){return e&&"object"===J(e)&&au(e.nativeElement)?e.nativeElement:au(e)?e:null}function su(e){var t,n=iu(e);return n||(e instanceof I.Component?null===(t=ru.findDOMNode)||void 0===t?void 0:t.call(ru,e):null)}var lu=["children"],uu=I.createContext({});function cu(e){var t=e.children,n=Z(e,lu);return I.createElement(uu.Provider,{value:n},t)}const du=function(e){Ur(n,e);var t=Xr(n);function n(){return qt(this,n),t.apply(this,arguments)}return Jt(n,[{key:"render",value:function(){return this.props.children}}]),n}(I.Component);var hu="none",pu="appear",fu="enter",mu="leave",gu="none",vu="prepare",bu="start",yu="active",wu="end",xu="prepared";function ku(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var Cu=function(e,t){var n={animationend:ku("Animation","AnimationEnd"),transitionend:ku("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(rt(),"undefined"!==typeof window?window:{}),Su={};if(rt()){var Eu=document.createElement("div");Su=Eu.style}var Nu={};function Iu(e){if(Nu[e])return Nu[e];var t=Cu[e];if(t)for(var n=Object.keys(t),r=n.length,o=0;o<r;o+=1){var a=n[o];if(Object.prototype.hasOwnProperty.call(t,a)&&a in Su)return Nu[e]=t[a],Nu[e]}return""}var $u=Iu("animationend"),Tu=Iu("transitionend"),Au=!(!$u||!Tu),Ou=$u||"animationend",Ru=Tu||"transitionend";function Pu(e,t){if(!e)return null;if("object"===J(e)){var n=t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}));return e[n]}return"".concat(e,"-").concat(t)}const Du=rt()?I.useLayoutEffect:I.useEffect;var Fu=[vu,bu,yu,wu],_u=[vu,xu],Mu=!1;function zu(e){return e===yu||e===wu}const Lu=function(e,t,n){var r=X(ao(gu),2),o=r[0],a=r[1],i=function(){var e=I.useRef(null);function t(){Tl.cancel(e.current)}return I.useEffect((function(){return function(){t()}}),[]),[function n(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var a=Tl((function(){o<=1?r({isCanceled:function(){return a!==e.current}}):n(r,o-1)}));e.current=a},t]}(),s=X(i,2),l=s[0],u=s[1];var c=t?_u:Fu;return Du((function(){if(o!==gu&&o!==wu){var e=c.indexOf(o),t=c[e+1],r=n(o);r===Mu?a(t,!0):t&&l((function(e){function n(){e.isCanceled()||a(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[e,o]),I.useEffect((function(){return function(){u()}}),[]),[function(){a(vu,!0)},o]};function Bu(e,t,n,r){var o=r.motionEnter,a=void 0===o||o,i=r.motionAppear,s=void 0===i||i,l=r.motionLeave,u=void 0===l||l,c=r.motionDeadline,d=r.motionLeaveImmediately,h=r.onAppearPrepare,p=r.onEnterPrepare,f=r.onLeavePrepare,m=r.onAppearStart,g=r.onEnterStart,v=r.onLeaveStart,b=r.onAppearActive,y=r.onEnterActive,w=r.onLeaveActive,x=r.onAppearEnd,k=r.onEnterEnd,C=r.onLeaveEnd,S=r.onVisibleChanged,E=X(ao(),2),N=E[0],$=E[1],T=function(e){var t=X(I.useReducer((function(e){return e+1}),0),2)[1],n=I.useRef(e);return[oo((function(){return n.current})),oo((function(e){n.current="function"===typeof e?e(n.current):e,t()}))]}(hu),A=X(T,2),O=A[0],R=A[1],P=X(ao(null),2),D=P[0],F=P[1],_=O(),M=(0,I.useRef)(!1),z=(0,I.useRef)(null);function L(){return n()}var B=(0,I.useRef)(!1);function j(){R(hu),F(null,!0)}var H=oo((function(e){var t=O();if(t!==hu){var n=L();if(!e||e.deadline||e.target===n){var r,o=B.current;t===pu&&o?r=null===x||void 0===x?void 0:x(n,e):t===fu&&o?r=null===k||void 0===k?void 0:k(n,e):t===mu&&o&&(r=null===C||void 0===C?void 0:C(n,e)),o&&!1!==r&&j()}}})),V=function(e){var t=(0,I.useRef)();function n(t){t&&(t.removeEventListener(Ru,e),t.removeEventListener(Ou,e))}return I.useEffect((function(){return function(){n(t.current)}}),[]),[function(r){t.current&&t.current!==r&&n(t.current),r&&r!==t.current&&(r.addEventListener(Ru,e),r.addEventListener(Ou,e),t.current=r)},n]}(H),W=X(V,1)[0],G=function(e){switch(e){case pu:return Q(Q(Q({},vu,h),bu,m),yu,b);case fu:return Q(Q(Q({},vu,p),bu,g),yu,y);case mu:return Q(Q(Q({},vu,f),bu,v),yu,w);default:return{}}},U=I.useMemo((function(){return G(_)}),[_]),K=X(Lu(_,!e,(function(e){if(e===vu){var t=U[vu];return t?t(L()):Mu}var n;J in U&&F((null===(n=U[J])||void 0===n?void 0:n.call(U,L(),null))||null);return J===yu&&_!==hu&&(W(L()),c>0&&(clearTimeout(z.current),z.current=setTimeout((function(){H({deadline:!0})}),c))),J===xu&&j(),true})),2),q=K[0],J=K[1],Y=zu(J);B.current=Y,Du((function(){$(t);var n,r=M.current;M.current=!0,!r&&t&&s&&(n=pu),r&&t&&a&&(n=fu),(r&&!t&&u||!r&&d&&!t&&u)&&(n=mu);var o=G(n);n&&(e||o[vu])?(R(n),q()):R(hu)}),[t]),(0,I.useEffect)((function(){(_===pu&&!s||_===fu&&!a||_===mu&&!u)&&R(hu)}),[s,a,u]),(0,I.useEffect)((function(){return function(){M.current=!1,clearTimeout(z.current)}}),[]);var Z=I.useRef(!1);(0,I.useEffect)((function(){N&&(Z.current=!0),void 0!==N&&_===hu&&((Z.current||N)&&(null===S||void 0===S||S(N)),Z.current=!0)}),[N,_]);var ee=D;return U[vu]&&J===bu&&(ee=nt({transition:"none"},ee)),[_,J,ee,null!==N&&void 0!==N?N:t]}const ju=function(e){var t=e;"object"===J(e)&&(t=e.transitionSupport);var n=I.forwardRef((function(e,n){var r=e.visible,o=void 0===r||r,a=e.removeOnLeave,i=void 0===a||a,s=e.forceRender,l=e.children,u=e.motionName,c=e.leavedClassName,d=e.eventProps,h=function(e,n){return!(!e.motionName||!t||!1===n)}(e,I.useContext(uu).motion),p=(0,I.useRef)(),f=(0,I.useRef)();var m=X(Bu(h,o,(function(){try{return p.current instanceof HTMLElement?p.current:su(f.current)}catch(kbe){return null}}),e),4),g=m[0],v=m[1],b=m[2],y=m[3],w=I.useRef(y);y&&(w.current=!0);var x,k=I.useCallback((function(e){p.current=e,lo(n,e)}),[n]),C=nt(nt({},d),{},{visible:o});if(l)if(g===hu)x=y?l(nt({},C),k):!i&&w.current&&c?l(nt(nt({},C),{},{className:c}),k):s||!i&&!c?l(nt(nt({},C),{},{style:{display:"none"}}),k):null;else{var S;v===vu?S="prepare":zu(v)?S="active":v===bu&&(S="start");var E=Pu(u,"".concat(g,"-").concat(S));x=l(nt(nt({},C),{},{className:F()(Pu(u,g),Q(Q({},E,E&&S),u,"string"===typeof u)),style:b}),k)}else x=null;I.isValidElement(x)&&ho(x)&&(x.ref||(x=I.cloneElement(x,{ref:k})));return I.createElement(du,{ref:f},x)}));return n.displayName="CSSMotion",n}(Au);var Hu="add",Vu="keep",Wu="remove",Gu="removed";function Uu(e){var t;return nt(nt({},t=e&&"object"===J(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function Ku(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(Uu)}var qu=["component","children","onVisibleChanged","onAllRemoved"],Xu=["status"],Ju=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];const Yu=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ju,t=function(t){Ur(r,t);var n=Xr(r);function r(){var e;qt(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return Q(Wr(e=n.call.apply(n,[this].concat(o))),"state",{keyEntities:[]}),Q(Wr(e),"removeKey",(function(t){e.setState((function(e){var n=e.keyEntities.map((function(e){return e.key!==t?e:nt(nt({},e),{},{status:Gu})}));return{keyEntities:n}}),(function(){0===e.state.keyEntities.filter((function(e){return e.status!==Gu})).length&&e.props.onAllRemoved&&e.props.onAllRemoved()}))})),e}return Jt(r,[{key:"render",value:function(){var t=this,n=this.state.keyEntities,r=this.props,o=r.component,a=r.children,i=r.onVisibleChanged,s=(r.onAllRemoved,Z(r,qu)),l=o||I.Fragment,u={};return Ju.forEach((function(e){u[e]=s[e],delete s[e]})),delete s.keys,I.createElement(l,s,n.map((function(n,r){var o=n.status,s=Z(n,Xu),l=o===Hu||o===Vu;return I.createElement(e,G({},u,{key:s.key,visible:l,eventProps:s,onVisibleChanged:function(e){null===i||void 0===i||i(e,{key:s.key}),e||t.removeKey(s.key)}}),(function(e,t){return a(nt(nt({},e),{},{index:r}),t)}))})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,o=Ku(n),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,o=t.length,a=Ku(e),i=Ku(t);a.forEach((function(e){for(var t=!1,a=r;a<o;a+=1){var s=i[a];if(s.key===e.key){r<a&&(n=n.concat(i.slice(r,a).map((function(e){return nt(nt({},e),{},{status:Hu})}))),r=a),n.push(nt(nt({},s),{},{status:Vu})),r+=1,t=!0;break}}t||n.push(nt(nt({},e),{},{status:Wu}))})),r<o&&(n=n.concat(i.slice(r).map((function(e){return nt(nt({},e),{},{status:Hu})}))));var s={};return n.forEach((function(e){var t=e.key;s[t]=(s[t]||0)+1})),Object.keys(s).filter((function(e){return s[e]>1})).forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==Wu}))).forEach((function(t){t.key===e&&(t.status=Vu)}))})),n}(r,o);return{keyEntities:a.filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==Gu||e.status!==Wu}))}}}]),r}(I.Component);return Q(t,"defaultProps",{component:"div"}),t}(Au),Qu=ju;var Zu,ec=nt({},ou),tc=ec.version,nc=ec.render,rc=ec.unmountComponentAtNode;try{Number((tc||"").split(".")[0])>=18&&(Zu=ec.createRoot)}catch(kbe){}function oc(e){var t=ec.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&"object"===J(t)&&(t.usingClientEntryPoint=e)}var ac="__rc_react_root__";function ic(e,t){Zu?function(e,t){oc(!0);var n=t[ac]||Zu(t);oc(!1),n.render(e),t[ac]=n}(e,t):function(e,t){nc(e,t)}(e,t)}function sc(e){return lc.apply(this,arguments)}function lc(){return(lc=La(Ma().mark((function e(t){return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then((function(){var e;null===(e=t[ac])||void 0===e||e.unmount(),delete t[ac]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uc(e){rc(e)}function cc(){return(cc=La(Ma().mark((function e(t){return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===Zu){e.next=2;break}return e.abrupt("return",sc(t));case 2:uc(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dc(e){return e&&"#fff"!==e&&"#ffffff"!==e&&"rgb(255, 255, 255)"!==e&&"rgba(255, 255, 255, 1)"!==e&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&"transparent"!==e}function hc(e){return Number.isNaN(e)?0:e}const pc=e=>{const{className:t,target:n,component:r}=e,o=I.useRef(null),[a,i]=I.useState(null),[s,l]=I.useState([]),[u,c]=I.useState(0),[d,h]=I.useState(0),[p,f]=I.useState(0),[m,g]=I.useState(0),[v,b]=I.useState(!1),y={left:u,top:d,width:p,height:m,borderRadius:s.map((e=>`${e}px`)).join(" ")};function w(){const e=getComputedStyle(n);i(function(e){const{borderTopColor:t,borderColor:n,backgroundColor:r}=getComputedStyle(e);return dc(t)?t:dc(n)?n:dc(r)?r:null}(n));const t="static"===e.position,{borderLeftWidth:r,borderTopWidth:o}=e;c(t?n.offsetLeft:hc(-parseFloat(r))),h(t?n.offsetTop:hc(-parseFloat(o))),f(n.offsetWidth),g(n.offsetHeight);const{borderTopLeftRadius:a,borderTopRightRadius:s,borderBottomLeftRadius:u,borderBottomRightRadius:d}=e;l([a,s,d,u].map((e=>hc(parseFloat(e)))))}if(a&&(y["--wave-color"]=a),I.useEffect((()=>{if(n){const e=Tl((()=>{w(),b(!0)}));let t;return"undefined"!==typeof ResizeObserver&&(t=new ResizeObserver(w),t.observe(n)),()=>{Tl.cancel(e),null===t||void 0===t||t.disconnect()}}}),[]),!v)return null;const x=("Checkbox"===r||"Radio"===r)&&(null===n||void 0===n?void 0:n.classList.contains(nu));return I.createElement(Qu,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(e,t)=>{var n;if(t.deadline||"opacity"===t.propertyName){const e=null===(n=o.current)||void 0===n?void 0:n.parentElement;(function(e){return cc.apply(this,arguments)})(e).then((()=>{null===e||void 0===e||e.remove()}))}return!1}},((e,n)=>{let{className:r}=e;return I.createElement("div",{ref:uo(o,n),className:F()(t,r,{"wave-quick":x}),style:y})}))},fc=(e,t)=>{var n;const{component:r}=t;if("Checkbox"===r&&!(null===(n=e.querySelector("input"))||void 0===n?void 0:n.checked))return;const o=document.createElement("div");o.style.position="absolute",o.style.left="0px",o.style.top="0px",null===e||void 0===e||e.insertBefore(o,null===e||void 0===e?void 0:e.firstChild),ic(I.createElement(pc,Object.assign({},t,{target:e})),o)},mc=(e,t,n)=>{const{wave:r}=I.useContext(B),[,o,a]=ca(),i=oo((i=>{const s=e.current;if((null===r||void 0===r?void 0:r.disabled)||!s)return;const l=s.querySelector(`.${nu}`)||s,{showEffect:u}=r||{};(u||fc)(l,{className:t,token:o,component:n,event:i,hashId:a})})),s=I.useRef();return e=>{Tl.cancel(s.current),s.current=Tl((()=>{i(e)}))}};const gc=e=>{const{children:t,disabled:n,component:r}=e,{getPrefixCls:o}=(0,I.useContext)(B),a=(0,I.useRef)(null),i=o("wave"),[,s]=tu(i),l=mc(a,F()(i,s),r);if(I.useEffect((()=>{const e=a.current;if(!e||1!==e.nodeType||n)return;const t=t=>{!Zl(t.target)||!e.getAttribute||e.getAttribute("disabled")||e.disabled||e.className.includes("disabled")||e.className.includes("-leave")||l(t)};return e.addEventListener("click",t,!0),()=>{e.removeEventListener("click",t,!0)}}),[n]),!I.isValidElement(t))return null!==t&&void 0!==t?t:null;return Ql(t,{ref:ho(t)?uo(t.ref,a):a})};var vc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const bc=I.createContext(void 0),yc=e=>{const{getPrefixCls:t,direction:n}=I.useContext(B),{prefixCls:r,size:o,className:a}=e,i=vc(e,["prefixCls","size","className"]),s=t("btn-group",r),[,,l]=ca();let u="";switch(o){case"large":u="lg";break;case"small":u="sm"}const c=F()(s,{[`${s}-${u}`]:u,[`${s}-rtl`]:"rtl"===n},a,l);return I.createElement(bc.Provider,{value:o},I.createElement("div",Object.assign({},i,{className:c})))},wc=/^[\u4E00-\u9FA5]{2}$/,xc=wc.test.bind(wc);function kc(e){return"string"===typeof e}function Cc(e){return"text"===e||"link"===e}function Sc(e,t){let n=!1;const r=[];return I.Children.forEach(e,(e=>{const t=typeof e,o="string"===t||"number"===t;if(n&&o){const t=r.length-1,n=r[t];r[t]=`${n}${e}`}else r.push(e);n=o})),I.Children.map(r,(e=>function(e,t){if(null===e||void 0===e)return;const n=t?" ":"";return"string"!==typeof e&&"number"!==typeof e&&kc(e.type)&&xc(e.props.children)?Ql(e,{children:e.props.children.split("").join(n)}):kc(e)?xc(e)?I.createElement("span",null,e.split("").join(n)):I.createElement("span",null,e):Yl(e)?I.createElement("span",null,e):e}(e,t)))}const Ec=(0,I.forwardRef)(((e,t)=>{const{className:n,style:r,children:o,prefixCls:a}=e,i=F()(`${a}-icon`,n);return I.createElement("span",{ref:t,className:i,style:r},o)})),Nc=Ec;const Ic={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};var $c=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:Ic}))};const Tc=I.forwardRef($c),Ac=(0,I.forwardRef)(((e,t)=>{const{prefixCls:n,className:r,style:o,iconClassName:a}=e,i=F()(`${n}-loading-icon`,r);return I.createElement(Nc,{prefixCls:n,className:i,style:o,ref:t},I.createElement(Tc,{className:a}))})),Oc=()=>({width:0,opacity:0,transform:"scale(0)"}),Rc=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),Pc=e=>{const{prefixCls:t,loading:n,existIcon:r,className:o,style:a}=e,i=!!n;return r?I.createElement(Ac,{prefixCls:t,className:o,style:a}):I.createElement(Qu,{visible:i,motionName:`${t}-loading-icon-motion`,motionLeave:i,removeOnLeave:!0,onAppearStart:Oc,onAppearActive:Rc,onEnterStart:Oc,onEnterActive:Rc,onLeaveStart:Rc,onLeaveActive:Oc},((e,n)=>{let{className:r,style:i}=e;return I.createElement(Ac,{prefixCls:t,className:o,style:Object.assign(Object.assign({},a),i),ref:n,iconClassName:r})}))},Dc=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),Fc=e=>{const{componentCls:t,fontSize:n,lineWidth:r,groupBorderColor:o,colorErrorHover:a}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:e.calc(r).mul(-1).equal(),[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:n}},Dc(`${t}-primary`,o),Dc(`${t}-danger`,a)]}},_c=Math.round;function Mc(e,t){const n=e.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],r=n.map((e=>parseFloat(e)));for(let o=0;o<3;o+=1)r[o]=t(r[o]||0,n[o]||"",o);return n[3]?r[3]=n[3].includes("%")?r[3]/100:r[3]:r[3]=1,r}const zc=(e,t,n)=>0===n?e:e/100;function Lc(e,t){const n=t||255;return e>n?n:e<0?0:e}class Bc{constructor(e){function t(t){return t[0]in e&&t[1]in e&&t[2]in e}if(Q(this,"isValid",!0),Q(this,"r",0),Q(this,"g",0),Q(this,"b",0),Q(this,"a",1),Q(this,"_h",void 0),Q(this,"_s",void 0),Q(this,"_l",void 0),Q(this,"_v",void 0),Q(this,"_max",void 0),Q(this,"_min",void 0),Q(this,"_brightness",void 0),e)if("string"===typeof e){const n=e.trim();function r(e){return n.startsWith(e)}/^#?[A-F\d]{3,8}$/i.test(n)?this.fromHexString(n):r("rgb")?this.fromRgbString(n):r("hsl")?this.fromHslString(n):(r("hsv")||r("hsb"))&&this.fromHsvString(n)}else if(e instanceof Bc)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(t("rgb"))this.r=Lc(e.r),this.g=Lc(e.g),this.b=Lc(e.b),this.a="number"===typeof e.a?Lc(e.a,1):1;else if(t("hsl"))this.fromHsl(e);else{if(!t("hsv"))throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e));this.fromHsv(e)}else;}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const t=this.toHsv();return t.h=e,this._c(t)}getLuminance(){function e(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}return.2126*e(this.r)+.7152*e(this.g)+.0722*e(this.b)}getHue(){if("undefined"===typeof this._h){const e=this.getMax()-this.getMin();this._h=0===e?0:_c(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if("undefined"===typeof this._s){const e=this.getMax()-this.getMin();this._s=0===e?0:e/this.getMax()}return this._s}getLightness(){return"undefined"===typeof this._l&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return"undefined"===typeof this._v&&(this._v=this.getMax()/255),this._v}getBrightness(){return"undefined"===typeof this._brightness&&(this._brightness=(299*this.r+587*this.g+114*this.b)/1e3),this._brightness}darken(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const t=this.getHue(),n=this.getSaturation();let r=this.getLightness()-e/100;return r<0&&(r=0),this._c({h:t,s:n,l:r,a:this.a})}lighten(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const t=this.getHue(),n=this.getSaturation();let r=this.getLightness()+e/100;return r>1&&(r=1),this._c({h:t,s:n,l:r,a:this.a})}mix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;const n=this._c(e),r=t/100,o=e=>(n[e]-this[e])*r+this[e],a={r:_c(o("r")),g:_c(o("g")),b:_c(o("b")),a:_c(100*o("a"))/100};return this._c(a)}tint(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.mix({r:255,g:255,b:255,a:1},e)}shade(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const t=this._c(e),n=this.a+t.a*(1-this.a),r=e=>_c((this[e]*this.a+t[e]*t.a*(1-this.a))/n);return this._c({r:r("r"),g:r("g"),b:r("b"),a:n})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const t=(this.r||0).toString(16);e+=2===t.length?t:"0"+t;const n=(this.g||0).toString(16);e+=2===n.length?n:"0"+n;const r=(this.b||0).toString(16);if(e+=2===r.length?r:"0"+r,"number"===typeof this.a&&this.a>=0&&this.a<1){const t=_c(255*this.a).toString(16);e+=2===t.length?t:"0"+t}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),t=_c(100*this.getSaturation()),n=_c(100*this.getLightness());return 1!==this.a?`hsla(${e},${t}%,${n}%,${this.a})`:`hsl(${e},${t}%,${n}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return 1!==this.a?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,t,n){const r=this.clone();return r[e]=Lc(t,n),r}_c(e){return new this.constructor(e)}getMax(){return"undefined"===typeof this._max&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return"undefined"===typeof this._min&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const t=e.replace("#","");function n(e,n){return parseInt(t[e]+t[n||e],16)}t.length<6?(this.r=n(0),this.g=n(1),this.b=n(2),this.a=t[3]?n(3)/255:1):(this.r=n(0,1),this.g=n(2,3),this.b=n(4,5),this.a=t[6]?n(6,7)/255:1)}fromHsl(e){let{h:t,s:n,l:r,a:o}=e;if(this._h=t%360,this._s=n,this._l=r,this.a="number"===typeof o?o:1,n<=0){const e=_c(255*r);this.r=e,this.g=e,this.b=e}let a=0,i=0,s=0;const l=t/60,u=(1-Math.abs(2*r-1))*n,c=u*(1-Math.abs(l%2-1));l>=0&&l<1?(a=u,i=c):l>=1&&l<2?(a=c,i=u):l>=2&&l<3?(i=u,s=c):l>=3&&l<4?(i=c,s=u):l>=4&&l<5?(a=c,s=u):l>=5&&l<6&&(a=u,s=c);const d=r-u/2;this.r=_c(255*(a+d)),this.g=_c(255*(i+d)),this.b=_c(255*(s+d))}fromHsv(e){let{h:t,s:n,v:r,a:o}=e;this._h=t%360,this._s=n,this._v=r,this.a="number"===typeof o?o:1;const a=_c(255*r);if(this.r=a,this.g=a,this.b=a,n<=0)return;const i=t/60,s=Math.floor(i),l=i-s,u=_c(r*(1-n)*255),c=_c(r*(1-n*l)*255),d=_c(r*(1-n*(1-l))*255);switch(s){case 0:this.g=d,this.b=u;break;case 1:this.r=c,this.b=u;break;case 2:this.r=u,this.b=d;break;case 3:this.r=u,this.g=c;break;case 4:this.r=d,this.g=u;break;default:this.g=u,this.b=c}}fromHsvString(e){const t=Mc(e,zc);this.fromHsv({h:t[0],s:t[1],v:t[2],a:t[3]})}fromHslString(e){const t=Mc(e,zc);this.fromHsl({h:t[0],s:t[1],l:t[2],a:t[3]})}fromRgbString(e){const t=Mc(e,((e,t)=>t.includes("%")?_c(e/100*255):e));this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]}}var jc=["b"],Hc=["v"],Vc=function(e){return Math.round(Number(e||0))},Wc=function(e){Ur(n,e);var t=Xr(n);function n(e){return qt(this,n),t.call(this,function(e){if(e instanceof Bc)return e;if(e&&"object"===J(e)&&"h"in e&&"b"in e){var t=e,n=t.b;return nt(nt({},Z(t,jc)),{},{v:n})}return"string"===typeof e&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e}(e))}return Jt(n,[{key:"toHsbString",value:function(){var e=this.toHsb(),t=Vc(100*e.s),n=Vc(100*e.b),r=Vc(e.h),o=e.a,a="hsb(".concat(r,", ").concat(t,"%, ").concat(n,"%)"),i="hsba(".concat(r,", ").concat(t,"%, ").concat(n,"%, ").concat(o.toFixed(0===o?0:2),")");return 1===o?a:i}},{key:"toHsb",value:function(){var e=this.toHsv(),t=e.v;return nt(nt({},Z(e,Hc)),{},{b:t,a:this.a})}}]),n}(Bc),Gc=function(e){return e instanceof Wc?e:new Wc(e)};Gc("#1677ff");let Uc=function(){return Jt((function e(t){var n;if(qt(this,e),this.cleared=!1,t instanceof e)return this.metaColor=t.metaColor.clone(),this.colors=null===(n=t.colors)||void 0===n?void 0:n.map((t=>({color:new e(t.color),percent:t.percent}))),void(this.cleared=t.cleared);const r=Array.isArray(t);r&&t.length?(this.colors=t.map((t=>{let{color:n,percent:r}=t;return{color:new e(n),percent:r}})),this.metaColor=new Wc(this.colors[0].color.metaColor)):this.metaColor=new Wc(r?"":t),(!t||r&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}),[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return((e,t)=>e?((e,t)=>(null===e||void 0===e?void 0:e.replace(/[^\w/]/g,"").slice(0,t?8:6))||"")(e,t):"")(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:e}=this;if(e){const t=e.map((e=>`${e.color.toRgbString()} ${e.percent}%`)).join(", ");return`linear-gradient(90deg, ${t})`}return this.metaColor.toRgbString()}},{key:"equals",value:function(e){return!(!e||this.isGradient()!==e.isGradient())&&(this.isGradient()?this.colors.length===e.colors.length&&this.colors.every(((t,n)=>{const r=e.colors[n];return t.percent===r.percent&&t.color.equals(r.color)})):this.toHexString()===e.toHexString())}}])}();const Kc=(e,t)=>{const{r:n,g:r,b:o,a:a}=e.toRgb(),i=new Wc(e.toRgbString()).onBackground(t).toHsv();return a<=.5?i.v>.5:.299*n+.587*r+.114*o>192},qc=e=>{const{paddingInline:t,onlyIconSize:n,paddingBlock:r}=e;return So(e,{buttonPaddingHorizontal:t,buttonPaddingVertical:r,buttonIconOnlyFontSize:n})},Xc=e=>{var t,n,r,o,a,i;const s=null!==(t=e.contentFontSize)&&void 0!==t?t:e.fontSize,l=null!==(n=e.contentFontSizeSM)&&void 0!==n?n:e.fontSize,u=null!==(r=e.contentFontSizeLG)&&void 0!==r?r:e.fontSizeLG,c=null!==(o=e.contentLineHeight)&&void 0!==o?o:Uo(s),d=null!==(a=e.contentLineHeightSM)&&void 0!==a?a:Uo(l),h=null!==(i=e.contentLineHeightLG)&&void 0!==i?i:Uo(u),p=Kc(new Uc(e.colorBgSolid),"#fff")?"#000":"#fff";return{fontWeight:400,defaultShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`,primaryShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`,dangerShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`,primaryColor:e.colorTextLightSolid,dangerColor:e.colorTextLightSolid,borderColorDisabled:e.colorBorder,defaultGhostColor:e.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:e.colorBgContainer,paddingInline:e.paddingContentHorizontal-e.lineWidth,paddingInlineLG:e.paddingContentHorizontal-e.lineWidth,paddingInlineSM:8-e.lineWidth,onlyIconSize:e.fontSizeLG,onlyIconSizeSM:e.fontSizeLG-2,onlyIconSizeLG:e.fontSizeLG+2,groupBorderColor:e.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:e.colorText,textTextHoverColor:e.colorText,textTextActiveColor:e.colorText,textHoverBg:e.colorBgTextHover,defaultColor:e.colorText,defaultBg:e.colorBgContainer,defaultBorderColor:e.colorBorder,defaultBorderColorDisabled:e.colorBorder,defaultHoverBg:e.colorBgContainer,defaultHoverColor:e.colorPrimaryHover,defaultHoverBorderColor:e.colorPrimaryHover,defaultActiveBg:e.colorBgContainer,defaultActiveColor:e.colorPrimaryActive,defaultActiveBorderColor:e.colorPrimaryActive,solidTextColor:p,contentFontSize:s,contentFontSizeSM:l,contentFontSizeLG:u,contentLineHeight:c,contentLineHeightSM:d,contentLineHeightLG:h,paddingBlock:Math.max((e.controlHeight-s*c)/2-e.lineWidth,0),paddingBlockSM:Math.max((e.controlHeightSM-l*d)/2-e.lineWidth,0),paddingBlockLG:Math.max((e.controlHeightLG-u*h)/2-e.lineWidth,0)}},Jc=e=>{const{componentCls:t,iconCls:n,fontWeight:r}=e;return{[t]:{outline:"none",position:"relative",display:"inline-flex",gap:e.marginXS,alignItems:"center",justifyContent:"center",fontWeight:r,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${yn(e.lineWidth)} ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:e.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${t}-icon`]:{lineHeight:1},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},Lo(e)),[`&${t}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${t}-two-chinese-chars > *:not(${n})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},"&-icon-end":{flexDirection:"row-reverse"}}}},Yc=(e,t,n)=>({[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":t,"&:active":n}}),Qc=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),Zc=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.calc(e.controlHeight).div(2).equal(),paddingInlineEnd:e.calc(e.controlHeight).div(2).equal()}),ed=e=>({cursor:"not-allowed",borderColor:e.borderColorDisabled,color:e.colorTextDisabled,background:e.colorBgContainerDisabled,boxShadow:"none"}),td=(e,t,n,r,o,a,i,s)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:n||void 0,background:t,borderColor:r||void 0,boxShadow:"none"},Yc(e,Object.assign({background:t},i),Object.assign({background:t},s))),{"&:disabled":{cursor:"not-allowed",color:o||void 0,borderColor:a||void 0}})}),nd=e=>({[`&:disabled, &${e.componentCls}-disabled`]:Object.assign({},ed(e))}),rd=e=>({[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",color:e.colorTextDisabled}}),od=(e,t,n,r)=>{const o=r&&["link","text"].includes(r)?rd:nd;return Object.assign(Object.assign({},o(e)),Yc(e.componentCls,t,n))},ad=(e,t,n,r,o)=>({[`&${e.componentCls}-variant-solid`]:Object.assign({color:t,background:n},od(e,r,o))}),id=(e,t,n,r,o)=>({[`&${e.componentCls}-variant-outlined, &${e.componentCls}-variant-dashed`]:Object.assign({borderColor:t,background:n},od(e,r,o))}),sd=e=>({[`&${e.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),ld=(e,t,n,r)=>({[`&${e.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:t},od(e,n,r))}),ud=(e,t,n,r,o)=>({[`&${e.componentCls}-variant-${n}`]:Object.assign({color:t,boxShadow:"none"},od(e,r,o,n))}),cd=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.defaultColor,boxShadow:e.defaultShadow},ad(e,e.solidTextColor,e.colorBgSolid,{background:e.colorBgSolidHover},{background:e.colorBgSolidActive})),sd(e)),ld(e,e.colorFillTertiary,{background:e.colorFillSecondary},{background:e.colorFill})),ud(e,e.textTextColor,"link",{color:e.colorLinkHover,background:e.linkHoverBg},{color:e.colorLinkActive})),td(e.componentCls,e.ghostBg,e.defaultGhostColor,e.defaultGhostBorderColor,e.colorTextDisabled,e.colorBorder)),dd=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorPrimary,boxShadow:e.primaryShadow},id(e,e.colorPrimary,e.colorBgContainer,{color:e.colorPrimaryTextHover,borderColor:e.colorPrimaryHover,background:e.colorBgContainer},{color:e.colorPrimaryTextActive,borderColor:e.colorPrimaryActive,background:e.colorBgContainer})),sd(e)),ld(e,e.colorPrimaryBg,{background:e.colorPrimaryBgHover},{background:e.colorPrimaryBorder})),ud(e,e.colorLink,"text",{color:e.colorPrimaryTextHover,background:e.colorPrimaryBg},{color:e.colorPrimaryTextActive,background:e.colorPrimaryBorder})),td(e.componentCls,e.ghostBg,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),hd=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorError,boxShadow:e.dangerShadow},ad(e,e.dangerColor,e.colorError,{background:e.colorErrorHover},{background:e.colorErrorActive})),id(e,e.colorError,e.colorBgContainer,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),sd(e)),ld(e,e.colorErrorBg,{background:e.colorErrorBgFilledHover},{background:e.colorErrorBgActive})),ud(e,e.colorError,"text",{color:e.colorErrorHover,background:e.colorErrorBg},{color:e.colorErrorHover,background:e.colorErrorBgActive})),ud(e,e.colorError,"link",{color:e.colorErrorHover},{color:e.colorErrorActive})),td(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),pd=e=>{const{componentCls:t}=e;return{[`${t}-color-default`]:cd(e),[`${t}-color-primary`]:dd(e),[`${t}-color-dangerous`]:hd(e)}},fd=e=>Object.assign(Object.assign(Object.assign(Object.assign({},id(e,e.defaultBorderColor,e.defaultBg,{color:e.defaultHoverColor,borderColor:e.defaultHoverBorderColor,background:e.defaultHoverBg},{color:e.defaultActiveColor,borderColor:e.defaultActiveBorderColor,background:e.defaultActiveBg})),ud(e,e.textTextColor,"text",{color:e.textTextHoverColor,background:e.textHoverBg},{color:e.textTextActiveColor,background:e.colorBgTextActive})),ad(e,e.primaryColor,e.colorPrimary,{background:e.colorPrimaryHover,color:e.primaryColor},{background:e.colorPrimaryActive,color:e.primaryColor})),ud(e,e.colorLink,"link",{color:e.colorLinkHover,background:e.linkHoverBg},{color:e.colorLinkActive})),md=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{componentCls:n,controlHeight:r,fontSize:o,lineHeight:a,borderRadius:i,buttonPaddingHorizontal:s,iconCls:l,buttonPaddingVertical:u}=e,c=`${n}-icon-only`;return[{[t]:{fontSize:o,lineHeight:a,height:r,padding:`${yn(u)} ${yn(s)}`,borderRadius:i,[`&${c}`]:{width:r,paddingInline:0,[`&${n}-compact-item`]:{flex:"none"},[`&${n}-round`]:{width:"auto"},[l]:{fontSize:e.buttonIconOnlyFontSize}},[`&${n}-loading`]:{opacity:e.opacityLoading,cursor:"default"},[`${n}-loading-icon`]:{transition:`width ${e.motionDurationSlow} ${e.motionEaseInOut}, opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`}}},{[`${n}${n}-circle${t}`]:Qc(e)},{[`${n}${n}-round${t}`]:Zc(e)}]},gd=e=>{const t=So(e,{fontSize:e.contentFontSize,lineHeight:e.contentLineHeight});return md(t,e.componentCls)},vd=e=>{const t=So(e,{controlHeight:e.controlHeightSM,fontSize:e.contentFontSizeSM,lineHeight:e.contentLineHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:e.paddingInlineSM,buttonPaddingVertical:e.paddingBlockSM,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.onlyIconSizeSM});return md(t,`${e.componentCls}-sm`)},bd=e=>{const t=So(e,{controlHeight:e.controlHeightLG,fontSize:e.contentFontSizeLG,lineHeight:e.contentLineHeightLG,buttonPaddingHorizontal:e.paddingInlineLG,buttonPaddingVertical:e.paddingBlockLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.onlyIconSizeLG});return md(t,`${e.componentCls}-lg`)},yd=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},wd=ha("Button",(e=>{const t=qc(e);return[Jc(t),gd(t),vd(t),bd(t),yd(t),pd(t),fd(t),Fc(t)]}),Xc,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function xd(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:e.calc(e.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function kd(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:Object.assign(Object.assign({},xd(e,t)),(n=e.componentCls,r=t,{[`&-item:not(${r}-first-item):not(${r}-last-item)`]:{borderRadius:0},[`&-item${r}-first-item:not(${r}-last-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${r}-last-item:not(${r}-first-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}))};var n,r}const Cd=e=>{const{componentCls:t,calc:n}=e;return{[t]:{[`&-compact-item${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:n(e.lineWidth).mul(-1).equal(),insetInlineStart:n(e.lineWidth).mul(-1).equal(),display:"inline-block",width:e.lineWidth,height:`calc(100% + ${yn(e.lineWidth)} * 2)`,backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-vertical-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:n(e.lineWidth).mul(-1).equal(),insetInlineStart:n(e.lineWidth).mul(-1).equal(),display:"inline-block",width:`calc(100% + ${yn(e.lineWidth)} * 2)`,height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},Sd=fa(["Button","compact"],(e=>{const t=qc(e);return[os(t),kd(t),Cd(t)]}),Xc);var Ed=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const Nd={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["primary","link"],text:["default","text"]},Id=I.forwardRef(((e,t)=>{var n,r,o;const{loading:a=!1,prefixCls:i,color:s,variant:l,type:u,danger:c=!1,shape:d="default",size:h,styles:p,disabled:f,className:m,rootClassName:g,children:v,icon:b,iconPosition:y="start",ghost:w=!1,block:x=!1,htmlType:k="button",classNames:C,style:S={},autoInsertSpace:E}=e,N=Ed(e,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace"]),$=u||"default",[T,A]=(0,I.useMemo)((()=>{if(s&&l)return[s,l];const e=Nd[$]||[];return c?["danger",e[1]]:e}),[u,s,l,c]),O="danger"===T?"dangerous":T,{getPrefixCls:R,direction:P,button:D}=(0,I.useContext)(B),M=null===(n=null!==E&&void 0!==E?E:null===D||void 0===D?void 0:D.autoInsertSpace)||void 0===n||n,z=R("btn",i),[L,j,H]=wd(z),V=(0,I.useContext)(dl),W=null!==f&&void 0!==f?f:V,G=(0,I.useContext)(bc),U=(0,I.useMemo)((()=>function(e){if("object"===typeof e&&e){let t=null===e||void 0===e?void 0:e.delay;return t=Number.isNaN(t)||"number"!==typeof t?0:t,{loading:t<=0,delay:t}}return{loading:!!e,delay:0}}(a)),[a]),[K,q]=(0,I.useState)(U.loading),[X,J]=(0,I.useState)(!1),Y=uo(t,(0,I.createRef)()),Q=1===I.Children.count(v)&&!b&&!Cc(A);(0,I.useEffect)((()=>{let e=null;return U.delay>0?e=setTimeout((()=>{e=null,q(!0)}),U.delay):q(U.loading),function(){e&&(clearTimeout(e),e=null)}}),[U]),(0,I.useEffect)((()=>{if(!Y||!Y.current||!M)return;const e=Y.current.textContent;Q&&xc(e)?X||J(!0):X&&J(!1)}),[Y]);const Z=t=>{const{onClick:n}=e;K||W?t.preventDefault():null===n||void 0===n||n(t)};const{compactSize:ee,compactItemClassnames:te}=Qs(z,P),ne={large:"lg",small:"sm",middle:void 0},re=Gs((e=>{var t,n;return null!==(n=null!==(t=null!==h&&void 0!==h?h:ee)&&void 0!==t?t:G)&&void 0!==n?n:e})),oe=re&&ne[re]||"",ae=K?"loading":b,ie=_(N,["navigate"]),se=F()(z,j,H,{[`${z}-${d}`]:"default"!==d&&d,[`${z}-${$}`]:$,[`${z}-dangerous`]:c,[`${z}-color-${O}`]:O,[`${z}-variant-${A}`]:A,[`${z}-${oe}`]:oe,[`${z}-icon-only`]:!v&&0!==v&&!!ae,[`${z}-background-ghost`]:w&&!Cc(A),[`${z}-loading`]:K,[`${z}-two-chinese-chars`]:X&&M&&!K,[`${z}-block`]:x,[`${z}-rtl`]:"rtl"===P,[`${z}-icon-end`]:"end"===y},te,m,g,null===D||void 0===D?void 0:D.className),le=Object.assign(Object.assign({},null===D||void 0===D?void 0:D.style),S),ue=F()(null===C||void 0===C?void 0:C.icon,null===(r=null===D||void 0===D?void 0:D.classNames)||void 0===r?void 0:r.icon),ce=Object.assign(Object.assign({},(null===p||void 0===p?void 0:p.icon)||{}),(null===(o=null===D||void 0===D?void 0:D.styles)||void 0===o?void 0:o.icon)||{}),de=b&&!K?I.createElement(Nc,{prefixCls:z,className:ue,style:ce},b):I.createElement(Pc,{existIcon:!!b,prefixCls:z,loading:K}),he=v||0===v?Sc(v,Q&&M):null;if(void 0!==ie.href)return L(I.createElement("a",Object.assign({},ie,{className:F()(se,{[`${z}-disabled`]:W}),href:W?void 0:ie.href,style:le,onClick:Z,ref:Y,tabIndex:W?-1:0}),de,he));let pe=I.createElement("button",Object.assign({},N,{type:k,className:se,style:le,onClick:Z,disabled:W,ref:Y}),de,he,!!te&&I.createElement(Sd,{key:"compact",prefixCls:z}));return Cc(A)||(pe=I.createElement(gc,{component:"Button",disabled:K},pe)),L(pe)})),$d=Id;$d.Group=yc,$d.__ANT_BUTTON=!0;const Td=$d;var Ad=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const Od=I.forwardRef(((e,t)=>{const{prefixCls:n,inputPrefixCls:r,className:o,size:a,suffix:i,enterButton:s=!1,addonAfter:l,loading:u,disabled:c,onSearch:d,onChange:h,onCompositionStart:p,onCompositionEnd:f}=e,m=Ad(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:g,direction:v}=I.useContext(B),b=I.useRef(!1),y=g("input-search",n),w=g("input",r),{compactSize:x}=Qs(y,v),k=Gs((e=>{var t;return null!==(t=null!==a&&void 0!==a?a:x)&&void 0!==t?t:e})),C=I.useRef(null),S=e=>{var t;document.activeElement===(null===(t=C.current)||void 0===t?void 0:t.input)&&e.preventDefault()},E=e=>{var t,n;d&&d(null===(n=null===(t=C.current)||void 0===t?void 0:t.input)||void 0===n?void 0:n.value,e,{source:"input"})},N="boolean"===typeof s?I.createElement(Jl,null):null,$=`${y}-button`;let T;const A=s||{},O=A.type&&!0===A.type.__ANT_BUTTON;T=O||"button"===A.type?Ql(A,Object.assign({onMouseDown:S,onClick:e=>{var t,n;null===(n=null===(t=null===A||void 0===A?void 0:A.props)||void 0===t?void 0:t.onClick)||void 0===n||n.call(t,e),E(e)},key:"enterButton"},O?{className:$,size:k}:{})):I.createElement(Td,{className:$,type:s?"primary":void 0,size:k,disabled:c,key:"enterButton",onMouseDown:S,onClick:E,loading:u,icon:N},s),l&&(T=[T,Ql(l,{key:"addonAfter"})]);const R=F()(y,{[`${y}-rtl`]:"rtl"===v,[`${y}-${k}`]:!!k,[`${y}-with-button`]:!!s},o);return I.createElement(vl,Object.assign({ref:uo(C,t),onPressEnter:e=>{b.current||u||E(e)}},m,{size:k,onCompositionStart:e=>{b.current=!0,null===p||void 0===p||p(e)},onCompositionEnd:e=>{b.current=!1,null===f||void 0===f||f(e)},prefixCls:w,addonAfter:T,suffix:i,onChange:e=>{(null===e||void 0===e?void 0:e.target)&&"click"===e.type&&d&&d(e.target.value,e,{source:"clear"}),null===h||void 0===h||h(e)},className:R,disabled:c}))}));const Rd=Od;var Pd=I.createContext(null);var Dd=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),Fd="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,_d="undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),Md="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(_d):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var zd=["top","right","bottom","left","width","height","size","weight"],Ld="undefined"!==typeof MutationObserver,Bd=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function a(){n&&(n=!1,e()),r&&s()}function i(){Md(a)}function s(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(i,t);o=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){Fd&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Ld?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Fd&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;zd.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),jd=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},Hd=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||_d},Vd=Xd(0,0,0,0);function Wd(e){return parseFloat(e)||0}function Gd(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+Wd(e["border-"+n+"-width"])}),0)}function Ud(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return Vd;var r=Hd(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],a=e["padding-"+o];t[o]=Wd(a)}return t}(r),a=o.left+o.right,i=o.top+o.bottom,s=Wd(r.width),l=Wd(r.height);if("border-box"===r.boxSizing&&(Math.round(s+a)!==t&&(s-=Gd(r,"left","right")+a),Math.round(l+i)!==n&&(l-=Gd(r,"top","bottom")+i)),!function(e){return e===Hd(e).document.documentElement}(e)){var u=Math.round(s+a)-t,c=Math.round(l+i)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(c)&&(l-=c)}return Xd(o.left,o.top,s,l)}var Kd="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof Hd(e).SVGGraphicsElement}:function(e){return e instanceof Hd(e).SVGElement&&"function"===typeof e.getBBox};function qd(e){return Fd?Kd(e)?function(e){var t=e.getBBox();return Xd(0,0,t.width,t.height)}(e):Ud(e):Vd}function Xd(e,t,n,r){return{x:e,y:t,width:n,height:r}}var Jd=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Xd(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=qd(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),Yd=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,o=e.height,a="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,i=Object.create(a.prototype);return jd(i,{x:t,y:n,width:r,height:o,top:n,right:t+r,bottom:o+n,left:t}),i}(t);jd(this,{target:e,contentRect:n})},Qd=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new Dd,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof Hd(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Jd(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof Hd(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new Yd(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Zd="undefined"!==typeof WeakMap?new WeakMap:new Dd,eh=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Bd.getInstance(),r=new Qd(t,n,this);Zd.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){eh.prototype[e]=function(){var t;return(t=Zd.get(this))[e].apply(t,arguments)}}));const th="undefined"!==typeof _d.ResizeObserver?_d.ResizeObserver:eh;var nh=new Map;var rh=new th((function(e){e.forEach((function(e){var t,n=e.target;null===(t=nh.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))}));var oh=function(e){Ur(n,e);var t=Xr(n);function n(){return qt(this,n),t.apply(this,arguments)}return Jt(n,[{key:"render",value:function(){return this.props.children}}]),n}(I.Component);function ah(e,t){var n=e.children,r=e.disabled,o=I.useRef(null),a=I.useRef(null),i=I.useContext(Pd),s="function"===typeof n,l=s?n(o):n,u=I.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),c=!s&&I.isValidElement(l)&&ho(l),d=c?l.ref:null,h=co(d,o),p=function(){var e;return su(o.current)||(o.current&&"object"===J(o.current)?su(null===(e=o.current)||void 0===e?void 0:e.nativeElement):null)||su(a.current)};I.useImperativeHandle(t,(function(){return p()}));var f=I.useRef(e);f.current=e;var m=I.useCallback((function(e){var t=f.current,n=t.onResize,r=t.data,o=e.getBoundingClientRect(),a=o.width,s=o.height,l=e.offsetWidth,c=e.offsetHeight,d=Math.floor(a),h=Math.floor(s);if(u.current.width!==d||u.current.height!==h||u.current.offsetWidth!==l||u.current.offsetHeight!==c){var p={width:d,height:h,offsetWidth:l,offsetHeight:c};u.current=p;var m=l===Math.round(a)?a:l,g=c===Math.round(s)?s:c,v=nt(nt({},p),{},{offsetWidth:m,offsetHeight:g});null===i||void 0===i||i(v,e,r),n&&Promise.resolve().then((function(){n(v,e)}))}}),[]);return I.useEffect((function(){var e,t,n=p();return n&&!r&&(e=n,t=m,nh.has(e)||(nh.set(e,new Set),rh.observe(e)),nh.get(e).add(t)),function(){return function(e,t){nh.has(e)&&(nh.get(e).delete(t),nh.get(e).size||(rh.unobserve(e),nh.delete(e)))}(n,m)}}),[o.current,r]),I.createElement(oh,{ref:a},c?I.cloneElement(l,{ref:h}):l)}const ih=I.forwardRef(ah);function sh(e,t){var n=e.children;return("function"===typeof n?[n]:W(n)).map((function(n,r){var o=(null===n||void 0===n?void 0:n.key)||"".concat("rc-observer-key","-").concat(r);return I.createElement(ih,G({},e,{key:o,ref:0===r?t:void 0}),n)}))}var lh=I.forwardRef(sh);lh.Collection=function(e){var t=e.children,n=e.onBatchResize,r=I.useRef(0),o=I.useRef([]),a=I.useContext(Pd),i=I.useCallback((function(e,t,i){r.current+=1;var s=r.current;o.current.push({size:e,element:t,data:i}),Promise.resolve().then((function(){s===r.current&&(null===n||void 0===n||n(o.current),o.current=[])})),null===a||void 0===a||a(e,t,i)}),[n,a]);return I.createElement(Pd.Provider,{value:i},t)};const uh=lh;var ch,dh=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],hh={};function ph(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ch||((ch=document.createElement("textarea")).setAttribute("tab-index","-1"),ch.setAttribute("aria-hidden","true"),ch.setAttribute("name","hiddenTextarea"),document.body.appendChild(ch)),e.getAttribute("wrap")?ch.setAttribute("wrap",e.getAttribute("wrap")):ch.removeAttribute("wrap");var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&hh[n])return hh[n];var r=window.getComputedStyle(e),o=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),a=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),i=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),s={sizingStyle:dh.map((function(e){return"".concat(e,":").concat(r.getPropertyValue(e))})).join(";"),paddingSize:a,borderSize:i,boxSizing:o};return t&&n&&(hh[n]=s),s}(e,t),a=o.paddingSize,i=o.borderSize,s=o.boxSizing,l=o.sizingStyle;ch.setAttribute("style","".concat(l,";").concat("\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n  pointer-events: none !important;\n")),ch.value=e.value||e.placeholder||"";var u,c=void 0,d=void 0,h=ch.scrollHeight;if("border-box"===s?h+=i:"content-box"===s&&(h-=a),null!==n||null!==r){ch.value=" ";var p=ch.scrollHeight-a;null!==n&&(c=p*n,"border-box"===s&&(c=c+a+i),h=Math.max(c,h)),null!==r&&(d=p*r,"border-box"===s&&(d=d+a+i),u=h>d?"":"hidden",h=Math.min(d,h))}var f={height:h,overflowY:u,resize:"none"};return c&&(f.minHeight=c),d&&(f.maxHeight=d),f}var fh=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],mh=I.forwardRef((function(e,t){var n=e,r=n.prefixCls,o=n.defaultValue,a=n.value,i=n.autoSize,s=n.onResize,l=n.className,u=n.style,c=n.disabled,d=n.onChange,h=(n.onInternalAutoSize,Z(n,fh)),p=X(so(o,{value:a,postState:function(e){return null!==e&&void 0!==e?e:""}}),2),f=p[0],m=p[1],g=I.useRef();I.useImperativeHandle(t,(function(){return{textArea:g.current}}));var v=X(I.useMemo((function(){return i&&"object"===J(i)?[i.minRows,i.maxRows]:[]}),[i]),2),b=v[0],y=v[1],w=!!i,x=X(I.useState(2),2),k=x[0],C=x[1],S=X(I.useState(),2),E=S[0],N=S[1],$=function(){C(0)};In((function(){w&&$()}),[a,b,y,w]),In((function(){if(0===k)C(1);else if(1===k){var e=ph(g.current,!1,b,y);C(2),N(e)}else!function(){try{if(document.activeElement===g.current){var e=g.current,t=e.selectionStart,n=e.selectionEnd,r=e.scrollTop;g.current.setSelectionRange(t,n),g.current.scrollTop=r}}catch(kbe){}}()}),[k]);var T=I.useRef(),A=function(){Tl.cancel(T.current)};I.useEffect((function(){return A}),[]);var O=w?E:null,R=nt(nt({},u),O);return 0!==k&&1!==k||(R.overflowY="hidden",R.overflowX="hidden"),I.createElement(uh,{onResize:function(e){2===k&&(null===s||void 0===s||s(e),i&&(A(),T.current=Tl((function(){$()}))))},disabled:!(i||s)},I.createElement("textarea",G({},h,{ref:g,style:R,className:F()(r,l,Q({},"".concat(r,"-disabled"),c)),disabled:c,value:f,onChange:function(e){m(e.target.value),null===d||void 0===d||d(e)}})))}));const gh=mh;var vh=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],bh=I.forwardRef((function(e,t){var n,r=e.defaultValue,o=e.value,a=e.onFocus,i=e.onBlur,s=e.onChange,l=e.allowClear,u=e.maxLength,c=e.onCompositionStart,d=e.onCompositionEnd,h=e.suffix,p=e.prefixCls,f=void 0===p?"rc-textarea":p,m=e.showCount,g=e.count,v=e.className,b=e.style,y=e.disabled,w=e.hidden,x=e.classNames,k=e.styles,C=e.onResize,S=e.onClear,E=e.onPressEnter,N=e.readOnly,$=e.autoSize,T=e.onKeyDown,A=Z(e,vh),O=X(so(r,{value:o,defaultValue:r}),2),R=O[0],D=O[1],_=void 0===R||null===R?"":String(R),M=X(I.useState(!1),2),z=M[0],L=M[1],B=I.useRef(!1),j=X(I.useState(null),2),H=j[0],V=j[1],W=(0,I.useRef)(null),U=(0,I.useRef)(null),K=function(){var e;return null===(e=U.current)||void 0===e?void 0:e.textArea},q=function(){K().focus()};(0,I.useImperativeHandle)(t,(function(){var e;return{resizableTextArea:U.current,focus:q,blur:function(){K().blur()},nativeElement:(null===(e=W.current)||void 0===e?void 0:e.nativeElement)||K()}})),(0,I.useEffect)((function(){L((function(e){return!y&&e}))}),[y]);var J=X(I.useState(null),2),Y=J[0],ee=J[1];I.useEffect((function(){var e;Y&&(e=K()).setSelectionRange.apply(e,P(Y))}),[Y]);var te,ne=zs(g,m),re=null!==(n=ne.max)&&void 0!==n?n:u,oe=Number(re)>0,ae=ne.strategy(_),ie=!!re&&ae>re,se=function(e,t){var n=t;!B.current&&ne.exceedFormatter&&ne.max&&ne.strategy(t)>ne.max&&t!==(n=ne.exceedFormatter(t,{max:ne.max}))&&ee([K().selectionStart||0,K().selectionEnd||0]),D(n),Ds(e.currentTarget,e,s,n)},le=h;ne.show&&(te=ne.showFormatter?ne.showFormatter({value:_,count:ae,maxLength:re}):"".concat(ae).concat(oe?" / ".concat(re):""),le=I.createElement(I.Fragment,null,le,I.createElement("span",{className:F()("".concat(f,"-data-count"),null===x||void 0===x?void 0:x.count),style:null===k||void 0===k?void 0:k.count},te)));var ue=!$&&!m&&!l;return I.createElement(_s,{ref:W,value:_,allowClear:l,handleReset:function(e){D(""),q(),Ds(K(),e,s)},suffix:le,prefixCls:f,classNames:nt(nt({},x),{},{affixWrapper:F()(null===x||void 0===x?void 0:x.affixWrapper,Q(Q({},"".concat(f,"-show-count"),m),"".concat(f,"-textarea-allow-clear"),l))}),disabled:y,focused:z,className:F()(v,ie&&"".concat(f,"-out-of-range")),style:nt(nt({},b),H&&!ue?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":"string"===typeof te?te:void 0}},hidden:w,readOnly:N,onClear:S},I.createElement(gh,G({},A,{autoSize:$,maxLength:u,onKeyDown:function(e){"Enter"===e.key&&E&&E(e),null===T||void 0===T||T(e)},onChange:function(e){se(e,e.target.value)},onFocus:function(e){L(!0),null===a||void 0===a||a(e)},onBlur:function(e){L(!1),null===i||void 0===i||i(e)},onCompositionStart:function(e){B.current=!0,null===c||void 0===c||c(e)},onCompositionEnd:function(e){B.current=!1,se(e,e.currentTarget.value),null===d||void 0===d||d(e)},className:F()(null===x||void 0===x?void 0:x.textarea),style:nt(nt({},null===k||void 0===k?void 0:k.textarea),{},{resize:null===b||void 0===b?void 0:b.resize}),disabled:y,prefixCls:f,onResize:function(e){var t;null===C||void 0===C||C(e),null!==(t=K())&&void 0!==t&&t.style.height&&V(!0)},ref:U,readOnly:N})))}));const yh=bh;var wh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const xh=(0,I.forwardRef)(((e,t)=>{var n,r;const{prefixCls:o,bordered:a=!0,size:i,disabled:s,status:l,allowClear:u,classNames:c,rootClassName:d,className:h,style:p,styles:f,variant:m}=e,g=wh(e,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]);const{getPrefixCls:v,direction:b,textArea:y}=I.useContext(B),w=Gs(i),x=I.useContext(dl),k=null!==s&&void 0!==s?s:x,{status:C,hasFeedback:S,feedbackIcon:E}=I.useContext(Zi),N=ll(C,l),$=I.useRef(null);I.useImperativeHandle(t,(()=>{var e;return{resizableTextArea:null===(e=$.current)||void 0===e?void 0:e.resizableTextArea,focus:e=>{var t,n;!function(e,t){if(!e)return;e.focus(t);const{cursor:n}=t||{};if(n){const t=e.value.length;switch(n){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(t,t);break;default:e.setSelectionRange(0,t)}}}(null===(n=null===(t=$.current)||void 0===t?void 0:t.resizableTextArea)||void 0===n?void 0:n.textArea,e)},blur:()=>{var e;return null===(e=$.current)||void 0===e?void 0:e.blur()}}}));const T=v("input",o),A=hl(T),[O,R,P]=Os(T,A),[D,_]=pl("textArea",m,a),M=il(null!==u&&void 0!==u?u:null===y||void 0===y?void 0:y.allowClear);return O(I.createElement(yh,Object.assign({autoComplete:null===y||void 0===y?void 0:y.autoComplete},g,{style:Object.assign(Object.assign({},null===y||void 0===y?void 0:y.style),p),styles:Object.assign(Object.assign({},null===y||void 0===y?void 0:y.styles),f),disabled:k,allowClear:M,className:F()(P,A,h,d,null===y||void 0===y?void 0:y.className),classNames:Object.assign(Object.assign(Object.assign({},c),null===y||void 0===y?void 0:y.classNames),{textarea:F()({[`${T}-sm`]:"small"===w,[`${T}-lg`]:"large"===w},R,null===c||void 0===c?void 0:c.textarea,null===(n=null===y||void 0===y?void 0:y.classNames)||void 0===n?void 0:n.textarea),variant:F()({[`${T}-${D}`]:_},sl(T,N)),affixWrapper:F()(`${T}-textarea-affix-wrapper`,{[`${T}-affix-wrapper-rtl`]:"rtl"===b,[`${T}-affix-wrapper-sm`]:"small"===w,[`${T}-affix-wrapper-lg`]:"large"===w,[`${T}-textarea-show-count`]:e.showCount||(null===(r=e.count)||void 0===r?void 0:r.show)},R)}),prefixCls:T,suffix:S&&I.createElement("span",{className:`${T}-textarea-suffix`},E),ref:$})))})),kh=xh,Ch=vl;Ch.Group=Rs,Ch.Search=Rd,Ch.TextArea=kh,Ch.Password=Kl,Ch.OTP=_l;const Sh=Ch,Eh=I.createContext({});function Nh(){}const Ih=I.createContext({}),$h=()=>{const e=()=>{};return e.deprecated=Nh,e},Th=(0,I.createContext)(void 0);const Ah={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};const Oh=nt(nt({},{yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0}),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}),Rh={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},Ph={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},Oh),timePickerLocale:Object.assign({},Rh)},Dh="${label} is not a valid ${type}",Fh={locale:"en",Pagination:Ah,DatePicker:Ph,TimePicker:Rh,Calendar:Ph,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Dh,method:Dh,array:Dh,object:Dh,number:Dh,date:Dh,boolean:Dh,integer:Dh,float:Dh,regexp:Dh,email:Dh,url:Dh,hex:Dh},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};let _h=Object.assign({},Fh.Modal),Mh=[];const zh=()=>Mh.reduce(((e,t)=>Object.assign(Object.assign({},e),t)),Fh.Modal);const Lh=(0,I.createContext)(void 0);const Bh=e=>{const{locale:t={},children:n,_ANT_MARK__:r}=e;I.useEffect((()=>{const e=function(e){if(e){const t=Object.assign({},e);return Mh.push(t),_h=zh(),()=>{Mh=Mh.filter((e=>e!==t)),_h=zh()}}_h=Object.assign({},Fh.Modal)}(null===t||void 0===t?void 0:t.Modal);return e}),[t]);const o=I.useMemo((()=>Object.assign(Object.assign({},t),{exist:!0})),[t]);return I.createElement(Lh.Provider,{value:o},n)},jh=`-ant-${Date.now()}-${Math.random()}`;function Hh(e,t){const n=function(e,t){const n={},r=(e,t)=>{let n=e.clone();return n=(null===t||void 0===t?void 0:t(n))||n,n.toRgbString()},o=(e,t)=>{const o=new Vo(e),a=Ee(o.toRgbString());n[`${t}-color`]=r(o),n[`${t}-color-disabled`]=a[1],n[`${t}-color-hover`]=a[4],n[`${t}-color-active`]=a[6],n[`${t}-color-outline`]=o.clone().setAlpha(.2).toRgbString(),n[`${t}-color-deprecated-bg`]=a[0],n[`${t}-color-deprecated-border`]=a[2]};if(t.primaryColor){o(t.primaryColor,"primary");const e=new Vo(t.primaryColor),a=Ee(e.toRgbString());a.forEach(((e,t)=>{n[`primary-${t+1}`]=e})),n["primary-color-deprecated-l-35"]=r(e,(e=>e.lighten(35))),n["primary-color-deprecated-l-20"]=r(e,(e=>e.lighten(20))),n["primary-color-deprecated-t-20"]=r(e,(e=>e.tint(20))),n["primary-color-deprecated-t-50"]=r(e,(e=>e.tint(50))),n["primary-color-deprecated-f-12"]=r(e,(e=>e.setAlpha(.12*e.getAlpha())));const i=new Vo(a[0]);n["primary-color-active-deprecated-f-30"]=r(i,(e=>e.setAlpha(.3*e.getAlpha()))),n["primary-color-active-deprecated-d-02"]=r(i,(e=>e.darken(2)))}return t.successColor&&o(t.successColor,"success"),t.warningColor&&o(t.warningColor,"warning"),t.errorColor&&o(t.errorColor,"error"),t.infoColor&&o(t.infoColor,"info"),`\n  :root {\n    ${Object.keys(n).map((t=>`--${e}-${t}: ${n[t]};`)).join("\n")}\n  }\n  `.trim()}(e,t);rt()&&pt(n,`${jh}-dynamic-theme`)}const Vh=function(){return{componentDisabled:(0,I.useContext)(dl),componentSize:(0,I.useContext)(Ws)}},Wh=Object.assign({},$),{useId:Gh}=Wh,Uh="undefined"===typeof Gh?()=>"":Gh;function Kh(e){const{children:t}=e,[,n]=ca(),{motion:r}=n,o=I.useRef(!1);return o.current=o.current||!1===r,o.current?I.createElement(cu,{motion:r},t):t}const qh=()=>null;var Xh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const Jh=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let Yh,Qh,Zh,ep;function tp(){return Yh||M}function np(){return Qh||z}const rp=()=>({getPrefixCls:(e,t)=>t||(e?`${tp()}-${e}`:tp()),getIconPrefixCls:np,getRootPrefixCls:()=>Yh||tp(),getTheme:()=>Zh,holderRender:ep}),op=e=>{const{children:t,csp:n,autoInsertSpaceInButton:r,alert:o,anchor:a,form:i,locale:s,componentSize:l,direction:u,space:c,splitter:d,virtual:h,dropdownMatchSelectWidth:p,popupMatchSelectWidth:f,popupOverflow:m,legacyLocale:g,parentContext:v,iconPrefixCls:b,theme:y,componentDisabled:w,segmented:x,statistic:k,spin:C,calendar:S,carousel:E,cascader:N,collapse:$,typography:T,checkbox:A,descriptions:O,divider:R,drawer:P,skeleton:D,steps:F,image:_,layout:M,list:L,mentions:j,modal:H,progress:V,result:W,slider:G,breadcrumb:U,menu:K,pagination:q,input:X,textArea:J,empty:Y,badge:Q,radio:Z,rate:ee,switch:te,transfer:ne,avatar:re,message:oe,tag:ae,table:ie,card:se,tabs:le,timeline:ue,timePicker:ce,upload:de,notification:he,tree:pe,colorPicker:fe,datePicker:me,rangePicker:ge,flex:ve,wave:be,dropdown:ye,warning:we,tour:xe,floatButtonGroup:ke,variant:Ce,inputNumber:Se,treeSelect:Ee}=e,Ne=I.useCallback(((t,n)=>{const{prefixCls:r}=e;if(n)return n;const o=r||v.getPrefixCls("");return t?`${o}-${t}`:o}),[v.getPrefixCls,e.prefixCls]),Ie=b||v.iconPrefixCls||z,$e=n||v.csp;da(Ie,$e);const Te=function(e,t,n){var r;$h("ConfigProvider");const o=e||{},a=!1!==o.inherit&&t?t:Object.assign(Object.assign({},Zo),{hashed:null!==(r=null===t||void 0===t?void 0:t.hashed)&&void 0!==r?r:Zo.hashed,cssVar:null===t||void 0===t?void 0:t.cssVar}),i=Uh();return Ut((()=>{var r,s;if(!e)return t;const l=Object.assign({},a.components);Object.keys(e.components||{}).forEach((t=>{l[t]=Object.assign(Object.assign({},l[t]),e.components[t])}));const u=`css-var-${i.replace(/:/g,"")}`,c=(null!==(r=o.cssVar)&&void 0!==r?r:a.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:null===n||void 0===n?void 0:n.prefixCls},"object"===typeof a.cssVar?a.cssVar:{}),"object"===typeof o.cssVar?o.cssVar:{}),{key:"object"===typeof o.cssVar&&(null===(s=o.cssVar)||void 0===s?void 0:s.key)||u});return Object.assign(Object.assign(Object.assign({},a),o),{token:Object.assign(Object.assign({},a.token),o.token),components:l,cssVar:c})}),[o,a],((e,t)=>e.some(((e,n)=>{const r=t[n];return!Kt(e,r,!0)}))))}(y,v.theme,{prefixCls:Ne("")});const Ae={csp:$e,autoInsertSpaceInButton:r,alert:o,anchor:a,locale:s||g,direction:u,space:c,splitter:d,virtual:h,popupMatchSelectWidth:null!==f&&void 0!==f?f:p,popupOverflow:m,getPrefixCls:Ne,iconPrefixCls:Ie,theme:Te,segmented:x,statistic:k,spin:C,calendar:S,carousel:E,cascader:N,collapse:$,typography:T,checkbox:A,descriptions:O,divider:R,drawer:P,skeleton:D,steps:F,image:_,input:X,textArea:J,layout:M,list:L,mentions:j,modal:H,progress:V,result:W,slider:G,breadcrumb:U,menu:K,pagination:q,empty:Y,badge:Q,radio:Z,rate:ee,switch:te,transfer:ne,avatar:re,message:oe,tag:ae,table:ie,card:se,tabs:le,timeline:ue,timePicker:ce,upload:de,notification:he,tree:pe,colorPicker:fe,datePicker:me,rangePicker:ge,flex:ve,wave:be,dropdown:ye,warning:we,tour:xe,floatButtonGroup:ke,variant:Ce,inputNumber:Se,treeSelect:Ee};const Oe=Object.assign({},v);Object.keys(Ae).forEach((e=>{void 0!==Ae[e]&&(Oe[e]=Ae[e])})),Jh.forEach((t=>{const n=e[t];n&&(Oe[t]=n)})),"undefined"!==typeof r&&(Oe.button=Object.assign({autoInsertSpace:r},Oe.button));const Re=Ut((()=>Oe),Oe,((e,t)=>{const n=Object.keys(e),r=Object.keys(t);return n.length!==r.length||n.some((n=>e[n]!==t[n]))})),Pe=I.useMemo((()=>({prefixCls:Ie,csp:$e})),[Ie,$e]);let De=I.createElement(I.Fragment,null,I.createElement(qh,{dropdownMatchSelectWidth:p}),t);const Fe=I.useMemo((()=>{var e,t,n,r;return wo((null===(e=Fh.Form)||void 0===e?void 0:e.defaultValidateMessages)||{},(null===(n=null===(t=Re.locale)||void 0===t?void 0:t.Form)||void 0===n?void 0:n.defaultValidateMessages)||{},(null===(r=Re.form)||void 0===r?void 0:r.validateMessages)||{},(null===i||void 0===i?void 0:i.validateMessages)||{})}),[Re,null===i||void 0===i?void 0:i.validateMessages]);Object.keys(Fe).length>0&&(De=I.createElement(Th.Provider,{value:Fe},De)),s&&(De=I.createElement(Bh,{locale:s,_ANT_MARK__:"internalMark"},De)),(Ie||$e)&&(De=I.createElement(et.Provider,{value:Pe},De)),l&&(De=I.createElement(Vs,{size:l},De)),De=I.createElement(Kh,null,De);const _e=I.useMemo((()=>{const e=Te||{},{algorithm:t,token:n,components:r,cssVar:o}=e,a=Xh(e,["algorithm","token","components","cssVar"]),i=t&&(!Array.isArray(t)||t.length>0)?hn(t):Qo,s={};Object.entries(r||{}).forEach((e=>{let[t,n]=e;const r=Object.assign({},n);"algorithm"in r&&(!0===r.algorithm?r.theme=i:(Array.isArray(r.algorithm)||"function"===typeof r.algorithm)&&(r.theme=hn(r.algorithm)),delete r.algorithm),s[t]=r}));const l=Object.assign(Object.assign({},Ho),n);return Object.assign(Object.assign({},a),{theme:i,token:l,components:s,override:Object.assign({override:l},s),cssVar:o})}),[Te]);return y&&(De=I.createElement(ea.Provider,{value:_e},De)),Re.warning&&(De=I.createElement(Ih.Provider,{value:Re.warning},De)),void 0!==w&&(De=I.createElement(cl,{disabled:w},De)),I.createElement(B.Provider,{value:Re},De)},ap=e=>{const t=I.useContext(B),n=I.useContext(Lh);return I.createElement(op,Object.assign({parentContext:t,legacyLocale:n},e))};ap.ConfigContext=B,ap.SizeContext=Ws,ap.config=e=>{const{prefixCls:t,iconPrefixCls:n,theme:r,holderRender:o}=e;void 0!==t&&(Yh=t),void 0!==n&&(Qh=n),"holderRender"in e&&(ep=o),r&&(!function(e){return Object.keys(e).some((e=>e.endsWith("Color")))}(r)?Zh=r:Hh(tp(),r))},ap.useConfig=Vh,Object.defineProperty(ap,"SizeContext",{get:()=>Ws});const ip=ap;const sp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};var lp=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:sp}))};const up=I.forwardRef(lp);const cp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};var dp=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:cp}))};const hp=I.forwardRef(dp);const pp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};var fp=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:pp}))};const mp=I.forwardRef(fp);var gp={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=gp.F1&&t<=gp.F12)return!1;switch(t){case gp.ALT:case gp.CAPS_LOCK:case gp.CONTEXT_MENU:case gp.CTRL:case gp.DOWN:case gp.END:case gp.ESC:case gp.HOME:case gp.INSERT:case gp.LEFT:case gp.MAC_FF_META:case gp.META:case gp.NUMLOCK:case gp.NUM_CENTER:case gp.PAGE_DOWN:case gp.PAGE_UP:case gp.PAUSE:case gp.PRINT_SCREEN:case gp.RIGHT:case gp.SHIFT:case gp.UP:case gp.WIN_KEY:case gp.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=gp.ZERO&&e<=gp.NINE)return!0;if(e>=gp.NUM_ZERO&&e<=gp.NUM_MULTIPLY)return!0;if(e>=gp.A&&e<=gp.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case gp.SPACE:case gp.QUESTION_MARK:case gp.NUM_PLUS:case gp.NUM_MINUS:case gp.NUM_PERIOD:case gp.NUM_DIVISION:case gp.SEMICOLON:case gp.DASH:case gp.EQUALS:case gp.COMMA:case gp.PERIOD:case gp.SLASH:case gp.APOSTROPHE:case gp.SINGLE_QUOTE:case gp.OPEN_SQUARE_BRACKET:case gp.BACKSLASH:case gp.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};const vp=gp;var bp=I.forwardRef((function(e,t){var n=e.prefixCls,r=e.style,o=e.className,a=e.duration,i=void 0===a?4.5:a,s=e.showProgress,l=e.pauseOnHover,u=void 0===l||l,c=e.eventKey,d=e.content,h=e.closable,p=e.closeIcon,f=void 0===p?"x":p,m=e.props,g=e.onClick,v=e.onNoticeClose,b=e.times,y=e.hovering,w=X(I.useState(!1),2),x=w[0],k=w[1],C=X(I.useState(0),2),S=C[0],E=C[1],N=X(I.useState(0),2),$=N[0],T=N[1],A=y||x,O=i>0&&s,R=function(){v(c)};I.useEffect((function(){if(!A&&i>0){var e=Date.now()-$,t=setTimeout((function(){R()}),1e3*i-$);return function(){u&&clearTimeout(t),T(Date.now()-e)}}}),[i,A,b]),I.useEffect((function(){if(!A&&O&&(u||0===$)){var e,t=performance.now();return function n(){cancelAnimationFrame(e),e=requestAnimationFrame((function(e){var r=e+$-t,o=Math.min(r/(1e3*i),1);E(100*o),o<1&&n()}))}(),function(){u&&cancelAnimationFrame(e)}}}),[i,$,A,O,b]);var P=I.useMemo((function(){return"object"===J(h)&&null!==h?h:h?{closeIcon:f}:{}}),[h,f]),D=wl(P,!0),_=100-(!S||S<0?0:S>100?100:S),M="".concat(n,"-notice");return I.createElement("div",G({},m,{ref:t,className:F()(M,o,Q({},"".concat(M,"-closable"),h)),style:r,onMouseEnter:function(e){var t;k(!0),null===m||void 0===m||null===(t=m.onMouseEnter)||void 0===t||t.call(m,e)},onMouseLeave:function(e){var t;k(!1),null===m||void 0===m||null===(t=m.onMouseLeave)||void 0===t||t.call(m,e)},onClick:g}),I.createElement("div",{className:"".concat(M,"-content")},d),h&&I.createElement("a",G({tabIndex:0,className:"".concat(M,"-close"),onKeyDown:function(e){"Enter"!==e.key&&"Enter"!==e.code&&e.keyCode!==vp.ENTER||R()},"aria-label":"Close"},D,{onClick:function(e){e.preventDefault(),e.stopPropagation(),R()}}),P.closeIcon),O&&I.createElement("progress",{className:"".concat(M,"-progress"),max:"100",value:_},_+"%"))}));const yp=bp;var wp=I.createContext({});const xp=function(e){var t=e.children,n=e.classNames;return I.createElement(wp.Provider,{value:{classNames:n}},t)};const kp=function(e){var t,n,r,o={offset:8,threshold:3,gap:16};e&&"object"===J(e)&&(o.offset=null!==(t=e.offset)&&void 0!==t?t:8,o.threshold=null!==(n=e.threshold)&&void 0!==n?n:3,o.gap=null!==(r=e.gap)&&void 0!==r?r:16);return[!!e,o]};var Cp=["className","style","classNames","styles"];const Sp=function(e){var t=e.configList,n=e.placement,r=e.prefixCls,o=e.className,a=e.style,i=e.motion,s=e.onAllNoticeRemoved,l=e.onNoticeClose,u=e.stack,c=(0,I.useContext)(wp).classNames,d=(0,I.useRef)({}),h=X((0,I.useState)(null),2),p=h[0],f=h[1],m=X((0,I.useState)([]),2),g=m[0],v=m[1],b=t.map((function(e){return{config:e,key:String(e.key)}})),y=X(kp(u),2),w=y[0],x=y[1],k=x.offset,C=x.threshold,S=x.gap,E=w&&(g.length>0||b.length<=C),N="function"===typeof i?i(n):i;return(0,I.useEffect)((function(){w&&g.length>1&&v((function(e){return e.filter((function(e){return b.some((function(t){var n=t.key;return e===n}))}))}))}),[g,b,w]),(0,I.useEffect)((function(){var e,t;w&&d.current[null===(e=b[b.length-1])||void 0===e?void 0:e.key]&&f(d.current[null===(t=b[b.length-1])||void 0===t?void 0:t.key])}),[b,w]),I.createElement(Yu,G({key:n,className:F()(r,"".concat(r,"-").concat(n),null===c||void 0===c?void 0:c.list,o,Q(Q({},"".concat(r,"-stack"),!!w),"".concat(r,"-stack-expanded"),E)),style:a,keys:b,motionAppear:!0},N,{onAllRemoved:function(){s(n)}}),(function(e,t){var o=e.config,a=e.className,i=e.style,s=e.index,u=o,h=u.key,f=u.times,m=String(h),y=o,x=y.className,C=y.style,N=y.classNames,$=y.styles,T=Z(y,Cp),A=b.findIndex((function(e){return e.key===m})),O={};if(w){var R=b.length-1-(A>-1?A:s-1),D="top"===n||"bottom"===n?"-50%":"0";if(R>0){var _,M,z;O.height=E?null===(_=d.current[m])||void 0===_?void 0:_.offsetHeight:null===p||void 0===p?void 0:p.offsetHeight;for(var L=0,B=0;B<R;B++){var j;L+=(null===(j=d.current[b[b.length-1-B].key])||void 0===j?void 0:j.offsetHeight)+S}var H=(E?L:R*k)*(n.startsWith("top")?1:-1),V=!E&&null!==p&&void 0!==p&&p.offsetWidth&&null!==(M=d.current[m])&&void 0!==M&&M.offsetWidth?((null===p||void 0===p?void 0:p.offsetWidth)-2*k*(R<3?R:3))/(null===(z=d.current[m])||void 0===z?void 0:z.offsetWidth):1;O.transform="translate3d(".concat(D,", ").concat(H,"px, 0) scaleX(").concat(V,")")}else O.transform="translate3d(".concat(D,", 0, 0)")}return I.createElement("div",{ref:t,className:F()("".concat(r,"-notice-wrapper"),a,null===N||void 0===N?void 0:N.wrapper),style:nt(nt(nt({},i),O),null===$||void 0===$?void 0:$.wrapper),onMouseEnter:function(){return v((function(e){return e.includes(m)?e:[].concat(P(e),[m])}))},onMouseLeave:function(){return v((function(e){return e.filter((function(e){return e!==m}))}))}},I.createElement(yp,G({},T,{ref:function(e){A>-1?d.current[m]=e:delete d.current[m]},prefixCls:r,classNames:N,styles:$,className:F()(x,null===c||void 0===c?void 0:c.notice),style:C,times:f,key:h,eventKey:h,onNoticeClose:l,hovering:w&&g.length>0})))}))};var Ep=I.forwardRef((function(e,t){var n=e.prefixCls,r=void 0===n?"rc-notification":n,o=e.container,a=e.motion,i=e.maxCount,s=e.className,l=e.style,u=e.onAllRemoved,c=e.stack,d=e.renderNotifications,h=X(I.useState([]),2),p=h[0],f=h[1],m=function(e){var t,n=p.find((function(t){return t.key===e}));null===n||void 0===n||null===(t=n.onClose)||void 0===t||t.call(n),f((function(t){return t.filter((function(t){return t.key!==e}))}))};I.useImperativeHandle(t,(function(){return{open:function(e){f((function(t){var n,r=P(t),o=r.findIndex((function(t){return t.key===e.key})),a=nt({},e);o>=0?(a.times=((null===(n=t[o])||void 0===n?void 0:n.times)||0)+1,r[o]=a):(a.times=0,r.push(a));return i>0&&r.length>i&&(r=r.slice(-i)),r}))},close:function(e){m(e)},destroy:function(){f([])}}}));var g=X(I.useState({}),2),v=g[0],b=g[1];I.useEffect((function(){var e={};p.forEach((function(t){var n=t.placement,r=void 0===n?"topRight":n;r&&(e[r]=e[r]||[],e[r].push(t))})),Object.keys(v).forEach((function(t){e[t]=e[t]||[]})),b(e)}),[p]);var y=function(e){b((function(t){var n=nt({},t);return(n[e]||[]).length||delete n[e],n}))},w=I.useRef(!1);if(I.useEffect((function(){Object.keys(v).length>0?w.current=!0:w.current&&(null===u||void 0===u||u(),w.current=!1)}),[v]),!o)return null;var x=Object.keys(v);return(0,ru.createPortal)(I.createElement(I.Fragment,null,x.map((function(e){var t=v[e],n=I.createElement(Sp,{key:e,configList:t,placement:e,prefixCls:r,className:null===s||void 0===s?void 0:s(e),style:null===l||void 0===l?void 0:l(e),motion:a,onNoticeClose:m,onAllNoticeRemoved:y,stack:c});return d?d(n,{prefixCls:r,key:e}):n}))),o)}));const Np=Ep;var Ip=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],$p=function(){return document.body},Tp=0;function Ap(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getContainer,n=void 0===t?$p:t,r=e.motion,o=e.prefixCls,a=e.maxCount,i=e.className,s=e.style,l=e.onAllRemoved,u=e.stack,c=e.renderNotifications,d=Z(e,Ip),h=X(I.useState(),2),p=h[0],f=h[1],m=I.useRef(),g=I.createElement(Np,{container:p,ref:m,prefixCls:o,motion:r,maxCount:a,className:i,style:s,onAllRemoved:l,stack:u,renderNotifications:c}),v=X(I.useState([]),2),b=v[0],y=v[1],w=I.useMemo((function(){return{open:function(e){var t=function(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){t&&Object.keys(t).forEach((function(n){var r=t[n];void 0!==r&&(e[n]=r)}))})),e}(d,e);null!==t.key&&void 0!==t.key||(t.key="rc-notification-".concat(Tp),Tp+=1),y((function(e){return[].concat(P(e),[{type:"open",config:t}])}))},close:function(e){y((function(t){return[].concat(P(t),[{type:"close",key:e}])}))},destroy:function(){y((function(e){return[].concat(P(e),[{type:"destroy"}])}))}}}),[]);return I.useEffect((function(){f(n())})),I.useEffect((function(){m.current&&b.length&&(b.forEach((function(e){switch(e.type){case"open":m.current.open(e.config);break;case"close":m.current.close(e.key);break;case"destroy":m.current.destroy()}})),y((function(e){return e.filter((function(e){return!b.includes(e)}))})))}),[b]),[w,g]}const Op=I.createContext(void 0),Rp=100,Pp={Modal:Rp,Drawer:Rp,Popover:Rp,Popconfirm:Rp,Tooltip:Rp,Tour:Rp,FloatButton:Rp},Dp={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};const Fp=(e,t)=>{const[,n]=ca(),r=I.useContext(Op),o=function(e){return e in Pp}(e);let a;if(void 0!==t)a=[t,t];else{let i=null!==r&&void 0!==r?r:0;i+=o?(r?0:n.zIndexPopupBase)+Pp[e]:Dp[e],a=[void 0===r?t:i,i]}return a},_p=e=>{const{componentCls:t,iconCls:n,boxShadow:r,colorText:o,colorSuccess:a,colorError:i,colorWarning:s,colorInfo:l,fontSizeLG:u,motionEaseInOutCirc:c,motionDurationSlow:d,marginXS:h,paddingXS:p,borderRadiusLG:f,zIndexPopup:m,contentPadding:g,contentBg:v}=e,b=`${t}-notice`,y=new Hr("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:p,transform:"translateY(0)",opacity:1}}),w=new Hr("MessageMoveOut",{"0%":{maxHeight:e.height,padding:p,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),x={padding:p,textAlign:"center",[`${t}-custom-content`]:{display:"flex",alignItems:"center"},[`${t}-custom-content > ${n}`]:{marginInlineEnd:h,fontSize:u},[`${b}-content`]:{display:"inline-block",padding:g,background:v,borderRadius:f,boxShadow:r,pointerEvents:"all"},[`${t}-success > ${n}`]:{color:a},[`${t}-error > ${n}`]:{color:i},[`${t}-warning > ${n}`]:{color:s},[`${t}-info > ${n},\n      ${t}-loading > ${n}`]:{color:l}};return[{[t]:Object.assign(Object.assign({},_o(e)),{color:o,position:"fixed",top:h,width:"100%",pointerEvents:"none",zIndex:m,[`${t}-move-up`]:{animationFillMode:"forwards"},[`\n        ${t}-move-up-appear,\n        ${t}-move-up-enter\n      `]:{animationName:y,animationDuration:d,animationPlayState:"paused",animationTimingFunction:c},[`\n        ${t}-move-up-appear${t}-move-up-appear-active,\n        ${t}-move-up-enter${t}-move-up-enter-active\n      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:w,animationDuration:d,animationPlayState:"paused",animationTimingFunction:c},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[t]:{[`${b}-wrapper`]:Object.assign({},x)}},{[`${t}-notice-pure-panel`]:Object.assign(Object.assign({},x),{padding:0,textAlign:"start"})}]},Mp=ha("Message",(e=>{const t=So(e,{height:150});return[_p(t)]}),(e=>({zIndexPopup:e.zIndexPopupBase+1e3+10,contentBg:e.colorBgElevated,contentPadding:`${(e.controlHeightLG-e.fontSize*e.lineHeight)/2}px ${e.paddingSM}px`})));var zp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const Lp={info:I.createElement(mp,null),success:I.createElement(up,null),error:I.createElement(al,null),warning:I.createElement(hp,null),loading:I.createElement(Tc,null)},Bp=e=>{let{prefixCls:t,type:n,icon:r,children:o}=e;return I.createElement("div",{className:F()(`${t}-custom-content`,`${t}-${n}`)},r||Lp[n],I.createElement("span",null,o))},jp=e=>{const{prefixCls:t,className:n,type:r,icon:o,content:a}=e,i=zp(e,["prefixCls","className","type","icon","content"]),{getPrefixCls:s}=I.useContext(B),l=t||s("message"),u=hl(l),[c,d,h]=Mp(l,u);return c(I.createElement(yp,Object.assign({},i,{prefixCls:l,className:F()(n,d,`${l}-notice-pure-panel`,h,u),eventKey:"pure",duration:null,content:I.createElement(Bp,{prefixCls:l,type:r,icon:o},a)})))};const Hp={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};var Vp=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:Hp}))};const Wp=I.forwardRef(Vp);function Gp(e){let t;const n=new Promise((n=>{t=e((()=>{n(!0)}))})),r=()=>{null===t||void 0===t||t()};return r.then=(e,t)=>n.then(e,t),r.promise=n,r}var Up=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const Kp=3,qp=e=>{let{children:t,prefixCls:n}=e;const r=hl(n),[o,a,i]=Mp(n,r);return o(I.createElement(xp,{classNames:{list:F()(a,i,r)}},t))},Xp=(e,t)=>{let{prefixCls:n,key:r}=t;return I.createElement(qp,{prefixCls:n,key:r},e)},Jp=I.forwardRef(((e,t)=>{const{top:n,prefixCls:r,getContainer:o,maxCount:a,duration:i=Kp,rtl:s,transitionName:l,onAllRemoved:u}=e,{getPrefixCls:c,getPopupContainer:d,message:h,direction:p}=I.useContext(B),f=r||c("message"),m=I.createElement("span",{className:`${f}-close-x`},I.createElement(Wp,{className:`${f}-close-icon`})),[g,v]=Ap({prefixCls:f,style:()=>({left:"50%",transform:"translateX(-50%)",top:null!==n&&void 0!==n?n:8}),className:()=>F()({[`${f}-rtl`]:null!==s&&void 0!==s?s:"rtl"===p}),motion:()=>function(e,t){return{motionName:null!==t&&void 0!==t?t:`${e}-move-up`}}(f,l),closable:!1,closeIcon:m,duration:i,getContainer:()=>(null===o||void 0===o?void 0:o())||(null===d||void 0===d?void 0:d())||document.body,maxCount:a,onAllRemoved:u,renderNotifications:Xp});return I.useImperativeHandle(t,(()=>Object.assign(Object.assign({},g),{prefixCls:f,message:h}))),v}));let Yp=0;function Qp(e){const t=I.useRef(null),n=($h("Message"),I.useMemo((()=>{const e=e=>{var n;null===(n=t.current)||void 0===n||n.close(e)},n=n=>{if(!t.current){const e=()=>{};return e.then=()=>{},e}const{open:r,prefixCls:o,message:a}=t.current,i=`${o}-notice`,{content:s,icon:l,type:u,key:c,className:d,style:h,onClose:p}=n,f=Up(n,["content","icon","type","key","className","style","onClose"]);let m=c;return void 0!==m&&null!==m||(Yp+=1,m=`antd-message-${Yp}`),Gp((t=>(r(Object.assign(Object.assign({},f),{key:m,content:I.createElement(Bp,{prefixCls:o,type:u,icon:l},s),placement:"top",className:F()(u&&`${i}-${u}`,d,null===a||void 0===a?void 0:a.className),style:Object.assign(Object.assign({},null===a||void 0===a?void 0:a.style),h),onClose:()=>{null===p||void 0===p||p(),t()}})),()=>{e(m)})))},r={open:n,destroy:n=>{var r;void 0!==n?e(n):null===(r=t.current)||void 0===r||r.destroy()}};return["info","success","warning","error","loading"].forEach((e=>{r[e]=(t,r,o)=>{let a,i,s;a=t&&"object"===typeof t&&"content"in t?t:{content:t},"function"===typeof r?s=r:(i=r,s=o);const l=Object.assign(Object.assign({onClose:s,duration:i},a),{type:e});return n(l)}})),r}),[]));return[n,I.createElement(Jp,Object.assign({key:"message-holder"},e,{ref:t}))]}let Zp=null,ef=e=>e(),tf=[],nf={};function rf(){const{getContainer:e,duration:t,rtl:n,maxCount:r,top:o}=nf,a=(null===e||void 0===e?void 0:e())||document.body;return{getContainer:()=>a,duration:t,rtl:n,maxCount:r,top:o}}const of=I.forwardRef(((e,t)=>{const{messageConfig:n,sync:r}=e,{getPrefixCls:o}=(0,I.useContext)(B),a=nf.prefixCls||o("message"),i=(0,I.useContext)(Eh),[s,l]=Qp(Object.assign(Object.assign(Object.assign({},n),{prefixCls:a}),i.message));return I.useImperativeHandle(t,(()=>{const e=Object.assign({},s);return Object.keys(e).forEach((t=>{e[t]=function(){return r(),s[t].apply(s,arguments)}})),{instance:e,sync:r}})),l})),af=I.forwardRef(((e,t)=>{const[n,r]=I.useState(rf),o=()=>{r(rf)};I.useEffect(o,[]);const a=rp(),i=a.getRootPrefixCls(),s=a.getIconPrefixCls(),l=a.getTheme(),u=I.createElement(of,{ref:t,sync:o,messageConfig:n});return I.createElement(ip,{prefixCls:i,iconPrefixCls:s,theme:l},a.holderRender?a.holderRender(u):u)}));function sf(){if(!Zp){const e=document.createDocumentFragment(),t={fragment:e};return Zp=t,void ef((()=>{ic(I.createElement(af,{ref:e=>{const{instance:n,sync:r}=e||{};Promise.resolve().then((()=>{!t.instance&&n&&(t.instance=n,t.sync=r,sf())}))}}),e)}))}Zp.instance&&(tf.forEach((e=>{const{type:t,skipped:n}=e;if(!n)switch(t){case"open":ef((()=>{const t=Zp.instance.open(Object.assign(Object.assign({},nf),e.config));null===t||void 0===t||t.then(e.resolve),e.setCloseFn(t)}));break;case"destroy":ef((()=>{null===Zp||void 0===Zp||Zp.instance.destroy(e.key)}));break;default:ef((()=>{var n;const r=(n=Zp.instance)[t].apply(n,P(e.args));null===r||void 0===r||r.then(e.resolve),e.setCloseFn(r)}))}})),tf=[])}const lf={open:function(e){const t=Gp((t=>{let n;const r={type:"open",config:e,resolve:t,setCloseFn:e=>{n=e}};return tf.push(r),()=>{n?ef((()=>{n()})):r.skipped=!0}}));return sf(),t},destroy:e=>{tf.push({type:"destroy",key:e}),sf()},config:function(e){nf=Object.assign(Object.assign({},nf),e),ef((()=>{var e;null===(e=null===Zp||void 0===Zp?void 0:Zp.sync)||void 0===e||e.call(Zp)}))},useMessage:function(e){return Qp(e)},_InternalPanelDoNotUseOrYouWillBeFired:jp},uf=lf;["success","info","warning","error","loading"].forEach((e=>{uf[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(e,t){rp();const n=Gp((n=>{let r;const o={type:e,args:t,resolve:n,setCloseFn:e=>{r=e}};return tf.push(o),()=>{r?ef((()=>{r()})):o.skipped=!0}}));return sf(),n}(e,n)}}));const cf=uf;function df(e){return["small","middle","large"].includes(e)}function hf(e){return!!e&&("number"===typeof e&&!Number.isNaN(e))}const pf=I.createContext({latestIndex:0}),ff=pf.Provider,mf=e=>{let{className:t,index:n,children:r,split:o,style:a}=e;const{latestIndex:i}=I.useContext(pf);return null===r||void 0===r?null:I.createElement(I.Fragment,null,I.createElement("div",{className:t,style:a},r),n<i&&o&&I.createElement("span",{className:`${t}-split`},o))};var gf=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const vf=I.forwardRef(((e,t)=>{var n,r,o;const{getPrefixCls:a,space:i,direction:s}=I.useContext(B),{size:l=(null!==(n=null===i||void 0===i?void 0:i.size)&&void 0!==n?n:"small"),align:u,className:c,rootClassName:d,children:h,direction:p="horizontal",prefixCls:f,split:m,style:g,wrap:v=!1,classNames:b,styles:y}=e,w=gf(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[x,k]=Array.isArray(l)?l:[l,l],C=df(k),S=df(x),E=hf(k),N=hf(x),$=W(h,{keepEmpty:!0}),T=void 0===u&&"horizontal"===p?"center":u,A=a("space",f),[O,R,P]=Xs(A),D=F()(A,null===i||void 0===i?void 0:i.className,R,`${A}-${p}`,{[`${A}-rtl`]:"rtl"===s,[`${A}-align-${T}`]:T,[`${A}-gap-row-${k}`]:C,[`${A}-gap-col-${x}`]:S},c,d,P),_=F()(`${A}-item`,null!==(r=null===b||void 0===b?void 0:b.item)&&void 0!==r?r:null===(o=null===i||void 0===i?void 0:i.classNames)||void 0===o?void 0:o.item);let M=0;const z=$.map(((e,t)=>{var n,r;null!==e&&void 0!==e&&(M=t);const o=(null===e||void 0===e?void 0:e.key)||`${_}-${t}`;return I.createElement(mf,{className:_,key:o,index:t,split:m,style:null!==(n=null===y||void 0===y?void 0:y.item)&&void 0!==n?n:null===(r=null===i||void 0===i?void 0:i.styles)||void 0===r?void 0:r.item},e)})),L=I.useMemo((()=>({latestIndex:M})),[M]);if(0===$.length)return null;const j={};return v&&(j.flexWrap="wrap"),!S&&N&&(j.columnGap=x),!C&&E&&(j.rowGap=k),O(I.createElement("div",Object.assign({ref:t,className:D,style:Object.assign(Object.assign(Object.assign({},j),null===i||void 0===i?void 0:i.style),g)},w),I.createElement(ff,{value:L},z)))})),bf=vf;bf.Compact=tl;const yf=bf;const wf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};var xf=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:wf}))};const kf=I.forwardRef(xf);var Cf=function(e){if(rt()&&window.document.documentElement){var t=Array.isArray(e)?e:[e],n=window.document.documentElement;return t.some((function(e){return e in n.style}))}return!1};function Sf(e,t){return Array.isArray(e)||void 0===t?Cf(e):function(e,t){if(!Cf(e))return!1;var n=document.createElement("div"),r=n.style[e];return n.style[e]=t,n.style[e]!==r}(e,t)}const Ef=(e,t)=>{const n=I.useContext(Lh),r=I.useMemo((()=>{var r;const o=t||Fh[e],a=null!==(r=null===n||void 0===n?void 0:n[e])&&void 0!==r?r:{};return Object.assign(Object.assign({},"function"===typeof o?o():o),a||{})}),[e,t,n]);return[r,I.useMemo((()=>{const e=null===n||void 0===n?void 0:n.locale;return(null===n||void 0===n?void 0:n.exist)&&!e?Fh.locale:e}),[n])]};function Nf(e){var t=e.children,n=e.prefixCls,r=e.id,o=e.overlayInnerStyle,a=e.className,i=e.style;return I.createElement("div",{className:F()("".concat(n,"-content"),a),style:i},I.createElement("div",{className:"".concat(n,"-inner"),id:r,role:"tooltip",style:o},"function"===typeof t?t():t))}const If=I.createContext(null);var $f,Tf=[];function Af(e){var t="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=t;var r,o,a=n.style;if(a.position="absolute",a.left="0",a.top="0",a.width="100px",a.height="100px",a.overflow="scroll",e){var i=getComputedStyle(e);a.scrollbarColor=i.scrollbarColor,a.scrollbarWidth=i.scrollbarWidth;var s=getComputedStyle(e,"::-webkit-scrollbar"),l=parseInt(s.width,10),u=parseInt(s.height,10);try{var c=l?"width: ".concat(s.width,";"):"",d=u?"height: ".concat(s.height,";"):"";pt("\n#".concat(t,"::-webkit-scrollbar {\n").concat(c,"\n").concat(d,"\n}"),t)}catch(kbe){console.error(kbe),r=l,o=u}}document.body.appendChild(n);var h=e&&r&&!isNaN(r)?r:n.offsetWidth-n.clientWidth,p=e&&o&&!isNaN(o)?o:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),ht(t),{width:h,height:p}}function Of(e){return"undefined"===typeof document?0:((e||void 0===$f)&&($f=Af()),$f.width)}function Rf(e){return"undefined"!==typeof document&&e&&e instanceof Element?Af(e):{width:0,height:0}}var Pf="rc-util-locker-".concat(Date.now()),Df=0;function Ff(e){var t=!!e,n=X(I.useState((function(){return Df+=1,"".concat(Pf,"_").concat(Df)})),1)[0];In((function(){if(t){var e=Rf(document.body).width,r=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;pt("\nhtml body {\n  overflow-y: hidden;\n  ".concat(r?"width: calc(100% - ".concat(e,"px);"):"","\n}"),n)}else ht(n);return function(){ht(n)}}),[t,n])}var _f=!1;var Mf=function(e){return!1!==e&&(rt()&&e?"string"===typeof e?document.querySelector(e):"function"===typeof e?e():e:null)},zf=I.forwardRef((function(e,t){var n=e.open,r=e.autoLock,o=e.getContainer,a=(e.debug,e.autoDestroy),i=void 0===a||a,s=e.children,l=X(I.useState(n),2),u=l[0],c=l[1],d=u||n;I.useEffect((function(){(i||n)&&c(n)}),[n,i]);var h=X(I.useState((function(){return Mf(o)})),2),p=h[0],f=h[1];I.useEffect((function(){var e=Mf(o);f(null!==e&&void 0!==e?e:null)}));var m=function(e){var t=X(I.useState((function(){return rt()?document.createElement("div"):null})),1)[0],n=I.useRef(!1),r=I.useContext(If),o=X(I.useState(Tf),2),a=o[0],i=o[1],s=r||(n.current?void 0:function(e){i((function(t){return[e].concat(P(t))}))});function l(){t.parentElement||document.body.appendChild(t),n.current=!0}function u(){var e;null===(e=t.parentElement)||void 0===e||e.removeChild(t),n.current=!1}return In((function(){return e?r?r(l):l():u(),u}),[e]),In((function(){a.length&&(a.forEach((function(e){return e()})),i(Tf))}),[a]),[t,s]}(d&&!p),g=X(m,2),v=g[0],b=g[1],y=null!==p&&void 0!==p?p:v;Ff(r&&n&&rt()&&(y===v||y===document.body));var w=null;s&&ho(s)&&t&&(w=s.ref);var x=co(w,t);if(!d||!rt()||void 0===p)return null;var k,C=!1===y||("boolean"===typeof k&&(_f=k),_f),S=s;return t&&(S=I.cloneElement(s,{ref:x})),I.createElement(If.Provider,{value:b},C?S:(0,ru.createPortal)(S,y))}));const Lf=zf;var Bf=0;var jf=nt({},$).useId;const Hf=jf?function(e){var t=jf();return e||t}:function(e){var t=X(I.useState("ssr-id"),2),n=t[0],r=t[1];return I.useEffect((function(){var e=Bf;Bf+=1,r("rc_unique_".concat(e))}),[]),e||n},Vf=function(){if("undefined"===typeof navigator||"undefined"===typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null===e||void 0===e?void 0:e.substr(0,4))};function Wf(e){var t=e.prefixCls,n=e.align,r=e.arrow,o=e.arrowPos,a=r||{},i=a.className,s=a.content,l=o.x,u=void 0===l?0:l,c=o.y,d=void 0===c?0:c,h=I.useRef();if(!n||!n.points)return null;var p={position:"absolute"};if(!1!==n.autoArrow){var f=n.points[0],m=n.points[1],g=f[0],v=f[1],b=m[0],y=m[1];g!==b&&["t","b"].includes(g)?"t"===g?p.top=0:p.bottom=0:p.top=d,v!==y&&["l","r"].includes(v)?"l"===v?p.left=0:p.right=0:p.left=u}return I.createElement("div",{ref:h,className:F()("".concat(t,"-arrow"),i),style:p},s)}function Gf(e){var t=e.prefixCls,n=e.open,r=e.zIndex,o=e.mask,a=e.motion;return o?I.createElement(Qu,G({},a,{motionAppear:!0,visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return I.createElement("div",{style:{zIndex:r},className:F()("".concat(t,"-mask"),n)})})):null}var Uf=I.memo((function(e){return e.children}),(function(e,t){return t.cache}));const Kf=Uf;var qf=I.forwardRef((function(e,t){var n=e.popup,r=e.className,o=e.prefixCls,a=e.style,i=e.target,s=e.onVisibleChanged,l=e.open,u=e.keepDom,c=e.fresh,d=e.onClick,h=e.mask,p=e.arrow,f=e.arrowPos,m=e.align,g=e.motion,v=e.maskMotion,b=e.forceRender,y=e.getPopupContainer,w=e.autoDestroy,x=e.portal,k=e.zIndex,C=e.onMouseEnter,S=e.onMouseLeave,E=e.onPointerEnter,N=e.ready,$=e.offsetX,T=e.offsetY,A=e.offsetR,O=e.offsetB,R=e.onAlign,P=e.onPrepare,D=e.stretch,_=e.targetWidth,M=e.targetHeight,z="function"===typeof n?n():n,L=l||u,B=(null===y||void 0===y?void 0:y.length)>0,j=X(I.useState(!y||!B),2),H=j[0],V=j[1];if(In((function(){!H&&B&&i&&V(!0)}),[H,B,i]),!H)return null;var W="auto",U={left:"-1000vw",top:"-1000vh",right:W,bottom:W};if(N||!l){var K,q=m.points,J=m.dynamicInset||(null===(K=m._experimental)||void 0===K?void 0:K.dynamicInset),Y=J&&"r"===q[0][1],Q=J&&"b"===q[0][0];Y?(U.right=A,U.left=W):(U.left=$,U.right=W),Q?(U.bottom=O,U.top=W):(U.top=T,U.bottom=W)}var Z={};return D&&(D.includes("height")&&M?Z.height=M:D.includes("minHeight")&&M&&(Z.minHeight=M),D.includes("width")&&_?Z.width=_:D.includes("minWidth")&&_&&(Z.minWidth=_)),l||(Z.pointerEvents="none"),I.createElement(x,{open:b||L,getContainer:y&&function(){return y(i)},autoDestroy:w},I.createElement(Gf,{prefixCls:o,open:l,zIndex:k,mask:h,motion:v}),I.createElement(uh,{onResize:R,disabled:!l},(function(e){return I.createElement(Qu,G({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:b,leavedClassName:"".concat(o,"-hidden")},g,{onAppearPrepare:P,onEnterPrepare:P,visible:l,onVisibleChanged:function(e){var t;null===g||void 0===g||null===(t=g.onVisibleChanged)||void 0===t||t.call(g,e),s(e)}}),(function(n,i){var s=n.className,u=n.style,h=F()(o,s,r);return I.createElement("div",{ref:uo(e,t,i),className:h,style:nt(nt(nt(nt({"--arrow-x":"".concat(f.x||0,"px"),"--arrow-y":"".concat(f.y||0,"px")},U),Z),u),{},{boxSizing:"border-box",zIndex:k},a),onMouseEnter:C,onMouseLeave:S,onPointerEnter:E,onClick:d},p&&I.createElement(Wf,{prefixCls:o,arrow:p,arrowPos:f,align:m}),I.createElement(Kf,{cache:!l&&!c},z))}))})))}));const Xf=qf;var Jf=I.forwardRef((function(e,t){var n=e.children,r=e.getTriggerDOMNode,o=ho(n),a=I.useCallback((function(e){lo(t,r?r(e):e)}),[r]),i=co(a,n.ref);return o?I.cloneElement(n,{ref:i}):n}));const Yf=Jf;const Qf=I.createContext(null);function Zf(e){return e?Array.isArray(e)?e:[e]:[]}function em(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>2?arguments[2]:void 0)?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function tm(e,t,n,r){return t||(n?{motionName:"".concat(e,"-").concat(n)}:r?{motionName:r}:null)}function nm(e){return e.ownerDocument.defaultView}function rm(e){for(var t=[],n=null===e||void 0===e?void 0:e.parentElement,r=["hidden","scroll","clip","auto"];n;){var o=nm(n).getComputedStyle(n);[o.overflowX,o.overflowY,o.overflow].some((function(e){return r.includes(e)}))&&t.push(n),n=n.parentElement}return t}function om(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number.isNaN(e)?t:e}function am(e){return om(parseFloat(e),0)}function im(e,t){var n=nt({},e);return(t||[]).forEach((function(e){if(!(e instanceof HTMLBodyElement||e instanceof HTMLHtmlElement)){var t=nm(e).getComputedStyle(e),r=t.overflow,o=t.overflowClipMargin,a=t.borderTopWidth,i=t.borderBottomWidth,s=t.borderLeftWidth,l=t.borderRightWidth,u=e.getBoundingClientRect(),c=e.offsetHeight,d=e.clientHeight,h=e.offsetWidth,p=e.clientWidth,f=am(a),m=am(i),g=am(s),v=am(l),b=om(Math.round(u.width/h*1e3)/1e3),y=om(Math.round(u.height/c*1e3)/1e3),w=(h-p-g-v)*b,x=(c-d-f-m)*y,k=f*y,C=m*y,S=g*b,E=v*b,N=0,I=0;if("clip"===r){var $=am(o);N=$*b,I=$*y}var T=u.x+S-N,A=u.y+k-I,O=T+u.width+2*N-S-E-w,R=A+u.height+2*I-k-C-x;n.left=Math.max(n.left,T),n.top=Math.max(n.top,A),n.right=Math.min(n.right,O),n.bottom=Math.min(n.bottom,R)}})),n}function sm(e){var t="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=t.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(t)}function lm(e,t){var n=X(t||[],2),r=n[0],o=n[1];return[sm(e.width,r),sm(e.height,o)]}function um(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[e[0],e[1]]}function cm(e,t){var n,r=t[0],o=t[1];return n="t"===r?e.y:"b"===r?e.y+e.height:e.y+e.height/2,{x:"l"===o?e.x:"r"===o?e.x+e.width:e.x+e.width/2,y:n}}function dm(e,t){var n={t:"b",b:"t",l:"r",r:"l"};return e.map((function(e,r){return r===t?n[e]||"c":e})).join("")}var hm=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];const pm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lf,t=I.forwardRef((function(t,n){var r=t.prefixCls,o=void 0===r?"rc-trigger-popup":r,a=t.children,i=t.action,s=void 0===i?"hover":i,l=t.showAction,u=t.hideAction,c=t.popupVisible,d=t.defaultPopupVisible,h=t.onPopupVisibleChange,p=t.afterPopupVisibleChange,f=t.mouseEnterDelay,m=t.mouseLeaveDelay,g=void 0===m?.1:m,v=t.focusDelay,b=t.blurDelay,y=t.mask,w=t.maskClosable,x=void 0===w||w,k=t.getPopupContainer,C=t.forceRender,S=t.autoDestroy,E=t.destroyPopupOnHide,N=t.popup,$=t.popupClassName,T=t.popupStyle,A=t.popupPlacement,O=t.builtinPlacements,R=void 0===O?{}:O,D=t.popupAlign,_=t.zIndex,M=t.stretch,z=t.getPopupClassNameFromAlign,L=t.fresh,B=t.alignPoint,j=t.onPopupClick,H=t.onPopupAlign,V=t.arrow,W=t.popupMotion,G=t.maskMotion,U=t.popupTransitionName,K=t.popupAnimation,q=t.maskTransitionName,J=t.maskAnimation,Y=t.className,Q=t.getTriggerDOMNode,ee=Z(t,hm),te=S||E||!1,ne=X(I.useState(!1),2),re=ne[0],oe=ne[1];In((function(){oe(Vf())}),[]);var ae=I.useRef({}),ie=I.useContext(Qf),se=I.useMemo((function(){return{registerSubPopup:function(e,t){ae.current[e]=t,null===ie||void 0===ie||ie.registerSubPopup(e,t)}}}),[ie]),le=Hf(),ue=X(I.useState(null),2),ce=ue[0],de=ue[1],he=I.useRef(null),pe=oo((function(e){he.current=e,au(e)&&ce!==e&&de(e),null===ie||void 0===ie||ie.registerSubPopup(le,e)})),fe=X(I.useState(null),2),me=fe[0],ge=fe[1],ve=I.useRef(null),be=oo((function(e){au(e)&&me!==e&&(ge(e),ve.current=e)})),ye=I.Children.only(a),we=(null===ye||void 0===ye?void 0:ye.props)||{},xe={},ke=oo((function(e){var t,n,r=me;return(null===r||void 0===r?void 0:r.contains(e))||(null===(t=mt(r))||void 0===t?void 0:t.host)===e||e===r||(null===ce||void 0===ce?void 0:ce.contains(e))||(null===(n=mt(ce))||void 0===n?void 0:n.host)===e||e===ce||Object.values(ae.current).some((function(t){return(null===t||void 0===t?void 0:t.contains(e))||e===t}))})),Ce=tm(o,W,K,U),Se=tm(o,G,J,q),Ee=X(I.useState(d||!1),2),Ne=Ee[0],Ie=Ee[1],$e=null!==c&&void 0!==c?c:Ne,Te=oo((function(e){void 0===c&&Ie(e)}));In((function(){Ie(c||!1)}),[c]);var Ae=I.useRef($e);Ae.current=$e;var Oe=I.useRef([]);Oe.current=[];var Re=oo((function(e){var t;Te(e),(null!==(t=Oe.current[Oe.current.length-1])&&void 0!==t?t:$e)!==e&&(Oe.current.push(e),null===h||void 0===h||h(e))})),Pe=I.useRef(),De=function(){clearTimeout(Pe.current)},Fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;De(),0===t?Re(e):Pe.current=setTimeout((function(){Re(e)}),1e3*t)};I.useEffect((function(){return De}),[]);var _e=X(I.useState(!1),2),Me=_e[0],ze=_e[1];In((function(e){e&&!$e||ze(!0)}),[$e]);var Le=X(I.useState(null),2),Be=Le[0],je=Le[1],He=X(I.useState(null),2),Ve=He[0],We=He[1],Ge=function(e){We([e.clientX,e.clientY])},Ue=function(e,t,n,r,o,a,i){var s=X(I.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:o[r]||{}}),2),l=s[0],u=s[1],c=I.useRef(0),d=I.useMemo((function(){return t?rm(t):[]}),[t]),h=I.useRef({});e||(h.current={});var p=oo((function(){if(t&&n&&e){var s,l,c,p,f,m=t,g=m.ownerDocument,v=nm(m).getComputedStyle(m),b=v.width,y=v.height,w=v.position,x=m.style.left,k=m.style.top,C=m.style.right,S=m.style.bottom,E=m.style.overflow,N=nt(nt({},o[r]),a),I=g.createElement("div");if(null===(s=m.parentElement)||void 0===s||s.appendChild(I),I.style.left="".concat(m.offsetLeft,"px"),I.style.top="".concat(m.offsetTop,"px"),I.style.position=w,I.style.height="".concat(m.offsetHeight,"px"),I.style.width="".concat(m.offsetWidth,"px"),m.style.left="0",m.style.top="0",m.style.right="auto",m.style.bottom="auto",m.style.overflow="hidden",Array.isArray(n))f={x:n[0],y:n[1],width:0,height:0};else{var $,T,A=n.getBoundingClientRect();A.x=null!==($=A.x)&&void 0!==$?$:A.left,A.y=null!==(T=A.y)&&void 0!==T?T:A.top,f={x:A.x,y:A.y,width:A.width,height:A.height}}var O=m.getBoundingClientRect();O.x=null!==(l=O.x)&&void 0!==l?l:O.left,O.y=null!==(c=O.y)&&void 0!==c?c:O.top;var R=g.documentElement,P=R.clientWidth,D=R.clientHeight,F=R.scrollWidth,_=R.scrollHeight,M=R.scrollTop,z=R.scrollLeft,L=O.height,B=O.width,j=f.height,H=f.width,V={left:0,top:0,right:P,bottom:D},W={left:-z,top:-M,right:F-z,bottom:_-M},G=N.htmlRegion,U="visible",K="visibleFirst";"scroll"!==G&&G!==K&&(G=U);var q=G===K,J=im(W,d),Y=im(V,d),Q=G===U?Y:J,Z=q?Y:Q;m.style.left="auto",m.style.top="auto",m.style.right="0",m.style.bottom="0";var ee=m.getBoundingClientRect();m.style.left=x,m.style.top=k,m.style.right=C,m.style.bottom=S,m.style.overflow=E,null===(p=m.parentElement)||void 0===p||p.removeChild(I);var te=om(Math.round(B/parseFloat(b)*1e3)/1e3),ne=om(Math.round(L/parseFloat(y)*1e3)/1e3);if(0===te||0===ne||au(n)&&!Zl(n))return;var re=N.offset,oe=N.targetOffset,ae=X(lm(O,re),2),ie=ae[0],se=ae[1],le=X(lm(f,oe),2),ue=le[0],ce=le[1];f.x-=ue,f.y-=ce;var de=X(N.points||[],2),he=de[0],pe=um(de[1]),fe=um(he),me=cm(f,pe),ge=cm(O,fe),ve=nt({},N),be=me.x-ge.x+ie,ye=me.y-ge.y+se;function pt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q,r=O.x+e,o=O.y+t,a=r+B,i=o+L,s=Math.max(r,n.left),l=Math.max(o,n.top),u=Math.min(a,n.right),c=Math.min(i,n.bottom);return Math.max(0,(u-s)*(c-l))}var we,xe,ke,Ce,Se=pt(be,ye),Ee=pt(be,ye,Y),Ne=cm(f,["t","l"]),Ie=cm(O,["t","l"]),$e=cm(f,["b","r"]),Te=cm(O,["b","r"]),Ae=N.overflow||{},Oe=Ae.adjustX,Re=Ae.adjustY,Pe=Ae.shiftX,De=Ae.shiftY,Fe=function(e){return"boolean"===typeof e?e:e>=0};function ft(){we=O.y+ye,xe=we+L,ke=O.x+be,Ce=ke+B}ft();var _e=Fe(Re),Me=fe[0]===pe[0];if(_e&&"t"===fe[0]&&(xe>Z.bottom||h.current.bt)){var ze=ye;Me?ze-=L-j:ze=Ne.y-Te.y-se;var Le=pt(be,ze),Be=pt(be,ze,Y);Le>Se||Le===Se&&(!q||Be>=Ee)?(h.current.bt=!0,ye=ze,se=-se,ve.points=[dm(fe,0),dm(pe,0)]):h.current.bt=!1}if(_e&&"b"===fe[0]&&(we<Z.top||h.current.tb)){var je=ye;Me?je+=L-j:je=$e.y-Ie.y-se;var He=pt(be,je),Ve=pt(be,je,Y);He>Se||He===Se&&(!q||Ve>=Ee)?(h.current.tb=!0,ye=je,se=-se,ve.points=[dm(fe,0),dm(pe,0)]):h.current.tb=!1}var We=Fe(Oe),Ge=fe[1]===pe[1];if(We&&"l"===fe[1]&&(Ce>Z.right||h.current.rl)){var Ue=be;Ge?Ue-=B-H:Ue=Ne.x-Te.x-ie;var Ke=pt(Ue,ye),qe=pt(Ue,ye,Y);Ke>Se||Ke===Se&&(!q||qe>=Ee)?(h.current.rl=!0,be=Ue,ie=-ie,ve.points=[dm(fe,1),dm(pe,1)]):h.current.rl=!1}if(We&&"r"===fe[1]&&(ke<Z.left||h.current.lr)){var Xe=be;Ge?Xe+=B-H:Xe=$e.x-Ie.x-ie;var Je=pt(Xe,ye),Ye=pt(Xe,ye,Y);Je>Se||Je===Se&&(!q||Ye>=Ee)?(h.current.lr=!0,be=Xe,ie=-ie,ve.points=[dm(fe,1),dm(pe,1)]):h.current.lr=!1}ft();var Qe=!0===Pe?0:Pe;"number"===typeof Qe&&(ke<Y.left&&(be-=ke-Y.left-ie,f.x+H<Y.left+Qe&&(be+=f.x-Y.left+H-Qe)),Ce>Y.right&&(be-=Ce-Y.right-ie,f.x>Y.right-Qe&&(be+=f.x-Y.right+Qe)));var Ze=!0===De?0:De;"number"===typeof Ze&&(we<Y.top&&(ye-=we-Y.top-se,f.y+j<Y.top+Ze&&(ye+=f.y-Y.top+j-Ze)),xe>Y.bottom&&(ye-=xe-Y.bottom-se,f.y>Y.bottom-Ze&&(ye+=f.y-Y.bottom+Ze)));var et=O.x+be,tt=et+B,rt=O.y+ye,ot=rt+L,at=f.x,it=at+H,st=f.y,lt=st+j,ut=(Math.max(et,at)+Math.min(tt,it))/2-et,ct=(Math.max(rt,st)+Math.min(ot,lt))/2-rt;null===i||void 0===i||i(t,ve);var dt=ee.right-O.x-(be+O.width),ht=ee.bottom-O.y-(ye+O.height);1===te&&(be=Math.round(be),dt=Math.round(dt)),1===ne&&(ye=Math.round(ye),ht=Math.round(ht)),u({ready:!0,offsetX:be/te,offsetY:ye/ne,offsetR:dt/te,offsetB:ht/ne,arrowX:ut/te,arrowY:ct/ne,scaleX:te,scaleY:ne,align:ve})}})),f=function(){u((function(e){return nt(nt({},e),{},{ready:!1})}))};return In(f,[r]),In((function(){e||f()}),[e]),[l.ready,l.offsetX,l.offsetY,l.offsetR,l.offsetB,l.arrowX,l.arrowY,l.scaleX,l.scaleY,l.align,function(){c.current+=1;var e=c.current;Promise.resolve().then((function(){c.current===e&&p()}))}]}($e,ce,B&&null!==Ve?Ve:me,A,R,D,H),Ke=X(Ue,11),qe=Ke[0],Xe=Ke[1],Je=Ke[2],Ye=Ke[3],Qe=Ke[4],Ze=Ke[5],et=Ke[6],tt=Ke[7],rt=Ke[8],ot=Ke[9],at=Ke[10],it=function(e,t,n,r){return I.useMemo((function(){var o=Zf(null!==n&&void 0!==n?n:t),a=Zf(null!==r&&void 0!==r?r:t),i=new Set(o),s=new Set(a);return e&&(i.has("hover")&&(i.delete("hover"),i.add("click")),s.has("hover")&&(s.delete("hover"),s.add("click"))),[i,s]}),[e,t,n,r])}(re,s,l,u),st=X(it,2),lt=st[0],ut=st[1],ct=lt.has("click"),dt=ut.has("click")||ut.has("contextMenu"),ht=oo((function(){Me||at()}));!function(e,t,n,r,o){In((function(){if(e&&t&&n){var a=n,i=rm(t),s=rm(a),l=nm(a),u=new Set([l].concat(P(i),P(s)));function c(){r(),o()}return u.forEach((function(e){e.addEventListener("scroll",c,{passive:!0})})),l.addEventListener("resize",c,{passive:!0}),r(),function(){u.forEach((function(e){e.removeEventListener("scroll",c),l.removeEventListener("resize",c)}))}}}),[e,t,n])}($e,me,ce,ht,(function(){Ae.current&&B&&dt&&Fe(!1)})),In((function(){ht()}),[Ve,A]),In((function(){!$e||null!==R&&void 0!==R&&R[A]||ht()}),[JSON.stringify(D)]);var pt=I.useMemo((function(){var e=function(e,t,n,r){for(var o=n.points,a=Object.keys(e),i=0;i<a.length;i+=1){var s,l=a[i];if(em(null===(s=e[l])||void 0===s?void 0:s.points,o,r))return"".concat(t,"-placement-").concat(l)}return""}(R,o,ot,B);return F()(e,null===z||void 0===z?void 0:z(ot))}),[ot,z,R,o,B]);I.useImperativeHandle(n,(function(){return{nativeElement:ve.current,popupElement:he.current,forceAlign:ht}}));var ft=X(I.useState(0),2),gt=ft[0],vt=ft[1],bt=X(I.useState(0),2),yt=bt[0],wt=bt[1],xt=function(){if(M&&me){var e=me.getBoundingClientRect();vt(e.width),wt(e.height)}};function kt(e,t,n,r){xe[e]=function(o){var a;null===r||void 0===r||r(o),Fe(t,n);for(var i=arguments.length,s=new Array(i>1?i-1:0),l=1;l<i;l++)s[l-1]=arguments[l];null===(a=we[e])||void 0===a||a.call.apply(a,[we,o].concat(s))}}In((function(){Be&&(at(),Be(),je(null))}),[Be]),(ct||dt)&&(xe.onClick=function(e){var t;Ae.current&&dt?Fe(!1):!Ae.current&&ct&&(Ge(e),Fe(!0));for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];null===(t=we.onClick)||void 0===t||t.call.apply(t,[we,e].concat(r))}),function(e,t,n,r,o,a,i,s){var l=I.useRef(e);l.current=e,I.useEffect((function(){if(t&&r&&(!o||a)){var e=function(e){var t;l.current&&!i((null===(t=e.composedPath)||void 0===t||null===(t=t.call(e))||void 0===t?void 0:t[0])||e.target)&&s(!1)},u=nm(r);u.addEventListener("mousedown",e,!0),u.addEventListener("contextmenu",e,!0);var c=mt(n);return c&&(c.addEventListener("mousedown",e,!0),c.addEventListener("contextmenu",e,!0)),function(){u.removeEventListener("mousedown",e,!0),u.removeEventListener("contextmenu",e,!0),c&&(c.removeEventListener("mousedown",e,!0),c.removeEventListener("contextmenu",e,!0))}}}),[t,n,r,o,a])}($e,dt,me,ce,y,x,ke,Fe);var Ct,St,Et=lt.has("hover"),Nt=ut.has("hover");Et&&(kt("onMouseEnter",!0,f,(function(e){Ge(e)})),kt("onPointerEnter",!0,f,(function(e){Ge(e)})),Ct=function(e){($e||Me)&&null!==ce&&void 0!==ce&&ce.contains(e.target)&&Fe(!0,f)},B&&(xe.onMouseMove=function(e){var t;null===(t=we.onMouseMove)||void 0===t||t.call(we,e)})),Nt&&(kt("onMouseLeave",!1,g),kt("onPointerLeave",!1,g),St=function(){Fe(!1,g)}),lt.has("focus")&&kt("onFocus",!0,v),ut.has("focus")&&kt("onBlur",!1,b),lt.has("contextMenu")&&(xe.onContextMenu=function(e){var t;Ae.current&&ut.has("contextMenu")?Fe(!1):(Ge(e),Fe(!0)),e.preventDefault();for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];null===(t=we.onContextMenu)||void 0===t||t.call.apply(t,[we,e].concat(r))}),Y&&(xe.className=F()(we.className,Y));var It=nt(nt({},we),xe),$t={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach((function(e){ee[e]&&($t[e]=function(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null===(t=It[e])||void 0===t||t.call.apply(t,[It].concat(r)),ee[e].apply(ee,r)})}));var Tt=I.cloneElement(ye,nt(nt({},It),$t)),At={x:Ze,y:et},Ot=V?nt({},!0!==V?V:{}):null;return I.createElement(I.Fragment,null,I.createElement(uh,{disabled:!$e,ref:be,onResize:function(){xt(),ht()}},I.createElement(Yf,{getTriggerDOMNode:Q},Tt)),I.createElement(Qf.Provider,{value:se},I.createElement(Xf,{portal:e,ref:pe,prefixCls:o,popup:N,className:F()($,pt),style:T,target:me,onMouseEnter:Ct,onMouseLeave:St,onPointerEnter:Ct,zIndex:_,open:$e,keepDom:Me,fresh:L,onClick:j,mask:y,motion:Ce,maskMotion:Se,onVisibleChanged:function(e){ze(!1),at(),null===p||void 0===p||p(e)},onPrepare:function(){return new Promise((function(e){xt(),je((function(){return e}))}))},forceRender:C,autoDestroy:te,getPopupContainer:k,align:ot,arrow:Ot,arrowPos:At,ready:qe,offsetX:Xe,offsetY:Je,offsetR:Ye,offsetB:Qe,onAlign:ht,stretch:M,targetWidth:gt/tt,targetHeight:yt/rt})))}));return t}(Lf);var fm={shiftX:64,adjustY:1},mm={adjustX:1,shiftY:!0},gm=[0,0],vm={left:{points:["cr","cl"],overflow:mm,offset:[-4,0],targetOffset:gm},right:{points:["cl","cr"],overflow:mm,offset:[4,0],targetOffset:gm},top:{points:["bc","tc"],overflow:fm,offset:[0,-4],targetOffset:gm},bottom:{points:["tc","bc"],overflow:fm,offset:[0,4],targetOffset:gm},topLeft:{points:["bl","tl"],overflow:fm,offset:[0,-4],targetOffset:gm},leftTop:{points:["tr","tl"],overflow:mm,offset:[-4,0],targetOffset:gm},topRight:{points:["br","tr"],overflow:fm,offset:[0,-4],targetOffset:gm},rightTop:{points:["tl","tr"],overflow:mm,offset:[4,0],targetOffset:gm},bottomRight:{points:["tr","br"],overflow:fm,offset:[0,4],targetOffset:gm},rightBottom:{points:["bl","br"],overflow:mm,offset:[4,0],targetOffset:gm},bottomLeft:{points:["tl","bl"],overflow:fm,offset:[0,4],targetOffset:gm},leftBottom:{points:["br","bl"],overflow:mm,offset:[-4,0],targetOffset:gm}};var bm=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],ym=function(e,t){var n=e.overlayClassName,r=e.trigger,o=void 0===r?["hover"]:r,a=e.mouseEnterDelay,i=void 0===a?0:a,s=e.mouseLeaveDelay,l=void 0===s?.1:s,u=e.overlayStyle,c=e.prefixCls,d=void 0===c?"rc-tooltip":c,h=e.children,p=e.onVisibleChange,f=e.afterVisibleChange,m=e.transitionName,g=e.animation,v=e.motion,b=e.placement,y=void 0===b?"right":b,w=e.align,x=void 0===w?{}:w,k=e.destroyTooltipOnHide,C=void 0!==k&&k,S=e.defaultVisible,E=e.getTooltipContainer,N=e.overlayInnerStyle,$=(e.arrowContent,e.overlay),T=e.id,A=e.showArrow,O=void 0===A||A,R=Z(e,bm),P=(0,I.useRef)(null);(0,I.useImperativeHandle)(t,(function(){return P.current}));var D=nt({},R);"visible"in e&&(D.popupVisible=e.visible);return I.createElement(pm,G({popupClassName:n,prefixCls:d,popup:function(){return I.createElement(Nf,{key:"content",prefixCls:d,id:T,overlayInnerStyle:N},$)},action:o,builtinPlacements:vm,popupPlacement:y,ref:P,popupAlign:x,getPopupContainer:E,onPopupVisibleChange:p,afterPopupVisibleChange:f,popupTransitionName:m,popupAnimation:g,popupMotion:v,defaultPopupVisible:S,autoDestroy:C,mouseLeaveDelay:l,popupStyle:u,mouseEnterDelay:i,arrow:O},D),h)};const wm=(0,I.forwardRef)(ym),xm=()=>({height:0,opacity:0}),km=e=>{const{scrollHeight:t}=e;return{height:t,opacity:1}},Cm=e=>({height:e?e.offsetHeight:0}),Sm=(e,t)=>!0===(null===t||void 0===t?void 0:t.deadline)||"height"===t.propertyName,Em=(e,t,n)=>void 0!==n?n:`${e}-${t}`,Nm=function(){return{motionName:`${arguments.length>0&&void 0!==arguments[0]?arguments[0]:M}-motion-collapse`,onAppearStart:xm,onEnterStart:xm,onAppearActive:km,onEnterActive:km,onLeaveStart:Cm,onLeaveActive:xm,onAppearEnd:Sm,onEnterEnd:Sm,onLeaveEnd:Sm,motionDeadline:500}};function Im(e){const{sizePopupArrow:t,borderRadiusXS:n,borderRadiusOuter:r}=e,o=t/2,a=o,i=1*r/Math.sqrt(2),s=o-r*(1-1/Math.sqrt(2)),l=o-n*(1/Math.sqrt(2)),u=r*(Math.sqrt(2)-1)+n*(1/Math.sqrt(2)),c=2*o-l,d=u,h=2*o-i,p=s,f=2*o-0,m=a,g=o*Math.sqrt(2)+r*(Math.sqrt(2)-2),v=r*(Math.sqrt(2)-1);return{arrowShadowWidth:g,arrowPath:`path('M 0 ${a} A ${r} ${r} 0 0 0 ${i} ${s} L ${l} ${u} A ${n} ${n} 0 0 1 ${c} ${d} L ${h} ${p} A ${r} ${r} 0 0 0 ${f} ${m} Z')`,arrowPolygon:`polygon(${v}px 100%, 50% ${v}px, ${2*o-v}px 100%, ${v}px 100%)`}}const $m=(e,t,n)=>{const{sizePopupArrow:r,arrowPolygon:o,arrowPath:a,arrowShadowWidth:i,borderRadiusXS:s,calc:l}=e;return{pointerEvents:"none",width:r,height:r,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:r,height:l(r).div(2).equal(),background:t,clipPath:{_multi_value_:!0,value:[o,a]},content:'""'},"&::after":{content:'""',position:"absolute",width:i,height:i,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${yn(s)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:n,zIndex:0,background:"transparent"}}};function Tm(e){const{contentRadius:t,limitVerticalRadius:n}=e,r=t>12?t+2:12;return{arrowOffsetHorizontal:r,arrowOffsetVertical:n?8:r}}function Am(e,t){return e?t:{}}function Om(e,t,n){const{componentCls:r,boxShadowPopoverArrow:o,arrowOffsetVertical:a,arrowOffsetHorizontal:i}=e,{arrowDistance:s=0,arrowPlacement:l={left:!0,right:!0,top:!0,bottom:!0}}=n||{};return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({[`${r}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},$m(e,t,o)),{"&:before":{background:t}})]},Am(!!l.top,{[[`&-placement-top > ${r}-arrow`,`&-placement-topLeft > ${r}-arrow`,`&-placement-topRight > ${r}-arrow`].join(",")]:{bottom:s,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":i,[`> ${r}-arrow`]:{left:{_skip_check_:!0,value:i}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${yn(i)})`,[`> ${r}-arrow`]:{right:{_skip_check_:!0,value:i}}}})),Am(!!l.bottom,{[[`&-placement-bottom > ${r}-arrow`,`&-placement-bottomLeft > ${r}-arrow`,`&-placement-bottomRight > ${r}-arrow`].join(",")]:{top:s,transform:"translateY(-100%)"},[`&-placement-bottom > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":i,[`> ${r}-arrow`]:{left:{_skip_check_:!0,value:i}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${yn(i)})`,[`> ${r}-arrow`]:{right:{_skip_check_:!0,value:i}}}})),Am(!!l.left,{[[`&-placement-left > ${r}-arrow`,`&-placement-leftTop > ${r}-arrow`,`&-placement-leftBottom > ${r}-arrow`].join(",")]:{right:{_skip_check_:!0,value:s},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${r}-arrow`]:{top:a},[`&-placement-leftBottom > ${r}-arrow`]:{bottom:a}})),Am(!!l.right,{[[`&-placement-right > ${r}-arrow`,`&-placement-rightTop > ${r}-arrow`,`&-placement-rightBottom > ${r}-arrow`].join(",")]:{left:{_skip_check_:!0,value:s},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${r}-arrow`]:{top:a},[`&-placement-rightBottom > ${r}-arrow`]:{bottom:a}}))}}const Rm={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},Pm={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},Dm=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function Fm(e){const{arrowWidth:t,autoAdjustOverflow:n,arrowPointAtCenter:r,offset:o,borderRadius:a,visibleFirst:i}=e,s=t/2,l={};return Object.keys(Rm).forEach((e=>{const u=r&&Pm[e]||Rm[e],c=Object.assign(Object.assign({},u),{offset:[0,0],dynamicInset:!0});switch(l[e]=c,Dm.has(e)&&(c.autoArrow=!1),e){case"top":case"topLeft":case"topRight":c.offset[1]=-s-o;break;case"bottom":case"bottomLeft":case"bottomRight":c.offset[1]=s+o;break;case"left":case"leftTop":case"leftBottom":c.offset[0]=-s-o;break;case"right":case"rightTop":case"rightBottom":c.offset[0]=s+o}const d=Tm({contentRadius:a,limitVerticalRadius:!0});if(r)switch(e){case"topLeft":case"bottomLeft":c.offset[0]=-d.arrowOffsetHorizontal-s;break;case"topRight":case"bottomRight":c.offset[0]=d.arrowOffsetHorizontal+s;break;case"leftTop":case"rightTop":c.offset[1]=2*-d.arrowOffsetHorizontal+s;break;case"leftBottom":case"rightBottom":c.offset[1]=2*d.arrowOffsetHorizontal-s}c.overflow=function(e,t,n,r){if(!1===r)return{adjustX:!1,adjustY:!1};const o=r&&"object"===typeof r?r:{},a={};switch(e){case"top":case"bottom":a.shiftX=2*t.arrowOffsetHorizontal+n,a.shiftY=!0,a.adjustY=!0;break;case"left":case"right":a.shiftY=2*t.arrowOffsetVertical+n,a.shiftX=!0,a.adjustX=!0}const i=Object.assign(Object.assign({},a),o);return i.shiftX||(i.adjustX=!0),i.shiftY||(i.adjustY=!0),i}(e,d,t,n),i&&(c.htmlRegion="visibleFirst")})),l}const _m=e=>({animationDuration:e,animationFillMode:"both"}),Mm=e=>({animationDuration:e,animationFillMode:"both"}),zm=function(e,t,n,r){const o=arguments.length>4&&void 0!==arguments[4]&&arguments[4]?"&":"";return{[`\n      ${o}${e}-enter,\n      ${o}${e}-appear\n    `]:Object.assign(Object.assign({},_m(r)),{animationPlayState:"paused"}),[`${o}${e}-leave`]:Object.assign(Object.assign({},Mm(r)),{animationPlayState:"paused"}),[`\n      ${o}${e}-enter${e}-enter-active,\n      ${o}${e}-appear${e}-appear-active\n    `]:{animationName:t,animationPlayState:"running"},[`${o}${e}-leave${e}-leave-active`]:{animationName:n,animationPlayState:"running",pointerEvents:"none"}}},Lm=new Hr("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Bm=new Hr("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),jm=new Hr("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Hm=new Hr("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),Vm=new Hr("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),Wm=new Hr("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),Gm={zoom:{inKeyframes:Lm,outKeyframes:Bm},"zoom-big":{inKeyframes:jm,outKeyframes:Hm},"zoom-big-fast":{inKeyframes:jm,outKeyframes:Hm},"zoom-left":{inKeyframes:new Hr("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),outKeyframes:new Hr("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}})},"zoom-right":{inKeyframes:new Hr("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),outKeyframes:new Hr("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}})},"zoom-up":{inKeyframes:Vm,outKeyframes:Wm},"zoom-down":{inKeyframes:new Hr("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),outKeyframes:new Hr("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}})}},Um=(e,t)=>{const{antCls:n}=e,r=`${n}-${t}`,{inKeyframes:o,outKeyframes:a}=Gm[t];return[zm(r,o,a,"zoom-big-fast"===t?e.motionDurationFast:e.motionDurationMid),{[`\n        ${r}-enter,\n        ${r}-appear\n      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${r}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},Km=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];function qm(e,t){return Km.reduce(((n,r)=>{const o=e[`${r}1`],a=e[`${r}3`],i=e[`${r}6`],s=e[`${r}7`];return Object.assign(Object.assign({},n),t(r,{lightColor:o,lightBorderColor:a,darkColor:i,textColor:s}))}),{})}const Xm=e=>{const{componentCls:t,tooltipMaxWidth:n,tooltipColor:r,tooltipBg:o,tooltipBorderRadius:a,zIndexPopup:i,controlHeight:s,boxShadowSecondary:l,paddingSM:u,paddingXS:c}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},_o(e)),{position:"absolute",zIndex:i,display:"block",width:"max-content",maxWidth:n,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":o,[`${t}-inner`]:{minWidth:"1em",minHeight:s,padding:`${yn(e.calc(u).div(2).equal())} ${yn(c)}`,color:r,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:o,borderRadius:a,boxShadow:l,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${t}-inner`]:{borderRadius:e.min(a,8)}},[`${t}-content`]:{position:"relative"}}),qm(e,((e,n)=>{let{darkColor:r}=n;return{[`&${t}-${e}`]:{[`${t}-inner`]:{backgroundColor:r},[`${t}-arrow`]:{"--antd-arrow-background-color":r}}}}))),{"&-rtl":{direction:"rtl"}})},Om(e,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},Jm=e=>Object.assign(Object.assign({zIndexPopup:e.zIndexPopupBase+70},Tm({contentRadius:e.borderRadius,limitVerticalRadius:!0})),Im(So(e,{borderRadiusOuter:Math.min(e.borderRadiusOuter,4)}))),Ym=function(e){const t=ha("Tooltip",(e=>{const{borderRadius:t,colorTextLightSolid:n,colorBgSpotlight:r}=e,o=So(e,{tooltipMaxWidth:250,tooltipColor:n,tooltipBorderRadius:t,tooltipBg:r});return[Xm(o),Um(e,"zoom-big-fast")]}),Jm,{resetStyle:!1,injectStyle:!(arguments.length>1&&void 0!==arguments[1])||arguments[1]});return t(e)},Qm=Km.map((e=>`${e}-inverse`));function Zm(e,t){const n=function(e){return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?Km.includes(e):[].concat(P(Qm),P(Km)).includes(e)}(t),r=F()({[`${e}-${t}`]:t&&n}),o={},a={};return t&&!n&&(o.background=t,a["--antd-arrow-background-color"]=t),{className:r,overlayStyle:o,arrowStyle:a}}const eg=e=>{const{prefixCls:t,className:n,placement:r="top",title:o,color:a,overlayInnerStyle:i}=e,{getPrefixCls:s}=I.useContext(B),l=s("tooltip",t),[u,c,d]=Ym(l),h=Zm(l,a),p=h.arrowStyle,f=Object.assign(Object.assign({},i),h.overlayStyle),m=F()(c,d,l,`${l}-pure`,`${l}-placement-${r}`,n,h.className);return u(I.createElement("div",{className:m,style:p},I.createElement("div",{className:`${l}-arrow`}),I.createElement(Nf,Object.assign({},e,{className:c,prefixCls:l,overlayInnerStyle:f}),o)))};var tg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const ng=I.forwardRef(((e,t)=>{var n,r;const{prefixCls:o,openClassName:a,getTooltipContainer:i,overlayClassName:s,color:l,overlayInnerStyle:u,children:c,afterOpenChange:d,afterVisibleChange:h,destroyTooltipOnHide:p,arrow:f=!0,title:m,overlay:g,builtinPlacements:v,arrowPointAtCenter:b=!1,autoAdjustOverflow:y=!0}=e,w=!!f,[,x]=ca(),{getPopupContainer:k,getPrefixCls:C,direction:S}=I.useContext(B),E=$h("Tooltip"),N=I.useRef(null),$=()=>{var e;null===(e=N.current)||void 0===e||e.forceAlign()};I.useImperativeHandle(t,(()=>{var e;return{forceAlign:$,forcePopupAlign:()=>{E.deprecated(!1,"forcePopupAlign","forceAlign"),$()},nativeElement:null===(e=N.current)||void 0===e?void 0:e.nativeElement}}));const[T,A]=so(!1,{value:null!==(n=e.open)&&void 0!==n?n:e.visible,defaultValue:null!==(r=e.defaultOpen)&&void 0!==r?r:e.defaultVisible}),O=!m&&!g&&0!==m,R=I.useMemo((()=>{var e,t;let n=b;return"object"===typeof f&&(n=null!==(t=null!==(e=f.pointAtCenter)&&void 0!==e?e:f.arrowPointAtCenter)&&void 0!==t?t:b),v||Fm({arrowPointAtCenter:n,autoAdjustOverflow:y,arrowWidth:w?x.sizePopupArrow:0,borderRadius:x.borderRadius,offset:x.marginXXS,visibleFirst:!0})}),[b,f,v,x]),P=I.useMemo((()=>0===m?m:g||m||""),[g,m]),D=I.createElement(nl,{space:!0},"function"===typeof P?P():P),{getPopupContainer:_,placement:M="top",mouseEnterDelay:z=.1,mouseLeaveDelay:L=.1,overlayStyle:j,rootClassName:H}=e,V=tg(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),W=C("tooltip",o),G=C(),U=e["data-popover-inject"];let K=T;"open"in e||"visible"in e||!O||(K=!1);const q=I.isValidElement(c)&&!Yl(c)?c:I.createElement("span",null,c),X=q.props,J=X.className&&"string"!==typeof X.className?X.className:F()(X.className,a||`${W}-open`),[Y,Q,Z]=Ym(W,!U),ee=Zm(W,l),te=ee.arrowStyle,ne=Object.assign(Object.assign({},u),ee.overlayStyle),re=F()(s,{[`${W}-rtl`]:"rtl"===S},ee.className,H,Q,Z),[oe,ae]=Fp("Tooltip",V.zIndex),ie=I.createElement(wm,Object.assign({},V,{zIndex:oe,showArrow:w,placement:M,mouseEnterDelay:z,mouseLeaveDelay:L,prefixCls:W,overlayClassName:re,overlayStyle:Object.assign(Object.assign({},te),j),getTooltipContainer:_||i||k,ref:N,builtinPlacements:R,overlay:D,visible:K,onVisibleChange:t=>{var n,r;A(!O&&t),O||(null===(n=e.onOpenChange)||void 0===n||n.call(e,t),null===(r=e.onVisibleChange)||void 0===r||r.call(e,t))},afterVisibleChange:null!==d&&void 0!==d?d:h,overlayInnerStyle:ne,arrowContent:I.createElement("span",{className:`${W}-arrow-content`}),motion:{motionName:Em(G,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!p}),K?Ql(q,{className:J}):q);return Y(I.createElement(Op.Provider,{value:ae},ie))})),rg=ng;rg._InternalPanelDoNotUseOrYouWillBeFired=eg;const og=rg;const ag={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};var ig=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:ag}))};const sg=I.forwardRef(ig),lg=e=>{const t={};return[1,2,3,4,5].forEach((n=>{t[`\n      h${n}&,\n      div&-h${n},\n      div&-h${n} > textarea,\n      h${n}\n    `]=((e,t,n,r)=>{const{titleMarginBottom:o,fontWeightStrong:a}=r;return{marginBottom:o,color:n,fontWeight:a,fontSize:e,lineHeight:t}})(e[`fontSizeHeading${n}`],e[`lineHeightHeading${n}`],e.colorTextHeading,e)})),t},ug=e=>{const{componentCls:t}=e;return{"a&, a":Object.assign(Object.assign({},Bo(e)),{[`&[disabled], &${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:e.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},cg=e=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:Ae[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:e.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),dg=e=>{const{componentCls:t,paddingSM:n}=e,r=n;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:e.calc(e.paddingSM).mul(-1).equal(),marginTop:e.calc(r).mul(-1).equal(),marginBottom:`calc(1em - ${yn(r)})`},[`${t}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:e.calc(e.marginXS).add(2).equal(),insetBlockEnd:e.marginXS,color:e.colorTextDescription,fontWeight:"normal",fontSize:e.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},hg=e=>({[`${e.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:e.colorSuccess}},[`${e.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),pg=e=>{const{componentCls:t,titleMarginTop:n}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorText,wordBreak:"break-word",lineHeight:e.lineHeight,[`&${t}-secondary`]:{color:e.colorTextDescription},[`&${t}-success`]:{color:e.colorSuccess},[`&${t}-warning`]:{color:e.colorWarning},[`&${t}-danger`]:{color:e.colorError,"a&:active, a&:focus":{color:e.colorErrorActive},"a&:hover":{color:e.colorErrorHover}},[`&${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},lg(e)),{[`\n      & + h1${t},\n      & + h2${t},\n      & + h3${t},\n      & + h4${t},\n      & + h5${t}\n      `]:{marginTop:n},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:n}}}),cg(e)),ug(e)),{[`\n        ${t}-expand,\n        ${t}-collapse,\n        ${t}-edit,\n        ${t}-copy\n      `]:Object.assign(Object.assign({},Bo(e)),{marginInlineStart:e.marginXXS})}),dg(e)),hg(e)),{"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),{"&-rtl":{direction:"rtl"}})}},fg=ha("Typography",(e=>[pg(e)]),(()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}))),mg=e=>{const{prefixCls:t,"aria-label":n,className:r,style:o,direction:a,maxLength:i,autoSize:s=!0,value:l,onSave:u,onCancel:c,onEnd:d,component:h,enterIcon:p=I.createElement(sg,null)}=e,f=I.useRef(null),m=I.useRef(!1),g=I.useRef(),[v,b]=I.useState(l);I.useEffect((()=>{b(l)}),[l]),I.useEffect((()=>{var e;if(null===(e=f.current)||void 0===e?void 0:e.resizableTextArea){const{textArea:e}=f.current.resizableTextArea;e.focus();const{length:t}=e.value;e.setSelectionRange(t,t)}}),[]);const y=()=>{u(v.trim())},[w,x,k]=fg(t),C=F()(t,`${t}-edit-content`,{[`${t}-rtl`]:"rtl"===a,[`${t}-${h}`]:!!h},r,x,k);return w(I.createElement("div",{className:C,style:o},I.createElement(kh,{ref:f,maxLength:i,value:v,onChange:e=>{let{target:t}=e;b(t.value.replace(/[\n\r]/g,""))},onKeyDown:e=>{let{keyCode:t}=e;m.current||(g.current=t)},onKeyUp:e=>{let{keyCode:t,ctrlKey:n,altKey:r,metaKey:o,shiftKey:a}=e;g.current!==t||m.current||n||r||o||a||(t===vp.ENTER?(y(),null===d||void 0===d||d()):t===vp.ESC&&c())},onCompositionStart:()=>{m.current=!0},onCompositionEnd:()=>{m.current=!1},onBlur:()=>{y()},"aria-label":n,rows:1,autoSize:s}),null!==p?Ql(p,{className:`${t}-edit-content-confirm`}):null))};var gg=n(270),vg=n.n(gg);var bg=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(kbe){a(kbe)}}function s(e){try{l(r.throw(e))}catch(kbe){a(kbe)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))};const yg=e=>{let{copyConfig:t,children:n}=e;const[r,o]=I.useState(!1),[a,i]=I.useState(!1),s=I.useRef(null),l=()=>{s.current&&clearTimeout(s.current)},u={};t.format&&(u.format=t.format),I.useEffect((()=>l),[]);const c=oo((e=>bg(void 0,void 0,void 0,(function*(){var r;null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),i(!0);try{const a="function"===typeof t.text?yield t.text():t.text;vg()(a||function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(void 0===e||null===e)?[]:Array.isArray(e)?e:[e]}(n,!0).join("")||"",u),i(!1),o(!0),l(),s.current=setTimeout((()=>{o(!1)}),3e3),null===(r=t.onCopy)||void 0===r||r.call(t,e)}catch(a){throw i(!1),a}}))));return{copied:r,copyLoading:a,onClick:c}};function wg(e,t){return I.useMemo((()=>{const n=!!e;return[n,Object.assign(Object.assign({},t),n&&"object"===typeof e?e:null)]}),[e])}const xg=e=>{const t=(0,I.useRef)();return(0,I.useEffect)((()=>{t.current=e})),t.current},kg=(e,t,n)=>(0,I.useMemo)((()=>!0===e?{title:null!==t&&void 0!==t?t:n}:(0,I.isValidElement)(e)?{title:e}:"object"===typeof e?Object.assign({title:null!==t&&void 0!==t?t:n},e):{title:e}),[e,t,n]);var Cg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const Sg=I.forwardRef(((e,t)=>{const{prefixCls:n,component:r="article",className:o,rootClassName:a,setContentRef:i,children:s,direction:l,style:u}=e,c=Cg(e,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:d,direction:h,typography:p}=I.useContext(B),f=null!==l&&void 0!==l?l:h,m=i?uo(t,i):t,g=d("typography",n);const[v,b,y]=fg(g),w=F()(g,null===p||void 0===p?void 0:p.className,{[`${g}-rtl`]:"rtl"===f},o,a,b,y),x=Object.assign(Object.assign({},null===p||void 0===p?void 0:p.style),u);return v(I.createElement(r,Object.assign({className:w,style:x,ref:m},c),s))}));const Eg=Sg;const Ng={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};var Ig=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:Ng}))};const $g=I.forwardRef(Ig);const Tg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};var Ag=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:Tg}))};const Og=I.forwardRef(Ag);function Rg(e){return!1===e?[!1,!1]:Array.isArray(e)?e:[e]}function Pg(e,t,n){return!0===e||void 0===e?t:e||n&&t}const Dg=e=>["string","number"].includes(typeof e),Fg=e=>{let{prefixCls:t,copied:n,locale:r,iconOnly:o,tooltips:a,icon:i,tabIndex:s,onCopy:l,loading:u}=e;const c=Rg(a),d=Rg(i),{copied:h,copy:p}=null!==r&&void 0!==r?r:{},f=n?h:p,m=Pg(c[n?1:0],f),g="string"===typeof m?m:f;return I.createElement(og,{title:m},I.createElement("button",{type:"button",className:F()(`${t}-copy`,{[`${t}-copy-success`]:n,[`${t}-copy-icon-only`]:o}),onClick:l,"aria-label":g,tabIndex:s},n?Pg(d[1],I.createElement($g,null),!0):Pg(d[0],u?I.createElement(Tc,null):I.createElement(Og,null),!0)))},_g=I.forwardRef(((e,t)=>{let{style:n,children:r}=e;const o=I.useRef(null);return I.useImperativeHandle(t,(()=>({isExceed:()=>{const e=o.current;return e.scrollHeight>e.clientHeight},getHeight:()=>o.current.clientHeight}))),I.createElement("span",{"aria-hidden":!0,ref:o,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},n)},r)}));function Mg(e,t){let n=0;const r=[];for(let o=0;o<e.length;o+=1){if(n===t)return r;const a=e[o],i=n+(Dg(a)?String(a).length:1);if(i>t){const e=t-n;return r.push(String(a).slice(0,e)),r}r.push(a),n=i}return e}const zg=0,Lg=4,Bg={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function jg(e){const{enableMeasure:t,width:n,text:r,children:o,rows:a,expanded:i,miscDeps:s,onEllipsis:l}=e,u=I.useMemo((()=>W(r)),[r]),c=I.useMemo((()=>(e=>e.reduce(((e,t)=>e+(Dg(t)?String(t).length:1)),0))(u)),[r]),d=I.useMemo((()=>o(u,!1)),[r]),[h,p]=I.useState(null),f=I.useRef(null),m=I.useRef(null),g=I.useRef(null),v=I.useRef(null),b=I.useRef(null),[y,w]=I.useState(!1),[x,k]=I.useState(zg),[C,S]=I.useState(0),[E,N]=I.useState(null);In((()=>{k(t&&n&&c?1:zg)}),[n,r,a,t,u]),In((()=>{var e,t,n,r;if(1===x){k(2);const e=m.current&&getComputedStyle(m.current).whiteSpace;N(e)}else if(2===x){const o=!!(null===(e=g.current)||void 0===e?void 0:e.isExceed());k(o?3:Lg),p(o?[0,c]:null),w(o);const i=(null===(t=g.current)||void 0===t?void 0:t.getHeight())||0,s=1===a?0:(null===(n=v.current)||void 0===n?void 0:n.getHeight())||0,u=(null===(r=b.current)||void 0===r?void 0:r.getHeight())||0,d=Math.max(i,s+u);S(d+1),l(o)}}),[x]);const $=h?Math.ceil((h[0]+h[1])/2):0;In((()=>{var e;const[t,n]=h||[0,0];if(t!==n){const r=((null===(e=f.current)||void 0===e?void 0:e.getHeight())||0)>C;let o=$;n-t===1&&(o=r?t:n),p(r?[t,o]:[o,n])}}),[h,$]);const T=I.useMemo((()=>{if(!t)return o(u,!1);if(3!==x||!h||h[0]!==h[1]){const e=o(u,!1);return[Lg,zg].includes(x)?e:I.createElement("span",{style:Object.assign(Object.assign({},Bg),{WebkitLineClamp:a})},e)}return o(i?u:Mg(u,h[0]),y)}),[i,x,h,u].concat(P(s))),A={width:n,margin:0,padding:0,whiteSpace:"nowrap"===E?"normal":"inherit"};return I.createElement(I.Fragment,null,T,2===x&&I.createElement(I.Fragment,null,I.createElement(_g,{style:Object.assign(Object.assign(Object.assign({},A),Bg),{WebkitLineClamp:a}),ref:g},d),I.createElement(_g,{style:Object.assign(Object.assign(Object.assign({},A),Bg),{WebkitLineClamp:a-1}),ref:v},d),I.createElement(_g,{style:Object.assign(Object.assign(Object.assign({},A),Bg),{WebkitLineClamp:1}),ref:b},o([],!0))),3===x&&h&&h[0]!==h[1]&&I.createElement(_g,{style:Object.assign(Object.assign({},A),{top:400}),ref:f},o(Mg(u,$),!0)),1===x&&I.createElement("span",{style:{whiteSpace:"inherit"},ref:m}))}const Hg=e=>{let{enableEllipsis:t,isEllipsis:n,children:r,tooltipProps:o}=e;return(null===o||void 0===o?void 0:o.title)&&t?I.createElement(og,Object.assign({open:!!n&&void 0},o),r):r};var Vg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const Wg=I.forwardRef(((e,t)=>{var n;const{prefixCls:r,className:o,style:a,type:i,disabled:s,children:l,ellipsis:u,editable:c,copyable:d,component:h,title:p}=e,f=Vg(e,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:m,direction:g}=I.useContext(B),[v]=Ef("Text"),b=I.useRef(null),y=I.useRef(null),w=m("typography",r),x=_(f,["mark","code","delete","underline","strong","keyboard","italic"]),[k,C]=wg(c),[S,E]=so(!1,{value:C.editing}),{triggerType:N=["icon"]}=C,$=e=>{var t;e&&(null===(t=C.onStart)||void 0===t||t.call(C)),E(e)},T=xg(S);In((()=>{var e;!S&&T&&(null===(e=y.current)||void 0===e||e.focus())}),[S]);const A=e=>{null===e||void 0===e||e.preventDefault(),$(!0)},O=e=>{var t;null===(t=C.onChange)||void 0===t||t.call(C,e),$(!1)},R=()=>{var e;null===(e=C.onCancel)||void 0===e||e.call(C),$(!1)},[P,D]=wg(d),{copied:M,copyLoading:z,onClick:L}=yg({copyConfig:D,children:l}),[j,H]=I.useState(!1),[V,G]=I.useState(!1),[U,K]=I.useState(!1),[q,X]=I.useState(!1),[J,Y]=I.useState(!0),[Q,Z]=wg(u,{expandable:!1,symbol:e=>e?null===v||void 0===v?void 0:v.collapse:null===v||void 0===v?void 0:v.expand}),[ee,te]=so(Z.defaultExpanded||!1,{value:Z.expanded}),ne=Q&&(!ee||"collapsible"===Z.expandable),{rows:re=1}=Z,oe=I.useMemo((()=>ne&&(void 0!==Z.suffix||Z.onEllipsis||Z.expandable||k||P)),[ne,Z,k,P]);In((()=>{Q&&!oe&&(H(Sf("webkitLineClamp")),G(Sf("textOverflow")))}),[oe,Q]);const[ae,ie]=I.useState(ne),se=I.useMemo((()=>!oe&&(1===re?V:j)),[oe,V,j]);In((()=>{ie(se&&ne)}),[se,ne]);const le=ne&&(ae?q:U),ue=ne&&1===re&&ae,ce=ne&&re>1&&ae,[de,he]=I.useState(0),pe=e=>{var t;K(e),U!==e&&(null===(t=Z.onEllipsis)||void 0===t||t.call(Z,e))};I.useEffect((()=>{const e=b.current;if(Q&&ae&&e){const t=function(e){const t=document.createElement("em");e.appendChild(t);const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return e.removeChild(t),n.left>r.left||r.right>n.right||n.top>r.top||r.bottom>n.bottom}(e);q!==t&&X(t)}}),[Q,ae,l,ce,J,de]),I.useEffect((()=>{const e=b.current;if("undefined"===typeof IntersectionObserver||!e||!ae||!ne)return;const t=new IntersectionObserver((()=>{Y(!!e.offsetParent)}));return t.observe(e),()=>{t.disconnect()}}),[ae,ne]);const fe=kg(Z.tooltip,C.text,l),me=I.useMemo((()=>{if(Q&&!ae)return[C.text,l,p,fe.title].find(Dg)}),[Q,ae,p,fe.title,le]);if(S)return I.createElement(mg,{value:null!==(n=C.text)&&void 0!==n?n:"string"===typeof l?l:"",onSave:O,onCancel:R,onEnd:C.onEnd,prefixCls:w,className:o,style:a,direction:g,component:h,maxLength:C.maxLength,autoSize:C.autoSize,enterIcon:C.enterIcon});const ge=()=>{const{expandable:e,symbol:t}=Z;return e?I.createElement("button",{type:"button",key:"expand",className:`${w}-${ee?"collapse":"expand"}`,onClick:e=>((e,t)=>{var n;te(t.expanded),null===(n=Z.onExpand)||void 0===n||n.call(Z,e,t)})(e,{expanded:!ee}),"aria-label":ee?v.collapse:null===v||void 0===v?void 0:v.expand},"function"===typeof t?t(ee):t):null},ve=()=>{if(!k)return;const{icon:e,tooltip:t,tabIndex:n}=C,r=W(t)[0]||(null===v||void 0===v?void 0:v.edit),o="string"===typeof r?r:"";return N.includes("icon")?I.createElement(og,{key:"edit",title:!1===t?"":r},I.createElement("button",{type:"button",ref:y,className:`${w}-edit`,onClick:A,"aria-label":o,tabIndex:n},e||I.createElement(kf,{role:"button"}))):null},be=e=>[e&&ge(),ve(),P?I.createElement(Fg,Object.assign({key:"copy"},D,{prefixCls:w,copied:M,locale:v,onCopy:L,loading:z,iconOnly:null===l||void 0===l})):null];return I.createElement(uh,{onResize:e=>{let{offsetWidth:t}=e;he(t)},disabled:!ne},(n=>I.createElement(Hg,{tooltipProps:fe,enableEllipsis:ne,isEllipsis:le},I.createElement(Eg,Object.assign({className:F()({[`${w}-${i}`]:i,[`${w}-disabled`]:s,[`${w}-ellipsis`]:Q,[`${w}-ellipsis-single-line`]:ue,[`${w}-ellipsis-multiple-line`]:ce},o),prefixCls:r,style:Object.assign(Object.assign({},a),{WebkitLineClamp:ce?re:void 0}),component:h,ref:uo(n,b,t),direction:g,onClick:N.includes("text")?A:void 0,"aria-label":null===me||void 0===me?void 0:me.toString(),title:p},x),I.createElement(jg,{enableMeasure:ne&&!ae,text:l,rows:re,width:de,onEllipsis:pe,expanded:ee,miscDeps:[M,ee,z,k,P]},((t,n)=>function(e,t){let{mark:n,code:r,underline:o,delete:a,strong:i,keyboard:s,italic:l}=e,u=t;function c(e,t){t&&(u=I.createElement(e,{},u))}return c("strong",i),c("u",o),c("del",a),c("code",r),c("mark",n),c("kbd",s),c("i",l),u}(e,I.createElement(I.Fragment,null,t.length>0&&n&&!ee&&me?I.createElement("span",{key:"show-content","aria-hidden":!0},t):t,(e=>[e&&!ee&&I.createElement("span",{"aria-hidden":!0,key:"ellipsis"},"..."),Z.suffix,be(e)])(n)))))))))})),Gg=Wg;var Ug=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const Kg=I.forwardRef(((e,t)=>{var{ellipsis:n,rel:r}=e,o=Ug(e,["ellipsis","rel"]);const a=Object.assign(Object.assign({},o),{rel:void 0===r&&"_blank"===o.target?"noopener noreferrer":r});return delete a.navigate,I.createElement(Gg,Object.assign({},a,{ref:t,ellipsis:!!n,component:"a"}))})),qg=Kg,Xg=I.forwardRef(((e,t)=>I.createElement(Gg,Object.assign({ref:t},e,{component:"div"}))));var Jg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const Yg=(e,t)=>{var{ellipsis:n}=e,r=Jg(e,["ellipsis"]);const o=I.useMemo((()=>n&&"object"===typeof n?_(n,["expandable","rows"]):n),[n]);return I.createElement(Gg,Object.assign({ref:t},r,{ellipsis:o,component:"span"}))},Qg=I.forwardRef(Yg);var Zg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const ev=[1,2,3,4,5],tv=I.forwardRef(((e,t)=>{const{level:n=1}=e,r=Zg(e,["level"]);const o=ev.includes(n)?`h${n}`:"h1";return I.createElement(Gg,Object.assign({ref:t},r,{component:o}))})),nv=Eg;nv.Text=Qg,nv.Link=qg,nv.Title=tv,nv.Paragraph=Xg;const rv=nv;var ov={},av="rc-table-internal-hook";function iv(e){var t=I.createContext(void 0);return{Context:t,Provider:function(e){var n=e.value,r=e.children,o=I.useRef(n);o.current=n;var a=X(I.useState((function(){return{getValue:function(){return o.current},listeners:new Set}})),1)[0];return In((function(){(0,ru.unstable_batchedUpdates)((function(){a.listeners.forEach((function(e){e(n)}))}))}),[n]),I.createElement(t.Provider,{value:a},r)},defaultValue:e}}function sv(e,t){var n=oo("function"===typeof t?t:function(e){if(void 0===t)return e;if(!Array.isArray(t))return e[t];var n={};return t.forEach((function(t){n[t]=e[t]})),n}),r=I.useContext(null===e||void 0===e?void 0:e.Context),o=r||{},a=o.listeners,i=o.getValue,s=I.useRef();s.current=n(r?i():null===e||void 0===e?void 0:e.defaultValue);var l=X(I.useState({}),2)[1];return In((function(){if(r)return a.add(e),function(){a.delete(e)};function e(e){var t=n(e);Kt(s.current,t,!0)||l({})}}),[r]),s.current}function lv(){var e=I.createContext(null);function t(){return I.useContext(e)}return{makeImmutable:function(n,r){var o=ho(n),a=function(a,i){var s=o?{ref:i}:{},l=I.useRef(0),u=I.useRef(a);return null!==t()?I.createElement(n,G({},a,s)):(r&&!r(u.current,a)||(l.current+=1),u.current=a,I.createElement(e.Provider,{value:l.current},I.createElement(n,G({},a,s))))};return o?I.forwardRef(a):a},responseImmutable:function(e,n){var r=ho(e),o=function(n,o){var a=r?{ref:o}:{};return t(),I.createElement(e,G({},n,a))};return r?I.memo(I.forwardRef(o),n):I.memo(o,n)},useImmutableMark:t}}var uv=lv(),cv=(uv.makeImmutable,uv.responseImmutable,uv.useImmutableMark,lv()),dv=cv.makeImmutable,hv=cv.responseImmutable,pv=cv.useImmutableMark;const fv=iv();const mv=I.createContext({renderWithProps:!1});function gv(e){var t=[],n={};return e.forEach((function(e){for(var r,o=e||{},a=o.key,i=o.dataIndex,s=a||(r=i,void 0===r||null===r?[]:Array.isArray(r)?r:[r]).join("-")||"RC_TABLE_KEY";n[s];)s="".concat(s,"_next");n[s]=!0,t.push(s)})),t}function vv(e){return null!==e&&void 0!==e}function bv(e,t,n,r,o,a){var i=I.useContext(mv),s=Ut((function(){if(vv(r))return[r];var a=null===t||void 0===t||""===t?[]:Array.isArray(t)?t:[t],s=mo(e,a),l=s,u=void 0;if(o){var c=o(s,e,n);!function(e){return e&&"object"===J(e)&&!Array.isArray(e)&&!I.isValidElement(e)}(c)?l=c:(l=c.children,u=c.props,i.renderWithProps=!0)}return[l,u]}),[pv(),e,r,t,o,n],(function(e,t){if(a){var n=X(e,2)[1],r=X(t,2)[1];return a(r,n)}return!!i.renderWithProps||!Kt(e,t,!0)}));return s}function yv(e){var t,n,r,o,a,i,s,l;var u=e.component,c=e.children,d=e.ellipsis,h=e.scope,p=e.prefixCls,f=e.className,m=e.align,g=e.record,v=e.render,b=e.dataIndex,y=e.renderIndex,w=e.shouldCellUpdate,x=e.index,k=e.rowType,C=e.colSpan,S=e.rowSpan,E=e.fixLeft,N=e.fixRight,$=e.firstFixLeft,T=e.lastFixLeft,A=e.firstFixRight,O=e.lastFixRight,R=e.appendNode,P=e.additionalProps,D=void 0===P?{}:P,_=e.isSticky,M="".concat(p,"-cell"),z=sv(fv,["supportSticky","allColumnsFixedLeft","rowHoverable"]),L=z.supportSticky,B=z.allColumnsFixedLeft,j=z.rowHoverable,H=X(bv(g,b,y,c,v,w),2),V=H[0],W=H[1],U={},K="number"===typeof E&&L,q="number"===typeof N&&L;K&&(U.position="sticky",U.left=E),q&&(U.position="sticky",U.right=N);var Y=null!==(t=null!==(n=null!==(r=null===W||void 0===W?void 0:W.colSpan)&&void 0!==r?r:D.colSpan)&&void 0!==n?n:C)&&void 0!==t?t:1,Z=null!==(o=null!==(a=null!==(i=null===W||void 0===W?void 0:W.rowSpan)&&void 0!==i?i:D.rowSpan)&&void 0!==a?a:S)&&void 0!==o?o:1,ee=function(e,t){return sv(fv,(function(n){var r,o,a,i;return[(r=e,o=t||1,a=n.hoverStartRow,i=n.hoverEndRow,r<=i&&r+o-1>=a),n.onHover]}))}(x,Z),te=X(ee,2),ne=te[0],re=te[1],oe=oo((function(e){var t;g&&re(x,x+Z-1),null===D||void 0===D||null===(t=D.onMouseEnter)||void 0===t||t.call(D,e)})),ae=oo((function(e){var t;g&&re(-1,-1),null===D||void 0===D||null===(t=D.onMouseLeave)||void 0===t||t.call(D,e)}));if(0===Y||0===Z)return null;var ie=null!==(s=D.title)&&void 0!==s?s:function(e){var t,n=e.ellipsis,r=e.rowType,o=e.children,a=!0===n?{showTitle:!0}:n;return a&&(a.showTitle||"header"===r)&&("string"===typeof o||"number"===typeof o?t=o.toString():I.isValidElement(o)&&"string"===typeof o.props.children&&(t=o.props.children)),t}({rowType:k,ellipsis:d,children:V}),se=F()(M,f,(Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(l={},"".concat(M,"-fix-left"),K&&L),"".concat(M,"-fix-left-first"),$&&L),"".concat(M,"-fix-left-last"),T&&L),"".concat(M,"-fix-left-all"),T&&B&&L),"".concat(M,"-fix-right"),q&&L),"".concat(M,"-fix-right-first"),A&&L),"".concat(M,"-fix-right-last"),O&&L),"".concat(M,"-ellipsis"),d),"".concat(M,"-with-append"),R),"".concat(M,"-fix-sticky"),(K||q)&&_&&L),Q(l,"".concat(M,"-row-hover"),!W&&ne)),D.className,null===W||void 0===W?void 0:W.className),le={};m&&(le.textAlign=m);var ue=nt(nt(nt(nt({},U),D.style),le),null===W||void 0===W?void 0:W.style),ce=V;return"object"!==J(ce)||Array.isArray(ce)||I.isValidElement(ce)||(ce=null),d&&(T||A)&&(ce=I.createElement("span",{className:"".concat(M,"-content")},ce)),I.createElement(u,G({},W,D,{className:se,style:ue,title:ie,scope:h,onMouseEnter:j?oe:void 0,onMouseLeave:j?ae:void 0,colSpan:1!==Y?Y:null,rowSpan:1!==Z?Z:null}),R,ce)}const wv=I.memo(yv);function xv(e,t,n,r,o){var a,i,s=n[e]||{},l=n[t]||{};"left"===s.fixed?a=r.left["rtl"===o?t:e]:"right"===l.fixed&&(i=r.right["rtl"===o?e:t]);var u=!1,c=!1,d=!1,h=!1,p=n[t+1],f=n[e-1],m=p&&!p.fixed||f&&!f.fixed||n.every((function(e){return"left"===e.fixed}));if("rtl"===o){if(void 0!==a)h=!(f&&"left"===f.fixed)&&m;else if(void 0!==i){d=!(p&&"right"===p.fixed)&&m}}else if(void 0!==a){u=!(p&&"left"===p.fixed)&&m}else if(void 0!==i){c=!(f&&"right"===f.fixed)&&m}return{fixLeft:a,fixRight:i,lastFixLeft:u,firstFixRight:c,lastFixRight:d,firstFixLeft:h,isSticky:r.isSticky}}const kv=I.createContext({});var Cv=["children"];function Sv(e){return e.children}Sv.Row=function(e){var t=e.children,n=Z(e,Cv);return I.createElement("tr",n,t)},Sv.Cell=function(e){var t=e.className,n=e.index,r=e.children,o=e.colSpan,a=void 0===o?1:o,i=e.rowSpan,s=e.align,l=sv(fv,["prefixCls","direction"]),u=l.prefixCls,c=l.direction,d=I.useContext(kv),h=d.scrollColumnIndex,p=d.stickyOffsets,f=n+a-1+1===h?a+1:a,m=xv(n,n+f-1,d.flattenColumns,p,c);return I.createElement(wv,G({className:t,index:n,component:"td",prefixCls:u,record:null,dataIndex:null,align:s,colSpan:f,rowSpan:i,render:function(){return r}},m))};const Ev=Sv;const Nv=hv((function(e){var t=e.children,n=e.stickyOffsets,r=e.flattenColumns,o=sv(fv,"prefixCls"),a=r.length-1,i=r[a],s=I.useMemo((function(){return{stickyOffsets:n,flattenColumns:r,scrollColumnIndex:null!==i&&void 0!==i&&i.scrollbar?a:null}}),[i,r,a,n]);return I.createElement(kv.Provider,{value:s},I.createElement("tfoot",{className:"".concat(o,"-summary")},t))}));var Iv=Ev;function $v(e,t,n,r,o,a,i){e.push({record:t,indent:n,index:i});var s=a(t),l=null===o||void 0===o?void 0:o.has(s);if(t&&Array.isArray(t[r])&&l)for(var u=0;u<t[r].length;u+=1)$v(e,t[r][u],n+1,r,o,a,u)}function Tv(e,t,n,r){var o=I.useMemo((function(){if(null!==n&&void 0!==n&&n.size){for(var o=[],a=0;a<(null===e||void 0===e?void 0:e.length);a+=1){$v(o,e[a],0,t,n,r,a)}return o}return null===e||void 0===e?void 0:e.map((function(e,t){return{record:e,indent:0,index:t}}))}),[e,t,n,r]);return o}function Av(e,t,n,r){var o,a=sv(fv,["prefixCls","fixedInfoList","flattenColumns","expandableType","expandRowByClick","onTriggerExpand","rowClassName","expandedRowClassName","indentSize","expandIcon","expandedRowRender","expandIconColumnIndex","expandedKeys","childrenColumnName","rowExpandable","onRow"]),i=a.flattenColumns,s=a.expandableType,l=a.expandedKeys,u=a.childrenColumnName,c=a.onTriggerExpand,d=a.rowExpandable,h=a.onRow,p=a.expandRowByClick,f=a.rowClassName,m="nest"===s,g="row"===s&&(!d||d(e)),v=g||m,b=l&&l.has(t),y=u&&e&&e[u],w=oo(c),x=null===h||void 0===h?void 0:h(e,n),k=null===x||void 0===x?void 0:x.onClick;"string"===typeof f?o=f:"function"===typeof f&&(o=f(e,n,r));var C=gv(i);return nt(nt({},a),{},{columnsKey:C,nestExpandable:m,expanded:b,hasNestChildren:y,record:e,onTriggerExpand:w,rowSupportExpand:g,expandable:v,rowProps:nt(nt({},x),{},{className:F()(o,null===x||void 0===x?void 0:x.className),onClick:function(t){p&&v&&c(e,t);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];null===k||void 0===k||k.apply(void 0,[t].concat(r))}})})}const Ov=function(e){var t=e.prefixCls,n=e.children,r=e.component,o=e.cellComponent,a=e.className,i=e.expanded,s=e.colSpan,l=e.isEmpty,u=sv(fv,["scrollbarSize","fixHeader","fixColumn","componentWidth","horizonScroll"]),c=u.scrollbarSize,d=u.fixHeader,h=u.fixColumn,p=u.componentWidth,f=u.horizonScroll,m=n;return(l?f&&p:h)&&(m=I.createElement("div",{style:{width:p-(d&&!l?c:0),position:"sticky",left:0,overflow:"hidden"},className:"".concat(t,"-expanded-row-fixed")},m)),I.createElement(r,{className:a,style:{display:i?null:"none"}},I.createElement(wv,{component:o,prefixCls:t,colSpan:s},m))};function Rv(e,t,n,r,o){var a,i,s=e.record,l=e.prefixCls,u=e.columnsKey,c=e.fixedInfoList,d=e.expandIconColumnIndex,h=e.nestExpandable,p=e.indentSize,f=e.expandIcon,m=e.expanded,g=e.hasNestChildren,v=e.onTriggerExpand,b=u[n],y=c[n];return n===(d||0)&&h&&(a=I.createElement(I.Fragment,null,I.createElement("span",{style:{paddingLeft:"".concat(p*r,"px")},className:"".concat(l,"-row-indent indent-level-").concat(r)}),f({prefixCls:l,expanded:m,expandable:g,record:s,onExpand:v}))),t.onCell&&(i=t.onCell(s,o)),{key:b,fixedInfo:y,appendCellNode:a,additionalCellProps:i||{}}}const Pv=hv((function(e){var t=e.className,n=e.style,r=e.record,o=e.index,a=e.renderIndex,i=e.rowKey,s=e.indent,l=void 0===s?0:s,u=e.rowComponent,c=e.cellComponent,d=e.scopeCellComponent,h=Av(r,i,o,l),p=h.prefixCls,f=h.flattenColumns,m=h.expandedRowClassName,g=h.expandedRowRender,v=h.rowProps,b=h.expanded,y=h.rowSupportExpand,w=I.useRef(!1);w.current||(w.current=b);var x,k=m&&m(r,o,l),C=I.createElement(u,G({},v,{"data-row-key":i,className:F()(t,"".concat(p,"-row"),"".concat(p,"-row-level-").concat(l),null===v||void 0===v?void 0:v.className,l>=1?k:""),style:nt(nt({},n),null===v||void 0===v?void 0:v.style)}),f.map((function(e,t){var n=e.render,i=e.dataIndex,s=e.className,u=Rv(h,e,t,l,o),f=u.key,m=u.fixedInfo,g=u.appendCellNode,v=u.additionalCellProps;return I.createElement(wv,G({className:s,ellipsis:e.ellipsis,align:e.align,scope:e.rowScope,component:e.rowScope?d:c,prefixCls:p,key:f,record:r,index:o,renderIndex:a,dataIndex:i,render:n,shouldCellUpdate:e.shouldCellUpdate},m,{appendNode:g,additionalProps:v}))})));if(y&&(w.current||b)){var S=g(r,o,l+1,b);x=I.createElement(Ov,{expanded:b,className:F()("".concat(p,"-expanded-row"),"".concat(p,"-expanded-row-level-").concat(l+1),k),prefixCls:p,component:u,cellComponent:c,colSpan:f.length,isEmpty:!1},S)}return I.createElement(I.Fragment,null,C,x)}));function Dv(e){var t=e.columnKey,n=e.onColumnResize,r=I.useRef();return I.useEffect((function(){r.current&&n(t,r.current.offsetWidth)}),[]),I.createElement(uh,{data:t},I.createElement("td",{ref:r,style:{padding:0,border:0,height:0}},I.createElement("div",{style:{height:0,overflow:"hidden"}},"\xa0")))}function Fv(e){var t=e.prefixCls,n=e.columnsKey,r=e.onColumnResize;return I.createElement("tr",{"aria-hidden":"true",className:"".concat(t,"-measure-row"),style:{height:0,fontSize:0}},I.createElement(uh.Collection,{onBatchResize:function(e){e.forEach((function(e){var t=e.data,n=e.size;r(t,n.offsetWidth)}))}},n.map((function(e){return I.createElement(Dv,{key:e,columnKey:e,onColumnResize:r})}))))}const _v=hv((function(e){var t,n=e.data,r=e.measureColumnWidth,o=sv(fv,["prefixCls","getComponent","onColumnResize","flattenColumns","getRowKey","expandedKeys","childrenColumnName","emptyNode"]),a=o.prefixCls,i=o.getComponent,s=o.onColumnResize,l=o.flattenColumns,u=o.getRowKey,c=o.expandedKeys,d=o.childrenColumnName,h=o.emptyNode,p=Tv(n,d,c,u),f=I.useRef({renderWithProps:!1}),m=i(["body","wrapper"],"tbody"),g=i(["body","row"],"tr"),v=i(["body","cell"],"td"),b=i(["body","cell"],"th");t=n.length?p.map((function(e,t){var n=e.record,r=e.indent,o=e.index,a=u(n,t);return I.createElement(Pv,{key:a,rowKey:a,record:n,index:t,renderIndex:o,rowComponent:g,cellComponent:v,scopeCellComponent:b,getRowKey:u,indent:r})})):I.createElement(Ov,{expanded:!0,className:"".concat(a,"-placeholder"),prefixCls:a,component:g,cellComponent:v,colSpan:l.length,isEmpty:!0},h);var y=gv(l);return I.createElement(mv.Provider,{value:f.current},I.createElement(m,{className:"".concat(a,"-tbody")},r&&I.createElement(Fv,{prefixCls:a,columnsKey:y,onColumnResize:s}),t))}));var Mv=["expandable"],zv="RC_TABLE_INTERNAL_COL_DEFINE";var Lv=["columnType"];const Bv=function(e){for(var t=e.colWidths,n=e.columns,r=e.columCount,o=sv(fv,["tableLayout"]).tableLayout,a=[],i=!1,s=(r||n.length)-1;s>=0;s-=1){var l=t[s],u=n&&n[s],c=void 0,d=void 0;if(u&&(c=u[zv],"auto"===o&&(d=u.minWidth)),l||d||c||i){var h=c||{},p=(h.columnType,Z(h,Lv));a.unshift(I.createElement("col",G({key:s,style:{width:l,minWidth:d}},p))),i=!0}}return I.createElement("colgroup",null,a)};var jv=["className","noData","columns","flattenColumns","colWidths","columCount","stickyOffsets","direction","fixHeader","stickyTopOffset","stickyBottomOffset","stickyClassName","onScroll","maxContentScroll","children"];var Hv=I.forwardRef((function(e,t){var n=e.className,r=e.noData,o=e.columns,a=e.flattenColumns,i=e.colWidths,s=e.columCount,l=e.stickyOffsets,u=e.direction,c=e.fixHeader,d=e.stickyTopOffset,h=e.stickyBottomOffset,p=e.stickyClassName,f=e.onScroll,m=e.maxContentScroll,g=e.children,v=Z(e,jv),b=sv(fv,["prefixCls","scrollbarSize","isSticky","getComponent"]),y=b.prefixCls,w=b.scrollbarSize,x=b.isSticky,k=(0,b.getComponent)(["header","table"],"table"),C=x&&!c?0:w,S=I.useRef(null),E=I.useCallback((function(e){lo(t,e),lo(S,e)}),[]);I.useEffect((function(){var e;function t(e){var t=e,n=t.currentTarget,r=t.deltaX;r&&(f({currentTarget:n,scrollLeft:n.scrollLeft+r}),e.preventDefault())}return null===(e=S.current)||void 0===e||e.addEventListener("wheel",t,{passive:!1}),function(){var e;null===(e=S.current)||void 0===e||e.removeEventListener("wheel",t)}}),[]);var N=I.useMemo((function(){return a.every((function(e){return e.width}))}),[a]),$=a[a.length-1],T={fixed:$?$.fixed:null,scrollbar:!0,onHeaderCell:function(){return{className:"".concat(y,"-cell-scrollbar")}}},A=(0,I.useMemo)((function(){return C?[].concat(P(o),[T]):o}),[C,o]),O=(0,I.useMemo)((function(){return C?[].concat(P(a),[T]):a}),[C,a]),R=(0,I.useMemo)((function(){var e=l.right,t=l.left;return nt(nt({},l),{},{left:"rtl"===u?[].concat(P(t.map((function(e){return e+C}))),[0]):t,right:"rtl"===u?e:[].concat(P(e.map((function(e){return e+C}))),[0]),isSticky:x})}),[C,l,x]),D=function(e,t){return(0,I.useMemo)((function(){for(var n=[],r=0;r<t;r+=1){var o=e[r];if(void 0===o)return null;n[r]=o}return n}),[e.join("_"),t])}(i,s);return I.createElement("div",{style:nt({overflow:"hidden"},x?{top:d,bottom:h}:{}),ref:E,className:F()(n,Q({},p,!!p))},I.createElement(k,{style:{tableLayout:"fixed",visibility:r||D?null:"hidden"}},(!r||!m||N)&&I.createElement(Bv,{colWidths:D?[].concat(P(D),[C]):[],columCount:s+1,columns:O}),g(nt(nt({},v),{},{stickyOffsets:R,columns:A,flattenColumns:O}))))}));const Vv=I.memo(Hv);const Wv=function(e){var t,n=e.cells,r=e.stickyOffsets,o=e.flattenColumns,a=e.rowComponent,i=e.cellComponent,s=e.onHeaderRow,l=e.index,u=sv(fv,["prefixCls","direction"]),c=u.prefixCls,d=u.direction;s&&(t=s(n.map((function(e){return e.column})),l));var h=gv(n.map((function(e){return e.column})));return I.createElement(a,t,n.map((function(e,t){var n,a=e.column,s=xv(e.colStart,e.colEnd,o,r,d);return a&&a.onHeaderCell&&(n=e.column.onHeaderCell(a)),I.createElement(wv,G({},e,{scope:a.title?e.colSpan>1?"colgroup":"col":null,ellipsis:a.ellipsis,align:a.align,component:i,prefixCls:c,key:h[t]},s,{additionalProps:n,rowType:"header"}))})))};const Gv=hv((function(e){var t=e.stickyOffsets,n=e.columns,r=e.flattenColumns,o=e.onHeaderRow,a=sv(fv,["prefixCls","getComponent"]),i=a.prefixCls,s=a.getComponent,l=I.useMemo((function(){return function(e){var t=[];!function e(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t[o]=t[o]||[];var a=r,i=n.filter(Boolean).map((function(n){var r={key:n.key,className:n.className||"",children:n.title,column:n,colStart:a},i=1,s=n.children;return s&&s.length>0&&(i=e(s,a,o+1).reduce((function(e,t){return e+t}),0),r.hasSubColumns=!0),"colSpan"in n&&(i=n.colSpan),"rowSpan"in n&&(r.rowSpan=n.rowSpan),r.colSpan=i,r.colEnd=r.colStart+i-1,t[o].push(r),a+=i,i}));return i}(e,0);for(var n=t.length,r=function(e){t[e].forEach((function(t){"rowSpan"in t||t.hasSubColumns||(t.rowSpan=n-e)}))},o=0;o<n;o+=1)r(o);return t}(n)}),[n]),u=s(["header","wrapper"],"thead"),c=s(["header","row"],"tr"),d=s(["header","cell"],"th");return I.createElement(u,{className:"".concat(i,"-thead")},l.map((function(e,n){return I.createElement(Wv,{key:n,flattenColumns:r,cells:e,stickyOffsets:t,rowComponent:c,cellComponent:d,onHeaderRow:o,index:n})})))}));function Uv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"number"===typeof t?t:t.endsWith("%")?e*parseFloat(t)/100:null}var Kv=["children"],qv=["fixed"];function Xv(e){return W(e).filter((function(e){return I.isValidElement(e)})).map((function(e){var t=e.key,n=e.props,r=n.children,o=nt({key:t},Z(n,Kv));return r&&(o.children=Xv(r)),o}))}function Jv(e){return e.filter((function(e){return e&&"object"===J(e)&&!e.hidden})).map((function(e){var t=e.children;return t&&t.length>0?nt(nt({},e),{},{children:Jv(t)}):e}))}function Yv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key";return e.filter((function(e){return e&&"object"===J(e)})).reduce((function(e,n,r){var o=n.fixed,a=!0===o?"left":o,i="".concat(t,"-").concat(r),s=n.children;return s&&s.length>0?[].concat(P(e),P(Yv(s,i).map((function(e){return nt({fixed:a},e)})))):[].concat(P(e),[nt(nt({key:i},n),{},{fixed:a})])}),[])}const Qv=function(e,t){var n=e.prefixCls,r=e.columns,o=e.children,a=e.expandable,i=e.expandedKeys,s=e.columnTitle,l=e.getRowKey,u=e.onTriggerExpand,c=e.expandIcon,d=e.rowExpandable,h=e.expandIconColumnIndex,p=e.direction,f=e.expandRowByClick,m=e.columnWidth,g=e.fixed,v=e.scrollWidth,b=e.clientWidth,y=I.useMemo((function(){return Jv((r||Xv(o)||[]).slice())}),[r,o]),w=I.useMemo((function(){if(a){var e=y.slice();if(!e.includes(ov)){var t=h||0;t>=0&&e.splice(t,0,ov)}0;var r=e.indexOf(ov);e=e.filter((function(e,t){return e!==ov||t===r}));var o,p=y[r];o="left"!==g&&!g||h?"right"!==g&&!g||h!==y.length?p?p.fixed:null:"right":"left";var v=Q(Q(Q(Q(Q(Q({},zv,{className:"".concat(n,"-expand-icon-col"),columnType:"EXPAND_COLUMN"}),"title",s),"fixed",o),"className","".concat(n,"-row-expand-icon-cell")),"width",m),"render",(function(e,t,r){var o=l(t,r),a=i.has(o),s=!d||d(t),h=c({prefixCls:n,expanded:a,expandable:s,record:t,onExpand:u});return f?I.createElement("span",{onClick:function(e){return e.stopPropagation()}},h):h}));return e.map((function(e){return e===ov?v:e}))}return y.filter((function(e){return e!==ov}))}),[a,y,l,i,c,p]),x=I.useMemo((function(){var e=w;return t&&(e=t(e)),e.length||(e=[{render:function(){return null}}]),e}),[t,w,p]),k=I.useMemo((function(){return"rtl"===p?function(e){return e.map((function(e){var t=e.fixed,n=t;return"left"===t?n="right":"right"===t&&(n="left"),nt({fixed:n},Z(e,qv))}))}(Yv(x)):Yv(x)}),[x,p,v]),C=I.useMemo((function(){for(var e=-1,t=k.length-1;t>=0;t-=1){var n=k[t].fixed;if("left"===n||!0===n){e=t;break}}if(e>=0)for(var r=0;r<=e;r+=1){var o=k[r].fixed;if("left"!==o&&!0!==o)return!0}var a=k.findIndex((function(e){return"right"===e.fixed}));if(a>=0)for(var i=a;i<k.length;i+=1){if("right"!==k[i].fixed)return!0}return!1}),[k]),S=function(e,t,n){return I.useMemo((function(){if(t&&t>0){var r=0,o=0;e.forEach((function(e){var n=Uv(t,e.width);n?r+=n:o+=1}));var a=Math.max(t,n),i=Math.max(a-r,o),s=o,l=i/o,u=0,c=e.map((function(e){var n=nt({},e),r=Uv(t,n.width);if(r)n.width=r;else{var o=Math.floor(l);n.width=1===s?i:o,i-=o,s-=1}return u+=n.width,n}));if(u<a){var d=a/u;i=a,c.forEach((function(e,t){var n=Math.floor(e.width*d);e.width=t===c.length-1?i:n,i-=n}))}return[c,Math.max(u,a)]}return[e,t]}),[e,t,n])}(k,v,b),E=X(S,2),N=E[0],$=E[1];return[x,N,$,C]};function Zv(e){var t=e.prefixCls,n=e.record,r=e.onExpand,o=e.expanded,a=e.expandable,i="".concat(t,"-row-expand-icon");if(!a)return I.createElement("span",{className:F()(i,"".concat(t,"-row-spaced"))});return I.createElement("span",{className:F()(i,Q(Q({},"".concat(t,"-row-expanded"),o),"".concat(t,"-row-collapsed"),!o)),onClick:function(e){r(n,e),e.stopPropagation()}})}function eb(e,t,n){var r=function(e){var t,n=e.expandable,r=Z(e,Mv);return!1===(t="expandable"in e?nt(nt({},r),n):r).showExpandColumn&&(t.expandIconColumnIndex=-1),t}(e),o=r.expandIcon,a=r.expandedRowKeys,i=r.defaultExpandedRowKeys,s=r.defaultExpandAllRows,l=r.expandedRowRender,u=r.onExpand,c=r.onExpandedRowsChange,d=o||Zv,h=r.childrenColumnName||"children",p=I.useMemo((function(){return l?"row":!!(e.expandable&&e.internalHooks===av&&e.expandable.__PARENT_RENDER_ICON__||t.some((function(e){return e&&"object"===J(e)&&e[h]})))&&"nest"}),[!!l,t]),f=I.useState((function(){return i||(s?function(e,t,n){var r=[];return function e(o){(o||[]).forEach((function(o,a){r.push(t(o,a)),e(o[n])}))}(e),r}(t,n,h):[])})),m=X(f,2),g=m[0],v=m[1],b=I.useMemo((function(){return new Set(a||g||[])}),[a,g]),y=I.useCallback((function(e){var r,o=n(e,t.indexOf(e)),a=b.has(o);a?(b.delete(o),r=P(b)):r=[].concat(P(b),[o]),v(r),u&&u(!a,e),c&&c(r)}),[n,b,t,u,c]);return[r,p,b,d,h,y]}function tb(e){var t=(0,I.useRef)(e),n=X((0,I.useState)({}),2)[1],r=(0,I.useRef)(null),o=(0,I.useRef)([]);return(0,I.useEffect)((function(){return function(){r.current=null}}),[]),[t.current,function(e){o.current.push(e);var a=Promise.resolve();r.current=a,a.then((function(){if(r.current===a){var e=o.current,i=t.current;o.current=[],e.forEach((function(e){t.current=e(t.current)})),r.current=null,i!==t.current&&n({})}}))}]}var nb=rt()?window:null;const rb=function(e,t,n){var r=(0,I.useMemo)((function(){var r=t.length,o=function(n,r,o){for(var a=[],i=0,s=n;s!==r;s+=o)a.push(i),t[s].fixed&&(i+=e[s]||0);return a},a=o(0,r,1),i=o(r-1,-1,-1).reverse();return"rtl"===n?{left:i,right:a}:{left:a,right:i}}),[e,t,n]);return r};const ob=function(e){var t=e.className,n=e.children;return I.createElement("div",{className:t},n)};function ab(e,t,n,r){var o=ru.unstable_batchedUpdates?function(e){ru.unstable_batchedUpdates(n,e)}:n;return null!==e&&void 0!==e&&e.addEventListener&&e.addEventListener(t,o,r),{remove:function(){null!==e&&void 0!==e&&e.removeEventListener&&e.removeEventListener(t,o,r)}}}function ib(e){var t=e.getBoundingClientRect(),n=document.documentElement;return{left:t.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||document.body.clientLeft||0),top:t.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||document.body.clientTop||0)}}var sb=function(e,t){var n,r,o=e.scrollBodyRef,a=e.onScroll,i=e.offsetScroll,s=e.container,l=sv(fv,"prefixCls"),u=(null===(n=o.current)||void 0===n?void 0:n.scrollWidth)||0,c=(null===(r=o.current)||void 0===r?void 0:r.clientWidth)||0,d=u&&c*(c/u),h=I.useRef(),p=X(tb({scrollLeft:0,isHiddenScrollBar:!0}),2),f=p[0],m=p[1],g=I.useRef({delta:0,x:0}),v=X(I.useState(!1),2),b=v[0],y=v[1],w=I.useRef(null);I.useEffect((function(){return function(){Tl.cancel(w.current)}}),[]);var x=function(){y(!1)},k=function(e){var t,n=(e||(null===(t=window)||void 0===t?void 0:t.event)).buttons;if(b&&0!==n){var r=g.current.x+e.pageX-g.current.x-g.current.delta;r<=0&&(r=0),r+d>=c&&(r=c-d),a({scrollLeft:r/c*(u+2)}),g.current.x=e.pageX}else b&&y(!1)},C=function(){w.current=Tl((function(){if(o.current){var e=ib(o.current).top,t=e+o.current.offsetHeight,n=s===window?document.documentElement.scrollTop+window.innerHeight:ib(s).top+s.clientHeight;t-Of()<=n||e>=n-i?m((function(e){return nt(nt({},e),{},{isHiddenScrollBar:!0})})):m((function(e){return nt(nt({},e),{},{isHiddenScrollBar:!1})}))}}))},S=function(e){m((function(t){return nt(nt({},t),{},{scrollLeft:e/u*c||0})}))};return I.useImperativeHandle(t,(function(){return{setScrollLeft:S,checkScrollBarVisible:C}})),I.useEffect((function(){var e=ab(document.body,"mouseup",x,!1),t=ab(document.body,"mousemove",k,!1);return C(),function(){e.remove(),t.remove()}}),[d,b]),I.useEffect((function(){var e=ab(s,"scroll",C,!1),t=ab(window,"resize",C,!1);return function(){e.remove(),t.remove()}}),[s]),I.useEffect((function(){f.isHiddenScrollBar||m((function(e){var t=o.current;return t?nt(nt({},e),{},{scrollLeft:t.scrollLeft/t.scrollWidth*t.clientWidth}):e}))}),[f.isHiddenScrollBar]),u<=c||!d||f.isHiddenScrollBar?null:I.createElement("div",{style:{height:Of(),width:c,bottom:i},className:"".concat(l,"-sticky-scroll")},I.createElement("div",{onMouseDown:function(e){e.persist(),g.current.delta=e.pageX-f.scrollLeft,g.current.x=0,y(!0),e.preventDefault()},ref:h,className:F()("".concat(l,"-sticky-scroll-bar"),Q({},"".concat(l,"-sticky-scroll-bar-active"),b)),style:{width:"".concat(d,"px"),transform:"translate3d(".concat(f.scrollLeft,"px, 0, 0)")}}))};const lb=I.forwardRef(sb);const ub=function(e){return null};const cb=function(e){return null};var db="rc-table",hb=[],pb={};function fb(){return"No Data"}function mb(e,t){var n=nt({rowKey:"key",prefixCls:db,emptyText:fb},e),r=n.prefixCls,o=n.className,a=n.rowClassName,i=n.style,s=n.data,l=n.rowKey,u=n.scroll,c=n.tableLayout,d=n.direction,h=n.title,p=n.footer,f=n.summary,m=n.caption,g=n.id,v=n.showHeader,b=n.components,y=n.emptyText,w=n.onRow,x=n.onHeaderRow,k=n.onScroll,C=n.internalHooks,S=n.transformColumns,E=n.internalRefs,N=n.tailor,$=n.getContainerWidth,T=n.sticky,A=n.rowHoverable,O=void 0===A||A,R=s||hb,P=!!R.length,D=C===av;var _=I.useCallback((function(e,t){return mo(b,e)||t}),[b]),M=I.useMemo((function(){return"function"===typeof l?l:function(e){return e&&e[l]}}),[l]),z=_(["body"]),L=function(){var e=X(I.useState(-1),2),t=e[0],n=e[1],r=X(I.useState(-1),2),o=r[0],a=r[1],i=I.useCallback((function(e,t){n(e),a(t)}),[]);return[t,o,i]}(),B=X(L,3),j=B[0],H=B[1],V=B[2],W=X(eb(n,R,M),6),U=W[0],K=W[1],q=W[2],Y=W[3],Z=W[4],ee=W[5],te=null===u||void 0===u?void 0:u.x,ne=X(I.useState(0),2),re=ne[0],oe=ne[1],ae=X(Qv(nt(nt(nt({},n),U),{},{expandable:!!U.expandedRowRender,columnTitle:U.columnTitle,expandedKeys:q,getRowKey:M,onTriggerExpand:ee,expandIcon:Y,expandIconColumnIndex:U.expandIconColumnIndex,direction:d,scrollWidth:D&&N&&"number"===typeof te?te:null,clientWidth:re}),D?S:null),4),ie=ae[0],se=ae[1],le=ae[2],ue=ae[3],ce=null!==le&&void 0!==le?le:te,de=I.useMemo((function(){return{columns:ie,flattenColumns:se}}),[ie,se]),he=I.useRef(),pe=I.useRef(),fe=I.useRef(),me=I.useRef();I.useImperativeHandle(t,(function(){return{nativeElement:he.current,scrollTo:function(e){var t,n;if(fe.current instanceof HTMLElement){var r=e.index,o=e.top,a=e.key;if("number"!==typeof(n=o)||Number.isNaN(n)){var i,s=null!==a&&void 0!==a?a:M(R[r]);null===(i=fe.current.querySelector('[data-row-key="'.concat(s,'"]')))||void 0===i||i.scrollIntoView()}else{var l;null===(l=fe.current)||void 0===l||l.scrollTo({top:o})}}else null!==(t=fe.current)&&void 0!==t&&t.scrollTo&&fe.current.scrollTo(e)}}}));var ge,ve,be,ye=I.useRef(),we=X(I.useState(!1),2),xe=we[0],ke=we[1],Ce=X(I.useState(!1),2),Se=Ce[0],Ee=Ce[1],Ne=X(tb(new Map),2),Ie=Ne[0],$e=Ne[1],Te=gv(se).map((function(e){return Ie.get(e)})),Ae=I.useMemo((function(){return Te}),[Te.join("_")]),Oe=rb(Ae,se,d),Re=u&&vv(u.y),Pe=u&&vv(ce)||Boolean(U.fixed),De=Pe&&se.some((function(e){return e.fixed})),Fe=I.useRef(),_e=function(e,t){var n="object"===J(e)?e:{},r=n.offsetHeader,o=void 0===r?0:r,a=n.offsetSummary,i=void 0===a?0:a,s=n.offsetScroll,l=void 0===s?0:s,u=n.getContainer,c=(void 0===u?function(){return nb}:u)()||nb,d=!!e;return I.useMemo((function(){return{isSticky:d,stickyClassName:d?"".concat(t,"-sticky-holder"):"",offsetHeader:o,offsetSummary:i,offsetScroll:l,container:c}}),[d,l,o,i,t,c])}(T,r),Me=_e.isSticky,ze=_e.offsetHeader,Le=_e.offsetSummary,Be=_e.offsetScroll,je=_e.stickyClassName,He=_e.container,Ve=I.useMemo((function(){return null===f||void 0===f?void 0:f(R)}),[f,R]),We=(Re||Me)&&I.isValidElement(Ve)&&Ve.type===Ev&&Ve.props.fixed;Re&&(ve={overflowY:P?"scroll":"auto",maxHeight:u.y}),Pe&&(ge={overflowX:"auto"},Re||(ve={overflowY:"hidden"}),be={width:!0===ce?"auto":ce,minWidth:"100%"});var Ge=I.useCallback((function(e,t){Zl(he.current)&&$e((function(n){if(n.get(e)!==t){var r=new Map(n);return r.set(e,t),r}return n}))}),[]),Ue=function(e){var t=(0,I.useRef)(e||null),n=(0,I.useRef)();function r(){window.clearTimeout(n.current)}return(0,I.useEffect)((function(){return r}),[]),[function(e){t.current=e,r(),n.current=window.setTimeout((function(){t.current=null,n.current=void 0}),100)},function(){return t.current}]}(null),Ke=X(Ue,2),qe=Ke[0],Xe=Ke[1];function Je(e,t){t&&("function"===typeof t?t(e):t.scrollLeft!==e&&(t.scrollLeft=e,t.scrollLeft!==e&&setTimeout((function(){t.scrollLeft=e}),0)))}var Ye=oo((function(e){var t,n=e.currentTarget,r=e.scrollLeft,o="rtl"===d,a="number"===typeof r?r:n.scrollLeft,i=n||pb;Xe()&&Xe()!==i||(qe(i),Je(a,pe.current),Je(a,fe.current),Je(a,ye.current),Je(a,null===(t=Fe.current)||void 0===t?void 0:t.setScrollLeft));var s=n||pe.current;if(s){var l="number"===typeof ce?ce:s.scrollWidth,u=s.clientWidth;if(l===u)return ke(!1),void Ee(!1);o?(ke(-a<l-u),Ee(-a>0)):(ke(a>0),Ee(a<l-u))}})),Qe=oo((function(e){Ye(e),null===k||void 0===k||k(e)})),Ze=function(){var e;Pe&&fe.current?Ye({currentTarget:iu(fe.current),scrollLeft:null===(e=fe.current)||void 0===e?void 0:e.scrollLeft}):(ke(!1),Ee(!1))},et=I.useRef(!1);I.useEffect((function(){et.current&&Ze()}),[Pe,s,ie.length]),I.useEffect((function(){et.current=!0}),[]);var tt=X(I.useState(0),2),rt=tt[0],ot=tt[1],at=X(I.useState(!0),2),it=at[0],st=at[1];I.useEffect((function(){N&&D||(fe.current instanceof Element?ot(Rf(fe.current).width):ot(Rf(me.current).width)),st(Sf("position","sticky"))}),[]),I.useEffect((function(){D&&E&&(E.body.current=fe.current)}));var lt,ut=I.useCallback((function(e){return I.createElement(I.Fragment,null,I.createElement(Gv,e),"top"===We&&I.createElement(Nv,e,Ve))}),[We,Ve]),ct=I.useCallback((function(e){return I.createElement(Nv,e,Ve)}),[Ve]),dt=_(["table"],"table"),ht=I.useMemo((function(){return c||(De?"max-content"===ce?"auto":"fixed":Re||Me||se.some((function(e){return e.ellipsis}))?"fixed":"auto")}),[Re,De,se,c,Me]),pt={colWidths:Ae,columCount:se.length,stickyOffsets:Oe,onHeaderRow:x,fixHeader:Re,scroll:u},ft=I.useMemo((function(){return P?null:"function"===typeof y?y():y}),[P,y]),mt=I.createElement(_v,{data:R,measureColumnWidth:Re||Pe||Me}),gt=I.createElement(Bv,{colWidths:se.map((function(e){return e.width})),columns:se}),vt=null!==m&&void 0!==m?I.createElement("caption",{className:"".concat(r,"-caption")},m):void 0,bt=wl(n,{data:!0}),yt=wl(n,{aria:!0});if(Re||Me){var wt;"function"===typeof z?(wt=z(R,{scrollbarSize:rt,ref:fe,onScroll:Ye}),pt.colWidths=se.map((function(e,t){var n=e.width,r=t===se.length-1?n-rt:n;return"number"!==typeof r||Number.isNaN(r)?0:r}))):wt=I.createElement("div",{style:nt(nt({},ge),ve),onScroll:Qe,ref:fe,className:F()("".concat(r,"-body"))},I.createElement(dt,G({style:nt(nt({},be),{},{tableLayout:ht})},yt),vt,gt,mt,!We&&Ve&&I.createElement(Nv,{stickyOffsets:Oe,flattenColumns:se},Ve)));var xt=nt(nt(nt({noData:!R.length,maxContentScroll:Pe&&"max-content"===ce},pt),de),{},{direction:d,stickyClassName:je,onScroll:Ye});lt=I.createElement(I.Fragment,null,!1!==v&&I.createElement(Vv,G({},xt,{stickyTopOffset:ze,className:"".concat(r,"-header"),ref:pe}),ut),wt,We&&"top"!==We&&I.createElement(Vv,G({},xt,{stickyBottomOffset:Le,className:"".concat(r,"-summary"),ref:ye}),ct),Me&&fe.current&&fe.current instanceof Element&&I.createElement(lb,{ref:Fe,offsetScroll:Be,scrollBodyRef:fe,onScroll:Ye,container:He}))}else lt=I.createElement("div",{style:nt(nt({},ge),ve),className:F()("".concat(r,"-content")),onScroll:Ye,ref:fe},I.createElement(dt,G({style:nt(nt({},be),{},{tableLayout:ht})},yt),vt,gt,!1!==v&&I.createElement(Gv,G({},pt,de)),mt,Ve&&I.createElement(Nv,{stickyOffsets:Oe,flattenColumns:se},Ve)));var kt=I.createElement("div",G({className:F()(r,o,Q(Q(Q(Q(Q(Q(Q(Q(Q(Q({},"".concat(r,"-rtl"),"rtl"===d),"".concat(r,"-ping-left"),xe),"".concat(r,"-ping-right"),Se),"".concat(r,"-layout-fixed"),"fixed"===c),"".concat(r,"-fixed-header"),Re),"".concat(r,"-fixed-column"),De),"".concat(r,"-fixed-column-gapped"),De&&ue),"".concat(r,"-scroll-horizontal"),Pe),"".concat(r,"-has-fix-left"),se[0]&&se[0].fixed),"".concat(r,"-has-fix-right"),se[se.length-1]&&"right"===se[se.length-1].fixed)),style:i,id:g,ref:he},bt),h&&I.createElement(ob,{className:"".concat(r,"-title")},h(R)),I.createElement("div",{ref:me,className:"".concat(r,"-container")},lt),p&&I.createElement(ob,{className:"".concat(r,"-footer")},p(R)));Pe&&(kt=I.createElement(uh,{onResize:function(e){var t,n=e.width;null===(t=Fe.current)||void 0===t||t.checkScrollBarVisible();var r=he.current?he.current.offsetWidth:n;D&&$&&he.current&&(r=$(he.current,r)||r),r!==re&&(Ze(),oe(r))}},kt));var Ct=function(e,t,n){var r=e.map((function(r,o){return xv(o,o,e,t,n)}));return Ut((function(){return r}),[r],(function(e,t){return!Kt(e,t)}))}(se,Oe,d),St=I.useMemo((function(){return{scrollX:ce,prefixCls:r,getComponent:_,scrollbarSize:rt,direction:d,fixedInfoList:Ct,isSticky:Me,supportSticky:it,componentWidth:re,fixHeader:Re,fixColumn:De,horizonScroll:Pe,tableLayout:ht,rowClassName:a,expandedRowClassName:U.expandedRowClassName,expandIcon:Y,expandableType:K,expandRowByClick:U.expandRowByClick,expandedRowRender:U.expandedRowRender,onTriggerExpand:ee,expandIconColumnIndex:U.expandIconColumnIndex,indentSize:U.indentSize,allColumnsFixedLeft:se.every((function(e){return"left"===e.fixed})),emptyNode:ft,columns:ie,flattenColumns:se,onColumnResize:Ge,hoverStartRow:j,hoverEndRow:H,onHover:V,rowExpandable:U.rowExpandable,onRow:w,getRowKey:M,expandedKeys:q,childrenColumnName:Z,rowHoverable:O}}),[ce,r,_,rt,d,Ct,Me,it,re,Re,De,Pe,ht,a,U.expandedRowClassName,Y,K,U.expandRowByClick,U.expandedRowRender,ee,U.expandIconColumnIndex,U.indentSize,ft,ie,se,Ge,j,H,V,U.rowExpandable,w,M,q,Z,O]);return I.createElement(fv.Provider,{value:St},kt)}var gb=I.forwardRef(mb);function vb(e){return dv(gb,e)}var bb=vb();bb.EXPAND_COLUMN=ov,bb.INTERNAL_HOOKS=av,bb.Column=ub,bb.ColumnGroup=cb,bb.Summary=Iv;const yb=bb;var wb=I.forwardRef((function(e,t){var n=e.height,r=e.offsetY,o=e.offsetX,a=e.children,i=e.prefixCls,s=e.onInnerResize,l=e.innerProps,u=e.rtl,c=e.extra,d={},h={display:"flex",flexDirection:"column"};return void 0!==r&&(d={height:n,position:"relative",overflow:"hidden"},h=nt(nt({},h),{},Q(Q(Q(Q(Q({transform:"translateY(".concat(r,"px)")},u?"marginRight":"marginLeft",-o),"position","absolute"),"left",0),"right",0),"top",0))),I.createElement("div",{style:d},I.createElement(uh,{onResize:function(e){e.offsetHeight&&s&&s()}},I.createElement("div",G({style:h,className:F()(Q({},"".concat(i,"-holder-inner"),i)),ref:t},l),a,c)))}));wb.displayName="Filler";const xb=wb;function kb(e){var t=e.children,n=e.setRef,r=I.useCallback((function(e){n(e)}),[]);return I.cloneElement(t,{ref:r})}function Cb(e,t,n){var r=X(I.useState(e),2),o=r[0],a=r[1],i=X(I.useState(null),2),s=i[0],l=i[1];return I.useEffect((function(){var r=function(e,t,n){var r,o,a=e.length,i=t.length;if(0===a&&0===i)return null;a<i?(r=e,o=t):(r=t,o=e);var s={__EMPTY_ITEM__:!0};function l(e){return void 0!==e?n(e):s}for(var u=null,c=1!==Math.abs(a-i),d=0;d<o.length;d+=1){var h=l(r[d]);if(h!==l(o[d])){u=d,c=c||h!==l(o[d+1]);break}}return null===u?null:{index:u,multiple:c}}(o||[],e||[],t);void 0!==(null===r||void 0===r?void 0:r.index)&&(null===n||void 0===n||n(r.index),l(e[r.index])),a(e)}),[e]),[s]}const Sb="object"===("undefined"===typeof navigator?"undefined":J(navigator))&&/Firefox/i.test(navigator.userAgent),Eb=function(e,t,n,r){var o=(0,I.useRef)(!1),a=(0,I.useRef)(null);var i=(0,I.useRef)({top:e,bottom:t,left:n,right:r});return i.current.top=e,i.current.bottom=t,i.current.left=n,i.current.right=r,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e?t<0&&i.current.left||t>0&&i.current.right:t<0&&i.current.top||t>0&&i.current.bottom;return n&&r?(clearTimeout(a.current),o.current=!1):r&&!o.current||(clearTimeout(a.current),o.current=!0,a.current=setTimeout((function(){o.current=!1}),50)),!o.current&&r}};function Nb(e,t,n,r,o,a,i){var s=(0,I.useRef)(0),l=(0,I.useRef)(null),u=(0,I.useRef)(null),c=(0,I.useRef)(!1),d=Eb(t,n,r,o);var h=(0,I.useRef)(null),p=(0,I.useRef)(null);return[function(t){if(e){Tl.cancel(p.current),p.current=Tl((function(){h.current=null}),2);var n=t.deltaX,r=t.deltaY,o=t.shiftKey,f=n,m=r;("sx"===h.current||!h.current&&o&&r&&!n)&&(f=r,m=0,h.current="sx");var g=Math.abs(f),v=Math.abs(m);null===h.current&&(h.current=a&&g>v?"x":"y"),"y"===h.current?function(e,t){if(Tl.cancel(l.current),!d(!1,t)){var n=e;n._virtualHandled||(n._virtualHandled=!0,s.current+=t,u.current=t,Sb||n.preventDefault(),l.current=Tl((function(){var e=c.current?10:1;i(s.current*e,!1),s.current=0})))}}(t,m):function(e,t){i(t,!0),Sb||e.preventDefault()}(t,f)}},function(t){e&&(c.current=t.detail===u.current)}]}const Ib=function(){function e(){qt(this,e),Q(this,"maps",void 0),Q(this,"id",0),this.maps=Object.create(null)}return Jt(e,[{key:"set",value:function(e,t){this.maps[e]=t,this.id+=1}},{key:"get",value:function(e){return this.maps[e]}}]),e}();var $b=14/15;function Tb(e,t){return("touches"in e?e.touches[0]:e)[t?"pageX":"pageY"]}var Ab=I.forwardRef((function(e,t){var n=e.prefixCls,r=e.rtl,o=e.scrollOffset,a=e.scrollRange,i=e.onStartMove,s=e.onStopMove,l=e.onScroll,u=e.horizontal,c=e.spinSize,d=e.containerSize,h=e.style,p=e.thumbStyle,f=X(I.useState(!1),2),m=f[0],g=f[1],v=X(I.useState(null),2),b=v[0],y=v[1],w=X(I.useState(null),2),x=w[0],k=w[1],C=!r,S=I.useRef(),E=I.useRef(),N=X(I.useState(!1),2),$=N[0],T=N[1],A=I.useRef(),O=function(){clearTimeout(A.current),T(!0),A.current=setTimeout((function(){T(!1)}),3e3)},R=a-d||0,P=d-c||0,D=I.useMemo((function(){return 0===o||0===R?0:o/R*P}),[o,R,P]),_=I.useRef({top:D,dragging:m,pageY:b,startTop:x});_.current={top:D,dragging:m,pageY:b,startTop:x};var M=function(e){g(!0),y(Tb(e,u)),k(_.current.top),i(),e.stopPropagation(),e.preventDefault()};I.useEffect((function(){var e=function(e){e.preventDefault()},t=S.current,n=E.current;return t.addEventListener("touchstart",e,{passive:!1}),n.addEventListener("touchstart",M,{passive:!1}),function(){t.removeEventListener("touchstart",e),n.removeEventListener("touchstart",M)}}),[]);var z=I.useRef();z.current=R;var L=I.useRef();L.current=P,I.useEffect((function(){if(m){var e,t=function(t){var n=_.current,r=n.dragging,o=n.pageY,a=n.startTop;Tl.cancel(e);var i=S.current.getBoundingClientRect(),s=d/(u?i.width:i.height);if(r){var c=(Tb(t,u)-o)*s,h=a;!C&&u?h-=c:h+=c;var p=z.current,f=L.current,m=f?h/f:0,g=Math.ceil(m*p);g=Math.max(g,0),g=Math.min(g,p),e=Tl((function(){l(g,u)}))}},n=function(){g(!1),s()};return window.addEventListener("mousemove",t,{passive:!0}),window.addEventListener("touchmove",t,{passive:!0}),window.addEventListener("mouseup",n,{passive:!0}),window.addEventListener("touchend",n,{passive:!0}),function(){window.removeEventListener("mousemove",t),window.removeEventListener("touchmove",t),window.removeEventListener("mouseup",n),window.removeEventListener("touchend",n),Tl.cancel(e)}}}),[m]),I.useEffect((function(){return O(),function(){clearTimeout(A.current)}}),[o]),I.useImperativeHandle(t,(function(){return{delayHidden:O}}));var B="".concat(n,"-scrollbar"),j={position:"absolute",visibility:$?null:"hidden"},H={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return u?(j.height=8,j.left=0,j.right=0,j.bottom=0,H.height="100%",H.width=c,C?H.left=D:H.right=D):(j.width=8,j.top=0,j.bottom=0,C?j.right=0:j.left=0,H.width="100%",H.height=c,H.top=D),I.createElement("div",{ref:S,className:F()(B,Q(Q(Q({},"".concat(B,"-horizontal"),u),"".concat(B,"-vertical"),!u),"".concat(B,"-visible"),$)),style:nt(nt({},j),h),onMouseDown:function(e){e.stopPropagation(),e.preventDefault()},onMouseMove:O},I.createElement("div",{ref:E,className:F()("".concat(B,"-thumb"),Q({},"".concat(B,"-thumb-moving"),m)),style:nt(nt({},H),p),onMouseDown:M}))}));const Ob=Ab;function Rb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)*e;return isNaN(t)&&(t=0),t=Math.max(t,20),Math.floor(t)}var Pb=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],Db=[],Fb={overflowY:"auto",overflowAnchor:"none"};function _b(e,t){var n=e.prefixCls,r=void 0===n?"rc-virtual-list":n,o=e.className,a=e.height,i=e.itemHeight,s=e.fullHeight,l=void 0===s||s,u=e.style,c=e.data,d=e.children,h=e.itemKey,p=e.virtual,f=e.direction,m=e.scrollWidth,g=e.component,v=void 0===g?"div":g,b=e.onScroll,y=e.onVirtualScroll,w=e.onVisibleChange,x=e.innerProps,k=e.extraRender,C=e.styles,S=Z(e,Pb),E=I.useCallback((function(e){return"function"===typeof h?h(e):null===e||void 0===e?void 0:e[h]}),[h]),N=function(e,t,n){var r=X(I.useState(0),2),o=r[0],a=r[1],i=(0,I.useRef)(new Map),s=(0,I.useRef)(new Ib),l=(0,I.useRef)();function u(){Tl.cancel(l.current)}function c(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];u();var t=function(){i.current.forEach((function(e,t){if(e&&e.offsetParent){var n=su(e),r=n.offsetHeight;s.current.get(t)!==r&&s.current.set(t,n.offsetHeight)}})),a((function(e){return e+1}))};e?t():l.current=Tl(t)}return(0,I.useEffect)((function(){return u}),[]),[function(r,o){var a=e(r),s=i.current.get(a);o?(i.current.set(a,o),c()):i.current.delete(a),!s!==!o&&(o?null===t||void 0===t||t(r):null===n||void 0===n||n(r))},c,s.current,o]}(E,null,null),$=X(N,4),T=$[0],A=$[1],O=$[2],R=$[3],P=!(!1===p||!a||!i),D=I.useMemo((function(){return Object.values(O.maps).reduce((function(e,t){return e+t}),0)}),[O.id,O.maps]),_=P&&c&&(Math.max(i*c.length,D)>a||!!m),M="rtl"===f,z=F()(r,Q({},"".concat(r,"-rtl"),M),o),L=c||Db,B=(0,I.useRef)(),j=(0,I.useRef)(),H=(0,I.useRef)(),V=X((0,I.useState)(0),2),W=V[0],U=V[1],K=X((0,I.useState)(0),2),q=K[0],Y=K[1],ee=X((0,I.useState)(!1),2),te=ee[0],ne=ee[1],re=function(){ne(!0)},oe=function(){ne(!1)},ae={getKey:E};function ie(e){U((function(t){var n=function(e){var t=e;Number.isNaN(Ce.current)||(t=Math.min(t,Ce.current));return t=Math.max(t,0),t}("function"===typeof e?e(t):e);return B.current.scrollTop=n,n}))}var se=(0,I.useRef)({start:0,end:L.length}),le=(0,I.useRef)(),ue=X(Cb(L,E),1)[0];le.current=ue;var ce=I.useMemo((function(){if(!P)return{scrollHeight:void 0,start:0,end:L.length-1,offset:void 0};var e;if(!_)return{scrollHeight:(null===(e=j.current)||void 0===e?void 0:e.offsetHeight)||0,start:0,end:L.length-1,offset:void 0};for(var t,n,r,o=0,s=L.length,l=0;l<s;l+=1){var u=L[l],c=E(u),d=O.get(c),h=o+(void 0===d?i:d);h>=W&&void 0===t&&(t=l,n=o),h>W+a&&void 0===r&&(r=l),o=h}return void 0===t&&(t=0,n=0,r=Math.ceil(a/i)),void 0===r&&(r=L.length-1),{scrollHeight:o,start:t,end:r=Math.min(r+1,L.length-1),offset:n}}),[_,P,W,L,R,a]),de=ce.scrollHeight,he=ce.start,pe=ce.end,fe=ce.offset;se.current.start=he,se.current.end=pe;var me=X(I.useState({width:0,height:a}),2),ge=me[0],ve=me[1],be=(0,I.useRef)(),ye=(0,I.useRef)(),we=I.useMemo((function(){return Rb(ge.width,m)}),[ge.width,m]),xe=I.useMemo((function(){return Rb(ge.height,de)}),[ge.height,de]),ke=de-a,Ce=(0,I.useRef)(ke);Ce.current=ke;var Se=W<=0,Ee=W>=ke,Ne=q<=0,Ie=q>=m,$e=Eb(Se,Ee,Ne,Ie),Te=function(){return{x:M?-q:q,y:W}},Ae=(0,I.useRef)(Te()),Oe=oo((function(e){if(y){var t=nt(nt({},Te()),e);Ae.current.x===t.x&&Ae.current.y===t.y||(y(t),Ae.current=t)}}));function Re(e,t){var n=e;t?((0,ru.flushSync)((function(){Y(n)})),Oe()):ie(n)}var Pe=function(e){var t=e,n=m?m-ge.width:0;return t=Math.max(t,0),t=Math.min(t,n)},De=oo((function(e,t){t?((0,ru.flushSync)((function(){Y((function(t){return Pe(t+(M?-e:e))}))})),Oe()):ie((function(t){return t+e}))})),Fe=X(Nb(P,Se,Ee,Ne,Ie,!!m,De),2),_e=Fe[0],Me=Fe[1];!function(e,t,n){var r,o=(0,I.useRef)(!1),a=(0,I.useRef)(0),i=(0,I.useRef)(0),s=(0,I.useRef)(null),l=(0,I.useRef)(null),u=function(e){if(o.current){var t=Math.ceil(e.touches[0].pageX),r=Math.ceil(e.touches[0].pageY),s=a.current-t,u=i.current-r,c=Math.abs(s)>Math.abs(u);c?a.current=t:i.current=r;var d=n(c,c?s:u,!1,e);d&&e.preventDefault(),clearInterval(l.current),d&&(l.current=setInterval((function(){c?s*=$b:u*=$b;var e=Math.floor(c?s:u);(!n(c,e,!0)||Math.abs(e)<=.1)&&clearInterval(l.current)}),16))}},c=function(){o.current=!1,r()},d=function(e){r(),1!==e.touches.length||o.current||(o.current=!0,a.current=Math.ceil(e.touches[0].pageX),i.current=Math.ceil(e.touches[0].pageY),s.current=e.target,s.current.addEventListener("touchmove",u,{passive:!1}),s.current.addEventListener("touchend",c,{passive:!0}))};r=function(){s.current&&(s.current.removeEventListener("touchmove",u),s.current.removeEventListener("touchend",c))},In((function(){return e&&t.current.addEventListener("touchstart",d,{passive:!0}),function(){var e;null===(e=t.current)||void 0===e||e.removeEventListener("touchstart",d),r(),clearInterval(l.current)}}),[e])}(P,B,(function(e,t,n,r){var o=r;return!$e(e,t,n)&&((!o||!o._virtualHandled)&&(o&&(o._virtualHandled=!0),_e({preventDefault:function(){},deltaX:e?t:0,deltaY:e?0:t}),!0))})),In((function(){function e(e){var t=Se&&e.detail<0,n=Ee&&e.detail>0;!P||t||n||e.preventDefault()}var t=B.current;return t.addEventListener("wheel",_e,{passive:!1}),t.addEventListener("DOMMouseScroll",Me,{passive:!0}),t.addEventListener("MozMousePixelScroll",e,{passive:!1}),function(){t.removeEventListener("wheel",_e),t.removeEventListener("DOMMouseScroll",Me),t.removeEventListener("MozMousePixelScroll",e)}}),[P,Se,Ee]),In((function(){if(m){var e=Pe(q);Y(e),Oe({x:e})}}),[ge.width,m]);var ze=function(){var e,t;null===(e=be.current)||void 0===e||e.delayHidden(),null===(t=ye.current)||void 0===t||t.delayHidden()},Le=function(e,t,n,r,o,a,i,s){var l=I.useRef(),u=X(I.useState(null),2),c=u[0],d=u[1];return In((function(){if(c&&c.times<10){if(!e.current)return void d((function(e){return nt({},e)}));a();var s=c.targetAlign,l=c.originAlign,u=c.index,h=c.offset,p=e.current.clientHeight,f=!1,m=s,g=null;if(p){for(var v=s||l,b=0,y=0,w=0,x=Math.min(t.length-1,u),k=0;k<=x;k+=1){var C=o(t[k]);y=b;var S=n.get(C);b=w=y+(void 0===S?r:S)}for(var E="top"===v?h:p-h,N=x;N>=0;N-=1){var I=o(t[N]),$=n.get(I);if(void 0===$){f=!0;break}if((E-=$)<=0)break}switch(v){case"top":g=y-h;break;case"bottom":g=w-p+h;break;default:var T=e.current.scrollTop;y<T?m="top":w>T+p&&(m="bottom")}null!==g&&i(g),g!==c.lastTop&&(f=!0)}f&&d(nt(nt({},c),{},{times:c.times+1,targetAlign:m,lastTop:g}))}}),[c,e.current]),function(e){if(null!==e&&void 0!==e){if(Tl.cancel(l.current),"number"===typeof e)i(e);else if(e&&"object"===J(e)){var n,r=e.align;n="index"in e?e.index:t.findIndex((function(t){return o(t)===e.key}));var a=e.offset;d({times:0,index:n,offset:void 0===a?0:a,originAlign:r})}}else s()}}(B,L,O,i,E,(function(){return A(!0)}),ie,ze);I.useImperativeHandle(t,(function(){return{nativeElement:H.current,getScrollInfo:Te,scrollTo:function(e){var t;(t=e)&&"object"===J(t)&&("left"in t||"top"in t)?(void 0!==e.left&&Y(Pe(e.left)),Le(e.top)):Le(e)}}})),In((function(){if(w){var e=L.slice(he,pe+1);w(e,L)}}),[he,pe,L]);var Be=function(e,t,n,r){var o=X(I.useMemo((function(){return[new Map,[]]}),[e,n.id,r]),2),a=o[0],i=o[1];return function(o){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,l=a.get(o),u=a.get(s);if(void 0===l||void 0===u)for(var c=e.length,d=i.length;d<c;d+=1){var h,p=e[d],f=t(p);a.set(f,d);var m=null!==(h=n.get(f))&&void 0!==h?h:r;if(i[d]=(i[d-1]||0)+m,f===o&&(l=d),f===s&&(u=d),void 0!==l&&void 0!==u)break}return{top:i[l-1]||0,bottom:i[u]}}}(L,E,O,i),je=null===k||void 0===k?void 0:k({start:he,end:pe,virtual:_,offsetX:q,offsetY:fe,rtl:M,getSize:Be}),He=function(e,t,n,r,o,a,i,s){var l=s.getKey;return e.slice(t,n+1).map((function(e,n){var s=i(e,t+n,{style:{width:r},offsetX:o}),u=l(e);return I.createElement(kb,{key:u,setRef:function(t){return a(e,t)}},s)}))}(L,he,pe,m,q,T,d,ae),Ve=null;a&&(Ve=nt(Q({},l?"height":"maxHeight",a),Fb),P&&(Ve.overflowY="hidden",m&&(Ve.overflowX="hidden"),te&&(Ve.pointerEvents="none")));var We={};return M&&(We.dir="rtl"),I.createElement("div",G({ref:H,style:nt(nt({},u),{},{position:"relative"}),className:z},We,S),I.createElement(uh,{onResize:function(e){ve({width:e.offsetWidth,height:e.offsetHeight})}},I.createElement(v,{className:"".concat(r,"-holder"),style:Ve,ref:B,onScroll:function(e){var t=e.currentTarget.scrollTop;t!==W&&ie(t),null===b||void 0===b||b(e),Oe()},onMouseEnter:ze},I.createElement(xb,{prefixCls:r,height:de,offsetX:q,offsetY:fe,scrollWidth:m,onInnerResize:A,ref:j,innerProps:x,rtl:M,extra:je},He))),_&&de>a&&I.createElement(Ob,{ref:be,prefixCls:r,scrollOffset:W,scrollRange:de,rtl:M,onScroll:Re,onStartMove:re,onStopMove:oe,spinSize:xe,containerSize:ge.height,style:null===C||void 0===C?void 0:C.verticalScrollBar,thumbStyle:null===C||void 0===C?void 0:C.verticalScrollBarThumb}),_&&m>ge.width&&I.createElement(Ob,{ref:ye,prefixCls:r,scrollOffset:q,scrollRange:m,rtl:M,onScroll:Re,onStartMove:re,onStopMove:oe,spinSize:we,containerSize:ge.width,horizontal:!0,style:null===C||void 0===C?void 0:C.horizontalScrollBar,thumbStyle:null===C||void 0===C?void 0:C.horizontalScrollBarThumb}))}var Mb=I.forwardRef(_b);Mb.displayName="List";const zb=Mb;var Lb=iv(null),Bb=iv(null);const jb=function(e){var t=e.rowInfo,n=e.column,r=e.colIndex,o=e.indent,a=e.index,i=e.component,s=e.renderIndex,l=e.record,u=e.style,c=e.className,d=e.inverse,h=e.getHeight,p=n.render,f=n.dataIndex,m=n.className,g=n.width,v=sv(Bb,["columnsOffset"]).columnsOffset,b=Rv(t,n,r,o,a),y=b.key,w=b.fixedInfo,x=b.appendCellNode,k=b.additionalCellProps,C=k.style,S=k.colSpan,E=void 0===S?1:S,N=k.rowSpan,$=void 0===N?1:N,T=function(e,t,n){return n[e+(t||1)]-(n[e]||0)}(r-1,E,v),A=E>1?g-T:0,O=nt(nt(nt({},C),u),{},{flex:"0 0 ".concat(T,"px"),width:"".concat(T,"px"),marginRight:A,pointerEvents:"auto"}),R=I.useMemo((function(){return d?$<=1:0===E||0===$||$>1}),[$,E,d]);R?O.visibility="hidden":d&&(O.height=null===h||void 0===h?void 0:h($));var P=R?function(){return null}:p,D={};return 0!==$&&0!==E||(D.rowSpan=1,D.colSpan=1),I.createElement(wv,G({className:F()(m,c),ellipsis:n.ellipsis,align:n.align,scope:n.rowScope,component:i,prefixCls:t.prefixCls,key:y,record:l,index:a,renderIndex:s,dataIndex:f,render:P,shouldCellUpdate:n.shouldCellUpdate},w,{appendNode:x,additionalProps:nt(nt({},k),{},{style:O},D)}))};var Hb=["data","index","className","rowKey","style","extra","getHeight"],Vb=I.forwardRef((function(e,t){var n,r=e.data,o=e.index,a=e.className,i=e.rowKey,s=e.style,l=e.extra,u=e.getHeight,c=Z(e,Hb),d=r.record,h=r.indent,p=r.index,f=sv(fv,["prefixCls","flattenColumns","fixColumn","componentWidth","scrollX"]),m=f.scrollX,g=f.flattenColumns,v=f.prefixCls,b=f.fixColumn,y=f.componentWidth,w=sv(Lb,["getComponent"]).getComponent,x=Av(d,i,o,h),k=w(["body","row"],"div"),C=w(["body","cell"],"div"),S=x.rowSupportExpand,E=x.expanded,N=x.rowProps,$=x.expandedRowRender,T=x.expandedRowClassName;if(S&&E){var A=$(d,o,h+1,E),O=null===T||void 0===T?void 0:T(d,o,h),R={};b&&(R={style:Q({},"--virtual-width","".concat(y,"px"))});var P="".concat(v,"-expanded-row-cell");n=I.createElement(k,{className:F()("".concat(v,"-expanded-row"),"".concat(v,"-expanded-row-level-").concat(h+1),O)},I.createElement(wv,{component:C,prefixCls:v,className:F()(P,Q({},"".concat(P,"-fixed"),b)),additionalProps:R},A))}var D=nt(nt({},s),{},{width:m});l&&(D.position="absolute",D.pointerEvents="none");var _=I.createElement(k,G({},N,c,{"data-row-key":i,ref:S?null:t,className:F()(a,"".concat(v,"-row"),null===N||void 0===N?void 0:N.className,Q({},"".concat(v,"-row-extra"),l)),style:nt(nt({},D),null===N||void 0===N?void 0:N.style)}),g.map((function(e,t){return I.createElement(jb,{key:t,component:C,rowInfo:x,column:e,colIndex:t,indent:h,index:o,renderIndex:p,record:d,inverse:l,getHeight:u})})));return S?I.createElement("div",{ref:t},_,n):_}));const Wb=hv(Vb);var Gb=I.forwardRef((function(e,t){var n=e.data,r=e.onScroll,o=sv(fv,["flattenColumns","onColumnResize","getRowKey","prefixCls","expandedKeys","childrenColumnName","scrollX"]),a=o.flattenColumns,i=o.onColumnResize,s=o.getRowKey,l=o.expandedKeys,u=o.prefixCls,c=o.childrenColumnName,d=o.scrollX,h=sv(Lb),p=h.sticky,f=h.scrollY,m=h.listItemHeight,g=h.getComponent,v=h.onScroll,b=I.useRef(),y=Tv(n,c,l,s),w=I.useMemo((function(){var e=0;return a.map((function(t){var n=t.width;return[t.key,n,e+=n]}))}),[a]),x=I.useMemo((function(){return w.map((function(e){return e[2]}))}),[w]);I.useEffect((function(){w.forEach((function(e){var t=X(e,2),n=t[0],r=t[1];i(n,r)}))}),[w]),I.useImperativeHandle(t,(function(){var e,t={scrollTo:function(e){var t;null===(t=b.current)||void 0===t||t.scrollTo(e)},nativeElement:null===(e=b.current)||void 0===e?void 0:e.nativeElement};return Object.defineProperty(t,"scrollLeft",{get:function(){var e;return(null===(e=b.current)||void 0===e?void 0:e.getScrollInfo().x)||0},set:function(e){var t;null===(t=b.current)||void 0===t||t.scrollTo({left:e})}}),t}));var k=function(e,t){var n,r=null===(n=y[t])||void 0===n?void 0:n.record,o=e.onCell;if(o){var a,i=o(r,t);return null!==(a=null===i||void 0===i?void 0:i.rowSpan)&&void 0!==a?a:1}return 1},C=I.useMemo((function(){return{columnsOffset:x}}),[x]),S="".concat(u,"-tbody"),E=g(["body","wrapper"]),N={};return p&&(N.position="sticky",N.bottom=0,"object"===J(p)&&p.offsetScroll&&(N.bottom=p.offsetScroll)),I.createElement(Bb.Provider,{value:C},I.createElement(zb,{fullHeight:!1,ref:b,prefixCls:"".concat(S,"-virtual"),styles:{horizontalScrollBar:N},className:S,height:f,itemHeight:m||24,data:y,itemKey:function(e){return s(e.record)},component:E,scrollWidth:d,onVirtualScroll:function(e){var t,n=e.x;r({currentTarget:null===(t=b.current)||void 0===t?void 0:t.nativeElement,scrollLeft:n})},onScroll:v,extraRender:function(e){var t=e.start,n=e.end,r=e.getSize,o=e.offsetY;if(n<0)return null;for(var i=a.filter((function(e){return 0===k(e,t)})),l=t,u=function(e){if(i=i.filter((function(t){return 0===k(t,e)})),!i.length)return l=e,1},c=t;c>=0&&!u(c);c-=1);for(var d=a.filter((function(e){return 1!==k(e,n)})),h=n,p=function(e){if(d=d.filter((function(t){return 1!==k(t,e)})),!d.length)return h=Math.max(e-1,n),1},f=n;f<y.length&&!p(f);f+=1);for(var m=[],g=function(e){if(!y[e])return 1;a.some((function(t){return k(t,e)>1}))&&m.push(e)},v=l;v<=h;v+=1)g(v);var b=m.map((function(e){var t=y[e],n=s(t.record,e),a=r(n);return I.createElement(Wb,{key:e,data:t,rowKey:n,index:e,style:{top:-o+a.top},extra:!0,getHeight:function(t){var o=e+t-1,a=s(y[o].record,o),i=r(n,a);return i.bottom-i.top}})}));return b}},(function(e,t,n){var r=s(e.record,t);return I.createElement(Wb,{data:e,rowKey:r,index:t,style:n.style})})))}));const Ub=hv(Gb);var Kb=function(e,t){var n=t.ref,r=t.onScroll;return I.createElement(Ub,{ref:n,data:e,onScroll:r})};function qb(e,t){var n=e.data,r=e.columns,o=e.scroll,a=e.sticky,i=e.prefixCls,s=void 0===i?db:i,l=e.className,u=e.listItemHeight,c=e.components,d=e.onScroll,h=o||{},p=h.x,f=h.y;"number"!==typeof p&&(p=1),"number"!==typeof f&&(f=500);var m=oo((function(e,t){return mo(c,e)||t})),g=oo(d),v=I.useMemo((function(){return{sticky:a,scrollY:f,listItemHeight:u,getComponent:m,onScroll:g}}),[a,f,u,m,g]);return I.createElement(Lb.Provider,{value:v},I.createElement(yb,G({},e,{className:F()(l,"".concat(s,"-virtual")),scroll:nt(nt({},o),{},{x:p}),components:nt(nt({},c),{},{body:null!==n&&void 0!==n&&n.length?Kb:void 0}),columns:r,internalHooks:av,tailor:!0,ref:t})))}var Xb=I.forwardRef(qb);function Jb(e){return dv(Xb,e)}Jb();const Yb=e=>null,Qb=e=>null;const Zb={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};var ey=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:Zb}))};const ty=I.forwardRef(ey);var ny=I.createContext(null),ry=function(e){for(var t=e.prefixCls,n=e.level,r=e.isStart,o=e.isEnd,a="".concat(t,"-indent-unit"),i=[],s=0;s<n;s+=1)i.push(I.createElement("span",{key:s,className:F()(a,Q(Q({},"".concat(a,"-start"),r[s]),"".concat(a,"-end"),o[s]))}));return I.createElement("span",{"aria-hidden":"true",className:"".concat(t,"-indent")},i)};const oy=I.memo(ry);function ay(e,t){return e[t]}var iy=["children"];function sy(e,t){return"".concat(e,"-").concat(t)}function ly(e,t){return null!==e&&void 0!==e?e:t}function uy(e){var t=e||{},n=t.title||"title";return{title:n,_title:t._title||[n],key:t.key||"key",children:t.children||"children"}}function cy(e){return function e(t){return W(t).map((function(t){if(!function(e){return e&&e.type&&e.type.isTreeNode}(t))return kt(!t,"Tree/TreeNode can only accept TreeNode as children."),null;var n=t.key,r=t.props,o=r.children,a=nt({key:n},Z(r,iy)),i=e(o);return i.length&&(a.children=i),a})).filter((function(e){return e}))}(e)}function dy(e,t,n){var r=uy(n),o=r._title,a=r.key,i=r.children,s=new Set(!0===t?[]:t),l=[];return function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n.map((function(u,c){for(var d,h=sy(r?r.pos:"0",c),p=ly(u[a],h),f=0;f<o.length;f+=1){var m=o[f];if(void 0!==u[m]){d=u[m];break}}var g=Object.assign(_(u,[].concat(P(o),[a,i])),{title:d,key:p,parent:r,pos:h,children:null,data:u,isStart:[].concat(P(r?r.isStart:[]),[0===c]),isEnd:[].concat(P(r?r.isEnd:[]),[c===n.length-1])});return l.push(g),!0===t||s.has(p)?g.children=e(u[i]||[],g):g.children=[],g}))}(e),l}function hy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.initWrapper,r=t.processEntity,o=t.onProcessFinished,a=t.externalGetKey,i=t.childrenPropName,s=t.fieldNames,l=a||(arguments.length>2?arguments[2]:void 0),u={},c={},d={posEntities:u,keyEntities:c};return n&&(d=n(d)||d),function(e,t,n){var r,o=("object"===J(n)?n:{externalGetKey:n})||{},a=o.childrenPropName,i=o.externalGetKey,s=uy(o.fieldNames),l=s.key,u=s.children,c=a||u;i?"string"===typeof i?r=function(e){return e[i]}:"function"===typeof i&&(r=function(e){return i(e)}):r=function(e,t){return ly(e[l],t)},function n(o,a,i,s){var l=o?o[c]:e,u=o?sy(i.pos,a):"0",d=o?[].concat(P(s),[o]):[];if(o){var h=r(o,u),p={node:o,index:a,pos:u,key:h,parentPos:i.node?i.pos:null,level:i.level+1,nodes:d};t(p)}l&&l.forEach((function(e,t){n(e,t,{node:o,pos:u,level:i?i.level+1:-1},d)}))}(null)}(e,(function(e){var t=e.node,n=e.index,o=e.pos,a=e.key,i=e.parentPos,s=e.level,l={node:t,nodes:e.nodes,index:n,key:a,pos:o,level:s},h=ly(a,o);u[o]=l,c[h]=l,l.parent=u[i],l.parent&&(l.parent.children=l.parent.children||[],l.parent.children.push(l)),r&&r(l,d)}),{externalGetKey:l,childrenPropName:i,fieldNames:s}),o&&o(d),d}function py(e,t){var n=t.expandedKeys,r=t.selectedKeys,o=t.loadedKeys,a=t.loadingKeys,i=t.checkedKeys,s=t.halfCheckedKeys,l=t.dragOverNodeKey,u=t.dropPosition,c=ay(t.keyEntities,e);return{eventKey:e,expanded:-1!==n.indexOf(e),selected:-1!==r.indexOf(e),loaded:-1!==o.indexOf(e),loading:-1!==a.indexOf(e),checked:-1!==i.indexOf(e),halfChecked:-1!==s.indexOf(e),pos:String(c?c.pos:""),dragOver:l===e&&0===u,dragOverGapTop:l===e&&-1===u,dragOverGapBottom:l===e&&1===u}}function fy(e){var t=e.data,n=e.expanded,r=e.selected,o=e.checked,a=e.loaded,i=e.loading,s=e.halfChecked,l=e.dragOver,u=e.dragOverGapTop,c=e.dragOverGapBottom,d=e.pos,h=e.active,p=e.eventKey,f=nt(nt({},t),{},{expanded:n,selected:r,checked:o,loaded:a,loading:i,halfChecked:s,dragOver:l,dragOverGapTop:u,dragOverGapBottom:c,pos:d,active:h,key:p});return"props"in f||Object.defineProperty(f,"props",{get:function(){return kt(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),e}}),f}var my=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],gy="open",vy="close",by=function(e){Ur(n,e);var t=Xr(n);function n(){var e;qt(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Q(Wr(e=t.call.apply(t,[this].concat(o))),"state",{dragNodeHighlight:!1}),Q(Wr(e),"selectHandle",void 0),Q(Wr(e),"cacheIndent",void 0),Q(Wr(e),"onSelectorClick",(function(t){(0,e.props.context.onNodeClick)(t,fy(e.props)),e.isSelectable()?e.onSelect(t):e.onCheck(t)})),Q(Wr(e),"onSelectorDoubleClick",(function(t){(0,e.props.context.onNodeDoubleClick)(t,fy(e.props))})),Q(Wr(e),"onSelect",(function(t){e.isDisabled()||(0,e.props.context.onNodeSelect)(t,fy(e.props))})),Q(Wr(e),"onCheck",(function(t){if(!e.isDisabled()){var n=e.props,r=n.disableCheckbox,o=n.checked,a=e.props.context.onNodeCheck;if(e.isCheckable()&&!r){var i=!o;a(t,fy(e.props),i)}}})),Q(Wr(e),"onMouseEnter",(function(t){(0,e.props.context.onNodeMouseEnter)(t,fy(e.props))})),Q(Wr(e),"onMouseLeave",(function(t){(0,e.props.context.onNodeMouseLeave)(t,fy(e.props))})),Q(Wr(e),"onContextMenu",(function(t){(0,e.props.context.onNodeContextMenu)(t,fy(e.props))})),Q(Wr(e),"onDragStart",(function(t){var n=e.props.context.onNodeDragStart;t.stopPropagation(),e.setState({dragNodeHighlight:!0}),n(t,Wr(e));try{t.dataTransfer.setData("text/plain","")}catch(r){}})),Q(Wr(e),"onDragEnter",(function(t){var n=e.props.context.onNodeDragEnter;t.preventDefault(),t.stopPropagation(),n(t,Wr(e))})),Q(Wr(e),"onDragOver",(function(t){var n=e.props.context.onNodeDragOver;t.preventDefault(),t.stopPropagation(),n(t,Wr(e))})),Q(Wr(e),"onDragLeave",(function(t){var n=e.props.context.onNodeDragLeave;t.stopPropagation(),n(t,Wr(e))})),Q(Wr(e),"onDragEnd",(function(t){var n=e.props.context.onNodeDragEnd;t.stopPropagation(),e.setState({dragNodeHighlight:!1}),n(t,Wr(e))})),Q(Wr(e),"onDrop",(function(t){var n=e.props.context.onNodeDrop;t.preventDefault(),t.stopPropagation(),e.setState({dragNodeHighlight:!1}),n(t,Wr(e))})),Q(Wr(e),"onExpand",(function(t){var n=e.props,r=n.loading,o=n.context.onNodeExpand;r||o(t,fy(e.props))})),Q(Wr(e),"setSelectHandle",(function(t){e.selectHandle=t})),Q(Wr(e),"getNodeState",(function(){var t=e.props.expanded;return e.isLeaf()?null:t?gy:vy})),Q(Wr(e),"hasChildren",(function(){var t=e.props.eventKey;return!!((ay(e.props.context.keyEntities,t)||{}).children||[]).length})),Q(Wr(e),"isLeaf",(function(){var t=e.props,n=t.isLeaf,r=t.loaded,o=e.props.context.loadData,a=e.hasChildren();return!1!==n&&(n||!o&&!a||o&&r&&!a)})),Q(Wr(e),"isDisabled",(function(){var t=e.props.disabled;return!(!e.props.context.disabled&&!t)})),Q(Wr(e),"isCheckable",(function(){var t=e.props.checkable,n=e.props.context.checkable;return!(!n||!1===t)&&n})),Q(Wr(e),"syncLoadData",(function(t){var n=t.expanded,r=t.loading,o=t.loaded,a=e.props.context,i=a.loadData,s=a.onNodeLoad;r||i&&n&&!e.isLeaf()&&!o&&s(fy(e.props))})),Q(Wr(e),"isDraggable",(function(){var t=e.props,n=t.data,r=t.context.draggable;return!(!r||r.nodeDraggable&&!r.nodeDraggable(n))})),Q(Wr(e),"renderDragHandler",(function(){var t=e.props.context,n=t.draggable,r=t.prefixCls;return null!==n&&void 0!==n&&n.icon?I.createElement("span",{className:"".concat(r,"-draggable-icon")},n.icon):null})),Q(Wr(e),"renderSwitcherIconDom",(function(t){var n=e.props.switcherIcon,r=e.props.context.switcherIcon,o=n||r;return"function"===typeof o?o(nt(nt({},e.props),{},{isLeaf:t})):o})),Q(Wr(e),"renderSwitcher",(function(){var t=e.props.expanded,n=e.props.context.prefixCls;if(e.isLeaf()){var r=e.renderSwitcherIconDom(!0);return!1!==r?I.createElement("span",{className:F()("".concat(n,"-switcher"),"".concat(n,"-switcher-noop"))},r):null}var o=F()("".concat(n,"-switcher"),"".concat(n,"-switcher_").concat(t?gy:vy)),a=e.renderSwitcherIconDom(!1);return!1!==a?I.createElement("span",{onClick:e.onExpand,className:o},a):null})),Q(Wr(e),"renderCheckbox",(function(){var t=e.props,n=t.checked,r=t.halfChecked,o=t.disableCheckbox,a=e.props.context.prefixCls,i=e.isDisabled(),s=e.isCheckable();if(!s)return null;var l="boolean"!==typeof s?s:null;return I.createElement("span",{className:F()("".concat(a,"-checkbox"),n&&"".concat(a,"-checkbox-checked"),!n&&r&&"".concat(a,"-checkbox-indeterminate"),(i||o)&&"".concat(a,"-checkbox-disabled")),onClick:e.onCheck},l)})),Q(Wr(e),"renderIcon",(function(){var t=e.props.loading,n=e.props.context.prefixCls;return I.createElement("span",{className:F()("".concat(n,"-iconEle"),"".concat(n,"-icon__").concat(e.getNodeState()||"docu"),t&&"".concat(n,"-icon_loading"))})})),Q(Wr(e),"renderSelector",(function(){var t,n,r=e.state.dragNodeHighlight,o=e.props,a=o.title,i=void 0===a?"---":a,s=o.selected,l=o.icon,u=o.loading,c=o.data,d=e.props.context,h=d.prefixCls,p=d.showIcon,f=d.icon,m=d.loadData,g=d.titleRender,v=e.isDisabled(),b="".concat(h,"-node-content-wrapper");if(p){var y=l||f;t=y?I.createElement("span",{className:F()("".concat(h,"-iconEle"),"".concat(h,"-icon__customize"))},"function"===typeof y?y(e.props):y):e.renderIcon()}else m&&u&&(t=e.renderIcon());n="function"===typeof i?i(c):g?g(c):i;var w=I.createElement("span",{className:"".concat(h,"-title")},n);return I.createElement("span",{ref:e.setSelectHandle,title:"string"===typeof i?i:"",className:F()("".concat(b),"".concat(b,"-").concat(e.getNodeState()||"normal"),!v&&(s||r)&&"".concat(h,"-node-selected")),onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onContextMenu:e.onContextMenu,onClick:e.onSelectorClick,onDoubleClick:e.onSelectorDoubleClick},t,w,e.renderDropIndicator())})),Q(Wr(e),"renderDropIndicator",(function(){var t=e.props,n=t.disabled,r=t.eventKey,o=e.props.context,a=o.draggable,i=o.dropLevelOffset,s=o.dropPosition,l=o.prefixCls,u=o.indent,c=o.dropIndicatorRender,d=o.dragOverNodeKey,h=o.direction,p=!n&&!!a&&d===r,f=null!==u&&void 0!==u?u:e.cacheIndent;return e.cacheIndent=u,p?c({dropPosition:s,dropLevelOffset:i,indent:f,prefixCls:l,direction:h}):null})),e}return Jt(n,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var e=this.props.selectable,t=this.props.context.selectable;return"boolean"===typeof e?e:t}},{key:"render",value:function(){var e,t=this.props,n=t.eventKey,r=t.className,o=t.style,a=t.dragOver,i=t.dragOverGapTop,s=t.dragOverGapBottom,l=t.isLeaf,u=t.isStart,c=t.isEnd,d=t.expanded,h=t.selected,p=t.checked,f=t.halfChecked,m=t.loading,g=t.domRef,v=t.active,b=(t.data,t.onMouseMove),y=t.selectable,w=Z(t,my),x=this.props.context,k=x.prefixCls,C=x.filterTreeNode,S=x.keyEntities,E=x.dropContainerKey,N=x.dropTargetKey,$=x.draggingNodeKey,T=this.isDisabled(),A=wl(w,{aria:!0,data:!0}),O=(ay(S,n)||{}).level,R=c[c.length-1],P=this.isDraggable(),D=!T&&P,_=$===n,M=void 0!==y?{"aria-selected":!!y}:void 0;return I.createElement("div",G({ref:g,className:F()(r,"".concat(k,"-treenode"),(e={},Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(e,"".concat(k,"-treenode-disabled"),T),"".concat(k,"-treenode-switcher-").concat(d?"open":"close"),!l),"".concat(k,"-treenode-checkbox-checked"),p),"".concat(k,"-treenode-checkbox-indeterminate"),f),"".concat(k,"-treenode-selected"),h),"".concat(k,"-treenode-loading"),m),"".concat(k,"-treenode-active"),v),"".concat(k,"-treenode-leaf-last"),R),"".concat(k,"-treenode-draggable"),P),"dragging",_),Q(Q(Q(Q(Q(Q(e,"drop-target",N===n),"drop-container",E===n),"drag-over",!T&&a),"drag-over-gap-top",!T&&i),"drag-over-gap-bottom",!T&&s),"filter-node",C&&C(fy(this.props))))),style:o,draggable:D,"aria-grabbed":_,onDragStart:D?this.onDragStart:void 0,onDragEnter:P?this.onDragEnter:void 0,onDragOver:P?this.onDragOver:void 0,onDragLeave:P?this.onDragLeave:void 0,onDrop:P?this.onDrop:void 0,onDragEnd:P?this.onDragEnd:void 0,onMouseMove:b},M,A),I.createElement(oy,{prefixCls:k,level:O,isStart:u,isEnd:c}),this.renderDragHandler(),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),n}(I.Component),yy=function(e){return I.createElement(ny.Consumer,null,(function(t){return I.createElement(by,G({},e,{context:t}))}))};yy.displayName="TreeNode",yy.isTreeNode=1;const wy=yy;function xy(e,t){if(!e)return[];var n=e.slice(),r=n.indexOf(t);return r>=0&&n.splice(r,1),n}function ky(e,t){var n=(e||[]).slice();return-1===n.indexOf(t)&&n.push(t),n}function Cy(e){return e.split("-")}function Sy(e,t){var n=[];return function e(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){var r=t.key,o=t.children;n.push(r),e(o)}))}(ay(t,e).children),n}function Ey(e){if(e.parent){var t=Cy(e.pos);return Number(t[t.length-1])===e.parent.children.length-1}return!1}function Ny(e,t,n,r,o,a,i,s,l,u){var c,d=e.clientX,h=e.clientY,p=e.target.getBoundingClientRect(),f=p.top,m=p.height,g=(("rtl"===u?-1:1)*(((null===o||void 0===o?void 0:o.x)||0)-d)-12)/r,v=l.filter((function(e){var t;return null===(t=s[e])||void 0===t||null===(t=t.children)||void 0===t?void 0:t.length})),b=ay(s,n.props.eventKey);if(h<f+m/2){var y=i.findIndex((function(e){return e.key===b.key})),w=i[y<=0?0:y-1].key;b=ay(s,w)}var x=b.key,k=b,C=b.key,S=0,E=0;if(!v.includes(x))for(var N=0;N<g&&Ey(b);N+=1)b=b.parent,E+=1;var I=t.props.data,$=b.node,T=!0;return function(e){var t=Cy(e.pos);return 0===Number(t[t.length-1])}(b)&&0===b.level&&h<f+m/2&&a({dragNode:I,dropNode:$,dropPosition:-1})&&b.key===n.props.eventKey?S=-1:(k.children||[]).length&&v.includes(C)?a({dragNode:I,dropNode:$,dropPosition:0})?S=0:T=!1:0===E?g>-1.5?a({dragNode:I,dropNode:$,dropPosition:1})?S=1:T=!1:a({dragNode:I,dropNode:$,dropPosition:0})?S=0:a({dragNode:I,dropNode:$,dropPosition:1})?S=1:T=!1:a({dragNode:I,dropNode:$,dropPosition:1})?S=1:T=!1,{dropPosition:S,dropLevelOffset:E,dropTargetKey:b.key,dropTargetPos:b.pos,dragOverNodeKey:C,dropContainerKey:0===S?null:(null===(c=b.parent)||void 0===c?void 0:c.key)||null,dropAllowed:T}}function Iy(e,t){if(e)return t.multiple?e.slice():e.length?[e[0]]:e}function $y(e){if(!e)return null;var t;if(Array.isArray(e))t={checkedKeys:e,halfCheckedKeys:void 0};else{if("object"!==J(e))return kt(!1,"`checkedKeys` is not an array or an object"),null;t={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0}}return t}function Ty(e,t){var n=new Set;function r(e){if(!n.has(e)){var o=ay(t,e);if(o){n.add(e);var a=o.parent;o.node.disabled||a&&r(a.key)}}}return(e||[]).forEach((function(e){r(e)})),P(n)}function Ay(e,t){var n=new Set;return e.forEach((function(e){t.has(e)||n.add(e)})),n}function Oy(e){var t=e||{},n=t.disabled,r=t.disableCheckbox,o=t.checkable;return!(!n&&!r)||!1===o}function Ry(e,t,n,r){var o,a=[];o=r||Oy;var i,s=new Set(e.filter((function(e){var t=!!ay(n,e);return t||a.push(e),t}))),l=new Map,u=0;return Object.keys(n).forEach((function(e){var t=n[e],r=t.level,o=l.get(r);o||(o=new Set,l.set(r,o)),o.add(t),u=Math.max(u,r)})),kt(!a.length,"Tree missing follow keys: ".concat(a.slice(0,100).map((function(e){return"'".concat(e,"'")})).join(", "))),i=!0===t?function(e,t,n,r){for(var o=new Set(e),a=new Set,i=0;i<=n;i+=1)(t.get(i)||new Set).forEach((function(e){var t=e.key,n=e.node,a=e.children,i=void 0===a?[]:a;o.has(t)&&!r(n)&&i.filter((function(e){return!r(e.node)})).forEach((function(e){o.add(e.key)}))}));for(var s=new Set,l=n;l>=0;l-=1)(t.get(l)||new Set).forEach((function(e){var t=e.parent,n=e.node;if(!r(n)&&e.parent&&!s.has(e.parent.key))if(r(e.parent.node))s.add(t.key);else{var i=!0,l=!1;(t.children||[]).filter((function(e){return!r(e.node)})).forEach((function(e){var t=e.key,n=o.has(t);i&&!n&&(i=!1),l||!n&&!a.has(t)||(l=!0)})),i&&o.add(t.key),l&&a.add(t.key),s.add(t.key)}}));return{checkedKeys:Array.from(o),halfCheckedKeys:Array.from(Ay(a,o))}}(s,l,u,o):function(e,t,n,r,o){for(var a=new Set(e),i=new Set(t),s=0;s<=r;s+=1)(n.get(s)||new Set).forEach((function(e){var t=e.key,n=e.node,r=e.children,s=void 0===r?[]:r;a.has(t)||i.has(t)||o(n)||s.filter((function(e){return!o(e.node)})).forEach((function(e){a.delete(e.key)}))}));i=new Set;for(var l=new Set,u=r;u>=0;u-=1)(n.get(u)||new Set).forEach((function(e){var t=e.parent,n=e.node;if(!o(n)&&e.parent&&!l.has(e.parent.key))if(o(e.parent.node))l.add(t.key);else{var r=!0,s=!1;(t.children||[]).filter((function(e){return!o(e.node)})).forEach((function(e){var t=e.key,n=a.has(t);r&&!n&&(r=!1),s||!n&&!i.has(t)||(s=!0)})),r||a.delete(t.key),s&&i.add(t.key),l.add(t.key)}}));return{checkedKeys:Array.from(a),halfCheckedKeys:Array.from(Ay(i,a))}}(s,t.halfCheckedKeys,l,u,o),i}var Py=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"],Dy=(0,I.forwardRef)((function(e,t){var n=e.prefixCls,r=void 0===n?"rc-checkbox":n,o=e.className,a=e.style,i=e.checked,s=e.disabled,l=e.defaultChecked,u=void 0!==l&&l,c=e.type,d=void 0===c?"checkbox":c,h=e.title,p=e.onChange,f=Z(e,Py),m=(0,I.useRef)(null),g=(0,I.useRef)(null),v=X(so(u,{value:i}),2),b=v[0],y=v[1];(0,I.useImperativeHandle)(t,(function(){return{focus:function(e){var t;null===(t=m.current)||void 0===t||t.focus(e)},blur:function(){var e;null===(e=m.current)||void 0===e||e.blur()},input:m.current,nativeElement:g.current}}));var w=F()(r,o,Q(Q({},"".concat(r,"-checked"),b),"".concat(r,"-disabled"),s));return I.createElement("span",{className:w,title:h,style:a,ref:g},I.createElement("input",G({},f,{className:"".concat(r,"-input"),ref:m,onChange:function(t){s||("checked"in e||y(t.target.checked),null===p||void 0===p||p({target:nt(nt({},e),{},{type:d,checked:t.target.checked}),stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()},nativeEvent:t.nativeEvent}))},disabled:s,checked:!!b,type:d})),I.createElement("span",{className:"".concat(r,"-inner")}))}));const Fy=Dy,_y=I.createContext(null),My=e=>{const{checkboxCls:t}=e,n=`${t}-wrapper`;return[{[`${t}-group`]:Object.assign(Object.assign({},_o(e)),{display:"inline-flex",flexWrap:"wrap",columnGap:e.marginXS,[`> ${e.antCls}-row`]:{flex:1}}),[n]:Object.assign(Object.assign({},_o(e)),{display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},[`& + ${n}`]:{marginInlineStart:0},[`&${n}-in-form-item`]:{'input[type="checkbox"]':{width:14,height:14}}}),[t]:Object.assign(Object.assign({},_o(e)),{position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",borderRadius:e.borderRadiusSM,alignSelf:"center",[`${t}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0,margin:0,[`&:focus-visible + ${t}-inner`]:Object.assign({},zo(e))},[`${t}-inner`]:{boxSizing:"border-box",display:"block",width:e.checkboxSize,height:e.checkboxSize,direction:"ltr",backgroundColor:e.colorBgContainer,border:`${yn(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,borderCollapse:"separate",transition:`all ${e.motionDurationSlow}`,"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"25%",display:"table",width:e.calc(e.checkboxSize).div(14).mul(5).equal(),height:e.calc(e.checkboxSize).div(14).mul(8).equal(),border:`${yn(e.lineWidthBold)} solid ${e.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${e.motionDurationFast} ${e.motionEaseInBack}, opacity ${e.motionDurationFast}`}},"& + span":{paddingInlineStart:e.paddingXS,paddingInlineEnd:e.paddingXS}})},{[`\n        ${n}:not(${n}-disabled),\n        ${t}:not(${t}-disabled)\n      `]:{[`&:hover ${t}-inner`]:{borderColor:e.colorPrimary}},[`${n}:not(${n}-disabled)`]:{[`&:hover ${t}-checked:not(${t}-disabled) ${t}-inner`]:{backgroundColor:e.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${t}-checked:not(${t}-disabled):after`]:{borderColor:e.colorPrimaryHover}}},{[`${t}-checked`]:{[`${t}-inner`]:{backgroundColor:e.colorPrimary,borderColor:e.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`all ${e.motionDurationMid} ${e.motionEaseOutBack} ${e.motionDurationFast}`}}},[`\n        ${n}-checked:not(${n}-disabled),\n        ${t}-checked:not(${t}-disabled)\n      `]:{[`&:hover ${t}-inner`]:{backgroundColor:e.colorPrimaryHover,borderColor:"transparent"}}},{[t]:{"&-indeterminate":{[`${t}-inner`]:{backgroundColor:`${e.colorBgContainer} !important`,borderColor:`${e.colorBorder} !important`,"&:after":{top:"50%",insetInlineStart:"50%",width:e.calc(e.fontSizeLG).div(2).equal(),height:e.calc(e.fontSizeLG).div(2).equal(),backgroundColor:e.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}},[`&:hover ${t}-inner`]:{backgroundColor:`${e.colorBgContainer} !important`,borderColor:`${e.colorPrimary} !important`}}}},{[`${n}-disabled`]:{cursor:"not-allowed"},[`${t}-disabled`]:{[`&, ${t}-input`]:{cursor:"not-allowed",pointerEvents:"none"},[`${t}-inner`]:{background:e.colorBgContainerDisabled,borderColor:e.colorBorder,"&:after":{borderColor:e.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:e.colorTextDisabled},[`&${t}-indeterminate ${t}-inner::after`]:{background:e.colorTextDisabled}}}]};function zy(e,t){const n=So(t,{checkboxCls:`.${e}`,checkboxSize:t.controlInteractiveSize});return[My(n)]}const Ly=ha("Checkbox",((e,t)=>{let{prefixCls:n}=t;return[zy(n,e)]}));var By=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const jy=(e,t)=>{var n;const{prefixCls:r,className:o,rootClassName:a,children:i,indeterminate:s=!1,style:l,onMouseEnter:u,onMouseLeave:c,skipGroup:d=!1,disabled:h}=e,p=By(e,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:f,direction:m,checkbox:g}=I.useContext(B),v=I.useContext(_y),{isFormItemInput:b}=I.useContext(Zi),y=I.useContext(dl),w=null!==(n=(null===v||void 0===v?void 0:v.disabled)||h)&&void 0!==n?n:y,x=I.useRef(p.value);I.useEffect((()=>{null===v||void 0===v||v.registerValue(p.value)}),[]),I.useEffect((()=>{if(!d)return p.value!==x.current&&(null===v||void 0===v||v.cancelValue(x.current),null===v||void 0===v||v.registerValue(p.value),x.current=p.value),()=>null===v||void 0===v?void 0:v.cancelValue(p.value)}),[p.value]);const k=f("checkbox",r),C=hl(k),[S,E,N]=Ly(k,C),$=Object.assign({},p);v&&!d&&($.onChange=function(){p.onChange&&p.onChange.apply(p,arguments),v.toggleOption&&v.toggleOption({label:i,value:p.value})},$.name=v.name,$.checked=v.value.includes(p.value));const T=F()(`${k}-wrapper`,{[`${k}-rtl`]:"rtl"===m,[`${k}-wrapper-checked`]:$.checked,[`${k}-wrapper-disabled`]:w,[`${k}-wrapper-in-form-item`]:b},null===g||void 0===g?void 0:g.className,o,a,N,C,E),A=F()({[`${k}-indeterminate`]:s},nu,E),O=s?"mixed":void 0;return S(I.createElement(gc,{component:"Checkbox",disabled:w},I.createElement("label",{className:T,style:Object.assign(Object.assign({},null===g||void 0===g?void 0:g.style),l),onMouseEnter:u,onMouseLeave:c},I.createElement(Fy,Object.assign({"aria-checked":O},$,{prefixCls:k,className:A,disabled:w,ref:t})),void 0!==i&&I.createElement("span",null,i))))};const Hy=I.forwardRef(jy);var Vy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const Wy=I.forwardRef(((e,t)=>{const{defaultValue:n,children:r,options:o=[],prefixCls:a,className:i,rootClassName:s,style:l,onChange:u}=e,c=Vy(e,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]),{getPrefixCls:d,direction:h}=I.useContext(B),[p,f]=I.useState(c.value||n||[]),[m,g]=I.useState([]);I.useEffect((()=>{"value"in c&&f(c.value||[])}),[c.value]);const v=I.useMemo((()=>o.map((e=>"string"===typeof e||"number"===typeof e?{label:e,value:e}:e))),[o]),b=d("checkbox",a),y=`${b}-group`,w=hl(b),[x,k,C]=Ly(b,w),S=_(c,["value","disabled"]),E=o.length?v.map((e=>I.createElement(Hy,{prefixCls:b,key:e.value.toString(),disabled:"disabled"in e?e.disabled:c.disabled,value:e.value,checked:p.includes(e.value),onChange:e.onChange,className:`${y}-item`,style:e.style,title:e.title,id:e.id,required:e.required},e.label))):r,N={toggleOption:e=>{const t=p.indexOf(e.value),n=P(p);-1===t?n.push(e.value):n.splice(t,1),"value"in c||f(n),null===u||void 0===u||u(n.filter((e=>m.includes(e))).sort(((e,t)=>v.findIndex((t=>t.value===e))-v.findIndex((e=>e.value===t)))))},value:p,disabled:c.disabled,name:c.name,registerValue:e=>{g((t=>[].concat(P(t),[e])))},cancelValue:e=>{g((t=>t.filter((t=>t!==e))))}},$=F()(y,{[`${y}-rtl`]:"rtl"===h},i,s,C,w,k);return x(I.createElement("div",Object.assign({className:$,style:l},S,{ref:t}),I.createElement(_y.Provider,{value:N},E)))})),Gy=Wy,Uy=Hy;Uy.Group=Gy,Uy.__ANT_CHECKBOX=!0;const Ky=Uy;var qy=vp.ESC,Xy=vp.TAB;const Jy=(0,I.forwardRef)((function(e,t){var n=e.overlay,r=e.arrow,o=e.prefixCls,a=(0,I.useMemo)((function(){return"function"===typeof n?n():n}),[n]),i=uo(t,null===a||void 0===a?void 0:a.ref);return I.createElement(I.Fragment,null,r&&I.createElement("div",{className:"".concat(o,"-arrow")}),I.cloneElement(a,{ref:ho(a)?i:void 0}))}));var Yy={adjustX:1,adjustY:1},Qy=[0,0];const Zy={topLeft:{points:["bl","tl"],overflow:Yy,offset:[0,-4],targetOffset:Qy},top:{points:["bc","tc"],overflow:Yy,offset:[0,-4],targetOffset:Qy},topRight:{points:["br","tr"],overflow:Yy,offset:[0,-4],targetOffset:Qy},bottomLeft:{points:["tl","bl"],overflow:Yy,offset:[0,4],targetOffset:Qy},bottom:{points:["tc","bc"],overflow:Yy,offset:[0,4],targetOffset:Qy},bottomRight:{points:["tr","br"],overflow:Yy,offset:[0,4],targetOffset:Qy}};var ew=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function tw(e,t){var n,r=e.arrow,o=void 0!==r&&r,a=e.prefixCls,i=void 0===a?"rc-dropdown":a,s=e.transitionName,l=e.animation,u=e.align,c=e.placement,d=void 0===c?"bottomLeft":c,h=e.placements,p=void 0===h?Zy:h,f=e.getPopupContainer,m=e.showAction,g=e.hideAction,v=e.overlayClassName,b=e.overlayStyle,y=e.visible,w=e.trigger,x=void 0===w?["hover"]:w,k=e.autoFocus,C=e.overlay,S=e.children,E=e.onVisibleChange,N=Z(e,ew),$=X(I.useState(),2),T=$[0],A=$[1],O="visible"in e?y:T,R=I.useRef(null),P=I.useRef(null),D=I.useRef(null);I.useImperativeHandle(t,(function(){return R.current}));var _=function(e){A(e),null===E||void 0===E||E(e)};!function(e){var t=e.visible,n=e.triggerRef,r=e.onVisibleChange,o=e.autoFocus,a=e.overlayRef,i=I.useRef(!1),s=function(){var e,o;t&&(null===(e=n.current)||void 0===e||null===(o=e.focus)||void 0===o||o.call(e),null===r||void 0===r||r(!1))},l=function(){var e;return!(null===(e=a.current)||void 0===e||!e.focus)&&(a.current.focus(),i.current=!0,!0)},u=function(e){switch(e.keyCode){case qy:s();break;case Xy:var t=!1;i.current||(t=l()),t?e.preventDefault():s()}};I.useEffect((function(){return t?(window.addEventListener("keydown",u),o&&Tl(l,3),function(){window.removeEventListener("keydown",u),i.current=!1}):function(){i.current=!1}}),[t])}({visible:O,triggerRef:D,onVisibleChange:_,autoFocus:k,overlayRef:P});var M=function(){return I.createElement(Jy,{ref:P,overlay:C,prefixCls:i,arrow:o})},z=I.cloneElement(S,{className:F()(null===(n=S.props)||void 0===n?void 0:n.className,O&&function(){var t=e.openClassName;return void 0!==t?t:"".concat(i,"-open")}()),ref:ho(S)?uo(D,S.ref):void 0}),L=g;return L||-1===x.indexOf("contextMenu")||(L=["click"]),I.createElement(pm,G({builtinPlacements:p},N,{prefixCls:i,ref:R,popupClassName:F()(v,Q({},"".concat(i,"-show-arrow"),o)),popupStyle:b,action:x,showAction:m,hideAction:L,popupPlacement:d,popupAlign:u,popupTransitionName:s,popupAnimation:l,popupVisible:O,stretch:function(){var t=e.minOverlayWidthMatchTrigger,n=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?t:!n}()?"minWidth":"",popup:"function"===typeof C?M:M(),onPopupVisibleChange:_,onPopupClick:function(t){var n=e.onOverlayClick;A(!1),n&&n(t)},getPopupContainer:f}),z)}const nw=I.forwardRef(tw);const rw=(e,t,n,r)=>function(e){return t=>I.createElement(ip,{theme:{token:{motion:!1,zIndexPopupBase:0}}},I.createElement(e,Object.assign({},t)))}((o=>{const{prefixCls:a,style:i}=o,s=I.useRef(null),[l,u]=I.useState(0),[c,d]=I.useState(0),[h,p]=so(!1,{value:o.open}),{getPrefixCls:f}=I.useContext(B),m=f(t||"select",a);I.useEffect((()=>{if(p(!0),"undefined"!==typeof ResizeObserver){const e=new ResizeObserver((e=>{const t=e[0].target;u(t.offsetHeight+8),d(t.offsetWidth)})),t=setInterval((()=>{var r;const o=n?`.${n(m)}`:`.${m}-dropdown`,a=null===(r=s.current)||void 0===r?void 0:r.querySelector(o);a&&(clearInterval(t),e.observe(a))}),10);return()=>{clearInterval(t),e.disconnect()}}}),[]);let g=Object.assign(Object.assign({},o),{style:Object.assign(Object.assign({},i),{margin:0}),open:h,visible:h,getPopupContainer:()=>s.current});r&&(g=r(g));const v={paddingBottom:l,position:"relative",minWidth:c};return I.createElement("div",{ref:s,style:v},I.createElement(e,Object.assign({},g)))}));var ow=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],aw=void 0;function iw(e,t){var n=e.prefixCls,r=e.invalidate,o=e.item,a=e.renderItem,i=e.responsive,s=e.responsiveDisabled,l=e.registerSize,u=e.itemKey,c=e.className,d=e.style,h=e.children,p=e.display,f=e.order,m=e.component,g=void 0===m?"div":m,v=Z(e,ow),b=i&&!p;function y(e){l(u,e)}I.useEffect((function(){return function(){y(null)}}),[]);var w,x=a&&o!==aw?a(o):h;r||(w={opacity:b?0:1,height:b?0:aw,overflowY:b?"hidden":aw,order:i?f:aw,pointerEvents:b?"none":aw,position:b?"absolute":aw});var k={};b&&(k["aria-hidden"]=!0);var C=I.createElement(g,G({className:F()(!r&&n,c),style:nt(nt({},w),d)},k,v,{ref:t}),x);return i&&(C=I.createElement(uh,{onResize:function(e){y(e.offsetWidth)},disabled:s},C)),C}var sw=I.forwardRef(iw);sw.displayName="Item";const lw=sw;function uw(){var e=I.useRef(null);return function(t){e.current||(e.current=[],function(e){if("undefined"===typeof MessageChannel)Tl(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}((function(){(0,ru.unstable_batchedUpdates)((function(){e.current.forEach((function(e){e()})),e.current=null}))}))),e.current.push(t)}}function cw(e,t){var n=X(I.useState(t),2),r=n[0],o=n[1];return[r,oo((function(t){e((function(){o(t)}))}))]}var dw=I.createContext(null),hw=["component"],pw=["className"],fw=["className"],mw=function(e,t){var n=I.useContext(dw);if(!n){var r=e.component,o=void 0===r?"div":r,a=Z(e,hw);return I.createElement(o,G({},a,{ref:t}))}var i=n.className,s=Z(n,pw),l=e.className,u=Z(e,fw);return I.createElement(dw.Provider,{value:null},I.createElement(lw,G({ref:t,className:F()(i,l)},s,u)))},gw=I.forwardRef(mw);gw.displayName="RawItem";const vw=gw;var bw=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],yw="responsive",ww="invalidate";function xw(e){return"+ ".concat(e.length," ...")}function kw(e,t){var n=e.prefixCls,r=void 0===n?"rc-overflow":n,o=e.data,a=void 0===o?[]:o,i=e.renderItem,s=e.renderRawItem,l=e.itemKey,u=e.itemWidth,c=void 0===u?10:u,d=e.ssr,h=e.style,p=e.className,f=e.maxCount,m=e.renderRest,g=e.renderRawRest,v=e.suffix,b=e.component,y=void 0===b?"div":b,w=e.itemComponent,x=e.onVisibleChange,k=Z(e,bw),C="full"===d,S=uw(),E=X(cw(S,null),2),N=E[0],$=E[1],T=N||0,A=X(cw(S,new Map),2),O=A[0],R=A[1],P=X(cw(S,0),2),D=P[0],_=P[1],M=X(cw(S,0),2),z=M[0],L=M[1],B=X(cw(S,0),2),j=B[0],H=B[1],V=X((0,I.useState)(null),2),W=V[0],U=V[1],K=X((0,I.useState)(null),2),q=K[0],J=K[1],Y=I.useMemo((function(){return null===q&&C?Number.MAX_SAFE_INTEGER:q||0}),[q,N]),Q=X((0,I.useState)(!1),2),ee=Q[0],te=Q[1],ne="".concat(r,"-item"),re=Math.max(D,z),oe=f===yw,ae=a.length&&oe,ie=f===ww,se=ae||"number"===typeof f&&a.length>f,le=(0,I.useMemo)((function(){var e=a;return ae?e=null===N&&C?a:a.slice(0,Math.min(a.length,T/c)):"number"===typeof f&&(e=a.slice(0,f)),e}),[a,c,N,f,ae]),ue=(0,I.useMemo)((function(){return ae?a.slice(Y+1):a.slice(le.length)}),[a,le,ae,Y]),ce=(0,I.useCallback)((function(e,t){var n;return"function"===typeof l?l(e):null!==(n=l&&(null===e||void 0===e?void 0:e[l]))&&void 0!==n?n:t}),[l]),de=(0,I.useCallback)(i||function(e){return e},[i]);function he(e,t,n){(q!==e||void 0!==t&&t!==W)&&(J(e),n||(te(e<a.length-1),null===x||void 0===x||x(e)),void 0!==t&&U(t))}function pe(e,t){R((function(n){var r=new Map(n);return null===t?r.delete(e):r.set(e,t),r}))}function fe(e){return O.get(ce(le[e],e))}In((function(){if(T&&"number"===typeof re&&le){var e=j,t=le.length,n=t-1;if(!t)return void he(0,null);for(var r=0;r<t;r+=1){var o=fe(r);if(C&&(o=o||0),void 0===o){he(r-1,void 0,!0);break}if(e+=o,0===n&&e<=T||r===n-1&&e+fe(n)<=T){he(n,null);break}if(e+re>T){he(r-1,e-o-j+z);break}}v&&fe(0)+j>T&&U(null)}}),[T,O,z,j,ce,le]);var me=ee&&!!ue.length,ge={};null!==W&&ae&&(ge={position:"absolute",left:W,top:0});var ve,be={prefixCls:ne,responsive:ae,component:w,invalidate:ie},ye=s?function(e,t){var n=ce(e,t);return I.createElement(dw.Provider,{key:n,value:nt(nt({},be),{},{order:t,item:e,itemKey:n,registerSize:pe,display:t<=Y})},s(e,t))}:function(e,t){var n=ce(e,t);return I.createElement(lw,G({},be,{order:t,key:n,item:e,renderItem:de,itemKey:n,registerSize:pe,display:t<=Y}))},we={order:me?Y:Number.MAX_SAFE_INTEGER,className:"".concat(ne,"-rest"),registerSize:function(e,t){L(t),_(z)},display:me};if(g)g&&(ve=I.createElement(dw.Provider,{value:nt(nt({},be),we)},g(ue)));else{var xe=m||xw;ve=I.createElement(lw,G({},be,we),"function"===typeof xe?xe(ue):xe)}var ke=I.createElement(y,G({className:F()(!ie&&r,p),style:h,ref:t},k),le.map(ye),se?ve:null,v&&I.createElement(lw,G({},be,{responsive:oe,responsiveDisabled:!ae,order:Y,className:"".concat(ne,"-suffix"),registerSize:function(e,t){H(t)},display:!0,style:ge}),v));return oe&&(ke=I.createElement(uh,{onResize:function(e,t){$(t.clientWidth)},disabled:!ae},ke)),ke}var Cw=I.forwardRef(kw);Cw.displayName="Overflow",Cw.Item=vw,Cw.RESPONSIVE=yw,Cw.INVALIDATE=ww;const Sw=Cw;var Ew=I.createContext(null);function Nw(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function Iw(e){return Nw(I.useContext(Ew),e)}var $w=["children","locked"],Tw=I.createContext(null);function Aw(e){var t=e.children,n=e.locked,r=Z(e,$w),o=I.useContext(Tw),a=Ut((function(){return function(e,t){var n=nt({},e);return Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}(o,r)}),[o,r],(function(e,t){return!n&&(e[0]!==t[0]||!Kt(e[1],t[1],!0))}));return I.createElement(Tw.Provider,{value:a},t)}var Ow=[],Rw=I.createContext(null);function Pw(){return I.useContext(Rw)}var Dw=I.createContext(Ow);function Fw(e){var t=I.useContext(Dw);return I.useMemo((function(){return void 0!==e?[].concat(P(t),[e]):t}),[t,e])}var _w=I.createContext(null);const Mw=I.createContext({});function zw(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Zl(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||"a"===n&&!!e.getAttribute("href"),o=e.getAttribute("tabindex"),a=Number(o),i=null;return o&&!Number.isNaN(a)?i=a:r&&null===i&&(i=0),r&&e.disabled&&(i=null),null!==i&&(i>=0||t&&i<0)}return!1}function Lw(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=P(e.querySelectorAll("*")).filter((function(e){return zw(e,t)}));return zw(e,t)&&n.unshift(e),n}var Bw=vp.LEFT,jw=vp.RIGHT,Hw=vp.UP,Vw=vp.DOWN,Ww=vp.ENTER,Gw=vp.ESC,Uw=vp.HOME,Kw=vp.END,qw=[Hw,Vw,Bw,jw];function Xw(e,t){return Lw(e,!0).filter((function(e){return t.has(e)}))}function Jw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var o=Xw(e,t),a=o.length,i=o.findIndex((function(e){return n===e}));return r<0?-1===i?i=a-1:i-=1:r>0&&(i+=1),o[i=(i+a)%a]}var Yw=function(e,t){var n=new Set,r=new Map,o=new Map;return e.forEach((function(e){var a=document.querySelector("[data-menu-id='".concat(Nw(t,e),"']"));a&&(n.add(a),o.set(a,e),r.set(e,a))})),{elements:n,key2element:r,element2key:o}};function Qw(e,t,n,r,o,a,i,s,l,u){var c=I.useRef(),d=I.useRef();d.current=t;var h=function(){Tl.cancel(c.current)};return I.useEffect((function(){return function(){h()}}),[]),function(p){var f=p.which;if([].concat(qw,[Ww,Gw,Uw,Kw]).includes(f)){var m=a(),g=Yw(m,r),v=g,b=v.elements,y=v.key2element,w=v.element2key,x=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(y.get(t),b),k=w.get(x),C=function(e,t,n,r){var o,a="prev",i="next",s="children",l="parent";if("inline"===e&&r===Ww)return{inlineTrigger:!0};var u=Q(Q({},Hw,a),Vw,i),c=Q(Q(Q(Q({},Bw,n?i:a),jw,n?a:i),Vw,s),Ww,s),d=Q(Q(Q(Q(Q(Q({},Hw,a),Vw,i),Ww,s),Gw,l),Bw,n?s:l),jw,n?l:s);switch(null===(o={inline:u,horizontal:c,vertical:d,inlineSub:u,horizontalSub:d,verticalSub:d}["".concat(e).concat(t?"":"Sub")])||void 0===o?void 0:o[r]){case a:return{offset:-1,sibling:!0};case i:return{offset:1,sibling:!0};case l:return{offset:-1,sibling:!1};case s:return{offset:1,sibling:!1};default:return null}}(e,1===i(k,!0).length,n,f);if(!C&&f!==Uw&&f!==Kw)return;(qw.includes(f)||[Uw,Kw].includes(f))&&p.preventDefault();var S=function(e){if(e){var t=e,n=e.querySelector("a");null!==n&&void 0!==n&&n.getAttribute("href")&&(t=n);var r=w.get(e);s(r),h(),c.current=Tl((function(){d.current===r&&t.focus()}))}};if([Uw,Kw].includes(f)||C.sibling||!x){var E,N,I=Xw(E=x&&"inline"!==e?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(x):o.current,b);N=f===Uw?I[0]:f===Kw?I[I.length-1]:Jw(E,b,x,C.offset),S(N)}else if(C.inlineTrigger)l(k);else if(C.offset>0)l(k,!0),h(),c.current=Tl((function(){g=Yw(m,r);var e=x.getAttribute("aria-controls"),t=Jw(document.getElementById(e),g.elements);S(t)}),5);else if(C.offset<0){var $=i(k,!0),T=$[$.length-2],A=y.get(T);l(T,!1),S(A)}}null===u||void 0===u||u(p)}}var Zw="__RC_UTIL_PATH_SPLIT__",ex=function(e){return e.join(Zw)},tx="rc-menu-more";function nx(){var e=X(I.useState({}),2)[1],t=(0,I.useRef)(new Map),n=(0,I.useRef)(new Map),r=X(I.useState([]),2),o=r[0],a=r[1],i=(0,I.useRef)(0),s=(0,I.useRef)(!1),l=(0,I.useCallback)((function(r,o){var a=ex(o);n.current.set(a,r),t.current.set(r,a),i.current+=1;var l,u=i.current;l=function(){u===i.current&&(s.current||e({}))},Promise.resolve().then(l)}),[]),u=(0,I.useCallback)((function(e,r){var o=ex(r);n.current.delete(o),t.current.delete(e)}),[]),c=(0,I.useCallback)((function(e){a(e)}),[]),d=(0,I.useCallback)((function(e,n){var r=t.current.get(e)||"",a=r.split(Zw);return n&&o.includes(a[0])&&a.unshift(tx),a}),[o]),h=(0,I.useCallback)((function(e,t){return e.filter((function(e){return void 0!==e})).some((function(e){return d(e,!0).includes(t)}))}),[d]),p=(0,I.useCallback)((function(e){var r="".concat(t.current.get(e)).concat(Zw),o=new Set;return P(n.current.keys()).forEach((function(e){e.startsWith(r)&&o.add(n.current.get(e))})),o}),[]);return I.useEffect((function(){return function(){s.current=!0}}),[]),{registerPath:l,unregisterPath:u,refreshOverflowKeys:c,isSubPathKey:h,getKeyPath:d,getKeys:function(){var e=P(t.current.keys());return o.length&&e.push(tx),e},getSubPathKeys:p}}function rx(e){var t=I.useRef(e);t.current=e;var n=I.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return e?n:void 0}var ox=Math.random().toFixed(5).toString().slice(2),ax=0;function ix(e,t,n,r){var o=I.useContext(Tw),a=o.activeKey,i=o.onActive,s=o.onInactive,l={active:a===e};return t||(l.onMouseEnter=function(t){null===n||void 0===n||n({key:e,domEvent:t}),i(e)},l.onMouseLeave=function(t){null===r||void 0===r||r({key:e,domEvent:t}),s(e)}),l}function sx(e){var t=I.useContext(Tw),n=t.mode,r=t.rtl,o=t.inlineIndent;if("inline"!==n)return null;return r?{paddingRight:e*o}:{paddingLeft:e*o}}function lx(e){var t,n=e.icon,r=e.props,o=e.children;return null===n||!1===n?null:("function"===typeof n?t=I.createElement(n,nt({},r)):"boolean"!==typeof n&&(t=n),t||o||null)}var ux=["item"];function cx(e){var t=e.item,n=Z(e,ux);return Object.defineProperty(n,"item",{get:function(){return kt(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}var dx=["title","attribute","elementRef"],hx=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],px=["active"],fx=function(e){Ur(n,e);var t=Xr(n);function n(){return qt(this,n),t.apply(this,arguments)}return Jt(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.attribute,r=e.elementRef,o=_(Z(e,dx),["eventKey","popupClassName","popupOffset","onTitleClick"]);return kt(!n,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),I.createElement(Sw.Item,G({},n,{title:"string"===typeof t?t:void 0},o,{ref:r}))}}]),n}(I.Component),mx=I.forwardRef((function(e,t){var n=e.style,r=e.className,o=e.eventKey,a=(e.warnKey,e.disabled),i=e.itemIcon,s=e.children,l=e.role,u=e.onMouseEnter,c=e.onMouseLeave,d=e.onClick,h=e.onKeyDown,p=e.onFocus,f=Z(e,hx),m=Iw(o),g=I.useContext(Tw),v=g.prefixCls,b=g.onItemClick,y=g.disabled,w=g.overflowDisabled,x=g.itemIcon,k=g.selectedKeys,C=g.onActive,S=I.useContext(Mw)._internalRenderMenuItem,E="".concat(v,"-item"),N=I.useRef(),$=I.useRef(),T=y||a,A=co(t,$),O=Fw(o);var R=function(e){return{key:o,keyPath:P(O).reverse(),item:N.current,domEvent:e}},D=i||x,_=ix(o,T,u,c),M=_.active,z=Z(_,px),L=k.includes(o),B=sx(O.length),j={};"option"===e.role&&(j["aria-selected"]=L);var H=I.createElement(fx,G({ref:N,elementRef:A,role:null===l?"none":l||"menuitem",tabIndex:a?null:-1,"data-menu-id":w&&m?null:m},f,z,j,{component:"li","aria-disabled":a,style:nt(nt({},B),n),className:F()(E,Q(Q(Q({},"".concat(E,"-active"),M),"".concat(E,"-selected"),L),"".concat(E,"-disabled"),T),r),onClick:function(e){if(!T){var t=R(e);null===d||void 0===d||d(cx(t)),b(t)}},onKeyDown:function(e){if(null===h||void 0===h||h(e),e.which===vp.ENTER){var t=R(e);null===d||void 0===d||d(cx(t)),b(t)}},onFocus:function(e){C(o),null===p||void 0===p||p(e)}}),s,I.createElement(lx,{props:nt(nt({},e),{},{isSelected:L}),icon:D}));return S&&(H=S(H,e,{selected:L})),H}));function gx(e,t){var n=e.eventKey,r=Pw(),o=Fw(n);return I.useEffect((function(){if(r)return r.registerPath(n,o),function(){r.unregisterPath(n,o)}}),[o]),r?null:I.createElement(mx,G({},e,{ref:t}))}const vx=I.forwardRef(gx);var bx=["className","children"],yx=function(e,t){var n=e.className,r=e.children,o=Z(e,bx),a=I.useContext(Tw),i=a.prefixCls,s=a.mode,l=a.rtl;return I.createElement("ul",G({className:F()(i,l&&"".concat(i,"-rtl"),"".concat(i,"-sub"),"".concat(i,"-").concat("inline"===s?"inline":"vertical"),n),role:"menu"},o,{"data-menu-list":!0,ref:t}),r)},wx=I.forwardRef(yx);wx.displayName="SubMenuList";const xx=wx;function kx(e,t){return W(e).map((function(e,n){if(I.isValidElement(e)){var r,o,a=e.key,i=null!==(r=null===(o=e.props)||void 0===o?void 0:o.eventKey)&&void 0!==r?r:a;(null===i||void 0===i)&&(i="tmp_key-".concat([].concat(P(t),[n]).join("-")));var s={key:i,eventKey:i};return I.cloneElement(e,s)}return e}))}var Cx={adjustX:1,adjustY:1},Sx={topLeft:{points:["bl","tl"],overflow:Cx},topRight:{points:["br","tr"],overflow:Cx},bottomLeft:{points:["tl","bl"],overflow:Cx},bottomRight:{points:["tr","br"],overflow:Cx},leftTop:{points:["tr","tl"],overflow:Cx},leftBottom:{points:["br","bl"],overflow:Cx},rightTop:{points:["tl","tr"],overflow:Cx},rightBottom:{points:["bl","br"],overflow:Cx}},Ex={topLeft:{points:["bl","tl"],overflow:Cx},topRight:{points:["br","tr"],overflow:Cx},bottomLeft:{points:["tl","bl"],overflow:Cx},bottomRight:{points:["tr","br"],overflow:Cx},rightTop:{points:["tr","tl"],overflow:Cx},rightBottom:{points:["br","bl"],overflow:Cx},leftTop:{points:["tl","tr"],overflow:Cx},leftBottom:{points:["bl","br"],overflow:Cx}};function Nx(e,t,n){return t||(n?n[e]||n.other:void 0)}var Ix={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function $x(e){var t=e.prefixCls,n=e.visible,r=e.children,o=e.popup,a=e.popupStyle,i=e.popupClassName,s=e.popupOffset,l=e.disabled,u=e.mode,c=e.onVisibleChange,d=I.useContext(Tw),h=d.getPopupContainer,p=d.rtl,f=d.subMenuOpenDelay,m=d.subMenuCloseDelay,g=d.builtinPlacements,v=d.triggerSubMenuAction,b=d.forceSubMenuRender,y=d.rootClassName,w=d.motion,x=d.defaultMotions,k=X(I.useState(!1),2),C=k[0],S=k[1],E=nt(nt({},p?Ex:Sx),g),N=Ix[u],$=Nx(u,w,x),T=I.useRef($);"inline"!==u&&(T.current=$);var A=nt(nt({},T.current),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),O=I.useRef();return I.useEffect((function(){return O.current=Tl((function(){S(n)})),function(){Tl.cancel(O.current)}}),[n]),I.createElement(pm,{prefixCls:t,popupClassName:F()("".concat(t,"-popup"),Q({},"".concat(t,"-rtl"),p),i,y),stretch:"horizontal"===u?"minWidth":null,getPopupContainer:h,builtinPlacements:E,popupPlacement:N,popupVisible:C,popup:o,popupStyle:a,popupAlign:s&&{offset:s},action:l?[]:[v],mouseEnterDelay:f,mouseLeaveDelay:m,onPopupVisibleChange:c,forceRender:b,popupMotion:A,fresh:!0},r)}function Tx(e){var t=e.id,n=e.open,r=e.keyPath,o=e.children,a="inline",i=I.useContext(Tw),s=i.prefixCls,l=i.forceSubMenuRender,u=i.motion,c=i.defaultMotions,d=i.mode,h=I.useRef(!1);h.current=d===a;var p=X(I.useState(!h.current),2),f=p[0],m=p[1],g=!!h.current&&n;I.useEffect((function(){h.current&&m(!1)}),[d]);var v=nt({},Nx(a,u,c));r.length>1&&(v.motionAppear=!1);var b=v.onVisibleChanged;return v.onVisibleChanged=function(e){return h.current||e||m(!0),null===b||void 0===b?void 0:b(e)},f?null:I.createElement(Aw,{mode:a,locked:!h.current},I.createElement(Qu,G({visible:g},v,{forceRender:l,removeOnLeave:!1,leavedClassName:"".concat(s,"-hidden")}),(function(e){var n=e.className,r=e.style;return I.createElement(xx,{id:t,className:n,style:r},o)})))}var Ax=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Ox=["active"],Rx=I.forwardRef((function(e,t){var n=e.style,r=e.className,o=e.title,a=e.eventKey,i=(e.warnKey,e.disabled),s=e.internalPopupClose,l=e.children,u=e.itemIcon,c=e.expandIcon,d=e.popupClassName,h=e.popupOffset,p=e.popupStyle,f=e.onClick,m=e.onMouseEnter,g=e.onMouseLeave,v=e.onTitleClick,b=e.onTitleMouseEnter,y=e.onTitleMouseLeave,w=Z(e,Ax),x=Iw(a),k=I.useContext(Tw),C=k.prefixCls,S=k.mode,E=k.openKeys,N=k.disabled,$=k.overflowDisabled,T=k.activeKey,A=k.selectedKeys,O=k.itemIcon,R=k.expandIcon,P=k.onItemClick,D=k.onOpenChange,_=k.onActive,M=I.useContext(Mw)._internalRenderSubMenuItem,z=I.useContext(_w).isSubPathKey,L=Fw(),B="".concat(C,"-submenu"),j=N||i,H=I.useRef(),V=I.useRef();var W=null!==u&&void 0!==u?u:O,U=null!==c&&void 0!==c?c:R,K=E.includes(a),q=!$&&K,J=z(A,a),Y=ix(a,j,b,y),ee=Y.active,te=Z(Y,Ox),ne=X(I.useState(!1),2),re=ne[0],oe=ne[1],ae=function(e){j||oe(e)},ie=I.useMemo((function(){return ee||"inline"!==S&&(re||z([T],a))}),[S,ee,T,re,a,z]),se=sx(L.length),le=rx((function(e){null===f||void 0===f||f(cx(e)),P(e)})),ue=x&&"".concat(x,"-popup"),ce=I.createElement("div",G({role:"menuitem",style:se,className:"".concat(B,"-title"),tabIndex:j?null:-1,ref:H,title:"string"===typeof o?o:null,"data-menu-id":$&&x?null:x,"aria-expanded":q,"aria-haspopup":!0,"aria-controls":ue,"aria-disabled":j,onClick:function(e){j||(null===v||void 0===v||v({key:a,domEvent:e}),"inline"===S&&D(a,!K))},onFocus:function(){_(a)}},te),o,I.createElement(lx,{icon:"horizontal"!==S?U:void 0,props:nt(nt({},e),{},{isOpen:q,isSubMenu:!0})},I.createElement("i",{className:"".concat(B,"-arrow")}))),de=I.useRef(S);if("inline"!==S&&L.length>1?de.current="vertical":de.current=S,!$){var he=de.current;ce=I.createElement($x,{mode:he,prefixCls:B,visible:!s&&q&&"inline"!==S,popupClassName:d,popupOffset:h,popupStyle:p,popup:I.createElement(Aw,{mode:"horizontal"===he?"vertical":he},I.createElement(xx,{id:ue,ref:V},l)),disabled:j,onVisibleChange:function(e){"inline"!==S&&D(a,e)}},ce)}var pe=I.createElement(Sw.Item,G({ref:t,role:"none"},w,{component:"li",style:n,className:F()(B,"".concat(B,"-").concat(S),r,Q(Q(Q(Q({},"".concat(B,"-open"),q),"".concat(B,"-active"),ie),"".concat(B,"-selected"),J),"".concat(B,"-disabled"),j)),onMouseEnter:function(e){ae(!0),null===m||void 0===m||m({key:a,domEvent:e})},onMouseLeave:function(e){ae(!1),null===g||void 0===g||g({key:a,domEvent:e})}}),ce,!$&&I.createElement(Tx,{id:ue,open:q,keyPath:L},l));return M&&(pe=M(pe,e,{selected:J,active:ie,open:q,disabled:j})),I.createElement(Aw,{onItemClick:le,mode:"horizontal"===S?"vertical":S,itemIcon:W,expandIcon:U},pe)}));const Px=I.forwardRef((function(e,t){var n,r=e.eventKey,o=e.children,a=Fw(r),i=kx(o,a),s=Pw();return I.useEffect((function(){if(s)return s.registerPath(r,a),function(){s.unregisterPath(r,a)}}),[a]),n=s?i:I.createElement(Rx,G({ref:t},e),i),I.createElement(Dw.Provider,{value:a},n)}));function Dx(e){var t=e.className,n=e.style,r=I.useContext(Tw).prefixCls;return Pw()?null:I.createElement("li",{role:"separator",className:F()("".concat(r,"-item-divider"),t),style:n})}var Fx=["className","title","eventKey","children"],_x=I.forwardRef((function(e,t){var n=e.className,r=e.title,o=(e.eventKey,e.children),a=Z(e,Fx),i=I.useContext(Tw).prefixCls,s="".concat(i,"-item-group");return I.createElement("li",G({ref:t,role:"presentation"},a,{onClick:function(e){return e.stopPropagation()},className:F()(s,n)}),I.createElement("div",{role:"presentation",className:"".concat(s,"-title"),title:"string"===typeof r?r:void 0},r),I.createElement("ul",{role:"group",className:"".concat(s,"-list")},o))}));const Mx=I.forwardRef((function(e,t){var n=e.eventKey,r=kx(e.children,Fw(n));return Pw()?r:I.createElement(_x,G({ref:t},_(e,["warnKey"])),r)}));var zx=["label","children","key","type","extra"];function Lx(e,t,n){var r=t.item,o=t.group,a=t.submenu,i=t.divider;return(e||[]).map((function(e,s){if(e&&"object"===J(e)){var l=e,u=l.label,c=l.children,d=l.key,h=l.type,p=l.extra,f=Z(l,zx),m=null!==d&&void 0!==d?d:"tmp-".concat(s);return c||"group"===h?"group"===h?I.createElement(o,G({key:m},f,{title:u}),Lx(c,t,n)):I.createElement(a,G({key:m},f,{title:u}),Lx(c,t,n)):"divider"===h?I.createElement(i,G({key:m},f)):I.createElement(r,G({key:m},f),u,(!!p||0===p)&&I.createElement("span",{className:"".concat(n,"-item-extra")},p))}return null})).filter((function(e){return e}))}function Bx(e,t,n,r,o){var a=e,i=nt({divider:Dx,item:vx,group:Mx,submenu:Px},r);return t&&(a=Lx(t,i,o)),kx(a,n)}var jx=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem","_internalComponents"],Hx=[],Vx=I.forwardRef((function(e,t){var n,r=e,o=r.prefixCls,a=void 0===o?"rc-menu":o,i=r.rootClassName,s=r.style,l=r.className,u=r.tabIndex,c=void 0===u?0:u,d=r.items,h=r.children,p=r.direction,f=r.id,m=r.mode,g=void 0===m?"vertical":m,v=r.inlineCollapsed,b=r.disabled,y=r.disabledOverflow,w=r.subMenuOpenDelay,x=void 0===w?.1:w,k=r.subMenuCloseDelay,C=void 0===k?.1:k,S=r.forceSubMenuRender,E=r.defaultOpenKeys,N=r.openKeys,$=r.activeKey,T=r.defaultActiveFirst,A=r.selectable,O=void 0===A||A,R=r.multiple,D=void 0!==R&&R,_=r.defaultSelectedKeys,M=r.selectedKeys,z=r.onSelect,L=r.onDeselect,B=r.inlineIndent,j=void 0===B?24:B,H=r.motion,V=r.defaultMotions,W=r.triggerSubMenuAction,U=void 0===W?"hover":W,K=r.builtinPlacements,q=r.itemIcon,J=r.expandIcon,Y=r.overflowedIndicator,ee=void 0===Y?"...":Y,te=r.overflowedIndicatorPopupClassName,ne=r.getPopupContainer,re=r.onClick,oe=r.onOpenChange,ae=r.onKeyDown,ie=(r.openAnimation,r.openTransitionName,r._internalRenderMenuItem),se=r._internalRenderSubMenuItem,le=r._internalComponents,ue=Z(r,jx),ce=X(I.useMemo((function(){return[Bx(h,d,Hx,le,a),Bx(h,d,Hx,{},a)]}),[h,d,le]),2),de=ce[0],he=ce[1],pe=X(I.useState(!1),2),fe=pe[0],me=pe[1],ge=I.useRef(),ve=function(e){var t=X(so(e,{value:e}),2),n=t[0],r=t[1];return I.useEffect((function(){ax+=1;var e="".concat(ox,"-").concat(ax);r("rc-menu-uuid-".concat(e))}),[]),n}(f),be="rtl"===p;var ye=so(E,{value:N,postState:function(e){return e||Hx}}),we=X(ye,2),xe=we[0],ke=we[1],Ce=function(e){function t(){ke(e),null===oe||void 0===oe||oe(e)}arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(0,ru.flushSync)(t):t()},Se=X(I.useState(xe),2),Ee=Se[0],Ne=Se[1],Ie=I.useRef(!1),$e=X(I.useMemo((function(){return"inline"!==g&&"vertical"!==g||!v?[g,!1]:["vertical",v]}),[g,v]),2),Te=$e[0],Ae=$e[1],Oe="inline"===Te,Re=X(I.useState(Te),2),Pe=Re[0],De=Re[1],Fe=X(I.useState(Ae),2),_e=Fe[0],Me=Fe[1];I.useEffect((function(){De(Te),Me(Ae),Ie.current&&(Oe?ke(Ee):Ce(Hx))}),[Te,Ae]);var ze=X(I.useState(0),2),Le=ze[0],Be=ze[1],je=Le>=de.length-1||"horizontal"!==Pe||y;I.useEffect((function(){Oe&&Ne(xe)}),[xe]),I.useEffect((function(){return Ie.current=!0,function(){Ie.current=!1}}),[]);var He=nx(),Ve=He.registerPath,We=He.unregisterPath,Ge=He.refreshOverflowKeys,Ue=He.isSubPathKey,Ke=He.getKeyPath,qe=He.getKeys,Xe=He.getSubPathKeys,Je=I.useMemo((function(){return{registerPath:Ve,unregisterPath:We}}),[Ve,We]),Ye=I.useMemo((function(){return{isSubPathKey:Ue}}),[Ue]);I.useEffect((function(){Ge(je?Hx:de.slice(Le+1).map((function(e){return e.key})))}),[Le,je]);var Qe=X(so($||T&&(null===(n=de[0])||void 0===n?void 0:n.key),{value:$}),2),Ze=Qe[0],et=Qe[1],tt=rx((function(e){et(e)})),rt=rx((function(){et(void 0)}));(0,I.useImperativeHandle)(t,(function(){return{list:ge.current,focus:function(e){var t,n,r=qe(),o=Yw(r,ve),a=o.elements,i=o.key2element,s=o.element2key,l=Xw(ge.current,a),u=null!==Ze&&void 0!==Ze?Ze:l[0]?s.get(l[0]):null===(t=de.find((function(e){return!e.props.disabled})))||void 0===t?void 0:t.key,c=i.get(u);u&&c&&(null===c||void 0===c||null===(n=c.focus)||void 0===n||n.call(c,e))}}}));var ot=so(_||[],{value:M,postState:function(e){return Array.isArray(e)?e:null===e||void 0===e?Hx:[e]}}),at=X(ot,2),it=at[0],st=at[1],lt=rx((function(e){null===re||void 0===re||re(cx(e)),function(e){if(O){var t,n=e.key,r=it.includes(n);t=D?r?it.filter((function(e){return e!==n})):[].concat(P(it),[n]):[n],st(t);var o=nt(nt({},e),{},{selectedKeys:t});r?null===L||void 0===L||L(o):null===z||void 0===z||z(o)}!D&&xe.length&&"inline"!==Pe&&Ce(Hx)}(e)})),ut=rx((function(e,t){var n=xe.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==Pe){var r=Xe(e);n=n.filter((function(e){return!r.has(e)}))}Kt(xe,n,!0)||Ce(n,!0)})),ct=Qw(Pe,Ze,be,ve,ge,qe,Ke,et,(function(e,t){var n=null!==t&&void 0!==t?t:!xe.includes(e);ut(e,n)}),ae);I.useEffect((function(){me(!0)}),[]);var dt=I.useMemo((function(){return{_internalRenderMenuItem:ie,_internalRenderSubMenuItem:se}}),[ie,se]),ht="horizontal"!==Pe||y?de:de.map((function(e,t){return I.createElement(Aw,{key:e.key,overflowDisabled:t>Le},e)})),pt=I.createElement(Sw,G({id:f,ref:ge,prefixCls:"".concat(a,"-overflow"),component:"ul",itemComponent:vx,className:F()(a,"".concat(a,"-root"),"".concat(a,"-").concat(Pe),l,Q(Q({},"".concat(a,"-inline-collapsed"),_e),"".concat(a,"-rtl"),be),i),dir:p,style:s,role:"menu",tabIndex:c,data:ht,renderRawItem:function(e){return e},renderRawRest:function(e){var t=e.length,n=t?de.slice(-t):null;return I.createElement(Px,{eventKey:tx,title:ee,disabled:je,internalPopupClose:0===t,popupClassName:te},n)},maxCount:"horizontal"!==Pe||y?Sw.INVALIDATE:Sw.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){Be(e)},onKeyDown:ct},ue));return I.createElement(Mw.Provider,{value:dt},I.createElement(Ew.Provider,{value:ve},I.createElement(Aw,{prefixCls:a,rootClassName:i,mode:Pe,openKeys:xe,rtl:be,disabled:b,motion:fe?H:null,defaultMotions:fe?V:null,activeKey:Ze,onActive:tt,onInactive:rt,selectedKeys:it,inlineIndent:j,subMenuOpenDelay:x,subMenuCloseDelay:C,forceSubMenuRender:S,builtinPlacements:K,triggerSubMenuAction:U,getPopupContainer:ne,itemIcon:q,expandIcon:J,onItemClick:lt,onOpenChange:ut},I.createElement(_w.Provider,{value:Ye},pt),I.createElement("div",{style:{display:"none"},"aria-hidden":!0},I.createElement(Rw.Provider,{value:Je},he)))))}));var Wx=Vx;Wx.Item=vx,Wx.SubMenu=Px,Wx.ItemGroup=Mx,Wx.Divider=Dx;const Gx=Wx;const Ux={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"};var Kx=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:Ux}))};const qx=I.forwardRef(Kx),Xx=(0,I.createContext)({prefixCls:"",firstLevel:!0,inlineCollapsed:!1});var Jx=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const Yx=e=>{const{prefixCls:t,className:n,dashed:r}=e,o=Jx(e,["prefixCls","className","dashed"]),{getPrefixCls:a}=I.useContext(B),i=a("menu",t),s=F()({[`${i}-item-divider-dashed`]:!!r},n);return I.createElement(Dx,Object.assign({className:s},o))},Qx=e=>{var t;const{className:n,children:r,icon:o,title:a,danger:i}=e,{prefixCls:s,firstLevel:l,direction:u,disableMenuItemTitleTooltip:c,inlineCollapsed:d}=I.useContext(Xx),{siderCollapsed:h}=I.useContext(Ca);let p=a;"undefined"===typeof a?p=l?r:"":!1===a&&(p="");const f={title:p};h||d||(f.title=null,f.open=!1);const m=W(r).length;let g=I.createElement(vx,Object.assign({},_(e,["title","icon","danger"]),{className:F()({[`${s}-item-danger`]:i,[`${s}-item-only-child`]:1===(o?m+1:m)},n),title:"string"===typeof a?a:void 0}),Ql(o,{className:F()(I.isValidElement(o)?null===(t=o.props)||void 0===t?void 0:t.className:"",`${s}-item-icon`)}),(e=>{const t=null===r||void 0===r?void 0:r[0],n=I.createElement("span",{className:`${s}-title-content`},r);return(!o||I.isValidElement(r)&&"span"===r.type)&&r&&e&&l&&"string"===typeof t?I.createElement("div",{className:`${s}-inline-collapsed-noicon`},t.charAt(0)):n})(d));return c||(g=I.createElement(og,Object.assign({},f,{placement:"rtl"===u?"left":"right",overlayClassName:`${s}-inline-collapsed-tooltip`}),g)),g};var Zx=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const ek=I.createContext(null),tk=I.forwardRef(((e,t)=>{const{children:n}=e,r=Zx(e,["children"]),o=I.useContext(ek),a=I.useMemo((()=>Object.assign(Object.assign({},o),r)),[o,r.prefixCls,r.mode,r.selectable,r.rootClassName]),i=function(e){return po(e)&&ho(e)}(n),s=co(t,i?n.ref:null);return I.createElement(ek.Provider,{value:a},I.createElement(nl,{space:!0},i?I.cloneElement(n,{ref:s}):n))})),nk=ek,rk=e=>({[e.componentCls]:{[`${e.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},\n        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}},[`${e.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},\n        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}}}),ok=new Hr("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),ak=new Hr("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),ik=new Hr("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),sk=new Hr("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),lk=new Hr("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),uk=new Hr("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),ck=new Hr("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),dk=new Hr("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),hk={"slide-up":{inKeyframes:ok,outKeyframes:ak},"slide-down":{inKeyframes:ik,outKeyframes:sk},"slide-left":{inKeyframes:lk,outKeyframes:uk},"slide-right":{inKeyframes:ck,outKeyframes:dk}},pk=(e,t)=>{const{antCls:n}=e,r=`${n}-${t}`,{inKeyframes:o,outKeyframes:a}=hk[t];return[zm(r,o,a,e.motionDurationMid),{[`\n      ${r}-enter,\n      ${r}-appear\n    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${r}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]},fk=e=>{const{componentCls:t,motionDurationSlow:n,horizontalLineHeight:r,colorSplit:o,lineWidth:a,lineType:i,itemPaddingInline:s}=e;return{[`${t}-horizontal`]:{lineHeight:r,border:0,borderBottom:`${yn(a)} ${i} ${o}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${t}-item, ${t}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:s},[`> ${t}-item:hover,\n        > ${t}-item-active,\n        > ${t}-submenu ${t}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${t}-item, ${t}-submenu-title`]:{transition:[`border-color ${n}`,`background ${n}`].join(",")},[`${t}-submenu-arrow`]:{display:"none"}}}},mk=e=>{let{componentCls:t,menuArrowOffset:n,calc:r}=e;return{[`${t}-rtl`]:{direction:"rtl"},[`${t}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${t}-rtl${t}-vertical,\n    ${t}-submenu-rtl ${t}-vertical`]:{[`${t}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(${yn(r(n).mul(-1).equal())})`},"&::after":{transform:`rotate(45deg) translateY(${yn(n)})`}}}}},gk=e=>Object.assign({},zo(e)),vk=(e,t)=>{const{componentCls:n,itemColor:r,itemSelectedColor:o,groupTitleColor:a,itemBg:i,subMenuItemBg:s,itemSelectedBg:l,activeBarHeight:u,activeBarWidth:c,activeBarBorderWidth:d,motionDurationSlow:h,motionEaseInOut:p,motionEaseOut:f,itemPaddingInline:m,motionDurationMid:g,itemHoverColor:v,lineType:b,colorSplit:y,itemDisabledColor:w,dangerItemColor:x,dangerItemHoverColor:k,dangerItemSelectedColor:C,dangerItemActiveBg:S,dangerItemSelectedBg:E,popupBg:N,itemHoverBg:I,itemActiveBg:$,menuSubMenuBg:T,horizontalItemSelectedColor:A,horizontalItemSelectedBg:O,horizontalItemBorderRadius:R,horizontalItemHoverBg:P}=e;return{[`${n}-${t}, ${n}-${t} > ${n}`]:{color:r,background:i,[`&${n}-root:focus-visible`]:Object.assign({},gk(e)),[`${n}-item-group-title`]:{color:a},[`${n}-submenu-selected`]:{[`> ${n}-submenu-title`]:{color:o}},[`${n}-item, ${n}-submenu-title`]:{color:r,[`&:not(${n}-item-disabled):focus-visible`]:Object.assign({},gk(e))},[`${n}-item-disabled, ${n}-submenu-disabled`]:{color:`${w} !important`},[`${n}-item:not(${n}-item-selected):not(${n}-submenu-selected)`]:{[`&:hover, > ${n}-submenu-title:hover`]:{color:v}},[`&:not(${n}-horizontal)`]:{[`${n}-item:not(${n}-item-selected)`]:{"&:hover":{backgroundColor:I},"&:active":{backgroundColor:$}},[`${n}-submenu-title`]:{"&:hover":{backgroundColor:I},"&:active":{backgroundColor:$}}},[`${n}-item-danger`]:{color:x,[`&${n}-item:hover`]:{[`&:not(${n}-item-selected):not(${n}-submenu-selected)`]:{color:k}},[`&${n}-item:active`]:{background:S}},[`${n}-item a`]:{"&, &:hover":{color:"inherit"}},[`${n}-item-selected`]:{color:o,[`&${n}-item-danger`]:{color:C},"a, a:hover":{color:"inherit"}},[`& ${n}-item-selected`]:{backgroundColor:l,[`&${n}-item-danger`]:{backgroundColor:E}},[`&${n}-submenu > ${n}`]:{backgroundColor:T},[`&${n}-popup > ${n}`]:{backgroundColor:N},[`&${n}-submenu-popup > ${n}`]:{backgroundColor:N},[`&${n}-horizontal`]:Object.assign(Object.assign({},"dark"===t?{borderBottom:0}:{}),{[`> ${n}-item, > ${n}-submenu`]:{top:d,marginTop:e.calc(d).mul(-1).equal(),marginBottom:0,borderRadius:R,"&::after":{position:"absolute",insetInline:m,bottom:0,borderBottom:`${yn(u)} solid transparent`,transition:`border-color ${h} ${p}`,content:'""'},"&:hover, &-active, &-open":{background:P,"&::after":{borderBottomWidth:u,borderBottomColor:A}},"&-selected":{color:A,backgroundColor:O,"&:hover":{backgroundColor:O},"&::after":{borderBottomWidth:u,borderBottomColor:A}}}}),[`&${n}-root`]:{[`&${n}-inline, &${n}-vertical`]:{borderInlineEnd:`${yn(d)} ${b} ${y}`}},[`&${n}-inline`]:{[`${n}-sub${n}-inline`]:{background:s},[`${n}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${yn(c)} solid ${o}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${g} ${f}`,`opacity ${g} ${f}`].join(","),content:'""'},[`&${n}-item-danger`]:{"&::after":{borderInlineEndColor:C}}},[`${n}-selected, ${n}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${g} ${p}`,`opacity ${g} ${p}`].join(",")}}}}}},bk=e=>{const{componentCls:t,itemHeight:n,itemMarginInline:r,padding:o,menuArrowSize:a,marginXS:i,itemMarginBlock:s,itemWidth:l,itemPaddingInline:u}=e,c=e.calc(a).add(o).add(i).equal();return{[`${t}-item`]:{position:"relative",overflow:"hidden"},[`${t}-item, ${t}-submenu-title`]:{height:n,lineHeight:yn(n),paddingInline:u,overflow:"hidden",textOverflow:"ellipsis",marginInline:r,marginBlock:s,width:l},[`> ${t}-item,\n            > ${t}-submenu > ${t}-submenu-title`]:{height:n,lineHeight:yn(n)},[`${t}-item-group-list ${t}-submenu-title,\n            ${t}-submenu-title`]:{paddingInlineEnd:c}}},yk=e=>{const{componentCls:t,iconCls:n,itemHeight:r,colorTextLightSolid:o,dropdownWidth:a,controlHeightLG:i,motionEaseOut:s,paddingXL:l,itemMarginInline:u,fontSizeLG:c,motionDurationFast:d,motionDurationSlow:h,paddingXS:p,boxShadowSecondary:f,collapsedWidth:m,collapsedIconSize:g}=e,v={height:r,lineHeight:yn(r),listStylePosition:"inside",listStyleType:"disc"};return[{[t]:{"&-inline, &-vertical":Object.assign({[`&${t}-root`]:{boxShadow:"none"}},bk(e))},[`${t}-submenu-popup`]:{[`${t}-vertical`]:Object.assign(Object.assign({},bk(e)),{boxShadow:f})}},{[`${t}-submenu-popup ${t}-vertical${t}-sub`]:{minWidth:a,maxHeight:`calc(100vh - ${yn(e.calc(i).mul(2.5).equal())})`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${t}-inline`]:{width:"100%",[`&${t}-root`]:{[`${t}-item, ${t}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${h}`,`background ${h}`,`padding ${d} ${s}`].join(","),[`> ${t}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${t}-sub${t}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${t}-submenu > ${t}-submenu-title`]:v,[`& ${t}-item-group-title`]:{paddingInlineStart:l}},[`${t}-item`]:v}},{[`${t}-inline-collapsed`]:{width:m,[`&${t}-root`]:{[`${t}-item, ${t}-submenu ${t}-submenu-title`]:{[`> ${t}-inline-collapsed-noicon`]:{fontSize:c,textAlign:"center"}}},[`> ${t}-item,\n          > ${t}-item-group > ${t}-item-group-list > ${t}-item,\n          > ${t}-item-group > ${t}-item-group-list > ${t}-submenu > ${t}-submenu-title,\n          > ${t}-submenu > ${t}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${yn(e.calc(c).div(2).equal())} - ${yn(u)})`,textOverflow:"clip",[`\n            ${t}-submenu-arrow,\n            ${t}-submenu-expand-icon\n          `]:{opacity:0},[`${t}-item-icon, ${n}`]:{margin:0,fontSize:g,lineHeight:yn(r),"+ span":{display:"inline-block",opacity:0}}},[`${t}-item-icon, ${n}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${t}-item-icon, ${n}`]:{display:"none"},"a, a:hover":{color:o}},[`${t}-item-group-title`]:Object.assign(Object.assign({},Fo),{paddingInline:p})}}]},wk=e=>{const{componentCls:t,motionDurationSlow:n,motionDurationMid:r,motionEaseInOut:o,motionEaseOut:a,iconCls:i,iconSize:s,iconMarginInlineEnd:l}=e;return{[`${t}-item, ${t}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${n}`,`background ${n}`,`padding calc(${n} + 0.1s) ${o}`].join(","),[`${t}-item-icon, ${i}`]:{minWidth:s,fontSize:s,transition:[`font-size ${r} ${a}`,`margin ${n} ${o}`,`color ${n}`].join(","),"+ span":{marginInlineStart:l,opacity:1,transition:[`opacity ${n} ${o}`,`margin ${n}`,`color ${n}`].join(",")}},[`${t}-item-icon`]:Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),[`&${t}-item-only-child`]:{[`> ${i}, > ${t}-item-icon`]:{marginInlineEnd:0}}},[`${t}-item-disabled, ${t}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${t}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},xk=e=>{const{componentCls:t,motionDurationSlow:n,motionEaseInOut:r,borderRadius:o,menuArrowSize:a,menuArrowOffset:i}=e;return{[`${t}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:e.margin,width:a,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${n} ${r}, opacity ${n}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:e.calc(a).mul(.6).equal(),height:e.calc(a).mul(.15).equal(),backgroundColor:"currentcolor",borderRadius:o,transition:[`background ${n} ${r}`,`transform ${n} ${r}`,`top ${n} ${r}`,`color ${n} ${r}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(${yn(e.calc(i).mul(-1).equal())})`},"&::after":{transform:`rotate(-45deg) translateY(${yn(i)})`}}}}},kk=e=>{const{antCls:t,componentCls:n,fontSize:r,motionDurationSlow:o,motionDurationMid:a,motionEaseInOut:i,paddingXS:s,padding:l,colorSplit:u,lineWidth:c,zIndexPopup:d,borderRadiusLG:h,subMenuItemBorderRadius:p,menuArrowSize:f,menuArrowOffset:m,lineType:g,groupTitleLineHeight:v,groupTitleFontSize:b}=e;return[{"":{[n]:Object.assign(Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),{"&-hidden":{display:"none"}})},[`${n}-submenu-hidden`]:{display:"none"}},{[n]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_o(e)),{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),{marginBottom:0,paddingInlineStart:0,fontSize:r,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${o} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${n}-item`]:{flex:"none"}},[`${n}-item, ${n}-submenu, ${n}-submenu-title`]:{borderRadius:e.itemBorderRadius},[`${n}-item-group-title`]:{padding:`${yn(s)} ${yn(l)}`,fontSize:b,lineHeight:v,transition:`all ${o}`},[`&-horizontal ${n}-submenu`]:{transition:[`border-color ${o} ${i}`,`background ${o} ${i}`].join(",")},[`${n}-submenu, ${n}-submenu-inline`]:{transition:[`border-color ${o} ${i}`,`background ${o} ${i}`,`padding ${a} ${i}`].join(",")},[`${n}-submenu ${n}-sub`]:{cursor:"initial",transition:[`background ${o} ${i}`,`padding ${o} ${i}`].join(",")},[`${n}-title-content`]:{display:"inline-flex",alignItems:"center",transition:`color ${o}`,"> a:first-child":{flexGrow:1},[`> ${t}-typography-ellipsis-single-line`]:{display:"inline",verticalAlign:"unset"},[`${n}-item-extra`]:{marginInlineStart:"auto",paddingInlineStart:e.padding,fontSize:e.fontSizeSM,color:e.colorTextDescription}},[`${n}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${n}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:u,borderStyle:g,borderWidth:0,borderTopWidth:c,marginBlock:c,padding:0,"&-dashed":{borderStyle:"dashed"}}}),wk(e)),{[`${n}-item-group`]:{[`${n}-item-group-list`]:{margin:0,padding:0,[`${n}-item, ${n}-submenu-title`]:{paddingInline:`${yn(e.calc(r).mul(2).equal())} ${yn(l)}`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:d,borderRadius:h,boxShadow:"none",transformOrigin:"0 0",[`&${n}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:0,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'},[`> ${n}`]:Object.assign(Object.assign(Object.assign({borderRadius:h},wk(e)),xk(e)),{[`${n}-item, ${n}-submenu > ${n}-submenu-title`]:{borderRadius:p},[`${n}-submenu-title::after`]:{transition:`transform ${o} ${i}`}})},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:e.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:e.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:e.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:e.paddingXS}}}),xk(e)),{[`&-inline-collapsed ${n}-submenu-arrow,\n        &-inline ${n}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${yn(m)})`},"&::after":{transform:`rotate(45deg) translateX(${yn(e.calc(m).mul(-1).equal())})`}},[`${n}-submenu-open${n}-submenu-inline > ${n}-submenu-title > ${n}-submenu-arrow`]:{transform:`translateY(${yn(e.calc(f).mul(.2).mul(-1).equal())})`,"&::after":{transform:`rotate(-45deg) translateX(${yn(e.calc(m).mul(-1).equal())})`},"&::before":{transform:`rotate(45deg) translateX(${yn(m)})`}}})},{[`${t}-layout-header`]:{[n]:{lineHeight:"inherit"}}}]},Ck=e=>{var t,n,r;const{colorPrimary:o,colorError:a,colorTextDisabled:i,colorErrorBg:s,colorText:l,colorTextDescription:u,colorBgContainer:c,colorFillAlter:d,colorFillContent:h,lineWidth:p,lineWidthBold:f,controlItemBgActive:m,colorBgTextHover:g,controlHeightLG:v,lineHeight:b,colorBgElevated:y,marginXXS:w,padding:x,fontSize:k,controlHeightSM:C,fontSizeLG:S,colorTextLightSolid:E,colorErrorHover:N}=e,I=null!==(t=e.activeBarWidth)&&void 0!==t?t:0,$=null!==(n=e.activeBarBorderWidth)&&void 0!==n?n:p,T=null!==(r=e.itemMarginInline)&&void 0!==r?r:e.marginXXS,A=new Vo(E).setAlpha(.65).toRgbString();return{dropdownWidth:160,zIndexPopup:e.zIndexPopupBase+50,radiusItem:e.borderRadiusLG,itemBorderRadius:e.borderRadiusLG,radiusSubMenuItem:e.borderRadiusSM,subMenuItemBorderRadius:e.borderRadiusSM,colorItemText:l,itemColor:l,colorItemTextHover:l,itemHoverColor:l,colorItemTextHoverHorizontal:o,horizontalItemHoverColor:o,colorGroupTitle:u,groupTitleColor:u,colorItemTextSelected:o,itemSelectedColor:o,colorItemTextSelectedHorizontal:o,horizontalItemSelectedColor:o,colorItemBg:c,itemBg:c,colorItemBgHover:g,itemHoverBg:g,colorItemBgActive:h,itemActiveBg:m,colorSubItemBg:d,subMenuItemBg:d,colorItemBgSelected:m,itemSelectedBg:m,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:I,colorActiveBarHeight:f,activeBarHeight:f,colorActiveBarBorderSize:p,activeBarBorderWidth:$,colorItemTextDisabled:i,itemDisabledColor:i,colorDangerItemText:a,dangerItemColor:a,colorDangerItemTextHover:a,dangerItemHoverColor:a,colorDangerItemTextSelected:a,dangerItemSelectedColor:a,colorDangerItemBgActive:s,dangerItemActiveBg:s,colorDangerItemBgSelected:s,dangerItemSelectedBg:s,itemMarginInline:T,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent",itemHeight:v,groupTitleLineHeight:b,collapsedWidth:2*v,popupBg:y,itemMarginBlock:w,itemPaddingInline:x,horizontalLineHeight:1.15*v+"px",iconSize:k,iconMarginInlineEnd:C-k,collapsedIconSize:S,groupTitleFontSize:k,darkItemDisabledColor:new Vo(E).setAlpha(.25).toRgbString(),darkItemColor:A,darkDangerItemColor:a,darkItemBg:"#001529",darkPopupBg:"#001529",darkSubMenuItemBg:"#000c17",darkItemSelectedColor:E,darkItemSelectedBg:o,darkDangerItemSelectedBg:a,darkItemHoverBg:"transparent",darkGroupTitleColor:A,darkItemHoverColor:E,darkDangerItemHoverColor:N,darkDangerItemSelectedColor:E,darkDangerItemActiveBg:a,itemWidth:I?`calc(100% + ${$}px)`:`calc(100% - ${2*T}px)`}},Sk=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;const n=ha("Menu",(e=>{const{colorBgElevated:t,controlHeightLG:n,fontSize:r,darkItemColor:o,darkDangerItemColor:a,darkItemBg:i,darkSubMenuItemBg:s,darkItemSelectedColor:l,darkItemSelectedBg:u,darkDangerItemSelectedBg:c,darkItemHoverBg:d,darkGroupTitleColor:h,darkItemHoverColor:p,darkItemDisabledColor:f,darkDangerItemHoverColor:m,darkDangerItemSelectedColor:g,darkDangerItemActiveBg:v,popupBg:b,darkPopupBg:y}=e,w=e.calc(r).div(7).mul(5).equal(),x=So(e,{menuArrowSize:w,menuHorizontalHeight:e.calc(n).mul(1.15).equal(),menuArrowOffset:e.calc(w).mul(.25).equal(),menuSubMenuBg:t,calc:e.calc,popupBg:b}),k=So(x,{itemColor:o,itemHoverColor:p,groupTitleColor:h,itemSelectedColor:l,itemBg:i,popupBg:y,subMenuItemBg:s,itemActiveBg:"transparent",itemSelectedBg:u,activeBarHeight:0,activeBarBorderWidth:0,itemHoverBg:d,itemDisabledColor:f,dangerItemColor:a,dangerItemHoverColor:m,dangerItemSelectedColor:g,dangerItemActiveBg:v,dangerItemSelectedBg:c,menuSubMenuBg:s,horizontalItemSelectedColor:l,horizontalItemSelectedBg:u});return[kk(x),fk(x),yk(x),vk(x,"light"),vk(k,"dark"),mk(x),rk(x),pk(x,"slide-up"),pk(x,"slide-down"),Um(x,"zoom-big")]}),Ck,{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"],["colorItemBgSelected","itemSelectedBg"]],injectStyle:!(arguments.length>2&&void 0!==arguments[2])||arguments[2],unitless:{groupTitleLineHeight:!0}});return n(e,t)},Ek=e=>{var t;const{popupClassName:n,icon:r,title:o,theme:a}=e,i=I.useContext(Xx),{prefixCls:s,inlineCollapsed:l,theme:u}=i,c=Fw();let d;if(r){const e=I.isValidElement(o)&&"span"===o.type;d=I.createElement(I.Fragment,null,Ql(r,{className:F()(I.isValidElement(r)?null===(t=r.props)||void 0===t?void 0:t.className:"",`${s}-item-icon`)}),e?o:I.createElement("span",{className:`${s}-title-content`},o))}else d=l&&!c.length&&o&&"string"===typeof o?I.createElement("div",{className:`${s}-inline-collapsed-noicon`},o.charAt(0)):I.createElement("span",{className:`${s}-title-content`},o);const h=I.useMemo((()=>Object.assign(Object.assign({},i),{firstLevel:!1})),[i]),[p]=Fp("Menu");return I.createElement(Xx.Provider,{value:h},I.createElement(Px,Object.assign({},_(e,["icon"]),{title:d,popupClassName:F()(s,n,`${s}-${a||u}`),popupStyle:Object.assign({zIndex:p},e.popupStyle)})))};var Nk=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function Ik(e){return null===e||!1===e}const $k={item:Qx,submenu:Ek,divider:Yx},Tk=(0,I.forwardRef)(((e,t)=>{var n;const r=I.useContext(nk),o=r||{},{getPrefixCls:a,getPopupContainer:i,direction:s,menu:l}=I.useContext(B),u=a(),{prefixCls:c,className:d,style:h,theme:p="light",expandIcon:f,_internalDisableMenuItemTitleTooltip:m,inlineCollapsed:g,siderCollapsed:v,rootClassName:b,mode:y,selectable:w,onClick:x,overflowedIndicatorPopupClassName:k}=e,C=_(Nk(e,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),["collapsedWidth"]);null===(n=o.validator)||void 0===n||n.call(o,{mode:y});const S=oo((function(){var e;null===x||void 0===x||x.apply(void 0,arguments),null===(e=o.onClick)||void 0===e||e.call(o)})),E=o.mode||y,N=null!==w&&void 0!==w?w:o.selectable,$=I.useMemo((()=>void 0!==v?v:g),[g,v]),T={horizontal:{motionName:`${u}-slide-up`},inline:Nm(u),other:{motionName:`${u}-zoom-big`}},A=a("menu",c||o.prefixCls),O=hl(A),[R,P,D]=Sk(A,O,!r),M=F()(`${A}-${p}`,null===l||void 0===l?void 0:l.className,d),z=I.useMemo((()=>{var e,t;if("function"===typeof f||Ik(f))return f||null;if("function"===typeof o.expandIcon||Ik(o.expandIcon))return o.expandIcon||null;if("function"===typeof(null===l||void 0===l?void 0:l.expandIcon)||Ik(null===l||void 0===l?void 0:l.expandIcon))return(null===l||void 0===l?void 0:l.expandIcon)||null;const n=null!==(e=null!==f&&void 0!==f?f:null===o||void 0===o?void 0:o.expandIcon)&&void 0!==e?e:null===l||void 0===l?void 0:l.expandIcon;return Ql(n,{className:F()(`${A}-submenu-expand-icon`,I.isValidElement(n)?null===(t=n.props)||void 0===t?void 0:t.className:void 0)})}),[f,null===o||void 0===o?void 0:o.expandIcon,null===l||void 0===l?void 0:l.expandIcon,A]),L=I.useMemo((()=>({prefixCls:A,inlineCollapsed:$||!1,direction:s,firstLevel:!0,theme:p,mode:E,disableMenuItemTitleTooltip:m})),[A,$,s,m,p]);return R(I.createElement(nk.Provider,{value:null},I.createElement(Xx.Provider,{value:L},I.createElement(Gx,Object.assign({getPopupContainer:i,overflowedIndicator:I.createElement(qx,null),overflowedIndicatorPopupClassName:F()(A,`${A}-${p}`,k),mode:E,selectable:N,onClick:S},C,{inlineCollapsed:$,style:Object.assign(Object.assign({},null===l||void 0===l?void 0:l.style),h),className:M,prefixCls:A,direction:s,defaultMotions:T,expandIcon:z,ref:t,rootClassName:F()(b,P,o.rootClassName,D,O),_internalComponents:$k})))))})),Ak=Tk,Ok=(0,I.forwardRef)(((e,t)=>{const n=(0,I.useRef)(null),r=I.useContext(Ca);return(0,I.useImperativeHandle)(t,(()=>({menu:n.current,focus:e=>{var t;null===(t=n.current)||void 0===t||t.focus(e)}}))),I.createElement(Ak,Object.assign({ref:n},e,r))}));Ok.Item=Qx,Ok.SubMenu=Ek,Ok.Divider=Yx,Ok.ItemGroup=Mx;const Rk=Ok,Pk=new Hr("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Dk=new Hr("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),Fk=new Hr("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),_k=new Hr("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),Mk=new Hr("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),zk=new Hr("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),Lk={"move-up":{inKeyframes:new Hr("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),outKeyframes:new Hr("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}})},"move-down":{inKeyframes:Pk,outKeyframes:Dk},"move-left":{inKeyframes:Fk,outKeyframes:_k},"move-right":{inKeyframes:Mk,outKeyframes:zk}},Bk=(e,t)=>{const{antCls:n}=e,r=`${n}-${t}`,{inKeyframes:o,outKeyframes:a}=Lk[t];return[zm(r,o,a,e.motionDurationMid),{[`\n        ${r}-enter,\n        ${r}-appear\n      `]:{opacity:0,animationTimingFunction:e.motionEaseOutCirc},[`${r}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},jk=e=>{const{componentCls:t,menuCls:n,colorError:r,colorTextLightSolid:o}=e,a=`${n}-item`;return{[`${t}, ${t}-menu-submenu`]:{[`${n} ${a}`]:{[`&${a}-danger:not(${a}-disabled)`]:{color:r,"&:hover":{color:o,backgroundColor:r}}}}}},Hk=e=>{const{componentCls:t,menuCls:n,zIndexPopup:r,dropdownArrowDistance:o,sizePopupArrow:a,antCls:i,iconCls:s,motionDurationMid:l,paddingBlock:u,fontSize:c,dropdownEdgeChildPadding:d,colorTextDisabled:h,fontSizeIcon:p,controlPaddingHorizontal:f,colorBgElevated:m}=e;return[{[t]:{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:r,display:"block","&::before":{position:"absolute",insetBlock:e.calc(a).div(2).sub(o).equal(),zIndex:-9999,opacity:1e-4,content:'""'},"&-menu-vertical":{maxHeight:"100vh",overflowY:"auto"},[`&-trigger${i}-btn`]:{[`& > ${s}-down, & > ${i}-btn-icon > ${s}-down`]:{fontSize:p}},[`${t}-wrap`]:{position:"relative",[`${i}-btn > ${s}-down`]:{fontSize:p},[`${s}-down::before`]:{transition:`transform ${l}`}},[`${t}-wrap-open`]:{[`${s}-down::before`]:{transform:"rotate(180deg)"}},"\n        &-hidden,\n        &-menu-hidden,\n        &-menu-submenu-hidden\n      ":{display:"none"},[`&${i}-slide-down-enter${i}-slide-down-enter-active${t}-placement-bottomLeft,\n          &${i}-slide-down-appear${i}-slide-down-appear-active${t}-placement-bottomLeft,\n          &${i}-slide-down-enter${i}-slide-down-enter-active${t}-placement-bottom,\n          &${i}-slide-down-appear${i}-slide-down-appear-active${t}-placement-bottom,\n          &${i}-slide-down-enter${i}-slide-down-enter-active${t}-placement-bottomRight,\n          &${i}-slide-down-appear${i}-slide-down-appear-active${t}-placement-bottomRight`]:{animationName:ok},[`&${i}-slide-up-enter${i}-slide-up-enter-active${t}-placement-topLeft,\n          &${i}-slide-up-appear${i}-slide-up-appear-active${t}-placement-topLeft,\n          &${i}-slide-up-enter${i}-slide-up-enter-active${t}-placement-top,\n          &${i}-slide-up-appear${i}-slide-up-appear-active${t}-placement-top,\n          &${i}-slide-up-enter${i}-slide-up-enter-active${t}-placement-topRight,\n          &${i}-slide-up-appear${i}-slide-up-appear-active${t}-placement-topRight`]:{animationName:ik},[`&${i}-slide-down-leave${i}-slide-down-leave-active${t}-placement-bottomLeft,\n          &${i}-slide-down-leave${i}-slide-down-leave-active${t}-placement-bottom,\n          &${i}-slide-down-leave${i}-slide-down-leave-active${t}-placement-bottomRight`]:{animationName:ak},[`&${i}-slide-up-leave${i}-slide-up-leave-active${t}-placement-topLeft,\n          &${i}-slide-up-leave${i}-slide-up-leave-active${t}-placement-top,\n          &${i}-slide-up-leave${i}-slide-up-leave-active${t}-placement-topRight`]:{animationName:sk}}},Om(e,m,{arrowPlacement:{top:!0,bottom:!0}}),{[`${t} ${n}`]:{position:"relative",margin:0},[`${n}-submenu-popup`]:{position:"absolute",zIndex:r,background:"transparent",boxShadow:"none",transformOrigin:"0 0","ul, li":{listStyle:"none",margin:0}},[`${t}, ${t}-menu-submenu`]:Object.assign(Object.assign({},_o(e)),{[n]:Object.assign(Object.assign({padding:d,listStyleType:"none",backgroundColor:m,backgroundClip:"padding-box",borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary},Lo(e)),{"&:empty":{padding:0,boxShadow:"none"},[`${n}-item-group-title`]:{padding:`${yn(u)} ${yn(f)}`,color:e.colorTextDescription,transition:`all ${l}`},[`${n}-item`]:{position:"relative",display:"flex",alignItems:"center"},[`${n}-item-icon`]:{minWidth:c,marginInlineEnd:e.marginXS,fontSize:e.fontSizeSM},[`${n}-title-content`]:{display:"flex",alignItems:"center",flex:"auto","> a":{color:"inherit",transition:`all ${l}`,"&:hover":{color:"inherit"},"&::after":{position:"absolute",inset:0,content:'""'}},[`${n}-item-extra`]:{paddingInlineStart:e.padding,marginInlineStart:"auto",fontSize:e.fontSizeSM,color:e.colorTextDescription}},[`${n}-item, ${n}-submenu-title`]:Object.assign(Object.assign({display:"flex",margin:0,padding:`${yn(u)} ${yn(f)}`,color:e.colorText,fontWeight:"normal",fontSize:c,lineHeight:e.lineHeight,cursor:"pointer",transition:`all ${l}`,borderRadius:e.borderRadiusSM,"&:hover, &-active":{backgroundColor:e.controlItemBgHover}},Lo(e)),{"&-selected":{color:e.colorPrimary,backgroundColor:e.controlItemBgActive,"&:hover, &-active":{backgroundColor:e.controlItemBgActiveHover}},"&-disabled":{color:h,cursor:"not-allowed","&:hover":{color:h,backgroundColor:m,cursor:"not-allowed"},a:{pointerEvents:"none"}},"&-divider":{height:1,margin:`${yn(e.marginXXS)} 0`,overflow:"hidden",lineHeight:0,backgroundColor:e.colorSplit},[`${t}-menu-submenu-expand-icon`]:{position:"absolute",insetInlineEnd:e.paddingXS,[`${t}-menu-submenu-arrow-icon`]:{marginInlineEnd:"0 !important",color:e.colorTextDescription,fontSize:p,fontStyle:"normal"}}}),[`${n}-item-group-list`]:{margin:`0 ${yn(e.marginXS)}`,padding:0,listStyle:"none"},[`${n}-submenu-title`]:{paddingInlineEnd:e.calc(f).add(e.fontSizeSM).equal()},[`${n}-submenu-vertical`]:{position:"relative"},[`${n}-submenu${n}-submenu-disabled ${t}-menu-submenu-title`]:{[`&, ${t}-menu-submenu-arrow-icon`]:{color:h,backgroundColor:m,cursor:"not-allowed"}},[`${n}-submenu-selected ${t}-menu-submenu-title`]:{color:e.colorPrimary}})})},[pk(e,"slide-up"),pk(e,"slide-down"),Bk(e,"move-up"),Bk(e,"move-down"),Um(e,"zoom-big")]]},Vk=ha("Dropdown",(e=>{const{marginXXS:t,sizePopupArrow:n,paddingXXS:r,componentCls:o}=e,a=So(e,{menuCls:`${o}-menu`,dropdownArrowDistance:e.calc(n).div(2).add(t).equal(),dropdownEdgeChildPadding:r});return[Hk(a),jk(a)]}),(e=>Object.assign(Object.assign({zIndexPopup:e.zIndexPopupBase+50,paddingBlock:(e.controlHeight-e.fontSize*e.lineHeight)/2},Tm({contentRadius:e.borderRadiusLG,limitVerticalRadius:!0})),Im(e))),{resetStyle:!1}),Wk=e=>{var t;const{menu:n,arrow:r,prefixCls:o,children:a,trigger:i,disabled:s,dropdownRender:l,getPopupContainer:u,overlayClassName:c,rootClassName:d,overlayStyle:h,open:p,onOpenChange:f,visible:m,onVisibleChange:g,mouseEnterDelay:v=.15,mouseLeaveDelay:b=.1,autoAdjustOverflow:y=!0,placement:w="",overlay:x,transitionName:k}=e,{getPopupContainer:C,getPrefixCls:S,direction:E,dropdown:N}=I.useContext(B);$h("Dropdown");const $=I.useMemo((()=>{const e=S();return void 0!==k?k:w.includes("top")?`${e}-slide-down`:`${e}-slide-up`}),[S,w,k]),T=I.useMemo((()=>w?w.includes("Center")?w.slice(0,w.indexOf("Center")):w:"rtl"===E?"bottomRight":"bottomLeft"),[w,E]);const A=S("dropdown",o),O=hl(A),[R,P,D]=Vk(A,O),[,M]=ca(),z=I.Children.only(a),L=Ql(z,{className:F()(`${A}-trigger`,{[`${A}-rtl`]:"rtl"===E},z.props.className),disabled:null!==(t=z.props.disabled)&&void 0!==t?t:s}),j=s?[]:i,H=!!(null===j||void 0===j?void 0:j.includes("contextMenu")),[V,W]=so(!1,{value:null!==p&&void 0!==p?p:m}),G=oo((e=>{null===f||void 0===f||f(e,{source:"trigger"}),null===g||void 0===g||g(e),W(e)})),U=F()(c,d,P,D,O,null===N||void 0===N?void 0:N.className,{[`${A}-rtl`]:"rtl"===E}),K=Fm({arrowPointAtCenter:"object"===typeof r&&r.pointAtCenter,autoAdjustOverflow:y,offset:M.marginXXS,arrowWidth:r?M.sizePopupArrow:0,borderRadius:M.borderRadius}),q=I.useCallback((()=>{(null===n||void 0===n?void 0:n.selectable)&&(null===n||void 0===n?void 0:n.multiple)||(null===f||void 0===f||f(!1,{source:"menu"}),W(!1))}),[null===n||void 0===n?void 0:n.selectable,null===n||void 0===n?void 0:n.multiple]),[X,J]=Fp("Dropdown",null===h||void 0===h?void 0:h.zIndex);let Y=I.createElement(nw,Object.assign({alignPoint:H},_(e,["rootClassName"]),{mouseEnterDelay:v,mouseLeaveDelay:b,visible:V,builtinPlacements:K,arrow:!!r,overlayClassName:U,prefixCls:A,getPopupContainer:u||C,transitionName:$,trigger:j,overlay:()=>{let e;return e=(null===n||void 0===n?void 0:n.items)?I.createElement(Rk,Object.assign({},n)):"function"===typeof x?x():x,l&&(e=l(e)),e=I.Children.only("string"===typeof e?I.createElement("span",null,e):e),I.createElement(tk,{prefixCls:`${A}-menu`,rootClassName:F()(D,O),expandIcon:I.createElement("span",{className:`${A}-menu-submenu-arrow`},I.createElement(Vt,{className:`${A}-menu-submenu-arrow-icon`})),mode:"vertical",selectable:!1,onClick:q,validator:e=>{let{mode:t}=e}},e)},placement:T,onVisibleChange:G,overlayStyle:Object.assign(Object.assign(Object.assign({},null===N||void 0===N?void 0:N.style),h),{zIndex:X})}),L);return X&&(Y=I.createElement(Op.Provider,{value:J},Y)),R(Y)};const Gk=rw(Wk,"dropdown",(e=>e),(function(e){return Object.assign(Object.assign({},e),{align:{overflow:{adjustX:!1,adjustY:!1}}})}));Wk._InternalPanelDoNotUseOrYouWillBeFired=e=>I.createElement(Gk,Object.assign({},e),I.createElement("span",null));const Uk=Wk;var Kk=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const qk=e=>{const{getPopupContainer:t,getPrefixCls:n,direction:r}=I.useContext(B),{prefixCls:o,type:a="default",danger:i,disabled:s,loading:l,onClick:u,htmlType:c,children:d,className:h,menu:p,arrow:f,autoFocus:m,overlay:g,trigger:v,align:b,open:y,onOpenChange:w,placement:x,getPopupContainer:k,href:C,icon:S=I.createElement(qx,null),title:E,buttonsRender:N=e=>e,mouseEnterDelay:$,mouseLeaveDelay:T,overlayClassName:A,overlayStyle:O,destroyPopupOnHide:R,dropdownRender:P}=e,D=Kk(e,["prefixCls","type","danger","disabled","loading","onClick","htmlType","children","className","menu","arrow","autoFocus","overlay","trigger","align","open","onOpenChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide","dropdownRender"]),_=n("dropdown",o),M=`${_}-button`,z={menu:p,arrow:f,autoFocus:m,align:b,disabled:s,trigger:s?[]:v,onOpenChange:w,getPopupContainer:k||t,mouseEnterDelay:$,mouseLeaveDelay:T,overlayClassName:A,overlayStyle:O,destroyPopupOnHide:R,dropdownRender:P},{compactSize:L,compactItemClassnames:j}=Qs(_,r),H=F()(M,j,h);"overlay"in e&&(z.overlay=g),"open"in e&&(z.open=y),z.placement="placement"in e?x:"rtl"===r?"bottomLeft":"bottomRight";const V=I.createElement(Td,{type:a,danger:i,disabled:s,loading:l,onClick:u,htmlType:c,href:C,title:E},d),W=I.createElement(Td,{type:a,danger:i,icon:S}),[G,U]=N([V,W]);return I.createElement(yf.Compact,Object.assign({className:H,size:L,block:!0},D),G,I.createElement(Uk,Object.assign({},z),U))};qk.__ANT_BUTTON=!0;const Xk=qk,Jk=Uk;Jk.Button=Xk;const Yk=Jk,Qk=I.createContext(null),Zk=Qk.Provider,eC=Qk,tC=I.createContext(null),nC=tC.Provider,rC=e=>{const{componentCls:t,antCls:n}=e,r=`${t}-group`;return{[r]:Object.assign(Object.assign({},_o(e)),{display:"inline-block",fontSize:0,[`&${r}-rtl`]:{direction:"rtl"},[`&${r}-block`]:{display:"flex"},[`${n}-badge ${n}-badge-count`]:{zIndex:1},[`> ${n}-badge:not(:first-child) > ${n}-button-wrapper`]:{borderInlineStart:"none"}})}},oC=e=>{const{componentCls:t,wrapperMarginInlineEnd:n,colorPrimary:r,radioSize:o,motionDurationSlow:a,motionDurationMid:i,motionEaseInOutCirc:s,colorBgContainer:l,colorBorder:u,lineWidth:c,colorBgContainerDisabled:d,colorTextDisabled:h,paddingXS:p,dotColorDisabled:f,lineType:m,radioColor:g,radioBgColor:v,calc:b}=e,y=`${t}-inner`,w=b(o).sub(b(4).mul(2)),x=b(1).mul(o).equal({unit:!0});return{[`${t}-wrapper`]:Object.assign(Object.assign({},_o(e)),{display:"inline-flex",alignItems:"baseline",marginInlineStart:0,marginInlineEnd:n,cursor:"pointer",[`&${t}-wrapper-rtl`]:{direction:"rtl"},"&-disabled":{cursor:"not-allowed",color:e.colorTextDisabled},"&::after":{display:"inline-block",width:0,overflow:"hidden",content:'"\\a0"'},"&-block":{flex:1,justifyContent:"center"},[`${t}-checked::after`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:"100%",height:"100%",border:`${yn(c)} ${m} ${r}`,borderRadius:"50%",visibility:"hidden",opacity:0,content:'""'},[t]:Object.assign(Object.assign({},_o(e)),{position:"relative",display:"inline-block",outline:"none",cursor:"pointer",alignSelf:"center",borderRadius:"50%"}),[`${t}-wrapper:hover &,\n        &:hover ${y}`]:{borderColor:r},[`${t}-input:focus-visible + ${y}`]:Object.assign({},zo(e)),[`${t}:hover::after, ${t}-wrapper:hover &::after`]:{visibility:"visible"},[`${t}-inner`]:{"&::after":{boxSizing:"border-box",position:"absolute",insetBlockStart:"50%",insetInlineStart:"50%",display:"block",width:x,height:x,marginBlockStart:b(1).mul(o).div(-2).equal({unit:!0}),marginInlineStart:b(1).mul(o).div(-2).equal({unit:!0}),backgroundColor:g,borderBlockStart:0,borderInlineStart:0,borderRadius:x,transform:"scale(0)",opacity:0,transition:`all ${a} ${s}`,content:'""'},boxSizing:"border-box",position:"relative",insetBlockStart:0,insetInlineStart:0,display:"block",width:x,height:x,backgroundColor:l,borderColor:u,borderStyle:"solid",borderWidth:c,borderRadius:"50%",transition:`all ${i}`},[`${t}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0},[`${t}-checked`]:{[y]:{borderColor:r,backgroundColor:v,"&::after":{transform:`scale(${e.calc(e.dotSize).div(o).equal()})`,opacity:1,transition:`all ${a} ${s}`}}},[`${t}-disabled`]:{cursor:"not-allowed",[y]:{backgroundColor:d,borderColor:u,cursor:"not-allowed","&::after":{backgroundColor:f}},[`${t}-input`]:{cursor:"not-allowed"},[`${t}-disabled + span`]:{color:h,cursor:"not-allowed"},[`&${t}-checked`]:{[y]:{"&::after":{transform:`scale(${b(w).div(o).equal()})`}}}},[`span${t} + *`]:{paddingInlineStart:p,paddingInlineEnd:p}})}},aC=e=>{const{buttonColor:t,controlHeight:n,componentCls:r,lineWidth:o,lineType:a,colorBorder:i,motionDurationSlow:s,motionDurationMid:l,buttonPaddingInline:u,fontSize:c,buttonBg:d,fontSizeLG:h,controlHeightLG:p,controlHeightSM:f,paddingXS:m,borderRadius:g,borderRadiusSM:v,borderRadiusLG:b,buttonCheckedBg:y,buttonSolidCheckedColor:w,colorTextDisabled:x,colorBgContainerDisabled:k,buttonCheckedBgDisabled:C,buttonCheckedColorDisabled:S,colorPrimary:E,colorPrimaryHover:N,colorPrimaryActive:I,buttonSolidCheckedBg:$,buttonSolidCheckedHoverBg:T,buttonSolidCheckedActiveBg:A,calc:O}=e;return{[`${r}-button-wrapper`]:{position:"relative",display:"inline-block",height:n,margin:0,paddingInline:u,paddingBlock:0,color:t,fontSize:c,lineHeight:yn(O(n).sub(O(o).mul(2)).equal()),background:d,border:`${yn(o)} ${a} ${i}`,borderBlockStartWidth:O(o).add(.02).equal(),borderInlineStartWidth:0,borderInlineEndWidth:o,cursor:"pointer",transition:[`color ${l}`,`background ${l}`,`box-shadow ${l}`].join(","),a:{color:t},[`> ${r}-button`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:-1,width:"100%",height:"100%"},"&:not(:first-child)":{"&::before":{position:"absolute",insetBlockStart:O(o).mul(-1).equal(),insetInlineStart:O(o).mul(-1).equal(),display:"block",boxSizing:"content-box",width:1,height:"100%",paddingBlock:o,paddingInline:0,backgroundColor:i,transition:`background-color ${s}`,content:'""'}},"&:first-child":{borderInlineStart:`${yn(o)} ${a} ${i}`,borderStartStartRadius:g,borderEndStartRadius:g},"&:last-child":{borderStartEndRadius:g,borderEndEndRadius:g},"&:first-child:last-child":{borderRadius:g},[`${r}-group-large &`]:{height:p,fontSize:h,lineHeight:yn(O(p).sub(O(o).mul(2)).equal()),"&:first-child":{borderStartStartRadius:b,borderEndStartRadius:b},"&:last-child":{borderStartEndRadius:b,borderEndEndRadius:b}},[`${r}-group-small &`]:{height:f,paddingInline:O(m).sub(o).equal(),paddingBlock:0,lineHeight:yn(O(f).sub(O(o).mul(2)).equal()),"&:first-child":{borderStartStartRadius:v,borderEndStartRadius:v},"&:last-child":{borderStartEndRadius:v,borderEndEndRadius:v}},"&:hover":{position:"relative",color:E},"&:has(:focus-visible)":Object.assign({},zo(e)),[`${r}-inner, input[type='checkbox'], input[type='radio']`]:{width:0,height:0,opacity:0,pointerEvents:"none"},[`&-checked:not(${r}-button-wrapper-disabled)`]:{zIndex:1,color:E,background:y,borderColor:E,"&::before":{backgroundColor:E},"&:first-child":{borderColor:E},"&:hover":{color:N,borderColor:N,"&::before":{backgroundColor:N}},"&:active":{color:I,borderColor:I,"&::before":{backgroundColor:I}}},[`${r}-group-solid &-checked:not(${r}-button-wrapper-disabled)`]:{color:w,background:$,borderColor:$,"&:hover":{color:w,background:T,borderColor:T},"&:active":{color:w,background:A,borderColor:A}},"&-disabled":{color:x,backgroundColor:k,borderColor:i,cursor:"not-allowed","&:first-child, &:hover":{color:x,backgroundColor:k,borderColor:i}},[`&-disabled${r}-button-wrapper-checked`]:{color:S,backgroundColor:C,borderColor:i,boxShadow:"none"},"&-block":{flex:1,textAlign:"center"}}}},iC=ha("Radio",(e=>{const{controlOutline:t,controlOutlineWidth:n}=e,r=`0 0 0 ${yn(n)} ${t}`,o=So(e,{radioFocusShadow:r,radioButtonFocusShadow:r});return[rC(o),oC(o),aC(o)]}),(e=>{const{wireframe:t,padding:n,marginXS:r,lineWidth:o,fontSizeLG:a,colorText:i,colorBgContainer:s,colorTextDisabled:l,controlItemBgActiveDisabled:u,colorTextLightSolid:c,colorPrimary:d,colorPrimaryHover:h,colorPrimaryActive:p,colorWhite:f}=e;return{radioSize:a,dotSize:t?a-8:a-2*(4+o),dotColorDisabled:l,buttonSolidCheckedColor:c,buttonSolidCheckedBg:d,buttonSolidCheckedHoverBg:h,buttonSolidCheckedActiveBg:p,buttonBg:s,buttonCheckedBg:s,buttonColor:i,buttonCheckedBgDisabled:u,buttonCheckedColorDisabled:l,buttonPaddingInline:n-o,wrapperMarginInlineEnd:r,radioColor:t?d:f,radioBgColor:t?s:d}}),{unitless:{radioSize:!0,dotSize:!0}});var sC=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const lC=(e,t)=>{var n,r;const o=I.useContext(eC),a=I.useContext(tC),{getPrefixCls:i,direction:s,radio:l}=I.useContext(B),u=I.useRef(null),c=uo(t,u),{isFormItemInput:d}=I.useContext(Zi);const h=t=>{var n,r;null===(n=e.onChange)||void 0===n||n.call(e,t),null===(r=null===o||void 0===o?void 0:o.onChange)||void 0===r||r.call(o,t)},{prefixCls:p,className:f,rootClassName:m,children:g,style:v,title:b}=e,y=sC(e,["prefixCls","className","rootClassName","children","style","title"]),w=i("radio",p),x="button"===((null===o||void 0===o?void 0:o.optionType)||a),k=x?`${w}-button`:w,C=hl(w),[S,E,N]=iC(w,C),$=Object.assign({},y),T=I.useContext(dl);o&&($.name=o.name,$.onChange=h,$.checked=e.value===o.value,$.disabled=null!==(n=$.disabled)&&void 0!==n?n:o.disabled),$.disabled=null!==(r=$.disabled)&&void 0!==r?r:T;const A=F()(`${k}-wrapper`,{[`${k}-wrapper-checked`]:$.checked,[`${k}-wrapper-disabled`]:$.disabled,[`${k}-wrapper-rtl`]:"rtl"===s,[`${k}-wrapper-in-form-item`]:d,[`${k}-wrapper-block`]:!!(null===o||void 0===o?void 0:o.block)},null===l||void 0===l?void 0:l.className,f,m,E,N,C);return S(I.createElement(gc,{component:"Radio",disabled:$.disabled},I.createElement("label",{className:A,style:Object.assign(Object.assign({},null===l||void 0===l?void 0:l.style),v),onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,title:b},I.createElement(Fy,Object.assign({},$,{className:F()($.className,{[nu]:!x}),type:"radio",prefixCls:k,ref:c})),void 0!==g?I.createElement("span",null,g):null)))};const uC=I.forwardRef(lC),cC=I.forwardRef(((e,t)=>{const{getPrefixCls:n,direction:r}=I.useContext(B),{prefixCls:o,className:a,rootClassName:i,options:s,buttonStyle:l="outline",disabled:u,children:c,size:d,style:h,id:p,optionType:f,name:m,defaultValue:g,value:v,block:b=!1,onChange:y,onMouseEnter:w,onMouseLeave:x,onFocus:k,onBlur:C}=e,[S,E]=so(g,{value:v}),N=I.useCallback((t=>{const n=S,r=t.target.value;"value"in e||E(r),r!==n&&(null===y||void 0===y||y(t))}),[S,E,y]),$=n("radio",o),T=`${$}-group`,A=hl($),[O,R,P]=iC($,A);let D=c;s&&s.length>0&&(D=s.map((e=>"string"===typeof e||"number"===typeof e?I.createElement(uC,{key:e.toString(),prefixCls:$,disabled:u,value:e,checked:S===e},e):I.createElement(uC,{key:`radio-group-value-options-${e.value}`,prefixCls:$,disabled:e.disabled||u,value:e.value,checked:S===e.value,title:e.title,style:e.style,id:e.id,required:e.required},e.label))));const _=Gs(d),M=F()(T,`${T}-${l}`,{[`${T}-${_}`]:_,[`${T}-rtl`]:"rtl"===r,[`${T}-block`]:b},a,i,R,P,A),z=I.useMemo((()=>({onChange:N,value:S,disabled:u,name:m,optionType:f,block:b})),[N,S,u,m,f,b]);return O(I.createElement("div",Object.assign({},wl(e,{aria:!0,data:!0}),{className:M,style:h,onMouseEnter:w,onMouseLeave:x,onFocus:k,onBlur:C,id:p,ref:t}),I.createElement(Zk,{value:z},D)))})),dC=I.memo(cC);var hC=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const pC=(e,t)=>{const{getPrefixCls:n}=I.useContext(B),{prefixCls:r}=e,o=hC(e,["prefixCls"]),a=n("radio",r);return I.createElement(nC,{value:"button"},I.createElement(uC,Object.assign({prefixCls:a},o,{type:"radio",ref:t})))},fC=I.forwardRef(pC),mC=uC;mC.Button=fC,mC.Group=dC,mC.__ANT_RADIO=!0;const gC=mC,vC={},bC="SELECT_ALL",yC="SELECT_INVERT",wC="SELECT_NONE",xC=[],kC=(e,t)=>{let n=[];return(t||[]).forEach((t=>{n.push(t),t&&"object"===typeof t&&e in t&&(n=[].concat(P(n),P(kC(e,t[e]))))})),n},CC=(e,t)=>{const{preserveSelectedRowKeys:n,selectedRowKeys:r,defaultSelectedRowKeys:o,getCheckboxProps:a,onChange:i,onSelect:s,onSelectAll:l,onSelectInvert:u,onSelectNone:c,onSelectMultiple:d,columnWidth:h,type:p,selections:f,fixed:m,renderCell:g,hideSelectAll:v,checkStrictly:b=!0}=t||{},{prefixCls:y,data:w,pageData:x,getRecordByKey:k,getRowKey:C,expandType:S,childrenColumnName:E,locale:N,getPopupContainer:$}=e,T=$h("Table"),[A,O]=function(e){const[t,n]=(0,I.useState)(null),r=(0,I.useCallback)(((r,o,a)=>{const i=null!==t&&void 0!==t?t:r,s=Math.min(i||0,r),l=Math.max(i||0,r),u=o.slice(s,l+1).map((t=>e(t))),c=u.some((e=>!a.has(e))),d=[];return u.forEach((e=>{c?(a.has(e)||d.push(e),a.add(e)):(a.delete(e),d.push(e))})),n(c?l:null),d}),[t]);return[r,e=>{n(e)}]}((e=>e)),[R,D]=so(r||o||xC,{value:r}),_=I.useRef(new Map),M=(0,I.useCallback)((e=>{if(n){const t=new Map;e.forEach((e=>{let n=k(e);!n&&_.current.has(e)&&(n=_.current.get(e)),t.set(e,n)})),_.current=t}}),[k,n]);I.useEffect((()=>{M(R)}),[R]);const z=(0,I.useMemo)((()=>kC(E,x)),[E,x]),{keyEntities:L}=(0,I.useMemo)((()=>{if(b)return{keyEntities:null};let e=w;if(n){const t=new Set(z.map(((e,t)=>C(e,t)))),n=Array.from(_.current).reduce(((e,n)=>{let[r,o]=n;return t.has(r)?e:e.concat(o)}),[]);e=[].concat(P(e),P(n))}return hy(e,{externalGetKey:C,childrenPropName:E})}),[w,C,b,E,n,z]),B=(0,I.useMemo)((()=>{const e=new Map;return z.forEach(((t,n)=>{const r=C(t,n),o=(a?a(t):null)||{};e.set(r,o)})),e}),[z,C,a]),j=(0,I.useCallback)((e=>{var t;return!!(null===(t=B.get(C(e)))||void 0===t?void 0:t.disabled)}),[B,C]),[H,V]=(0,I.useMemo)((()=>{if(b)return[R||[],[]];const{checkedKeys:e,halfCheckedKeys:t}=Ry(R,!0,L,j);return[e||[],t]}),[R,b,L,j]),W=(0,I.useMemo)((()=>{const e="radio"===p?H.slice(0,1):H;return new Set(e)}),[H,p]),G=(0,I.useMemo)((()=>"radio"===p?new Set:new Set(V)),[V,p]);I.useEffect((()=>{t||D(xC)}),[!!t]);const U=(0,I.useCallback)(((e,t)=>{let r,o;M(e),n?(r=e,o=e.map((e=>_.current.get(e)))):(r=[],o=[],e.forEach((e=>{const t=k(e);void 0!==t&&(r.push(e),o.push(t))}))),D(r),null===i||void 0===i||i(r,o,{type:t})}),[D,k,i,n]),K=(0,I.useCallback)(((e,t,n,r)=>{if(s){const o=n.map((e=>k(e)));s(k(e),t,o,r)}U(n,"single")}),[s,k,U]),q=(0,I.useMemo)((()=>{if(!f||v)return null;return(!0===f?[bC,yC,wC]:f).map((e=>e===bC?{key:"all",text:N.selectionAll,onSelect(){U(w.map(((e,t)=>C(e,t))).filter((e=>{const t=B.get(e);return!(null===t||void 0===t?void 0:t.disabled)||W.has(e)})),"all")}}:e===yC?{key:"invert",text:N.selectInvert,onSelect(){const e=new Set(W);x.forEach(((t,n)=>{const r=C(t,n),o=B.get(r);(null===o||void 0===o?void 0:o.disabled)||(e.has(r)?e.delete(r):e.add(r))}));const t=Array.from(e);u&&(T.deprecated(!1,"onSelectInvert","onChange"),u(t)),U(t,"invert")}}:e===wC?{key:"none",text:N.selectNone,onSelect(){null===c||void 0===c||c(),U(Array.from(W).filter((e=>{const t=B.get(e);return null===t||void 0===t?void 0:t.disabled})),"none")}}:e)).map((e=>Object.assign(Object.assign({},e),{onSelect:function(){for(var t,n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];null===(n=e.onSelect)||void 0===n||(t=n).call.apply(t,[e].concat(o)),O(null)}})))}),[f,W,x,C,u,U]),X=(0,I.useCallback)((e=>{var n;if(!t)return e.filter((e=>e!==vC));let r=P(e);const o=new Set(W),a=z.map(C).filter((e=>!B.get(e).disabled)),i=a.every((e=>o.has(e))),s=a.some((e=>o.has(e))),u=()=>{const e=[];i?a.forEach((t=>{o.delete(t),e.push(t)})):a.forEach((t=>{o.has(t)||(o.add(t),e.push(t))}));const t=Array.from(o);null===l||void 0===l||l(!i,t.map((e=>k(e))),e.map((e=>k(e)))),U(t,"all"),O(null)};let c,w,x;if("radio"!==p){let e;if(q){const t={getPopupContainer:$,items:q.map(((e,t)=>{const{key:n,text:r,onSelect:o}=e;return{key:null!==n&&void 0!==n?n:t,onClick:()=>{null===o||void 0===o||o(a)},label:r}}))};e=I.createElement("div",{className:`${y}-selection-extra`},I.createElement(Yk,{menu:t,getPopupContainer:$},I.createElement("span",null,I.createElement(ty,null))))}const t=z.map(((e,t)=>{const n=C(e,t),r=B.get(n)||{};return Object.assign({checked:o.has(n)},r)})).filter((e=>{let{disabled:t}=e;return t})),n=!!t.length&&t.length===z.length,r=n&&t.every((e=>{let{checked:t}=e;return t})),l=n&&t.some((e=>{let{checked:t}=e;return t}));w=I.createElement(Ky,{checked:n?r:!!z.length&&i,indeterminate:n?!r&&l:!i&&s,onChange:u,disabled:0===z.length||n,"aria-label":e?"Custom selection":"Select all",skipGroup:!0}),c=!v&&I.createElement("div",{className:`${y}-selection`},w,e)}x="radio"===p?(e,t,n)=>{const r=C(t,n),a=o.has(r);return{node:I.createElement(gC,Object.assign({},B.get(r),{checked:a,onClick:e=>e.stopPropagation(),onChange:e=>{o.has(r)||K(r,!0,[r],e.nativeEvent)}})),checked:a}}:(e,t,n)=>{var r;const i=C(t,n),s=o.has(i),l=G.has(i),u=B.get(i);let c;return c="nest"===S?l:null!==(r=null===u||void 0===u?void 0:u.indeterminate)&&void 0!==r?r:l,{node:I.createElement(Ky,Object.assign({},u,{indeterminate:c,checked:s,skipGroup:!0,onClick:e=>e.stopPropagation(),onChange:e=>{let{nativeEvent:t}=e;const{shiftKey:n}=t,r=a.findIndex((e=>e===i)),l=H.some((e=>a.includes(e)));if(n&&b&&l){const e=A(r,a,o),t=Array.from(o);null===d||void 0===d||d(!s,t.map((e=>k(e))),e.map((e=>k(e)))),U(t,"multiple")}else{const e=H;if(b){const n=s?xy(e,i):ky(e,i);K(i,!s,n,t)}else{const n=Ry([].concat(P(e),[i]),!0,L,j),{checkedKeys:r,halfCheckedKeys:o}=n;let a=r;if(s){const e=new Set(r);e.delete(i),a=Ry(Array.from(e),{checked:!1,halfCheckedKeys:o},L,j).checkedKeys}K(i,!s,a,t)}}O(s?null:r)}})),checked:s}};if(!r.includes(vC))if(0===r.findIndex((e=>{var t;return"EXPAND_COLUMN"===(null===(t=e[zv])||void 0===t?void 0:t.columnType)}))){const[e,...t]=r;r=[e,vC].concat(P(t))}else r=[vC].concat(P(r));const E=r.indexOf(vC);r=r.filter(((e,t)=>e!==vC||t===E));const N=r[E-1],T=r[E+1];let R=m;void 0===R&&(void 0!==(null===T||void 0===T?void 0:T.fixed)?R=T.fixed:void 0!==(null===N||void 0===N?void 0:N.fixed)&&(R=N.fixed)),R&&N&&"EXPAND_COLUMN"===(null===(n=N[zv])||void 0===n?void 0:n.columnType)&&void 0===N.fixed&&(N.fixed=R);const D=F()(`${y}-selection-col`,{[`${y}-selection-col-with-dropdown`]:f&&"checkbox"===p}),_={fixed:R,width:h,className:`${y}-selection-column`,title:(null===t||void 0===t?void 0:t.columnTitle)?"function"===typeof t.columnTitle?t.columnTitle(w):t.columnTitle:c,render:(e,t,n)=>{const{node:r,checked:o}=x(e,t,n);return g?g(o,t,n,r):r},onCell:t.onCell,[zv]:{className:D}};return r.map((e=>e===vC?_:e))}),[C,z,t,H,W,G,h,q,S,B,d,K,j]);return[X,W]};function SC(e,t){return(0,I.useImperativeHandle)(e,(()=>{const e=t(),{nativeElement:n}=e;return"undefined"!==typeof Proxy?new Proxy(n,{get:(t,n)=>e[n]?e[n]:Reflect.get(t,n)}):(o=e,(r=n)._antProxy=r._antProxy||{},Object.keys(o).forEach((e=>{if(!(e in r._antProxy)){const t=r[e];r._antProxy[e]=t,r[e]=o[e]}})),r);var r,o}))}function EC(e){return null!==e&&void 0!==e&&e===e.window}const NC=e=>{var t,n;if("undefined"===typeof window)return 0;let r=0;return EC(e)?r=e.pageYOffset:e instanceof Document?r=e.documentElement.scrollTop:(e instanceof HTMLElement||e)&&(r=e.scrollTop),e&&!EC(e)&&"number"!==typeof r&&(r=null===(n=(null!==(t=e.ownerDocument)&&void 0!==t?t:e).documentElement)||void 0===n?void 0:n.scrollTop),r};const IC=()=>{const[,e]=ca(),t=new Vo(e.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return I.createElement("svg",{style:t,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},I.createElement("title",null,"empty image"),I.createElement("g",{fill:"none",fillRule:"evenodd"},I.createElement("g",{transform:"translate(24 31.67)"},I.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),I.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),I.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),I.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),I.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),I.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),I.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},I.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),I.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))};const $C=()=>{const[,e]=ca(),{colorFill:t,colorFillTertiary:n,colorFillQuaternary:r,colorBgContainer:o}=e,{borderColor:a,shadowColor:i,contentColor:s}=(0,I.useMemo)((()=>({borderColor:new Vo(t).onBackground(o).toHexShortString(),shadowColor:new Vo(n).onBackground(o).toHexShortString(),contentColor:new Vo(r).onBackground(o).toHexShortString()})),[t,n,r,o]);return I.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},I.createElement("title",null,"Simple Empty"),I.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},I.createElement("ellipse",{fill:i,cx:"32",cy:"33",rx:"32",ry:"7"}),I.createElement("g",{fillRule:"nonzero",stroke:a},I.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),I.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:s}))))},TC=e=>{const{componentCls:t,margin:n,marginXS:r,marginXL:o,fontSize:a,lineHeight:i}=e;return{[t]:{marginInline:r,fontSize:a,lineHeight:i,textAlign:"center",[`${t}-image`]:{height:e.emptyImgHeight,marginBottom:r,opacity:e.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${t}-description`]:{color:e.colorTextDescription},[`${t}-footer`]:{marginTop:n},"&-normal":{marginBlock:o,color:e.colorTextDescription,[`${t}-description`]:{color:e.colorTextDescription},[`${t}-image`]:{height:e.emptyImgHeightMD}},"&-small":{marginBlock:r,color:e.colorTextDescription,[`${t}-image`]:{height:e.emptyImgHeightSM}}}}},AC=ha("Empty",(e=>{const{componentCls:t,controlHeightLG:n,calc:r}=e,o=So(e,{emptyImgCls:`${t}-img`,emptyImgHeight:r(n).mul(2.5).equal(),emptyImgHeightMD:n,emptyImgHeightSM:r(n).mul(.875).equal()});return[TC(o)]}));var OC=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const RC=I.createElement(IC,null),PC=I.createElement($C,null),DC=e=>{var{className:t,rootClassName:n,prefixCls:r,image:o=RC,description:a,children:i,imageStyle:s,style:l}=e,u=OC(e,["className","rootClassName","prefixCls","image","description","children","imageStyle","style"]);const{getPrefixCls:c,direction:d,empty:h}=I.useContext(B),p=c("empty",r),[f,m,g]=AC(p),[v]=Ef("Empty"),b="undefined"!==typeof a?a:null===v||void 0===v?void 0:v.description,y="string"===typeof b?b:"empty";let w=null;return w="string"===typeof o?I.createElement("img",{alt:y,src:o}):o,f(I.createElement("div",Object.assign({className:F()(m,g,p,null===h||void 0===h?void 0:h.className,{[`${p}-normal`]:o===PC,[`${p}-rtl`]:"rtl"===d},t,n),style:Object.assign(Object.assign({},null===h||void 0===h?void 0:h.style),l)},u),I.createElement("div",{className:`${p}-image`,style:s},w),b&&I.createElement("div",{className:`${p}-description`},b),i&&I.createElement("div",{className:`${p}-footer`},i)))};DC.PRESENTED_IMAGE_DEFAULT=RC,DC.PRESENTED_IMAGE_SIMPLE=PC;const FC=DC,_C=e=>{const{componentName:t}=e,{getPrefixCls:n}=(0,I.useContext)(B),r=n("empty");switch(t){case"Table":case"List":return I.createElement(FC,{image:FC.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return I.createElement(FC,{image:FC.PRESENTED_IMAGE_SIMPLE,className:`${r}-small`});case"Table.filter":return null;default:return I.createElement(FC,null)}};function MC(){const[,e]=I.useReducer((e=>e+1),0);return e}const zC=["xxl","xl","lg","md","sm","xs"];function LC(){const[,e]=ca(),t=(e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}))((e=>{const t=e,n=[].concat(zC).reverse();return n.forEach(((e,r)=>{const o=e.toUpperCase(),a=`screen${o}Min`,i=`screen${o}`;if(!(t[a]<=t[i]))throw new Error(`${a}<=${i} fails : !(${t[a]}<=${t[i]})`);if(r<n.length-1){const e=`screen${o}Max`;if(!(t[i]<=t[e]))throw new Error(`${i}<=${e} fails : !(${t[i]}<=${t[e]})`);const a=`screen${n[r+1].toUpperCase()}Min`;if(!(t[e]<=t[a]))throw new Error(`${e}<=${a} fails : !(${t[e]}<=${t[a]})`)}})),e})(e));return I.useMemo((()=>{const e=new Map;let n=-1,r={};return{matchHandlers:{},dispatch:t=>(r=t,e.forEach((e=>e(r))),e.size>=1),subscribe(t){return e.size||this.register(),n+=1,e.set(n,t),t(r),n},unsubscribe(t){e.delete(t),e.size||this.unregister()},unregister(){Object.keys(t).forEach((e=>{const n=t[e],r=this.matchHandlers[n];null===r||void 0===r||r.mql.removeListener(null===r||void 0===r?void 0:r.listener)})),e.clear()},register(){Object.keys(t).forEach((e=>{const n=t[e],o=t=>{let{matches:n}=t;this.dispatch(Object.assign(Object.assign({},r),{[e]:n}))},a=window.matchMedia(n);a.addListener(o),this.matchHandlers[n]={mql:a,listener:o},o(a)}))},responsiveMap:t}}),[e])}const BC=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,I.useRef)({}),n=MC(),r=LC();return In((()=>{const o=r.subscribe((r=>{t.current=r,e&&n()}));return()=>r.unsubscribe(o)}),[]),t.current};const jC={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"};var HC=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:jC}))};const VC=I.forwardRef(HC);const WC={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"};var GC=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:WC}))};const UC=I.forwardRef(GC);const KC={items_per_page:"\u6761/\u9875",jump_to:"\u8df3\u81f3",jump_to_confirm:"\u786e\u5b9a",page:"\u9875",prev_page:"\u4e0a\u4e00\u9875",next_page:"\u4e0b\u4e00\u9875",prev_5:"\u5411\u524d 5 \u9875",next_5:"\u5411\u540e 5 \u9875",prev_3:"\u5411\u524d 3 \u9875",next_3:"\u5411\u540e 3 \u9875",page_size:"\u9875\u7801"};var qC=["10","20","50","100"];const XC=function(e){var t=e.pageSizeOptions,n=void 0===t?qC:t,r=e.locale,o=e.changeSize,a=e.pageSize,i=e.goButton,s=e.quickGo,l=e.rootPrefixCls,u=e.selectComponentClass,c=e.selectPrefixCls,d=e.disabled,h=e.buildOptionText,p=e.showSizeChanger,f=X(I.useState(""),2),m=f[0],g=f[1],v=function(){return!m||Number.isNaN(m)?void 0:Number(m)},b="function"===typeof h?h:function(e){return"".concat(e," ").concat(r.items_per_page)},y=function(e){""!==m&&(e.keyCode!==vp.ENTER&&"click"!==e.type||(g(""),null===s||void 0===s||s(v())))},w="".concat(l,"-options");if(!p&&!s)return null;var x=null,k=null,C=null;if(p&&u){var S="object"===J(p)?p:{},E=S.options,N=S.className,$=E?void 0:(n.some((function(e){return e.toString()===a.toString()}))?n:n.concat([a.toString()]).sort((function(e,t){return(Number.isNaN(Number(e))?0:Number(e))-(Number.isNaN(Number(t))?0:Number(t))}))).map((function(e,t){return I.createElement(u.Option,{key:t,value:e.toString()},b(e))}));x=I.createElement(u,G({disabled:d,prefixCls:c,showSearch:!1,optionLabelProp:E?"label":"children",popupMatchSelectWidth:!1,value:(a||n[0]).toString(),getPopupContainer:function(e){return e.parentNode},"aria-label":r.page_size,defaultOpen:!1},"object"===J(p)?p:null,{className:F()("".concat(w,"-size-changer"),N),options:E,onChange:function(e,t){var n;null===o||void 0===o||o(Number(e)),"object"===J(p)&&(null===(n=p.onChange)||void 0===n||n.call(p,e,t))}}),$)}return s&&(i&&(C="boolean"===typeof i?I.createElement("button",{type:"button",onClick:y,onKeyUp:y,disabled:d,className:"".concat(w,"-quick-jumper-button")},r.jump_to_confirm):I.createElement("span",{onClick:y,onKeyUp:y},i)),k=I.createElement("div",{className:"".concat(w,"-quick-jumper")},r.jump_to,I.createElement("input",{disabled:d,type:"text",value:m,onChange:function(e){g(e.target.value)},onKeyUp:y,onBlur:function(e){i||""===m||(g(""),e.relatedTarget&&(e.relatedTarget.className.indexOf("".concat(l,"-item-link"))>=0||e.relatedTarget.className.indexOf("".concat(l,"-item"))>=0)||null===s||void 0===s||s(v()))},"aria-label":r.page}),r.page,C)),I.createElement("li",{className:w},x,k)};const JC=function(e){var t=e.rootPrefixCls,n=e.page,r=e.active,o=e.className,a=e.showTitle,i=e.onClick,s=e.onKeyPress,l=e.itemRender,u="".concat(t,"-item"),c=F()(u,"".concat(u,"-").concat(n),Q(Q({},"".concat(u,"-active"),r),"".concat(u,"-disabled"),!n),o),d=l(n,"page",I.createElement("a",{rel:"nofollow"},n));return d?I.createElement("li",{title:a?String(n):null,className:c,onClick:function(){i(n)},onKeyDown:function(e){s(e,i,n)},tabIndex:0},d):null};var YC=function(e,t,n){return n};function QC(){}function ZC(e){var t=Number(e);return"number"===typeof t&&!Number.isNaN(t)&&isFinite(t)&&Math.floor(t)===t}function eS(e,t,n){var r="undefined"===typeof e?t:e;return Math.floor((n-1)/r)+1}const tS=function(e){var t=e.prefixCls,n=void 0===t?"rc-pagination":t,r=e.selectPrefixCls,o=void 0===r?"rc-select":r,a=e.className,i=e.selectComponentClass,s=e.current,l=e.defaultCurrent,u=void 0===l?1:l,c=e.total,d=void 0===c?0:c,h=e.pageSize,p=e.defaultPageSize,f=void 0===p?10:p,m=e.onChange,g=void 0===m?QC:m,v=e.hideOnSinglePage,b=e.align,y=e.showPrevNextJumpers,w=void 0===y||y,x=e.showQuickJumper,k=e.showLessItems,C=e.showTitle,S=void 0===C||C,E=e.onShowSizeChange,N=void 0===E?QC:E,$=e.locale,T=void 0===$?KC:$,A=e.style,O=e.totalBoundaryShowSizeChanger,R=void 0===O?50:O,P=e.disabled,D=e.simple,_=e.showTotal,M=e.showSizeChanger,z=void 0===M?d>R:M,L=e.pageSizeOptions,B=e.itemRender,j=void 0===B?YC:B,H=e.jumpPrevIcon,V=e.jumpNextIcon,W=e.prevIcon,U=e.nextIcon,K=I.useRef(null),q=X(so(10,{value:h,defaultValue:f}),2),Y=q[0],Z=q[1],ee=so(1,{value:s,defaultValue:u,postState:function(e){return Math.max(1,Math.min(e,eS(void 0,Y,d)))}}),te=X(ee,2),ne=te[0],re=te[1],oe=X(I.useState(ne),2),ae=oe[0],ie=oe[1];(0,I.useEffect)((function(){ie(ne)}),[ne]);var se=Math.max(1,ne-(k?3:5)),le=Math.min(eS(void 0,Y,d),ne+(k?3:5));function ue(t,r){var o=t||I.createElement("button",{type:"button","aria-label":r,className:"".concat(n,"-item-link")});return"function"===typeof t&&(o=I.createElement(t,nt({},e))),o}function ce(e){var t=e.target.value,n=eS(void 0,Y,d);return""===t?t:Number.isNaN(Number(t))?ae:t>=n?n:Number(t)}var de=d>Y&&x;function he(e){var t=ce(e);switch(t!==ae&&ie(t),e.keyCode){case vp.ENTER:pe(t);break;case vp.UP:pe(t-1);break;case vp.DOWN:pe(t+1)}}function pe(e){if(function(e){return ZC(e)&&e!==ne&&ZC(d)&&d>0}(e)&&!P){var t=eS(void 0,Y,d),n=e;return e>t?n=t:e<1&&(n=1),n!==ae&&ie(n),re(n),null===g||void 0===g||g(n,Y),n}return ne}var fe=ne>1,me=ne<eS(void 0,Y,d);function ge(){fe&&pe(ne-1)}function ve(){me&&pe(ne+1)}function be(){pe(se)}function ye(){pe(le)}function we(e,t){if("Enter"===e.key||e.charCode===vp.ENTER||e.keyCode===vp.ENTER){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];t.apply(void 0,r)}}function xe(e){"click"!==e.type&&e.keyCode!==vp.ENTER||pe(ae)}var ke=null,Ce=wl(e,{aria:!0,data:!0}),Se=_&&I.createElement("li",{className:"".concat(n,"-total-text")},_(d,[0===d?0:(ne-1)*Y+1,ne*Y>d?d:ne*Y])),Ee=null,Ne=eS(void 0,Y,d);if(v&&d<=Y)return null;var Ie=[],$e={rootPrefixCls:n,onClick:pe,onKeyPress:we,showTitle:S,itemRender:j,page:-1},Te=ne-1>0?ne-1:0,Ae=ne+1<Ne?ne+1:Ne,Oe=x&&x.goButton,Re="object"===J(D)?D.readOnly:!D,Pe=Oe,De=null;D&&(Oe&&(Pe="boolean"===typeof Oe?I.createElement("button",{type:"button",onClick:xe,onKeyUp:xe},T.jump_to_confirm):I.createElement("span",{onClick:xe,onKeyUp:xe},Oe),Pe=I.createElement("li",{title:S?"".concat(T.jump_to).concat(ne,"/").concat(Ne):null,className:"".concat(n,"-simple-pager")},Pe)),De=I.createElement("li",{title:S?"".concat(ne,"/").concat(Ne):null,className:"".concat(n,"-simple-pager")},Re?ae:I.createElement("input",{type:"text",value:ae,disabled:P,onKeyDown:function(e){e.keyCode!==vp.UP&&e.keyCode!==vp.DOWN||e.preventDefault()},onKeyUp:he,onChange:he,onBlur:function(e){pe(ce(e))},size:3}),I.createElement("span",{className:"".concat(n,"-slash")},"/"),Ne));var Fe=k?1:2;if(Ne<=3+2*Fe){Ne||Ie.push(I.createElement(JC,G({},$e,{key:"noPager",page:1,className:"".concat(n,"-item-disabled")})));for(var _e=1;_e<=Ne;_e+=1)Ie.push(I.createElement(JC,G({},$e,{key:_e,page:_e,active:ne===_e})))}else{var Me=k?T.prev_3:T.prev_5,ze=k?T.next_3:T.next_5,Le=j(se,"jump-prev",ue(H,"prev page")),Be=j(le,"jump-next",ue(V,"next page"));w&&(ke=Le?I.createElement("li",{title:S?Me:null,key:"prev",onClick:be,tabIndex:0,onKeyDown:function(e){we(e,be)},className:F()("".concat(n,"-jump-prev"),Q({},"".concat(n,"-jump-prev-custom-icon"),!!H))},Le):null,Ee=Be?I.createElement("li",{title:S?ze:null,key:"next",onClick:ye,tabIndex:0,onKeyDown:function(e){we(e,ye)},className:F()("".concat(n,"-jump-next"),Q({},"".concat(n,"-jump-next-custom-icon"),!!V))},Be):null);var je=Math.max(1,ne-Fe),He=Math.min(ne+Fe,Ne);ne-1<=Fe&&(He=1+2*Fe),Ne-ne<=Fe&&(je=Ne-2*Fe);for(var Ve=je;Ve<=He;Ve+=1)Ie.push(I.createElement(JC,G({},$e,{key:Ve,page:Ve,active:ne===Ve})));if(ne-1>=2*Fe&&3!==ne&&(Ie[0]=I.cloneElement(Ie[0],{className:F()("".concat(n,"-item-after-jump-prev"),Ie[0].props.className)}),Ie.unshift(ke)),Ne-ne>=2*Fe&&ne!==Ne-2){var We=Ie[Ie.length-1];Ie[Ie.length-1]=I.cloneElement(We,{className:F()("".concat(n,"-item-before-jump-next"),We.props.className)}),Ie.push(Ee)}1!==je&&Ie.unshift(I.createElement(JC,G({},$e,{key:1,page:1}))),He!==Ne&&Ie.push(I.createElement(JC,G({},$e,{key:Ne,page:Ne})))}var Ge=function(e){var t=j(e,"prev",ue(W,"prev page"));return I.isValidElement(t)?I.cloneElement(t,{disabled:!fe}):t}(Te);if(Ge){var Ue=!fe||!Ne;Ge=I.createElement("li",{title:S?T.prev_page:null,onClick:ge,tabIndex:Ue?null:0,onKeyDown:function(e){we(e,ge)},className:F()("".concat(n,"-prev"),Q({},"".concat(n,"-disabled"),Ue)),"aria-disabled":Ue},Ge)}var Ke,qe,Xe=function(e){var t=j(e,"next",ue(U,"next page"));return I.isValidElement(t)?I.cloneElement(t,{disabled:!me}):t}(Ae);Xe&&(D?(Ke=!me,qe=fe?0:null):qe=(Ke=!me||!Ne)?null:0,Xe=I.createElement("li",{title:S?T.next_page:null,onClick:ve,tabIndex:qe,onKeyDown:function(e){we(e,ve)},className:F()("".concat(n,"-next"),Q({},"".concat(n,"-disabled"),Ke)),"aria-disabled":Ke},Xe));var Je=F()(n,a,Q(Q(Q(Q(Q({},"".concat(n,"-start"),"start"===b),"".concat(n,"-center"),"center"===b),"".concat(n,"-end"),"end"===b),"".concat(n,"-simple"),D),"".concat(n,"-disabled"),P));return I.createElement("ul",G({className:Je,style:A,ref:K},Ce),Se,Ge,D?De:Ie,Xe,I.createElement(XC,{locale:T,rootPrefixCls:n,disabled:P,selectComponentClass:i,selectPrefixCls:o,changeSize:function(e){var t=eS(e,Y,d),n=ne>t&&0!==t?t:ne;Z(e),ie(n),null===N||void 0===N||N(ne,e),re(n),null===g||void 0===g||g(n,e)},pageSize:Y,pageSizeOptions:L,quickGo:de?pe:null,goButton:Pe,showSizeChanger:z}))};const nS=function(e){var t=e.className,n=e.customizeIcon,r=e.customizeIconProps,o=e.children,a=e.onMouseDown,i=e.onClick,s="function"===typeof n?n(r):n;return I.createElement("span",{className:t,onMouseDown:function(e){e.preventDefault(),null===a||void 0===a||a(e)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:i,"aria-hidden":!0},void 0!==s?s:I.createElement("span",{className:F()(t.split(/\s+/).map((function(e){return"".concat(e,"-icon")})))},o))};var rS=I.createContext(null);function oS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=I.useRef(null),n=I.useRef(null);return I.useEffect((function(){return function(){window.clearTimeout(n.current)}}),[]),[function(){return t.current},function(r){(r||null===t.current)&&(t.current=r),window.clearTimeout(n.current),n.current=window.setTimeout((function(){t.current=null}),e)}]}var aS=function(e,t){var n,r=e.prefixCls,o=e.id,a=e.inputElement,i=e.disabled,s=e.tabIndex,l=e.autoFocus,u=e.autoComplete,c=e.editable,d=e.activeDescendantId,h=e.value,p=e.maxLength,f=e.onKeyDown,m=e.onMouseDown,g=e.onChange,v=e.onPaste,b=e.onCompositionStart,y=e.onCompositionEnd,w=e.open,x=e.attrs,k=a||I.createElement("input",null),C=k,S=C.ref,E=C.props,N=E.onKeyDown,$=E.onChange,T=E.onMouseDown,A=E.onCompositionStart,O=E.onCompositionEnd,R=E.style;return k.props,k=I.cloneElement(k,nt(nt(nt({type:"search"},E),{},{id:o,ref:uo(t,S),disabled:i,tabIndex:s,autoComplete:u||"off",autoFocus:l,className:F()("".concat(r,"-selection-search-input"),null===(n=k)||void 0===n||null===(n=n.props)||void 0===n?void 0:n.className),role:"combobox","aria-expanded":w||!1,"aria-haspopup":"listbox","aria-owns":"".concat(o,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(o,"_list"),"aria-activedescendant":w?d:void 0},x),{},{value:c?h:"",maxLength:p,readOnly:!c,unselectable:c?null:"on",style:nt(nt({},R),{},{opacity:c?null:0}),onKeyDown:function(e){f(e),N&&N(e)},onMouseDown:function(e){m(e),T&&T(e)},onChange:function(e){g(e),$&&$(e)},onCompositionStart:function(e){b(e),A&&A(e)},onCompositionEnd:function(e){y(e),O&&O(e)},onPaste:v}))};const iS=I.forwardRef(aS);function sS(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}var lS="undefined"!==typeof window&&window.document&&window.document.documentElement;function uS(e){return["string","number"].includes(J(e))}function cS(e){var t=void 0;return e&&(uS(e.title)?t=e.title.toString():uS(e.label)&&(t=e.label.toString())),t}function dS(e){var t;return null!==(t=e.key)&&void 0!==t?t:e.value}var hS=function(e){e.preventDefault(),e.stopPropagation()};const pS=function(e){var t,n,r=e.id,o=e.prefixCls,a=e.values,i=e.open,s=e.searchValue,l=e.autoClearSearchValue,u=e.inputRef,c=e.placeholder,d=e.disabled,h=e.mode,p=e.showSearch,f=e.autoFocus,m=e.autoComplete,g=e.activeDescendantId,v=e.tabIndex,b=e.removeIcon,y=e.maxTagCount,w=e.maxTagTextLength,x=e.maxTagPlaceholder,k=void 0===x?function(e){return"+ ".concat(e.length," ...")}:x,C=e.tagRender,S=e.onToggleOpen,E=e.onRemove,N=e.onInputChange,$=e.onInputPaste,T=e.onInputKeyDown,A=e.onInputMouseDown,O=e.onInputCompositionStart,R=e.onInputCompositionEnd,P=I.useRef(null),D=X((0,I.useState)(0),2),_=D[0],M=D[1],z=X((0,I.useState)(!1),2),L=z[0],B=z[1],j="".concat(o,"-selection"),H=i||"multiple"===h&&!1===l||"tags"===h?s:"",V="tags"===h||"multiple"===h&&!1===l||p&&(i||L);t=function(){M(P.current.scrollWidth)},n=[H],lS?I.useLayoutEffect(t,n):I.useEffect(t,n);var W=function(e,t,n,r,o){return I.createElement("span",{title:cS(e),className:F()("".concat(j,"-item"),Q({},"".concat(j,"-item-disabled"),n))},I.createElement("span",{className:"".concat(j,"-item-content")},t),r&&I.createElement(nS,{className:"".concat(j,"-item-remove"),onMouseDown:hS,onClick:o,customizeIcon:b},"\xd7"))},G=function(e,t,n,r,o,a){return I.createElement("span",{onMouseDown:function(e){hS(e),S(!i)}},C({label:t,value:e,disabled:n,closable:r,onClose:o,isMaxTag:!!a}))},U=I.createElement("div",{className:"".concat(j,"-search"),style:{width:_},onFocus:function(){B(!0)},onBlur:function(){B(!1)}},I.createElement(iS,{ref:u,open:i,prefixCls:o,id:r,inputElement:null,disabled:d,autoFocus:f,autoComplete:m,editable:V,activeDescendantId:g,value:H,onKeyDown:T,onMouseDown:A,onChange:N,onPaste:$,onCompositionStart:O,onCompositionEnd:R,tabIndex:v,attrs:wl(e,!0)}),I.createElement("span",{ref:P,className:"".concat(j,"-search-mirror"),"aria-hidden":!0},H,"\xa0")),K=I.createElement(Sw,{prefixCls:"".concat(j,"-overflow"),data:a,renderItem:function(e){var t=e.disabled,n=e.label,r=e.value,o=!d&&!t,a=n;if("number"===typeof w&&("string"===typeof n||"number"===typeof n)){var i=String(a);i.length>w&&(a="".concat(i.slice(0,w),"..."))}var s=function(t){t&&t.stopPropagation(),E(e)};return"function"===typeof C?G(r,a,t,o,s):W(e,a,t,o,s)},renderRest:function(e){var t="function"===typeof k?k(e):k;return"function"===typeof C?G(void 0,t,!1,!1,void 0,!0):W({title:t},t,!1)},suffix:U,itemKey:dS,maxCount:y});return I.createElement(I.Fragment,null,K,!a.length&&!H&&I.createElement("span",{className:"".concat(j,"-placeholder")},c))};const fS=function(e){var t=e.inputElement,n=e.prefixCls,r=e.id,o=e.inputRef,a=e.disabled,i=e.autoFocus,s=e.autoComplete,l=e.activeDescendantId,u=e.mode,c=e.open,d=e.values,h=e.placeholder,p=e.tabIndex,f=e.showSearch,m=e.searchValue,g=e.activeValue,v=e.maxLength,b=e.onInputKeyDown,y=e.onInputMouseDown,w=e.onInputChange,x=e.onInputPaste,k=e.onInputCompositionStart,C=e.onInputCompositionEnd,S=e.title,E=X(I.useState(!1),2),N=E[0],$=E[1],T="combobox"===u,A=T||f,O=d[0],R=m||"";T&&g&&!N&&(R=g),I.useEffect((function(){T&&$(!1)}),[T,g]);var P=!("combobox"!==u&&!c&&!f)&&!!R,D=void 0===S?cS(O):S,F=I.useMemo((function(){return O?null:I.createElement("span",{className:"".concat(n,"-selection-placeholder"),style:P?{visibility:"hidden"}:void 0},h)}),[O,P,h,n]);return I.createElement(I.Fragment,null,I.createElement("span",{className:"".concat(n,"-selection-search")},I.createElement(iS,{ref:o,prefixCls:n,id:r,open:c,inputElement:t,disabled:a,autoFocus:i,autoComplete:s,editable:A,activeDescendantId:l,value:R,onKeyDown:b,onMouseDown:y,onChange:function(e){$(!0),w(e)},onPaste:x,onCompositionStart:k,onCompositionEnd:C,tabIndex:p,attrs:wl(e,!0),maxLength:T?v:void 0})),!T&&O?I.createElement("span",{className:"".concat(n,"-selection-item"),title:D,style:P?{visibility:"hidden"}:void 0},O.label):null,F)};var mS=function(e,t){var n=(0,I.useRef)(null),r=(0,I.useRef)(!1),o=e.prefixCls,a=e.open,i=e.mode,s=e.showSearch,l=e.tokenWithEnter,u=e.disabled,c=e.autoClearSearchValue,d=e.onSearch,h=e.onSearchSubmit,p=e.onToggleOpen,f=e.onInputKeyDown,m=e.domRef;I.useImperativeHandle(t,(function(){return{focus:function(e){n.current.focus(e)},blur:function(){n.current.blur()}}}));var g=X(oS(0),2),v=g[0],b=g[1],y=(0,I.useRef)(null),w=function(e){!1!==d(e,!0,r.current)&&p(!0)},x={inputRef:n,onInputKeyDown:function(e){var t,n=e.which;n!==vp.UP&&n!==vp.DOWN||e.preventDefault(),f&&f(e),n!==vp.ENTER||"tags"!==i||r.current||a||null===h||void 0===h||h(e.target.value),t=n,[vp.ESC,vp.SHIFT,vp.BACKSPACE,vp.TAB,vp.WIN_KEY,vp.ALT,vp.META,vp.WIN_KEY_RIGHT,vp.CTRL,vp.SEMICOLON,vp.EQUALS,vp.CAPS_LOCK,vp.CONTEXT_MENU,vp.F1,vp.F2,vp.F3,vp.F4,vp.F5,vp.F6,vp.F7,vp.F8,vp.F9,vp.F10,vp.F11,vp.F12].includes(t)||p(!0)},onInputMouseDown:function(){b(!0)},onInputChange:function(e){var t=e.target.value;if(l&&y.current&&/[\r\n]/.test(y.current)){var n=y.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");t=t.replace(n,y.current)}y.current=null,w(t)},onInputPaste:function(e){var t=e.clipboardData,n=null===t||void 0===t?void 0:t.getData("text");y.current=n||""},onInputCompositionStart:function(){r.current=!0},onInputCompositionEnd:function(e){r.current=!1,"combobox"!==i&&w(e.target.value)}},k="multiple"===i||"tags"===i?I.createElement(pS,G({},e,x)):I.createElement(fS,G({},e,x));return I.createElement("div",{ref:m,className:"".concat(o,"-selector"),onClick:function(e){e.target!==n.current&&(void 0!==document.body.style.msTouchAction?setTimeout((function(){n.current.focus()})):n.current.focus())},onMouseDown:function(e){var t=v();e.target===n.current||t||"combobox"===i&&u||e.preventDefault(),("combobox"===i||s&&t)&&a||(a&&!1!==c&&d("",!0,!1),p())}},k)};const gS=I.forwardRef(mS);var vS=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],bS=function(e,t){var n=e.prefixCls,r=(e.disabled,e.visible),o=e.children,a=e.popupElement,i=e.animation,s=e.transitionName,l=e.dropdownStyle,u=e.dropdownClassName,c=e.direction,d=void 0===c?"ltr":c,h=e.placement,p=e.builtinPlacements,f=e.dropdownMatchSelectWidth,m=e.dropdownRender,g=e.dropdownAlign,v=e.getPopupContainer,b=e.empty,y=e.getTriggerDOMNode,w=e.onPopupVisibleChange,x=e.onPopupMouseEnter,k=Z(e,vS),C="".concat(n,"-dropdown"),S=a;m&&(S=m(a));var E=I.useMemo((function(){return p||function(e){var t=!0===e?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:t,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:t,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:t,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:t,adjustY:1},htmlRegion:"scroll"}}}(f)}),[p,f]),N=i?"".concat(C,"-").concat(i):s,$="number"===typeof f,T=I.useMemo((function(){return $?null:!1===f?"minWidth":"width"}),[f,$]),A=l;$&&(A=nt(nt({},A),{},{width:f}));var O=I.useRef(null);return I.useImperativeHandle(t,(function(){return{getPopupElement:function(){var e;return null===(e=O.current)||void 0===e?void 0:e.popupElement}}})),I.createElement(pm,G({},k,{showAction:w?["click"]:[],hideAction:w?["click"]:[],popupPlacement:h||("rtl"===d?"bottomRight":"bottomLeft"),builtinPlacements:E,prefixCls:C,popupTransitionName:N,popup:I.createElement("div",{onMouseEnter:x},S),ref:O,stretch:T,popupAlign:g,popupVisible:r,getPopupContainer:v,popupClassName:F()(u,Q({},"".concat(C,"-empty"),b)),popupStyle:A,getTriggerDOMNode:y,onPopupVisibleChange:w}),o)};const yS=I.forwardRef(bS);function wS(e,t){var n,r=e.key;return"value"in e&&(n=e.value),null!==r&&void 0!==r?r:void 0!==n?n:"rc-index-key-".concat(t)}function xS(e){return"undefined"!==typeof e&&!Number.isNaN(e)}function kS(e,t){var n=e||{},r=n.label||(t?"children":"label");return{label:r,value:n.value||"value",options:n.options||"options",groupLabel:n.groupLabel||r}}function CS(e){var t=nt({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return kt(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}const SS=I.createContext(null);function ES(e){var t=e.visible,n=e.values;if(!t)return null;return I.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(n.slice(0,50).map((function(e){var t=e.label,n=e.value;return["number","string"].includes(J(t))?t:n})).join(", ")),n.length>50?", ...":null)}var NS=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],IS=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],$S=function(e){return"tags"===e||"multiple"===e},TS=I.forwardRef((function(e,t){var n,r=e.id,o=e.prefixCls,a=e.className,i=e.showSearch,s=e.tagRender,l=e.direction,u=e.omitDomProps,c=e.displayValues,d=e.onDisplayValuesChange,h=e.emptyOptions,p=e.notFoundContent,f=void 0===p?"Not Found":p,m=e.onClear,g=e.mode,v=e.disabled,b=e.loading,y=e.getInputElement,w=e.getRawInputElement,x=e.open,k=e.defaultOpen,C=e.onDropdownVisibleChange,S=e.activeValue,E=e.onActiveValueChange,N=e.activeDescendantId,$=e.searchValue,T=e.autoClearSearchValue,A=e.onSearch,O=e.onSearchSplit,R=e.tokenSeparators,D=e.allowClear,_=e.suffixIcon,M=e.clearIcon,z=e.OptionList,L=e.animation,B=e.transitionName,j=e.dropdownStyle,H=e.dropdownClassName,V=e.dropdownMatchSelectWidth,W=e.dropdownRender,U=e.dropdownAlign,K=e.placement,q=e.builtinPlacements,Y=e.getPopupContainer,ee=e.showAction,te=void 0===ee?[]:ee,ne=e.onFocus,re=e.onBlur,oe=e.onKeyUp,ae=e.onKeyDown,ie=e.onMouseDown,se=Z(e,NS),le=$S(g),ue=(void 0!==i?i:le)||"combobox"===g,ce=nt({},se);IS.forEach((function(e){delete ce[e]})),null===u||void 0===u||u.forEach((function(e){delete ce[e]}));var de=X(I.useState(!1),2),he=de[0],pe=de[1];I.useEffect((function(){pe(Vf())}),[]);var fe=I.useRef(null),me=I.useRef(null),ge=I.useRef(null),ve=I.useRef(null),be=I.useRef(null),ye=I.useRef(!1),we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=X(I.useState(!1),2),n=t[0],r=t[1],o=I.useRef(null),a=function(){window.clearTimeout(o.current)};return I.useEffect((function(){return a}),[]),[n,function(t,n){a(),o.current=window.setTimeout((function(){r(t),n&&n()}),e)},a]}(),xe=X(we,3),ke=xe[0],Ce=xe[1],Se=xe[2];I.useImperativeHandle(t,(function(){var e,t;return{focus:null===(e=ve.current)||void 0===e?void 0:e.focus,blur:null===(t=ve.current)||void 0===t?void 0:t.blur,scrollTo:function(e){var t;return null===(t=be.current)||void 0===t?void 0:t.scrollTo(e)},nativeElement:fe.current||me.current}}));var Ee=I.useMemo((function(){var e;if("combobox"!==g)return $;var t=null===(e=c[0])||void 0===e?void 0:e.value;return"string"===typeof t||"number"===typeof t?String(t):""}),[$,g,c]),Ne="combobox"===g&&"function"===typeof y&&y()||null,Ie="function"===typeof w&&w(),$e=co(me,null===Ie||void 0===Ie||null===(n=Ie.props)||void 0===n?void 0:n.ref),Te=X(I.useState(!1),2),Ae=Te[0],Oe=Te[1];In((function(){Oe(!0)}),[]);var Re=X(so(!1,{defaultValue:k,value:x}),2),Pe=Re[0],De=Re[1],Fe=!!Ae&&Pe,_e=!f&&h;(v||_e&&Fe&&"combobox"===g)&&(Fe=!1);var Me=!_e&&Fe,ze=I.useCallback((function(e){var t=void 0!==e?e:!Fe;v||(De(t),Fe!==t&&(null===C||void 0===C||C(t)))}),[v,Fe,De,C]),Le=I.useMemo((function(){return(R||[]).some((function(e){return["\n","\r\n"].includes(e)}))}),[R]),Be=I.useContext(SS)||{},je=Be.maxCount,He=Be.rawValues,Ve=function(e,t,n){if(!(le&&xS(je)&&(null===He||void 0===He?void 0:He.size)>=je)){var r=!0,o=e;null===E||void 0===E||E(null);var a=function(e,t,n){if(!t||!t.length)return null;var r=!1,o=function e(t,n){var o=fo(n),a=o[0],i=o.slice(1);if(!a)return[t];var s=t.split(a);return r=r||s.length>1,s.reduce((function(t,n){return[].concat(P(t),P(e(n,i)))}),[]).filter(Boolean)}(e,t);return r?"undefined"!==typeof n?o.slice(0,n):o:null}(e,R,xS(je)?je-He.size:void 0),i=n?null:a;return"combobox"!==g&&i&&(o="",null===O||void 0===O||O(i),ze(!1),r=!1),A&&Ee!==o&&A(o,{source:t?"typing":"effect"}),r}};I.useEffect((function(){Fe||le||"combobox"===g||Ve("",!1,!1)}),[Fe]),I.useEffect((function(){Pe&&v&&De(!1),v&&!ye.current&&Ce(!1)}),[v]);var We=X(oS(),2),Ge=We[0],Ue=We[1],Ke=I.useRef(!1),qe=I.useRef(!1),Xe=[];I.useEffect((function(){return function(){Xe.forEach((function(e){return clearTimeout(e)})),Xe.splice(0,Xe.length)}}),[]);var Je,Ye=X(I.useState({}),2)[1];Ie&&(Je=function(e){ze(e)}),function(e,t,n,r){var o=I.useRef(null);o.current={open:t,triggerOpen:n,customizedTrigger:r},I.useEffect((function(){function t(t){var n;if(null===(n=o.current)||void 0===n||!n.customizedTrigger){var r=t.target;r.shadowRoot&&t.composed&&(r=t.composedPath()[0]||r),o.current.open&&e().filter((function(e){return e})).every((function(e){return!e.contains(r)&&e!==r}))&&o.current.triggerOpen(!1)}}return window.addEventListener("mousedown",t),function(){return window.removeEventListener("mousedown",t)}}),[])}((function(){var e;return[fe.current,null===(e=ge.current)||void 0===e?void 0:e.getPopupElement()]}),Me,ze,!!Ie);var Qe,Ze=I.useMemo((function(){return nt(nt({},e),{},{notFoundContent:f,open:Fe,triggerOpen:Me,id:r,showSearch:ue,multiple:le,toggleOpen:ze})}),[e,f,Me,Fe,r,ue,le,ze]),et=!!_||b;et&&(Qe=I.createElement(nS,{className:F()("".concat(o,"-arrow"),Q({},"".concat(o,"-arrow-loading"),b)),customizeIcon:_,customizeIconProps:{loading:b,searchValue:Ee,open:Fe,focused:ke,showSearch:ue}}));var tt,rt=function(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,l=I.useMemo((function(){return"object"===J(r)?r.clearIcon:o||void 0}),[r,o]);return{allowClear:I.useMemo((function(){return!(a||!r||!n.length&&!i||"combobox"===s&&""===i)}),[r,a,n.length,i,s]),clearIcon:I.createElement(nS,{className:"".concat(e,"-clear"),onMouseDown:t,customizeIcon:l},"\xd7")}}(o,(function(){var e;null===m||void 0===m||m(),null===(e=ve.current)||void 0===e||e.focus(),d([],{type:"clear",values:c}),Ve("",!1,!1)}),c,D,M,v,Ee,g),ot=rt.allowClear,at=rt.clearIcon,it=I.createElement(z,{ref:be}),st=F()(o,a,Q(Q(Q(Q(Q(Q(Q(Q(Q(Q({},"".concat(o,"-focused"),ke),"".concat(o,"-multiple"),le),"".concat(o,"-single"),!le),"".concat(o,"-allow-clear"),D),"".concat(o,"-show-arrow"),et),"".concat(o,"-disabled"),v),"".concat(o,"-loading"),b),"".concat(o,"-open"),Fe),"".concat(o,"-customize-input"),Ne),"".concat(o,"-show-search"),ue)),lt=I.createElement(yS,{ref:ge,disabled:v,prefixCls:o,visible:Me,popupElement:it,animation:L,transitionName:B,dropdownStyle:j,dropdownClassName:H,direction:l,dropdownMatchSelectWidth:V,dropdownRender:W,dropdownAlign:U,placement:K,builtinPlacements:q,getPopupContainer:Y,empty:h,getTriggerDOMNode:function(e){return me.current||e},onPopupVisibleChange:Je,onPopupMouseEnter:function(){Ye({})}},Ie?I.cloneElement(Ie,{ref:$e}):I.createElement(gS,G({},e,{domRef:me,prefixCls:o,inputElement:Ne,ref:ve,id:r,showSearch:ue,autoClearSearchValue:T,mode:g,activeDescendantId:N,tagRender:s,values:c,open:Fe,onToggleOpen:ze,activeValue:S,searchValue:Ee,onSearch:Ve,onSearchSubmit:function(e){e&&e.trim()&&A(e,{source:"submit"})},onRemove:function(e){var t=c.filter((function(t){return t!==e}));d(t,{type:"remove",values:[e]})},tokenWithEnter:Le})));return tt=Ie?lt:I.createElement("div",G({className:st},ce,{ref:fe,onMouseDown:function(e){var t,n=e.target,r=null===(t=ge.current)||void 0===t?void 0:t.getPopupElement();if(r&&r.contains(n)){var o=setTimeout((function(){var e,t=Xe.indexOf(o);-1!==t&&Xe.splice(t,1),Se(),he||r.contains(document.activeElement)||null===(e=ve.current)||void 0===e||e.focus()}));Xe.push(o)}for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];null===ie||void 0===ie||ie.apply(void 0,[e].concat(i))},onKeyDown:function(e){var t,n=Ge(),r=e.key,o="Enter"===r;if(o&&("combobox"!==g&&e.preventDefault(),Fe||ze(!0)),Ue(!!Ee),"Backspace"===r&&!n&&le&&!Ee&&c.length){for(var a=P(c),i=null,s=a.length-1;s>=0;s-=1){var l=a[s];if(!l.disabled){a.splice(s,1),i=l;break}}i&&d(a,{type:"remove",values:[i]})}for(var u=arguments.length,h=new Array(u>1?u-1:0),p=1;p<u;p++)h[p-1]=arguments[p];!Fe||o&&Ke.current||null===(t=be.current)||void 0===t||t.onKeyDown.apply(t,[e].concat(h)),o&&(Ke.current=!0),null===ae||void 0===ae||ae.apply(void 0,[e].concat(h))},onKeyUp:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o;Fe&&(null===(o=be.current)||void 0===o||o.onKeyUp.apply(o,[e].concat(n))),"Enter"===e.key&&(Ke.current=!1),null===oe||void 0===oe||oe.apply(void 0,[e].concat(n))},onFocus:function(){Ce(!0),v||(ne&&!qe.current&&ne.apply(void 0,arguments),te.includes("focus")&&ze(!0)),qe.current=!0},onBlur:function(){ye.current=!0,Ce(!1,(function(){qe.current=!1,ye.current=!1,ze(!1)})),v||(Ee&&("tags"===g?A(Ee,{source:"submit"}):"multiple"===g&&A("",{source:"blur"})),re&&re.apply(void 0,arguments))}}),I.createElement(ES,{visible:ke&&!Fe,values:c}),lt,Qe,ot&&at),I.createElement(rS.Provider,{value:Ze},tt)}));const AS=TS;var OS=function(){return null};OS.isSelectOptGroup=!0;const RS=OS;var PS=function(){return null};PS.isSelectOption=!0;const DS=PS;var FS=["disabled","title","children","style","className"];function _S(e){return"string"===typeof e||"number"===typeof e}var MS=function(e,t){var n=I.useContext(rS),r=n.prefixCls,o=n.id,a=n.open,i=n.multiple,s=n.mode,l=n.searchValue,u=n.toggleOpen,c=n.notFoundContent,d=n.onPopupScroll,h=I.useContext(SS),p=h.maxCount,f=h.flattenOptions,m=h.onActiveValue,g=h.defaultActiveFirstOption,v=h.onSelect,b=h.menuItemSelectedIcon,y=h.rawValues,w=h.fieldNames,x=h.virtual,k=h.direction,C=h.listHeight,S=h.listItemHeight,E=h.optionRender,N="".concat(r,"-item"),$=Ut((function(){return f}),[a,f],(function(e,t){return t[0]&&e[1]!==t[1]})),T=I.useRef(null),A=I.useMemo((function(){return i&&xS(p)&&(null===y||void 0===y?void 0:y.size)>=p}),[i,p,null===y||void 0===y?void 0:y.size]),O=function(e){e.preventDefault()},R=function(e){var t;null===(t=T.current)||void 0===t||t.scrollTo("number"===typeof e?{index:e}:e)},D=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=$.length,r=0;r<n;r+=1){var o=(e+r*t+n)%n,a=$[o]||{},i=a.group,s=a.data;if(!i&&(null===s||void 0===s||!s.disabled)&&!A)return o}return-1},M=X(I.useState((function(){return D(0)})),2),z=M[0],L=M[1],B=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];L(e);var n={source:t?"keyboard":"mouse"},r=$[e];r?m(r.value,e,n):m(null,-1,n)};(0,I.useEffect)((function(){B(!1!==g?D(0):-1)}),[$.length,l]);var j=I.useCallback((function(e){return y.has(e)&&"combobox"!==s}),[s,P(y).toString(),y.size]);(0,I.useEffect)((function(){var e,t=setTimeout((function(){if(!i&&a&&1===y.size){var e=Array.from(y)[0],t=$.findIndex((function(t){return t.data.value===e}));-1!==t&&(B(t),R(t))}}));a&&(null===(e=T.current)||void 0===e||e.scrollTo(void 0));return function(){return clearTimeout(t)}}),[a,l]);var H=function(e){void 0!==e&&v(e,{selected:!y.has(e)}),i||u(!1)};if(I.useImperativeHandle(t,(function(){return{onKeyDown:function(e){var t=e.which,n=e.ctrlKey;switch(t){case vp.N:case vp.P:case vp.UP:case vp.DOWN:var r=0;if(t===vp.UP?r=-1:t===vp.DOWN?r=1:/(mac\sos|macintosh)/i.test(navigator.appVersion)&&n&&(t===vp.N?r=1:t===vp.P&&(r=-1)),0!==r){var o=D(z+r,r);R(o),B(o,!0)}break;case vp.ENTER:var i,s=$[z];!s||null!==s&&void 0!==s&&null!==(i=s.data)&&void 0!==i&&i.disabled||A?H(void 0):H(s.value),a&&e.preventDefault();break;case vp.ESC:u(!1),a&&e.stopPropagation()}},onKeyUp:function(){},scrollTo:function(e){R(e)}}})),0===$.length)return I.createElement("div",{role:"listbox",id:"".concat(o,"_list"),className:"".concat(N,"-empty"),onMouseDown:O},c);var V=Object.keys(w).map((function(e){return w[e]})),W=function(e){return e.label};function U(e,t){return{role:e.group?"presentation":"option",id:"".concat(o,"_list_").concat(t)}}var K=function(e){var t=$[e];if(!t)return null;var n=t.data||{},r=n.value,o=t.group,a=wl(n,!0),i=W(t);return t?I.createElement("div",G({"aria-label":"string"!==typeof i||o?null:i},a,{key:e},U(t,e),{"aria-selected":j(r)}),r):null},q={role:"listbox",id:"".concat(o,"_list")};return I.createElement(I.Fragment,null,x&&I.createElement("div",G({},q,{style:{height:0,width:0,overflow:"hidden"}}),K(z-1),K(z),K(z+1)),I.createElement(zb,{itemKey:"key",ref:T,data:$,height:C,itemHeight:S,fullHeight:!1,onMouseDown:O,onScroll:d,virtual:x,direction:k,innerProps:x?null:q},(function(e,t){var n=e.group,r=e.groupOption,o=e.data,a=e.label,i=e.value,s=o.key;if(n){var l,u=null!==(l=o.title)&&void 0!==l?l:_S(a)?a.toString():void 0;return I.createElement("div",{className:F()(N,"".concat(N,"-group"),o.className),title:u},void 0!==a?a:s)}var c=o.disabled,d=o.title,h=(o.children,o.style),p=o.className,f=_(Z(o,FS),V),m=j(i),g=c||!m&&A,v="".concat(N,"-option"),y=F()(N,v,p,Q(Q(Q(Q({},"".concat(v,"-grouped"),r),"".concat(v,"-active"),z===t&&!g),"".concat(v,"-disabled"),g),"".concat(v,"-selected"),m)),w=W(e),k=!b||"function"===typeof b||m,C="number"===typeof w?w:w||i,S=_S(C)?C.toString():void 0;return void 0!==d&&(S=d),I.createElement("div",G({},wl(f),x?{}:U(e,t),{"aria-selected":m,className:y,title:S,onMouseMove:function(){z===t||g||B(t)},onClick:function(){g||H(i)},style:h}),I.createElement("div",{className:"".concat(v,"-content")},"function"===typeof E?E(e,{index:t}):C),I.isValidElement(b)||m,k&&I.createElement(nS,{className:"".concat(N,"-option-state"),customizeIcon:b,customizeIconProps:{value:i,disabled:g,isSelected:m}},m?"\u2713":null))})))};const zS=I.forwardRef(MS);function LS(e,t){return sS(e).join("").toUpperCase().includes(t)}var BS=0,jS=rt();function HS(e){var t=X(I.useState(),2),n=t[0],r=t[1];return I.useEffect((function(){r("rc_select_".concat(function(){var e;return jS?(e=BS,BS+=1):e="TEST_OR_SSR",e}()))}),[]),e||n}var VS=["children","value"],WS=["children"];function GS(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return W(e).map((function(e,n){if(!I.isValidElement(e)||!e.type)return null;var r=e,o=r.type.isSelectOptGroup,a=r.key,i=r.props,s=i.children,l=Z(i,WS);return t||!o?function(e){var t=e,n=t.key,r=t.props,o=r.children,a=r.value;return nt({key:n,value:void 0!==a?a:n,children:o},Z(r,VS))}(e):nt(nt({key:"__RC_SELECT_GRP__".concat(null===a?n:a,"__"),label:a},l),{},{options:GS(s)})})).filter((function(e){return e}))}const US=function(e,t,n,r,o){return I.useMemo((function(){var a=e;!e&&(a=GS(t));var i=new Map,s=new Map,l=function(e,t,n){n&&"string"===typeof n&&e.set(t[n],t)};return function e(t){for(var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=0;u<t.length;u+=1){var c=t[u];!c[n.options]||a?(i.set(c[n.value],c),l(s,c,n.label),l(s,c,r),l(s,c,o)):e(c[n.options],!0)}}(a),{options:a,valueOptions:i,labelOptions:s}}),[e,t,n,r,o])};function KS(e){var t=I.useRef();t.current=e;var n=I.useCallback((function(){return t.current.apply(t,arguments)}),[]);return n}var qS=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],XS=["inputValue"];var JS=I.forwardRef((function(e,t){var n=e.id,r=e.mode,o=e.prefixCls,a=void 0===o?"rc-select":o,i=e.backfill,s=e.fieldNames,l=e.inputValue,u=e.searchValue,c=e.onSearch,d=e.autoClearSearchValue,h=void 0===d||d,p=e.onSelect,f=e.onDeselect,m=e.dropdownMatchSelectWidth,g=void 0===m||m,v=e.filterOption,b=e.filterSort,y=e.optionFilterProp,w=e.optionLabelProp,x=e.options,k=e.optionRender,C=e.children,S=e.defaultActiveFirstOption,E=e.menuItemSelectedIcon,N=e.virtual,$=e.direction,T=e.listHeight,A=void 0===T?200:T,O=e.listItemHeight,R=void 0===O?20:O,D=e.labelRender,F=e.value,_=e.defaultValue,M=e.labelInValue,z=e.onChange,L=e.maxCount,B=Z(e,qS),j=HS(n),H=$S(r),V=!(x||!C),W=I.useMemo((function(){return(void 0!==v||"combobox"!==r)&&v}),[v,r]),U=I.useMemo((function(){return kS(s,V)}),[JSON.stringify(s),V]),K=so("",{value:void 0!==u?u:l,postState:function(e){return e||""}}),q=X(K,2),Y=q[0],ee=q[1],te=US(x,C,U,y,w),ne=te.valueOptions,re=te.labelOptions,oe=te.options,ae=I.useCallback((function(e){return sS(e).map((function(e){var t,n,r,o,a,i;(function(e){return!e||"object"!==J(e)})(e)?t=e:(r=e.key,n=e.label,t=null!==(i=e.value)&&void 0!==i?i:r);var s,l=ne.get(t);l&&(void 0===n&&(n=null===l||void 0===l?void 0:l[w||U.label]),void 0===r&&(r=null!==(s=null===l||void 0===l?void 0:l.key)&&void 0!==s?s:t),o=null===l||void 0===l?void 0:l.disabled,a=null===l||void 0===l?void 0:l.title);return{label:n,value:t,key:r,disabled:o,title:a}}))}),[U,w,ne]),ie=X(so(_,{value:F}),2),se=ie[0],le=ie[1],ue=I.useMemo((function(){var e,t=ae(H&&null===se?[]:se);return"combobox"===r&&function(e){return!e&&0!==e}(null===(e=t[0])||void 0===e?void 0:e.value)?[]:t}),[se,ae,r,H]),ce=function(e,t){var n=I.useRef({values:new Map,options:new Map});return[I.useMemo((function(){var r=n.current,o=r.values,a=r.options,i=e.map((function(e){var t;return void 0===e.label?nt(nt({},e),{},{label:null===(t=o.get(e.value))||void 0===t?void 0:t.label}):e})),s=new Map,l=new Map;return i.forEach((function(e){s.set(e.value,e),l.set(e.value,t.get(e.value)||a.get(e.value))})),n.current.values=s,n.current.options=l,i}),[e,t]),I.useCallback((function(e){return t.get(e)||n.current.options.get(e)}),[t])]}(ue,ne),de=X(ce,2),he=de[0],pe=de[1],fe=I.useMemo((function(){if(!r&&1===he.length){var e=he[0];if(null===e.value&&(null===e.label||void 0===e.label))return[]}return he.map((function(e){var t;return nt(nt({},e),{},{label:null!==(t="function"===typeof D?D(e):e.label)&&void 0!==t?t:e.value})}))}),[r,he,D]),me=I.useMemo((function(){return new Set(he.map((function(e){return e.value})))}),[he]);I.useEffect((function(){if("combobox"===r){var e,t=null===(e=he[0])||void 0===e?void 0:e.value;ee(function(e){return void 0!==e&&null!==e}(t)?String(t):"")}}),[he]);var ge=KS((function(e,t){var n=null!==t&&void 0!==t?t:e;return Q(Q({},U.value,e),U.label,n)})),ve=I.useMemo((function(){if("tags"!==r)return oe;var e=P(oe);return P(he).sort((function(e,t){return e.value<t.value?-1:1})).forEach((function(t){var n=t.value;(function(e){return ne.has(e)})(n)||e.push(ge(n,t.label))})),e}),[ge,oe,ne,he,r]),be=function(e,t,n,r,o){return I.useMemo((function(){if(!n||!1===r)return e;var a=t.options,i=t.label,s=t.value,l=[],u="function"===typeof r,c=n.toUpperCase(),d=u?r:function(e,t){return o?LS(t[o],c):t[a]?LS(t["children"!==i?i:"label"],c):LS(t[s],c)},h=u?function(e){return CS(e)}:function(e){return e};return e.forEach((function(e){if(e[a])if(d(n,h(e)))l.push(e);else{var t=e[a].filter((function(e){return d(n,h(e))}));t.length&&l.push(nt(nt({},e),{},Q({},a,t)))}else d(n,h(e))&&l.push(e)})),l}),[e,r,o,n,t])}(ve,U,Y,W,y),ye=I.useMemo((function(){return"tags"!==r||!Y||be.some((function(e){return e[y||"value"]===Y}))||be.some((function(e){return e[U.value]===Y}))?be:[ge(Y)].concat(P(be))}),[ge,y,r,be,Y,U]),we=function e(t){var n=P(t).sort((function(e,t){return b(e,t,{searchValue:Y})}));return n.map((function(t){return Array.isArray(t.options)?nt(nt({},t),{},{options:t.options.length>0?e(t.options):t.options}):t}))},xe=I.useMemo((function(){return b?we(ye):ye}),[ye,b,Y]),ke=I.useMemo((function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fieldNames,r=t.childrenAsData,o=[],a=kS(n,!1),i=a.label,s=a.value,l=a.options,u=a.groupLabel;return function e(t,n){Array.isArray(t)&&t.forEach((function(t){if(n||!(l in t)){var a=t[s];o.push({key:wS(t,o.length),groupOption:n,data:t,label:t[i],value:a})}else{var c=t[u];void 0===c&&r&&(c=t.label),o.push({key:wS(t,o.length),group:!0,data:t,label:c}),e(t[l],!0)}}))}(e,!1),o}(xe,{fieldNames:U,childrenAsData:V})}),[xe,U,V]),Ce=function(e){var t=ae(e);if(le(t),z&&(t.length!==he.length||t.some((function(e,t){var n;return(null===(n=he[t])||void 0===n?void 0:n.value)!==(null===e||void 0===e?void 0:e.value)})))){var n=M?t:t.map((function(e){return e.value})),r=t.map((function(e){return CS(pe(e.value))}));z(H?n:n[0],H?r:r[0])}},Se=X(I.useState(null),2),Ee=Se[0],Ne=Se[1],Ie=X(I.useState(0),2),$e=Ie[0],Te=Ie[1],Ae=void 0!==S?S:"combobox"!==r,Oe=I.useCallback((function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).source,o=void 0===n?"keyboard":n;Te(t),i&&"combobox"===r&&null!==e&&"keyboard"===o&&Ne(String(e))}),[i,r]),Re=function(e,t,n){var r=function(){var t,n=pe(e);return[M?{label:null===n||void 0===n?void 0:n[U.label],value:e,key:null!==(t=null===n||void 0===n?void 0:n.key)&&void 0!==t?t:e}:e,CS(n)]};if(t&&p){var o=X(r(),2),a=o[0],i=o[1];p(a,i)}else if(!t&&f&&"clear"!==n){var s=X(r(),2),l=s[0],u=s[1];f(l,u)}},Pe=KS((function(e,t){var n,o=!H||t.selected;n=o?H?[].concat(P(he),[e]):[e]:he.filter((function(t){return t.value!==e})),Ce(n),Re(e,o),"combobox"===r?Ne(""):$S&&!h||(ee(""),Ne(""))})),De=I.useMemo((function(){var e=!1!==N&&!1!==g;return nt(nt({},te),{},{flattenOptions:ke,onActiveValue:Oe,defaultActiveFirstOption:Ae,onSelect:Pe,menuItemSelectedIcon:E,rawValues:me,fieldNames:U,virtual:e,direction:$,listHeight:A,listItemHeight:R,childrenAsData:V,maxCount:L,optionRender:k})}),[L,te,ke,Oe,Ae,Pe,E,me,U,N,g,$,A,R,V,k]);return I.createElement(SS.Provider,{value:De},I.createElement(AS,G({},B,{id:j,prefixCls:a,ref:t,omitDomProps:XS,mode:r,displayValues:fe,onDisplayValuesChange:function(e,t){Ce(e);var n=t.type,r=t.values;"remove"!==n&&"clear"!==n||r.forEach((function(e){Re(e.value,!1,n)}))},direction:$,searchValue:Y,onSearch:function(e,t){if(ee(e),Ne(null),"submit"!==t.source)"blur"!==t.source&&("combobox"===r&&Ce(e),null===c||void 0===c||c(e));else{var n=(e||"").trim();if(n){var o=Array.from(new Set([].concat(P(me),[n])));Ce(o),Re(n,!0),ee("")}}},autoClearSearchValue:h,onSearchSplit:function(e){var t=e;"tags"!==r&&(t=e.map((function(e){var t=re.get(e);return null===t||void 0===t?void 0:t.value})).filter((function(e){return void 0!==e})));var n=Array.from(new Set([].concat(P(me),P(t))));Ce(n),n.forEach((function(e){Re(e,!0)}))},dropdownMatchSelectWidth:g,OptionList:zS,emptyOptions:!ke.length,activeValue:Ee,activeDescendantId:"".concat(j,"_list_").concat($e)})))}));var YS=JS;YS.Option=DS,YS.OptGroup=RS;const QS=YS;const ZS=function(e,t){return e||(e=>{const t={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:"scroll"===e?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},t),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},t),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},t),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},t),{points:["br","tr"],offset:[0,-4]})}})(t)},eE=e=>{const{optionHeight:t,optionFontSize:n,optionLineHeight:r,optionPadding:o}=e;return{position:"relative",display:"block",minHeight:t,padding:o,color:e.colorText,fontWeight:"normal",fontSize:n,lineHeight:r,boxSizing:"border-box"}},tE=e=>{const{antCls:t,componentCls:n}=e,r=`${n}-item`,o=`&${t}-slide-up-enter${t}-slide-up-enter-active`,a=`&${t}-slide-up-appear${t}-slide-up-appear-active`,i=`&${t}-slide-up-leave${t}-slide-up-leave-active`,s=`${n}-dropdown-placement-`;return[{[`${n}-dropdown`]:Object.assign(Object.assign({},_o(e)),{position:"absolute",top:-9999,zIndex:e.zIndexPopup,boxSizing:"border-box",padding:e.paddingXXS,overflow:"hidden",fontSize:e.fontSize,fontVariant:"initial",backgroundColor:e.colorBgElevated,borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,[`\n          ${o}${s}bottomLeft,\n          ${a}${s}bottomLeft\n        `]:{animationName:ok},[`\n          ${o}${s}topLeft,\n          ${a}${s}topLeft,\n          ${o}${s}topRight,\n          ${a}${s}topRight\n        `]:{animationName:ik},[`${i}${s}bottomLeft`]:{animationName:ak},[`\n          ${i}${s}topLeft,\n          ${i}${s}topRight\n        `]:{animationName:sk},"&-hidden":{display:"none"},[r]:Object.assign(Object.assign({},eE(e)),{cursor:"pointer",transition:`background ${e.motionDurationSlow} ease`,borderRadius:e.borderRadiusSM,"&-group":{color:e.colorTextDescription,fontSize:e.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},Fo),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${r}-option-disabled)`]:{backgroundColor:e.optionActiveBg},[`&-selected:not(${r}-option-disabled)`]:{color:e.optionSelectedColor,fontWeight:e.optionSelectedFontWeight,backgroundColor:e.optionSelectedBg,[`${r}-option-state`]:{color:e.colorPrimary},[`&:has(+ ${r}-option-selected:not(${r}-option-disabled))`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${r}-option-selected:not(${r}-option-disabled)`]:{borderStartStartRadius:0,borderStartEndRadius:0}}},"&-disabled":{[`&${r}-option-selected`]:{backgroundColor:e.colorBgContainerDisabled},color:e.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:e.calc(e.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},eE(e)),{color:e.colorTextDisabled})}),"&-rtl":{direction:"rtl"}})},pk(e,"slide-up"),pk(e,"slide-down"),Bk(e,"move-up"),Bk(e,"move-down")]},nE=e=>{const{componentCls:t,iconCls:n,borderRadiusSM:r,motionDurationSlow:o,paddingXS:a,multipleItemColorDisabled:i,multipleItemBorderColorDisabled:s,colorIcon:l,colorIconHover:u,INTERNAL_FIXED_ITEM_MARGIN:c}=e,d=`${t}-selection-overflow`;return{[d]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${t}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:c,borderRadius:r,cursor:"default",transition:`font-size ${o}, line-height ${o}, height ${o}`,marginInlineEnd:e.calc(c).mul(2).equal(),paddingInlineStart:a,paddingInlineEnd:e.calc(a).div(2).equal(),[`${t}-disabled&`]:{color:i,borderColor:s,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:e.calc(a).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),{display:"inline-flex",alignItems:"center",color:l,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${n}`]:{verticalAlign:"-0.2em"},"&:hover":{color:u}})}}}},rE=(e,t)=>{const{componentCls:n,INTERNAL_FIXED_ITEM_MARGIN:r}=e,o=`${n}-selection-overflow`,a=e.multipleSelectItemHeight,i=(e=>{const{multipleSelectItemHeight:t,selectHeight:n,lineWidth:r}=e;return e.calc(n).sub(t).div(2).sub(r).equal()})(e),s=t?`${n}-${t}`:"",l=(e=>{const{multipleSelectItemHeight:t,paddingXXS:n,lineWidth:r,INTERNAL_FIXED_ITEM_MARGIN:o}=e,a=e.max(e.calc(n).sub(r).equal(),0);return{basePadding:a,containerPadding:e.max(e.calc(a).sub(o).equal(),0),itemHeight:yn(t),itemLineHeight:yn(e.calc(t).sub(e.calc(e.lineWidth).mul(2)).equal())}})(e);return{[`${n}-multiple${s}`]:Object.assign(Object.assign({},nE(e)),{[`${n}-selector`]:{display:"flex",flexWrap:"wrap",alignItems:"center",height:"100%",paddingInline:l.basePadding,paddingBlock:l.containerPadding,borderRadius:e.borderRadius,[`${n}-disabled&`]:{background:e.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${yn(r)} 0`,lineHeight:yn(a),visibility:"hidden",content:'"\\a0"'}},[`${n}-selection-item`]:{height:l.itemHeight,lineHeight:yn(l.itemLineHeight)},[`${o}-item + ${o}-item`]:{[`${n}-selection-search`]:{marginInlineStart:0}},[`${o}-item-suffix`]:{height:"100%"},[`${n}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:e.calc(e.inputPaddingHorizontalBase).sub(i).equal(),"\n          &-input,\n          &-mirror\n        ":{height:a,fontFamily:e.fontFamily,lineHeight:yn(a),transition:`all ${e.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${n}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:e.inputPaddingHorizontalBase,insetInlineEnd:e.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${e.motionDurationSlow}`}})}};function oE(e,t){const{componentCls:n}=e,r=t?`${n}-${t}`:"",o={[`${n}-multiple${r}`]:{fontSize:e.fontSize,[`${n}-selector`]:{[`${n}-show-search&`]:{cursor:"text"}},[`\n        &${n}-show-arrow ${n}-selector,\n        &${n}-allow-clear ${n}-selector\n      `]:{paddingInlineEnd:e.calc(e.fontSizeIcon).add(e.controlPaddingHorizontal).equal()}}};return[rE(e,t),o]}const aE=e=>{const{componentCls:t}=e,n=So(e,{selectHeight:e.controlHeightSM,multipleSelectItemHeight:e.multipleItemHeightSM,borderRadius:e.borderRadiusSM,borderRadiusSM:e.borderRadiusXS}),r=So(e,{fontSize:e.fontSizeLG,selectHeight:e.controlHeightLG,multipleSelectItemHeight:e.multipleItemHeightLG,borderRadius:e.borderRadiusLG,borderRadiusSM:e.borderRadius});return[oE(e),oE(n,"sm"),{[`${t}-multiple${t}-sm`]:{[`${t}-selection-placeholder`]:{insetInline:e.calc(e.controlPaddingHorizontalSM).sub(e.lineWidth).equal()},[`${t}-selection-search`]:{marginInlineStart:2}}},oE(r,"lg")]};function iE(e,t){const{componentCls:n,inputPaddingHorizontalBase:r,borderRadius:o,fontSizeIcon:a}=e,i=e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),s=e.calc(r).add(a).equal(),l=t?`${n}-${t}`:"";return{[`${n}-single${l}`]:{fontSize:e.fontSize,height:e.controlHeight,[`${n}-selector`]:Object.assign(Object.assign({},_o(e,!0)),{display:"flex",borderRadius:o,[`${n}-selection-search`]:{position:"absolute",top:0,insetInlineStart:r,insetInlineEnd:yn(s),bottom:0,"&-input":{width:"100%",WebkitAppearance:"textfield"}},[`\n          ${n}-selection-item,\n          ${n}-selection-placeholder\n        `]:{padding:0,lineHeight:yn(i),transition:`all ${e.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${n}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${n}-selection-item:empty:after`,`${n}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`\n        &${n}-show-arrow ${n}-selection-item,\n        &${n}-show-arrow ${n}-selection-placeholder\n      `]:{paddingInlineEnd:e.showArrowPaddingInlineEnd},[`&${n}-open ${n}-selection-item`]:{color:e.colorTextPlaceholder},[`&:not(${n}-customize-input)`]:{[`${n}-selector`]:{width:"100%",height:"100%",padding:`0 ${yn(r)}`,[`${n}-selection-search-input`]:{height:i},"&:after":{lineHeight:yn(i)}}},[`&${n}-customize-input`]:{[`${n}-selector`]:{"&:after":{display:"none"},[`${n}-selection-search`]:{position:"static",width:"100%"},[`${n}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${yn(r)}`,"&:after":{display:"none"}}}}}}}function sE(e){const{componentCls:t}=e,n=e.calc(e.controlPaddingHorizontalSM).sub(e.lineWidth).equal();return[iE(e),iE(So(e,{controlHeight:e.controlHeightSM,borderRadius:e.borderRadiusSM}),"sm"),{[`${t}-single${t}-sm`]:{[`&:not(${t}-customize-input)`]:{[`${t}-selection-search`]:{insetInlineStart:n,insetInlineEnd:n},[`${t}-selector`]:{padding:`0 ${yn(n)}`},[`&${t}-show-arrow ${t}-selection-search`]:{insetInlineEnd:e.calc(n).add(e.calc(e.fontSize).mul(1.5)).equal()},[`\n            &${t}-show-arrow ${t}-selection-item,\n            &${t}-show-arrow ${t}-selection-placeholder\n          `]:{paddingInlineEnd:e.calc(e.fontSize).mul(1.5).equal()}}}},iE(So(e,{controlHeight:e.singleItemHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG}),"lg")]}const lE=(e,t)=>{const{componentCls:n,antCls:r,controlOutlineWidth:o}=e;return{[`&:not(${n}-customize-input) ${n}-selector`]:{border:`${yn(e.lineWidth)} ${e.lineType} ${t.borderColor}`,background:e.selectorBg},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{borderColor:t.hoverBorderHover},[`${n}-focused& ${n}-selector`]:{borderColor:t.activeBorderColor,boxShadow:`0 0 0 ${yn(o)} ${t.activeOutlineColor}`,outline:0}}}},uE=(e,t)=>({[`&${e.componentCls}-status-${t.status}`]:Object.assign({},lE(e,t))}),cE=e=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},lE(e,{borderColor:e.colorBorder,hoverBorderHover:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeOutlineColor:e.activeOutlineColor})),uE(e,{status:"error",borderColor:e.colorError,hoverBorderHover:e.colorErrorHover,activeBorderColor:e.colorError,activeOutlineColor:e.colorErrorOutline})),uE(e,{status:"warning",borderColor:e.colorWarning,hoverBorderHover:e.colorWarningHover,activeBorderColor:e.colorWarning,activeOutlineColor:e.colorWarningOutline})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{background:e.colorBgContainerDisabled,color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${yn(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`}})}),dE=(e,t)=>{const{componentCls:n,antCls:r}=e;return{[`&:not(${n}-customize-input) ${n}-selector`]:{background:t.bg,border:`${yn(e.lineWidth)} ${e.lineType} transparent`,color:t.color},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{background:t.hoverBg},[`${n}-focused& ${n}-selector`]:{background:e.selectorBg,borderColor:t.activeBorderColor,outline:0}}}},hE=(e,t)=>({[`&${e.componentCls}-status-${t.status}`]:Object.assign({},dE(e,t))}),pE=e=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},dE(e,{bg:e.colorFillTertiary,hoverBg:e.colorFillSecondary,activeBorderColor:e.activeBorderColor,color:e.colorText})),hE(e,{status:"error",bg:e.colorErrorBg,hoverBg:e.colorErrorBgHover,activeBorderColor:e.colorError,color:e.colorError})),hE(e,{status:"warning",bg:e.colorWarningBg,hoverBg:e.colorWarningBgHover,activeBorderColor:e.colorWarning,color:e.colorWarning})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{borderColor:e.colorBorder,background:e.colorBgContainerDisabled,color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.colorBgContainer,border:`${yn(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}})}),fE=e=>({"&-borderless":{[`${e.componentCls}-selector`]:{background:"transparent",borderColor:"transparent"},[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${yn(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`},[`&${e.componentCls}-status-error`]:{[`${e.componentCls}-selection-item`]:{color:e.colorError}},[`&${e.componentCls}-status-warning`]:{[`${e.componentCls}-selection-item`]:{color:e.colorWarning}}}}),mE=e=>({[e.componentCls]:Object.assign(Object.assign(Object.assign({},cE(e)),pE(e)),fE(e))}),gE=e=>{const{componentCls:t}=e;return{position:"relative",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,input:{cursor:"pointer"},[`${t}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${t}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},vE=e=>{const{componentCls:t}=e;return{[`${t}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},bE=e=>{const{antCls:t,componentCls:n,inputPaddingHorizontalBase:r,iconCls:o}=e;return{[n]:Object.assign(Object.assign({},_o(e)),{position:"relative",display:"inline-block",cursor:"pointer",[`&:not(${n}-customize-input) ${n}-selector`]:Object.assign(Object.assign({},gE(e)),vE(e)),[`${n}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},Fo),{[`> ${t}-typography`]:{display:"inline"}}),[`${n}-selection-placeholder`]:Object.assign(Object.assign({},Fo),{flex:1,color:e.colorTextPlaceholder,pointerEvents:"none"}),[`${n}-arrow`]:Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,height:e.fontSizeIcon,marginTop:e.calc(e.fontSizeIcon).mul(-1).div(2).equal(),color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${e.motionDurationSlow} ease`,[o]:{verticalAlign:"top",transition:`transform ${e.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${n}-suffix)`]:{pointerEvents:"auto"}},[`${n}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${n}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,zIndex:1,display:"inline-block",width:e.fontSizeIcon,height:e.fontSizeIcon,marginTop:e.calc(e.fontSizeIcon).mul(-1).div(2).equal(),color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${e.motionDurationMid} ease, opacity ${e.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:e.colorTextTertiary}},[`&:hover ${n}-clear`]:{opacity:1,background:e.colorBgBase,borderRadius:"50%"}}),[`${n}-has-feedback`]:{[`${n}-clear`]:{insetInlineEnd:e.calc(r).add(e.fontSize).add(e.paddingXS).equal()}}}},yE=e=>{const{componentCls:t}=e;return[{[t]:{[`&${t}-in-form-item`]:{width:"100%"}}},bE(e),sE(e),aE(e),tE(e),{[`${t}-rtl`]:{direction:"rtl"}},os(e,{borderElCls:`${t}-selector`,focusElCls:`${t}-focused`})]},wE=ha("Select",((e,t)=>{let{rootPrefixCls:n}=t;const r=So(e,{rootPrefixCls:n,inputPaddingHorizontalBase:e.calc(e.paddingSM).sub(1).equal(),multipleSelectItemHeight:e.multipleItemHeight,selectHeight:e.controlHeight});return[yE(r),mE(r)]}),(e=>{const{fontSize:t,lineHeight:n,lineWidth:r,controlHeight:o,controlHeightSM:a,controlHeightLG:i,paddingXXS:s,controlPaddingHorizontal:l,zIndexPopupBase:u,colorText:c,fontWeightStrong:d,controlItemBgActive:h,controlItemBgHover:p,colorBgContainer:f,colorFillSecondary:m,colorBgContainerDisabled:g,colorTextDisabled:v,colorPrimaryHover:b,colorPrimary:y,controlOutline:w}=e,x=2*s,k=2*r,C=Math.min(o-x,o-k),S=Math.min(a-x,a-k),E=Math.min(i-x,i-k);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(s/2),zIndexPopup:u+50,optionSelectedColor:c,optionSelectedFontWeight:d,optionSelectedBg:h,optionActiveBg:p,optionPadding:`${(o-t*n)/2}px ${l}px`,optionFontSize:t,optionLineHeight:n,optionHeight:o,selectorBg:f,clearBg:f,singleItemHeightLG:i,multipleItemBg:m,multipleItemBorderColor:"transparent",multipleItemHeight:C,multipleItemHeightSM:S,multipleItemHeightLG:E,multipleSelectorBgDisabled:g,multipleItemColorDisabled:v,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(1.25*e.fontSize),hoverBorderColor:b,activeBorderColor:y,activeOutlineColor:w}}),{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});var xE=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const kE="SECRET_COMBOBOX_MODE_DO_NOT_USE",CE=(e,t)=>{var n;const{prefixCls:r,bordered:o,className:a,rootClassName:i,getPopupContainer:s,popupClassName:l,dropdownClassName:u,listHeight:c=256,placement:d,listItemHeight:h,size:p,disabled:f,notFoundContent:m,status:g,builtinPlacements:v,dropdownMatchSelectWidth:b,popupMatchSelectWidth:y,direction:w,style:x,allowClear:k,variant:C,dropdownStyle:S,transitionName:E,tagRender:N,maxCount:$}=e,T=xE(e,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount"]),{getPopupContainer:A,getPrefixCls:O,renderEmpty:R,direction:P,virtual:D,popupMatchSelectWidth:M,popupOverflow:z,select:L}=I.useContext(B),[,j]=ca(),H=null!==h&&void 0!==h?h:null===j||void 0===j?void 0:j.controlHeight,V=O("select",r),W=O(),G=null!==w&&void 0!==w?w:P,{compactSize:U,compactItemClassnames:K}=Qs(V,G),[q,X]=pl("select",C,o),J=hl(V),[Y,Q,Z]=wE(V,J),ee=I.useMemo((()=>{const{mode:t}=e;if("combobox"!==t)return t===kE?"combobox":t}),[e.mode]),te="multiple"===ee||"tags"===ee,ne=function(e,t){return void 0!==t?t:null!==e}(e.suffixIcon,e.showArrow),re=null!==(n=null!==y&&void 0!==y?y:b)&&void 0!==n?n:M,{status:oe,hasFeedback:ae,isFormItemInput:ie,feedbackIcon:se}=I.useContext(Zi),le=ll(oe,g);let ue;ue=void 0!==m?m:"combobox"===ee?null:(null===R||void 0===R?void 0:R("Select"))||I.createElement(_C,{componentName:"Select"});const{suffixIcon:ce,itemIcon:de,removeIcon:he,clearIcon:pe}=function(e){let{suffixIcon:t,clearIcon:n,menuItemSelectedIcon:r,removeIcon:o,loading:a,multiple:i,hasFeedback:s,prefixCls:l,showSuffixIcon:u,feedbackIcon:c,showArrow:d,componentName:h}=e;const p=null!==n&&void 0!==n?n:I.createElement(al,null),f=e=>null!==t||s||d?I.createElement(I.Fragment,null,!1!==u&&e,s&&c):null;let m=null;if(void 0!==t)m=f(t);else if(a)m=f(I.createElement(Tc,{spin:!0}));else{const e=`${l}-suffix`;m=t=>{let{open:n,showSearch:r}=t;return f(n&&r?I.createElement(Jl,{className:e}):I.createElement(ty,{className:e}))}}let g=null;g=void 0!==r?r:i?I.createElement($g,null):null;let v=null;return v=void 0!==o?o:I.createElement(Wp,null),{clearIcon:p,suffixIcon:m,itemIcon:g,removeIcon:v}}(Object.assign(Object.assign({},T),{multiple:te,hasFeedback:ae,feedbackIcon:se,showSuffixIcon:ne,prefixCls:V,componentName:"Select"})),fe=!0===k?{clearIcon:pe}:k,me=_(T,["suffixIcon","itemIcon"]),ge=F()(l||u,{[`${V}-dropdown-${G}`]:"rtl"===G},i,Z,J,Q),ve=Gs((e=>{var t;return null!==(t=null!==p&&void 0!==p?p:U)&&void 0!==t?t:e})),be=I.useContext(dl),ye=null!==f&&void 0!==f?f:be,we=F()({[`${V}-lg`]:"large"===ve,[`${V}-sm`]:"small"===ve,[`${V}-rtl`]:"rtl"===G,[`${V}-${q}`]:X,[`${V}-in-form-item`]:ie},sl(V,le,ae),K,null===L||void 0===L?void 0:L.className,a,i,Z,J,Q),xe=I.useMemo((()=>void 0!==d?d:"rtl"===G?"bottomRight":"bottomLeft"),[d,G]);const[ke]=Fp("SelectLike",null===S||void 0===S?void 0:S.zIndex);return Y(I.createElement(QS,Object.assign({ref:t,virtual:D,showSearch:null===L||void 0===L?void 0:L.showSearch},me,{style:Object.assign(Object.assign({},null===L||void 0===L?void 0:L.style),x),dropdownMatchSelectWidth:re,transitionName:Em(W,"slide-up",E),builtinPlacements:ZS(v,z),listHeight:c,listItemHeight:H,mode:ee,prefixCls:V,placement:xe,direction:G,suffixIcon:ce,menuItemSelectedIcon:de,removeIcon:he,allowClear:fe,notFoundContent:ue,className:we,getPopupContainer:s||A,dropdownClassName:ge,disabled:ye,dropdownStyle:Object.assign(Object.assign({},S),{zIndex:ke}),maxCount:te?$:void 0,tagRender:te?N:void 0})))};const SE=I.forwardRef(CE),EE=rw(SE);SE.SECRET_COMBOBOX_MODE_DO_NOT_USE=kE,SE.Option=DS,SE.OptGroup=RS,SE._InternalPanelDoNotUseOrYouWillBeFired=EE;const NE=SE,IE=e=>I.createElement(NE,Object.assign({},e,{showSearch:!0,size:"small"})),$E=e=>I.createElement(NE,Object.assign({},e,{showSearch:!0,size:"middle"}));IE.Option=NE.Option,$E.Option=NE.Option;const TE=e=>{const{componentCls:t}=e;return{[`${t}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:e.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:e.colorBorder,backgroundColor:e.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:e.itemActiveBgDisabled},a:{color:e.itemActiveColorDisabled}}},[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${t}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${t}-simple-pager`]:{color:e.colorTextDisabled},[`${t}-jump-prev, ${t}-jump-next`]:{[`${t}-item-link-icon`]:{opacity:0},[`${t}-item-ellipsis`]:{opacity:1}}},[`&${t}-simple`]:{[`${t}-prev, ${t}-next`]:{[`&${t}-disabled ${t}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},AE=e=>{const{componentCls:t}=e;return{[`&${t}-mini ${t}-total-text, &${t}-mini ${t}-simple-pager`]:{height:e.itemSizeSM,lineHeight:yn(e.itemSizeSM)},[`&${t}-mini ${t}-item`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:yn(e.calc(e.itemSizeSM).sub(2).equal())},[`&${t}-mini:not(${t}-disabled) ${t}-item:not(${t}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent","&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},[`&${t}-mini ${t}-prev, &${t}-mini ${t}-next`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:yn(e.itemSizeSM)},[`&${t}-mini:not(${t}-disabled)`]:{[`${t}-prev, ${t}-next`]:{[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover ${t}-item-link`]:{backgroundColor:"transparent"}}},[`\n    &${t}-mini ${t}-prev ${t}-item-link,\n    &${t}-mini ${t}-next ${t}-item-link\n    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:e.itemSizeSM,lineHeight:yn(e.itemSizeSM)}},[`&${t}-mini ${t}-jump-prev, &${t}-mini ${t}-jump-next`]:{height:e.itemSizeSM,marginInlineEnd:0,lineHeight:yn(e.itemSizeSM)},[`&${t}-mini ${t}-options`]:{marginInlineStart:e.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:e.miniOptionsSizeChangerTop},"&-quick-jumper":{height:e.itemSizeSM,lineHeight:yn(e.itemSizeSM),input:Object.assign(Object.assign({},xs(e)),{width:e.paginationMiniQuickJumperInputWidth,height:e.controlHeightSM})}}}},OE=e=>{const{componentCls:t}=e;return{[`\n    &${t}-simple ${t}-prev,\n    &${t}-simple ${t}-next\n    `]:{height:e.itemSizeSM,lineHeight:yn(e.itemSizeSM),verticalAlign:"top",[`${t}-item-link`]:{height:e.itemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive},"&::after":{height:e.itemSizeSM,lineHeight:yn(e.itemSizeSM)}}},[`&${t}-simple ${t}-simple-pager`]:{display:"inline-block",height:e.itemSizeSM,marginInlineEnd:e.marginXS,input:{boxSizing:"border-box",height:"100%",padding:`0 ${yn(e.paginationItemPaddingInline)}`,textAlign:"center",backgroundColor:e.itemInputBg,border:`${yn(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,outline:"none",transition:`border-color ${e.motionDurationMid}`,color:"inherit","&:hover":{borderColor:e.colorPrimary},"&:focus":{borderColor:e.colorPrimaryHover,boxShadow:`${yn(e.inputOutlineOffset)} 0 ${yn(e.controlOutlineWidth)} ${e.controlOutline}`},"&[disabled]":{color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,cursor:"not-allowed"}}}}},RE=e=>{const{componentCls:t}=e;return{[`${t}-jump-prev, ${t}-jump-next`]:{outline:0,[`${t}-item-container`]:{position:"relative",[`${t}-item-link-icon`]:{color:e.colorPrimary,fontSize:e.fontSizeSM,opacity:0,transition:`all ${e.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${t}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:e.colorTextDisabled,letterSpacing:e.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:e.paginationEllipsisTextIndent,opacity:1,transition:`all ${e.motionDurationMid}`}},"&:hover":{[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0}}},[`\n    ${t}-prev,\n    ${t}-jump-prev,\n    ${t}-jump-next\n    `]:{marginInlineEnd:e.marginXS},[`\n    ${t}-prev,\n    ${t}-next,\n    ${t}-jump-prev,\n    ${t}-jump-next\n    `]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,color:e.colorText,fontFamily:e.fontFamily,lineHeight:yn(e.itemSize),textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:e.borderRadius,cursor:"pointer",transition:`all ${e.motionDurationMid}`},[`${t}-prev, ${t}-next`]:{outline:0,button:{color:e.colorText,cursor:"pointer",userSelect:"none"},[`${t}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:e.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${yn(e.lineWidth)} ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:"none",transition:`all ${e.motionDurationMid}`},[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover`]:{[`${t}-item-link`]:{backgroundColor:"transparent"}}},[`${t}-slash`]:{marginInlineEnd:e.paginationSlashMarginInlineEnd,marginInlineStart:e.paginationSlashMarginInlineStart},[`${t}-options`]:{display:"inline-block",marginInlineStart:e.margin,verticalAlign:"middle","&-size-changer":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:e.controlHeight,marginInlineStart:e.marginXS,lineHeight:yn(e.controlHeight),verticalAlign:"top",input:Object.assign(Object.assign(Object.assign({},ks(e)),us(e,{borderColor:e.colorBorder,hoverBorderColor:e.colorPrimaryHover,activeBorderColor:e.colorPrimary,activeShadow:e.activeShadow})),{"&[disabled]":Object.assign({},ls(e)),width:e.calc(e.controlHeightLG).mul(1.25).equal(),height:e.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:e.marginXS,marginInlineEnd:e.marginXS})}}}},PE=e=>{const{componentCls:t}=e;return{[`${t}-item`]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,marginInlineEnd:e.marginXS,fontFamily:e.fontFamily,lineHeight:yn(e.calc(e.itemSize).sub(2).equal()),textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:e.itemBg,border:`${yn(e.lineWidth)} ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${yn(e.paginationItemPaddingInline)}`,color:e.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${t}-item-active)`]:{"&:hover":{transition:`all ${e.motionDurationMid}`,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},"&-active":{fontWeight:e.fontWeightStrong,backgroundColor:e.itemActiveBg,borderColor:e.colorPrimary,a:{color:e.colorPrimary},"&:hover":{borderColor:e.colorPrimaryHover},"&:hover a":{color:e.colorPrimaryHover}}}}},DE=e=>{const{componentCls:t}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_o(e)),{display:"flex","&-start":{justifyContent:"start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"end"},"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${t}-total-text`]:{display:"inline-block",height:e.itemSize,marginInlineEnd:e.marginXS,lineHeight:yn(e.calc(e.itemSize).sub(2).equal()),verticalAlign:"middle"}}),PE(e)),RE(e)),OE(e)),AE(e)),TE(e)),{[`@media only screen and (max-width: ${e.screenLG}px)`]:{[`${t}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${e.screenSM}px)`]:{[`${t}-options`]:{display:"none"}}}),[`&${e.componentCls}-rtl`]:{direction:"rtl"}}},FE=e=>{const{componentCls:t}=e;return{[`${t}:not(${t}-disabled)`]:{[`${t}-item`]:Object.assign({},Lo(e)),[`${t}-jump-prev, ${t}-jump-next`]:{"&:focus-visible":Object.assign({[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0}},zo(e))},[`${t}-prev, ${t}-next`]:{[`&:focus-visible ${t}-item-link`]:Object.assign({},zo(e))}}}},_E=e=>Object.assign({itemBg:e.colorBgContainer,itemSize:e.controlHeight,itemSizeSM:e.controlHeightSM,itemActiveBg:e.colorBgContainer,itemLinkBg:e.colorBgContainer,itemActiveColorDisabled:e.colorTextDisabled,itemActiveBgDisabled:e.controlItemBgActiveDisabled,itemInputBg:e.colorBgContainer,miniOptionsSizeChangerTop:0},is(e)),ME=e=>So(e,{inputOutlineOffset:0,paginationMiniOptionsMarginInlineStart:e.calc(e.marginXXS).div(2).equal(),paginationMiniQuickJumperInputWidth:e.calc(e.controlHeightLG).mul(1.1).equal(),paginationItemPaddingInline:e.calc(e.marginXXS).mul(1.5).equal(),paginationEllipsisLetterSpacing:e.calc(e.marginXXS).div(2).equal(),paginationSlashMarginInlineStart:e.marginSM,paginationSlashMarginInlineEnd:e.marginSM,paginationEllipsisTextIndent:"0.13em"},as(e)),zE=ha("Pagination",(e=>{const t=ME(e);return[DE(t),FE(t)]}),_E),LE=e=>{const{componentCls:t}=e;return{[`${t}${t}-bordered${t}-disabled:not(${t}-mini)`]:{"&, &:hover":{[`${t}-item-link`]:{borderColor:e.colorBorder}},"&:focus-visible":{[`${t}-item-link`]:{borderColor:e.colorBorder}},[`${t}-item, ${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,[`&:hover:not(${t}-item-active)`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,a:{color:e.colorTextDisabled}},[`&${t}-item-active`]:{backgroundColor:e.itemActiveBgDisabled}},[`${t}-prev, ${t}-next`]:{"&:hover button":{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,color:e.colorTextDisabled},[`${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder}}},[`${t}${t}-bordered:not(${t}-mini)`]:{[`${t}-prev, ${t}-next`]:{"&:hover button":{borderColor:e.colorPrimaryHover,backgroundColor:e.itemBg},[`${t}-item-link`]:{backgroundColor:e.itemLinkBg,borderColor:e.colorBorder},[`&:hover ${t}-item-link`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,color:e.colorPrimary},[`&${t}-disabled`]:{[`${t}-item-link`]:{borderColor:e.colorBorder,color:e.colorTextDisabled}}},[`${t}-item`]:{backgroundColor:e.itemBg,border:`${yn(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,[`&:hover:not(${t}-item-active)`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,a:{color:e.colorPrimary}},"&-active":{borderColor:e.colorPrimary}}}}},BE=fa(["Pagination","bordered"],(e=>{const t=ME(e);return[LE(t)]}),_E);var jE=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const HE=e=>{const{align:t,prefixCls:n,selectPrefixCls:r,className:o,rootClassName:a,style:i,size:s,locale:l,selectComponentClass:u,responsive:c,showSizeChanger:d}=e,h=jE(e,["align","prefixCls","selectPrefixCls","className","rootClassName","style","size","locale","selectComponentClass","responsive","showSizeChanger"]),{xs:p}=BC(c),[,f]=ca(),{getPrefixCls:m,direction:g,pagination:v={}}=I.useContext(B),b=m("pagination",n),[y,w,x]=zE(b),k=null!==d&&void 0!==d?d:v.showSizeChanger,C=I.useMemo((()=>{const e=I.createElement("span",{className:`${b}-item-ellipsis`},"\u2022\u2022\u2022");return{prevIcon:I.createElement("button",{className:`${b}-item-link`,type:"button",tabIndex:-1},"rtl"===g?I.createElement(Vt,null):I.createElement(Bt,null)),nextIcon:I.createElement("button",{className:`${b}-item-link`,type:"button",tabIndex:-1},"rtl"===g?I.createElement(Bt,null):I.createElement(Vt,null)),jumpPrevIcon:I.createElement("a",{className:`${b}-item-link`},I.createElement("div",{className:`${b}-item-container`},"rtl"===g?I.createElement(UC,{className:`${b}-item-link-icon`}):I.createElement(VC,{className:`${b}-item-link-icon`}),e)),jumpNextIcon:I.createElement("a",{className:`${b}-item-link`},I.createElement("div",{className:`${b}-item-container`},"rtl"===g?I.createElement(VC,{className:`${b}-item-link-icon`}):I.createElement(UC,{className:`${b}-item-link-icon`}),e))}}),[g,b]),[S]=Ef("Pagination",Ah),E=Object.assign(Object.assign({},S),l),N=Gs(s),$="small"===N||!(!p||N||!c),T=m("select",r),A=F()({[`${b}-${t}`]:!!t,[`${b}-mini`]:$,[`${b}-rtl`]:"rtl"===g,[`${b}-bordered`]:f.wireframe},null===v||void 0===v?void 0:v.className,o,a,w,x),O=Object.assign(Object.assign({},null===v||void 0===v?void 0:v.style),i);return y(I.createElement(I.Fragment,null,f.wireframe&&I.createElement(BE,{prefixCls:b}),I.createElement(tS,Object.assign({},C,h,{style:O,prefixCls:b,selectPrefixCls:T,className:A,selectComponentClass:u||($?IE:$E),locale:E,showSizeChanger:k}))))},VE=HE;function WE(e,t,n){var r=(n||{}).atBegin;return function(e,t,n){var r,o=n||{},a=o.noTrailing,i=void 0!==a&&a,s=o.noLeading,l=void 0!==s&&s,u=o.debounceMode,c=void 0===u?void 0:u,d=!1,h=0;function p(){r&&clearTimeout(r)}function f(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=this,u=Date.now()-h;function f(){h=Date.now(),t.apply(s,o)}function m(){r=void 0}d||(l||!c||r||f(),p(),void 0===c&&u>e?l?(h=Date.now(),i||(r=setTimeout(c?m:f,e))):f():!0!==i&&(r=setTimeout(c?m:f,void 0===c?e-u:e)))}return f.cancel=function(e){var t=(e||{}).upcomingOnly,n=void 0!==t&&t;p(),d=!n},f}(e,t,{debounceMode:!1!==(void 0!==r&&r)})}const GE=80*Math.PI,UE=e=>{const{dotClassName:t,style:n,hasCircleCls:r}=e;return I.createElement("circle",{className:F()(`${t}-circle`,{[`${t}-circle-bg`]:r}),r:40,cx:50,cy:50,strokeWidth:20,style:n})},KE=e=>{let{percent:t,prefixCls:n}=e;const r=`${n}-dot`,o=`${r}-holder`,a=`${o}-hidden`,[i,s]=I.useState(!1);In((()=>{0!==t&&s(!0)}),[0!==t]);const l=Math.max(Math.min(t,100),0);if(!i)return null;const u={strokeDashoffset:""+GE/4,strokeDasharray:`${GE*l/100} ${GE*(100-l)/100}`};return I.createElement("span",{className:F()(o,`${r}-progress`,l<=0&&a)},I.createElement("svg",{viewBox:"0 0 100 100",role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":l},I.createElement(UE,{dotClassName:r,hasCircleCls:!0}),I.createElement(UE,{dotClassName:r,style:u})))};function qE(e){const{prefixCls:t,percent:n=0}=e,r=`${t}-dot`,o=`${r}-holder`,a=`${o}-hidden`;return I.createElement(I.Fragment,null,I.createElement("span",{className:F()(o,n>0&&a)},I.createElement("span",{className:F()(r,`${t}-dot-spin`)},[1,2,3,4].map((e=>I.createElement("i",{className:`${t}-dot-item`,key:e}))))),I.createElement(KE,{prefixCls:t,percent:n}))}function XE(e){const{prefixCls:t,indicator:n,percent:r}=e,o=`${t}-dot`;return n&&I.isValidElement(n)?Ql(n,{className:F()(n.props.className,o),percent:r}):I.createElement(qE,{prefixCls:t,percent:r})}const JE=new Hr("antSpinMove",{to:{opacity:1}}),YE=new Hr("antRotate",{to:{transform:"rotate(405deg)"}}),QE=e=>{const{componentCls:t,calc:n}=e;return{[t]:Object.assign(Object.assign({},_o(e)),{position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`,"&-spinning":{position:"relative",display:"inline-block",opacity:1},[`${t}-text`]:{fontSize:e.fontSize,paddingTop:n(n(e.dotSize).sub(e.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:e.colorBgMask,zIndex:e.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${e.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[t]:{[`${t}-dot-holder`]:{color:e.colorWhite},[`${t}-text`]:{color:e.colorTextLightSolid}}},"&-nested-loading":{position:"relative",[`> div > ${t}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,[`${t}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:n(e.dotSize).mul(-1).div(2).equal()},[`${t}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${e.colorBgContainer}`},[`&${t}-show-text ${t}-dot`]:{marginTop:n(e.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${t}-dot`]:{margin:n(e.dotSizeSM).mul(-1).div(2).equal()},[`${t}-text`]:{paddingTop:n(n(e.dotSizeSM).sub(e.fontSize)).div(2).add(2).equal()},[`&${t}-show-text ${t}-dot`]:{marginTop:n(e.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${t}-dot`]:{margin:n(e.dotSizeLG).mul(-1).div(2).equal()},[`${t}-text`]:{paddingTop:n(n(e.dotSizeLG).sub(e.fontSize)).div(2).add(2).equal()},[`&${t}-show-text ${t}-dot`]:{marginTop:n(e.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${t}-container`]:{position:"relative",transition:`opacity ${e.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${t}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:e.spinDotDefault},[`${t}-dot-holder`]:{width:"1em",height:"1em",fontSize:e.dotSize,display:"inline-block",transition:`transform ${e.motionDurationSlow} ease, opacity ${e.motionDurationSlow} ease`,transformOrigin:"50% 50%",lineHeight:1,color:e.colorPrimary,"&-hidden":{transform:"scale(0.3)",opacity:0}},[`${t}-dot-progress`]:{position:"absolute",top:"50%",transform:"translate(-50%, -50%)",insetInlineStart:"50%"},[`${t}-dot`]:{position:"relative",display:"inline-block",fontSize:e.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:n(e.dotSize).sub(n(e.marginXXS).div(2)).div(2).equal(),height:n(e.dotSize).sub(n(e.marginXXS).div(2)).div(2).equal(),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:JE,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:YE,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map((t=>`${t} ${e.motionDurationSlow} ease`)).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:e.colorFillSecondary}},[`&-sm ${t}-dot`]:{"&, &-holder":{fontSize:e.dotSizeSM}},[`&-sm ${t}-dot-holder`]:{i:{width:n(n(e.dotSizeSM).sub(n(e.marginXXS).div(2))).div(2).equal(),height:n(n(e.dotSizeSM).sub(n(e.marginXXS).div(2))).div(2).equal()}},[`&-lg ${t}-dot`]:{"&, &-holder":{fontSize:e.dotSizeLG}},[`&-lg ${t}-dot-holder`]:{i:{width:n(n(e.dotSizeLG).sub(e.marginXXS)).div(2).equal(),height:n(n(e.dotSizeLG).sub(e.marginXXS)).div(2).equal()}},[`&${t}-show-text ${t}-text`]:{display:"block"}})}},ZE=ha("Spin",(e=>{const t=So(e,{spinDotDefault:e.colorTextDescription});return[QE(t)]}),(e=>{const{controlHeightLG:t,controlHeight:n}=e;return{contentHeight:400,dotSize:t/2,dotSizeSM:.35*t,dotSizeLG:n}})),eN=[[30,.05],[70,.03],[96,.01]];var tN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};let nN;const rN=e=>{var t;const{prefixCls:n,spinning:r=!0,delay:o=0,className:a,rootClassName:i,size:s="default",tip:l,wrapperClassName:u,style:c,children:d,fullscreen:h=!1,indicator:p,percent:f}=e,m=tN(e,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen","indicator","percent"]),{getPrefixCls:g,direction:v,spin:b}=I.useContext(B),y=g("spin",n),[w,x,k]=ZE(y),[C,S]=I.useState((()=>r&&!function(e,t){return!!e&&!!t&&!isNaN(Number(t))}(r,o))),E=function(e,t){const[n,r]=I.useState(0),o=I.useRef(),a="auto"===t;return I.useEffect((()=>(a&&e&&(r(0),o.current=setInterval((()=>{r((e=>{const t=100-e;for(let n=0;n<eN.length;n+=1){const[r,o]=eN[n];if(e<=r)return e+t*o}return e}))}),200)),()=>{clearInterval(o.current)})),[a,e]),a?n:t}(C,f);I.useEffect((()=>{if(r){const e=WE(o,(()=>{S(!0)}));return e(),()=>{var t;null===(t=null===e||void 0===e?void 0:e.cancel)||void 0===t||t.call(e)}}S(!1)}),[o,r]);const N=I.useMemo((()=>"undefined"!==typeof d&&!h),[d,h]);const $=F()(y,null===b||void 0===b?void 0:b.className,{[`${y}-sm`]:"small"===s,[`${y}-lg`]:"large"===s,[`${y}-spinning`]:C,[`${y}-show-text`]:!!l,[`${y}-rtl`]:"rtl"===v},a,!h&&i,x,k),T=F()(`${y}-container`,{[`${y}-blur`]:C}),A=null!==(t=null!==p&&void 0!==p?p:null===b||void 0===b?void 0:b.indicator)&&void 0!==t?t:nN,O=Object.assign(Object.assign({},null===b||void 0===b?void 0:b.style),c),R=I.createElement("div",Object.assign({},m,{style:O,className:$,"aria-live":"polite","aria-busy":C}),I.createElement(XE,{prefixCls:y,indicator:A,percent:E}),l&&(N||h)?I.createElement("div",{className:`${y}-text`},l):null);return w(N?I.createElement("div",Object.assign({},m,{className:F()(`${y}-nested-loading`,u,x,k)}),C&&I.createElement("div",{key:"loading"},R),I.createElement("div",{className:T,key:"container"},d)):h?I.createElement("div",{className:F()(`${y}-fullscreen`,{[`${y}-fullscreen-show`]:C},i,x,k)},R):R)};rN.setDefaultIndicator=e=>{nN=e};const oN=rN;const aN=function(e){return t=>{const{prefixCls:n,onExpand:r,record:o,expanded:a,expandable:i}=t,s=`${n}-row-expand-icon`;return I.createElement("button",{type:"button",onClick:e=>{r(o,e),e.stopPropagation()},className:F()(s,{[`${s}-spaced`]:!i,[`${s}-expanded`]:i&&a,[`${s}-collapsed`]:i&&!a}),"aria-label":a?e.collapse:e.expand,"aria-expanded":a})}};const iN=(e,t)=>"key"in e&&void 0!==e.key&&null!==e.key?e.key:e.dataIndex?Array.isArray(e.dataIndex)?e.dataIndex.join("."):e.dataIndex:t;function sN(e,t){return t?`${t}-${e}`:`${e}`}const lN=(e,t)=>"function"===typeof e?e(t):e;const uN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z"}}]},name:"filter",theme:"filled"};var cN=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:uN}))};const dN=I.forwardRef(cN);function hN(e){if(null==e)throw new TypeError("Cannot destructure "+e)}var pN=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],fN=function(e,t){var n=e.className,r=e.style,o=e.motion,a=e.motionNodes,i=e.motionType,s=e.onMotionStart,l=e.onMotionEnd,u=e.active,c=e.treeNodeRequiredProps,d=Z(e,pN),h=X(I.useState(!0),2),p=h[0],f=h[1],m=I.useContext(ny).prefixCls,g=a&&"hide"!==i;In((function(){a&&g!==p&&f(g)}),[a]);var v=I.useRef(!1),b=function(){a&&!v.current&&(v.current=!0,l())};!function(e,t){var n=X(I.useState(!1),2),r=n[0],o=n[1];In((function(){if(r)return e(),function(){t()}}),[r]),In((function(){return o(!0),function(){o(!1)}}),[])}((function(){a&&s()}),b);return a?I.createElement(Qu,G({ref:t,visible:p},o,{motionAppear:"show"===i,onVisibleChanged:function(e){g===e&&b()}}),(function(e,t){var n=e.className,r=e.style;return I.createElement("div",{ref:t,className:F()("".concat(m,"-treenode-motion"),n),style:r},a.map((function(e){var t=Object.assign({},(hN(e.data),e.data)),n=e.title,r=e.key,o=e.isStart,a=e.isEnd;delete t.children;var i=py(r,c);return I.createElement(wy,G({},t,i,{title:n,active:u,data:e.data,key:r,isStart:o,isEnd:a}))})))})):I.createElement(wy,G({domRef:t,className:n,style:r},d,{active:u}))};fN.displayName="MotionTreeNode";const mN=I.forwardRef(fN);function gN(e,t,n){var r=e.findIndex((function(e){return e.key===n})),o=e[r+1],a=t.findIndex((function(e){return e.key===n}));if(o){var i=t.findIndex((function(e){return e.key===o.key}));return t.slice(a+1,i)}return t.slice(a+1)}var vN=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],bN={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},yN=function(){},wN="RC_TREE_MOTION_".concat(Math.random()),xN={key:wN},kN={key:wN,level:0,index:0,pos:"0",node:xN,nodes:[xN]},CN={parent:null,children:[],pos:kN.pos,data:xN,title:null,key:wN,isStart:[],isEnd:[]};function SN(e,t,n,r){return!1!==t&&n?e.slice(0,Math.ceil(n/r)+1):e}function EN(e){return ly(e.key,e.pos)}var NN=I.forwardRef((function(e,t){var n=e.prefixCls,r=e.data,o=(e.selectable,e.checkable,e.expandedKeys),a=e.selectedKeys,i=e.checkedKeys,s=e.loadedKeys,l=e.loadingKeys,u=e.halfCheckedKeys,c=e.keyEntities,d=e.disabled,h=e.dragging,p=e.dragOverNodeKey,f=e.dropPosition,m=e.motion,g=e.height,v=e.itemHeight,b=e.virtual,y=e.focusable,w=e.activeItem,x=e.focused,k=e.tabIndex,C=e.onKeyDown,S=e.onFocus,E=e.onBlur,N=e.onActiveChange,$=e.onListChangeStart,T=e.onListChangeEnd,A=Z(e,vN),O=I.useRef(null),R=I.useRef(null);I.useImperativeHandle(t,(function(){return{scrollTo:function(e){O.current.scrollTo(e)},getIndentWidth:function(){return R.current.offsetWidth}}}));var P=X(I.useState(o),2),D=P[0],F=P[1],_=X(I.useState(r),2),M=_[0],z=_[1],L=X(I.useState(r),2),B=L[0],j=L[1],H=X(I.useState([]),2),V=H[0],W=H[1],U=X(I.useState(null),2),K=U[0],q=U[1],J=I.useRef(r);function Y(){var e=J.current;z(e),j(e),W([]),q(null),T()}J.current=r,In((function(){F(o);var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.length,r=t.length;if(1!==Math.abs(n-r))return{add:!1,key:null};function o(e,t){var n=new Map;e.forEach((function(e){n.set(e,!0)}));var r=t.filter((function(e){return!n.has(e)}));return 1===r.length?r[0]:null}return n<r?{add:!0,key:o(e,t)}:{add:!1,key:o(t,e)}}(D,o);if(null!==e.key)if(e.add){var t=M.findIndex((function(t){return t.key===e.key})),n=SN(gN(M,r,e.key),b,g,v),a=M.slice();a.splice(t+1,0,CN),j(a),W(n),q("show")}else{var i=r.findIndex((function(t){return t.key===e.key})),s=SN(gN(r,M,e.key),b,g,v),l=r.slice();l.splice(i+1,0,CN),j(l),W(s),q("hide")}else M!==r&&(z(r),j(r))}),[o,r]),I.useEffect((function(){h||Y()}),[h]);var Q=m?B:r,ee={expandedKeys:o,selectedKeys:a,loadedKeys:s,loadingKeys:l,checkedKeys:i,halfCheckedKeys:u,dragOverNodeKey:p,dropPosition:f,keyEntities:c};return I.createElement(I.Fragment,null,x&&w&&I.createElement("span",{style:bN,"aria-live":"assertive"},function(e){for(var t=String(e.data.key),n=e;n.parent;)n=n.parent,t="".concat(n.data.key," > ").concat(t);return t}(w)),I.createElement("div",null,I.createElement("input",{style:bN,disabled:!1===y||d,tabIndex:!1!==y?k:null,onKeyDown:C,onFocus:S,onBlur:E,value:"",onChange:yN,"aria-label":"for screen reader"})),I.createElement("div",{className:"".concat(n,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},I.createElement("div",{className:"".concat(n,"-indent")},I.createElement("div",{ref:R,className:"".concat(n,"-indent-unit")}))),I.createElement(zb,G({},A,{data:Q,itemKey:EN,height:g,fullHeight:!1,virtual:b,itemHeight:v,prefixCls:"".concat(n,"-list"),ref:O,onVisibleChange:function(e){e.every((function(e){return EN(e)!==wN}))&&Y()}}),(function(e){var t=e.pos,n=Object.assign({},(hN(e.data),e.data)),r=e.title,o=e.key,a=e.isStart,i=e.isEnd,s=ly(o,t);delete n.key,delete n.children;var l=py(s,ee);return I.createElement(mN,G({},n,l,{title:r,active:!!w&&o===w.key,pos:t,data:e.data,isStart:a,isEnd:i,motion:m,motionNodes:o===wN?V:null,motionType:K,onMotionStart:$,onMotionEnd:Y,treeNodeRequiredProps:ee,onMouseMove:function(){N(null)}}))})))}));NN.displayName="NodeList";const IN=NN;var $N=function(e){Ur(n,e);var t=Xr(n);function n(){var e;qt(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Q(Wr(e=t.call.apply(t,[this].concat(o))),"destroyed",!1),Q(Wr(e),"delayedDragEnterLogic",void 0),Q(Wr(e),"loadingRetryTimes",{}),Q(Wr(e),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:uy()}),Q(Wr(e),"dragStartMousePosition",null),Q(Wr(e),"dragNode",void 0),Q(Wr(e),"currentMouseOverDroppableNodeKey",null),Q(Wr(e),"listRef",I.createRef()),Q(Wr(e),"onNodeDragStart",(function(t,n){var r=e.state,o=r.expandedKeys,a=r.keyEntities,i=e.props.onDragStart,s=n.props.eventKey;e.dragNode=n,e.dragStartMousePosition={x:t.clientX,y:t.clientY};var l=xy(o,s);e.setState({draggingNodeKey:s,dragChildrenKeys:Sy(s,a),indent:e.listRef.current.getIndentWidth()}),e.setExpandedKeys(l),window.addEventListener("dragend",e.onWindowDragEnd),null===i||void 0===i||i({event:t,node:fy(n.props)})})),Q(Wr(e),"onNodeDragEnter",(function(t,n){var r=e.state,o=r.expandedKeys,a=r.keyEntities,i=r.dragChildrenKeys,s=r.flattenNodes,l=r.indent,u=e.props,c=u.onDragEnter,d=u.onExpand,h=u.allowDrop,p=u.direction,f=n.props,m=f.pos,g=f.eventKey,v=Wr(e).dragNode;if(e.currentMouseOverDroppableNodeKey!==g&&(e.currentMouseOverDroppableNodeKey=g),v){var b=Ny(t,v,n,l,e.dragStartMousePosition,h,s,a,o,p),y=b.dropPosition,w=b.dropLevelOffset,x=b.dropTargetKey,k=b.dropContainerKey,C=b.dropTargetPos,S=b.dropAllowed,E=b.dragOverNodeKey;-1===i.indexOf(x)&&S?(e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach((function(t){clearTimeout(e.delayedDragEnterLogic[t])})),v.props.eventKey!==n.props.eventKey&&(t.persist(),e.delayedDragEnterLogic[m]=window.setTimeout((function(){if(null!==e.state.draggingNodeKey){var r=P(o),i=ay(a,n.props.eventKey);i&&(i.children||[]).length&&(r=ky(o,n.props.eventKey)),"expandedKeys"in e.props||e.setExpandedKeys(r),null===d||void 0===d||d(r,{node:fy(n.props),expanded:!0,nativeEvent:t.nativeEvent})}}),800)),v.props.eventKey!==x||0!==w?(e.setState({dragOverNodeKey:E,dropPosition:y,dropLevelOffset:w,dropTargetKey:x,dropContainerKey:k,dropTargetPos:C,dropAllowed:S}),null===c||void 0===c||c({event:t,node:fy(n.props),expandedKeys:o})):e.resetDragState()):e.resetDragState()}else e.resetDragState()})),Q(Wr(e),"onNodeDragOver",(function(t,n){var r=e.state,o=r.dragChildrenKeys,a=r.flattenNodes,i=r.keyEntities,s=r.expandedKeys,l=r.indent,u=e.props,c=u.onDragOver,d=u.allowDrop,h=u.direction,p=Wr(e).dragNode;if(p){var f=Ny(t,p,n,l,e.dragStartMousePosition,d,a,i,s,h),m=f.dropPosition,g=f.dropLevelOffset,v=f.dropTargetKey,b=f.dropContainerKey,y=f.dropAllowed,w=f.dropTargetPos,x=f.dragOverNodeKey;-1===o.indexOf(v)&&y&&(p.props.eventKey===v&&0===g?null===e.state.dropPosition&&null===e.state.dropLevelOffset&&null===e.state.dropTargetKey&&null===e.state.dropContainerKey&&null===e.state.dropTargetPos&&!1===e.state.dropAllowed&&null===e.state.dragOverNodeKey||e.resetDragState():m===e.state.dropPosition&&g===e.state.dropLevelOffset&&v===e.state.dropTargetKey&&b===e.state.dropContainerKey&&w===e.state.dropTargetPos&&y===e.state.dropAllowed&&x===e.state.dragOverNodeKey||e.setState({dropPosition:m,dropLevelOffset:g,dropTargetKey:v,dropContainerKey:b,dropTargetPos:w,dropAllowed:y,dragOverNodeKey:x}),null===c||void 0===c||c({event:t,node:fy(n.props)}))}})),Q(Wr(e),"onNodeDragLeave",(function(t,n){e.currentMouseOverDroppableNodeKey!==n.props.eventKey||t.currentTarget.contains(t.relatedTarget)||(e.resetDragState(),e.currentMouseOverDroppableNodeKey=null);var r=e.props.onDragLeave;null===r||void 0===r||r({event:t,node:fy(n.props)})})),Q(Wr(e),"onWindowDragEnd",(function(t){e.onNodeDragEnd(t,null,!0),window.removeEventListener("dragend",e.onWindowDragEnd)})),Q(Wr(e),"onNodeDragEnd",(function(t,n){var r=e.props.onDragEnd;e.setState({dragOverNodeKey:null}),e.cleanDragState(),null===r||void 0===r||r({event:t,node:fy(n.props)}),e.dragNode=null,window.removeEventListener("dragend",e.onWindowDragEnd)})),Q(Wr(e),"onNodeDrop",(function(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.state,i=a.dragChildrenKeys,s=a.dropPosition,l=a.dropTargetKey,u=a.dropTargetPos;if(a.dropAllowed){var c=e.props.onDrop;if(e.setState({dragOverNodeKey:null}),e.cleanDragState(),null!==l){var d=nt(nt({},py(l,e.getTreeNodeRequiredProps())),{},{active:(null===(r=e.getActiveItem())||void 0===r?void 0:r.key)===l,data:ay(e.state.keyEntities,l).node}),h=-1!==i.indexOf(l);kt(!h,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var p=Cy(u),f={event:t,node:fy(d),dragNode:e.dragNode?fy(e.dragNode.props):null,dragNodesKeys:[e.dragNode.props.eventKey].concat(i),dropToGap:0!==s,dropPosition:s+Number(p[p.length-1])};o||null===c||void 0===c||c(f),e.dragNode=null}}})),Q(Wr(e),"cleanDragState",(function(){null!==e.state.draggingNodeKey&&e.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),e.dragStartMousePosition=null,e.currentMouseOverDroppableNodeKey=null})),Q(Wr(e),"triggerExpandActionExpand",(function(t,n){var r=e.state,o=r.expandedKeys,a=r.flattenNodes,i=n.expanded,s=n.key;if(!(n.isLeaf||t.shiftKey||t.metaKey||t.ctrlKey)){var l=a.filter((function(e){return e.key===s}))[0],u=fy(nt(nt({},py(s,e.getTreeNodeRequiredProps())),{},{data:l.data}));e.setExpandedKeys(i?xy(o,s):ky(o,s)),e.onNodeExpand(t,u)}})),Q(Wr(e),"onNodeClick",(function(t,n){var r=e.props,o=r.onClick;"click"===r.expandAction&&e.triggerExpandActionExpand(t,n),null===o||void 0===o||o(t,n)})),Q(Wr(e),"onNodeDoubleClick",(function(t,n){var r=e.props,o=r.onDoubleClick;"doubleClick"===r.expandAction&&e.triggerExpandActionExpand(t,n),null===o||void 0===o||o(t,n)})),Q(Wr(e),"onNodeSelect",(function(t,n){var r=e.state.selectedKeys,o=e.state,a=o.keyEntities,i=o.fieldNames,s=e.props,l=s.onSelect,u=s.multiple,c=n.selected,d=n[i.key],h=!c,p=(r=h?u?ky(r,d):[d]:xy(r,d)).map((function(e){var t=ay(a,e);return t?t.node:null})).filter((function(e){return e}));e.setUncontrolledState({selectedKeys:r}),null===l||void 0===l||l(r,{event:"select",selected:h,node:n,selectedNodes:p,nativeEvent:t.nativeEvent})})),Q(Wr(e),"onNodeCheck",(function(t,n,r){var o,a=e.state,i=a.keyEntities,s=a.checkedKeys,l=a.halfCheckedKeys,u=e.props,c=u.checkStrictly,d=u.onCheck,h=n.key,p={event:"check",node:n,checked:r,nativeEvent:t.nativeEvent};if(c){var f=r?ky(s,h):xy(s,h);o={checked:f,halfChecked:xy(l,h)},p.checkedNodes=f.map((function(e){return ay(i,e)})).filter((function(e){return e})).map((function(e){return e.node})),e.setUncontrolledState({checkedKeys:f})}else{var m=Ry([].concat(P(s),[h]),!0,i),g=m.checkedKeys,v=m.halfCheckedKeys;if(!r){var b=new Set(g);b.delete(h);var y=Ry(Array.from(b),{checked:!1,halfCheckedKeys:v},i);g=y.checkedKeys,v=y.halfCheckedKeys}o=g,p.checkedNodes=[],p.checkedNodesPositions=[],p.halfCheckedKeys=v,g.forEach((function(e){var t=ay(i,e);if(t){var n=t.node,r=t.pos;p.checkedNodes.push(n),p.checkedNodesPositions.push({node:n,pos:r})}})),e.setUncontrolledState({checkedKeys:g},!1,{halfCheckedKeys:v})}null===d||void 0===d||d(o,p)})),Q(Wr(e),"onNodeLoad",(function(t){var n,r=t.key,o=ay(e.state.keyEntities,r);if(null===o||void 0===o||null===(n=o.children)||void 0===n||!n.length){var a=new Promise((function(n,o){e.setState((function(a){var i=a.loadedKeys,s=void 0===i?[]:i,l=a.loadingKeys,u=void 0===l?[]:l,c=e.props,d=c.loadData,h=c.onLoad;return d&&-1===s.indexOf(r)&&-1===u.indexOf(r)?(d(t).then((function(){var o=ky(e.state.loadedKeys,r);null===h||void 0===h||h(o,{event:"load",node:t}),e.setUncontrolledState({loadedKeys:o}),e.setState((function(e){return{loadingKeys:xy(e.loadingKeys,r)}})),n()})).catch((function(t){if(e.setState((function(e){return{loadingKeys:xy(e.loadingKeys,r)}})),e.loadingRetryTimes[r]=(e.loadingRetryTimes[r]||0)+1,e.loadingRetryTimes[r]>=10){var a=e.state.loadedKeys;kt(!1,"Retry for `loadData` many times but still failed. No more retry."),e.setUncontrolledState({loadedKeys:ky(a,r)}),n()}o(t)})),{loadingKeys:ky(u,r)}):null}))}));return a.catch((function(){})),a}})),Q(Wr(e),"onNodeMouseEnter",(function(t,n){var r=e.props.onMouseEnter;null===r||void 0===r||r({event:t,node:n})})),Q(Wr(e),"onNodeMouseLeave",(function(t,n){var r=e.props.onMouseLeave;null===r||void 0===r||r({event:t,node:n})})),Q(Wr(e),"onNodeContextMenu",(function(t,n){var r=e.props.onRightClick;r&&(t.preventDefault(),r({event:t,node:n}))})),Q(Wr(e),"onFocus",(function(){var t=e.props.onFocus;e.setState({focused:!0});for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null===t||void 0===t||t.apply(void 0,r)})),Q(Wr(e),"onBlur",(function(){var t=e.props.onBlur;e.setState({focused:!1}),e.onActiveChange(null);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null===t||void 0===t||t.apply(void 0,r)})),Q(Wr(e),"getTreeNodeRequiredProps",(function(){var t=e.state;return{expandedKeys:t.expandedKeys||[],selectedKeys:t.selectedKeys||[],loadedKeys:t.loadedKeys||[],loadingKeys:t.loadingKeys||[],checkedKeys:t.checkedKeys||[],halfCheckedKeys:t.halfCheckedKeys||[],dragOverNodeKey:t.dragOverNodeKey,dropPosition:t.dropPosition,keyEntities:t.keyEntities}})),Q(Wr(e),"setExpandedKeys",(function(t){var n=e.state,r=dy(n.treeData,t,n.fieldNames);e.setUncontrolledState({expandedKeys:t,flattenNodes:r},!0)})),Q(Wr(e),"onNodeExpand",(function(t,n){var r=e.state.expandedKeys,o=e.state,a=o.listChanging,i=o.fieldNames,s=e.props,l=s.onExpand,u=s.loadData,c=n.expanded,d=n[i.key];if(!a){var h=r.indexOf(d),p=!c;if(kt(c&&-1!==h||!c&&-1===h,"Expand state not sync with index check"),r=p?ky(r,d):xy(r,d),e.setExpandedKeys(r),null===l||void 0===l||l(r,{node:n,expanded:p,nativeEvent:t.nativeEvent}),p&&u){var f=e.onNodeLoad(n);f&&f.then((function(){var t=dy(e.state.treeData,r,i);e.setUncontrolledState({flattenNodes:t})})).catch((function(){var t=xy(e.state.expandedKeys,d);e.setExpandedKeys(t)}))}}})),Q(Wr(e),"onListChangeStart",(function(){e.setUncontrolledState({listChanging:!0})})),Q(Wr(e),"onListChangeEnd",(function(){setTimeout((function(){e.setUncontrolledState({listChanging:!1})}))})),Q(Wr(e),"onActiveChange",(function(t){var n=e.state.activeKey,r=e.props,o=r.onActiveChange,a=r.itemScrollOffset,i=void 0===a?0:a;n!==t&&(e.setState({activeKey:t}),null!==t&&e.scrollTo({key:t,offset:i}),null===o||void 0===o||o(t))})),Q(Wr(e),"getActiveItem",(function(){var t=e.state,n=t.activeKey,r=t.flattenNodes;return null===n?null:r.find((function(e){return e.key===n}))||null})),Q(Wr(e),"offsetActiveKey",(function(t){var n=e.state,r=n.flattenNodes,o=n.activeKey,a=r.findIndex((function(e){return e.key===o}));-1===a&&t<0&&(a=r.length);var i=r[a=(a+t+r.length)%r.length];if(i){var s=i.key;e.onActiveChange(s)}else e.onActiveChange(null)})),Q(Wr(e),"onKeyDown",(function(t){var n=e.state,r=n.activeKey,o=n.expandedKeys,a=n.checkedKeys,i=n.fieldNames,s=e.props,l=s.onKeyDown,u=s.checkable,c=s.selectable;switch(t.which){case vp.UP:e.offsetActiveKey(-1),t.preventDefault();break;case vp.DOWN:e.offsetActiveKey(1),t.preventDefault()}var d=e.getActiveItem();if(d&&d.data){var h=e.getTreeNodeRequiredProps(),p=!1===d.data.isLeaf||!!(d.data[i.children]||[]).length,f=fy(nt(nt({},py(r,h)),{},{data:d.data,active:!0}));switch(t.which){case vp.LEFT:p&&o.includes(r)?e.onNodeExpand({},f):d.parent&&e.onActiveChange(d.parent.key),t.preventDefault();break;case vp.RIGHT:p&&!o.includes(r)?e.onNodeExpand({},f):d.children&&d.children.length&&e.onActiveChange(d.children[0].key),t.preventDefault();break;case vp.ENTER:case vp.SPACE:!u||f.disabled||!1===f.checkable||f.disableCheckbox?u||!c||f.disabled||!1===f.selectable||e.onNodeSelect({},f):e.onNodeCheck({},f,!a.includes(r))}}null===l||void 0===l||l(t)})),Q(Wr(e),"setUncontrolledState",(function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e.destroyed){var o=!1,a=!0,i={};Object.keys(t).forEach((function(n){n in e.props?a=!1:(o=!0,i[n]=t[n])})),!o||n&&!a||e.setState(nt(nt({},i),r))}})),Q(Wr(e),"scrollTo",(function(t){e.listRef.current.scrollTo(t)})),e}return Jt(n,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var e=this.props,t=e.activeKey,n=e.itemScrollOffset,r=void 0===n?0:n;void 0!==t&&t!==this.state.activeKey&&(this.setState({activeKey:t}),null!==t&&this.scrollTo({key:t,offset:r}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var e,t=this.state,n=t.focused,r=t.flattenNodes,o=t.keyEntities,a=t.draggingNodeKey,i=t.activeKey,s=t.dropLevelOffset,l=t.dropContainerKey,u=t.dropTargetKey,c=t.dropPosition,d=t.dragOverNodeKey,h=t.indent,p=this.props,f=p.prefixCls,m=p.className,g=p.style,v=p.showLine,b=p.focusable,y=p.tabIndex,w=void 0===y?0:y,x=p.selectable,k=p.showIcon,C=p.icon,S=p.switcherIcon,E=p.draggable,N=p.checkable,$=p.checkStrictly,T=p.disabled,A=p.motion,O=p.loadData,R=p.filterTreeNode,P=p.height,D=p.itemHeight,_=p.virtual,M=p.titleRender,z=p.dropIndicatorRender,L=p.onContextMenu,B=p.onScroll,j=p.direction,H=p.rootClassName,V=p.rootStyle,W=wl(this.props,{aria:!0,data:!0});return E&&(e="object"===J(E)?E:"function"===typeof E?{nodeDraggable:E}:{}),I.createElement(ny.Provider,{value:{prefixCls:f,selectable:x,showIcon:k,icon:C,switcherIcon:S,draggable:e,draggingNodeKey:a,checkable:N,checkStrictly:$,disabled:T,keyEntities:o,dropLevelOffset:s,dropContainerKey:l,dropTargetKey:u,dropPosition:c,dragOverNodeKey:d,indent:h,direction:j,dropIndicatorRender:z,loadData:O,filterTreeNode:R,titleRender:M,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},I.createElement("div",{role:"tree",className:F()(f,m,H,Q(Q(Q({},"".concat(f,"-show-line"),v),"".concat(f,"-focused"),n),"".concat(f,"-active-focused"),null!==i)),style:V},I.createElement(IN,G({ref:this.listRef,prefixCls:f,style:g,data:r,disabled:T,selectable:x,checkable:!!N,motion:A,dragging:null!==a,height:P,itemHeight:D,virtual:_,focusable:b,focused:n,tabIndex:w,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:L,onScroll:B},this.getTreeNodeRequiredProps(),W))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,r=t.prevProps,o={prevProps:e};function a(t){return!r&&t in e||r&&r[t]!==e[t]}var i=t.fieldNames;if(a("fieldNames")&&(i=uy(e.fieldNames),o.fieldNames=i),a("treeData")?n=e.treeData:a("children")&&(kt(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),n=cy(e.children)),n){o.treeData=n;var s=hy(n,{fieldNames:i});o.keyEntities=nt(Q({},wN,kN),s.keyEntities)}var l,u=o.keyEntities||t.keyEntities;if(a("expandedKeys")||r&&a("autoExpandParent"))o.expandedKeys=e.autoExpandParent||!r&&e.defaultExpandParent?Ty(e.expandedKeys,u):e.expandedKeys;else if(!r&&e.defaultExpandAll){var c=nt({},u);delete c[wN];var d=[];Object.keys(c).forEach((function(e){var t=c[e];t.children&&t.children.length&&d.push(t.key)})),o.expandedKeys=d}else!r&&e.defaultExpandedKeys&&(o.expandedKeys=e.autoExpandParent||e.defaultExpandParent?Ty(e.defaultExpandedKeys,u):e.defaultExpandedKeys);if(o.expandedKeys||delete o.expandedKeys,n||o.expandedKeys){var h=dy(n||t.treeData,o.expandedKeys||t.expandedKeys,i);o.flattenNodes=h}if((e.selectable&&(a("selectedKeys")?o.selectedKeys=Iy(e.selectedKeys,e):!r&&e.defaultSelectedKeys&&(o.selectedKeys=Iy(e.defaultSelectedKeys,e))),e.checkable)&&(a("checkedKeys")?l=$y(e.checkedKeys)||{}:!r&&e.defaultCheckedKeys?l=$y(e.defaultCheckedKeys)||{}:n&&(l=$y(e.checkedKeys)||{checkedKeys:t.checkedKeys,halfCheckedKeys:t.halfCheckedKeys}),l)){var p=l,f=p.checkedKeys,m=void 0===f?[]:f,g=p.halfCheckedKeys,v=void 0===g?[]:g;if(!e.checkStrictly){var b=Ry(m,!0,u);m=b.checkedKeys,v=b.halfCheckedKeys}o.checkedKeys=m,o.halfCheckedKeys=v}return a("loadedKeys")&&(o.loadedKeys=e.loadedKeys),o}}]),n}(I.Component);Q($N,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:function(e){var t=e.dropPosition,n=e.dropLevelOffset,r=e.indent,o={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(t){case-1:o.top=0,o.left=-n*r;break;case 1:o.bottom=0,o.left=-n*r;break;case 0:o.bottom=0,o.left=r}return I.createElement("div",{style:o})},allowDrop:function(){return!0},expandAction:!1}),Q($N,"TreeNode",wy);const TN=$N;const AN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};var ON=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:AN}))};const RN=I.forwardRef(ON);const PN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};var DN=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:PN}))};const FN=I.forwardRef(DN);const _N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};var MN=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:_N}))};const zN=I.forwardRef(MN);const LN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"};var BN=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:LN}))};const jN=I.forwardRef(BN),HN=new Hr("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),VN=(e,t)=>({[`.${e}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${t.motionDurationSlow}`}}}),WN=(e,t)=>({[`.${e}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:t.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${yn(t.lineWidthBold)} solid ${t.colorPrimary}`,borderRadius:"50%",content:'""'}}}),GN=(e,t)=>{const{treeCls:n,treeNodeCls:r,treeNodePadding:o,titleHeight:a,nodeSelectedBg:i,nodeHoverBg:s}=t,l=t.paddingXS;return{[n]:Object.assign(Object.assign({},_o(t)),{background:t.colorBgContainer,borderRadius:t.borderRadius,transition:`background-color ${t.motionDurationSlow}`,[`&${n}-rtl`]:{[`${n}-switcher`]:{"&_close":{[`${n}-switcher-icon`]:{svg:{transform:"rotate(90deg)"}}}}},[`&-focused:not(:hover):not(${n}-active-focused)`]:Object.assign({},zo(t)),[`${n}-list-holder-inner`]:{alignItems:"flex-start"},[`&${n}-block-node`]:{[`${n}-list-holder-inner`]:{alignItems:"stretch",[`${n}-node-content-wrapper`]:{flex:"auto"},[`${r}.dragging`]:{position:"relative","&:after":{position:"absolute",top:0,insetInlineEnd:0,bottom:o,insetInlineStart:0,border:`1px solid ${t.colorPrimary}`,opacity:0,animationName:HN,animationDuration:t.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none"}}}},[r]:{display:"flex",alignItems:"flex-start",padding:`0 0 ${yn(o)} 0`,outline:"none","&-rtl":{direction:"rtl"},"&-disabled":{[`${n}-node-content-wrapper`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}}},[`&-active ${n}-node-content-wrapper`]:{background:t.controlItemBgHover},[`&:not(${r}-disabled).filter-node ${n}-title`]:{color:t.colorPrimary,fontWeight:500},"&-draggable":{cursor:"grab",[`${n}-draggable-icon`]:{flexShrink:0,width:a,lineHeight:yn(a),textAlign:"center",visibility:"visible",opacity:.2,transition:`opacity ${t.motionDurationSlow}`,[`${r}:hover &`]:{opacity:.45}},[`&${r}-disabled`]:{[`${n}-draggable-icon`]:{visibility:"hidden"}}}},[`${n}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:a}},[`${n}-draggable-icon`]:{visibility:"hidden"},[`${n}-switcher`]:Object.assign(Object.assign({},VN(e,t)),{position:"relative",flex:"none",alignSelf:"stretch",width:a,margin:0,lineHeight:yn(a),textAlign:"center",cursor:"pointer",userSelect:"none",transition:`all ${t.motionDurationSlow}`,"&-noop":{cursor:"unset"},"&:before":{pointerEvents:"none",content:'""',width:a,height:a,position:"absolute",left:{_skip_check_:!0,value:0},top:0,borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`},[`&:not(${n}-switcher-noop):hover:before`]:{backgroundColor:t.colorBgTextHover},"&_close":{[`${n}-switcher-icon`]:{svg:{transform:"rotate(-90deg)"}}},"&-loading-icon":{color:t.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(a).div(2).equal(),bottom:t.calc(o).mul(-1).equal(),marginInlineStart:-1,borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:t.calc(t.calc(a).div(2).equal()).mul(.8).equal(),height:t.calc(a).div(2).equal(),borderBottom:`1px solid ${t.colorBorder}`,content:'""'}}}),[`${n}-checkbox`]:{top:"initial",marginInlineEnd:l,alignSelf:"flex-start",marginTop:t.marginXXS},[`${n}-node-content-wrapper, ${n}-checkbox + span`]:{position:"relative",zIndex:"auto",minHeight:a,margin:0,padding:`0 ${yn(t.calc(t.paddingXS).div(2).equal())}`,color:"inherit",lineHeight:yn(a),background:"transparent",borderRadius:t.borderRadius,cursor:"pointer",transition:`all ${t.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`,"&:hover":{backgroundColor:s},[`&${n}-node-selected`]:{backgroundColor:i},[`${n}-iconEle`]:{display:"inline-block",width:a,height:a,lineHeight:yn(a),textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}},[`${n}-unselectable ${n}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${n}-node-content-wrapper`]:Object.assign({lineHeight:yn(a),userSelect:"none"},WN(e,t)),[`${r}.drop-container`]:{"> [draggable]":{boxShadow:`0 0 0 2px ${t.colorPrimary}`}},"&-show-line":{[`${n}-indent`]:{"&-unit":{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(a).div(2).equal(),bottom:t.calc(o).mul(-1).equal(),borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&-end":{"&:before":{display:"none"}}}},[`${n}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${r}-leaf-last`]:{[`${n}-switcher`]:{"&-leaf-line":{"&:before":{top:"auto !important",bottom:"auto !important",height:`${yn(t.calc(a).div(2).equal())} !important`}}}}})}},UN=e=>{const{treeCls:t,treeNodeCls:n,treeNodePadding:r,directoryNodeSelectedBg:o,directoryNodeSelectedColor:a}=e;return{[`${t}${t}-directory`]:{[n]:{position:"relative","&:before":{position:"absolute",top:0,insetInlineEnd:0,bottom:r,insetInlineStart:0,transition:`background-color ${e.motionDurationMid}`,content:'""',pointerEvents:"none"},"&:hover":{"&:before":{background:e.controlItemBgHover}},"> *":{zIndex:1},[`${t}-switcher`]:{transition:`color ${e.motionDurationMid}`},[`${t}-node-content-wrapper`]:{borderRadius:0,userSelect:"none","&:hover":{background:"transparent"},[`&${t}-node-selected`]:{color:a,background:"transparent"}},"&-selected":{"\n            &:hover::before,\n            &::before\n          ":{background:o},[`${t}-switcher`]:{color:a},[`${t}-node-content-wrapper`]:{color:a,background:"transparent"}}}}}},KN=(e,t)=>{const n=`.${e}`,r=`${n}-treenode`,o=t.calc(t.paddingXS).div(2).equal(),a=So(t,{treeCls:n,treeNodeCls:r,treeNodePadding:o});return[GN(e,a),UN(a)]},qN=ha("Tree",((e,t)=>{let{prefixCls:n}=t;return[{[e.componentCls]:zy(`${n}-checkbox`,e)},KN(n,e),rk(e)]}),(e=>{const{colorTextLightSolid:t,colorPrimary:n}=e;return Object.assign(Object.assign({},(e=>{const{controlHeightSM:t}=e;return{titleHeight:t,nodeHoverBg:e.controlItemBgHover,nodeSelectedBg:e.controlItemBgActive}})(e)),{directoryNodeSelectedColor:t,directoryNodeSelectedBg:n})}));const XN=function(e){const{dropPosition:t,dropLevelOffset:n,prefixCls:r,indent:o,direction:a="ltr"}=e,i="ltr"===a?"left":"right",s="ltr"===a?"right":"left",l={[i]:-n*o+4,[s]:0};switch(t){case-1:l.top=-3;break;case 1:l.bottom=-3;break;default:l.bottom=-3,l[i]=o+4}return I.createElement("div",{style:l,className:`${r}-drop-indicator`})};const JN={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"};var YN=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:JN}))};const QN=I.forwardRef(YN);const ZN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"};var eI=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:ZN}))};const tI=I.forwardRef(eI);const nI={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"};var rI=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:nI}))};const oI=I.forwardRef(rI),aI=e=>{const{prefixCls:t,switcherIcon:n,treeNodeProps:r,showLine:o,switcherLoadingIcon:a}=e,{isLeaf:i,expanded:s,loading:l}=r;if(l)return I.isValidElement(a)?a:I.createElement(Tc,{className:`${t}-switcher-loading-icon`});let u;if(o&&"object"===typeof o&&(u=o.showLeafIcon),i){if(!o)return null;if("boolean"!==typeof u&&u){const e="function"===typeof u?u(r):u,n=`${t}-switcher-line-custom-icon`;return I.isValidElement(e)?Ql(e,{className:F()(e.props.className||"",n)}):e}return u?I.createElement(RN,{className:`${t}-switcher-line-icon`}):I.createElement("span",{className:`${t}-switcher-leaf-line`})}const c=`${t}-switcher-icon`,d="function"===typeof n?n(r):n;return I.isValidElement(d)?Ql(d,{className:F()(d.props.className||"",c)}):void 0!==d?d:o?s?I.createElement(tI,{className:`${t}-switcher-line-icon`}):I.createElement(oI,{className:`${t}-switcher-line-icon`}):I.createElement(QN,{className:c})},iI=I.forwardRef(((e,t)=>{var n;const{getPrefixCls:r,direction:o,virtual:a,tree:i}=I.useContext(B),{prefixCls:s,className:l,showIcon:u=!1,showLine:c,switcherIcon:d,switcherLoadingIcon:h,blockNode:p=!1,children:f,checkable:m=!1,selectable:g=!0,draggable:v,motion:b,style:y}=e,w=r("tree",s),x=r(),k=null!==b&&void 0!==b?b:Object.assign(Object.assign({},Nm(x)),{motionAppear:!1}),C=Object.assign(Object.assign({},e),{checkable:m,selectable:g,showIcon:u,motion:k,blockNode:p,showLine:Boolean(c),dropIndicatorRender:XN}),[S,E,N]=qN(w),[,$]=ca(),T=$.paddingXS/2+((null===(n=$.Tree)||void 0===n?void 0:n.titleHeight)||$.controlHeightSM),A=I.useMemo((()=>{if(!v)return!1;let e={};switch(typeof v){case"function":e.nodeDraggable=v;break;case"object":e=Object.assign({},v)}return!1!==e.icon&&(e.icon=e.icon||I.createElement(jN,null)),e}),[v]);return S(I.createElement(TN,Object.assign({itemHeight:T,ref:t,virtual:a},C,{style:Object.assign(Object.assign({},null===i||void 0===i?void 0:i.style),y),prefixCls:w,className:F()({[`${w}-icon-hide`]:!u,[`${w}-block-node`]:p,[`${w}-unselectable`]:!g,[`${w}-rtl`]:"rtl"===o},null===i||void 0===i?void 0:i.className,l,E,N),direction:o,checkable:m?I.createElement("span",{className:`${w}-checkbox-inner`}):m,selectable:g,switcherIcon:e=>I.createElement(aI,{prefixCls:w,switcherIcon:d,switcherLoadingIcon:h,treeNodeProps:e,showLine:c}),draggable:A}),f))}));const sI=iI;function lI(e,t,n){const{key:r,children:o}=n;e.forEach((function(e){const a=e[r],i=e[o];!1!==t(a,e)&&lI(i||[],t,n)}))}function uI(e){let{treeData:t,expandedKeys:n,startKey:r,endKey:o,fieldNames:a}=e;const i=[];let s=0;if(r&&r===o)return[r];if(!r||!o)return[];return lI(t,(e=>{if(2===s)return!1;if(function(e){return e===r||e===o}(e)){if(i.push(e),0===s)s=1;else if(1===s)return s=2,!1}else 1===s&&i.push(e);return n.includes(e)}),uy(a)),i}function cI(e,t,n){const r=P(t),o=[];return lI(e,((e,t)=>{const n=r.indexOf(e);return-1!==n&&(o.push(t),r.splice(n,1)),!!r.length}),uy(n)),o}var dI=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function hI(e){const{isLeaf:t,expanded:n}=e;return t?I.createElement(RN,null):n?I.createElement(FN,null):I.createElement(zN,null)}function pI(e){let{treeData:t,children:n}=e;return t||cy(n)}const fI=(e,t)=>{var{defaultExpandAll:n,defaultExpandParent:r,defaultExpandedKeys:o}=e,a=dI(e,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const i=I.useRef(),s=I.useRef(),[l,u]=I.useState(a.selectedKeys||a.defaultSelectedKeys||[]),[c,d]=I.useState((()=>(()=>{const{keyEntities:e}=hy(pI(a));let t;return t=n?Object.keys(e):r?Ty(a.expandedKeys||o||[],e):a.expandedKeys||o||[],t})()));I.useEffect((()=>{"selectedKeys"in a&&u(a.selectedKeys)}),[a.selectedKeys]),I.useEffect((()=>{"expandedKeys"in a&&d(a.expandedKeys)}),[a.expandedKeys]);const{getPrefixCls:h,direction:p}=I.useContext(B),{prefixCls:f,className:m,showIcon:g=!0,expandAction:v="click"}=a,b=dI(a,["prefixCls","className","showIcon","expandAction"]),y=h("tree",f),w=F()(`${y}-directory`,{[`${y}-directory-rtl`]:"rtl"===p},m);return I.createElement(sI,Object.assign({icon:hI,ref:t,blockNode:!0},b,{showIcon:g,expandAction:v,prefixCls:y,className:w,expandedKeys:c,selectedKeys:l,onSelect:(e,t)=>{var n;const{multiple:r,fieldNames:o}=a,{node:l,nativeEvent:d}=t,{key:h=""}=l,p=pI(a),f=Object.assign(Object.assign({},t),{selected:!0}),m=(null===d||void 0===d?void 0:d.ctrlKey)||(null===d||void 0===d?void 0:d.metaKey),g=null===d||void 0===d?void 0:d.shiftKey;let v;r&&m?(v=e,i.current=h,s.current=v,f.selectedNodes=cI(p,v,o)):r&&g?(v=Array.from(new Set([].concat(P(s.current||[]),P(uI({treeData:p,expandedKeys:c,startKey:h,endKey:i.current,fieldNames:o}))))),f.selectedNodes=cI(p,v,o)):(v=[h],i.current=h,s.current=v,f.selectedNodes=cI(p,v,o)),null===(n=a.onSelect)||void 0===n||n.call(a,v,f),"selectedKeys"in a||u(v)},onExpand:(e,t)=>{var n;return"expandedKeys"in a||d(e),null===(n=a.onExpand)||void 0===n?void 0:n.call(a,e,t)}}))};const mI=I.forwardRef(fI),gI=sI;gI.DirectoryTree=mI,gI.TreeNode=wy;const vI=gI,bI=e=>{const{value:t,filterSearch:n,tablePrefixCls:r,locale:o,onChange:a}=e;return n?I.createElement("div",{className:`${r}-filter-dropdown-search`},I.createElement(Sh,{prefix:I.createElement(Jl,null),placeholder:o.filterSearchPlaceholder,onChange:a,value:t,htmlSize:1,className:`${r}-filter-dropdown-search-input`})):null},yI=e=>{const{keyCode:t}=e;t===vp.ENTER&&e.stopPropagation()},wI=I.forwardRef(((e,t)=>I.createElement("div",{className:e.className,onClick:e=>e.stopPropagation(),onKeyDown:yI,ref:t},e.children)));const xI=wI;function kI(e){let t=[];return(e||[]).forEach((e=>{let{value:n,children:r}=e;t.push(n),r&&(t=[].concat(P(t),P(kI(r))))})),t}function CI(e,t){return("string"===typeof t||"number"===typeof t)&&(null===t||void 0===t?void 0:t.toString().toLowerCase().includes(e.trim().toLowerCase()))}function SI(e){let{filters:t,prefixCls:n,filteredKeys:r,filterMultiple:o,searchValue:a,filterSearch:i}=e;return t.map(((e,t)=>{const s=String(e.value);if(e.children)return{key:s||t,label:e.text,popupClassName:`${n}-dropdown-submenu`,children:SI({filters:e.children,prefixCls:n,filteredKeys:r,filterMultiple:o,searchValue:a,filterSearch:i})};const l=o?Ky:gC,u={key:void 0!==e.value?s:t,label:I.createElement(I.Fragment,null,I.createElement(l,{checked:r.includes(s)}),I.createElement("span",null,e.text))};return a.trim()?"function"===typeof i?i(a,e)?u:null:CI(a,e.text)?u:null:u}))}function EI(e){return e||[]}const NI=e=>{var t,n;const{tablePrefixCls:r,prefixCls:o,column:a,dropdownPrefixCls:i,columnKey:s,filterOnClose:l,filterMultiple:u,filterMode:c="menu",filterSearch:d=!1,filterState:h,triggerFilter:p,locale:f,children:m,getPopupContainer:g,rootClassName:v}=e,{filterDropdownOpen:b,onFilterDropdownOpenChange:y,filterResetToDefaultFilteredValue:w,defaultFilteredValue:x,filterDropdownVisible:k,onFilterDropdownVisibleChange:C}=a,[S,E]=I.useState(!1),N=!(!h||!(null===(t=h.filteredKeys)||void 0===t?void 0:t.length)&&!h.forceFiltered),$=e=>{E(e),null===y||void 0===y||y(e),null===C||void 0===C||C(e)};const T=null!==(n=null!==b&&void 0!==b?b:k)&&void 0!==n?n:S,A=null===h||void 0===h?void 0:h.filteredKeys,[O,R]=function(e){const t=I.useRef(e),n=MC();return[()=>t.current,e=>{t.current=e,n()}]}(EI(A)),P=e=>{let{selectedKeys:t}=e;R(t)},D=(e,t)=>{let{node:n,checked:r}=t;P(u?{selectedKeys:e}:{selectedKeys:r&&n.key?[n.key]:[]})};I.useEffect((()=>{S&&P({selectedKeys:EI(A)})}),[A]);const[_,M]=I.useState([]),z=e=>{M(e)},[L,j]=I.useState(""),H=e=>{const{value:t}=e.target;j(t)};I.useEffect((()=>{S||j("")}),[S]);const V=e=>{const t=(null===e||void 0===e?void 0:e.length)?e:null;return null!==t||h&&h.filteredKeys?Kt(t,null===h||void 0===h?void 0:h.filteredKeys,!0)?null:void p({column:a,key:s,filteredKeys:t}):null},W=()=>{$(!1),V(O())},G=function(){let{confirm:e,closeDropdown:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{confirm:!1,closeDropdown:!1};e&&V([]),t&&$(!1),j(""),R(w?(x||[]).map((e=>String(e))):[])},U=function(){let{closeDropdown:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{closeDropdown:!0};e&&$(!1),V(O())},K=F()({[`${i}-menu-without-submenu`]:(q=a.filters||[],!q.some((e=>{let{children:t}=e;return t})))});var q;const X=e=>{if(e.target.checked){const e=kI(null===a||void 0===a?void 0:a.filters).map((e=>String(e)));R(e)}else R([])},J=e=>{let{filters:t}=e;return(t||[]).map(((e,t)=>{const n=String(e.value),r={title:e.text,key:void 0!==e.value?n:String(t)};return e.children&&(r.children=J({filters:e.children})),r}))},Y=e=>{var t;return Object.assign(Object.assign({},e),{text:e.title,value:e.key,children:(null===(t=e.children)||void 0===t?void 0:t.map((e=>Y(e))))||[]})};let Q;const{direction:Z,renderEmpty:ee}=I.useContext(B);if("function"===typeof a.filterDropdown)Q=a.filterDropdown({prefixCls:`${i}-custom`,setSelectedKeys:e=>P({selectedKeys:e}),selectedKeys:O(),confirm:U,clearFilters:G,filters:a.filters,visible:T,close:()=>{$(!1)}});else if(a.filterDropdown)Q=a.filterDropdown;else{const e=O()||[],t=()=>{var t;const n=null!==(t=null===ee||void 0===ee?void 0:ee("Table.filter"))&&void 0!==t?t:I.createElement(FC,{image:FC.PRESENTED_IMAGE_SIMPLE,description:f.filterEmptyText,imageStyle:{height:24},style:{margin:0,padding:"16px 0"}});if(0===(a.filters||[]).length)return n;if("tree"===c)return I.createElement(I.Fragment,null,I.createElement(bI,{filterSearch:d,value:L,onChange:H,tablePrefixCls:r,locale:f}),I.createElement("div",{className:`${r}-filter-dropdown-tree`},u?I.createElement(Ky,{checked:e.length===kI(a.filters).length,indeterminate:e.length>0&&e.length<kI(a.filters).length,className:`${r}-filter-dropdown-checkall`,onChange:X},f.filterCheckall):null,I.createElement(vI,{checkable:!0,selectable:!1,blockNode:!0,multiple:u,checkStrictly:!u,className:`${i}-menu`,onCheck:D,checkedKeys:e,selectedKeys:e,showIcon:!1,treeData:J({filters:a.filters}),autoExpandParent:!0,defaultExpandAll:!0,filterTreeNode:L.trim()?e=>"function"===typeof d?d(L,Y(e)):CI(L,e.title):void 0})));const s=SI({filters:a.filters||[],filterSearch:d,prefixCls:o,filteredKeys:O(),filterMultiple:u,searchValue:L}),l=s.every((e=>null===e));return I.createElement(I.Fragment,null,I.createElement(bI,{filterSearch:d,value:L,onChange:H,tablePrefixCls:r,locale:f}),l?n:I.createElement(Rk,{selectable:!0,multiple:u,prefixCls:`${i}-menu`,className:K,onSelect:P,onDeselect:P,selectedKeys:e,getPopupContainer:g,openKeys:_,onOpenChange:z,items:s}))},n=()=>w?Kt((x||[]).map((e=>String(e))),e,!0):0===e.length;Q=I.createElement(I.Fragment,null,t(),I.createElement("div",{className:`${o}-dropdown-btns`},I.createElement(Td,{type:"link",size:"small",disabled:n(),onClick:()=>G()},f.filterReset),I.createElement(Td,{type:"primary",size:"small",onClick:W},f.filterConfirm)))}a.filterDropdown&&(Q=I.createElement(tk,{selectable:void 0},Q));let te;return te="function"===typeof a.filterIcon?a.filterIcon(N):a.filterIcon?a.filterIcon:I.createElement(dN,null),I.createElement("div",{className:`${o}-column`},I.createElement("span",{className:`${r}-column-title`},m),I.createElement(Yk,{dropdownRender:()=>I.createElement(xI,{className:`${o}-dropdown`},Q),trigger:["click"],open:T,onOpenChange:(e,t)=>{"trigger"===t.source&&(e&&void 0!==A&&R(EI(A)),$(e),e||a.filterDropdown||!l||W())},getPopupContainer:g,placement:"rtl"===Z?"bottomLeft":"bottomRight",rootClassName:v},I.createElement("span",{role:"button",tabIndex:-1,className:F()(`${o}-trigger`,{active:N}),onClick:e=>{e.stopPropagation()}},te)))},II=(e,t,n)=>{let r=[];return(e||[]).forEach(((e,o)=>{var a;const i=sN(o,n);if(e.filters||"filterDropdown"in e||"onFilter"in e)if("filteredValue"in e){let t=e.filteredValue;"filterDropdown"in e||(t=null!==(a=null===t||void 0===t?void 0:t.map(String))&&void 0!==a?a:t),r.push({column:e,key:iN(e,i),filteredKeys:t,forceFiltered:e.filtered})}else r.push({column:e,key:iN(e,i),filteredKeys:t&&e.defaultFilteredValue?e.defaultFilteredValue:void 0,forceFiltered:e.filtered});"children"in e&&(r=[].concat(P(r),P(II(e.children,t,i))))})),r};function $I(e,t,n,r,o,a,i,s,l){return n.map(((n,u)=>{const c=sN(u,s),{filterOnClose:d=!0,filterMultiple:h=!0,filterMode:p,filterSearch:f}=n;let m=n;if(m.filters||m.filterDropdown){const s=iN(m,c),u=r.find((e=>{let{key:t}=e;return s===t}));m=Object.assign(Object.assign({},m),{title:r=>I.createElement(NI,{tablePrefixCls:e,prefixCls:`${e}-filter`,dropdownPrefixCls:t,column:m,columnKey:s,filterState:u,filterOnClose:d,filterMultiple:h,filterMode:p,filterSearch:f,triggerFilter:a,locale:o,getPopupContainer:i,rootClassName:l},lN(n.title,r))})}return"children"in m&&(m=Object.assign(Object.assign({},m),{children:$I(e,t,m.children,r,o,a,i,c,l)})),m}))}const TI=e=>{const t={};return e.forEach((e=>{let{key:n,filteredKeys:r,column:o}=e;const a=n,{filters:i,filterDropdown:s}=o;if(s)t[a]=r||null;else if(Array.isArray(r)){const e=kI(i);t[a]=e.filter((e=>r.includes(String(e))))}else t[a]=null})),t},AI=(e,t,n)=>{const r=t.reduce(((e,r)=>{const{column:{onFilter:o,filters:a},filteredKeys:i}=r;return o&&i&&i.length?e.map((e=>Object.assign({},e))).filter((e=>i.some((r=>{const i=kI(a),s=i.findIndex((e=>String(e)===String(r))),l=-1!==s?i[s]:r;return e[n]&&(e[n]=AI(e[n],t,n)),o(l,e)})))):e}),e);return r},OI=e=>e.flatMap((e=>"children"in e?[e].concat(P(OI(e.children||[]))):[e])),RI=e=>{const{prefixCls:t,dropdownPrefixCls:n,mergedColumns:r,onFilterChange:o,getPopupContainer:a,locale:i,rootClassName:s}=e,l=($h("Table"),I.useMemo((()=>OI(r||[])),[r])),[u,c]=I.useState((()=>II(l,!0))),d=I.useMemo((()=>{const e=II(l,!1);if(0===e.length)return e;let t=!0,n=!0;if(e.forEach((e=>{let{filteredKeys:r}=e;void 0!==r?t=!1:n=!1})),t){const e=(l||[]).map(((e,t)=>iN(e,sN(t))));return u.filter((t=>{let{key:n}=t;return e.includes(n)})).map((t=>{const n=l[e.findIndex((e=>e===t.key))];return Object.assign(Object.assign({},t),{column:Object.assign(Object.assign({},t.column),n),forceFiltered:n.filtered})}))}return e}),[l,u]),h=I.useMemo((()=>TI(d)),[d]),p=e=>{const t=d.filter((t=>{let{key:n}=t;return n!==e.key}));t.push(e),c(t),o(TI(t),t)};return[e=>$I(t,n,e,d,i,p,a,void 0,s),d,h]},PI=(e,t,n)=>{const r=I.useRef({});return[function(o){var a;if(!r.current||r.current.data!==e||r.current.childrenColumnName!==t||r.current.getRowKey!==n){const i=new Map;function s(e){e.forEach(((e,r)=>{const o=n(e,r);i.set(o,e),e&&"object"===typeof e&&t in e&&s(e[t]||[])}))}s(e),r.current={data:e,childrenColumnName:t,kvMap:i,getRowKey:n}}return null===(a=r.current.kvMap)||void 0===a?void 0:a.get(o)}]},DI=function(){const e=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let t=1;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];n&&Object.keys(n).forEach((t=>{const r=n[t];void 0!==r&&(e[t]=r)}))}return e};var FI=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const _I=10;const MI=function(e,t,n){const r=n&&"object"===typeof n?n:{},{total:o=0}=r,a=FI(r,["total"]),[i,s]=(0,I.useState)((()=>({current:"defaultCurrent"in a?a.defaultCurrent:1,pageSize:"defaultPageSize"in a?a.defaultPageSize:_I}))),l=DI(i,a,{total:o>0?o:e}),u=Math.ceil((o||e)/l.pageSize);l.current>u&&(l.current=u||1);const c=(e,t)=>{s({current:null!==e&&void 0!==e?e:1,pageSize:t||l.pageSize})};return!1===n?[{},()=>{}]:[Object.assign(Object.assign({},l),{onChange:(e,r)=>{var o;n&&(null===(o=n.onChange)||void 0===o||o.call(n,e,r)),c(e,r),t(e,r||(null===l||void 0===l?void 0:l.pageSize))}}),c]};const zI={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"};var LI=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:zI}))};const BI=I.forwardRef(LI);const jI={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"};var HI=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:jI}))};const VI=I.forwardRef(HI),WI="ascend",GI="descend",UI=e=>"object"===typeof e.sorter&&"number"===typeof e.sorter.multiple&&e.sorter.multiple,KI=e=>"function"===typeof e?e:!(!e||"object"!==typeof e||!e.compare)&&e.compare,qI=(e,t,n)=>{let r=[];const o=(e,t)=>{r.push({column:e,key:iN(e,t),multiplePriority:UI(e),sortOrder:e.sortOrder})};return(e||[]).forEach(((e,a)=>{const i=sN(a,n);e.children?("sortOrder"in e&&o(e,i),r=[].concat(P(r),P(qI(e.children,t,i)))):e.sorter&&("sortOrder"in e?o(e,i):t&&e.defaultSortOrder&&r.push({column:e,key:iN(e,i),multiplePriority:UI(e),sortOrder:e.defaultSortOrder}))})),r},XI=(e,t,n,r,o,a,i,s)=>{const l=(t||[]).map(((t,l)=>{const u=sN(l,s);let c=t;if(c.sorter){const s=c.sortDirections||o,l=void 0===c.showSorterTooltip?i:c.showSorterTooltip,d=iN(c,u),h=n.find((e=>{let{key:t}=e;return t===d})),p=h?h.sortOrder:null,f=((e,t)=>t?e[e.indexOf(t)+1]:e[0])(s,p);let m;if(t.sortIcon)m=t.sortIcon({sortOrder:p});else{const t=s.includes(WI)&&I.createElement(VI,{className:F()(`${e}-column-sorter-up`,{active:p===WI})}),n=s.includes(GI)&&I.createElement(BI,{className:F()(`${e}-column-sorter-down`,{active:p===GI})});m=I.createElement("span",{className:F()(`${e}-column-sorter`,{[`${e}-column-sorter-full`]:!(!t||!n)})},I.createElement("span",{className:`${e}-column-sorter-inner`,"aria-hidden":"true"},t,n))}const{cancelSort:g,triggerAsc:v,triggerDesc:b}=a||{};let y=g;f===GI?y=b:f===WI&&(y=v);const w="object"===typeof l?Object.assign({title:y},l):{title:y};c=Object.assign(Object.assign({},c),{className:F()(c.className,{[`${e}-column-sort`]:p}),title:n=>{const r=`${e}-column-sorters`,o=I.createElement("span",{className:`${e}-column-title`},lN(t.title,n)),a=I.createElement("div",{className:r},o,m);return l?"boolean"!==typeof l&&"sorter-icon"===(null===l||void 0===l?void 0:l.target)?I.createElement("div",{className:`${r} ${e}-column-sorters-tooltip-target-sorter`},o,I.createElement(og,Object.assign({},w),m)):I.createElement(og,Object.assign({},w),a):a},onHeaderCell:n=>{var o;const a=(null===(o=t.onHeaderCell)||void 0===o?void 0:o.call(t,n))||{},i=a.onClick,s=a.onKeyDown;a.onClick=e=>{r({column:t,key:d,sortOrder:f,multiplePriority:UI(t)}),null===i||void 0===i||i(e)},a.onKeyDown=e=>{e.keyCode===vp.ENTER&&(r({column:t,key:d,sortOrder:f,multiplePriority:UI(t)}),null===s||void 0===s||s(e))};const l=((e,t)=>{const n=lN(e,t);return"[object Object]"===Object.prototype.toString.call(n)?"":n})(t.title,{}),u=null===l||void 0===l?void 0:l.toString();return p?a["aria-sort"]="ascend"===p?"ascending":"descending":a["aria-label"]=u||"",a.className=F()(a.className,`${e}-column-has-sorters`),a.tabIndex=0,t.ellipsis&&(a.title=(null!==l&&void 0!==l?l:"").toString()),a}})}return"children"in c&&(c=Object.assign(Object.assign({},c),{children:XI(e,c.children,n,r,o,a,i,u)})),c}));return l},JI=e=>{const{column:t,sortOrder:n}=e;return{column:t,order:n,field:t.dataIndex,columnKey:t.key}},YI=e=>{const t=e.filter((e=>{let{sortOrder:t}=e;return t})).map(JI);if(0===t.length&&e.length){const t=e.length-1;return Object.assign(Object.assign({},JI(e[t])),{column:void 0,order:void 0,field:void 0,columnKey:void 0})}return t.length<=1?t[0]||{}:t},QI=(e,t,n)=>{const r=t.slice().sort(((e,t)=>t.multiplePriority-e.multiplePriority)),o=e.slice(),a=r.filter((e=>{let{column:{sorter:t},sortOrder:n}=e;return KI(t)&&n}));return a.length?o.sort(((e,t)=>{for(let n=0;n<a.length;n+=1){const r=a[n],{column:{sorter:o},sortOrder:i}=r,s=KI(o);if(s&&i){const n=s(e,t,i);if(0!==n)return i===WI?n:-n}}return 0})).map((e=>{const r=e[n];return r?Object.assign(Object.assign({},e),{[n]:QI(r,t,n)}):e})):o},ZI=e=>{const{prefixCls:t,mergedColumns:n,sortDirections:r,tableLocale:o,showSorterTooltip:a,onSorterChange:i}=e,[s,l]=I.useState(qI(n,!0)),u=(e,t)=>{const n=[];return e.forEach(((e,r)=>{const o=sN(r,t);if(n.push(iN(e,o)),Array.isArray(e.children)){const t=u(e.children,o);n.push.apply(n,P(t))}})),n},c=I.useMemo((()=>{let e=!0;const t=qI(n,!1);if(!t.length){const e=u(n);return s.filter((t=>{let{key:n}=t;return e.includes(n)}))}const r=[];function o(t){e?r.push(t):r.push(Object.assign(Object.assign({},t),{sortOrder:null}))}let a=null;return t.forEach((t=>{null===a?(o(t),t.sortOrder&&(!1===t.multiplePriority?e=!1:a=!0)):(a&&!1!==t.multiplePriority||(e=!1),o(t))})),r}),[n,s]),d=I.useMemo((()=>{var e,t;const n=c.map((e=>{let{column:t,sortOrder:n}=e;return{column:t,order:n}}));return{sortColumns:n,sortColumn:null===(e=n[0])||void 0===e?void 0:e.column,sortOrder:null===(t=n[0])||void 0===t?void 0:t.order}}),[c]),h=e=>{let t;t=!1!==e.multiplePriority&&c.length&&!1!==c[0].multiplePriority?[].concat(P(c.filter((t=>{let{key:n}=t;return n!==e.key}))),[e]):[e],l(t),i(YI(t),t)};return[e=>XI(t,e,c,h,r,o,a),c,d,()=>YI(c)]},e$=(e,t)=>{const n=e.map((e=>{const n=Object.assign({},e);return n.title=lN(e.title,t),"children"in n&&(n.children=e$(n.children,t)),n}));return n},t$=e=>[I.useCallback((t=>e$(t,e)),[e])],n$=vb(((e,t)=>{const{_renderTimes:n}=e,{_renderTimes:r}=t;return n!==r})),r$=n$,o$=Jb(((e,t)=>{const{_renderTimes:n}=e,{_renderTimes:r}=t;return n!==r})),a$=o$,i$=e=>{const{componentCls:t,lineWidth:n,lineType:r,tableBorderColor:o,tableHeaderBg:a,tablePaddingVertical:i,tablePaddingHorizontal:s,calc:l}=e,u=`${yn(n)} ${r} ${o}`,c=(e,r,o)=>({[`&${t}-${e}`]:{[`> ${t}-container`]:{[`> ${t}-content, > ${t}-body`]:{"\n            > table > tbody > tr > th,\n            > table > tbody > tr > td\n          ":{[`> ${t}-expanded-row-fixed`]:{margin:`${yn(l(r).mul(-1).equal())}\n              ${yn(l(l(o).add(n)).mul(-1).equal())}`}}}}}});return{[`${t}-wrapper`]:{[`${t}${t}-bordered`]:Object.assign(Object.assign(Object.assign({[`> ${t}-title`]:{border:u,borderBottom:0},[`> ${t}-container`]:{borderInlineStart:u,borderTop:u,[`\n            > ${t}-content,\n            > ${t}-header,\n            > ${t}-body,\n            > ${t}-summary\n          `]:{"> table":{"\n                > thead > tr > th,\n                > thead > tr > td,\n                > tbody > tr > th,\n                > tbody > tr > td,\n                > tfoot > tr > th,\n                > tfoot > tr > td\n              ":{borderInlineEnd:u},"> thead":{"> tr:not(:last-child) > th":{borderBottom:u},"> tr > th::before":{backgroundColor:"transparent !important"}},"\n                > thead > tr,\n                > tbody > tr,\n                > tfoot > tr\n              ":{[`> ${t}-cell-fix-right-first::after`]:{borderInlineEnd:u}},"\n                > tbody > tr > th,\n                > tbody > tr > td\n              ":{[`> ${t}-expanded-row-fixed`]:{margin:`${yn(l(i).mul(-1).equal())} ${yn(l(l(s).add(n)).mul(-1).equal())}`,"&::after":{position:"absolute",top:0,insetInlineEnd:n,bottom:0,borderInlineEnd:u,content:'""'}}}}}},[`&${t}-scroll-horizontal`]:{[`> ${t}-container > ${t}-body`]:{"> table > tbody":{[`\n                > tr${t}-expanded-row,\n                > tr${t}-placeholder\n              `]:{"> th, > td":{borderInlineEnd:0}}}}}},c("middle",e.tablePaddingVerticalMiddle,e.tablePaddingHorizontalMiddle)),c("small",e.tablePaddingVerticalSmall,e.tablePaddingHorizontalSmall)),{[`> ${t}-footer`]:{border:u,borderTop:0}}),[`${t}-cell`]:{[`${t}-container:first-child`]:{borderTop:0},"&-scrollbar:not([rowspan])":{boxShadow:`0 ${yn(n)} 0 ${yn(n)} ${a}`}},[`${t}-bordered ${t}-cell-scrollbar`]:{borderInlineEnd:u}}}},s$=e=>{const{componentCls:t}=e;return{[`${t}-wrapper`]:{[`${t}-cell-ellipsis`]:Object.assign(Object.assign({},Fo),{wordBreak:"keep-all",[`\n          &${t}-cell-fix-left-last,\n          &${t}-cell-fix-right-first\n        `]:{overflow:"visible",[`${t}-cell-content`]:{display:"block",overflow:"hidden",textOverflow:"ellipsis"}},[`${t}-column-title`]:{overflow:"hidden",textOverflow:"ellipsis",wordBreak:"keep-all"}})}}},l$=e=>{const{componentCls:t}=e;return{[`${t}-wrapper`]:{[`${t}-tbody > tr${t}-placeholder`]:{textAlign:"center",color:e.colorTextDisabled,"\n          &:hover > th,\n          &:hover > td,\n        ":{background:e.colorBgContainer}}}}},u$=e=>{const{componentCls:t,antCls:n,motionDurationSlow:r,lineWidth:o,paddingXS:a,lineType:i,tableBorderColor:s,tableExpandIconBg:l,tableExpandColumnWidth:u,borderRadius:c,tablePaddingVertical:d,tablePaddingHorizontal:h,tableExpandedRowBg:p,paddingXXS:f,expandIconMarginTop:m,expandIconSize:g,expandIconHalfInner:v,expandIconScale:b,calc:y}=e,w=`${yn(o)} ${i} ${s}`,x=y(f).sub(o).equal();return{[`${t}-wrapper`]:{[`${t}-expand-icon-col`]:{width:u},[`${t}-row-expand-icon-cell`]:{textAlign:"center",[`${t}-row-expand-icon`]:{display:"inline-flex",float:"none",verticalAlign:"sub"}},[`${t}-row-indent`]:{height:1,float:"left"},[`${t}-row-expand-icon`]:Object.assign(Object.assign({},Bo(e)),{position:"relative",float:"left",width:g,height:g,color:"inherit",lineHeight:yn(g),background:l,border:w,borderRadius:c,transform:`scale(${b})`,"&:focus, &:hover, &:active":{borderColor:"currentcolor"},"&::before, &::after":{position:"absolute",background:"currentcolor",transition:`transform ${r} ease-out`,content:'""'},"&::before":{top:v,insetInlineEnd:x,insetInlineStart:x,height:o},"&::after":{top:x,bottom:x,insetInlineStart:v,width:o,transform:"rotate(90deg)"},"&-collapsed::before":{transform:"rotate(-180deg)"},"&-collapsed::after":{transform:"rotate(0deg)"},"&-spaced":{"&::before, &::after":{display:"none",content:"none"},background:"transparent",border:0,visibility:"hidden"}}),[`${t}-row-indent + ${t}-row-expand-icon`]:{marginTop:m,marginInlineEnd:a},[`tr${t}-expanded-row`]:{"&, &:hover":{"> th, > td":{background:p}},[`${n}-descriptions-view`]:{display:"flex",table:{flex:"auto",width:"100%"}}},[`${t}-expanded-row-fixed`]:{position:"relative",margin:`${yn(y(d).mul(-1).equal())} ${yn(y(h).mul(-1).equal())}`,padding:`${yn(d)} ${yn(h)}`}}}},c$=e=>{const{componentCls:t,antCls:n,iconCls:r,tableFilterDropdownWidth:o,tableFilterDropdownSearchWidth:a,paddingXXS:i,paddingXS:s,colorText:l,lineWidth:u,lineType:c,tableBorderColor:d,headerIconColor:h,fontSizeSM:p,tablePaddingHorizontal:f,borderRadius:m,motionDurationSlow:g,colorTextDescription:v,colorPrimary:b,tableHeaderFilterActiveBg:y,colorTextDisabled:w,tableFilterDropdownBg:x,tableFilterDropdownHeight:k,controlItemBgHover:C,controlItemBgActive:S,boxShadowSecondary:E,filterDropdownMenuBg:N,calc:I}=e,$=`${n}-dropdown`,T=`${t}-filter-dropdown`,A=`${n}-tree`,O=`${yn(u)} ${c} ${d}`;return[{[`${t}-wrapper`]:{[`${t}-filter-column`]:{display:"flex",justifyContent:"space-between"},[`${t}-filter-trigger`]:{position:"relative",display:"flex",alignItems:"center",marginBlock:I(i).mul(-1).equal(),marginInline:`${yn(i)} ${yn(I(f).div(2).mul(-1).equal())}`,padding:`0 ${yn(i)}`,color:h,fontSize:p,borderRadius:m,cursor:"pointer",transition:`all ${g}`,"&:hover":{color:v,background:y},"&.active":{color:b}}}},{[`${n}-dropdown`]:{[T]:Object.assign(Object.assign({},_o(e)),{minWidth:o,backgroundColor:x,borderRadius:m,boxShadow:E,overflow:"hidden",[`${$}-menu`]:{maxHeight:k,overflowX:"hidden",border:0,boxShadow:"none",borderRadius:"unset",backgroundColor:N,"&:empty::after":{display:"block",padding:`${yn(s)} 0`,color:w,fontSize:p,textAlign:"center",content:'"Not Found"'}},[`${T}-tree`]:{paddingBlock:`${yn(s)} 0`,paddingInline:s,[A]:{padding:0},[`${A}-treenode ${A}-node-content-wrapper:hover`]:{backgroundColor:C},[`${A}-treenode-checkbox-checked ${A}-node-content-wrapper`]:{"&, &:hover":{backgroundColor:S}}},[`${T}-search`]:{padding:s,borderBottom:O,"&-input":{input:{minWidth:a},[r]:{color:w}}},[`${T}-checkall`]:{width:"100%",marginBottom:i,marginInlineStart:i},[`${T}-btns`]:{display:"flex",justifyContent:"space-between",padding:`${yn(I(s).sub(u).equal())} ${yn(s)}`,overflow:"hidden",borderTop:O}})}},{[`${n}-dropdown ${T}, ${T}-submenu`]:{[`${n}-checkbox-wrapper + span`]:{paddingInlineStart:s,color:l},"> ul":{maxHeight:"calc(100vh - 130px)",overflowX:"hidden",overflowY:"auto"}}}]},d$=e=>{const{componentCls:t,lineWidth:n,colorSplit:r,motionDurationSlow:o,zIndexTableFixed:a,tableBg:i,zIndexTableSticky:s,calc:l}=e,u=r;return{[`${t}-wrapper`]:{[`\n        ${t}-cell-fix-left,\n        ${t}-cell-fix-right\n      `]:{position:"sticky !important",zIndex:a,background:i},[`\n        ${t}-cell-fix-left-first::after,\n        ${t}-cell-fix-left-last::after\n      `]:{position:"absolute",top:0,right:{_skip_check_:!0,value:0},bottom:l(n).mul(-1).equal(),width:30,transform:"translateX(100%)",transition:`box-shadow ${o}`,content:'""',pointerEvents:"none"},[`${t}-cell-fix-left-all::after`]:{display:"none"},[`\n        ${t}-cell-fix-right-first::after,\n        ${t}-cell-fix-right-last::after\n      `]:{position:"absolute",top:0,bottom:l(n).mul(-1).equal(),left:{_skip_check_:!0,value:0},width:30,transform:"translateX(-100%)",transition:`box-shadow ${o}`,content:'""',pointerEvents:"none"},[`${t}-container`]:{position:"relative","&::before, &::after":{position:"absolute",top:0,bottom:0,zIndex:l(s).add(1).equal({unit:!1}),width:30,transition:`box-shadow ${o}`,content:'""',pointerEvents:"none"},"&::before":{insetInlineStart:0},"&::after":{insetInlineEnd:0}},[`${t}-ping-left`]:{[`&:not(${t}-has-fix-left) ${t}-container::before`]:{boxShadow:`inset 10px 0 8px -8px ${u}`},[`\n          ${t}-cell-fix-left-first::after,\n          ${t}-cell-fix-left-last::after\n        `]:{boxShadow:`inset 10px 0 8px -8px ${u}`},[`${t}-cell-fix-left-last::before`]:{backgroundColor:"transparent !important"}},[`${t}-ping-right`]:{[`&:not(${t}-has-fix-right) ${t}-container::after`]:{boxShadow:`inset -10px 0 8px -8px ${u}`},[`\n          ${t}-cell-fix-right-first::after,\n          ${t}-cell-fix-right-last::after\n        `]:{boxShadow:`inset -10px 0 8px -8px ${u}`}},[`${t}-fixed-column-gapped`]:{[`\n        ${t}-cell-fix-left-first::after,\n        ${t}-cell-fix-left-last::after,\n        ${t}-cell-fix-right-first::after,\n        ${t}-cell-fix-right-last::after\n      `]:{boxShadow:"none"}}}}},h$=e=>{const{componentCls:t,antCls:n,margin:r}=e;return{[`${t}-wrapper`]:{[`${t}-pagination${n}-pagination`]:{margin:`${yn(r)} 0`},[`${t}-pagination`]:{display:"flex",flexWrap:"wrap",rowGap:e.paddingXS,"> *":{flex:"none"},"&-left":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-right":{justifyContent:"flex-end"}}}}},p$=e=>{const{componentCls:t,tableRadius:n}=e;return{[`${t}-wrapper`]:{[t]:{[`${t}-title, ${t}-header`]:{borderRadius:`${yn(n)} ${yn(n)} 0 0`},[`${t}-title + ${t}-container`]:{borderStartStartRadius:0,borderStartEndRadius:0,[`${t}-header, table`]:{borderRadius:0},"table > thead > tr:first-child":{"th:first-child, th:last-child, td:first-child, td:last-child":{borderRadius:0}}},"&-container":{borderStartStartRadius:n,borderStartEndRadius:n,"table > thead > tr:first-child":{"> *:first-child":{borderStartStartRadius:n},"> *:last-child":{borderStartEndRadius:n}}},"&-footer":{borderRadius:`0 0 ${yn(n)} ${yn(n)}`}}}}},f$=e=>{const{componentCls:t}=e;return{[`${t}-wrapper-rtl`]:{direction:"rtl",table:{direction:"rtl"},[`${t}-pagination-left`]:{justifyContent:"flex-end"},[`${t}-pagination-right`]:{justifyContent:"flex-start"},[`${t}-row-expand-icon`]:{float:"right","&::after":{transform:"rotate(-90deg)"},"&-collapsed::before":{transform:"rotate(180deg)"},"&-collapsed::after":{transform:"rotate(0deg)"}},[`${t}-container`]:{"&::before":{insetInlineStart:"unset",insetInlineEnd:0},"&::after":{insetInlineStart:0,insetInlineEnd:"unset"},[`${t}-row-indent`]:{float:"right"}}}}},m$=e=>{const{componentCls:t,antCls:n,iconCls:r,fontSizeIcon:o,padding:a,paddingXS:i,headerIconColor:s,headerIconHoverColor:l,tableSelectionColumnWidth:u,tableSelectedRowBg:c,tableSelectedRowHoverBg:d,tableRowHoverBg:h,tablePaddingHorizontal:p,calc:f}=e;return{[`${t}-wrapper`]:{[`${t}-selection-col`]:{width:u,[`&${t}-selection-col-with-dropdown`]:{width:f(u).add(o).add(f(a).div(4)).equal()}},[`${t}-bordered ${t}-selection-col`]:{width:f(u).add(f(i).mul(2)).equal(),[`&${t}-selection-col-with-dropdown`]:{width:f(u).add(o).add(f(a).div(4)).add(f(i).mul(2)).equal()}},[`\n        table tr th${t}-selection-column,\n        table tr td${t}-selection-column,\n        ${t}-selection-column\n      `]:{paddingInlineEnd:e.paddingXS,paddingInlineStart:e.paddingXS,textAlign:"center",[`${n}-radio-wrapper`]:{marginInlineEnd:0}},[`table tr th${t}-selection-column${t}-cell-fix-left`]:{zIndex:f(e.zIndexTableFixed).add(1).equal({unit:!1})},[`table tr th${t}-selection-column::after`]:{backgroundColor:"transparent !important"},[`${t}-selection`]:{position:"relative",display:"inline-flex",flexDirection:"column"},[`${t}-selection-extra`]:{position:"absolute",top:0,zIndex:1,cursor:"pointer",transition:`all ${e.motionDurationSlow}`,marginInlineStart:"100%",paddingInlineStart:yn(f(p).div(4).equal()),[r]:{color:s,fontSize:o,verticalAlign:"baseline","&:hover":{color:l}}},[`${t}-tbody`]:{[`${t}-row`]:{[`&${t}-row-selected`]:{[`> ${t}-cell`]:{background:c,"&-row-hover":{background:d}}},[`> ${t}-cell-row-hover`]:{background:h}}}}}},g$=e=>{const{componentCls:t,tableExpandColumnWidth:n,calc:r}=e,o=(e,o,a,i)=>({[`${t}${t}-${e}`]:{fontSize:i,[`\n        ${t}-title,\n        ${t}-footer,\n        ${t}-cell,\n        ${t}-thead > tr > th,\n        ${t}-tbody > tr > th,\n        ${t}-tbody > tr > td,\n        tfoot > tr > th,\n        tfoot > tr > td\n      `]:{padding:`${yn(o)} ${yn(a)}`},[`${t}-filter-trigger`]:{marginInlineEnd:yn(r(a).div(2).mul(-1).equal())},[`${t}-expanded-row-fixed`]:{margin:`${yn(r(o).mul(-1).equal())} ${yn(r(a).mul(-1).equal())}`},[`${t}-tbody`]:{[`${t}-wrapper:only-child ${t}`]:{marginBlock:yn(r(o).mul(-1).equal()),marginInline:`${yn(r(n).sub(a).equal())} ${yn(r(a).mul(-1).equal())}`}},[`${t}-selection-extra`]:{paddingInlineStart:yn(r(a).div(4).equal())}}});return{[`${t}-wrapper`]:Object.assign(Object.assign({},o("middle",e.tablePaddingVerticalMiddle,e.tablePaddingHorizontalMiddle,e.tableFontSizeMiddle)),o("small",e.tablePaddingVerticalSmall,e.tablePaddingHorizontalSmall,e.tableFontSizeSmall))}},v$=e=>{const{componentCls:t,marginXXS:n,fontSizeIcon:r,headerIconColor:o,headerIconHoverColor:a}=e;return{[`${t}-wrapper`]:{[`${t}-thead th${t}-column-has-sorters`]:{outline:"none",cursor:"pointer",transition:`all ${e.motionDurationSlow}, left 0s`,"&:hover":{background:e.tableHeaderSortHoverBg,"&::before":{backgroundColor:"transparent !important"}},"&:focus-visible":{color:e.colorPrimary},[`\n          &${t}-cell-fix-left:hover,\n          &${t}-cell-fix-right:hover\n        `]:{background:e.tableFixedHeaderSortActiveBg}},[`${t}-thead th${t}-column-sort`]:{background:e.tableHeaderSortBg,"&::before":{backgroundColor:"transparent !important"}},[`td${t}-column-sort`]:{background:e.tableBodySortBg},[`${t}-column-title`]:{position:"relative",zIndex:1,flex:1},[`${t}-column-sorters`]:{display:"flex",flex:"auto",alignItems:"center",justifyContent:"space-between","&::after":{position:"absolute",inset:0,width:"100%",height:"100%",content:'""'}},[`${t}-column-sorters-tooltip-target-sorter`]:{"&::after":{content:"none"}},[`${t}-column-sorter`]:{marginInlineStart:n,color:o,fontSize:0,transition:`color ${e.motionDurationSlow}`,"&-inner":{display:"inline-flex",flexDirection:"column",alignItems:"center"},"&-up, &-down":{fontSize:r,"&.active":{color:e.colorPrimary}},[`${t}-column-sorter-up + ${t}-column-sorter-down`]:{marginTop:"-0.3em"}},[`${t}-column-sorters:hover ${t}-column-sorter`]:{color:a}}}},b$=e=>{const{componentCls:t,opacityLoading:n,tableScrollThumbBg:r,tableScrollThumbBgHover:o,tableScrollThumbSize:a,tableScrollBg:i,zIndexTableSticky:s,stickyScrollBarBorderRadius:l,lineWidth:u,lineType:c,tableBorderColor:d}=e,h=`${yn(u)} ${c} ${d}`;return{[`${t}-wrapper`]:{[`${t}-sticky`]:{"&-holder":{position:"sticky",zIndex:s,background:e.colorBgContainer},"&-scroll":{position:"sticky",bottom:0,height:`${yn(a)} !important`,zIndex:s,display:"flex",alignItems:"center",background:i,borderTop:h,opacity:n,"&:hover":{transformOrigin:"center bottom"},"&-bar":{height:a,backgroundColor:r,borderRadius:l,transition:`all ${e.motionDurationSlow}, transform none`,position:"absolute",bottom:0,"&:hover, &-active":{backgroundColor:o}}}}}}},y$=e=>{const{componentCls:t,lineWidth:n,tableBorderColor:r,calc:o}=e,a=`${yn(n)} ${e.lineType} ${r}`;return{[`${t}-wrapper`]:{[`${t}-summary`]:{position:"relative",zIndex:e.zIndexTableFixed,background:e.tableBg,"> tr":{"> th, > td":{borderBottom:a}}},[`div${t}-summary`]:{boxShadow:`0 ${yn(o(n).mul(-1).equal())} 0 ${r}`}}}},w$=e=>{const{componentCls:t,motionDurationMid:n,lineWidth:r,lineType:o,tableBorderColor:a,calc:i}=e,s=`${yn(r)} ${o} ${a}`,l=`${t}-expanded-row-cell`;return{[`${t}-wrapper`]:{[`${t}-tbody-virtual`]:{[`${t}-tbody-virtual-holder-inner`]:{[`\n            & > ${t}-row, \n            & > div:not(${t}-row) > ${t}-row\n          `]:{display:"flex",boxSizing:"border-box",width:"100%"}},[`${t}-cell`]:{borderBottom:s,transition:`background ${n}`},[`${t}-expanded-row`]:{[`${l}${l}-fixed`]:{position:"sticky",insetInlineStart:0,overflow:"hidden",width:`calc(var(--virtual-width) - ${yn(r)})`,borderInlineEnd:"none"}}},[`${t}-bordered`]:{[`${t}-tbody-virtual`]:{"&:after":{content:'""',insetInline:0,bottom:0,borderBottom:s,position:"absolute"},[`${t}-cell`]:{borderInlineEnd:s,[`&${t}-cell-fix-right-first:before`]:{content:'""',position:"absolute",insetBlock:0,insetInlineStart:i(r).mul(-1).equal(),borderInlineStart:s}}},[`&${t}-virtual`]:{[`${t}-placeholder ${t}-cell`]:{borderInlineEnd:s,borderBottom:s}}}}}},x$=e=>{const{componentCls:t,fontWeightStrong:n,tablePaddingVertical:r,tablePaddingHorizontal:o,tableExpandColumnWidth:a,lineWidth:i,lineType:s,tableBorderColor:l,tableFontSize:u,tableBg:c,tableRadius:d,tableHeaderTextColor:h,motionDurationMid:p,tableHeaderBg:f,tableHeaderCellSplitColor:m,tableFooterTextColor:g,tableFooterBg:v,calc:b}=e,y=`${yn(i)} ${s} ${l}`;return{[`${t}-wrapper`]:Object.assign(Object.assign({clear:"both",maxWidth:"100%"},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),{[t]:Object.assign(Object.assign({},_o(e)),{fontSize:u,background:c,borderRadius:`${yn(d)} ${yn(d)} 0 0`,scrollbarColor:`${e.tableScrollThumbBg} ${e.tableScrollBg}`}),table:{width:"100%",textAlign:"start",borderRadius:`${yn(d)} ${yn(d)} 0 0`,borderCollapse:"separate",borderSpacing:0},[`\n          ${t}-cell,\n          ${t}-thead > tr > th,\n          ${t}-tbody > tr > th,\n          ${t}-tbody > tr > td,\n          tfoot > tr > th,\n          tfoot > tr > td\n        `]:{position:"relative",padding:`${yn(r)} ${yn(o)}`,overflowWrap:"break-word"},[`${t}-title`]:{padding:`${yn(r)} ${yn(o)}`},[`${t}-thead`]:{"\n          > tr > th,\n          > tr > td\n        ":{position:"relative",color:h,fontWeight:n,textAlign:"start",background:f,borderBottom:y,transition:`background ${p} ease`,"&[colspan]:not([colspan='1'])":{textAlign:"center"},[`&:not(:last-child):not(${t}-selection-column):not(${t}-row-expand-icon-cell):not([colspan])::before`]:{position:"absolute",top:"50%",insetInlineEnd:0,width:1,height:"1.6em",backgroundColor:m,transform:"translateY(-50%)",transition:`background-color ${p}`,content:'""'}},"> tr:not(:last-child) > th[colspan]":{borderBottom:0}},[`${t}-tbody`]:{"> tr":{"> th, > td":{transition:`background ${p}, border-color ${p}`,borderBottom:y,[`\n              > ${t}-wrapper:only-child,\n              > ${t}-expanded-row-fixed > ${t}-wrapper:only-child\n            `]:{[t]:{marginBlock:yn(b(r).mul(-1).equal()),marginInline:`${yn(b(a).sub(o).equal())}\n                ${yn(b(o).mul(-1).equal())}`,[`${t}-tbody > tr:last-child > td`]:{borderBottom:0,"&:first-child, &:last-child":{borderRadius:0}}}}},"> th":{position:"relative",color:h,fontWeight:n,textAlign:"start",background:f,borderBottom:y,transition:`background ${p} ease`}}},[`${t}-footer`]:{padding:`${yn(r)} ${yn(o)}`,color:g,background:v}})}},k$=ha("Table",(e=>{const{colorTextHeading:t,colorSplit:n,colorBgContainer:r,controlInteractiveSize:o,headerBg:a,headerColor:i,headerSortActiveBg:s,headerSortHoverBg:l,bodySortBg:u,rowHoverBg:c,rowSelectedBg:d,rowSelectedHoverBg:h,rowExpandedBg:p,cellPaddingBlock:f,cellPaddingInline:m,cellPaddingBlockMD:g,cellPaddingInlineMD:v,cellPaddingBlockSM:b,cellPaddingInlineSM:y,borderColor:w,footerBg:x,footerColor:k,headerBorderRadius:C,cellFontSize:S,cellFontSizeMD:E,cellFontSizeSM:N,headerSplitColor:I,fixedHeaderSortActiveBg:$,headerFilterHoverBg:T,filterDropdownBg:A,expandIconBg:O,selectionColumnWidth:R,stickyScrollBarBg:P,calc:D}=e,F=So(e,{tableFontSize:S,tableBg:r,tableRadius:C,tablePaddingVertical:f,tablePaddingHorizontal:m,tablePaddingVerticalMiddle:g,tablePaddingHorizontalMiddle:v,tablePaddingVerticalSmall:b,tablePaddingHorizontalSmall:y,tableBorderColor:w,tableHeaderTextColor:i,tableHeaderBg:a,tableFooterTextColor:k,tableFooterBg:x,tableHeaderCellSplitColor:I,tableHeaderSortBg:s,tableHeaderSortHoverBg:l,tableBodySortBg:u,tableFixedHeaderSortActiveBg:$,tableHeaderFilterActiveBg:T,tableFilterDropdownBg:A,tableRowHoverBg:c,tableSelectedRowBg:d,tableSelectedRowHoverBg:h,zIndexTableFixed:2,zIndexTableSticky:D(2).add(1).equal({unit:!1}),tableFontSizeMiddle:E,tableFontSizeSmall:N,tableSelectionColumnWidth:R,tableExpandIconBg:O,tableExpandColumnWidth:D(o).add(D(e.padding).mul(2)).equal(),tableExpandedRowBg:p,tableFilterDropdownWidth:120,tableFilterDropdownHeight:264,tableFilterDropdownSearchWidth:140,tableScrollThumbSize:8,tableScrollThumbBg:P,tableScrollThumbBgHover:t,tableScrollBg:n});return[x$(F),h$(F),y$(F),v$(F),c$(F),i$(F),p$(F),u$(F),y$(F),l$(F),m$(F),d$(F),b$(F),s$(F),g$(F),f$(F),w$(F)]}),(e=>{const{colorFillAlter:t,colorBgContainer:n,colorTextHeading:r,colorFillSecondary:o,colorFillContent:a,controlItemBgActive:i,controlItemBgActiveHover:s,padding:l,paddingSM:u,paddingXS:c,colorBorderSecondary:d,borderRadiusLG:h,controlHeight:p,colorTextPlaceholder:f,fontSize:m,fontSizeSM:g,lineHeight:v,lineWidth:b,colorIcon:y,colorIconHover:w,opacityLoading:x,controlInteractiveSize:k}=e,C=new Vo(o).onBackground(n).toHexShortString(),S=new Vo(a).onBackground(n).toHexShortString(),E=new Vo(t).onBackground(n).toHexShortString(),N=new Vo(y),I=new Vo(w),$=k/2-b,T=2*$+3*b;return{headerBg:E,headerColor:r,headerSortActiveBg:C,headerSortHoverBg:S,bodySortBg:E,rowHoverBg:E,rowSelectedBg:i,rowSelectedHoverBg:s,rowExpandedBg:t,cellPaddingBlock:l,cellPaddingInline:l,cellPaddingBlockMD:u,cellPaddingInlineMD:c,cellPaddingBlockSM:c,cellPaddingInlineSM:c,borderColor:d,headerBorderRadius:h,footerBg:E,footerColor:r,cellFontSize:m,cellFontSizeMD:m,cellFontSizeSM:m,headerSplitColor:d,fixedHeaderSortActiveBg:C,headerFilterHoverBg:a,filterDropdownMenuBg:n,filterDropdownBg:n,expandIconBg:n,selectionColumnWidth:p,stickyScrollBarBg:f,stickyScrollBarBorderRadius:100,expandIconMarginTop:(m*v-3*b)/2-Math.ceil((1.4*g-3*b)/2),headerIconColor:N.clone().setAlpha(N.getAlpha()*x).toRgbString(),headerIconHoverColor:I.clone().setAlpha(I.getAlpha()*x).toRgbString(),expandIconHalfInner:$,expandIconSize:T,expandIconScale:k/T}}),{unitless:{expandIconScale:!0}}),C$=[],S$=(e,t)=>{var n,r;const{prefixCls:o,className:a,rootClassName:i,style:s,size:l,bordered:u,dropdownPrefixCls:c,dataSource:d,pagination:h,rowSelection:p,rowKey:f="key",rowClassName:m,columns:g,children:v,childrenColumnName:b,onChange:y,getPopupContainer:w,loading:x,expandIcon:k,expandable:C,expandedRowRender:S,expandIconColumnIndex:E,indentSize:N,scroll:$,sortDirections:T,locale:A,showSorterTooltip:O={target:"full-header"},virtual:R}=e;$h("Table");const P=I.useMemo((()=>g||Xv(v)),[g,v]),D=I.useMemo((()=>P.some((e=>e.responsive))),[P]),M=BC(D),z=I.useMemo((()=>{const e=new Set(Object.keys(M).filter((e=>M[e])));return P.filter((t=>!t.responsive||t.responsive.some((t=>e.has(t)))))}),[P,M]),L=_(e,["className","style","columns"]),{locale:j=Fh,direction:H,table:V,renderEmpty:W,getPrefixCls:G,getPopupContainer:U}=I.useContext(B),K=Gs(l),q=Object.assign(Object.assign({},j.Table),A),X=d||C$,J=G("table",o),Y=G("dropdown",c),[,Q]=ca(),Z=hl(J),[ee,te,ne]=k$(J,Z),re=Object.assign(Object.assign({childrenColumnName:b,expandIconColumnIndex:E},C),{expandIcon:null!==(n=null===C||void 0===C?void 0:C.expandIcon)&&void 0!==n?n:null===(r=null===V||void 0===V?void 0:V.expandable)||void 0===r?void 0:r.expandIcon}),{childrenColumnName:oe="children"}=re,ae=I.useMemo((()=>X.some((e=>null===e||void 0===e?void 0:e[oe]))?"nest":S||(null===C||void 0===C?void 0:C.expandedRowRender)?"row":null),[X]),ie={body:I.useRef()},se=function(e){return(t,n)=>{const r=t.querySelector(`.${e}-container`);let o=n;if(r){const e=getComputedStyle(r);o=n-parseInt(e.borderLeftWidth,10)-parseInt(e.borderRightWidth,10)}return o}}(J),le=I.useRef(null),ue=I.useRef(null);SC(t,(()=>Object.assign(Object.assign({},ue.current),{nativeElement:le.current})));const ce=I.useMemo((()=>"function"===typeof f?f:e=>null===e||void 0===e?void 0:e[f]),[f]),[de]=PI(X,oe,ce),he={},pe=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r,o,a,i;const s=Object.assign(Object.assign({},he),e);n&&(null===(r=he.resetPagination)||void 0===r||r.call(he),(null===(o=s.pagination)||void 0===o?void 0:o.current)&&(s.pagination.current=1),h&&(null===(a=h.onChange)||void 0===a||a.call(h,1,null===(i=s.pagination)||void 0===i?void 0:i.pageSize))),$&&!1!==$.scrollToFirstRowOnChange&&ie.body.current&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getContainer:n=()=>window,callback:r,duration:o=450}=t,a=n(),i=NC(a),s=Date.now(),l=()=>{const t=Date.now()-s,n=function(e,t,n,r){const o=n-t;return(e/=r/2)<1?o/2*e*e*e+t:o/2*((e-=2)*e*e+2)+t}(t>o?o:t,i,e,o);EC(a)?a.scrollTo(window.pageXOffset,n):a instanceof Document||"HTMLDocument"===a.constructor.name?a.documentElement.scrollTop=n:a.scrollTop=n,t<o?Tl(l):"function"===typeof r&&r()};Tl(l)}(0,{getContainer:()=>ie.body.current}),null===y||void 0===y||y(s.pagination,s.filters,s.sorter,{currentDataSource:AI(QI(X,s.sorterStates,oe),s.filterStates,oe),action:t})},[fe,me,ge,ve]=ZI({prefixCls:J,mergedColumns:z,onSorterChange:(e,t)=>{pe({sorter:e,sorterStates:t},"sort",!1)},sortDirections:T||["ascend","descend"],tableLocale:q,showSorterTooltip:O}),be=I.useMemo((()=>QI(X,me,oe)),[X,me]);he.sorter=ve(),he.sorterStates=me;const[ye,we,xe]=RI({prefixCls:J,locale:q,dropdownPrefixCls:Y,mergedColumns:z,onFilterChange:(e,t)=>{pe({filters:e,filterStates:t},"filter",!0)},getPopupContainer:w||U,rootClassName:F()(i,Z)}),ke=AI(be,we,oe);he.filters=xe,he.filterStates=we;const Ce=I.useMemo((()=>{const e={};return Object.keys(xe).forEach((t=>{null!==xe[t]&&(e[t]=xe[t])})),Object.assign(Object.assign({},ge),{filters:e})}),[ge,xe]),[Se]=t$(Ce),[Ee,Ne]=MI(ke.length,((e,t)=>{pe({pagination:Object.assign(Object.assign({},he.pagination),{current:e,pageSize:t})},"paginate")}),h);he.pagination=!1===h?{}:function(e,t){const n={current:e.current,pageSize:e.pageSize},r=t&&"object"===typeof t?t:{};return Object.keys(r).forEach((t=>{const r=e[t];"function"!==typeof r&&(n[t]=r)})),n}(Ee,h),he.resetPagination=Ne;const Ie=I.useMemo((()=>{if(!1===h||!Ee.pageSize)return ke;const{current:e=1,total:t,pageSize:n=_I}=Ee;return ke.length<t?ke.length>n?ke.slice((e-1)*n,e*n):ke:ke.slice((e-1)*n,e*n)}),[!!h,ke,null===Ee||void 0===Ee?void 0:Ee.current,null===Ee||void 0===Ee?void 0:Ee.pageSize,null===Ee||void 0===Ee?void 0:Ee.total]),[$e,Te]=CC({prefixCls:J,data:ke,pageData:Ie,getRowKey:ce,getRecordByKey:de,expandType:ae,childrenColumnName:oe,locale:q,getPopupContainer:w||U},p);re.__PARENT_RENDER_ICON__=re.expandIcon,re.expandIcon=re.expandIcon||k||aN(q),"nest"===ae&&void 0===re.expandIconColumnIndex?re.expandIconColumnIndex=p?1:0:re.expandIconColumnIndex>0&&p&&(re.expandIconColumnIndex-=1),"number"!==typeof re.indentSize&&(re.indentSize="number"===typeof N?N:15);const Ae=I.useCallback((e=>Se($e(ye(fe(e))))),[fe,ye,$e]);let Oe,Re,Pe;if(!1!==h&&(null===Ee||void 0===Ee?void 0:Ee.total)){let e;e=Ee.size?Ee.size:"small"===K||"middle"===K?"small":void 0;const t=t=>I.createElement(VE,Object.assign({},Ee,{className:F()(`${J}-pagination ${J}-pagination-${t}`,Ee.className),size:e})),n="rtl"===H?"left":"right",{position:r}=Ee;if(null!==r&&Array.isArray(r)){const e=r.find((e=>e.includes("top"))),o=r.find((e=>e.includes("bottom"))),a=r.every((e=>"none"===`${e}`));e||o||a||(Re=t(n)),e&&(Oe=t(e.toLowerCase().replace("top",""))),o&&(Re=t(o.toLowerCase().replace("bottom","")))}else Re=t(n)}"boolean"===typeof x?Pe={spinning:x}:"object"===typeof x&&(Pe=Object.assign({spinning:!0},x));const De=F()(ne,Z,`${J}-wrapper`,null===V||void 0===V?void 0:V.className,{[`${J}-wrapper-rtl`]:"rtl"===H},a,i,te),Fe=Object.assign(Object.assign({},null===V||void 0===V?void 0:V.style),s),_e="undefined"!==typeof(null===A||void 0===A?void 0:A.emptyText)?A.emptyText:(null===W||void 0===W?void 0:W("Table"))||I.createElement(_C,{componentName:"Table"}),Me=R?a$:r$,ze={},Le=I.useMemo((()=>{const{fontSize:e,lineHeight:t,padding:n,paddingXS:r,paddingSM:o}=Q,a=Math.floor(e*t);switch(K){case"large":return 2*n+a;case"small":return 2*r+a;default:return 2*o+a}}),[Q,K]);return R&&(ze.listItemHeight=Le),ee(I.createElement("div",{ref:le,className:De,style:Fe},I.createElement(oN,Object.assign({spinning:!1},Pe),Oe,I.createElement(Me,Object.assign({},ze,L,{ref:ue,columns:z,direction:H,expandable:re,prefixCls:J,className:F()({[`${J}-middle`]:"middle"===K,[`${J}-small`]:"small"===K,[`${J}-bordered`]:u,[`${J}-empty`]:0===X.length},ne,Z,te),data:Ie,rowKey:ce,rowClassName:(e,t,n)=>{let r;return r="function"===typeof m?F()(m(e,t,n)):F()(m),F()({[`${J}-row-selected`]:Te.has(ce(e,t))},r)},emptyText:_e,internalHooks:av,internalRefs:ie,transformColumns:Ae,getContainerWidth:se})),Re)))},E$=I.forwardRef(S$),N$=(e,t)=>{const n=I.useRef(0);return n.current+=1,I.createElement(E$,Object.assign({},e,{ref:t,_renderTimes:n.current}))},I$=I.forwardRef(N$);I$.SELECTION_COLUMN=vC,I$.EXPAND_COLUMN=ov,I$.SELECTION_ALL=bC,I$.SELECTION_INVERT=yC,I$.SELECTION_NONE=wC,I$.Column=Yb,I$.ColumnGroup=Qb,I$.Summary=Iv;const $$=I$,T$=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",o=e.type||"",a=o.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();if(/^\*(\/\*)?$/.test(e))return!0;if("."===t.charAt(0)){var n=r.toLowerCase(),i=t.toLowerCase(),s=[i];return".jpg"!==i&&".jpeg"!==i||(s=[".jpg",".jpeg"]),s.some((function(e){return n.endsWith(e)}))}return/\/\*$/.test(t)?a===t.replace(/\/.*$/,""):o===t||!!/^\w+$/.test(t)&&(kt(!1,"Upload takes an invalidate 'accept' type '".concat(t,"'.Skip for check.")),!0)}))}return!0};function A$(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(kbe){return t}}function O$(e){var t=new XMLHttpRequest;e.onProgress&&t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var n=new FormData;e.data&&Object.keys(e.data).forEach((function(t){var r=e.data[t];Array.isArray(r)?r.forEach((function(e){n.append("".concat(t,"[]"),e)})):n.append(t,r)})),e.file instanceof Blob?n.append(e.filename,e.file,e.file.name):n.append(e.filename,e.file),t.onerror=function(t){e.onError(t)},t.onload=function(){return t.status<200||t.status>=300?e.onError(function(e,t){var n="cannot ".concat(e.method," ").concat(e.action," ").concat(t.status,"'"),r=new Error(n);return r.status=t.status,r.method=e.method,r.url=e.action,r}(e,t),A$(t)):e.onSuccess(A$(t),t)},t.open(e.method,e.action,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var r=e.headers||{};return null!==r["X-Requested-With"]&&t.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(r).forEach((function(e){null!==r[e]&&t.setRequestHeader(e,r[e])})),t.send(n),{abort:function(){t.abort()}}}var R$=function(){var e=La(Ma().mark((function e(t,n){var r,o,a,i,s,l,u,c;return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=function(){return(l=La(Ma().mark((function e(t){return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.file((function(r){n(r)?(t.fullPath&&!r.webkitRelativePath&&(Object.defineProperties(r,{webkitRelativePath:{writable:!0}}),r.webkitRelativePath=t.fullPath.replace(/^\//,""),Object.defineProperties(r,{webkitRelativePath:{writable:!1}})),e(r)):e(null)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},s=function(e){return l.apply(this,arguments)},i=function(){return i=La(Ma().mark((function e(t){var n,r,o,a,i;return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.createReader(),r=[];case 2:return e.next=5,new Promise((function(e){n.readEntries(e,(function(){return e([])}))}));case 5:if(o=e.sent,a=o.length){e.next=9;break}return e.abrupt("break",12);case 9:for(i=0;i<a;i++)r.push(o[i]);e.next=2;break;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},a=function(e){return i.apply(this,arguments)},r=[],o=[],t.forEach((function(e){return o.push(e.webkitGetAsEntry())})),u=function(){var e=La(Ma().mark((function e(t,n){var i,l;return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(t.path=n||"",!t.isFile){e.next=10;break}return e.next=6,s(t);case 6:(i=e.sent)&&r.push(i),e.next=15;break;case 10:if(!t.isDirectory){e.next=15;break}return e.next=13,a(t);case 13:l=e.sent,o.push.apply(o,P(l));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c=0;case 9:if(!(c<o.length)){e.next=15;break}return e.next=12,u(o[c]);case 12:c++,e.next=9;break;case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();const P$=R$;var D$=+new Date,F$=0;function _$(){return"rc-upload-".concat(D$,"-").concat(++F$)}var M$=["component","prefixCls","className","classNames","disabled","id","name","style","styles","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave","hasControlInside"],z$=function(e){Ur(n,e);var t=Xr(n);function n(){var e;qt(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Q(Wr(e=t.call.apply(t,[this].concat(o))),"state",{uid:_$()}),Q(Wr(e),"reqs",{}),Q(Wr(e),"fileInput",void 0),Q(Wr(e),"_isMounted",void 0),Q(Wr(e),"onChange",(function(t){var n=e.props,r=n.accept,o=n.directory,a=P(t.target.files).filter((function(e){return!o||T$(e,r)}));e.uploadFiles(a),e.reset()})),Q(Wr(e),"onClick",(function(t){var n=e.fileInput;if(n){var r=t.target,o=e.props.onClick;if(r&&"BUTTON"===r.tagName)n.parentNode.focus(),r.blur();n.click(),o&&o(t)}})),Q(Wr(e),"onKeyDown",(function(t){"Enter"===t.key&&e.onClick(t)})),Q(Wr(e),"onFileDrop",function(){var t=La(Ma().mark((function t(n){var r,o,a;return Ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.multiple,n.preventDefault(),"dragover"!==n.type){t.next=4;break}return t.abrupt("return");case 4:if(!e.props.directory){t.next=11;break}return t.next=7,P$(Array.prototype.slice.call(n.dataTransfer.items),(function(t){return T$(t,e.props.accept)}));case 7:o=t.sent,e.uploadFiles(o),t.next=14;break;case 11:a=P(n.dataTransfer.files).filter((function(t){return T$(t,e.props.accept)})),!1===r&&(a=a.slice(0,1)),e.uploadFiles(a);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Q(Wr(e),"uploadFiles",(function(t){var n=P(t),r=n.map((function(t){return t.uid=_$(),e.processFile(t,n)}));Promise.all(r).then((function(t){var n=e.props.onBatchStart;null===n||void 0===n||n(t.map((function(e){return{file:e.origin,parsedFile:e.parsedFile}}))),t.filter((function(e){return null!==e.parsedFile})).forEach((function(t){e.post(t)}))}))})),Q(Wr(e),"processFile",function(){var t=La(Ma().mark((function t(n,r){var o,a,i,s,l,u,c,d,h;return Ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.props.beforeUpload,a=n,!o){t.next=14;break}return t.prev=3,t.next=6,o(n,r);case 6:a=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),a=!1;case 12:if(!1!==a){t.next=14;break}return t.abrupt("return",{origin:n,parsedFile:null,action:null,data:null});case 14:if("function"!==typeof(i=e.props.action)){t.next=21;break}return t.next=18,i(n);case 18:s=t.sent,t.next=22;break;case 21:s=i;case 22:if("function"!==typeof(l=e.props.data)){t.next=29;break}return t.next=26,l(n);case 26:u=t.sent,t.next=30;break;case 29:u=l;case 30:return c="object"!==J(a)&&"string"!==typeof a||!a?n:a,d=c instanceof File?c:new File([c],n.name,{type:n.type}),(h=d).uid=n.uid,t.abrupt("return",{origin:n,data:u,parsedFile:h,action:s});case 35:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,n){return t.apply(this,arguments)}}()),Q(Wr(e),"saveFileInput",(function(t){e.fileInput=t})),e}return Jt(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(e){var t=this,n=e.data,r=e.origin,o=e.action,a=e.parsedFile;if(this._isMounted){var i=this.props,s=i.onStart,l=i.customRequest,u=i.name,c=i.headers,d=i.withCredentials,h=i.method,p=r.uid,f=l||O$,m={action:o,filename:u,data:n,file:a,headers:c,withCredentials:d,method:h||"post",onProgress:function(e){var n=t.props.onProgress;null===n||void 0===n||n(e,a)},onSuccess:function(e,n){var r=t.props.onSuccess;null===r||void 0===r||r(e,a,n),delete t.reqs[p]},onError:function(e,n){var r=t.props.onError;null===r||void 0===r||r(e,n,a),delete t.reqs[p]}};s(r),this.reqs[p]=f(m)}}},{key:"reset",value:function(){this.setState({uid:_$()})}},{key:"abort",value:function(e){var t=this.reqs;if(e){var n=e.uid?e.uid:e;t[n]&&t[n].abort&&t[n].abort(),delete t[n]}else Object.keys(t).forEach((function(e){t[e]&&t[e].abort&&t[e].abort(),delete t[e]}))}},{key:"render",value:function(){var e=this.props,t=e.component,n=e.prefixCls,r=e.className,o=e.classNames,a=void 0===o?{}:o,i=e.disabled,s=e.id,l=e.name,u=e.style,c=e.styles,d=void 0===c?{}:c,h=e.multiple,p=e.accept,f=e.capture,m=e.children,g=e.directory,v=e.openFileDialogOnClick,b=e.onMouseEnter,y=e.onMouseLeave,w=e.hasControlInside,x=Z(e,M$),k=F()(Q(Q(Q({},n,!0),"".concat(n,"-disabled"),i),r,r)),C=g?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},S=i?{}:{onClick:v?this.onClick:function(){},onKeyDown:v?this.onKeyDown:function(){},onMouseEnter:b,onMouseLeave:y,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:w?void 0:"0"};return I.createElement(t,G({},S,{className:k,role:w?void 0:"button",style:u}),I.createElement("input",G({},wl(x,{aria:!0,data:!0}),{id:s,name:l,disabled:i,type:"file",ref:this.saveFileInput,onClick:function(e){return e.stopPropagation()},key:this.state.uid,style:nt({display:"none"},d.input),className:a.input,accept:p},C,{multiple:h,onChange:this.onChange},null!=f?{capture:f}:{})),m)}}]),n}(I.Component);const L$=z$;function B$(){}var j$=function(e){Ur(n,e);var t=Xr(n);function n(){var e;qt(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Q(Wr(e=t.call.apply(t,[this].concat(o))),"uploader",void 0),Q(Wr(e),"saveUploader",(function(t){e.uploader=t})),e}return Jt(n,[{key:"abort",value:function(e){this.uploader.abort(e)}},{key:"render",value:function(){return I.createElement(L$,G({},this.props,{ref:this.saveUploader}))}}]),n}(I.Component);Q(j$,"defaultProps",{component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:B$,onError:B$,onSuccess:B$,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0,hasControlInside:!1});const H$=j$,V$=e=>{const{componentCls:t,iconCls:n}=e;return{[`${t}-wrapper`]:{[`${t}-drag`]:{position:"relative",width:"100%",height:"100%",textAlign:"center",background:e.colorFillAlter,border:`${yn(e.lineWidth)} dashed ${e.colorBorder}`,borderRadius:e.borderRadiusLG,cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,[t]:{padding:e.padding},[`${t}-btn`]:{display:"table",width:"100%",height:"100%",outline:"none",borderRadius:e.borderRadiusLG,"&:focus-visible":{outline:`${yn(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`}},[`${t}-drag-container`]:{display:"table-cell",verticalAlign:"middle"},[`\n          &:not(${t}-disabled):hover,\n          &-hover:not(${t}-disabled)\n        `]:{borderColor:e.colorPrimaryHover},[`p${t}-drag-icon`]:{marginBottom:e.margin,[n]:{color:e.colorPrimary,fontSize:e.uploadThumbnailSize}},[`p${t}-text`]:{margin:`0 0 ${yn(e.marginXXS)}`,color:e.colorTextHeading,fontSize:e.fontSizeLG},[`p${t}-hint`]:{color:e.colorTextDescription,fontSize:e.fontSize},[`&${t}-disabled`]:{[`p${t}-drag-icon ${n},\n            p${t}-text,\n            p${t}-hint\n          `]:{color:e.colorTextDisabled}}}}}},W$=e=>{const{componentCls:t,antCls:n,iconCls:r,fontSize:o,lineHeight:a,calc:i}=e,s=`${t}-list-item`,l=`${s}-actions`,u=`${s}-action`,c=e.fontHeightSM;return{[`${t}-wrapper`]:{[`${t}-list`]:Object.assign(Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),{lineHeight:e.lineHeight,[s]:{position:"relative",height:i(e.lineHeight).mul(o).equal(),marginTop:e.marginXS,fontSize:o,display:"flex",alignItems:"center",transition:`background-color ${e.motionDurationSlow}`,"&:hover":{backgroundColor:e.controlItemBgHover},[`${s}-name`]:Object.assign(Object.assign({},Fo),{padding:`0 ${yn(e.paddingXS)}`,lineHeight:a,flex:"auto",transition:`all ${e.motionDurationSlow}`}),[l]:{whiteSpace:"nowrap",[u]:{opacity:0},[r]:{color:e.actionsColor,transition:`all ${e.motionDurationSlow}`},[`\n              ${u}:focus-visible,\n              &.picture ${u}\n            `]:{opacity:1},[`${u}${n}-btn`]:{height:c,border:0,lineHeight:1}},[`${t}-icon ${r}`]:{color:e.colorTextDescription,fontSize:o},[`${s}-progress`]:{position:"absolute",bottom:e.calc(e.uploadProgressOffset).mul(-1).equal(),width:"100%",paddingInlineStart:i(o).add(e.paddingXS).equal(),fontSize:o,lineHeight:0,pointerEvents:"none","> div":{margin:0}}},[`${s}:hover ${u}`]:{opacity:1},[`${s}-error`]:{color:e.colorError,[`${s}-name, ${t}-icon ${r}`]:{color:e.colorError},[l]:{[`${r}, ${r}:hover`]:{color:e.colorError},[u]:{opacity:1}}},[`${t}-list-item-container`]:{transition:`opacity ${e.motionDurationSlow}, height ${e.motionDurationSlow}`,"&::before":{display:"table",width:0,height:0,content:'""'}}})}}},G$=new Hr("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),U$=new Hr("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),K$=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{antCls:n}=e,r=`${n}-fade`,o=t?"&":"";return[zm(r,G$,U$,e.motionDurationMid,t),{[`\n        ${o}${r}-enter,\n        ${o}${r}-appear\n      `]:{opacity:0,animationTimingFunction:"linear"},[`${o}${r}-leave`]:{animationTimingFunction:"linear"}}]},q$=e=>{const{componentCls:t}=e,n=new Hr("uploadAnimateInlineIn",{from:{width:0,height:0,padding:0,opacity:0,margin:e.calc(e.marginXS).div(-2).equal()}}),r=new Hr("uploadAnimateInlineOut",{to:{width:0,height:0,padding:0,opacity:0,margin:e.calc(e.marginXS).div(-2).equal()}}),o=`${t}-animate-inline`;return[{[`${t}-wrapper`]:{[`${o}-appear, ${o}-enter, ${o}-leave`]:{animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseInOutCirc,animationFillMode:"forwards"},[`${o}-appear, ${o}-enter`]:{animationName:n},[`${o}-leave`]:{animationName:r}}},{[`${t}-wrapper`]:K$(e)},n,r]},X$=e=>{const{componentCls:t,iconCls:n,uploadThumbnailSize:r,uploadProgressOffset:o,calc:a}=e,i=`${t}-list`,s=`${i}-item`;return{[`${t}-wrapper`]:{[`\n        ${i}${i}-picture,\n        ${i}${i}-picture-card,\n        ${i}${i}-picture-circle\n      `]:{[s]:{position:"relative",height:a(r).add(a(e.lineWidth).mul(2)).add(a(e.paddingXS).mul(2)).equal(),padding:e.paddingXS,border:`${yn(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusLG,"&:hover":{background:"transparent"},[`${s}-thumbnail`]:Object.assign(Object.assign({},Fo),{width:r,height:r,lineHeight:yn(a(r).add(e.paddingSM).equal()),textAlign:"center",flex:"none",[n]:{fontSize:e.fontSizeHeading2,color:e.colorPrimary},img:{display:"block",width:"100%",height:"100%",overflow:"hidden"}}),[`${s}-progress`]:{bottom:o,width:`calc(100% - ${yn(a(e.paddingSM).mul(2).equal())})`,marginTop:0,paddingInlineStart:a(r).add(e.paddingXS).equal()}},[`${s}-error`]:{borderColor:e.colorError,[`${s}-thumbnail ${n}`]:{[`svg path[fill='${Fe[0]}']`]:{fill:e.colorErrorBg},[`svg path[fill='${Fe.primary}']`]:{fill:e.colorError}}},[`${s}-uploading`]:{borderStyle:"dashed",[`${s}-name`]:{marginBottom:o}}},[`${i}${i}-picture-circle ${s}`]:{[`&, &::before, ${s}-thumbnail`]:{borderRadius:"50%"}}}}},J$=e=>{const{componentCls:t,iconCls:n,fontSizeLG:r,colorTextLightSolid:o,calc:a}=e,i=`${t}-list`,s=`${i}-item`,l=e.uploadPicCardSize;return{[`\n      ${t}-wrapper${t}-picture-card-wrapper,\n      ${t}-wrapper${t}-picture-circle-wrapper\n    `]:Object.assign(Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),{display:"block",[`${t}${t}-select`]:{width:l,height:l,textAlign:"center",verticalAlign:"top",backgroundColor:e.colorFillAlter,border:`${yn(e.lineWidth)} dashed ${e.colorBorder}`,borderRadius:e.borderRadiusLG,cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,[`> ${t}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},[`&:not(${t}-disabled):hover`]:{borderColor:e.colorPrimary}},[`${i}${i}-picture-card, ${i}${i}-picture-circle`]:{display:"flex",flexWrap:"wrap","@supports not (gap: 1px)":{"& > *":{marginBlockEnd:e.marginXS,marginInlineEnd:e.marginXS}},"@supports (gap: 1px)":{gap:e.marginXS},[`${i}-item-container`]:{display:"inline-block",width:l,height:l,verticalAlign:"top"},"&::after":{display:"none"},"&::before":{display:"none"},[s]:{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:`calc(100% - ${yn(a(e.paddingXS).mul(2).equal())})`,height:`calc(100% - ${yn(a(e.paddingXS).mul(2).equal())})`,backgroundColor:e.colorBgMask,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'" "'}},[`${s}:hover`]:{[`&::before, ${s}-actions`]:{opacity:1}},[`${s}-actions`]:{position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:`all ${e.motionDurationSlow}`,[`\n            ${n}-eye,\n            ${n}-download,\n            ${n}-delete\n          `]:{zIndex:10,width:r,margin:`0 ${yn(e.marginXXS)}`,fontSize:r,cursor:"pointer",transition:`all ${e.motionDurationSlow}`,color:o,"&:hover":{color:o},svg:{verticalAlign:"baseline"}}},[`${s}-thumbnail, ${s}-thumbnail img`]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},[`${s}-name`]:{display:"none",textAlign:"center"},[`${s}-file + ${s}-name`]:{position:"absolute",bottom:e.margin,display:"block",width:`calc(100% - ${yn(a(e.paddingXS).mul(2).equal())})`},[`${s}-uploading`]:{[`&${s}`]:{backgroundColor:e.colorFillAlter},[`&::before, ${n}-eye, ${n}-download, ${n}-delete`]:{display:"none"}},[`${s}-progress`]:{bottom:e.marginXL,width:`calc(100% - ${yn(a(e.paddingXS).mul(2).equal())})`,paddingInlineStart:0}}}),[`${t}-wrapper${t}-picture-circle-wrapper`]:{[`${t}${t}-select`]:{borderRadius:"50%"}}}},Y$=e=>{const{componentCls:t}=e;return{[`${t}-rtl`]:{direction:"rtl"}}},Q$=e=>{const{componentCls:t,colorTextDisabled:n}=e;return{[`${t}-wrapper`]:Object.assign(Object.assign({},_o(e)),{[t]:{outline:0,"input[type='file']":{cursor:"pointer"}},[`${t}-select`]:{display:"inline-block"},[`${t}-disabled`]:{color:n,cursor:"not-allowed"}})}},Z$=ha("Upload",(e=>{const{fontSizeHeading3:t,fontHeight:n,lineWidth:r,controlHeightLG:o,calc:a}=e,i=So(e,{uploadThumbnailSize:a(t).mul(2).equal(),uploadProgressOffset:a(a(n).div(2)).add(r).equal(),uploadPicCardSize:a(o).mul(2.55).equal()});return[Q$(i),V$(i),X$(i),J$(i),W$(i),q$(i),Y$(i),rk(i)]}),(e=>({actionsColor:e.colorTextDescription})));const eT={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:t}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}}]}},name:"file",theme:"twotone"};var tT=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:eT}))};const nT=I.forwardRef(tT);const rT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"};var oT=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:rT}))};const aT=I.forwardRef(oT);const iT={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:e}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:t}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:t}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:t}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:e}}]}},name:"picture",theme:"twotone"};var sT=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:iT}))};const lT=I.forwardRef(sT);function uT(e){return Object.assign(Object.assign({},e),{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.name,size:e.size,type:e.type,uid:e.uid,percent:0,originFileObj:e})}function cT(e,t){const n=P(t),r=n.findIndex((t=>{let{uid:n}=t;return n===e.uid}));return-1===r?n.push(e):n[r]=e,n}function dT(e,t){const n=void 0!==e.uid?"uid":"name";return t.filter((t=>t[n]===e[n]))[0]}const hT=e=>0===e.indexOf("image/"),pT=e=>{if(e.type&&!e.thumbUrl)return hT(e.type);const t=e.thumbUrl||e.url||"",n=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("/"),t=e[e.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(t)||[""])[0]}(t);return!(!/^data:image\//.test(t)&&!/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(n))||!/^data:/.test(t)&&!n},fT=200;function mT(e){return new Promise((t=>{if(!e.type||!hT(e.type))return void t("");const n=document.createElement("canvas");n.width=fT,n.height=fT,n.style.cssText="position: fixed; left: 0; top: 0; width: 200px; height: 200px; z-index: 9999; display: none;",document.body.appendChild(n);const r=n.getContext("2d"),o=new Image;if(o.onload=()=>{const{width:e,height:a}=o;let i=fT,s=fT,l=0,u=0;e>a?(s=a*(fT/e),u=-(s-i)/2):(i=e*(fT/a),l=-(i-s)/2),r.drawImage(o,l,u,i,s);const c=n.toDataURL();document.body.removeChild(n),window.URL.revokeObjectURL(o.src),t(c)},o.crossOrigin="anonymous",e.type.startsWith("image/svg+xml")){const t=new FileReader;t.onload=()=>{t.result&&"string"===typeof t.result&&(o.src=t.result)},t.readAsDataURL(e)}else if(e.type.startsWith("image/gif")){const n=new FileReader;n.onload=()=>{n.result&&t(n.result)},n.readAsDataURL(e)}else o.src=window.URL.createObjectURL(e)}))}const gT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var vT=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:gT}))};const bT=I.forwardRef(vT);const yT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};var wT=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:yT}))};const xT=I.forwardRef(wT);var kT={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},CT=function(){var e=(0,I.useRef)([]),t=(0,I.useRef)(null);return(0,I.useEffect)((function(){var n=Date.now(),r=!1;e.current.forEach((function(e){if(e){r=!0;var o=e.style;o.transitionDuration=".3s, .3s, .3s, .06s",t.current&&n-t.current<100&&(o.transitionDuration="0s, 0s")}})),r&&(t.current=Date.now())})),e.current};var ST=0,ET=rt();const NT=function(e){var t=X(I.useState(),2),n=t[0],r=t[1];return I.useEffect((function(){r("rc_progress_".concat(function(){var e;return ET?(e=ST,ST+=1):e="TEST_OR_SSR",e}()))}),[]),e||n};var IT=function(e){var t=e.bg,n=e.children;return I.createElement("div",{style:{width:"100%",height:"100%",background:t}},n)};function $T(e,t){return Object.keys(e).map((function(n){var r=parseFloat(n),o="".concat(Math.floor(r*t),"%");return"".concat(e[n]," ").concat(o)}))}var TT=I.forwardRef((function(e,t){var n=e.prefixCls,r=e.color,o=e.gradientId,a=e.radius,i=e.style,s=e.ptg,l=e.strokeLinecap,u=e.strokeWidth,c=e.size,d=e.gapDegree,h=r&&"object"===J(r),p=h?"#FFF":void 0,f=c/2,m=I.createElement("circle",{className:"".concat(n,"-circle-path"),r:a,cx:f,cy:f,stroke:p,strokeLinecap:l,strokeWidth:u,opacity:0===s?0:1,style:i,ref:t});if(!h)return m;var g="".concat(o,"-conic"),v=d?"".concat(180+d/2,"deg"):"0deg",b=$T(r,(360-d)/360),y=$T(r,1),w="conic-gradient(from ".concat(v,", ").concat(b.join(", "),")"),x="linear-gradient(to ".concat(d?"bottom":"top",", ").concat(y.join(", "),")");return I.createElement(I.Fragment,null,I.createElement("mask",{id:g},m),I.createElement("foreignObject",{x:0,y:0,width:c,height:c,mask:"url(#".concat(g,")")},I.createElement(IT,{bg:x},I.createElement(IT,{bg:w}))))}));const AT=TT;var OT=100,RT=function(e,t,n,r,o,a,i,s,l,u){var c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,d=n/100*360*((360-a)/360),h=0===a?0:{bottom:0,top:180,left:90,right:-90}[i],p=(100-r)/100*t;"round"===l&&100!==r&&(p+=u/2)>=t&&(p=t-.01);return{stroke:"string"===typeof s?s:void 0,strokeDasharray:"".concat(t,"px ").concat(e),strokeDashoffset:p+c,transform:"rotate(".concat(o+d+h,"deg)"),transformOrigin:"".concat(50,"px ").concat(50,"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},PT=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function DT(e){var t=null!==e&&void 0!==e?e:[];return Array.isArray(t)?t:[t]}const FT=function(e){var t=nt(nt({},kT),e),n=t.id,r=t.prefixCls,o=t.steps,a=t.strokeWidth,i=t.trailWidth,s=t.gapDegree,l=void 0===s?0:s,u=t.gapPosition,c=t.trailColor,d=t.strokeLinecap,h=t.style,p=t.className,f=t.strokeColor,m=t.percent,g=Z(t,PT),v=NT(n),b="".concat(v,"-gradient"),y=50-a/2,w=2*Math.PI*y,x=l>0?90+l/2:-90,k=w*((360-l)/360),C="object"===J(o)?o:{count:o,gap:2},S=C.count,E=C.gap,N=DT(m),$=DT(f),T=$.find((function(e){return e&&"object"===J(e)})),A=T&&"object"===J(T)?"butt":d,O=RT(w,k,0,100,x,l,u,c,A,a),R=CT();return I.createElement("svg",G({className:F()("".concat(r,"-circle"),p),viewBox:"0 0 ".concat(OT," ").concat(OT),style:h,id:n,role:"presentation"},g),!S&&I.createElement("circle",{className:"".concat(r,"-circle-trail"),r:y,cx:50,cy:50,stroke:c,strokeLinecap:A,strokeWidth:i||a,style:O}),S?function(){var e=Math.round(S*(N[0]/100)),t=100/S,n=0;return new Array(S).fill(null).map((function(o,i){var s=i<=e-1?$[0]:c,d=s&&"object"===J(s)?"url(#".concat(b,")"):void 0,h=RT(w,k,n,t,x,l,u,s,"butt",a,E);return n+=100*(k-h.strokeDashoffset+E)/k,I.createElement("circle",{key:i,className:"".concat(r,"-circle-path"),r:y,cx:50,cy:50,stroke:d,strokeWidth:a,opacity:1,style:h,ref:function(e){R[i]=e}})}))}():function(){var e=0;return N.map((function(t,n){var o=$[n]||$[$.length-1],i=RT(w,k,e,t,x,l,u,o,A,a);return e+=t,I.createElement(AT,{key:n,color:o,ptg:t,radius:y,prefixCls:r,gradientId:b,style:i,strokeLinecap:A,strokeWidth:a,gapDegree:l,ref:function(e){R[n]=e},size:OT})})).reverse()}())};function _T(e){return!e||e<0?0:e>100?100:e}function MT(e){let{success:t,successPercent:n}=e,r=n;return t&&"progress"in t&&(r=t.progress),t&&"percent"in t&&(r=t.percent),r}const zT=(e,t,n)=>{var r,o,a,i;let s=-1,l=-1;if("step"===t){const t=n.steps,r=n.strokeWidth;"string"===typeof e||"undefined"===typeof e?(s="small"===e?2:14,l=null!==r&&void 0!==r?r:8):"number"===typeof e?[s,l]=[e,e]:[s=14,l=8]=Array.isArray(e)?e:[e.width,e.height],s*=t}else if("line"===t){const t=null===n||void 0===n?void 0:n.strokeWidth;"string"===typeof e||"undefined"===typeof e?l=t||("small"===e?6:8):"number"===typeof e?[s,l]=[e,e]:[s=-1,l=8]=Array.isArray(e)?e:[e.width,e.height]}else"circle"!==t&&"dashboard"!==t||("string"===typeof e||"undefined"===typeof e?[s,l]="small"===e?[60,60]:[120,120]:"number"===typeof e?[s,l]=[e,e]:Array.isArray(e)&&(s=null!==(o=null!==(r=e[0])&&void 0!==r?r:e[1])&&void 0!==o?o:120,l=null!==(i=null!==(a=e[0])&&void 0!==a?a:e[1])&&void 0!==i?i:120));return[s,l]},LT=e=>{const{prefixCls:t,trailColor:n=null,strokeLinecap:r="round",gapPosition:o,gapDegree:a,width:i=120,type:s,children:l,success:u,size:c=i,steps:d}=e,[h,p]=zT(c,"circle");let{strokeWidth:f}=e;void 0===f&&(f=Math.max((e=>3/e*100)(h),6));const m={width:h,height:p,fontSize:.15*h+6},g=I.useMemo((()=>a||0===a?a:"dashboard"===s?75:void 0),[a,s]),v=(e=>{let{percent:t,success:n,successPercent:r}=e;const o=_T(MT({success:n,successPercent:r}));return[o,_T(_T(t)-o)]})(e),b=o||"dashboard"===s&&"bottom"||void 0,y="[object Object]"===Object.prototype.toString.call(e.strokeColor),w=(e=>{let{success:t={},strokeColor:n}=e;const{strokeColor:r}=t;return[r||Ne.green,n||null]})({success:u,strokeColor:e.strokeColor}),x=F()(`${t}-inner`,{[`${t}-circle-gradient`]:y}),k=I.createElement(FT,{steps:d,percent:d?v[1]:v,strokeWidth:f,trailWidth:f,strokeColor:d?w[1]:w,strokeLinecap:r,trailColor:n,prefixCls:t,gapDegree:g,gapPosition:b}),C=h<=20,S=I.createElement("div",{className:x,style:m},k,!C&&l);return C?I.createElement(og,{title:l},S):S},BT="--progress-line-stroke-color",jT="--progress-percent",HT=e=>{const t=e?"100%":"-100%";return new Hr(`antProgress${e?"RTL":"LTR"}Active`,{"0%":{transform:`translateX(${t}) scaleX(0)`,opacity:.1},"20%":{transform:`translateX(${t}) scaleX(0)`,opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}})},VT=e=>{const{componentCls:t,iconCls:n}=e;return{[t]:Object.assign(Object.assign({},_o(e)),{display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:e.fontSize},[`${t}-outer`]:{display:"inline-flex",alignItems:"center",width:"100%"},[`${t}-inner`]:{position:"relative",display:"inline-block",width:"100%",flex:1,overflow:"hidden",verticalAlign:"middle",backgroundColor:e.remainingColor,borderRadius:e.lineBorderRadius},[`${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.defaultColor}},[`${t}-success-bg, ${t}-bg`]:{position:"relative",background:e.defaultColor,borderRadius:e.lineBorderRadius,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`},[`${t}-layout-bottom`]:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",[`${t}-text`]:{width:"max-content",marginInlineStart:0,marginTop:e.marginXXS}},[`${t}-bg`]:{overflow:"hidden","&::after":{content:'""',background:{_multi_value_:!0,value:["inherit",`var(${BT})`]},height:"100%",width:`calc(1 / var(${jT}) * 100%)`,display:"block"},[`&${t}-bg-inner`]:{minWidth:"max-content","&::after":{content:"none"},[`${t}-text-inner`]:{color:e.colorWhite,[`&${t}-text-bright`]:{color:"rgba(0, 0, 0, 0.45)"}}}},[`${t}-success-bg`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:e.colorSuccess},[`${t}-text`]:{display:"inline-block",marginInlineStart:e.marginXS,color:e.colorText,lineHeight:1,width:"2em",whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal",[n]:{fontSize:e.fontSize},[`&${t}-text-outer`]:{width:"max-content"},[`&${t}-text-outer${t}-text-start`]:{width:"max-content",marginInlineStart:0,marginInlineEnd:e.marginXS}},[`${t}-text-inner`]:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",marginInlineStart:0,padding:`0 ${yn(e.paddingXXS)}`,[`&${t}-text-start`]:{justifyContent:"start"},[`&${t}-text-end`]:{justifyContent:"end"}},[`&${t}-status-active`]:{[`${t}-bg::before`]:{position:"absolute",inset:0,backgroundColor:e.colorBgContainer,borderRadius:e.lineBorderRadius,opacity:0,animationName:HT(),animationDuration:e.progressActiveMotionDuration,animationTimingFunction:e.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'}},[`&${t}-rtl${t}-status-active`]:{[`${t}-bg::before`]:{animationName:HT(!0)}},[`&${t}-status-exception`]:{[`${t}-bg`]:{backgroundColor:e.colorError},[`${t}-text`]:{color:e.colorError}},[`&${t}-status-exception ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorError}},[`&${t}-status-success`]:{[`${t}-bg`]:{backgroundColor:e.colorSuccess},[`${t}-text`]:{color:e.colorSuccess}},[`&${t}-status-success ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorSuccess}}})}},WT=e=>{const{componentCls:t,iconCls:n}=e;return{[t]:{[`${t}-circle-trail`]:{stroke:e.remainingColor},[`&${t}-circle ${t}-inner`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`&${t}-circle ${t}-text`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:e.circleTextColor,fontSize:e.circleTextFontSize,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[n]:{fontSize:e.circleIconFontSize}},[`${t}-circle&-status-exception`]:{[`${t}-text`]:{color:e.colorError}},[`${t}-circle&-status-success`]:{[`${t}-text`]:{color:e.colorSuccess}}},[`${t}-inline-circle`]:{lineHeight:1,[`${t}-inner`]:{verticalAlign:"bottom"}}}},GT=e=>{const{componentCls:t}=e;return{[t]:{[`${t}-steps`]:{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:e.progressStepMinWidth,marginInlineEnd:e.progressStepMarginInlineEnd,backgroundColor:e.remainingColor,transition:`all ${e.motionDurationSlow}`,"&-active":{backgroundColor:e.defaultColor}}}}}},UT=e=>{const{componentCls:t,iconCls:n}=e;return{[t]:{[`${t}-small&-line, ${t}-small&-line ${t}-text ${n}`]:{fontSize:e.fontSizeSM}}}},KT=ha("Progress",(e=>{const t=e.calc(e.marginXXS).div(2).equal(),n=So(e,{progressStepMarginInlineEnd:t,progressStepMinWidth:t,progressActiveMotionDuration:"2.4s"});return[VT(n),WT(n),GT(n),UT(n)]}),(e=>({circleTextColor:e.colorText,defaultColor:e.colorInfo,remainingColor:e.colorFillSecondary,lineBorderRadius:100,circleTextFontSize:"1em",circleIconFontSize:e.fontSize/e.fontSizeSM+"em"})));var qT=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const XT=(e,t)=>{const{from:n=Ne.blue,to:r=Ne.blue,direction:o=("rtl"===t?"to left":"to right")}=e,a=qT(e,["from","to","direction"]);if(0!==Object.keys(a).length){const e=(e=>{let t=[];return Object.keys(e).forEach((n=>{const r=parseFloat(n.replace(/%/g,""));isNaN(r)||t.push({key:r,value:e[n]})})),t=t.sort(((e,t)=>e.key-t.key)),t.map((e=>{let{key:t,value:n}=e;return`${n} ${t}%`})).join(", ")})(a),t=`linear-gradient(${o}, ${e})`;return{background:t,[BT]:t}}const i=`linear-gradient(${o}, ${n}, ${r})`;return{background:i,[BT]:i}},JT=e=>{const{prefixCls:t,direction:n,percent:r,size:o,strokeWidth:a,strokeColor:i,strokeLinecap:s="round",children:l,trailColor:u=null,percentPosition:c,success:d}=e,{align:h,type:p}=c,f=i&&"string"!==typeof i?XT(i,n):{[BT]:i,background:i},m="square"===s||"butt"===s?0:void 0,g=null!==o&&void 0!==o?o:[-1,a||("small"===o?6:8)],[v,b]=zT(g,"line",{strokeWidth:a});const y={backgroundColor:u||void 0,borderRadius:m},w=Object.assign(Object.assign({width:`${_T(r)}%`,height:b,borderRadius:m},f),{[jT]:_T(r)/100}),x=MT(e),k={width:`${_T(x)}%`,height:b,borderRadius:m,backgroundColor:null===d||void 0===d?void 0:d.strokeColor},C={width:v<0?"100%":v},S=I.createElement("div",{className:`${t}-inner`,style:y},I.createElement("div",{className:F()(`${t}-bg`,`${t}-bg-${p}`),style:w},"inner"===p&&l),void 0!==x&&I.createElement("div",{className:`${t}-success-bg`,style:k})),E="outer"===p&&"start"===h,N="outer"===p&&"end"===h;return"outer"===p&&"center"===h?I.createElement("div",{className:`${t}-layout-bottom`},S,l):I.createElement("div",{className:`${t}-outer`,style:C},E&&l,S,N&&l)},YT=e=>{const{size:t,steps:n,percent:r=0,strokeWidth:o=8,strokeColor:a,trailColor:i=null,prefixCls:s,children:l}=e,u=Math.round(n*(r/100)),c=null!==t&&void 0!==t?t:["small"===t?2:14,o],[d,h]=zT(c,"step",{steps:n,strokeWidth:o}),p=d/n,f=new Array(n);for(let m=0;m<n;m++){const e=Array.isArray(a)?a[m]:a;f[m]=I.createElement("div",{key:m,className:F()(`${s}-steps-item`,{[`${s}-steps-item-active`]:m<=u-1}),style:{backgroundColor:m<=u-1?e:i,width:p,height:h}})}return I.createElement("div",{className:`${s}-steps-outer`},f,l)};var QT=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const ZT=["normal","exception","active","success"],eA=I.forwardRef(((e,t)=>{const{prefixCls:n,className:r,rootClassName:o,steps:a,strokeColor:i,percent:s=0,size:l="default",showInfo:u=!0,type:c="line",status:d,format:h,style:p,percentPosition:f={}}=e,m=QT(e,["prefixCls","className","rootClassName","steps","strokeColor","percent","size","showInfo","type","status","format","style","percentPosition"]),{align:g="end",type:v="outer"}=f,b=Array.isArray(i)?i[0]:i,y="string"===typeof i||Array.isArray(i)?i:void 0,w=I.useMemo((()=>{if(b){const e="string"===typeof b?b:Object.values(b)[0];return new Vo(e).isLight()}return!1}),[i]),x=I.useMemo((()=>{var t,n;const r=MT(e);return parseInt(void 0!==r?null===(t=null!==r&&void 0!==r?r:0)||void 0===t?void 0:t.toString():null===(n=null!==s&&void 0!==s?s:0)||void 0===n?void 0:n.toString(),10)}),[s,e.success,e.successPercent]),k=I.useMemo((()=>!ZT.includes(d)&&x>=100?"success":d||"normal"),[d,x]),{getPrefixCls:C,direction:S,progress:E}=I.useContext(B),N=C("progress",n),[$,T,A]=KT(N),O="line"===c,R=O&&!a,P=I.useMemo((()=>{if(!u)return null;const t=MT(e);let n;const r=h||(e=>`${e}%`),o=O&&w&&"inner"===v;return"inner"===v||h||"exception"!==k&&"success"!==k?n=r(_T(s),_T(t)):"exception"===k?n=O?I.createElement(al,null):I.createElement(Wp,null):"success"===k&&(n=O?I.createElement(up,null):I.createElement($g,null)),I.createElement("span",{className:F()(`${N}-text`,{[`${N}-text-bright`]:o,[`${N}-text-${g}`]:R,[`${N}-text-${v}`]:R}),title:"string"===typeof n?n:void 0},n)}),[u,s,x,k,c,N,h]);let D;"line"===c?D=a?I.createElement(YT,Object.assign({},e,{strokeColor:y,prefixCls:N,steps:"object"===typeof a?a.count:a}),P):I.createElement(JT,Object.assign({},e,{strokeColor:b,prefixCls:N,direction:S,percentPosition:{align:g,type:v}}),P):"circle"!==c&&"dashboard"!==c||(D=I.createElement(LT,Object.assign({},e,{strokeColor:b,prefixCls:N,progressStatus:k}),P));const M=F()(N,`${N}-status-${k}`,{[`${N}-${"dashboard"===c?"circle":c}`]:"line"!==c,[`${N}-inline-circle`]:"circle"===c&&zT(l,"circle")[0]<=20,[`${N}-line`]:R,[`${N}-line-align-${g}`]:R,[`${N}-line-position-${v}`]:R,[`${N}-steps`]:a,[`${N}-show-info`]:u,[`${N}-${l}`]:"string"===typeof l,[`${N}-rtl`]:"rtl"===S},null===E||void 0===E?void 0:E.className,r,o,T,A);return $(I.createElement("div",Object.assign({ref:t,style:Object.assign(Object.assign({},null===E||void 0===E?void 0:E.style),p),className:M,role:"progressbar","aria-valuenow":x,"aria-valuemin":0,"aria-valuemax":100},_(m,["trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"])),D))}));const tA=eA,nA=I.forwardRef(((e,t)=>{let{prefixCls:n,className:r,style:o,locale:a,listType:i,file:s,items:l,progress:u,iconRender:c,actionIconRender:d,itemRender:h,isImgUrl:p,showPreviewIcon:f,showRemoveIcon:m,showDownloadIcon:g,previewIcon:v,removeIcon:b,downloadIcon:y,extra:w,onPreview:x,onDownload:k,onClose:C}=e;var S,E;const{status:N}=s,[$,T]=I.useState(N);I.useEffect((()=>{"removed"!==N&&T(N)}),[N]);const[A,O]=I.useState(!1);I.useEffect((()=>{const e=setTimeout((()=>{O(!0)}),300);return()=>{clearTimeout(e)}}),[]);const R=c(s);let P=I.createElement("div",{className:`${n}-icon`},R);if("picture"===i||"picture-card"===i||"picture-circle"===i)if("uploading"===$||!s.thumbUrl&&!s.url){const e=F()(`${n}-list-item-thumbnail`,{[`${n}-list-item-file`]:"uploading"!==$});P=I.createElement("div",{className:e},R)}else{const e=(null===p||void 0===p?void 0:p(s))?I.createElement("img",{src:s.thumbUrl||s.url,alt:s.name,className:`${n}-list-item-image`,crossOrigin:s.crossOrigin}):R,t=F()(`${n}-list-item-thumbnail`,{[`${n}-list-item-file`]:p&&!p(s)});P=I.createElement("a",{className:t,onClick:e=>x(s,e),href:s.url||s.thumbUrl,target:"_blank",rel:"noopener noreferrer"},e)}const D=F()(`${n}-list-item`,`${n}-list-item-${$}`),_="string"===typeof s.linkProps?JSON.parse(s.linkProps):s.linkProps,M=("function"===typeof m?m(s):m)?d(("function"===typeof b?b(s):b)||I.createElement(bT,null),(()=>C(s)),n,a.removeFile,!0):null,z=("function"===typeof g?g(s):g)&&"done"===$?d(("function"===typeof y?y(s):y)||I.createElement(xT,null),(()=>k(s)),n,a.downloadFile):null,L="picture-card"!==i&&"picture-circle"!==i&&I.createElement("span",{key:"download-delete",className:F()(`${n}-list-item-actions`,{picture:"picture"===i})},z,M),j="function"===typeof w?w(s):w,H=j&&I.createElement("span",{className:`${n}-list-item-extra`},j),V=F()(`${n}-list-item-name`),W=s.url?I.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:V,title:s.name},_,{href:s.url,onClick:e=>x(s,e)}),s.name,H):I.createElement("span",{key:"view",className:V,onClick:e=>x(s,e),title:s.name},s.name,H),G=("function"===typeof f?f(s):f)&&(s.url||s.thumbUrl)?I.createElement("a",{href:s.url||s.thumbUrl,target:"_blank",rel:"noopener noreferrer",onClick:e=>x(s,e),title:a.previewFile},"function"===typeof v?v(s):v||I.createElement(Hl,null)):null,U=("picture-card"===i||"picture-circle"===i)&&"uploading"!==$&&I.createElement("span",{className:`${n}-list-item-actions`},G,"done"===$&&z,M),{getPrefixCls:K}=I.useContext(B),q=K(),X=I.createElement("div",{className:D},P,W,L,U,A&&I.createElement(Qu,{motionName:`${q}-fade`,visible:"uploading"===$,motionDeadline:2e3},(e=>{let{className:t}=e;const r="percent"in s?I.createElement(tA,Object.assign({},u,{type:"line",percent:s.percent,"aria-label":s["aria-label"],"aria-labelledby":s["aria-labelledby"]})):null;return I.createElement("div",{className:F()(`${n}-list-item-progress`,t)},r)}))),J=s.response&&"string"===typeof s.response?s.response:(null===(S=s.error)||void 0===S?void 0:S.statusText)||(null===(E=s.error)||void 0===E?void 0:E.message)||a.uploadError,Y="error"===$?I.createElement(og,{title:J,getPopupContainer:e=>e.parentNode},X):X;return I.createElement("div",{className:F()(`${n}-list-item-container`,r),style:o,ref:t},h?h(Y,s,l,{download:k.bind(null,s),preview:x.bind(null,s),remove:C.bind(null,s)}):Y)})),rA=nA,oA=(e,t)=>{const{listType:n="text",previewFile:r=mT,onPreview:o,onDownload:a,onRemove:i,locale:s,iconRender:l,isImageUrl:u=pT,prefixCls:c,items:d=[],showPreviewIcon:h=!0,showRemoveIcon:p=!0,showDownloadIcon:f=!1,removeIcon:m,previewIcon:g,downloadIcon:v,extra:b,progress:y={size:[-1,2],showInfo:!1},appendAction:w,appendActionVisible:x=!0,itemRender:k,disabled:C}=e,S=MC(),[E,N]=I.useState(!1),$=["picture-card","picture-circle"].includes(n);I.useEffect((()=>{n.startsWith("picture")&&(d||[]).forEach((e=>{(e.originFileObj instanceof File||e.originFileObj instanceof Blob)&&void 0===e.thumbUrl&&(e.thumbUrl="",null===r||void 0===r||r(e.originFileObj).then((t=>{e.thumbUrl=t||"",S()})))}))}),[n,d,r]),I.useEffect((()=>{N(!0)}),[]);const T=(e,t)=>{if(o)return t.preventDefault(),o(e)},A=e=>{"function"===typeof a?a(e):e.url&&window.open(e.url)},O=e=>{null===i||void 0===i||i(e)},R=e=>{if(l)return l(e,n);const t="uploading"===e.status;if(n.startsWith("picture")){const r="picture"===n?I.createElement(Tc,null):s.uploading,o=(null===u||void 0===u?void 0:u(e))?I.createElement(lT,null):I.createElement(nT,null);return t?r:o}return t?I.createElement(Tc,null):I.createElement(aT,null)},D=(e,t,n,r,o)=>{const a={type:"text",size:"small",title:r,onClick:n=>{var r,o;t(),I.isValidElement(e)&&(null===(o=(r=e.props).onClick)||void 0===o||o.call(r,n))},className:`${n}-list-item-action`};return o&&(a.disabled=C),I.isValidElement(e)?I.createElement(Td,Object.assign({},a,{icon:Ql(e,Object.assign(Object.assign({},e.props),{onClick:()=>{}}))})):I.createElement(Td,Object.assign({},a),I.createElement("span",null,e))};I.useImperativeHandle(t,(()=>({handlePreview:T,handleDownload:A})));const{getPrefixCls:M}=I.useContext(B),z=M("upload",c),L=M(),j=F()(`${z}-list`,`${z}-list-${n}`),H=I.useMemo((()=>_(Nm(L),["onAppearEnd","onEnterEnd","onLeaveEnd"])),[L]),V=Object.assign(Object.assign({},$?{}:H),{motionDeadline:2e3,motionName:`${z}-${$?"animate-inline":"animate"}`,keys:P(d.map((e=>({key:e.uid,file:e})))),motionAppear:E});return I.createElement("div",{className:j},I.createElement(Yu,Object.assign({},V,{component:!1}),(e=>{let{key:t,file:r,className:o,style:a}=e;return I.createElement(rA,{key:t,locale:s,prefixCls:z,className:o,style:a,file:r,items:d,progress:y,listType:n,isImgUrl:u,showPreviewIcon:h,showRemoveIcon:p,showDownloadIcon:f,removeIcon:m,previewIcon:g,downloadIcon:v,extra:b,iconRender:R,actionIconRender:D,itemRender:k,onPreview:T,onDownload:A,onClose:O})})),w&&I.createElement(Qu,Object.assign({},V,{visible:x,forceRender:!0}),(e=>{let{className:t,style:n}=e;return Ql(w,(e=>({className:F()(e.className,t),style:Object.assign(Object.assign(Object.assign({},n),{pointerEvents:t?"none":void 0}),e.style)})))})))};const aA=I.forwardRef(oA);var iA=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(kbe){a(kbe)}}function s(e){try{l(r.throw(e))}catch(kbe){a(kbe)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))};const sA=`__LIST_IGNORE_${Date.now()}__`,lA=(e,t)=>{const{fileList:n,defaultFileList:r,onRemove:o,showUploadList:a=!0,listType:i="text",onPreview:s,onDownload:l,onChange:u,onDrop:c,previewFile:d,disabled:h,locale:p,iconRender:f,isImageUrl:m,progress:g,prefixCls:v,className:b,type:y="select",children:w,style:x,itemRender:k,maxCount:C,data:S={},multiple:E=!1,hasControlInside:N=!0,action:$="",accept:T="",supportServerRender:A=!0,rootClassName:O}=e,R=I.useContext(dl),D=null!==h&&void 0!==h?h:R,[_,M]=so(r||[],{value:n,postState:e=>null!==e&&void 0!==e?e:[]}),[z,L]=I.useState("drop"),j=I.useRef(null),H=I.useRef(null);I.useMemo((()=>{const e=Date.now();(n||[]).forEach(((t,n)=>{t.uid||Object.isFrozen(t)||(t.uid=`__AUTO__${e}_${n}__`)}))}),[n]);const V=(e,t,n)=>{let r=P(t),o=!1;1===C?r=r.slice(-1):C&&(o=r.length>C,r=r.slice(0,C)),(0,ru.flushSync)((()=>{M(r)}));const a={file:e,fileList:r};n&&(a.event=n),o&&"removed"!==e.status&&!r.some((t=>t.uid===e.uid))||(0,ru.flushSync)((()=>{null===u||void 0===u||u(a)}))},W=e=>{const t=e.filter((e=>!e.file[sA]));if(!t.length)return;const n=t.map((e=>uT(e.file)));let r=P(_);n.forEach((e=>{r=cT(e,r)})),n.forEach(((e,n)=>{let o=e;if(t[n].parsedFile)e.status="uploading";else{const{originFileObj:t}=e;let n;try{n=new File([t],t.name,{type:t.type})}catch(a){n=new Blob([t],{type:t.type}),n.name=t.name,n.lastModifiedDate=new Date,n.lastModified=(new Date).getTime()}n.uid=e.uid,o=n}V(o,r)}))},G=(e,t,n)=>{try{"string"===typeof e&&(e=JSON.parse(e))}catch(a){}if(!dT(t,_))return;const r=uT(t);r.status="done",r.percent=100,r.response=e,r.xhr=n;const o=cT(r,_);V(r,o)},U=(e,t)=>{if(!dT(t,_))return;const n=uT(t);n.status="uploading",n.percent=e.percent;const r=cT(n,_);V(n,r,e)},K=(e,t,n)=>{if(!dT(n,_))return;const r=uT(n);r.error=e,r.response=t,r.status="error";const o=cT(r,_);V(r,o)},q=e=>{let t;Promise.resolve("function"===typeof o?o(e):o).then((n=>{var r;if(!1===n)return;const o=function(e,t){const n=void 0!==e.uid?"uid":"name",r=t.filter((t=>t[n]!==e[n]));return r.length===t.length?null:r}(e,_);o&&(t=Object.assign(Object.assign({},e),{status:"removed"}),null===_||void 0===_||_.forEach((e=>{const n=void 0!==t.uid?"uid":"name";e[n]!==t[n]||Object.isFrozen(e)||(e.status="removed")})),null===(r=j.current)||void 0===r||r.abort(t),V(t,o))}))},X=e=>{L(e.type),"drop"===e.type&&(null===c||void 0===c||c(e))};I.useImperativeHandle(t,(()=>({onBatchStart:W,onSuccess:G,onProgress:U,onError:K,fileList:_,upload:j.current,nativeElement:H.current})));const{getPrefixCls:J,direction:Y,upload:Q}=I.useContext(B),Z=J("upload",v),ee=Object.assign(Object.assign({onBatchStart:W,onError:K,onProgress:U,onSuccess:G},e),{data:S,multiple:E,action:$,accept:T,supportServerRender:A,prefixCls:Z,disabled:D,beforeUpload:(t,n)=>iA(void 0,void 0,void 0,(function*(){const{beforeUpload:r,transformFile:o}=e;let a=t;if(r){const e=yield r(t,n);if(!1===e)return!1;if(delete t[sA],e===sA)return Object.defineProperty(t,sA,{value:!0,configurable:!0}),!1;"object"===typeof e&&e&&(a=e)}return o&&(a=yield o(a)),a})),onChange:void 0,hasControlInside:N});delete ee.className,delete ee.style,w&&!D||delete ee.id;const te=`${Z}-wrapper`,[ne,re,oe]=Z$(Z,te),[ae]=Ef("Upload",Fh.Upload),{showRemoveIcon:ie,showPreviewIcon:se,showDownloadIcon:le,removeIcon:ue,previewIcon:ce,downloadIcon:de,extra:he}="boolean"===typeof a?{}:a,pe="undefined"===typeof ie?!D:ie,fe=(e,t)=>a?I.createElement(aA,{prefixCls:Z,listType:i,items:_,previewFile:d,onPreview:s,onDownload:l,onRemove:q,showRemoveIcon:pe,showPreviewIcon:se,showDownloadIcon:le,removeIcon:ue,previewIcon:ce,downloadIcon:de,iconRender:f,extra:he,locale:Object.assign(Object.assign({},ae),p),isImageUrl:m,progress:g,appendAction:e,appendActionVisible:t,itemRender:k,disabled:D}):e,me=F()(te,b,O,re,oe,null===Q||void 0===Q?void 0:Q.className,{[`${Z}-rtl`]:"rtl"===Y,[`${Z}-picture-card-wrapper`]:"picture-card"===i,[`${Z}-picture-circle-wrapper`]:"picture-circle"===i}),ge=Object.assign(Object.assign({},null===Q||void 0===Q?void 0:Q.style),x);if("drag"===y){const e=F()(re,Z,`${Z}-drag`,{[`${Z}-drag-uploading`]:_.some((e=>"uploading"===e.status)),[`${Z}-drag-hover`]:"dragover"===z,[`${Z}-disabled`]:D,[`${Z}-rtl`]:"rtl"===Y});return ne(I.createElement("span",{className:me,ref:H},I.createElement("div",{className:e,style:ge,onDrop:X,onDragOver:X,onDragLeave:X},I.createElement(H$,Object.assign({},ee,{ref:j,className:`${Z}-btn`}),I.createElement("div",{className:`${Z}-drag-container`},w))),fe()))}const ve=F()(Z,`${Z}-select`,{[`${Z}-disabled`]:D}),be=I.createElement("div",{className:ve,style:w?void 0:{display:"none"}},I.createElement(H$,Object.assign({},ee,{ref:j})));return ne("picture-card"===i||"picture-circle"===i?I.createElement("span",{className:me,ref:H},fe(be,!!w)):I.createElement("span",{className:me,ref:H},be,fe()))};const uA=I.forwardRef(lA);var cA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const dA=I.forwardRef(((e,t)=>{var{style:n,height:r,hasControlInside:o=!1}=e,a=cA(e,["style","height","hasControlInside"]);return I.createElement(uA,Object.assign({ref:t,hasControlInside:o},a,{type:"drag",style:Object.assign(Object.assign({},n),{height:r})}))}));const hA=dA,pA=uA;pA.Dragger=hA,pA.LIST_IGNORE=sA;const fA=pA;const mA={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};var gA=function(e,t){return I.createElement(Ft,G({},e,{ref:t,icon:mA}))};const vA=I.forwardRef(gA);var bA=n(105),yA=n.n(bA),wA=n(579);const xA=e=>{let{setData:t}=e;const[n,r]=(0,I.useState)(!1);return(0,wA.jsx)(fA,{accept:".bib",beforeUpload:e=>{r(!0);const n=new FileReader;return n.onload=e=>{const n=e.target.result,o=yA().toJSON(n).map(((e,t)=>({key:t,name:e.entryTags.title||"Unknown Title",abstract:e.entryTags.abstract||"No Abstract Available",citations:e.entryTags.citation||"Unknown Citation"})));t(o),cf.success("BibTeX file uploaded successfully!"),r(!1)},n.readAsText(e),!1},showUploadList:!1,loading:n,children:(0,wA.jsx)(Td,{icon:(0,wA.jsx)(vA,{}),type:"primary",style:{marginRight:"15px"},children:"Upload BibTeX"})})};var kA=n(766),CA=n.n(kA);const SA=e=>{let{setData:t,data:n}=e;const[r,o]=(0,I.useState)(!1);return(0,wA.jsx)(fA,{accept:".csv",beforeUpload:e=>{const r=new FileReader;return o(!0),r.onload=e=>{const r=e.target.result;CA().parse(r,{header:!0,complete:e=>{const r=e.data.map(((e,t)=>({key:t,name:e.name||"Unknown Title",abstract:e.abstract||"No Abstract Available",citations:e.citations||"Unknown Citation"})));t(n.concat(r)),cf.success("CSV file uploaded successfully!"),o(!1)},error:()=>{cf.error("There was an error processing the CSV file.")}})},r.readAsText(e),!1},showUploadList:!1,loading:r,children:(0,wA.jsx)(Td,{icon:(0,wA.jsx)(vA,{}),type:"primary",style:{marginRight:"15px"},children:"Upload CSV"})})};class EA{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class NA{refCount(e){return IA("refCount")}incRef(e){return IA("incRef")}timerAvailable(){return!0}time(e){return IA("time")}read(e){return IA("read")}readSync(e){return IA("readSync")}readToGPU(e,t){return IA("readToGPU")}numDataIds(){return IA("numDataIds")}disposeData(e,t){return IA("disposeData")}write(e,t,n){return IA("write")}move(e,t,n,r,o){return IA("move")}createTensorFromGPUData(e,t,n){return IA("createTensorFromGPUData")}memory(){return IA("memory")}floatPrecision(){return IA("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return IA("dispose")}}function IA(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function $A(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,OA(e,t,n)}function TA(e,t,n){return Math.max(e,Math.min(t,n))}function AA(e){return e%2===0?e:e+1}function OA(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function RA(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function PA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";RA(_A(e,t),(()=>n+` Shapes ${e} and ${t} must match`))}function DA(e){RA(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function FA(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function _A(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function MA(e){return e%1===0}function zA(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function LA(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function BA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise(((o,a)=>{let i=0;const s=()=>{if(e())return void o();i++;const l=t(i);null!=n&&i>=n?a():null!=r?r(s,l):setTimeout(s,l)};s()}))}function jA(e,t){let n=1,r=-1;for(let a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${a}`);r=a}else if(e[a]<0)throw Error(`Shapes can not be < 0. Found ${e[a]} at dim ${a}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const o=e.slice();return o[r]=t/n,o}function HA(e,t){const n=t.length;return e=null==e?t.map(((e,t)=>t)):[].concat(e),RA(e.every((e=>e>=-n&&e<n)),(()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`)),RA(e.every((e=>MA(e))),(()=>`All values in axis param must be integers but got axis ${e}`)),e.map((e=>e<0?n+e:e))}function VA(e,t){const n=[],r=[],o=null!=t&&Array.isArray(t)&&0===t.length,a=null==t||o?null:HA(t,e).sort();let i=0;for(let s=0;s<e.length;++s){if(null!=a){if(a[i]===s&&1!==e[s])throw new Error(`Can't squeeze axis ${s} since its dim '${e[s]}' is not 1`);(null==a[i]||a[i]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),a[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function WA(e,t){return GA(e,t)}function GA(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);n=new Array(t)}return n}function UA(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function KA(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function qA(e){return"string"===typeof e||e instanceof String}function XA(e){return"number"===typeof e}function JA(e){return Array.isArray(e)?JA(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":XA(e)?"float32":qA(e)?"string":"boolean"===typeof e?"bool":"float32"}function YA(e){return!!(e&&e.constructor&&e.call&&e.apply)}function QA(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function ZA(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function eO(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=new Array;if(1===t.length){const a=t[0]*(r?2:1);for(let t=0;t<a;t++)o[t]=n[e+t]}else{const a=t[0],i=t.slice(1),s=i.reduce(((e,t)=>e*t))*(r?2:1);for(let t=0;t<a;t++)o[t]=eO(e+t*s,i,n,r)}return o}function tO(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];const r=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return eO(0,e,t,n)}function nO(e,t){const n=rO(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function rO(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function oO(e,t){const n=e.reduce(((e,t)=>e*t),1);if(null==t||"float32"===t)return tO(e,new Float32Array(n));if("int32"===t)return tO(e,new Int32Array(n));if("bool"===t)return tO(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function aO(e){e.forEach((t=>{RA(Number.isInteger(t)&&t>=0,(()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`))}))}function iO(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let o=0;o<e.length-1;++o)r+=n[o]*e[o];return r}function sO(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(e/n[o]),e-=r[o]*n[o];return r[r.length-1]=e,r}function lO(e){return e&&e.then&&"function"===typeof e.then}const uO="tfjsflags";class cO{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=dO,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(hO().getBool("IS_TEST")||hO().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];hO().getBool("IS_TEST")||hO().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(lO(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(uO in e){e[uO].split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:""+ +n===n?+n:t}(0,n)}))}}}function dO(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}function hO(){return fO}let pO,fO=null;function mO(){if(null==pO){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}pO=e}return pO}function gO(e,t){const n=function(){const e=mO();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const vO="Abs",bO="Acos",yO="Acosh",wO="Add",xO="AddN",kO="All",CO="Any",SO="ArgMax",EO="ArgMin",NO="Asin",IO="Asinh",$O="Atan",TO="Atanh",AO="Atan2",OO="AvgPool",RO="AvgPoolGrad",PO="AvgPool3D",DO="AvgPool3DGrad",FO="BatchMatMul",_O="BatchToSpaceND",MO="Bincount",zO="BitwiseAnd",LO="BroadcastArgs",BO="Cast",jO="Ceil",HO="ClipByValue",VO="Complex",WO="ComplexAbs",GO="Concat",UO="Conv2D",KO="Conv2DBackpropFilter",qO="Conv2DBackpropInput",XO="Conv3D",JO="Conv3DBackpropFilterV2",YO="Conv3DBackpropInputV2",QO="Cos",ZO="Cosh",eR="Cumprod",tR="Cumsum",nR="CropAndResize",rR="DenseBincount",oR="DepthToSpace",aR="DepthwiseConv2dNative",iR="DepthwiseConv2dNativeBackpropFilter",sR="DepthwiseConv2dNativeBackpropInput",lR="Diag",uR="Dilation2D",cR="Dilation2DBackpropInput",dR="Dilation2DBackpropFilter",hR="Draw",pR="RealDiv",fR="Einsum",mR="Elu",gR="EluGrad",vR="Erf",bR="Equal",yR="Exp",wR="ExpandDims",xR="Expm1",kR="FFT",CR="Fill",SR="FlipLeftRight",ER="Floor",NR="FloorDiv",IR="FusedBatchNorm",$R="GatherV2",TR="GatherNd",AR="Greater",OR="GreaterEqual",RR="Identity",PR="IFFT",DR="Imag",FR="IsFinite",_R="IsInf",MR="IsNan",zR="LeakyRelu",LR="Less",BR="LessEqual",jR="LinSpace",HR="Log",VR="Log1p",WR="LogicalAnd",GR="LogicalNot",UR="LogicalOr",KR="LRN",qR="LRNGrad",XR="Max",JR="Maximum",YR="MaxPool",QR="MaxPoolGrad",ZR="MaxPool3D",eP="MaxPool3DGrad",tP="MaxPoolWithArgmax",nP="Mean",rP="Min",oP="Minimum",aP="MirrorPad",iP="Mod",sP="Multinomial",lP="Multiply",uP="Neg",cP="NotEqual",dP="NonMaxSuppressionV3",hP="NonMaxSuppressionV4",pP="NonMaxSuppressionV5",fP="OnesLike",mP="OneHot",gP="Pack",vP="PadV2",bP="Pow",yP="Prelu",wP="Prod",xP="RaggedGather",kP="RaggedRange",CP="RaggedTensorToTensor",SP="Range",EP="Real",NP="Reciprocal",IP="Relu",$P="Reshape",TP="ResizeNearestNeighbor",AP="ResizeNearestNeighborGrad",OP="ResizeBilinear",RP="ResizeBilinearGrad",PP="Relu6",DP="Reverse",FP="Round",_P="Rsqrt",MP="ScatterNd",zP="TensorScatterUpdate",LP="SearchSorted",BP="Select",jP="Selu",HP="Slice",VP="Sin",WP="Sinh",GP="Sign",UP="Sigmoid",KP="Softplus",qP="Sqrt",XP="Sum",JP="SpaceToBatchND",YP="SplitV",QP="Softmax",ZP="SparseFillEmptyRows",eD="SparseReshape",tD="SparseSegmentMean",nD="SparseSegmentSum",rD="SparseToDense",oD="SquaredDifference",aD="Square",iD="StaticRegexReplace",sD="StridedSlice",lD="StringNGrams",uD="StringSplit",cD="StringToHashBucketFast",dD="Sub",hD="Tan",pD="Tanh",fD="Tile",mD="TopK",gD="Transform",vD="Transpose",bD="Unique",yD="Unpack",wD="UnsortedSegmentSum",xD="ZerosLike",kD="Step",CD="FromPixels",SD="RotateWithOffset",ED="_FusedMatMul",ND="FusedConv2D",ID="FusedDepthwiseConv2D";function $D(){hO().getBool("IS_TEST")||hO().getBool("PROD")||console.warn(...arguments)}function TD(){hO().getBool("IS_TEST")||hO().getBool("PROD")||console.log(...arguments)}const AD=gO("kernelRegistry",(()=>new Map)),OD=gO("gradRegistry",(()=>new Map));function RD(e,t){const n=MD(e,t);return AD.get(n)}function PD(e){return OD.get(e)}function DD(e){const t=AD.entries(),n=[];for(;;){const{done:r,value:o}=t.next();if(r)break;const[a,i]=o,[s]=a.split("_");s===e&&n.push(i)}return n}function FD(e){const{kernelName:t,backendName:n}=e,r=MD(t,n);AD.has(r)&&$D(`The kernel '${t}' for backend '${n}' is already registered`),AD.set(r,e)}function _D(e){const{kernelName:t}=e;OD.has(t)&&hO().getBool("DEBUG")&&$D(`Overriding the gradient for '${t}'`),OD.set(t,e)}function MD(e,t){return`${t}_${e}`}function zD(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var LD=n(353),BD=n.n(LD);const jD=BD()||LD;function HD(e){return jD.fromString(e,!0,16)}const VD=HD("c3a5c85c97cb3127"),WD=HD("b492b66fbe98f273"),GD=HD("9ae16a3b2f90404f");function UD(e){return e.xor(e.shru(47))}function KD(e,t,n){const r=e.slice(t,t+n);return jD.fromBytes(Array.from(r),!0,!0)}function qD(e,t){return KD(e,t,8)}function XD(e,t){return KD(e,t,4)}function JD(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function YD(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:HD("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));let o=t.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function QD(e,t,n,r){return function(e,t,n,r,o,a){o=o.add(e),a=JD(a.add(o).add(r),21);const i=o;return o=(o=o.add(t)).add(n),a=a.add(JD(o,44)),[o.add(r),a.add(i)]}(qD(e,t),qD(e,t+8),qD(e,t+16),qD(e,t+24),n,r)}function ZD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=jD.fromNumber(81,!0);if(t<=32)return t<=16?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){const n=GD.add(2*t),r=qD(e,0).add(GD),o=qD(e,t-8);return YD(JD(o,37).mul(n).add(r),JD(r,25).add(o).mul(n),n)}if(t>=4){const n=GD.add(2*t);return YD(XD(e,0).shl(3).add(t),XD(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return UD(GD.mul(n).xor(VD.mul(r))).mul(GD)}return GD}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=GD.add(2*t),r=qD(e,0).mul(WD),o=qD(e,8),a=qD(e,t-8).mul(n),i=qD(e,t-16).mul(GD);return YD(JD(r.add(o),43).add(JD(a,30)).add(i),r.add(JD(o.add(GD),18)).add(a),n)}(e,t);if(t<=64)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=GD.add(2*t),r=qD(e,0).mul(GD),o=qD(e,8),a=qD(e,t-8).mul(n),i=qD(e,t-16).mul(GD),s=JD(r.add(o),43).add(JD(a,30)).add(i),l=YD(s,r.add(JD(o.add(GD),18)).add(a),n),u=qD(e,16).mul(n),c=qD(e,24),d=s.add(qD(e,t-32)).mul(n),h=l.add(qD(e,t-24)).mul(n);return YD(JD(u.add(c),43).add(JD(d,30)).add(h),u.add(JD(c.add(r),18)).add(d),n)}(e,t);let r=n,o=n.mul(WD).add(113),a=UD(o.mul(GD).add(113)).mul(GD),i=[jD.UZERO,jD.UZERO],s=[jD.UZERO,jD.UZERO];r=r.mul(GD).add(qD(e,0));let l=0;const u=64*(t-1>>6),c=u+(t-1&63)-63;do{r=JD(r.add(o).add(i[0]).add(qD(e,l+8)),37).mul(WD),o=JD(o.add(i[1]).add(qD(e,l+48)),42).mul(WD),r=r.xor(s[1]),o=o.add(i[0]).add(qD(e,l+40)),a=JD(a.add(s[0]),33).mul(WD),i=QD(e,l,i[1].mul(WD),r.add(s[0])),s=QD(e,l+32,a.add(s[1]),o.add(qD(e,l+16))),[a,r]=[r,a],l+=64}while(l!==u);const d=WD.add(a.and(255).shl(1));return l=c,s[0]=s[0].add(t-1&63),i[0]=i[0].add(s[0]),s[0]=s[0].add(i[0]),r=JD(r.add(o).add(i[0]).add(qD(e,l+8)),37).mul(d),o=JD(o.add(i[1]).add(qD(e,l+48)),42).mul(d),r=r.xor(s[1].mul(9)),o=o.add(i[0].mul(9).add(qD(e,l+40))),a=JD(a.add(s[0]),33).mul(d),i=QD(e,l,i[1].mul(d),r.add(s[0])),s=QD(e,l+32,a.add(s[1]),o.add(qD(e,l+16))),[a,r]=[r,a],YD(YD(i[0],s[0],d).add(UD(o).mul(VD)).add(a),YD(i[1],s[1],d).add(r),d)}function eF(e,t){return"string"===t?rF(e):tF([e],t)}function tF(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=iF(e)),hO().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error(`Unknown data type ${t}`)}function nF(){return hO().platform.now()}function rF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",hO().platform.encode(e,t)}function oF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",hO().platform.decode(e,t)}function aF(e){return null!=hO().platform.isTypedArray?hO().platform.isTypedArray(e):zD(e)}function iF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||lO(e)||null==e||aF(e)&&n)t.push(e);else if(Array.isArray(e)||aF(e))for(let r=0;r<e.length;++r)iF(e[r],t,n);else{let r=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(r=Math.max(r,Number(t)));for(let o=0;o<=r;o++)iF(e[o],t,n)}return t}class sF{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new uF)}profileKernel(e,t,n){let r;const o=()=>{r=n()};let a;const i=nF();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{o();for(const e of r)e.dataSync();a=Promise.resolve({kernelMs:nF()-i})}if(hO().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let s=0;s<r.length;s++){const t=r[s];t.data().then((n=>{lF(n,t.dtype,e)}))}return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((e=>e.kernelMs)),extraInfo:a.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:o,extraInfo:a}=e;n.forEach((e=>{Promise.all([e.data(),r,a]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],o,n[2])}))}))}}function lF(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){const t=e[r];if(isNaN(t)||!isFinite(t))return console.warn(`Found ${t} in the result of '${n}'`),!0}return!1}class uF{logKernelProfile(e,t,n,r,o,a){const i="number"===typeof r?LA(`${r}ms`,9):r.error,s=LA(e,25),l=t.rank,u=t.size,c=LA(t.shape.toString(),14);let d="";for(const h in o){const e=o[h];if(null!=e){const n=e.shape||t.shape,r=n.length;d+=`${h}: ${r}D ${r>0?n:""} `}}console.log(`%c${s}\t%c${i}\t%c${l}D ${c}\t%c${u}\t%c${d}\t%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function cF(e,t,n,r){const o=ZA(t),a=function(e,t,n,r){const o=FA(t),a=r[r.length-1],i=new Array(a).fill(0),s=t.length,l="complex64"===n?fF(e):e;if(s>1)for(let u=0;u<o/a;u++){const e=u*a;for(let t=0;t<a;t++)i[t]=Math.max(i[t],dF(l[e+t],0,n).length)}return i}(e,t,n,o),i=t.length,s=pF(e,t,n,o,a),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${i}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(s.map((e=>"    "+e)).join("\n")),l.join("\n")}function dF(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:qA(e)?`'${e}'`:"bool"===n?hF(e):parseFloat(e.toFixed(7)).toString(),LA(r,t)}function hF(e){return 0===e?"false":"true"}function pF(e,t,n,r,o){let a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const i="complex64"===n?2:1,s=t[0],l=t.length;if(0===l){if("complex64"===n){return[dF(fF(e)[0],0,n)]}return"bool"===n?[hF(e[0])]:[e[0].toString()]}if(1===l){if(s>20){const t=3*i;let r=Array.from(e.slice(0,t)),a=Array.from(e.slice((s-3)*i,s*i));return"complex64"===n&&(r=fF(r),a=fF(a)),["["+r.map(((e,t)=>dF(e,o[t],n))).join(", ")+", ..., "+a.map(((e,t)=>dF(e,o[s-3+t],n))).join(", ")+"]"]}return["["+("complex64"===n?fF(e):Array.from(e)).map(((e,t)=>dF(e,o[t],n))).join(", ")+"]"]}const u=t.slice(1),c=r.slice(1),d=r[0]*i,h=[];if(s>20){for(let t=0;t<3;t++){const r=t*d,a=r+d;h.push(...pF(e.slice(r,a),u,n,c,o,!1))}h.push("...");for(let t=s-3;t<s;t++){const r=t*d,a=r+d;h.push(...pF(e.slice(r,a),u,n,c,o,t===s-1))}}else for(let m=0;m<s;m++){const t=m*d,r=t+d;h.push(...pF(e.slice(t,r),u,n,c,o,m===s-1))}const p=2===l?",":"";h[0]="["+(s>0?h[0]+p:"");for(let m=1;m<h.length-1;m++)h[m]=" "+h[m]+p;let f=",\n";for(let m=2;m<l;m++)f+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(a?"":f),h}function fF(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class mF{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=FA(e),null!=n){const e=n.length;RA(e===this.size,(()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||GA(t,this.size),this.strides=ZA(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),RA(n.length===this.rank,(()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`));const o=this.locToIndex(n);this.values[o]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let r=0;for(const a of t){if(a<0||a>=this.shape[r]){const e=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(e)}r++}let o=t[t.length-1];for(let a=0;a<t.length-1;++a)o+=this.strides[a]*t[a];return this.values[o]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return gF().makeTensor(this.values,this.shape,this.dtype)}}let gF=null,vF=null,bF=null;class yF{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=FA(e),this.strides=ZA(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return vF.buffer(this.shape,this.dtype,e)}bufferSync(){return vF.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return tO(this.shape,e,"complex64"===this.dtype)}arraySync(){return tO(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=gF().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map((e=>oF(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),gF().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=gF().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>oF(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await gF().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),gF().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return vF.print(this,e)}clone(){return this.throwIfDisposed(),vF.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return cF(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),vF.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),gF().makeVariable(this,e,t,n)}}function wF(){return gO("Tensor",(()=>yF))}Object.defineProperty(yF,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),wF();class xF extends yF{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!_A(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);gF().disposeTensor(this),this.dataId=e.dataId,gF().incRef(this,null)}dispose(){gF().disposeVariable(this),this.isDisposedInternal=!0}}var kF,CF,SF,EF,NF;Object.defineProperty(xF,Symbol.hasInstance,{value:e=>e instanceof yF&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(kF||(kF={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(CF||(CF={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(SF||(SF={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(EF||(EF={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(NF||(NF={}));const IF={float32:EF,int32:CF,bool:SF,complex64:NF};function $F(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return IF[e][t]}function TF(e){return $F(e,"int32")}function AF(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function OF(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function RF(e,t){if(e.dtype===t.dtype)return[e,t];const n=$F(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function PF(e,t){return t.some((t=>t.id===e.id))}function DF(e){const t=[];return FF(e,t,new Set),t}function FF(e,t,n){if(null==e)return;if(e instanceof yF)return void t.push(e);if(r=e,!Array.isArray(r)&&"object"!==typeof r)return;var r;const o=e;for(const a in o){const e=o[a];n.has(e)||(n.add(e),FF(e,t,n))}}function _F(e){return null!=e.kernelName}class MF{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class zF{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new MF}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?($D(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new sF(this.backendInstance),!0}setupRegisteredKernels(){DD(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){DD(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const n=t.factory();if(!n||n instanceof NA||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,$D(`Initialization of backend ${e} failed`),$D(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return $D(`Initialization of backend ${e} failed`),$D(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:o}=this.initializeBackend(n);if(o||r)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,o=this.readSync(t),a=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,o,n.shape,n.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return zF.nextTensorId++}nextVariableId(){return zF.nextVariableId++}clone(e){const t=BF.runKernel(RR,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e},n={dtype:"float32"};return BF.runKernel(BO,t,n)}})),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=RD(e,this.backendName)))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let o=0;n.forEach((e=>{o+="complex64"===e.dtype?3:1}));const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-o-a;if(i>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${i} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),o=this.state.numBytes,a=this.state.numTensors;let i,s;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=_F(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(_F(e)){const{kernelName:t,inputs:o,attrs:a}=e;null==this.backendName&&this.backend;const l=RD(t,this.backendName);RA(null!=l,(()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`)),i=()=>{const e=this.backend.numDataIds();s=l.kernelFunc({inputs:o,attrs:a,backend:this.backend});const i=Array.isArray(s)?s:[s];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,i);const u=i.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(r){const e=this.getTensorsForGradient(t,o,u);n=this.saveTensorsForBackwardMode(e)}return u}}else{const{forwardFunc:t}=e,o=e=>{r&&(n=e.map((e=>this.keep(this.clone(e)))))};i=()=>{const e=this.backend.numDataIds();s=this.tidy((()=>t(this.backend,o)));const n=Array.isArray(s)?s:[s];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:u,attrs:c}=e,d=_F(e)?null:e.backwardsFunc;let h;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(h=this.profiler.profileKernel(l,u,(()=>i())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),t=h.outputs):t=i()})),r&&this.addTapeNode(l,u,t,d,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map((e=>null!=u[e]?u[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(s)?t:t[0]}saveTensorsForBackwardMode(e){return e.map((e=>this.keep(this.clone(e))))}getTensorsForGradient(e,t,n){const r=PD(e);if(null!=r){const e=r.inputsToSave||[],o=r.outputsToSave||[];let a;r.saveAllInputs?(RA(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),a=Object.keys(t).map((e=>t[e]))):a=e.map((e=>t[e]));const i=n.filter(((e,t)=>o[t]));return a.concat(i)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let o=e;"string"===n&&qA(e[0])&&(o=e.map((e=>rF(e))));const a=r.write(o,t,n),i=new yF(t,n,a,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){const e=this.state.tensorInfo.get(a),t=function(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}(o);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,n,r){const o={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(o,r)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:r,dtype:o}=e,a=new yF(r,o,n,this.nextTensorId());return this.trackTensor(a,t),a}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const o=new xF(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*KA(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof xF||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*KA(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,o,a){const i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:o},s=PD(e);null!=s&&(r=s.gradFunc),null!=r&&(i.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],r=rO(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e})),r(e.length>1?e:e[0],o,a))),this.state.activeTape.push(i)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=DF(e),n=new Set(t.map((e=>e.id)));for(let o=0;o<this.state.activeScope.track.length;o++){const e=this.state.activeScope.track[o];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==r.id||this.track(e)}))}gradients(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(RA(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const o=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));RA(o instanceof yF,(()=>"The result y returned by f() must be a tensor."));const a=function(e,t,n){const r={},o={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){const n=e[l],a=n.inputs;for(const e in a){const i=a[e];let s=!1;for(let e=0;e<t.length;e++)if(r[i.id]){n.outputs.forEach((e=>r[e.id]=!0)),s=!0,o[n.id]=!0;break}if(s)break}}const a={};a[n.id]=!0;const i={};for(let l=e.length-1;l>=0;l--){const t=e[l],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(a[t.outputs[e].id]){for(const e in n)a[n[e].id]=!0,i[t.id]=!0;break}}const s=[];for(let l=0;l<e.length;l++){const t=e[l];if(o[t.id]&&i[t.id]){const e={};for(const o in t.inputs){const n=t.inputs[o];r[n.id]&&(e[o]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,s.push(n)}}return s}(this.state.activeTape,t,o);if(!r&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[o.id]=null==n?function(e){const t=nO(FA(e),"float32");return BF.makeTensor(t,e,"float32")}(o.shape):n,function(e,t,n,r){for(let o=t.length-1;o>=0;o--){const a=t[o],i=[];if(a.outputs.forEach((t=>{const n=e[t.id];null!=n?i.push(n):i.push(null)})),null==a.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const s=a.gradient(i);for(const t in a.inputs){if(!(t in s))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(s)}.`);const o=n((()=>s[t]()));if("float32"!==o.dtype)throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${o.dtype}'`);const i=a.inputs[t];if(!_A(o.shape,i.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${t}' has shape '${o.shape}', which does not match the shape of the input '${i.shape}'`);if(null==e[i.id])e[i.id]=o;else{const t=e[i.id];e[i.id]=r(t,o),t.dispose()}}}}(e,a,(e=>this.tidy(e)),jF);const r=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:o,grads:r}}))}customGrad(e){var t=this;return RA(YA(e),(()=>"The f passed in customGrad(f) must be a function.")),function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];let a;RA(r.every((e=>e instanceof yF)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const i={};r.forEach(((e,t)=>{i[t]=e}));return t.runKernelFunc({forwardFunc:(t,n)=>(a=e(...r,n),RA(a.value instanceof yF,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),RA(YA(a.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),a.value),backwardsFunc:(e,t)=>{const n=a.gradFunc(e,t),o=Array.isArray(n)?n:[n];RA(o.length===r.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),RA(o.every((e=>e instanceof yF)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const i={};return o.forEach(((e,t)=>{i[t]=()=>e})),i},inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=nF(),n=await this.backend.time(e);return n.wallMs=nF()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new MF;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function LF(){const e=mO();if(null==e._tfengine){const t=new cO(e);e._tfengine=new zF(t)}var t;return t=e._tfengine.ENV,fO=t,gF=()=>e._tfengine,e._tfengine}zF.nextTensorId=0,zF.nextVariableId=0;const BF=LF();function jF(e,t){const n={a:e,b:t};return BF.runKernel(wO,n)}let HF;function VF(e){if(void 0!==HF)return HF;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function WF(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}const GF=hO();function UF(e,t){let n=e;if(aF(e))return"string"===t?[]:[e.length];if(AF(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(OF(e))return[e.buffer.size/(null==t?4:KA(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||aF(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&hO().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&KF(e,r,[]),r}function KF(e,t,n){if(n=n||[],!Array.isArray(e)&&!aF(e))return void RA(0===t.length,(()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`));RA(t.length>0,(()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`)),RA(e.length===t[0],(()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`));const r=t.slice(1);for(let o=0;o<e.length;++o)KF(e[o],r,n.concat(o))}function qF(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function XF(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof wF())return qF(r,e.dtype,t,n),e;let o=JA(e);if("string"!==o&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),qF(r,o,t,n),null==e||!aF(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}const a=UF(e,o);aF(e)||Array.isArray(e)||(e=[e]);const i="string"!==o?tF(e,o):iF(e,[],!0);return BF.makeTensor(i,a,o)}function JF(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map(((e,o)=>XF(e,`${t}[${o}]`,n,r)))}GF.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),GF.registerFlag("IS_BROWSER",(()=>WF())),GF.registerFlag("IS_NODE",(()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node)),GF.registerFlag("IS_CHROME",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),GF.registerFlag("IS_SAFARI",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor))),GF.registerFlag("PROD",(()=>!1)),GF.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>GF.getBool("DEBUG"))),GF.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),GF.registerFlag("IS_TEST",(()=>!1)),GF.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>GF.getBool("DEBUG"))),GF.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),GF.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(()=>!1)),GF.registerFlag("USE_SETTIMEOUTCUSTOM",(()=>!1));function YF(e){const t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";const o=function(){BF.startScope(n);try{const e=r(...arguments);return lO(e)&&console.error("Cannot return a Promise inside of tidy."),BF.endScope(e),e}catch(e){throw BF.endScope(null),e}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}const QF=YF({complex_:function(e,t){const n=XF(e,"real","complex"),r=XF(t,"imag","complex");PA(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const o={real:n,imag:r};return BF.runKernel(VO,o)}});function ZF(e,t,n,r){if(null==r)r=JA(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(OF(e)||AF(e)){if("float32"!==r&&"int32"!==r)throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return BF.backend.createTensorFromGPUData(e,t||n,r)}if(!aF(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){aO(t);const e=FA(t),r=FA(n);RA(e===r,(()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`));for(let o=0;o<n.length;++o){const e=n[o],r=o!==n.length-1||e!==FA(t.slice(o));RA(n[o]===t[o]||!r,(()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `))}}return aF(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?tF(e,r):iF(e,[],!0),BF.makeTensor(e,t,r)}function e_(e,t,n){return ZF(e,t,UF(e,n),n)}class t_{static join(e){return new t_(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map((e=>aF(e)?e.buffer:e))).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const o=t+r.byteLength;this.shards.push({buffer:r,start:t,end:o}),t=o}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error(`Could not find start shard for byte ${e}`);const r=new ArrayBuffer(t-e),o=new Uint8Array(r);let a=0;for(let i=n;i<this.shards.length;i++){const n=this.shards[i],r=e+a-n.start,s=a,l=Math.min(t,n.end)-n.start,u=new Uint8Array(n.buffer,r,l-r);if(o.set(u,s),a+=u.length,t<n.end)break}return r}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,r=e.length;for(;n<=r;){const o=Math.floor((r-n)/2)+n,a=t(e[o]);if(0===a)return o;a<0?r=o:n=o+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}function n_(){return BF}function r_(){return BF.memory()}function o_(e,t){return BF.tidy(e,t)}function a_(e){DF(e).forEach((e=>e.dispose()))}function i_(e){return BF.keep(e)}function s_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return BF.registerBackend(e,t,n)}function l_(){return BF.backend}bF=function(e){hO().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")};async function u_(e,t){const n=[],r=[],o=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let a=0;a<o.length;++a){const i=o[a],s=Array.isArray(e)?e[a].tensor:e[i];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error(`Unsupported dtype in weight '${i}': ${s.dtype}`);const l={name:i,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){const e=new Promise((async e=>{const t=await s.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+4*t.length,r=new Uint8Array(n);let o=0;for(let a=0;a<t.length;a++){const e=t[a],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,o),o+=4,r.set(e,o),o+=e.length}e(r)}));r.push(e)}else r.push(s.data());null!=t&&(l.group=t),n.push(l)}return{data:c_(await Promise.all(r)),specs:n}}function c_(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)}));const r=new Uint8Array(t);let o=0;return n.forEach((e=>{r.set(new Uint8Array(e.buffer),o),o+=e.byteLength})),r.buffer}const d_="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function h_(e){return d_?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function p_(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}async function f_(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),function(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}(e,n,r)}function m_(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:h_(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:h_(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new t_(e.weightData).byteLength}}function g_(e){const t=[];for(const n of e)t.push(...n.weights);return t}class v_{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==v_.instance&&(v_.instance=new v_),v_.instance}static registerSaveRouter(e){v_.getInstance().saveRouters.push(e)}static registerLoadRouter(e){v_.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return v_.getHandlers(e,"save")}static getLoadHandlers(e,t){return v_.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?v_.getInstance().loadRouters:v_.getInstance().saveRouters).forEach((t=>{const o=t(e,n);null!==o&&r.push(o)})),r}}const b_="tensorflowjs",y_="models_store",w_="model_info_store";function x_(){if(!hO().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function k_(e){const t=e.result;t.createObjectStore(y_,{keyPath:"modelPath"}),t.createObjectStore(w_,{keyPath:"modelPath"})}class C_{constructor(e){if(this.indexedDB=x_(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const r=this.indexedDB.open(b_,1);r.onupgradeneeded=()=>k_(r),r.onsuccess=()=>{const o=r.result;if(null==t){const t=o.transaction(y_,"readonly"),r=t.objectStore(y_).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return o.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(o.close(),n(r.error)),t.oncomplete=()=>o.close()}else{t.weightData=t_.join(t.weightData);const r=m_(t),i=o.transaction(w_,"readwrite");let s,l,u=i.objectStore(w_);try{s=u.put({modelPath:this.modelPath,modelArtifactsInfo:r})}catch(a){return n(a)}s.onsuccess=()=>{l=o.transaction(y_,"readwrite");const s=l.objectStore(y_);let c;try{c=s.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r})}catch(a){return n(a)}c.onsuccess=()=>e({modelArtifactsInfo:r}),c.onerror=e=>{u=i.objectStore(w_);const t=u.delete(this.modelPath);t.onsuccess=()=>(o.close(),n(c.error)),t.onerror=e=>(o.close(),n(c.error))}},s.onerror=e=>(o.close(),n(s.error)),i.oncomplete=()=>{null==l?o.close():l.oncomplete=()=>o.close()}}},r.onerror=e=>n(r.error)}))}}C_.URL_SCHEME="indexeddb://";const S_=e=>{return hO().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(C_.URL_SCHEME)?(t=e.slice(C_.URL_SCHEME.length),new C_(t)):null;var t};v_.registerSaveRouter(S_),v_.registerLoadRouter(S_);class E_{constructor(){this.indexedDB=x_()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(b_,1);n.onupgradeneeded=()=>k_(n),n.onsuccess=()=>{const r=n.result,o=r.transaction(w_,"readonly"),a=o.objectStore(w_).getAll();a.onsuccess=()=>{const t={};for(const e of a.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},a.onerror=e=>(r.close(),t(a.error)),o.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(C_.URL_SCHEME)?t.slice(C_.URL_SCHEME.length):t,new Promise(((t,n)=>{const r=this.indexedDB.open(b_,1);r.onupgradeneeded=()=>k_(r),r.onsuccess=()=>{const o=r.result,a=o.transaction(w_,"readwrite"),i=a.objectStore(w_),s=i.get(e);let l;s.onsuccess=()=>{if(null==s.result)return o.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const r=i.delete(e),a=()=>{l=o.transaction(y_,"readwrite");const r=l.objectStore(y_).delete(e);r.onsuccess=()=>t(s.result.modelArtifactsInfo),r.onerror=e=>n(s.error)};r.onsuccess=a,r.onerror=e=>(a(),o.close(),n(s.error))}},s.onerror=e=>(o.close(),n(s.error)),a.oncomplete=()=>{null==l?o.close():l.oncomplete=()=>o.close()}},r.onerror=e=>n(r.error)}))}}const N_="/",I_="tensorflowjs_models",$_="info",T_="model_topology",A_="weight_specs",O_="weight_data",R_="model_metadata";function P_(e){return{info:[I_,e,$_].join(N_),topology:[I_,e,T_].join(N_),weightSpecs:[I_,e,A_].join(N_),weightData:[I_,e,O_].join(N_),modelMetadata:[I_,e,R_].join(N_)}}function D_(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function F_(e){const t=e.split(N_);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(N_)}class __{constructor(e){if(!hO().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=P_(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=m_(e),a=t_.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(d_)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,o=t.length;r<o;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(a));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:o}}catch(t){throw D_(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;const o=this.LS.getItem(this.keys.modelMetadata);if(null!=o){const e=JSON.parse(o);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(null==a)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(d_){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}(a),t}}__.URL_SCHEME="localstorage://";const M_=e=>{return hO().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(__.URL_SCHEME)?(t=e.slice(__.URL_SCHEME.length),new __(t)):null;var t};v_.registerSaveRouter(M_),v_.registerLoadRouter(M_);class z_{constructor(){RA(hO().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),RA("undefined"===typeof window||"undefined"!==typeof window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=I_+N_,n=N_+$_;for(let r=0;r<this.LS.length;++r){const o=this.LS.key(r);if(o.startsWith(t)&&o.endsWith(n)){e[F_(o)]=JSON.parse(this.LS.getItem(o))}}return e}async removeModel(e){var t;const n=P_(e=(t=e).startsWith(__.URL_SCHEME)?t.slice(__.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return D_(n),r}}const L_="://";class B_{constructor(){this.managers={}}static getInstance(){return null==B_.instance&&(B_.instance=new B_),B_.instance}static registerManager(e,t){RA(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(L_)&&(e=e.slice(0,e.indexOf(L_))),RA(e.length>0,(()=>"scheme must not be an empty string."));const n=B_.getInstance();RA(null==n.managers[e],(()=>`A model store manager is already registered for scheme '${e}'.`)),n.managers[e]=t}static getManager(e){const t=B_.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(B_.getInstance().managers)}}class j_{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!==typeof window&&hO().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}}),!0))):setTimeout(e,t)}isTypedArray(e){return zD(e)}}if(hO().get("IS_BROWSER")){hO().setPlatform("browser",new j_);try{B_.registerManager(__.URL_SCHEME,new z_)}catch(dTe){}try{B_.registerManager(C_.URL_SCHEME,new E_)}catch(dTe){}}const H_=()=>n(78);let V_;class W_{constructor(){this.util=n(905),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=hO().global.fetch?hO().global.fetch(e,t):(null==V_&&(V_=H_()),V_(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}function G_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",aO(e),new mF(e,t,n)}hO().get("IS_NODE")&&!hO().get("IS_BROWSER")&&hO().setPlatform("node",new W_);const U_=YF({cast_:function(e,t){const n=XF(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},o={dtype:t};return BF.runKernel(BO,r,o)}});const K_=YF({clone_:function(e){const t={x:XF(e,"x","clone","string_or_numeric")};return BF.runKernel(RR,t)}});LF();const q_={buffer:G_,cast:U_,clone:K_,print:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};vF=q_;const X_=YF({add_:function(e,t){let n=XF(e,"a","add"),r=XF(t,"b","add");[n,r]=RF(n,r);const o={a:n,b:r};return BF.runKernel(wO,o)}});const J_=YF({floorDiv_:function(e,t){let n=XF(e,"a","floorDiv"),r=XF(t,"b","floorDiv");[n,r]=RF(n,r);const o={a:n,b:r};return BF.runKernel(NR,o)}});const Y_=YF({div_:function(e,t){let n=XF(e,"a","div"),r=XF(t,"b","div");if([n,r]=RF(n,r),"int32"===n.dtype&&"int32"===r.dtype)return J_(n,r);const o={a:n,b:r};return BF.runKernel(pR,o,{})}});const Q_=YF({mul_:function(e,t){let n=XF(e,"a","mul"),r=XF(t,"b","mul");[n,r]=RF(n,r);const o={a:n,b:r};return BF.runKernel(lP,o)}});const Z_=YF({sqrt_:function(e){const t={x:XF(e,"x","sqrt","float32")};return BF.runKernel(qP,t)}});const eM=YF({square_:function(e){const t=XF(e,"x","square");return BF.runKernel("Square",{x:t},{})}});const tM=YF({zerosLike_:function(e){const t={x:XF(e,"x","zerosLike")};return BF.runKernel(xD,t)}});function nM(e){return BF.customGrad(e)}function rM(e,t){if((aF(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&aF(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return ZF(e,[],[],t)}const oM=new Map,aM=new Map;class iM{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class sM{constructor(){this.classNameMap={}}static getMap(){return null==sM.instance&&(sM.instance=new sM),sM.instance}static register(e){sM.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function lM(e,t,n){RA(null!=e.className,(()=>"Class being registered does not have the static className property defined.")),RA("string"===typeof e.className,(()=>"className is required to be a string, but got type "+typeof e.className)),RA(e.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),"undefined"===typeof t&&(t="Custom"),"undefined"===typeof n&&(n=e.className);const r=t+">"+n;return sM.register(e),oM.set(r,e),aM.set(e,r),e}class uM extends iM{minimize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{value:r,grads:o}=this.computeGradients(e,n);if(null!=n){const e=n.map((e=>({name:e.name,tensor:o[e.name]})));this.applyGradients(e)}else this.applyGradients(o);return a_(o),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){RA(YA(e),(()=>"The f passed in variableGrads(f) must be a function")),RA(null==t||Array.isArray(t)&&t.every((e=>e instanceof xF)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=t;if(!n){t=[];for(const e in BF.registeredVariables)t.push(BF.registeredVariables[e])}const r=n?t.filter((e=>!e.trainable)):null,o=t.length;t=t.filter((e=>e.trainable)),RA(t.length>0,(()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`));const{value:a,grads:i}=BF.gradients(e,t,null,!0);RA(i.some((e=>null!=e)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),RA(0===a.rank,(()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`));const s={};return t.forEach(((e,t)=>{null!=i[t]&&(s[e.name]=i[t])})),null!=r&&r.forEach((e=>s[e.name]=null)),{value:a,grads:s}}(e,t)}dispose(){null!=this.iterations_&&a_(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:rM(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(uM,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class cM extends uM{static get className(){return"Adadelta"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=BF.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=BF.registeredVariables[t],o=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${t}/accum_grad`,variable:o_((()=>tM(r).variable(o)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:`${t}/accum_var`,variable:o_((()=>tM(r).variable(o)))});const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const i=this.accumulatedGrads[n].variable,s=this.accumulatedUpdates[n].variable;o_((()=>{const e=X_(Q_(i,this.rho),Q_(eM(a),1-this.rho)),t=Q_(Y_(Z_(X_(s,this.epsilon)),Z_(X_(i,this.epsilon))),a),n=X_(Q_(s,this.rho),Q_(eM(t),1-this.rho));i.assign(e),s.assign(n);const o=X_(Q_(t,-this.learningRate),r);r.assign(o)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(a_(this.accumulatedGrads.map((e=>e.variable))),a_(this.accumulatedUpdates.map((e=>e.variable))))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedUpdates=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}function dM(e,t,n){aO(e);const r={shape:e,value:t,dtype:n=n||JA(t)};return BF.runKernel(CR,{},r)}class hM extends uM{static get className(){return"Adagrad"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=BF.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:`${t}/accumulator`,variable:o_((()=>dM(r.shape,this.initialAccumulatorValue).variable(e)))}}const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const a=this.accumulatedGrads[n].variable;o_((()=>{const e=X_(a,eM(o));a.assign(e);const t=X_(Q_(Y_(o,Z_(X_(e,BF.backend.epsilon()))),-this.learningRate),r);r.assign(t)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&a_(this.accumulatedGrads.map((e=>e.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}const pM=YF({pow_:function(e,t){let n=XF(e,"base","pow"),r=XF(t,"exp","pow");[n,r]=RF(n,r);const o={a:n,b:r};return BF.runKernel(bP,o)}});const fM=YF({sub_:function(e,t){let n=XF(e,"a","sub"),r=XF(t,"b","sub");[n,r]=RF(n,r);const o={a:n,b:r};return BF.runKernel(dD,o)}});class mM extends uM{static get className(){return"Adam"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],o_((()=>{this.accBeta1=rM(t).variable(),this.accBeta2=rM(n).variable()})),null==r&&(this.epsilon=BF.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);o_((()=>{const n=fM(1,this.accBeta1),r=fM(1,this.accBeta2);t.forEach(((t,o)=>{const a=BF.registeredVariables[t],i=!1;null==this.accumulatedFirstMoment[o]&&(this.accumulatedFirstMoment[o]={originalName:`${t}/m`,variable:o_((()=>tM(a).variable(i)))}),null==this.accumulatedSecondMoment[o]&&(this.accumulatedSecondMoment[o]={originalName:`${t}/v`,variable:o_((()=>tM(a).variable(i)))});const s=Array.isArray(e)?e[o].tensor:e[t];if(null==s)return;const l=this.accumulatedFirstMoment[o].variable,u=this.accumulatedSecondMoment[o].variable,c=X_(Q_(l,this.beta1),Q_(s,1-this.beta1)),d=X_(Q_(u,this.beta2),Q_(eM(s),1-this.beta2)),h=Y_(c,n),p=Y_(d,r);l.assign(c),u.assign(d);const f=X_(Q_(Y_(h,X_(Z_(p),this.epsilon)),-this.learningRate),a);a.assign(f)})),this.accBeta1.assign(Q_(this.accBeta1,this.beta1)),this.accBeta2.assign(Q_(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&a_(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedSecondMoment&&a_(this.accumulatedSecondMoment.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),o_((()=>{this.accBeta1.assign(pM(this.beta1,this.iterations_+1)),this.accBeta2.assign(pM(this.beta2,this.iterations_+1))}));const t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedSecondMoment=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}const gM=YF({abs_:function(e){const t=XF(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return BF.runKernel(WO,e)}{const e={x:t};return BF.runKernel(vO,e)}}});function vM(e,t){const n=e.length,r=[];for(let o=0;o<n;o++){const a=n-1-o,i=e[a]||1;(t[t.length-1-o]||1)>1&&1===i&&r.unshift(a)}return r}function bM(e,t){const n=[];for(let r=0;r<t.length;r++){const o=e[e.length-r-1],a=t.length-r-1,i=t[a];(null==o||1===o&&i>1)&&n.unshift(a)}return n}function yM(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let o=0;o<n;o++){let a=e[e.length-o-1];null==a&&(a=1);let i=t[t.length-o-1];if(null==i&&(i=1),1===a)r[n-o-1]=i;else if(1===i)r[n-o-1]=a;else{if(a!==i){throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`)}r[n-o-1]=a}}return r}const wM=YF({maximum_:function(e,t){let n=XF(e,"a","maximum"),r=XF(t,"b","maximum");[n,r]=RF(n,r),"bool"===n.dtype&&(n=U_(n,"int32"),r=U_(r,"int32")),yM(n.shape,r.shape);const o={a:n,b:r};return BF.runKernel(JR,o)}});class xM extends uM{static get className(){return"Adamax"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=o,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],o_((()=>{this.iteration=rM(0).variable(),this.accBeta1=rM(t).variable()})),null==r&&(this.epsilon=BF.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);o_((()=>{const n=fM(1,this.accBeta1),r=Y_(-this.learningRate,X_(Q_(this.iteration,this.decay),1));t.forEach(((t,o)=>{const a=BF.registeredVariables[t],i=!1;null==this.accumulatedFirstMoment[o]&&(this.accumulatedFirstMoment[o]={originalName:`${t}/m`,variable:tM(a).variable(i)}),null==this.accumulatedWeightedInfNorm[o]&&(this.accumulatedWeightedInfNorm[o]={originalName:`${t}/v`,variable:tM(a).variable(i)});const s=Array.isArray(e)?e[o].tensor:e[t];if(null==s)return;const l=this.accumulatedFirstMoment[o].variable,u=this.accumulatedWeightedInfNorm[o].variable,c=X_(Q_(l,this.beta1),Q_(s,1-this.beta1)),d=Q_(u,this.beta2),h=gM(s),p=wM(d,h);l.assign(c),u.assign(p);const f=X_(Q_(Y_(r,n),Y_(c,X_(p,this.epsilon))),a);a.assign(f)})),this.iteration.assign(X_(this.iteration,1)),this.accBeta1.assign(Q_(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&a_(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedWeightedInfNorm&&a_(this.accumulatedWeightedInfNorm.map((e=>e.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}class kM extends uM{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);t.forEach(((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const o=BF.registeredVariables[t];o_((()=>{const e=X_(Q_(this.c,r),o);o.assign(e)}))})),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=i_(rM(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}class CM extends kM{static get className(){return"Momentum"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=rM(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=BF.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:`${t}/momentum`,variable:o_((()=>tM(r).variable(e)))}}const o=this.accumulations[n].variable,a=Array.isArray(e)?e[n].tensor:e[t];null!=a&&o_((()=>{let e;const t=X_(Q_(this.m,o),a);e=this.useNesterov?X_(Q_(this.c,X_(a,Q_(t,this.m))),r):X_(Q_(this.c,t),r),o.assign(t),r.assign(e)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&a_(this.accumulations.map((e=>e.variable)))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}class SM extends uM{static get className(){return"RMSProp"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=o,null==r&&(this.epsilon=BF.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=BF.registeredVariables[t],o=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:`${t}/rms`,variable:o_((()=>tM(r).variable(o)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:`${t}/momentum`,variable:o_((()=>tM(r).variable(o)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${t}/mg`,variable:o_((()=>tM(r).variable(o)))});const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const i=this.accumulatedMeanSquares[n].variable,s=this.accumulatedMoments[n].variable;o_((()=>{const e=X_(Q_(i,this.decay),Q_(eM(a),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,o=X_(Q_(t,this.decay),Q_(a,1-this.decay)),l=Y_(Q_(a,this.learningRate),Z_(fM(e,X_(eM(o),this.epsilon)))),u=X_(Q_(s,this.momentum),l);i.assign(e),t.assign(o),s.assign(u);const c=fM(r,u);r.assign(c)}else{const e=X_(Q_(i,this.decay),Q_(eM(a),1-this.decay)),t=X_(Q_(s,this.momentum),Y_(Q_(a,this.learningRate),Z_(X_(e,this.epsilon))));i.assign(e),s.assign(t);const n=fM(r,t);r.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&a_(this.accumulatedMeanSquares.map((e=>e.variable))),null!=this.accumulatedMeanGrads&&this.centered&&a_(this.accumulatedMeanGrads.map((e=>e.variable))),null!=this.accumulatedMoments&&a_(this.accumulatedMoments.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedMoments=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}const EM=[cM,hM,mM,xM,CM,SM,kM];function NM(e){return new Promise((e=>setTimeout(e))).then(e)}class IM{constructor(e){if(!hO().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(IM.URL_SCHEME)&&(e=e.slice(IM.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=t_.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=p_(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=r,await NM((()=>o.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await NM((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:m_(e)}}}}IM.URL_SCHEME="downloads://";function $M(e,t,n,r){!function(e){RA(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){RA(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${e}`)),RA(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${t}`)),RA(t>=e,(()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`))}(n=null==n?0:n,r=null==r?1:r);let o=0;return Promise.all(e.map((a=>(a.then((a=>{const i=n+ ++o/e.length*(r-n);return t(i),a})),a))))}async function TM(e,t){null==t&&(t={});const n=null==t.fetchFunc?hO().platform.fetch:t.fetchFunc,r=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),o=(null==t.onProgress?await Promise.all(r):await $M(r,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(o):await $M(o,t.onProgress,.5,1)}v_.registerSaveRouter((e=>hO().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(IM.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new IM(e)}(e.slice(IM.URL_SCHEME.length)):null));class AM{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(RA("function"===typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=hO().platform.fetch,RA(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&RA(2===e.length,(()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`)),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=p_(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=t_.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:m_(e),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch(kbe){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();return f_(await this.loadModelJSON(),(e=>this.loadWeights(e)))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=g_(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const r=null==t.fetchFunc?hO().platform.fetch:t.fetchFunc;let o,a=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var i;a<e.length;){if(!o){const n=(await r(e[a],t.requestInit,{isBinary:!0})).body;o=n.getReader()}const{done:s,value:l}=await o.read();if(!s)return void n.enqueue(l);a++,o=void 0,null===(i=t.onProgress)||void 0===i||i.call(t,a/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),o=n>t?e.substring(n):"";return[r+"/",o]}(t),o=this.weightPathPrefix||n,a=[],i=[];for(const s of e)for(const e of s.paths)null!=this.weightUrlConverter?i.push(this.weightUrlConverter(e)):a.push(o+e+r);return this.weightUrlConverter&&a.push(...await Promise.all(i)),a}async loadWeights(e){const t=await this.getWeightUrls(e);return[g_(e),await TM(t,this.loadOptions)]}}function OM(e){return null!=e.match(AM.URL_SCHEME_REGEX)}AM.URL_SCHEME_REGEX=/^https?:\/\//;const RM=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>OM(e))):OM(e),n)return PM(e,t)}return null};function PM(e,t){return new AM(e,t)}v_.registerSaveRouter(RM),v_.registerLoadRouter(RM);const DM=-2,FM=-1;function _M(e,t,n){const r=e.shape.length;RA(r===t.length,(()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`)),RA(r===n.length,(()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`));for(let o=0;o<r;++o)RA(t[o]+n[o]<=e.shape[o],(()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${t[o]+n[o]}) would overflow input.shape[${o}] (${e.shape[o]})`))}function MM(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function zM(e,t,n){const r=[];for(let o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function LM(e,t,n,r){const o=[...e];for(let a=o.length;a<r.length;a++)o.push(1);for(let a=0;a<n;a++)0===a?o[t]=1:(o.splice(t,0,1),o.pop());return o}function BM(e,t,n){return n<=e?n:n-(t-1)}function jM(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function HM(e,t,n,r,o,a,i,s,l){const u=e.length;let c=new Array(u),d=new Array(u),h=new Array(u);if(t.length&&n>0){const l=t[0],u=n+1;c=VM(i,l,u,r,e),d=WM(s,l,u,o,e),h=LM(a,l,u,e)}else for(let p=0;p<u;p++)c[p]=UM(i,r,a,e,p,l),d[p]=KM(s,o,a,e,p,l),h[p]=GM(a,p,l);return{begin:c,end:d,strides:h}}function VM(e,t,n,r,o){const a=[...o],i=jM(n,t);for(let s=0;s<a.length;s++)if(i.indexOf(s)>-1)a[s]=0;else{const o=BM(t,n,s);let i=r[o];e&1<<o&&(i=0),a[s]=i}return a}function WM(e,t,n,r,o){const a=[...o],i=jM(n,t);for(let s=0;s<a.length;s++)if(i.indexOf(s)>-1)a[s]=Number.MAX_SAFE_INTEGER;else{const o=BM(t,n,s);let i=r[o];e&1<<o&&(i=Number.MAX_SAFE_INTEGER),a[s]=i}for(let s=0;s<a.length;s++){const e=o[s];a[s]<0&&(a[s]+=e),a[s]=TA(0,a[s],o[s])}return a}function GM(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function UM(e,t,n,r,o,a){let i=t[o];const s=n[o]||1;(e&1<<o||a&1<<o||null==i)&&(i=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=r[o];return i<0&&(i+=l),i=TA(0,i,l-1),i}function KM(e,t,n,r,o,a){let i=t[o];const s=n[o]||1;(e&1<<o||a&1<<o||null==i)&&(i=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=r[o];return i<0&&(i+=l),i=s>0?TA(0,i,l):TA(-1,i,l-1),i}function qM(e,t,n){let r=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(let o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function XM(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function JM(e,t,n){let r;const o=e.shape.length;let a;return r="number"===typeof t?[t,...new Array(o-1).fill(0)]:t.length<o?t.concat(new Array(o-t.length).fill(0)):t.slice(),r.forEach((e=>{RA(-1!==e,(()=>"slice() does not support negative begin indexing."))})),a=null==n?new Array(o).fill(-1):"number"===typeof n?[n,...new Array(o-1).fill(-1)]:n.length<o?n.concat(new Array(o-n.length).fill(-1)):n,a=a.map(((t,n)=>t>=0?t:(RA(-1===t,(()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`)),e.shape[n]-r[n]))),[r,a]}function YM(e,t,n,r,o,a,i,s,l){let u;if(null==r?(u=new Array(t.length),u.fill(1)):u=r,null!=i&&0!==(i&i-1))throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:o,endMask:a,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:l};for(let y=0;y<d.dims;y++)c&&0!==(1<<y&s)&&d.numAddAxisAfterEllipsis++,1<<y&i&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const o=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<o;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(DM),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(FM),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,h);let p=!0,f=!0,m=!0;const g=[],v=[];for(let y=0;y<e.length;++y){if(0===h.strides[y])throw Error(`strides[${y}] must be non-zero`);const t=!!(h.shrinkAxisMask&1<<y),n=e[y];if(-1===n){g.push(t?1:-1);continue}const r=[h.beginMask&1<<y,h.endMask&1<<y],o=[h.strides[y]>0?0:-1,h.strides[y]>0?n:n-1];if(t&&h.strides[y]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===h.strides[y];const a=!!(h.beginMask&1<<y&&h.endMask&1<<y);if(h.beginValid&&h.endValid){if(t){const e=h.begin[y]<0?n+h.begin[y]:h.begin[y];if(h.begin[y]=e,h.end[y]=h.begin[y]+1,e<0||e>=n)throw Error(`slice index ${h.begin[y]} of dimension ${y} out of bounds.`)}else h.begin[y]=QM(h.begin[y],0,h.strides[y],n,r,o),h.end[y]=QM(h.end[y],1,h.strides[y],n,r,o);const e=1===h.strides[y]&&0===h.begin[y]&&h.end[y]===n;p=p&&e,f=f&&(0===y&&1===h.strides[y]||e)}else p=p&&1===h.strides[y]&&a,f=f&&(0===y&&1===h.strides[y]||a);let i,s=!1;if(h.beginValid&&h.endValid?(i=h.end[y]-h.begin[y],s=!0):t?(i=1,s=!0):a&&n>=0&&(i=h.strides[y]<0?-n:n,s=!0),s){let e;e=0===i||i<0!==h.strides[y]<0?0:Math.trunc(i/h.strides[y])+(i%h.strides[y]!==0?1:0),g.push(e)}else g.push(-1)}for(let y=0;y<h.finalShapeGatherIndices.length;++y){const e=h.finalShapeGatherIndices[y];e>=0?v.push(g[e]):e===DM&&v.push(1)}const b=v.filter(((e,t)=>h.finalShapeGatherIndices[t]!==DM));return{finalShapeSparse:b,finalShape:v,isIdentity:p,sliceDim0:f,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function QM(e,t,n,r,o,a){if(o[t])return n>0?a[t]:a[t+1&1];{const t=e<0?r+e:e;return t<a[0]?a[0]:t>a[1]?a[1]:t}}const ZM=YF({all_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:XF(e,"x","all","bool")},o={axis:t,keepDims:n};return BF.runKernel(kO,r,o)}});const ez=YF({any_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:XF(e,"x","any","bool")},o={axis:t,keepDims:n};return BF.runKernel(CO,r,o)}});const tz=YF({argMax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:XF(e,"x","argMax")},r={axis:t};return BF.runKernel(SO,n,r)}});function nz(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",a=arguments.length>5?arguments[5]:void 0;return az(e,[...t,e[3]],n,a,r,null,null,mz(o))}function rz(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[s,l]=lz(t);let u;if("channelsLast"===i)u=[s,l,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error(`Unknown dataFormat ${i}`);u=[s,l,e[1],e[1]]}return az(e,u,n,r,o,a,!1,i)}function oz(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC";const[s,l,u]=uz(t);let c,d;if("NDHWC"===i)d="channelsLast",c=[s,l,u,e[4],e[4]];else{if("NCDHW"!==i)throw new Error(`Unknown dataFormat ${i}`);d="channelsFirst",c=[s,l,u,e[1],e[1]]}return iz(e,c,n,r,o,!1,d,a)}function az(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[l,u,c,d]=[-1,-1,-1,-1];if("channelsLast"===s)[l,u,c,d]=e;else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);[l,d,u,c]=e}const[h,p,,f]=t,[m,g]=lz(n),[v,b]=lz(r),y=cz(h,v),w=cz(p,b),{padInfo:x,outHeight:k,outWidth:C}=function(e,t,n,r,o,a,i,s,l){let u,c,d;if("number"===typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const o=function(e,t,n,r,o){null==r&&(r=sz(e,t,n));const a=e[0],i=e[1],s=dz((a-t+2*r)/n+1,o),l=dz((i-t+2*r)/n+1,o);return[s,l]}([t,n],a,r,e,s);c=o[0],d=o[1]}else if("same"===e){c=Math.ceil(t/r),d=Math.ceil(n/o);const e=Math.max(0,(c-1)*r+a-t),s=Math.max(0,(d-1)*o+i-n),l=Math.floor(e/2),h=e-l,p=Math.floor(s/2);u={top:l,bottom:h,left:p,right:s-p,type:"SAME"}}else if("valid"===e)u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-a+1)/r),d=Math.ceil((n-i+1)/o);else{if("object"!==typeof e)throw Error(`Unknown padding parameter: ${e}`);{const h="channelsLast"===l?e[1][0]:e[2][0],p="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1];u={top:h,bottom:p,left:f,right:m,type:0===h&&0===p&&0===f&&0===m?"VALID":"EXPLICIT"},c=dz((t-a+h+p)/r+1,s),d=dz((n-i+f+m)/o+1,s)}}return{padInfo:u,outHeight:c,outWidth:d}}(o,u,c,m,g,y,w,a,s),S=i?f*d:f;let E;return"channelsFirst"===s?E=[l,S,k,C]:"channelsLast"===s&&(E=[l,k,C,S]),{batchSize:l,dataFormat:s,inHeight:u,inWidth:c,inChannels:d,outHeight:k,outWidth:C,outChannels:S,padInfo:x,strideHeight:m,strideWidth:g,filterHeight:h,filterWidth:p,effectiveFilterHeight:y,effectiveFilterWidth:w,dilationHeight:v,dilationWidth:b,inShape:e,outShape:E,filterShape:t}}function iz(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,[l,u,c,d,h]=[-1,-1,-1,-1,-1];if("channelsLast"===i)[l,u,c,d,h]=e;else{if("channelsFirst"!==i)throw new Error(`Unknown dataFormat ${i}`);[l,h,u,c,d]=e}const[p,f,m,,g]=t,[v,b,y]=uz(n),[w,x,k]=uz(r),C=cz(p,w),S=cz(f,x),E=cz(m,k),{padInfo:N,outDepth:I,outHeight:$,outWidth:T}=function(e,t,n,r,o,a,i,s,l,u,c){let d,h,p,f;"valid"===e&&(e=0);if("number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const m=function(e,t,n,r,o,a){null==o&&(o=sz(e,t[0],r[0]));const i=[0,0,0,n];for(let s=0;s<3;s++)e[s]+2*o>=t[s]&&(i[s]=dz((e[s]-t[s]+2*o)/r[s]+1,a));return i}([t,n,r,1],[s,l,u],1,[o,a,i],e,c);h=m[0],p=m[1],f=m[2]}else{if("same"!==e)throw Error(`Unknown padding parameter: ${e}`);{h=Math.ceil(t/o),p=Math.ceil(n/a),f=Math.ceil(r/i);const e=(h-1)*o+s-t,c=(p-1)*a+l-n,m=(f-1)*i+u-r,g=Math.floor(e/2),v=e-g,b=Math.floor(c/2),y=c-b,w=Math.floor(m/2);d={top:b,bottom:y,left:w,right:m-w,front:g,back:v,type:"SAME"}}}return{padInfo:d,outDepth:h,outHeight:p,outWidth:f}}(o,u,c,d,v,b,y,C,S,E,s),A=a?g*h:g;let O;return"channelsFirst"===i?O=[l,A,I,$,T]:"channelsLast"===i&&(O=[l,I,$,T,A]),{batchSize:l,dataFormat:i,inDepth:u,inHeight:c,inWidth:d,inChannels:h,outDepth:I,outHeight:$,outWidth:T,outChannels:A,padInfo:N,strideDepth:v,strideHeight:b,strideWidth:y,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:C,effectiveFilterHeight:S,effectiveFilterWidth:E,dilationDepth:w,dilationHeight:x,dilationWidth:k,inShape:e,outShape:O,filterShape:t}}function sz(e,t,n){const r=cz(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function lz(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function uz(e){return"number"===typeof e?[e,e,e]:e}function cz(e,t){return t<=1?e:e+(e-1)*(t-1)}function dz(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function hz(e){const[t,n,r]=lz(e);return 1===t&&1===n&&1===r}function pz(e,t){return hz(e)||hz(t)}function fz(e){return lz(e).every((e=>e>0))}function mz(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function gz(e,t,n){if(null!=n){if("string"===typeof t)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if("number"===typeof t)RA(MA(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`));else{if("object"!==typeof t)throw Error(`Error in ${e}: Unknown padding parameter: ${t}`);t.forEach((t=>{t.forEach((t=>{RA(MA(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`))}))}))}}}const vz=YF({reshape_:function(e,t){const n={x:XF(e,"x","reshape","string_or_numeric")},r={shape:t};return BF.runKernel($P,n,r)}});const bz=YF({avgPool_:function(e,t,n,r,o){const a=XF(e,"x","avgPool","float32");RA(pz(n,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`));let i=a,s=!1;3===a.rank&&(s=!0,i=vz(a,[1,a.shape[0],a.shape[1],a.shape[2]])),RA(4===i.rank,(()=>`Error in avgPool: x must be rank 4 but got rank ${i.rank}.`)),gz("avgPool",r,o);const l={x:i},u={filterSize:t,strides:n,pad:r,dimRoundingMode:o};let c=BF.runKernel(OO,l,u);return c=U_(c,a.dtype),s?vz(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const yz=YF({avgPool3d_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const i=XF(e,"x","avgPool3d","float32");let s=i,l=!1;4===i.rank&&(l=!0,s=vz(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),RA(5===s.rank,(()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`)),RA("NDHWC"===a,(()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`)),RA("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`)),gz("avgPool3d",r,o);const u={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:a};let d=BF.runKernel(PO,u,c);return d=U_(d,s.dtype),l?vz(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const wz=YF({batchNorm_:function(e,t,n,r,o,a){null==a&&(a=.001);const i=XF(e,"x","batchNorm"),s=XF(t,"mean","batchNorm"),l=XF(n,"variance","batchNorm");let u,c;null!=o&&(u=XF(o,"scale","batchNorm")),null!=r&&(c=XF(r,"offset","batchNorm")),RA(s.rank===l.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),RA(null==c||s.rank===c.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),RA(null==u||s.rank===u.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const d={x:function(e){let t;return t=0===e.rank||1===e.rank?vz(e,[1,1,1,e.size]):2===e.rank?vz(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?vz(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(i),scale:u,offset:c,mean:s,variance:l},h={varianceEpsilon:a},p=BF.runKernel(IR,d,h);return vz(p,i.shape)}});const xz=YF({batchNorm2d_:function(e,t,n,r,o,a){const i=XF(e,"x","batchNorm"),s=XF(t,"mean","batchNorm"),l=XF(n,"variance","batchNorm");let u,c;return null!=o&&(u=XF(o,"scale","batchNorm")),null!=r&&(c=XF(r,"offset","batchNorm")),RA(2===i.rank,(()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`)),RA(2===s.rank||1===s.rank,(()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`)),RA(2===l.rank||1===l.rank,(()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`)),null!=u&&RA(2===u.rank||1===u.rank,(()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`)),null!=c&&RA(2===c.rank||1===c.rank,(()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`)),wz(i,s,l,c,u,a)}});const kz=YF({batchNorm3d_:function(e,t,n,r,o,a){const i=XF(e,"x","batchNorm"),s=XF(t,"mean","batchNorm"),l=XF(n,"variance","batchNorm");let u,c;return null!=o&&(u=XF(o,"scale","batchNorm")),null!=r&&(c=XF(r,"offset","batchNorm")),RA(3===i.rank,(()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`)),RA(3===s.rank||1===s.rank,(()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`)),RA(3===l.rank||1===l.rank,(()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`)),null!=u&&RA(3===u.rank||1===u.rank,(()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`)),null!=c&&RA(3===c.rank||1===c.rank,(()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`)),wz(i,s,l,c,u,a)}});const Cz=YF({batchNorm4d_:function(e,t,n,r,o,a){const i=XF(e,"x","batchNorm"),s=XF(t,"mean","batchNorm"),l=XF(n,"variance","batchNorm");let u,c;return null!=o&&(u=XF(o,"scale","batchNorm")),null!=r&&(c=XF(r,"offset","batchNorm")),RA(4===i.rank,(()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`)),RA(4===s.rank||1===s.rank,(()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`)),RA(4===l.rank||1===l.rank,(()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`)),null!=u&&RA(4===u.rank||1===u.rank,(()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`)),null!=c&&RA(4===c.rank||1===c.rank,(()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`)),wz(i,s,l,c,u,a)}});const Sz=YF({broadcastTo_:function(e,t){let n=XF(e,"broadcastTo","x");const r=n.shape;if(aO(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=vz(n,e)}const o=n.shape,a=Array.from(t);for(let u=t.length-1;u>=0;u--)if(o[u]===t[u])a[u]=1;else if(1!==n.shape[u])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);const i=a.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0));if(0===i.length)return K_(n);const s={x:n},l={reps:a};return BF.runKernel(fD,s,l)}});const Ez=YF({clipByValue_:function(e,t,n){const r=XF(e,"x","clipByValue");if(RA(t<=n,(()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`)),t===n)return dM(r.shape,t,r.dtype);const o={x:r},a={clipValueMin:t,clipValueMax:n};return BF.runKernel(HO,o,a)}});const Nz=YF({concat_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;RA(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=JF(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)})),1===n.length)return K_(n[0]);const r=n,o={axis:t};return BF.runKernel(GO,r,o)}});const Iz=YF({concat1d_:function(e){return Nz(e,0)}});const $z=YF({concat2d_:function(e,t){return Nz(e,t)}});const Tz=YF({concat3d_:function(e,t){return Nz(e,t)}});const Az=YF({concat4d_:function(e,t){return Nz(e,t)}});const Oz=YF({conv2d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0;const s=XF(e,"x","conv2d","float32"),l=XF(t,"filter","conv2d","float32");let u=s,c=!1;3===s.rank&&(c=!0,u=vz(s,[1,s.shape[0],s.shape[1],s.shape[2]])),RA(4===u.rank,(()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`)),RA(4===l.rank,(()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`)),gz("conv2d",r,i);const d="NHWC"===o?u.shape[3]:u.shape[1];RA(d===l.shape[2],(()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`)),RA(pz(n,a),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`)),RA(fz(a),(()=>"Error in conv2D: Dilated rates should be larger than 0.")),RA(fz(n),(()=>"Error in conv2D: Strides should be larger than 0."));const h={x:u,filter:l},p={strides:n,pad:r,dataFormat:o,dilations:a,dimRoundingMode:i},f=BF.runKernel(UO,h,p);return c?vz(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const Rz=YF({conv1d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0;const s=XF(e,"x","conv1d"),l=XF(t,"filter","conv1d");let u=s,c=!1;2===s.rank&&(c=!0,u=vz(s,[1,s.shape[0],s.shape[1]])),RA(3===u.rank,(()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`)),RA(3===l.rank,(()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`)),gz("conv1d",r,i),RA(u.shape[2]===l.shape[1],(()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`)),RA(pz(n,a),(()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${a}'`)),RA(fz(a),(()=>"Error in conv1D: Dilated rates should be larger than 0.")),RA(fz(n),(()=>"Error in conv1D: Stride should be larger than 0.")),RA("NWC"===o,(()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`));const d=vz(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=vz(u,[u.shape[0],1,u.shape[1],u.shape[2]]),p=Oz(h,d,[1,n],r,"NHWC",[1,a],i);return vz(p,c?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});const Pz=YF({conv2DBackpropInput_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0;RA(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let s=e,l=t,u=!1;3===t.rank&&(u=!0,l=vz(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),RA(4===s.length,(()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`)),RA(4===l.rank,(()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`)),RA(4===n.rank,(()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`));const c="NHWC"===a?s[3]:s[1],d="NHWC"===a?l.shape[3]:l.shape[1];RA(c===n.shape[2],(()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`)),RA(d===n.shape[3],(()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`)),gz("conv2dDerInput",o,i);const h={dy:l,filter:n},p={strides:r,pad:o,dataFormat:a,dimRoundingMode:i,inputShape:s},f=BF.runKernel(qO,h,p);return u?vz(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const Dz=YF({conv2dTranspose_:function(e,t,n,r,o,a){const i=XF(e,"x","conv2dTranspose"),s=XF(t,"filter","conv2dTranspose");return Pz(n,i,s,r,o,"NHWC",a)}});const Fz=YF({conv3d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1];const i=XF(e,"x","conv3d"),s=XF(t,"filter","conv3d");let l=i,u=!1;4===i.rank&&(u=!0,l=vz(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),RA(5===l.rank,(()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`)),RA(5===s.rank,(()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`)),RA(l.shape[4]===s.shape[3],(()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${s.shape[3]}.`)),RA(pz(n,a),(()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`)),RA("NDHWC"===o,(()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`)),RA(fz(a),(()=>"Error in conv3D: Dilated rates should be larger than 0.")),RA(fz(n),(()=>"Error in conv3D: Strides should be larger than 0."));const c={x:l,filter:s},d={strides:n,pad:r,dataFormat:o,dilations:a},h=BF.runKernel(XO,c,d);return u?vz(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const _z=YF({conv3DBackpropInput_:function(e,t,n,r,o){RA(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let a=e,i=t,s=!1;4===t.rank&&(s=!0,i=vz(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),a=[1,e[0],e[1],e[2],e[3]]);const l=a[4],u=i.shape[4];RA(5===a.length,(()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`)),RA(5===i.rank,(()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`)),RA(5===n.rank,(()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`)),RA(l===n.shape[3],(()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`)),RA(u===n.shape[4],(()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`));const c={dy:i,filter:n},d={pad:o,strides:r,inputShape:a},h=BF.runKernel(YO,c,d);return s?vz(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const Mz=YF({conv3dTranspose_:function(e,t,n,r,o){const a=XF(e,"x","conv3dTranspose"),i=XF(t,"filter","conv3dTranspose");return _z(n,a,i,r,o)}});const zz=YF({denseBincount_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=XF(e,"x","denseBincount"),a=XF(t,"weights","denseBincount");RA("int32"===o.dtype,(()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`)),RA(o.rank<=2,(()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`)),RA(n>=0,(()=>`size must be non-negative, but got ${n}.`)),RA(a.size===o.size||0===a.size,(()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${a.shape}.`));const i={x:o,weights:a},s={size:n,binaryOutput:r};return BF.runKernel(rR,i,s)}});const Lz=YF({depthwiseConv2d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0;const s=XF(e,"x","depthwiseConv2d","float32"),l=XF(t,"filter","depthwiseConv2d","float32");let u=s,c=!1;3===s.rank&&(c=!0,u=vz(s,[1,s.shape[0],s.shape[1],s.shape[2]])),RA(4===u.rank,(()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`)),RA(4===l.rank,(()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`));const d="NHWC"===o?u.shape[3]:u.shape[1];RA(d===l.shape[2],(()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`)),gz("depthwiseConv2d",r,i);const h={x:u,filter:l},p={strides:n,pad:r,dataFormat:o,dilations:a,dimRoundingMode:i},f=BF.runKernel(aR,h,p);return c?vz(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const Bz=YF({elu_:function(e){const t={x:XF(e,"x","elu","float32")};return BF.runKernel(mR,t)}});const jz=YF({equal_:function(e,t){let n=XF(e,"a","equal","string_or_numeric"),r=XF(t,"b","equal","string_or_numeric");[n,r]=RF(n,r),yM(n.shape,r.shape);const o={a:n,b:r};return BF.runKernel(bR,o)}});const Hz=YF({erf_:function(e){let t=XF(e,"x","erf");RA("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=U_(t,"float32"));const n={x:t};return BF.runKernel(vR,n)}});const Vz=YF({exp_:function(e){const t={x:XF(e,"x","exp")};return BF.runKernel(yR,t)}});const Wz=YF({expandDims_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=XF(e,"x","expandDims","string_or_numeric");RA(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const r={input:n},o={dim:t};return BF.runKernel(wR,r,o)}});const Gz=YF({tile_:function(e,t){const n=XF(e,"x","tile","string_or_numeric");RA(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`));const r={x:n},o={reps:t};return BF.runKernel(fD,r,o)}});const Uz=YF({eye_:function(e,t,n){null==t&&(t=e);const r=G_([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),o=e<=t?e:t;for(let i=0;i<o;++i)r.set(1,i,i);const a=vz(r.toTensor(),[e,t]);if(null==n)return a;if(1===n.length)return Gz(Wz(a,0),[n[0],1,1]);if(2===n.length)return Gz(Wz(Wz(a,0),0),[n[0],n[1],1,1]);if(3===n.length)return Gz(Wz(Wz(Wz(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});const Kz=YF({floor_:function(e){const t={x:XF(e,"x","floor","float32")};return BF.runKernel(ER,t)}});const qz=YF({gather_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o={x:XF(e,"x","gather"),indices:XF(t,"indices","gather","int32")},a={axis:n,batchDims:r};return BF.runKernel($R,o,a)}});const Xz=YF({greater_:function(e,t){let n=XF(e,"a","greater","string_or_numeric"),r=XF(t,"b","greater","string_or_numeric");[n,r]=RF(n,r),yM(n.shape,r.shape);const o={a:n,b:r};return BF.runKernel(AR,o)}});const Jz=YF({greaterEqual_:function(e,t){let n=XF(e,"a","greaterEqual","string_or_numeric"),r=XF(t,"b","greaterEqual","string_or_numeric");[n,r]=RF(n,r),yM(n.shape,r.shape);const o={a:n,b:r};return BF.runKernel(OR,o)}});const Yz=YF({leakyRelu_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;const n={x:XF(e,"x","leakyRelu")},r={alpha:t};return BF.runKernel(zR,n,r)}});const Qz=YF({log_:function(e){const t={x:XF(e,"x","log","float32")};return BF.runKernel(HR,t)}});const Zz=YF({log1p_:function(e){const t={x:XF(e,"x","log1p")};return BF.runKernel(VR,t)}});const eL=YF({max_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:XF(e,"x","max")},o={reductionIndices:t,keepDims:n};return BF.runKernel(XR,r,o)}});const tL=YF({sum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=XF(e,"x","sum");"bool"===r.dtype&&(r=U_(r,"int32"));const o={x:r},a={axis:t,keepDims:n};return BF.runKernel(XP,o,a)}});const nL=YF({logSoftmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=XF(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);const r=nM(((e,n)=>{const r=eL(e,t,!0),o=fM(e,r),a=fM(U_(o,"float32"),Qz(tL(Vz(o),t,!0)));n([a]);return{value:a,gradFunc:(e,n)=>{const[r]=n,o=Vz(r);return fM(e,Q_(tL(e,t,!0),o))}}}));return r(n)}});function rL(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function oL(e,t,n){const r=e.length+t.length,o=[];let a=0,i=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?o.push(e[a++]):o.push(t[i++]);return o}function aL(e,t){const n=[],r=e.length;for(let a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);const o=t.map((t=>e[t]));return[n,o]}function iL(e,t){return oL(e,t.map((e=>1)),t)}function sL(e,t,n){RA(rL(t,n),(()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`))}function lL(e,t){if(rL(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((e=>n.push(e))),n}function uL(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function cL(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}const dL=YF({logSumExp_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=XF(e,"x","logSumExp"),o=HA(t,r.shape),a=eL(r,o,!0),i=fM(r,a),s=Vz(i),l=tL(s,o),u=Qz(l),c=X_(vz(a,u.shape),u);if(n){const e=iL(c.shape,o);return vz(c,e)}return c}});const hL=YF({logicalAnd_:function(e,t){const n=XF(e,"a","logicalAnd","bool"),r=XF(t,"b","logicalAnd","bool");yM(n.shape,r.shape);const o={a:n,b:r};return BF.runKernel(WR,o)}});const pL=YF({matMul_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=XF(e,"a","matMul"),a=XF(t,"b","matMul");[o,a]=RF(o,a);const i={a:o,b:a},s={transposeA:n,transposeB:r};return BF.runKernel(FO,i,s)}});const fL=YF({maxPool_:function(e,t,n,r,o){const a=XF(e,"x","maxPool");let i=a,s=!1;3===a.rank&&(s=!0,i=vz(a,[1,a.shape[0],a.shape[1],a.shape[2]])),RA(4===i.rank,(()=>`Error in maxPool: input must be rank 4 but got rank ${i.rank}.`)),RA(pz(n,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`)),gz("maxPool",r,o);const l={x:i},u={filterSize:t,strides:n,pad:r,dimRoundingMode:o},c=BF.runKernel(YR,l,u);return s?vz(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const mL=YF({maxPool3d_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const i=XF(e,"x","maxPool3d");let s=i,l=!1;4===i.rank&&(l=!0,s=vz(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),RA(5===s.rank,(()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`)),RA("NDHWC"===a,(()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`)),gz("maxPool3d",r,o);const u={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:a},d=BF.runKernel(ZR,u,c);return l?vz(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const gL=YF({mean_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:XF(e,"x","mean")},o={axis:t,keepDims:n};return BF.runKernel(nP,r,o)}});const vL=YF({min_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:XF(e,"x","min")},o={axis:t,keepDims:n};return BF.runKernel(rP,r,o)}});const bL=YF({minimum_:function(e,t){let n=XF(e,"a","minimum"),r=XF(t,"b","minimum");[n,r]=RF(n,r),"bool"===n.dtype&&(n=U_(n,"int32"),r=U_(r,"int32")),yM(n.shape,r.shape);const o={a:n,b:r};return BF.runKernel(oP,o)}});const yL=YF({moments_:function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=HA(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=XF(e,"x","moments")).shape),r=gL(e,n,t);let o=r.shape;t||(o=iL(r.shape,n));const a=eM(fM(U_(e,"float32"),vz(r,o)));return{mean:r,variance:gL(a,n,t)}}});const wL=YF({neg_:function(e){const t={x:XF(e,"x","neg")};return BF.runKernel(uP,t)}});const xL=YF({notEqual_:function(e,t){let n=XF(e,"a","notEqual","string_or_numeric"),r=XF(t,"b","notEqual","string_or_numeric");[n,r]=RF(n,r),yM(n.shape,r.shape);const o={a:n,b:r};return BF.runKernel(cP,o)}});const kL=YF({oneHot_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const a={indices:XF(e,"indices","oneHot","int32")},i={dtype:o,depth:t,onValue:n,offValue:r};return BF.runKernel(mP,a,i)}});function CL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(aO(e),"complex64"===t){const t=CL(e,"float32"),n=CL(e,"float32");return QF(t,n)}const n=rO(FA(e),t);return BF.makeTensor(n,e,t)}function SL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(aO(e),"complex64"===t){const t=SL(e,"float32"),n=CL(e,"float32");return QF(t,n)}const n=nO(FA(e),t);return BF.makeTensor(n,e,t)}const EL=YF({onesLike_:function(e){const t={x:XF(e,"x","onesLike")};return BF.runKernel(fP,t)}});const NL=YF({pad_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=XF(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:t,constantValue:n},a={x:r};return BF.runKernel(vP,a,o)}});const IL=YF({prelu_:function(e,t){const n={x:XF(e,"x","prelu"),alpha:XF(t,"alpha","prelu")};return BF.runKernel(yP,n)}});var $L=n(334);class TL{constructor(e,t,n,r,o){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const a=o||Math.random();this.random=$L.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,o,a;do{r=2*this.random()-1,o=2*this.random()-1,a=r*r+o*o}while(a>=1||0===a);const i=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*r*i,t=this.mean+this.stdDev*o*i,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class AL{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"===typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=$L.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const OL=YF({randomNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(aO(e),null!=r&&"bool"===r)throw new Error(`Unsupported data type ${r}`);const a=new TL(t,n,r,!1,o),i=G_(e,r);for(let s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}});const RL=YF({randomUniform_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",o=arguments.length>4?arguments[4]:void 0;aO(e);const a=G_(e,r),i=new AL(t,n,null,o);for(let s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}});function PL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");const o={start:e,stop:t,step:n,dtype:r};return BF.runKernel(SP,{},o)}const DL=YF({relu_:function(e){const t={x:XF(e,"x","relu")};return BF.runKernel(IP,t)}});const FL=YF({reverse_:function(e,t){const n={x:XF(e,"x","reverse")},r={dims:t};return BF.runKernel(DP,n,r)}});const _L=YF({selu_:function(e){const t={x:XF(e,"x","selu")};return BF.runKernel(jP,t)}});const ML=YF({separableConv2d_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC";const s=XF(e,"x","separableConv2d"),l=XF(t,"depthwiseFilter","separableConv2d"),u=XF(n,"pointwiseFilter","separableConv2d");let c=s,d=!1;if(3===s.rank&&(d=!0,c=vz(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");RA(4===c.rank,(()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`)),RA(4===l.rank,(()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`)),RA(4===u.rank,(()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`)),RA(1===u.shape[0],(()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`)),RA(1===u.shape[1],(()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`));const h=l.shape[2],p=l.shape[3];RA(u.shape[2]===h*p,(()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*p}, but got ${u.shape[2]}.`));const f=Lz(c,l,r,o,i,a),m=Oz(f,u,1,"valid",i);return d?vz(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});const zL=YF({sigmoid_:function(e){const t={x:XF(e,"x","sigmoid","float32")};return BF.runKernel(UP,t)}});const LL=YF({slice_:function(e,t,n){const r=XF(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");const o={x:r},a={begin:t,size:n};return BF.runKernel(HP,o,a)}});const BL=YF({slice1d_:function(e,t,n){const r=XF(e,"x","slice1d");return RA(1===r.rank,(()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`)),LL(r,[t],[n])}});const jL=YF({slice2d_:function(e,t,n){const r=XF(e,"x","slice2d");return RA(2===r.rank,(()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`)),LL(r,t,n)}});const HL=YF({slice3d_:function(e,t,n){const r=XF(e,"x","slice3d");return RA(3===r.rank,(()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`)),LL(r,t,n)}});const VL=YF({slice4d_:function(e,t,n){const r=XF(e,"x","slice4d");return RA(4===r.rank,(()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`)),LL(r,t,n)}});const WL=YF({softmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=XF(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const r={logits:n},o={dim:t};return BF.runKernel(QP,r,o)}});const GL=YF({softplus_:function(e){const t={x:XF(e,"x","softplus")};return BF.runKernel(KP,t)}});const UL=YF({split_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={x:XF(e,"x","split")},o={numOrSizeSplits:t,axis:n};return BF.runKernel(YP,r,o)}});const KL=YF({squeeze_:function(e,t){const n=XF(e,"x","squeeze","string_or_numeric");return vz(n,VA(n.shape,t).newShape)}});const qL=YF({stack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=JF(e,"tensors","stack","string_or_numeric");RA(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&RA(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const r=n,o={axis:t};return BF.runKernel(gP,r,o)}});const XL=YF({tanh_:function(e){const t={x:XF(e,"x","tanh","float32")};return BF.runKernel(pD,t)}});function JL(e,t){DA(e);const n=UF(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return ZF(e,null,n,t)}function YL(e,t,n){if(DA(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=UF(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ZF(e,t,r,n)}const QL=YF({truncatedNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(aO(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const a=new TL(t,n,r,!0,o),i=G_(e,r);for(let s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}});const ZL=YF({unstack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=XF(e,"x","unstack","string_or_numeric");RA(t>=-n.shape.length&&t<n.shape.length,(()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`));const r={value:n},o={axis:t};return BF.runKernel(yD,r,o)}});const eB=YF({where_:function(e,t,n){const r=XF(t,"a","where"),o=XF(n,"b","where"),a=XF(e,"condition","where","bool"),i=yM(yM(a.shape,r.shape),o.shape),s={condition:Sz(a,i),t:Sz(r,i),e:Sz(o,i)};return BF.runKernel(BP,s)}});const tB=YF({imag_:function(e){const t={input:XF(e,"input","imag")};return BF.runKernel(DR,t)}});const nB=YF({real_:function(e){const t={input:XF(e,"input","real")};return BF.runKernel(EP,t)}});const rB=YF({transpose_:function(e,t,n){const r=XF(e,"x","transpose");if(null==t&&(t=r.shape.map(((e,t)=>t)).reverse()),RA(r.rank===t.length,(()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`)),t.forEach((e=>{RA(e>=0&&e<r.rank,(()=>"All entries in 'perm' must be between 0 and "+(r.rank-1)+` but got ${t}`))})),r.rank<=1)return r.clone();const o={x:r},a={perm:t};return"complex64"===r.dtype?o_((()=>{let e=nB(r),t=tB(r);return e=BF.runKernel(vD,{x:e},a),t=BF.runKernel(vD,{x:t},a),n&&(t=wL(t)),QF(e,t)})):BF.runKernel(vD,o,a)}});const oB=YF({dropout_:function(e,t,n,r){const o=XF(e,"x","dropout");if(RA("float32"===o.dtype,(()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`)),RA(t>=0&&t<1,(()=>`rate must be a float in the range [0, 1), but got ${t}.`)),0===t)return e instanceof yF?o.clone():o;const a=function(e,t){if(null==t)return e.shape.slice();if(_A(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(o,n),i=1-t,s=Y_(Kz(X_(RL(a,0,1,"float32",r),i)),i);return Q_(o,s)}});const aB=YF({fft_:function(e){RA("complex64"===e.dtype,(()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`));const t={input:e};return BF.runKernel(kR,t)}});const iB=YF({rfft_:function(e,t){RA("float32"===e.dtype,(()=>`The dtype for rfft() must be real value but got ${e.dtype}`));let n=e.shape[e.shape.length-1];const r=e.size/n;let o;if(null!=t&&t<n){const r=e.shape.map((e=>0)),a=e.shape.map((e=>e));a[e.shape.length-1]=t,o=LL(e,r,a),n=t}else if(null!=t&&t>n){const r=e.shape.map((e=>e));r[e.shape.length-1]=t-n,o=Nz([e,CL(r)],e.shape.length-1),n=t}else o=e;const a=tM(o),i=vz(QF(o,a),[r,n]),s=aB(i),l=Math.floor(n/2)+1,u=nB(s),c=tB(s),d=UL(u,[l,n-l],u.shape.length-1),h=UL(c,[l,n-l],c.shape.length-1),p=o.shape.slice();return p[o.shape.length-1]=l,vz(QF(d[0],h[0]),p)}});const sB=YF({ifft_:function(e){RA("complex64"===e.dtype,(()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`));const t={input:e};return BF.runKernel(PR,t)}});const lB=YF({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const o=vz(e,[n,t]);r=sB(o)}else{const o=[n,2*(t-1)],a=vz(nB(e),[n,t]),i=vz(tB(e),[n,t]),s=FL(LL(a,[0,1],[n,t-2]),1),l=Q_(FL(LL(i,[0,1],[n,t-2]),1),rM(-1)),u=Nz([a,s],1),c=Nz([i,l],1),d=vz(QF(u,c),[o[0],o[1]]);r=sB(d)}if(r=nB(r),3===e.rank&&0!==e.shape[0]){const t=r,n=e.shape[0];r=vz(r,[n,r.shape[0]/n,r.shape[1]]),t.dispose()}return r}});const uB=YF({conv2DBackpropFilter_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=vz(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=vz(t,[1,t.shape[0],t.shape[1],t.shape[2]])),RA(4===s.rank,(()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`)),RA(4===l.rank,(()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`)),RA(4===n.length,(()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`));const u="NHWC"===a?s.shape[3]:s.shape[1],c="NHWC"===a?l.shape[3]:l.shape[1];RA(u===n[2],(()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`)),RA(c===n[3],(()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`)),gz("conv2dDerFilter",o,i);const d={x:s,dy:l},h={strides:r,pad:o,dataFormat:a,dimRoundingMode:i,filterShape:n};return BF.runKernel(KO,d,h)}});const cB=YF({relu6_:function(e){const t={x:XF(e,"x","relu6")};return BF.runKernel(PP,t)}});const dB=YF({step_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:XF(e,"x","step")},r={alpha:t};return BF.runKernel(kD,n,r)}});function hB(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Q_(e,dB(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function pB(e,t){let n=t;const r=bM(e.shape,t.shape);return r.length>0&&(n=tL(n,r)),vz(n,e.shape)}function fB(e,t,n,r){if("linear"===t)return e;if("relu"===t)return DL(e);if("elu"===t)return Bz(e);if("relu6"===t)return cB(e);if("prelu"===t)return IL(e,n);if("leakyrelu"===t)return Yz(e,r);if("sigmoid"===t)return zL(e);throw new Error(`Unknown fused activation ${t}.`)}const mB=(e,t)=>!(e>0)||"linear"===t;const gB=YF({fusedConv2d_:function(e){let{x:t,filter:n,strides:r,pad:o,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:l,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:d}=e;if(u=u||"linear",!1===mB(BF.state.gradientDepth,u)){RA("NHWC"===a,(()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`));let e=Oz(t,n,r,o,a,i,s);return null!=l&&(e=X_(e,l)),fB(e,u,c,d)}const h=XF(t,"x","conv2d","float32"),p=XF(n,"filter","conv2d","float32");let f=h,m=!1;3===h.rank&&(m=!0,f=vz(h,[1,h.shape[0],h.shape[1],h.shape[2]])),RA(4===f.rank,(()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`)),RA(4===p.rank,(()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`)),gz("fused conv2d",o,s);const g="NHWC"===a?f.shape[3]:f.shape[1];RA(p.shape[2]===g,(()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${p.shape[2]}.`)),RA(pz(r,i),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${r} and dilations '${i}'`));const v=az(f.shape,p.shape,r,i,o,s);let b,y;if(null!=l&&(b=XF(l,"bias","fused conv2d"),[b]=RF(b,h),"NHWC"===a?yM(v.outShape,b.shape):(RA(b.shape.length<=1,(()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`)),RA(0===b.shape.length||b.shape[0]===v.outChannels||1===b.shape[0],(()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${v.outChannels})`)))),null!=c){const e=c.shape;if(RA(e.length<=1||3===e.length,(()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${e.length}.`)),1===e.length)RA(1===e[0]||e[0]===v.outChannels,(()=>`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the number of output channels (${v.outChannels}).`));else if(3===e.length)try{yM(e,v.outShape)}catch(kbe){const n=`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(n)}y=XF(c,"prelu weights","fused conv2d")}const w=(e,t)=>{RA("NHWC"===a,(()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`));const[n,s,l,c]=t,d=hB(e,l,u);RA(hz(i),(()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`));const h=[Pz(s.shape,d,n,r,o),uB(s,d,n.shape,r,o)];if(null!=c){const e=pB(c,d);h.push(e)}return h},x={x:f,filter:p,bias:b,preluActivationWeights:y},k={strides:r,pad:o,dataFormat:a,dilations:i,dimRoundingMode:s,activation:u,leakyreluAlpha:d};if(null==l){const e=nM(((e,t,n)=>{let r=BF.runKernel(ND,x,k);return n([t,e,r]),m&&(r=vz(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:w}}));return e(f,p)}{const e=nM(((e,t,n,r)=>{let o=BF.runKernel(ND,x,k);return r([t,e,o,n]),m&&(o=vz(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:w}}));return e(f,p,b)}}});const vB=YF({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=vz(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=vz(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={x:s,dy:l},c={strides:r,pad:o,dimRoundingMode:i,dilations:a,filterShape:n};return BF.runKernel(iR,u,c)}});const bB=YF({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=t,l=!1;3===t.rank&&(l=!0,s=vz(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={dy:s,filter:n},c={strides:r,pad:o,dimRoundingMode:i,dilations:a,inputShape:e},d=BF.runKernel(sR,u,c);return l?vz(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});const yB=YF({fusedMatMul_:function(e){let{a:t,b:n,transposeA:r=!1,transposeB:o=!1,bias:a,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:l=.2}=e;if(!1===mB(BF.state.gradientDepth,i)){let e=pL(t,n,r,o);return null!=a&&(e=X_(e,a)),fB(e,i,s,l)}let u=XF(t,"a","fused matMul"),c=XF(n,"b","fused matMul");[u,c]=RF(u,c);const d=r?u.shape[u.rank-2]:u.shape[u.rank-1],h=o?c.shape[c.rank-1]:c.shape[c.rank-2],p=r?u.shape[u.rank-1]:u.shape[u.rank-2],f=o?c.shape[c.rank-2]:c.shape[c.rank-1],m=u.shape.slice(0,-2),g=c.shape.slice(0,-2),v=FA(m),b=FA(g);RA(d===h,(()=>`Error in fused matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${u.shape} and ${c.shape} and transposeA=${r} and transposeB=${o} must match.`));const y=yM(u.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,f]),w=vz(u,r?[v,d,p]:[v,p,d]),x=vz(c,o?[b,f,h]:[b,h,f]);let k,C;null!=a&&(k=XF(a,"bias","fused matMul"),[k]=RF(k,u),yM(y,k.shape)),null!=s&&(C=XF(s,"prelu weights","fused matMul"));const S=(e,t)=>{const[n,s,l,u]=t,c=hB(vz(e,l.shape),l,i);let d,h;if(r||o?!r&&o?(d=pL(c,s,!1,!1),h=pL(c,n,!0,!1)):r&&!o?(d=pL(s,c,!1,!0),h=pL(n,c,!1,!1)):(d=pL(s,c,!0,!0),h=pL(c,n,!0,!0)):(d=pL(c,s,!1,!0),h=pL(n,c,!0,!1)),null!=a){return[d,h,pB(u,c)]}return[d,h]},E={a:w,b:x,bias:k,preluActivationWeights:C},N={transposeA:r,transposeB:o,activation:i,leakyreluAlpha:l};if(null==a){const e=nM(((e,t,n)=>{const r=BF.runKernel(ED,E,N);return n([e,t,r]),{value:vz(r,y),gradFunc:S}}));return e(w,x)}{const e=nM(((e,t,n,r)=>{const o=BF.runKernel(ED,E,N);return r([e,t,o,n]),{value:vz(o,y),gradFunc:S}}));return e(w,x,k)}}});const wB=YF({cropAndResize_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=XF(e,"image","cropAndResize"),s=XF(t,"boxes","cropAndResize","float32"),l=XF(n,"boxInd","cropAndResize","int32"),u=s.shape[0];RA(4===i.rank,(()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`)),RA(2===s.rank&&4===s.shape[1],(()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${s.shape}.`)),RA(1===l.rank&&l.shape[0]===u,(()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${s.shape}.`)),RA(2===r.length,(()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`)),RA(r[0]>=1&&r[1]>=1,(()=>`cropSize must be atleast [1,1], but was ${r}`)),RA("bilinear"===o||"nearest"===o,(()=>`method must be bilinear or nearest, but was ${o}`));const c={image:i,boxes:s,boxInd:l},d={method:o,extrapolationValue:a,cropSize:r};return BF.runKernel(nR,c,d)}});const xB=YF({flipLeftRight_:function(e){const t=XF(e,"image","flipLeftRight","float32");RA(4===t.rank,(()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`));const n={image:t};return BF.runKernel(SR,n,{})}});const kB=YF({grayscaleToRGB_:function(e){const t=XF(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];RA(t.rank>=2,(()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`)),RA(1===r,(()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`));const o=new Array(t.rank);return o.fill(1,0,n),o[n]=3,Gz(t,o)}});const CB=YF({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(((e,t)=>XF(e,`tensors${t}`,"einsum"))),a={equation:e};return BF.runKernel(fR,o,a)}});const SB=YF({rgbToGrayscale_:function(e){const t=XF(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];RA(t.rank>=2,(()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`)),RA(3===r,(()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`));const o=t.dtype,a=U_(t,"float32"),i=JL([.2989,.587,.114]);let s;switch(t.rank){case 2:s=CB("ij,j->i",a,i);break;case 3:s=CB("ijk,k->ij",a,i);break;case 4:s=CB("ijkl,l->ijk",a,i);break;case 5:s=CB("ijklm,m->ijkl",a,i);break;case 6:s=CB("ijklmn,n->ijklm",a,i);break;default:throw new Error("Not a valid tensor rank.")}return s=Wz(s,-1),U_(s,o)}});const EB=YF({rotateWithOffset_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const o=XF(e,"image","rotateWithOffset","float32");RA(4===o.rank,(()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`));const a={image:o},i={radians:t,fillValue:n,center:r};return BF.runKernel(SD,a,i)}});function NB(e,t,n,r,o,a){null==r&&(r=.5),null==o&&(o=Number.NEGATIVE_INFINITY),null==a&&(a=0);const i=e.shape[0];return n=Math.min(n,i),RA(0<=r&&r<=1,(()=>`iouThreshold must be in [0, 1], but was '${r}'`)),RA(2===e.rank,(()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`)),RA(4===e.shape[1],(()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`)),RA(1===t.rank,(()=>"scores must be a 1D tensor")),RA(t.shape[0]===i,(()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${t.shape[0]}`)),RA(0<=a&&a<=1,(()=>`softNmsSigma must be in [0, 1], but was '${a}'`)),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:a}}const IB=YF({nonMaxSuppression_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const a=XF(e,"boxes","nonMaxSuppression","float32"),i=XF(t,"scores","nonMaxSuppression","float32"),s=NB(a,i,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return BF.runKernel(dP,{boxes:a,scores:i},l)}});function $B(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,o=e.length,a=0,i=!1;for(;r<o;){a=r+(o-r>>>1);const s=n(t,e[a]);s>0?r=a+1:(o=a,i=!s)}return i?r:-r-1}(e,t,n||TB)}(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function TB(e,t){return e>t?1:e<t?-1:0}function AB(e,t,n,r,o){return PB(e,t,n,r,o,0)}function OB(e,t,n,r,o,a){return PB(e,t,n,r,o,0,!1,a,!0)}function RB(e,t,n,r,o,a){return PB(e,t,n,r,o,a,!0)}function PB(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const u=[];for(let g=0;g<t.length;g++)t[g]>o&&u.push({score:t[g],boxIndex:g,suppressBeginIndex:0});u.sort(_B);const c=a>0?-.5/a:0,d=[],h=[];for(;d.length<n&&u.length>0;){const t=u.pop(),{score:n,boxIndex:a,suppressBeginIndex:i}=t;if(n<o)break;let s=!1;for(let l=d.length-1;l>=i;--l){const n=DB(e,a,d[l]);if(n>=r){s=!0;break}if(t.score=t.score*FB(r,c,n),t.score<=o)break}t.suppressBeginIndex=d.length,s||(t.score===n?(d.push(a),h.push(t.score)):t.score>o&&$B(u,t,_B))}const p=d.length,f=n-p;s&&f>0&&(d.push(...new Array(f).fill(0)),h.push(...new Array(f).fill(0)));const m={selectedIndices:d};return i&&(m.selectedScores=h),l&&(m.validOutputs=p),m}function DB(e,t,n){const r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),h=Math.max(o[1],o[3]),p=(s-a)*(l-i),f=(d-u)*(h-c);if(p<=0||f<=0)return 0;const m=Math.max(a,u),g=Math.max(i,c),v=Math.min(s,d),b=Math.min(l,h),y=Math.max(v-m,0)*Math.max(b-g,0);return y/(p+f-y)}function FB(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function _B(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const MB=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const a=XF(e,"boxes","nonMaxSuppressionAsync"),i=XF(t,"scores","nonMaxSuppressionAsync"),s=NB(a,i,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;const l=await Promise.all([a.data(),i.data()]),u=l[0],c=l[1],{selectedIndices:d}=AB(u,c,n,r,o);return a!==e&&a.dispose(),i!==t&&i.dispose(),JL(d,"int32")};const zB=YF({nonMaxSuppressionWithScore_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=XF(e,"boxes","nonMaxSuppression"),s=XF(t,"scores","nonMaxSuppression"),l=NB(i,s,n,r,o,a);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,a=l.softNmsSigma;const u={boxes:i,scores:s},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:a},d=BF.runKernel(pP,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}});const LB=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=XF(e,"boxes","nonMaxSuppressionAsync"),s=XF(t,"scores","nonMaxSuppressionAsync"),l=NB(i,s,n,r,o,a);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,a=l.softNmsSigma;const u=await Promise.all([i.data(),s.data()]),c=u[0],d=u[1],{selectedIndices:h,selectedScores:p}=RB(c,d,n,r,o,a);return i!==e&&i.dispose(),s!==t&&s.dispose(),{selectedIndices:JL(h,"int32"),selectedScores:JL(p)}};const BB=YF({nonMaxSuppressionPadded_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=XF(e,"boxes","nonMaxSuppression"),s=XF(t,"scores","nonMaxSuppression"),l=NB(i,s,n,r,o,null),u={boxes:i,scores:s},c={maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:a},d=BF.runKernel(hP,u,c);return{selectedIndices:d[0],validOutputs:d[1]}}});const jB=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=XF(e,"boxes","nonMaxSuppressionAsync"),s=XF(t,"scores","nonMaxSuppressionAsync"),l=NB(i,s,n,r,o,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[h,p]=await Promise.all([i.data(),s.data()]),{selectedIndices:f,validOutputs:m}=OB(h,p,u,c,d,a);return i!==e&&i.dispose(),s!==t&&s.dispose(),{selectedIndices:JL(f,"int32"),validOutputs:rM(m,"int32")}};const HB=YF({resizeBilinear_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=XF(e,"images","resizeBilinear");RA(3===o.rank||4===o.rank,(()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`)),RA(2===t.length,(()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`)),RA(!1===r||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let a=o,i=!1;3===o.rank&&(i=!0,a=vz(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const[]=t,s={images:a},l={alignCorners:n,halfPixelCenters:r,size:t},u=BF.runKernel(OP,s,l);return i?vz(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const VB=YF({resizeNearestNeighbor_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=XF(e,"images","resizeNearestNeighbor");RA(3===o.rank||4===o.rank,(()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`)),RA(2===t.length,(()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`)),RA("float32"===o.dtype||"int32"===o.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),RA(!1===r||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let a=o,i=!1;3===o.rank&&(i=!0,a=vz(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const[]=t,s={images:a},l={alignCorners:n,halfPixelCenters:r,size:t},u=BF.runKernel(TP,s,l);return i?vz(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const WB=YF({bincount_:function(e,t,n){const r=XF(e,"x","bincount"),o=XF(t,"weights","bincount");RA("int32"===r.dtype,(()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`)),RA(n>=0,(()=>`size must be non-negative, but got ${n}.`)),RA(o.size===r.size||0===o.size,(()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`));const a={x:r,weights:o},i={size:n};return BF.runKernel(MO,a,i)}});const GB=YF({lessEqual_:function(e,t){let n=XF(e,"a","lessEqual","string_or_numeric"),r=XF(t,"b","lessEqual","string_or_numeric");[n,r]=RF(n,r),yM(n.shape,r.shape);const o={a:n,b:r};return BF.runKernel(BR,o)}});const UB=YF({round_:function(e){const t={x:XF(e,"x","round")};return BF.runKernel(FP,t)}});const KB=YF({threshold_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const o=XF(e,"image","threshold"),a=o.shape[0]*o.shape[1];let i,s,l,u,c=Q_(JL([r]),255);if(RA(3===o.rank,(()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`)),RA(3===o.shape[2]||1===o.shape[2],(()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`)),RA("int32"===o.dtype||"float32"===o.dtype,(()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`)),RA("otsu"===t||"binary"===t,(()=>`Method must be binary or otsu, but was ${t}`)),3===o.shape[2]){[i,s,l]=UL(o,[1,1,1],-1);const e=Q_(i,.2989),t=Q_(s,.587),n=Q_(l,.114);u=X_(X_(e,t),n)}else u=e;if("otsu"===t){c=function(e,t){let n,r,o,a,i,s,l=JL([-1]),u=JL([0]),c=JL([0]);for(let d=0;d<e.size-1;d++){n=LL(e,0,d+1),r=LL(e,d+1),i=Y_(tL(n),t),s=Y_(tL(r),t);const h=tL(Q_(n,PL(0,n.size)));o=Y_(h,tL(n));const p=dM(r.shape,n.size),f=X_(PL(0,r.size),p),m=Q_(r,f);a=Y_(tL(m),tL(r));const g=fM(o,a),v=fM(o,a),b=Q_(i,s);c=Q_(Q_(b,g),v);const y=Xz(c,u);u=eB(y,c,u),l=eB(y,JL([d]),l)}return l}(WB(U_(UB(u),"int32"),e_([]),256),a)}const d=n?GB(u,c):Xz(u,c);return U_(Q_(d,255),"int32")}});const qB=YF({transform_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0;const i=XF(e,"image","transform","float32"),s=XF(t,"transforms","transform","float32");RA(4===i.rank,(()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`)),RA(2===s.rank&&(s.shape[0]===i.shape[0]||1===s.shape[0])&&8===s.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),RA(null==a||2===a.length,(()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`));const l={image:i,transforms:s},u={interpolation:n,fillMode:r,fillValue:o,outputShape:a};return BF.runKernel(gD,l,u)}});const XB=YF({less_:function(e,t){let n=XF(e,"a","less","string_or_numeric"),r=XF(t,"b","less","string_or_numeric");[n,r]=RF(n,r),yM(n.shape,r.shape);const o={a:n,b:r};return BF.runKernel(LR,o)}});const JB=YF({bandPart_:function(e,t,n){const r=XF(e,"a","bandPart");RA(r.rank>=2,(()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`));const o=r.shape,[a,i]=r.shape.slice(-2);let s,l;"number"===typeof t?(RA(t%1===0,(()=>`bandPart(): numLower must be an integer, got ${t}.`)),RA(t<=a,(()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${a}).`)),s=XF(t<0?a:t,"numLower","bandPart")):(RA("int32"===t.dtype,(()=>"bandPart(): numLower's dtype must be an int32.")),s=eB(XB(t,0),a,bL(t,a))),"number"===typeof n?(RA(n%1===0,(()=>`bandPart(): numUpper must be an integer, got ${n}.`)),RA(n<=i,(()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`)),l=XF(n<0?i:n,"numUpper","bandPart")):(RA("int32"===n.dtype,(()=>"bandPart(): numUpper's dtype must be an int32.")),l=eB(XB(n,0),i,bL(n,i)));const u=vz(PL(0,a,1,"int32"),[-1,1]),c=PL(0,i,1,"int32"),d=fM(u,c),h=hL(GB(d,s),Jz(d,wL(l))),p=CL([a,i],r.dtype);return vz(qL(ZL(vz(r,[-1,a,i])).map((e=>eB(h,e,p)))),o)}});function YB(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return gM(e);if(1!==e.rank&&null===n)return YB(vz(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return tL(gM(e),n);if(t===1/0)return eL(gM(e),n);if(t===-1/0)return vL(gM(e),n);if("euclidean"===t||2===t)return Z_(tL(pM(gM(e),rM(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&2===n.length){if(1===t)return eL(tL(gM(e),n[0]),n[1]-1);if(t===1/0)return eL(tL(gM(e),n[1]),n[0]);if(t===-1/0)return vL(tL(gM(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Z_(tL(eM(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const QB=YF({norm_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=YB(e=XF(e,"x","norm"),t,n);let a=o.shape;if(r){const t=HA(n,e.shape);a=iL(o.shape,t)}return vz(o,a)}});const ZB=YF({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,RA(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)RA(e[t].shape[0]===n,(()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`))}else t=!0,e=UL(e,e.shape[0],0).map((e=>KL(e,[0])));RA(e.length<=e[0].shape[0],(()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`));const n=[],r=e;for(let o=0;o<e.length;++o)n.push(BF.tidy((()=>{let e=r[o];if(o>0)for(let t=0;t<o;++t){const r=Q_(tL(Q_(n[t],e)),n[t]);e=fM(e,r)}return Y_(e,QB(e,"euclidean"))})));return t?qL(n,0):n}});function ej(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return BF.tidy((()=>{RA(2===e.shape.length,(()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`));const n=e.shape[0],r=e.shape[1];let o=Uz(n),a=K_(e);const i=YL([[1]],[1,1]);let s=K_(i);const l=n>=r?r:n;for(let e=0;e<l;++e){const t=a,l=s,u=o;[s,a,o]=BF.tidy((()=>{const t=LL(a,[e,e],[n-e,1]),l=QB(t),u=LL(a,[e,e],[1,1]),c=eB(Xz(u,0),YL([[-1]]),YL([[1]])),d=fM(u,Q_(c,l)),h=Y_(t,d);s=1===h.shape[0]?K_(i):Nz([i,LL(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);const p=wL(Y_(pL(c,d),l)),f=LL(a,[e,0],[n-e,r]),m=Q_(p,s),g=rB(s);if(0===e)a=fM(f,pL(m,pL(g,f)));else{const t=fM(f,pL(m,pL(g,f)));a=Nz([LL(a,[0,0],[e,r]),t],0)}const v=rB(m),b=LL(o,[0,e],[n,o.shape[1]-e]);if(0===e)o=fM(b,pL(pL(b,s),v));else{const t=fM(b,pL(pL(b,s),v));o=Nz([LL(o,[0,0],[n,e]),t],1)}return[s,a,o]})),a_([t,l,u])}return!t&&n>r&&(o=LL(o,[0,0],[n,r]),a=LL(a,[0,0],[r,r])),[o,a]}))}const tj=YF({qr_:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(RA(e.rank>=2,(()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`)),2===e.rank)return ej(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),r=ZL(vz(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],a=[];r.forEach((e=>{const[n,r]=ej(e,t);o.push(n),a.push(r)}));return[vz(qL(o,0),e.shape),vz(qL(a,0),e.shape)]}}});var nj;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(nj||(nj={}));const rj=YF({computeWeightedLoss_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nj.SUM_BY_NONZERO_WEIGHTS;const r=XF(e,"losses","computeWeightedLoss");let o=null;null!=t&&(o=XF(t,"weights","computeWeightedLoss"));const a=null==o?r:Q_(r,o);if(n===nj.NONE)return a;if(n===nj.SUM)return tL(a);if(n===nj.MEAN){if(null==o)return gL(a);{const e=r.size/o.size,t=Y_(tL(a),tL(o));return e>1?Y_(t,rM(e)):t}}if(n===nj.SUM_BY_NONZERO_WEIGHTS){if(null==o)return Y_(tL(a),rM(r.size));{const e=Q_(o,SL(r.shape)),t=U_(tL(xL(e,rM(0))),"float32");return Y_(tL(a),t)}}throw Error(`Unknown reduction: ${n}`)}});const oj=YF({absoluteDifference_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:nj.SUM_BY_NONZERO_WEIGHTS;const o=XF(e,"labels","absoluteDifference"),a=XF(t,"predictions","absoluteDifference");let i=null;null!=n&&(i=XF(n,"weights","absoluteDifference")),PA(o.shape,a.shape,"Error in absoluteDifference: ");const s=gM(fM(o,a));return rj(s,i,r)}});const aj=YF({cosineDistance_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:nj.SUM_BY_NONZERO_WEIGHTS;const a=XF(e,"labels","cosineDistance"),i=XF(t,"predictions","cosineDistance");let s=null;null!=r&&(s=XF(r,"weights","cosineDistance")),PA(a.shape,i.shape,"Error in cosineDistance: ");const l=rM(1),u=fM(l,tL(Q_(a,i),n,!0));return rj(u,s,o)}});const ij=YF({hingeLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:nj.SUM_BY_NONZERO_WEIGHTS,o=XF(e,"labels","hingeLoss");const a=XF(t,"predictions","hingeLoss");let i=null;null!=n&&(i=XF(n,"weights","hingeLoss")),PA(o.shape,a.shape,"Error in hingeLoss: ");const s=rM(1);o=fM(Q_(rM(2),o),s);const l=DL(fM(s,Q_(o,a)));return rj(l,i,r)}});const sj=YF({huberLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:nj.SUM_BY_NONZERO_WEIGHTS;const a=XF(e,"labels","huberLoss"),i=XF(t,"predictions","huberLoss");let s=null;null!=n&&(s=XF(n,"weights","huberLoss")),PA(a.shape,i.shape,"Error in huberLoss: ");const l=rM(r),u=gM(fM(i,a)),c=bL(u,l),d=fM(u,c),h=X_(Q_(rM(.5),eM(c)),Q_(l,d));return rj(h,s,o)}});const lj=YF({logLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:nj.SUM_BY_NONZERO_WEIGHTS;const a=XF(e,"labels","logLoss"),i=XF(t,"predictions","logLoss");let s=null;null!=n&&(s=XF(n,"weights","logLoss")),PA(a.shape,i.shape,"Error in logLoss: ");const l=rM(1),u=rM(r),c=wL(Q_(a,Qz(X_(i,u)))),d=Q_(fM(l,a),Qz(X_(fM(l,i),u))),h=fM(c,d);return rj(h,s,o)}});const uj=YF({squaredDifference_:function(e,t){let n=XF(e,"a","squaredDifference"),r=XF(t,"b","squaredDifference");[n,r]=RF(n,r),yM(n.shape,r.shape);const o={a:n,b:r};return BF.runKernel(oD,o,{})}});const cj=YF({meanSquaredError_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:nj.SUM_BY_NONZERO_WEIGHTS;const o=XF(e,"labels","meanSquaredError"),a=XF(t,"predictions","meanSquaredError");let i=null;null!=n&&(i=XF(n,"weights","meanSquaredError")),PA(o.shape,a.shape,"Error in meanSquaredError: ");const s=uj(o,a);return rj(s,i,r)}});const dj=YF({sigmoidCrossEntropy_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:nj.SUM_BY_NONZERO_WEIGHTS,a=XF(e,"multiClassLabels","sigmoidCrossEntropy");const i=XF(t,"logits","sigmoidCrossEntropy");let s=null;if(null!=n&&(s=XF(n,"weights","sigmoidCrossEntropy")),PA(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){const e=rM(r),t=rM(1),n=rM(.5);a=X_(Q_(a,fM(t,e)),Q_(n,e))}const l=function(e,t){const n=XF(e,"labels","sigmoidCrossEntropyWithLogits"),r=XF(t,"logits","sigmoidCrossEntropyWithLogits");PA(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const o=DL(r),a=Q_(r,n),i=Zz(Vz(wL(gM(r))));return X_(fM(o,a),i)}(a,i);return rj(l,s,o)}});const hj=YF({softmaxCrossEntropy_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:nj.SUM_BY_NONZERO_WEIGHTS,a=XF(e,"onehotLabels","softmaxCrossEntropy");const i=XF(t,"logits","softmaxCrossEntropy");let s=null;if(null!=n&&(s=XF(n,"weights","softmaxCrossEntropy")),PA(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){const e=rM(r),t=rM(1),n=rM(a.shape[1]);a=X_(Q_(a,fM(t,e)),Y_(e,n))}const l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);const r=nM(((e,t,r)=>{const o=dL(t,[n],!0),a=fM(U_(t,"float32"),o);r([e,a]);const i=wL(Q_(a,e));return{value:tL(i,[n]),gradFunc:(e,t)=>{const[r,o]=t,a=iL(e.shape,[n]);return[Q_(vz(e,a),fM(U_(r,"float32"),Vz(o))),Q_(vz(e,a),fM(Vz(o),U_(r,"float32")))]}}}));return r(e,t)}(a,i);return rj(l,s,o)}});const pj={flipLeftRight:xB,grayscaleToRGB:kB,resizeNearestNeighbor:VB,resizeBilinear:HB,rgbToGrayscale:SB,rotateWithOffset:EB,cropAndResize:wB,nonMaxSuppression:IB,nonMaxSuppressionAsync:MB,nonMaxSuppressionWithScore:zB,nonMaxSuppressionWithScoreAsync:LB,nonMaxSuppressionPadded:BB,nonMaxSuppressionPaddedAsync:jB,threshold:KB,transform:qB},fj={bandPart:JB,gramSchmidt:ZB,qr:tj},mj={absoluteDifference:oj,computeWeightedLoss:rj,cosineDistance:aj,hingeLoss:ij,huberLoss:sj,logLoss:lj,meanSquaredError:cj,sigmoidCrossEntropy:dj,softmaxCrossEntropy:hj};const gj=class{static sgd(e){return new kM(e)}static momentum(e,t){return new CM(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}static rmsprop(e){return new SM(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}static adam(){return new mM(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}static adadelta(){return new cM(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}static adamax(){return new xM(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}static adagrad(e){return new hM(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}},vj="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:e=>e();function bj(){return new Promise((e=>vj((()=>e()))))}function yj(e,t){const n=e[0].length;e.forEach(((e,t)=>{RA(e.length===n,(()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`))})),RA(t>=0&&t<n,(()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`));const r=e[0];e.forEach(((e,o)=>{for(let a=0;a<n;a++)RA(a===t||e[a]===r[a],(()=>`Error in concat${n}D: Shape of tensors[${o}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${o}.`))}))}function wj(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var xj;function kj(e,t,n){let r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let o=1;o<n.length;++o){const a=n[o],i=r[r.length-n.length+o],s=r[i];if(a>=0)if(s>=0){if(s!==a)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${o+e}] = ${a} but shape[${o+e}] = ${s}`)}else r[i]=a}return r}function Cj(e){const t={FIRST_DIM_SIZE:xj.FIRST_DIM_SIZE,VALUE_ROWIDS:xj.VALUE_ROWIDS,ROW_LENGTHS:xj.ROW_LENGTHS,ROW_SPLITS:xj.ROW_SPLITS,ROW_LIMITS:xj.ROW_LIMITS,ROW_STARTS:xj.ROW_STARTS},n=[];for(const r of e){if(!(r in t))break;n.push(t[r])}return n}function Sj(e){return 0===e.length?0:e[0]===xj.FIRST_DIM_SIZE?e.length-1:e.length}function Ej(e,t){if(null==e||null==t)return;const n=e.length,r=t.length;if(n>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let o=0;o<Math.min(n,r-1);++o){const n=e[o],r=t[o+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${o-e.length}] = ${n} but ragged tensor input.flatValues.shape[${o-e.length}] = ${r}`)}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(xj||(xj={}));const Nj=30;function Ij(e){return e<=Nj?e:QA(e,Math.floor(Math.sqrt(e)))}function $j(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function Tj(e,t,n){let r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])r=r.concat(t.slice(0)),r.push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);const n=t.length;for(let o=0;o<n;++o)r=r.concat([e[o+1]/t[o],t[o]]);r=r.concat(e.slice(n+1))}return r}function Aj(e,t){const n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(let r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{const r=[],o=[];for(let n=1;n<e;++n)n>=2*t+1||n%2===1?o.push(n):r.push(n);n.push(...r),n.push(0),n.push(...o)}return n}function Oj(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(let a=1;a<e.length;++a)a<=t.length?r?o.push(t[a-1]*e[a]):o.push(e[a]/t[a-1]):o.push(e[a]);return o}function Rj(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function Pj(e,t,n){const r=e.slice(0,1);for(let o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}function Dj(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===FA(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const o=t.shape,a=o[o.length-1];let i=1;for(let d=0;d<o.length-1;++d)i*=o[d];const s=e.shape,l=o.slice();l.pop();let u=1;for(let d=a;d<n;++d)u*=s[d],l.push(s[d]);const c=[...ZA(e.shape).map((e=>e/u)),1].slice(0,a);return[l,i,u,c]}function Fj(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(a+` update.rank < ${o}. `);if(e.length<r+(n.rank-o))throw new Error(a+` Output shape length < ${r+(n.rank-o)}`);if(n.rank!==o+e.length-r)throw new Error(a+" update.rank != "+(o+e.length-r));for(let i=0;i<o;++i)if(n.shape[i]!==t.shape[i])throw new Error(a+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${t.shape[i]}).`);for(let i=0;i<n.rank-o;++i)if(n.shape[i+o]!==e[i+r])throw new Error(a+` updates.shape[${i+o}] (${n.shape[i+o]}) != shape[${i+o}] (${e[i+o]})`)}function _j(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}Fj(n,t,e)}function Mj(e,t,n){const r=t.shape.length,o=r>1?t.shape[r-1]:1,a=n.length;let i=1;for(let l=o;l<a;++l)i*=n[l];const s=o<1?1:o;return{sliceRank:o,numUpdates:FA(t.shape)/s,sliceSize:i,strides:[...ZA(n.slice(0,o)),1],outputSize:FA(n)}}const zj=1.7580993408473768,Lj=1.0507009873554805,Bj=.3275911,jj=.254829592,Hj=-.284496736,Vj=1.421413741,Wj=-1.453152027,Gj=1.061405429;function Uj(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Kj(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function qj(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let o=0;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}function Xj(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let o=2;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}function Jj(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Yj(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Qj(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let o=0;o<Math.ceil(e/2);o++){const a=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(a),r[o]=Math.sin(a)}return{real:n,imag:r}}function Zj(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const eH="->",tH=/->/g,nH=",",rH="...";function oH(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(tH,"").length)/eH.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${eH}").`);const[r,o]=e.split(eH);RA(-1===r.indexOf(rH),(()=>`The ellipsis notation ("${rH}") is not supported yet.`));const a=r.split(nH),i=a.length;if(t!==i)throw new Error(`Expected ${i} input tensors, received ${t}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let d=0;d<o.length;++d){const e=o[d];if(!a.some((t=>-1!==t.indexOf(e))))throw new Error(`Output subscripts contain the label ${e} not present in the input subscripts.`);-1===s.indexOf(e)&&s.push(e)}for(let d=0;d<r.length;++d){const e=r[d];-1===s.indexOf(e)&&e!==nH&&s.push(e)}const l=new Array(a.length);for(let d=0;d<i;++d){if(new Set(a[d].split("")).size!==a[d].length)throw new Error(`Found duplicate axes in input component ${a[d]}. Support for duplicate axes in input is not implemented yet.`);l[d]=[];for(let e=0;e<a[d].length;++e)l[d].push(s.indexOf(a[d][e]))}const u=s.length,c=[];for(let d=o.length;d<u;++d)c.push(d);return{allDims:s,summedDims:c,idDims:l}}function aH(e,t){let n=new Array(e);n.fill(-1);for(let o=0;o<t.length;++o)n[t[o]]=o;const r=[];for(let o=0;o<e;++o)-1===n[o]&&r.push(o);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:r}}function iH(e,t,n){const r=new Array(e);for(let o=0;o<n.length;++o){const e=n[o].shape;for(let n=0;n<t[o].length;++n)void 0===r[t[o][n]]?r[t[o][n]]=e[n]:RA(r[t[o][n]]===e[n],(()=>`Expected dimension ${r[t[o][n]]} at axis ${n} of input shaped ${JSON.stringify(e)}, but got dimension ${e[n]}`))}}function sH(e,t){const n=e,r=[];let o=0;0===e.length&&n.push(-1),o=e.length+1;for(let i=0;i<o;++i)r.push([]);const a=[];for(let i=0;i<n.length;++i){const e=uH(t,n[i]);for(const t of e)-1===a.indexOf(t)&&(r[i].push(t),a.push(t))}return{path:n,steps:r}}function lH(e){return e.every(((e,t)=>e===t))}function uH(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function cH(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)RA(e.shape[n]%t===0,(()=>"Number of splits must evenly divide the axis.")),r=new Array(t).fill(e.shape[n]/t);else{const o=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);RA(o<=1,(()=>"There should be only one negative value in split array."));const a=t.indexOf(-1);if(-1!==a){const r=t.reduce(((e,t)=>t>0?e+t:e));t[a]=e.shape[n]-r}RA(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),r=t}return r}function dH(e){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${e}`}function hH(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function pH(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}function fH(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function mH(e,t){return`size ${e} must be non-negative, not ${t}`}function gH(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function vH(e,t){return`Input to reshape is a SparseTensor with ${FA(e)}\n  dense values, but the requested shape requires a multiple of ${FA(t)}. inputShape=${e} outputShape= ${t}`}function bH(e,t){return`Input to reshape is a tensor with ${FA(e)} dense values, but the requested shape has ${FA(t)}. inputShape=${e} outputShape=${t}`}function yH(){return"segment ids must be >= 0"}function wH(){return"segment ids are not increasing"}function xH(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function kH(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}function CH(e,t){let n,r=!1;for(e<=Nj?(n=e,r=!0):n=QA(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=QA(e,n+1);return n}function SH(e,t,n){const r=[],o=e.length;for(let a=0;a<o;a++)a!==t?r.push(e[a]):r.push(n);return r}function EH(e,t,n,r){const o=t.shape.length,a=e.shape.length;if(0!==r&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${a}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(e.shape[d]!==t.shape[d])throw new Error(`x.shape[${d}]: ${e.shape[d]} should be equal to indices.shape[${d}]: ${t.shape[d]}.`);const i=e.shape[n],s=[];let l=1,u=1,c=1;for(let d=0;d<r;++d)s.push(e.shape[d]),l*=e.shape[d];for(let d=r;d<n;d++)s.push(e.shape[d]),u*=e.shape[d];for(let d=r;d<o;d++)s.push(t.shape[d]);for(let d=n+1;d<a;d++)s.push(e.shape[d]),c*=e.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:i,outputShape:s}}function NH(e){try{return e.map((e=>oF(e)))}catch(dTe){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${dTe}`)}}function IH(e){return e.map((e=>rF(e)))}function $H(e,t){const n=[];for(let a=0;a<t.length;a++)t[a]&&n.push(a);const r=G_(e,"int32"),o=G_([n.length,e.length],"int32");for(let a=0;a<n.length;a++){const t=r.indexToLoc(n[a]),i=a*e.length;o.values.set(t,i)}return o.toTensor()}!function(){for(const e of EM)lM(e)}();const TH={kernelName:vO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Q_(e,dB(U_(n,"float32"),-1))}}},AH={kernelName:bO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=eM(U_(n,"float32")),r=Z_(fM(rM(1),t));return wL(Y_(e,r))}}}},OH={kernelName:yO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Z_(fM(eM(U_(n,"float32")),1));return Y_(e,t)}}}},RH={kernelName:wO,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=yM(n.shape,r.shape);return{a:()=>{let t=e;const r=bM(n.shape,o);return r.length>0&&(t=tL(t,r)),vz(t,n.shape)},b:()=>{let t=e;const n=bM(r.shape,o);return n.length>0&&(t=tL(t,n)),vz(t,r.shape)}}}},PH={kernelName:xO,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach(((t,r)=>{n[r]=()=>e.clone()})),n}},DH={kernelName:SO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tM(n)}}},FH={kernelName:EO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tM(n)}}},_H={kernelName:NO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Y_(e,Z_(fM(rM(1),eM(U_(n,"float32")))))}}},MH={kernelName:IO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Z_(X_(rM(1),eM(U_(n,"float32"))));return Y_(e,t)}}}},zH={kernelName:AO,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=yM(n.shape,r.shape);return{a:()=>{const t=X_(eM(n),eM(r));let a=Q_(e,Y_(r,t));const i=bM(n.shape,o);return i.length>0&&(a=tL(a,i)),vz(a,n.shape)},b:()=>{const t=X_(eM(n),eM(r));let a=wL(Q_(e,Y_(n,t)));const i=bM(r.shape,o);return i.length>0&&(a=tL(a,i)),vz(a,r.shape)}}}},LH={kernelName:$O,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Y_(e,X_(eM(U_(n,"float32")),1))}}},BH={kernelName:TO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Y_(e,fM(rM(1),eM(U_(n,"float32"))))}}};const jH=YF({avgPool3dGrad_:function(e,t,n,r,o,a){const i=XF(e,"dy","avgPool3dGrad"),s=XF(t,"input","avgPool3dGrad");let l=i,u=s,c=!1;4===s.rank&&(c=!0,l=vz(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),u=vz(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),RA(5===l.rank,(()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`)),RA(5===u.rank,(()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`)),gz("avgPool3dGrad",o,a);const d={dy:l,input:u},h={filterSize:n,strides:r,pad:o,dimRoundingMode:a},p=BF.runKernel(DO,d,h);return c?vz(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),HH={kernelName:PO,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:o,strides:a,pad:i,dimRoundingMode:s}=n;return{x:()=>jH(e,r,o,a,i,s)}}};const VH=YF({avgPoolGrad_:function(e,t,n,r,o){const a=XF(e,"dy","avgPoolGrad"),i=XF(t,"input","avgPoolGrad");RA(i.rank===a.rank,(()=>`Rank of input (${i.rank}) does not match rank of dy (${a.rank})`));let s=i,l=a,u=!1;3===i.rank&&(u=!0,s=vz(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=vz(a,[1,a.shape[0],a.shape[1],a.shape[2]])),RA(4===l.rank,(()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`)),RA(4===s.rank,(()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${s.rank}.`));const c={dy:l,input:s},d={filterSize:n,strides:r,pad:o},h=BF.runKernel(RO,c,d);return u?vz(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),WH={kernelName:OO,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:o,strides:a,pad:i}=n;return{x:()=>VH(e,r,o,a,i)}}},GH={kernelName:FO,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,o]=t,{transposeA:a,transposeB:i}=n;return a||i?!a&&i?{a:()=>pL(e,o,!1,!1),b:()=>pL(e,r,!0,!1)}:a&&!i?{a:()=>pL(o,e,!1,!0),b:()=>pL(r,e,!1,!1)}:{a:()=>pL(o,e,!0,!0),b:()=>pL(e,r,!0,!0)}:{a:()=>pL(e,o,!1,!0),b:()=>pL(r,e,!0,!1)}}};const UH=YF({spaceToBatchND_:function(e,t,n){const r=XF(e,"x","spaceToBatchND");RA(r.rank>=1+t.length,(()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`)),RA(n.length===t.length,(()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`)),RA(r.shape.reduce(((e,r,o)=>o>0&&o<=t.length?e&&(r+n[o-1][0]+n[o-1][1])%t[o-1]===0:e),!0),(()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`));const o={x:r},a={blockShape:t,paddings:n};return BF.runKernel(JP,o,a)}}),KH={kernelName:_O,gradFunc:(e,t,n)=>{const{blockShape:r,crops:o}=n;return{x:()=>UH(e,r,o)}}},qH={kernelName:"BroadcastTo",gradFunc:(e,t,n)=>{const r=n,o=r.inputShape,a=r.shape,i=Array.from(a);for(let l=o.length-1;l>=0;l--)if(o[l]===a[l])i[l]=1;else if(1!==o[l])throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${a}].`);const s=[];for(let l=0;l<i.length;l++)i[l]>1&&s.push(l);return{x:()=>tL(e,s,!0)}}},XH={kernelName:BO,gradFunc:e=>({x:()=>e.clone()})},JH={kernelName:jO,gradFunc:e=>({x:()=>tM(e)})},YH={kernelName:HO,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:o,clipValueMax:a}=n;return{x:()=>eB(hL(Jz(r,o),GB(r,a)),e,tM(e))}}},QH={kernelName:WO,inputsToSave:["x"],gradFunc:TH.gradFunc},ZH={kernelName:GO,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map((e=>e.shape)),{axis:o}=n,a=HA(o,t[0].shape)[0],i=r.map((e=>e[a]));return UL(e,i,a).map((e=>()=>e))}},eV={kernelName:UO,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,o]=t,{dilations:a,strides:i,pad:s,dataFormat:l}=n;return RA(hz(a),(()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`)),{x:()=>Pz(r.shape,e,o,i,s,l),filter:()=>uB(r,e,o.shape,i,s,l)}}},tV={kernelName:qO,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,o]=t,{strides:a,pad:i,dataFormat:s,dimRoundingMode:l}=n;return{dy:()=>Oz(e,o,a,i,s,1,l),filter:()=>uB(e,r,o.shape,a,i,s,l)}}};const nV=YF({conv3DBackpropFilter_:function(e,t,n,r,o){let a=e;4===e.rank&&(a=vz(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let i=t;4===i.rank&&(i=vz(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),RA(5===a.rank,(()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${a.shape}.`)),RA(5===i.rank,(()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`)),RA(5===n.length,(()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`)),RA(a.shape[4]===n[3],(()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${n[3]}.`)),RA(i.shape[4]===n[4],(()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`));const s={x:a,dy:i},l={strides:r,pad:o,filterShape:n};return BF.runKernel(JO,s,l)}}),rV={kernelName:XO,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:o,pad:a}=n;RA(hz(r),(()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`));const[i,s]=t;return{x:()=>_z(i.shape,e,s,o,a),filter:()=>nV(i,e,s.shape,o,a)}}};const oV=YF({sin_:function(e){const t={x:XF(e,"x","sin","float32")};return BF.runKernel(VP,t)}}),aV={kernelName:QO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Q_(wL(oV(U_(n,"float32"))),e)}}};const iV=YF({sinh_:function(e){const t={x:XF(e,"x","sinh")};return BF.runKernel(WP,t)}}),sV={kernelName:ZO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Q_(iV(U_(n,"float32")),e)}}};const lV=YF({cumsum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o={x:XF(e,"x","cumsum")},a={axis:t,exclusive:n,reverse:r};return BF.runKernel(tR,o,a)}}),uV={kernelName:tR,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:o,exclusive:a,reverse:i}=n;return{x:()=>{const t=lL([o],r.rank);let n=lV(e,o,a,!i);return null!=t&&(n=rB(n,t)),n}}}},cV={kernelName:aR,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:o,pad:a,dimRoundingMode:i}=n,s=null==r?[1,1]:r;RA(hz(s),(()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`));const[l,u]=t;return RA(4===l.rank,(()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`)),RA(4===u.rank,(()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`)),RA(l.shape[3]===u.shape[2],(()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`)),RA(pz(o,s),(()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${s}'.`)),gz("depthwiseConv2d",a,i),{x:()=>bB(l.shape,e,u,o,a,s,i),filter:()=>vB(l,e,u.shape,o,a,s,i)}}},dV={kernelName:uR,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,o]=t,a={x:r,filter:o,dy:e},i={x:r,filter:o,dy:e};return{x:()=>BF.runKernel(cR,a,n),filter:()=>BF.runKernel(dR,i,n)}}},hV={kernelName:mR,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>BF.runKernel(gR,r)}}},pV={kernelName:vR,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=Q_(Vz(wL(eM(n))),2/Math.sqrt(Math.PI));return{x:()=>Q_(e,r)}}},fV={kernelName:yR,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Q_(e,n)}}},mV={kernelName:wR,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>vz(e,n.shape)}}},gV={kernelName:xR,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Q_(e,Vz(n))}}},vV={kernelName:ER,gradFunc:e=>({x:()=>tM(e)})},bV={kernelName:NR,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=yM(n.shape,r.shape);return{a:()=>{const t=Y_(e,U_(r,"float32")),a=bM(n.shape,o);return a.length>0?vz(tL(t,a),n.shape):t},b:()=>{let t=Q_(e,U_(n,"float32"));const a=bM(r.shape,o);a.length>0&&(t=vz(tL(t,a),r.shape));const i=eM(r);return wL(Y_(t,U_(i,"float32")))}}}};const yV=YF({rsqrt_:function(e){const t={x:XF(e,"x","rsqrt","float32")};return BF.runKernel(_P,t)}}),wV={kernelName:IR,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[o,a,i,s]=t,l=null==s?rM(1):s,u=bM(a.shape,o.shape),c=[];if(1===a.rank){for(let e=0;e<o.shape.length-1;++e)c.push(o.shape[e]);c.push(1)}const d=fM(o,a),h=Q_(e,l),p=yV(X_(i,rM(r))),f=Q_(Q_(Q_(p,p),p),rM(-.5));return{x:()=>1===a.rank?vz(Q_(Q_(e,Gz(vz(p,[1,1,1,a.shape[0]]),c)),l),o.shape):vz(Q_(Q_(e,p),l),o.shape),mean:()=>{let e=Q_(Q_(p,rM(-1)),h);return 1===a.rank&&(e=tL(e,u)),vz(e,a.shape)},variance:()=>{let e=Q_(Q_(f,d),h);return 1===a.rank&&(e=tL(e,u)),vz(e,a.shape)},scale:()=>{const t=Q_(d,p);let n=Q_(e,t);return 1===a.rank&&(n=tL(n,u)),vz(n,a.shape)},offset:()=>{let t=e;return 1===a.rank&&(t=tL(t,u)),vz(t,a.shape)}}}};const xV=YF({unsortedSegmentSum_:function(e,t,n){const r=XF(e,"x","unsortedSegmentSum"),o=XF(t,"segmentIds","unsortedSegmentSum","int32");RA(MA(n),(()=>"numSegments must be of dtype int"));const a={x:r,segmentIds:o},i={numSegments:n};return BF.runKernel(wD,a,i)}}),kV={kernelName:$R,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,o]=t,{axis:a,batchDims:i}=n,s=HA(a,r.shape)[0],l=(e,t,n)=>()=>{const r=e.shape,o=t.size,i=r.slice(0,s),l=i.length,u=r.slice(a,r.length).slice(1),c=u.length,d=CV(0,l),h=CV(l+1,l+1+c),p=SV([i,[o],u]),f=vz(n,p),m=vz(t,[o]),g=SV([[l],d,h]),v=rB(f,g);let b=xV(v,m,e.shape[s]);const y=uL(g);return b=rB(b,y),b};if(1===i){const t=r.shape[0],n=r.split(t,0),a=()=>{const t=qL(n.map(((t,n)=>l(t,o.slice(n,1),e.slice(n,1))())));return t.reshape(r.shape)};return{x:a,indices:()=>o}}return{x:l(r,o,e),indices:()=>o}}};function CV(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function SV(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}const EV={kernelName:OR,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>tM(n),b:()=>tM(r)}}},NV={kernelName:RR,gradFunc:e=>({x:()=>U_(e,"float32")})},IV={kernelName:FR,gradFunc:e=>({x:()=>tM(e)})},$V={kernelName:_R,gradFunc:e=>({x:()=>tM(e)})},TV={kernelName:MR,gradFunc:e=>({x:()=>tM(e)})},AV={kernelName:zR,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:o}=n,a=Xz(r,0);return{x:()=>eB(a,e,Q_(e,o))}}},OV={kernelName:VR,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Y_(e,X_(n,1))}}},RV={kernelName:HR,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Y_(e,U_(n,"float32"))}}},PV={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:o}=n;return{logits:()=>{const t=Vz(r);return fM(e,Q_(tL(e,o,!0),t))}}}};const DV=YF({localResponseNormalizationBackprop_:function(e,t,n){const r={x:e,y:t,dy:n},o={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return BF.runKernel(qR,r,o)}}),FV={kernelName:KR,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,o]=t,{depthRadius:a,bias:i,alpha:s,beta:l}=n;return{x:()=>DV(r,o,e,a,i,s,l)}}};function _V(e,t,n,r){return t.rank<n.rank&&(t=vz(t,iL(t.shape,r))),e.rank<n.rank&&(e=vz(e,iL(e.shape,r))),{x:()=>Q_(e,U_(jz(n,t),e.dtype))}}const MV={kernelName:XR,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:o}=r,a=t[0],i=_V(e,t[1],a,HA(o,a.shape));return{x:()=>i.x()}}},zV={kernelName:JR,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>Q_(e,U_(Jz(n,r),"float32")),b:()=>Q_(e,U_(XB(n,r),"float32"))}}};const LV=YF({maxPool3dGrad_:function(e,t,n,r,o,a,i){const s=XF(e,"dy","maxPool3dGrad"),l=XF(t,"input","maxPool3dGrad"),u=XF(n,"output","maxPool3dGrad");let c=s,d=l,h=u,p=!1;4===l.rank&&(p=!0,c=vz(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=vz(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=vz(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),RA(5===c.rank,(()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`)),RA(5===d.rank,(()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`)),RA(5===h.rank,(()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`)),gz("maxPool3dGrad",a,i);const f={dy:c,input:d,output:h},m={filterSize:r,strides:o,pad:a,dimRoundingMode:i},g=BF.runKernel(eP,f,m);return p?vz(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),BV={kernelName:ZR,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,o]=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:l}=n;return{x:()=>LV(e,r,o,a,i,s,l)}}};const jV=YF({maxPoolGrad_:function(e,t,n,r,o,a,i){const s=XF(e,"dy","maxPoolGrad"),l=XF(t,"input","maxPoolGrad"),u=XF(n,"output","maxPoolGrad");RA(l.rank===s.rank,(()=>`Rank of input (${l.rank}) does not match rank of dy (${s.rank})`)),RA(4===s.rank,(()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${s.rank}.`)),RA(4===l.rank,(()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`)),gz("maxPoolGrad",a,i);const c={dy:s,input:l,output:u},d={filterSize:r,strides:o,pad:a,dimRoundingMode:i};return BF.runKernel(QR,c,d)}}),HV={kernelName:YR,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,o]=t,{filterSize:a,strides:i,pad:s}=n;return{x:()=>jV(e,r,o,a,i,s)}}},VV={kernelName:nP,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:o}=n,a=HA(o,r.shape),i=FA(aL(r.shape,a)[1]);return{x:()=>{const t=r.shape.slice();a.forEach((e=>{t[e]=1}));const n=vz(e,t);return Y_(Q_(n,SL(r.shape,"float32")),i)}}}},WV={kernelName:rP,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:o}=r,[a,i]=t,s=_V(e,i,a,HA(o,a.shape));return{x:()=>s.x()}}},GV={kernelName:oP,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>Q_(e,U_(GB(n,r),"float32")),b:()=>Q_(e,U_(Xz(n,r),"float32"))}}},UV={kernelName:aP,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:o}=n,a=o.map((e=>e[0]));return{x:()=>LL(e,a,r.shape)}}},KV={kernelName:iP,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=yM(n.shape,r.shape);return{a:()=>{const t=bM(n.shape,o);return t.length>0?vz(tL(e,t),n.shape):e},b:()=>{const t=Q_(e,wL(Kz(Y_(n,r)))),a=bM(r.shape,o);return a.length>0?vz(tL(t,a),r.shape):t}}}},qV={kernelName:lP,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=yM(n.shape,r.shape);return{a:()=>{const t=Q_(e,U_(r,"float32")),a=bM(n.shape,o);return a.length>0?vz(tL(t,a),n.shape):t},b:()=>{const t=Q_(e,U_(n,"float32")),a=bM(r.shape,o);return a.length>0?vz(tL(t,a),r.shape):t}}}},XV={kernelName:uP,gradFunc:e=>({x:()=>wL(e)})},JV={kernelName:mP,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>CL(n.shape,"float32")}}},YV={kernelName:fP,gradFunc:e=>({x:()=>tM(e)})},QV={kernelName:gP,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return ZL(e,r).map((e=>()=>e))}},ZV={kernelName:vP,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:o}=n,a=o.map((e=>e[0]));return{x:()=>LL(e,a,r.shape)}}},eW={kernelName:bP,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,o]=t,a=n,i=r,s=yM(a.shape,i.shape);return{a:()=>{const t=U_(i,"float32");let n=Q_(e,Q_(t,pM(a,fM(t,rM(1)))));const r=bM(a.shape,s);return r.length>0&&(n=tL(n,r)),vz(n,a.shape)},b:()=>{const t=Xz(a,0),n=eB(t,Qz(a),tM(a));let r=Q_(e,Q_(o,n));const l=bM(i.shape,s);return l.length>0&&(r=tL(r,l)),vz(r,i.shape)}}}},tW={kernelName:yP,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,o=Xz(n,0);return{x:()=>eB(o,e,Q_(e,r)),alpha:()=>{let t=eB(o,tM(e),Q_(e,n));const a=bM(r.shape,e.shape);return a.length>0&&(t=tL(t,a)),vz(t,r.shape)}}}};const nW=YF({cumprod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o={x:XF(e,"x","cumprod")},a={axis:t,exclusive:n,reverse:r};return BF.runKernel(eR,o,a)}});function rW(e,t,n){const r=e.shape.length,o=r-n.length,a=lL(n,r);let i=e;null!=a&&(i=rB(e,a));const s=i.shape.slice(),l=s.splice(r-n.length,n.length).reduce(((e,t)=>e*t),1);s.push(l);let u=function(e,t,n){const r=e.shape.slice();r[n]=1;const o=vz(t,r),a=nW(e,n,!0,!1),i=nW(e,n,!0,!0),s=Q_(a,i);return Q_(o,s)}(i.reshape(s),t,o);if(u=u.reshape(i.shape),null!=a){const e=uL(a);u=rB(u,e)}return u}const oW={kernelName:wP,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:o}=n;let a=[];return a=void 0===o||null===o?r.shape.map(((e,t)=>t)):"number"===typeof o?[o]:o,{x:()=>rW(r,e,a)}}},aW={kernelName:pR,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=yM(n.shape,r.shape);return{a:()=>{const t=Y_(e,U_(r,"float32")),a=bM(n.shape,o);return a.length>0?vz(tL(t,a),n.shape):t},b:()=>{let t=Q_(e,U_(n,"float32"));const a=bM(r.shape,o);a.length>0&&(t=vz(tL(t,a),r.shape));const i=eM(r);return wL(Y_(t,U_(i,"float32")))}}}},iW={kernelName:NP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Y_(e,wL(eM(n)))}}},sW={kernelName:PP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=Q_(GB(n,6),dB(n));return{x:()=>Q_(e,U_(r,"float32"))}}},lW={kernelName:IP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Q_(e,U_(dB(n),"float32"))}}},uW={kernelName:$P,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>vz(e,n.shape)}}},cW={kernelName:OP,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,o={dy:e,images:r};return{images:()=>BF.runKernel(RP,o,n)}}},dW={kernelName:TP,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,o={dy:e,images:r};return{images:()=>BF.runKernel(AP,o,n)}}},hW={kernelName:DP,gradFunc:(e,t,n)=>{const{dims:r}=n,o=HA(r,e.shape);return{x:()=>FL(e,o)}}},pW={kernelName:FP,gradFunc:e=>({x:()=>tM(e)})},fW={kernelName:_P,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>wL(Y_(e,Q_(pM(n,1.5),2)))}}};const mW=YF({logicalNot_:function(e){const t={x:XF(e,"x","logicalNot","bool")};return BF.runKernel(GR,t)}}),gW={kernelName:BP,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>U_(tM(n),"float32"),t:()=>Q_(e,U_(n,e.dtype)),e:()=>Q_(e,U_(mW(n),e.dtype))}}},vW={kernelName:jP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Xz(n,rM(0)),r=rM(zj),o=rM(Lj),a=Q_(e,o),i=Q_(Q_(e,r),Vz(U_(n,"float32")));return eB(t,a,i)}}}},bW={kernelName:UP,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Q_(e,Q_(n,fM(rM(1),n)))}}},yW={kernelName:GP,gradFunc:e=>({x:()=>tM(e)})};const wW=YF({cos_:function(e){const t={x:XF(e,"x","cos","float32")};return BF.runKernel(QO,t)}}),xW={kernelName:VP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Q_(wW(U_(n,"float32")),e)}}};const kW=YF({cosh_:function(e){const t={x:XF(e,"x","cosh","float32")};return BF.runKernel(ZO,t)}}),CW={kernelName:WP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Q_(kW(U_(n,"float32")),e)}}},SW={kernelName:HP,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:o,size:a}=n,i=r.shape,[s,l]=JM(r,o,a),u=[];for(let c=0;c<e.rank;c++)u.push([s[c],i[c]-s[c]-l[c]]);return{x:()=>NL(e,u)}}},EW={kernelName:QP,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:o}=n,a=Q_(e,r);return{logits:()=>fM(a,Q_(tL(a,[o],true),r))}}},NW={kernelName:KP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Q_(e,zL(n))}}};const IW=YF({batchToSpaceND_:function(e,t,n){const r=XF(e,"x","batchToSpaceND"),o=t.reduce(((e,t)=>e*t));RA(r.rank>=1+t.length,(()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`)),RA(n.length===t.length,(()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`)),RA(r.shape[0]%o===0,(()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${o}`));const a={x:r},i={blockShape:t,crops:n};return BF.runKernel(_O,a,i)}}),$W={kernelName:JP,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:o}=n;return{x:()=>IW(e,r,o)}}},TW={kernelName:YP,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>Nz(e,r)}}},AW={kernelName:oD,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=rM(2);return{a:()=>Q_(e,Q_(o,fM(n,r))),b:()=>Q_(e,Q_(o,fM(r,n)))}}},OW={kernelName:dD,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=yM(n.shape,r.shape);return{a:()=>{let t=e;const r=bM(n.shape,o);return r.length>0&&(t=tL(t,r)),vz(t,n.shape)},b:()=>{let t=e;const n=bM(r.shape,o);return n.length>0&&(t=tL(t,n)),vz(wL(t),r.shape)}}}},RW={kernelName:fD,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:o}=n;return{x:()=>{let t=tM(r);if(1===r.rank)for(let n=0;n<o[0];++n)t=X_(t,LL(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<o[0];++n)for(let a=0;a<o[1];++a)t=X_(t,LL(e,[n*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<o[0];++n)for(let a=0;a<o[1];++a)for(let i=0;i<o[2];++i)t=X_(t,LL(e,[n*r.shape[0],a*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);for(let n=0;n<o[0];++n)for(let a=0;a<o[1];++a)for(let i=0;i<o[2];++i)for(let s=0;s<o[3];++s)t=X_(t,LL(e,[n*r.shape[0],a*r.shape[1],i*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},PW={kernelName:wD,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=wM(t,tM(t)),r=qz(e,n);let o=Jz(t,rM(0,"int32"));const a=r.rank-o.rank;for(let s=0;s<a;++s)o=Wz(o,s+1);o=hL(o,SL(r.shape,"bool"));const i=tM(r);return eB(o,r,i)}(e,n)}}};const DW=[TH,AH,OH,RH,PH,DH,FH,_H,MH,zH,LH,BH,HH,WH,GH,KH,qH,XH,JH,YH,QH,ZH,tV,eV,rV,aV,sV,uV,cV,dV,aW,hV,pV,fV,mV,gV,bV,vV,wV,kV,EV,NV,IV,$V,TV,AV,OV,RV,PV,FV,MV,MV,zV,BV,HV,VV,WV,GV,UV,KV,qV,XV,JV,YV,QV,ZV,ZV,eW,tW,oW,iW,sW,lW,uW,cW,dW,hW,pW,fW,gW,vW,bW,yW,xW,CW,SW,EW,NW,$W,$W,TW,TW,{kernelName:qP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Y_(e,Q_(Z_(U_(n,"float32")),2))}}},AW,{kernelName:aD,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Q_(e,Q_(U_(n,"float32"),2))}}},{kernelName:kD,gradFunc:e=>({x:()=>tM(e)})},OW,{kernelName:XP,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,o=r.shape.slice(),{axis:a}=n;HA(a,r.shape).forEach((e=>{o[e]=1}));const i=vz(e,o),s=Q_(i,SL(r.shape,"float32"));return{x:()=>s}}},{kernelName:hD,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Y_(e,eM(wW(n)))}}},{kernelName:pD,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Q_(fM(rM(1),eM(n)),e)}}},RW,{kernelName:vD,gradFunc:(e,t,n)=>{const r=n,{perm:o}=r,a=uL(o);return{x:()=>rB(e,a)}}},{kernelName:yD,gradFunc:(e,t,n)=>{const r=n,{axis:o}=r;return{value:()=>qL(e,o)}}},PW,{kernelName:xD,gradFunc:e=>({x:()=>tM(e)})}];for(const n of DW)_D(n);wF().prototype.abs=function(){return this.throwIfDisposed(),gM(this)};const FW=YF({acos_:function(e){const t={x:XF(e,"x","acos")};return BF.runKernel(bO,t)}});wF().prototype.acos=function(){return this.throwIfDisposed(),FW(this)};const _W=YF({acosh_:function(e){const t={x:XF(e,"x","acosh")};return BF.runKernel(yO,t)}});wF().prototype.acosh=function(){return this.throwIfDisposed(),_W(this)},wF().prototype.add=function(e){return this.throwIfDisposed(),X_(this,e)},wF().prototype.all=function(e,t){return this.throwIfDisposed(),ZM(this,e,t)},wF().prototype.any=function(e,t){return this.throwIfDisposed(),ez(this,e,t)},wF().prototype.argMax=function(e){return this.throwIfDisposed(),tz(this,e)};const MW=YF({argMin_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:XF(e,"x","argMin")},r={axis:t};return BF.runKernel(EO,n,r)}});wF().prototype.argMin=function(e){return this.throwIfDisposed(),MW(this,e)},wF().prototype.asScalar=function(){return this.throwIfDisposed(),RA(1===this.size,(()=>"The array must have only 1 element.")),vz(this,[])},wF().prototype.asType=function(e){return this.throwIfDisposed(),U_(this,e)},wF().prototype.as1D=function(){return this.throwIfDisposed(),vz(this,[this.size])},wF().prototype.as2D=function(e,t){return this.throwIfDisposed(),vz(this,[e,t])},wF().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),vz(this,[e,t,n])},wF().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),vz(this,[e,t,n,r])},wF().prototype.as5D=function(e,t,n,r,o){return this.throwIfDisposed(),vz(this,[e,t,n,r,o])};const zW=YF({asin_:function(e){const t={x:XF(e,"x","asin")};return BF.runKernel(NO,t)}});wF().prototype.asin=function(){return this.throwIfDisposed(),zW(this)};const LW=YF({asinh_:function(e){const t={x:XF(e,"x","asinh")};return BF.runKernel(IO,t)}});wF().prototype.asinh=function(){return this.throwIfDisposed(),LW(this)};const BW=YF({atan_:function(e){const t={x:XF(e,"x","atan")};return BF.runKernel($O,t)}});wF().prototype.atan=function(){return this.throwIfDisposed(),BW(this)};const jW=YF({atan2_:function(e,t){let n=XF(e,"a","atan2"),r=XF(t,"b","atan2");[n,r]=RF(n,r);const o={a:n,b:r};return BF.runKernel(AO,o)}});wF().prototype.atan2=function(e){return this.throwIfDisposed(),jW(this,e)};const HW=YF({atanh_:function(e){const t={x:XF(e,"x","atanh")};return BF.runKernel(TO,t)}});wF().prototype.atanh=function(){return this.throwIfDisposed(),HW(this)},wF().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),bz(this,e,t,n,r)},wF().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),IW(this,e,t)},wF().prototype.batchNorm=function(e,t,n,r,o){return this.throwIfDisposed(),wz(this,e,t,n,r,o)},wF().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Sz(this,e)},wF().prototype.cast=function(e){return this.throwIfDisposed(),U_(this,e)};const VW=YF({ceil_:function(e){const t={x:XF(e,"x","ceil","float32")};return BF.runKernel(jO,t)}});wF().prototype.ceil=function(){return this.throwIfDisposed(),VW(this)},wF().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Ez(this,e,t)},wF().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof yF&&(e=[e]),Nz([this,...e],t)},wF().prototype.conv1d=function(e,t,n,r,o,a){return this.throwIfDisposed(),Rz(this,e,t,n,r,o,a)},wF().prototype.conv2dTranspose=function(e,t,n,r,o){return this.throwIfDisposed(),Dz(this,e,t,n,r,o)},wF().prototype.conv2d=function(e,t,n,r,o,a){return this.throwIfDisposed(),Oz(this,e,t,n,r,o,a)},wF().prototype.cos=function(){return this.throwIfDisposed(),wW(this)},wF().prototype.cosh=function(){return this.throwIfDisposed(),kW(this)},wF().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),nW(this,e,t,n)},wF().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),lV(this,e,t,n)};const WW=YF({depthToSpace_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC";const r=XF(e,"x","depthToSpace","float32"),o="NHWC"===n?r.shape[1]:r.shape[2],a="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];RA(t>1,(()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`)),RA(o*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${o} and ${t}  for depthToSpace with input shape\n    ${r.shape}`)),RA(a*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${a} and ${t} for depthToSpace with input shape\n        ${r.shape}`)),RA(i%(t*t)===0,(()=>`Dimension size must be evenly divisible by ${t*t} but is ${i} for depthToSpace with input shape ${r.shape}`));const s={x:r},l={blockSize:t,dataFormat:n};return BF.runKernel(oR,s,l)}});wF().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),WW(this,e,t)},wF().prototype.depthwiseConv2d=function(e,t,n,r,o,a){return this.throwIfDisposed(),Lz(this,e,t,n,r,o,a)};const GW=YF({dilation2d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC";const i=XF(e,"x","dilation2d"),s=XF(t,"filter","dilation2d");RA(3===i.rank||4===i.rank,(()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`)),RA(3===s.rank,(()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`)),RA("NHWC"===a,(()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`));let l=i,u=!1;3===i.rank&&(l=vz(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=!0),RA(l.shape[3]===s.shape[2],(()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${s.shape[2]}`));const c={x:l,filter:s},d={strides:n,pad:r,dilations:o},h=BF.runKernel(uR,c,d);return u?vz(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});wF().prototype.dilation2d=function(e,t,n,r,o){return this.throwIfDisposed(),GW(this,e,t,n,r,o)};const UW=YF({divNoNan_:function(e,t){let n=XF(e,"a","div"),r=XF(t,"b","div");[n,r]=RF(n,r);const o=Y_(n,r),a=tM(o),i=jz(r,a);return eB(i,a,o)}});wF().prototype.divNoNan=function(e){return this.throwIfDisposed(),UW(this,e)},wF().prototype.div=function(e){return this.throwIfDisposed(),Y_(this,e)};const KW=YF({dot_:function(e,t){const n=XF(e,"t1","dot"),r=XF(t,"t2","dot");RA((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`));const o=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];if(RA(o===a,(()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${a}.`)),1===n.rank&&1===r.rank){const e=vz(n,[1,-1]),t=vz(r,[-1,1]),o=pL(e,t);return vz(o,[])}if(1===n.rank&&2===r.rank){const e=vz(n,[1,-1]),t=vz(r,[r.shape[0],r.shape[1]]),o=pL(e,t);return vz(o,[o.size])}if(2===n.rank&&1===r.rank){const e=vz(r,[-1,1]),t=pL(n,e);return vz(t,[t.size])}{const e=vz(r,[r.shape[0],r.shape[1]]);return pL(n,e)}}});wF().prototype.dot=function(e){return this.throwIfDisposed(),KW(this,e)},wF().prototype.elu=function(){return this.throwIfDisposed(),Bz(this)},wF().prototype.equal=function(e){return this.throwIfDisposed(),jz(this,e)},wF().prototype.erf=function(){return this.throwIfDisposed(),Hz(this)};const qW=YF({euclideanNorm_:function(e){return QB(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});wF().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),qW(this,e,t)},wF().prototype.exp=function(){return this.throwIfDisposed(),Vz(this)},wF().prototype.expandDims=function(e){return this.throwIfDisposed(),Wz(this,e)};const XW=YF({expm1_:function(e){const t={x:XF(e,"x","expm1")};return BF.runKernel(xR,t)}});wF().prototype.expm1=function(){return this.throwIfDisposed(),XW(this)},wF().prototype.fft=function(){return this.throwIfDisposed(),aB(this)},wF().prototype.flatten=function(){return this.throwIfDisposed(),vz(this,[this.size])},wF().prototype.floor=function(){return this.throwIfDisposed(),Kz(this)},wF().prototype.floorDiv=function(e){return this.throwIfDisposed(),J_(this,e)},wF().prototype.gather=function(e,t,n){return this.throwIfDisposed(),qz(this,e,t,n)},wF().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Jz(this,e)},wF().prototype.greater=function(e){return this.throwIfDisposed(),Xz(this,e)},wF().prototype.ifft=function(){return this.throwIfDisposed(),sB(this)},wF().prototype.irfft=function(){return this.throwIfDisposed(),lB(this)};const JW=YF({isFinite_:function(e){const t={x:XF(e,"x","isFinite")};return BF.runKernel(FR,t)}});wF().prototype.isFinite=function(){return this.throwIfDisposed(),JW(this)};const YW=YF({isInf_:function(e){const t={x:XF(e,"x","isInf")};return BF.runKernel(_R,t)}});wF().prototype.isInf=function(){return this.throwIfDisposed(),YW(this)};const QW=YF({isNaN_:function(e){const t={x:XF(e,"x","isNaN")};return BF.runKernel(MR,t)}});wF().prototype.isNaN=function(){return this.throwIfDisposed(),QW(this)},wF().prototype.leakyRelu=function(e){return this.throwIfDisposed(),Yz(this,e)},wF().prototype.lessEqual=function(e){return this.throwIfDisposed(),GB(this,e)},wF().prototype.less=function(e){return this.throwIfDisposed(),XB(this,e)};const ZW=YF({localResponseNormalization_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const a=XF(e,"x","localResponseNormalization");RA(4===a.rank||3===a.rank,(()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${a.rank}.`)),RA(MA(t),(()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`));let i=a,s=!1;3===a.rank&&(s=!0,i=vz(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const l={x:i},u={depthRadius:t,bias:n,alpha:r,beta:o},c=BF.runKernel(KR,l,u);return s?vz(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});wF().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),ZW(this,e,t,n,r)};const eG=YF({logSigmoid_:function(e){const t=XF(e,"x","logSigmoid");return nM((e=>({value:wL(GL(wL(e))),gradFunc:t=>Q_(t,zL(wL(e)))})))(t)}});wF().prototype.logSigmoid=function(){return this.throwIfDisposed(),eG(this)},wF().prototype.logSoftmax=function(e){return this.throwIfDisposed(),nL(this,e)},wF().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),dL(this,e,t)},wF().prototype.log=function(){return this.throwIfDisposed(),Qz(this)},wF().prototype.log1p=function(){return this.throwIfDisposed(),Zz(this)},wF().prototype.logicalAnd=function(e){return this.throwIfDisposed(),hL(this,e)},wF().prototype.logicalNot=function(){return this.throwIfDisposed(),mW(this)};const tG=YF({logicalOr_:function(e,t){const n=XF(e,"a","logicalOr","bool"),r=XF(t,"b","logicalOr","bool");yM(n.shape,r.shape);const o={a:n,b:r};return BF.runKernel(UR,o)}});wF().prototype.logicalOr=function(e){return this.throwIfDisposed(),tG(this,e)};const nG=YF({logicalXor_:function(e,t){const n=XF(e,"a","logicalXor","bool"),r=XF(t,"b","logicalXor","bool");return yM(n.shape,r.shape),hL(tG(e,t),mW(hL(e,t)))}});wF().prototype.logicalXor=function(e){return this.throwIfDisposed(),nG(this,e)},wF().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),pL(this,e,t,n)},wF().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),fL(this,e,t,n,r)},wF().prototype.max=function(e,t){return this.throwIfDisposed(),eL(this,e,t)},wF().prototype.maximum=function(e){return this.throwIfDisposed(),wM(this,e)},wF().prototype.mean=function(e,t){return this.throwIfDisposed(),gL(this,e,t)},wF().prototype.min=function(e,t){return this.throwIfDisposed(),vL(this,e,t)},wF().prototype.minimum=function(e){return this.throwIfDisposed(),bL(this,e)};const rG=YF({mirrorPad_:function(e,t,n){RA("reflect"===n||"symmetric"===n,(()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`));const r=XF(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");RA(t.length===r.rank,(()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`));const o="reflect"===n?1:0;for(let s=0;s<r.rank;s++)RA(2===t[s].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),RA(t[s][0]>=0&&t[s][0]<=r.shape[s]-o&&t[s][1]>=0&&t[s][1]<=r.shape[s]-o,(()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-o} or less than 0 for input of shape ${r.shape}`));const a={paddings:t,mode:n},i={x:r};return BF.runKernel(aP,i,a)}});wF().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),rG(this,e,t)};const oG=YF({mod_:function(e,t){let n=XF(e,"a","mod"),r=XF(t,"b","mod");[n,r]=RF(n,r);const o={a:n,b:r};return BF.runKernel(iP,o)}});wF().prototype.mod=function(e){return this.throwIfDisposed(),oG(this,e)},wF().prototype.mul=function(e){return this.throwIfDisposed(),Q_(this,e)},wF().prototype.neg=function(){return this.throwIfDisposed(),wL(this)},wF().prototype.norm=function(e,t,n){return this.throwIfDisposed(),QB(this,e,t,n)},wF().prototype.notEqual=function(e){return this.throwIfDisposed(),xL(this,e)},wF().prototype.oneHot=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),kL(this,e,t,n)},wF().prototype.onesLike=function(){return this.throwIfDisposed(),EL(this)},wF().prototype.pad=function(e,t){return this.throwIfDisposed(),NL(this,e,t)};const aG=YF({pool_:function(e,t,n,r,o,a,i){null==o&&(o=[1,1]),null==a&&(a=1),0===r&&(r="valid");const s=XF(e,"x","maxPool");let l=s,u=!1;3===s.rank&&(u=!0,l=vz(s,[1,s.shape[0],s.shape[1],s.shape[2]])),RA(pz(a,o),(()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${o}'`));const c=rz(l.shape,t,a,o,r),d=[c.dilationHeight,c.dilationWidth];let h;h="same"===r?function(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))),r=n.map((e=>e-1)),o=r.map((e=>Math.floor(e/2))),a=r.map(((e,t)=>e-o[t]));return r.map(((e,t)=>[o[t],a[t]]))}([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];const p=1===d[0]&&1===d[1],[f,m]=function(e,t,n){const r=n.map((e=>e[0])),o=n.map((e=>e[1])),a=e.concat(r,o),i=t.map(((e,t)=>(e-a[t]%e)%e)),s=o.map(((e,t)=>e+i[t])),l=t.map(((e,t)=>[r[t],s[t]])),u=t.map(((e,t)=>[0,i[t]]));return[l,u]}([c.inHeight,c.inWidth],d,h),g=p?r:"valid",v=p?l:UH(l,d,f),b=("avg"===n?()=>bz(v,t,a,g,i):()=>fL(v,t,a,g,i))(),y=p?b:IW(b,d,m);return u?vz(y,[y.shape[1],y.shape[2],y.shape[3]]):y}});wF().prototype.pool=function(e,t,n,r,o,a){return this.throwIfDisposed(),aG(this,e,t,n,r,o,a)},wF().prototype.pow=function(e){return this.throwIfDisposed(),pM(this,e)},wF().prototype.prelu=function(e){return this.throwIfDisposed(),IL(this,e)};const iG=YF({prod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=XF(e,"x","prod");"bool"===r.dtype&&(r=U_(r,"int32"));const o={x:r},a={axis:t,keepDims:n};return BF.runKernel(wP,o,a)}});wF().prototype.prod=function(e,t){return this.throwIfDisposed(),iG(this,e,t)};const sG=YF({reciprocal_:function(e){const t={x:XF(e,"x","reciprocal")};return BF.runKernel(NP,t)}});wF().prototype.reciprocal=function(){return this.throwIfDisposed(),sG(this)},wF().prototype.relu=function(){return this.throwIfDisposed(),DL(this)},wF().prototype.relu6=function(){return this.throwIfDisposed(),cB(this)},wF().prototype.reshapeAs=function(e){return this.throwIfDisposed(),vz(this,e.shape)},wF().prototype.reshape=function(e){return this.throwIfDisposed(),vz(this,e)},wF().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),HB(this,e,t,n)},wF().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),VB(this,e,t,n)},wF().prototype.reverse=function(e){return this.throwIfDisposed(),FL(this,e)},wF().prototype.rfft=function(){return this.throwIfDisposed(),iB(this)},wF().prototype.round=function(){return this.throwIfDisposed(),UB(this)},wF().prototype.rsqrt=function(){return this.throwIfDisposed(),yV(this)},wF().prototype.selu=function(){return this.throwIfDisposed(),_L(this)},wF().prototype.separableConv2d=function(e,t,n,r,o,a){return this.throwIfDisposed(),ML(this,e,t,n,r,o,a)},wF().prototype.sigmoid=function(){return this.throwIfDisposed(),zL(this)};const lG=YF({sign_:function(e){const t={x:XF(e,"x","sign")};return BF.runKernel(GP,t)}});wF().prototype.sign=function(){return this.throwIfDisposed(),lG(this)},wF().prototype.sin=function(){return this.throwIfDisposed(),oV(this)},wF().prototype.sinh=function(){return this.throwIfDisposed(),iV(this)},wF().prototype.slice=function(e,t){return this.throwIfDisposed(),LL(this,e,t)},wF().prototype.softmax=function(e){return this.throwIfDisposed(),WL(this,e)},wF().prototype.softplus=function(){return this.throwIfDisposed(),GL(this)},wF().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),UH(this,e,t)},wF().prototype.split=function(e,t){return this.throwIfDisposed(),UL(this,e,t)},wF().prototype.sqrt=function(){return this.throwIfDisposed(),Z_(this)},wF().prototype.square=function(){return this.throwIfDisposed(),eM(this)},wF().prototype.squaredDifference=function(e){return this.throwIfDisposed(),uj(this,e)},wF().prototype.squeeze=function(e){return this.throwIfDisposed(),KL(this,e)},wF().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof yF?[this,e]:[this,...e];return qL(n,t)},wF().prototype.step=function(e){return this.throwIfDisposed(),dB(this,e)};const uG=YF({stridedSlice_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;const u={x:XF(e,"x","stridedSlice","string_or_numeric")},c={begin:t,end:n,strides:r,beginMask:o,endMask:a,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:l};return BF.runKernel(sD,u,c)}});wF().prototype.stridedSlice=function(e,t,n,r,o,a,i,s){return this.throwIfDisposed(),uG(this,e,t,n,r,o,a,i,s)},wF().prototype.sub=function(e){return this.throwIfDisposed(),fM(this,e)},wF().prototype.sum=function(e,t){return this.throwIfDisposed(),tL(this,e,t)};const cG=YF({tan_:function(e){const t={x:XF(e,"x","tan","float32")};return BF.runKernel(hD,t)}});wF().prototype.tan=function(){return this.throwIfDisposed(),cG(this)},wF().prototype.tanh=function(){return this.throwIfDisposed(),XL(this)},wF().prototype.tile=function(e){return this.throwIfDisposed(),Gz(this,e)},wF().prototype.toBool=function(){return this.throwIfDisposed(),U_(this,"bool")},wF().prototype.toFloat=function(){return this.throwIfDisposed(),U_(this,"float32")},wF().prototype.toInt=function(){return this.throwIfDisposed(),U_(this,"int32")};const dG=YF({topk_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=XF(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const o=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${t}`);const a={x:r},i={k:t,sorted:n},[s,l]=BF.runKernel(mD,a,i);return{values:s,indices:l}}});wF().prototype.topk=function(e,t){return this.throwIfDisposed(),dG(this,e,t)},wF().prototype.transpose=function(e){return this.throwIfDisposed(),rB(this,e)};const hG=YF({unique_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=XF(e,"x","unique","string_or_numeric");RA(n.rank>0,(()=>"The input tensor must be at least 1D"));const r={x:n},o={axis:t},[a,i]=BF.runKernel(bD,r,o);return{values:a,indices:i}}});wF().prototype.unique=function(e){return this.throwIfDisposed(),hG(this,e)},wF().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),xV(this,e,t)},wF().prototype.unstack=function(e){return this.throwIfDisposed(),ZL(this,e)},wF().prototype.where=function(e,t){return this.throwIfDisposed(),eB(e,this,t)},wF().prototype.zerosLike=function(){return this.throwIfDisposed(),tM(this)};class pG extends Error{constructor(e){super(e),Object.setPrototypeOf(this,pG.prototype)}}class fG extends Error{constructor(e){super(e),Object.setPrototypeOf(this,fG.prototype)}}class mG extends Error{constructor(e){super(e),Object.setPrototypeOf(this,mG.prototype)}}class gG extends Error{constructor(e){super(e),Object.setPrototypeOf(this,gG.prototype)}}class vG extends Error{constructor(e){super(e),Object.setPrototypeOf(this,vG.prototype)}}Error;class bG{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}function yG(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function wG(e,t){if(!e)throw new vG(t)}function xG(e,t){let n=0;for(const r of e)r===t&&n++;return n}function kG(e){return 1===e.length?e[0]:e}function CG(e){return Array.isArray(e)?e:[e]}function SG(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function EG(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,((e,t)=>t.toUpperCase()))}let NG={};function IG(e){if(null===e||void 0===e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function $G(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((e=>$G(e)));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"===typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!==typeof t.value?$G(t):e[n]=t.value)}}}function TG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){const o=e;let a;if(o in n)a=n[o];else if(o in NG)a=NG[o];else if(a=t[o],null==a)throw new mG(`Unknown ${r}: ${e}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}{const a=e;if(null==a.className||null==a.config)throw new mG(`${r}: Improper config format: ${JSON.stringify(a)}.\n'className' and 'config' must set.`);const i=a.className;let s,l;if(i in n?[s,l]=n[i]:i in NG?[s,l]=NG.className:i in t&&([s,l]=t[i]),null==s)throw new mG(`Unknown ${r}: ${i}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=l){const e={};for(const n of Object.keys(NG))e[n]=NG[n];for(const o of Object.keys(n))e[o]=n[o];a.config.customObjects=e;const t=Object.assign({},NG);for(const o of Object.keys(n))NG[o]=n[o];$G(a.config);const r=l(s,a.config,n,o);return NG=Object.assign({},t),r}{const e=Object.assign({},NG);for(const r of Object.keys(n))NG[r]=n[r];const t=new s(a.config);return NG=Object.assign({},e),t}}}function AG(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function OG(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function RG(e){if(null==e)throw new mG(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function PG(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new mG(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function DG(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return wG(n>=0),wG(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((e=>typeof e===t))}function FG(e,t){Array.isArray(e)?(RA(e.length>0,(()=>`${t} is unexpectedly an empty array.`)),e.forEach(((e,n)=>FG(e,`element ${n+1} of ${t}`)))):RA(Number.isInteger(e)&&e>0,(()=>`Expected ${t} to be a positive integer, but got ${_G(e)}.`))}function _G(e){return null===e?"null":Array.isArray(e)?"["+e.map((e=>_G(e))).join(",")+"]":"string"===typeof e?`"${e}"`:`${e}`}function MG(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}let zG=0;function LG(){return zG++}const BG={};function jG(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in BG||(BG[e]=0),BG[e]+=1,e+BG[e].toString()}const HG=["channelsFirst","channelsLast"],VG=["nearest","bilinear"],WG=["valid","same","causal"],GG=["max","avg"],UG=["sum","mul","concat","ave"],KG=new Map;function qG(e){PG(HG,"DataFormat",e)}function XG(e){PG(WG,"PaddingMode",e)}function JG(e){PG(GG,"PoolMode",e)}const YG=[];function QG(e,t){YG.push(e);try{const e=t();return YG.pop(),e}catch(kbe){throw YG.pop(),kbe}}function ZG(e){if(!nU(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===YG.length?"":YG.join("/")+"/")+e}function eU(e){if(!nU(e))throw new Error("Not a valid tensor name: '"+e+"'");KG.has(e)||KG.set(e,0);const t=KG.get(e);if(KG.set(e,KG.get(e)+1),t>0){const n=`${e}_${t}`;return KG.set(n,1),n}return e}const tU=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function nU(e){return!!e.match(tU)}function rU(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let o=t;o<n;++o)r*=e[o];return r}function oU(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function aU(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function iU(e,t){if(t<e)throw new mG(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let r=e;r<t;++r)n.push(r);return n}let sU;function lU(){return null==sU&&(sU=l_().epsilon()),sU}function uU(e,t){return U_(e,t)}function cU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),vz(e,n)}function dU(e,t,n){return o_((()=>{switch(e.rank){case 1:return BL(e,t,n);case 2:return jL(e,[t,0],[n,e.shape[1]]);case 3:return HL(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return VL(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return LL(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return LL(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new mG(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function hU(e,t,n){return o_((()=>{switch(e.rank){case 1:return BL(e,t,n);case 2:return jL(e,[0,t],[e.shape[0],n]);case 3:return HL(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return VL(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new mG(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function pU(e,t,n,r){return o_((()=>{switch(e.rank){case 1:return BL(e,t,n);case 2:switch(r){case 1:return dU(e,t,n);case 2:return hU(e,t,n);default:throw new mG(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return dU(e,t,n);case 2:return HL(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return hU(e,t,n);default:throw new mG(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return dU(e,t,n);case 2:return VL(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return VL(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return hU(e,t,n);default:throw new mG(`The axis is not within the rank of the tensor ${r}`)}default:throw new mG(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function fU(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(t=e[0].rank,n=0!==t?t:0),n===e[0].rank&&(n=-1),Nz(e,n)}function mU(e,t){switch(e.rank){case 1:return Iz([e,t]);case 2:return $z([e,t],0);case 3:return Tz([e,t],0);case 4:return Az([e,t],0);default:throw new mG(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function gU(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new mG(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return Gz(e,t)}function vU(e){return OL(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function bU(e,t,n,r){if(e.rank<2||t.rank<2)throw new gG(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new gG(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(2===e.rank&&2===t.rank){return yB({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?xU(e.rank,r,"channelsLast"):null,activation:n})}{const o=e.shape.slice(),a=o.pop();e=vz(e,[-1,a]);const i=t.shape.slice(),s=i.pop(),l=i.pop(),u=[...i,s],c=Array.from({length:t.rank},((e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n));t=vz(rB(t,c),[l,-1]);const d=[...o,...u];return vz(yB({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?xU(e.rank,r,"channelsLast"):null,activation:n}),d)}}function yU(e,t,n){return o_((()=>(t=Array.isArray(t)?JL(t,"int32"):U_(t,"int32"),qz(e,t,n))))}function wU(e){return Q_(e,e)}function xU(e,t,n){const r=t.shape;if(1!==t.rank&&t.rank!==e)throw new mG(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return 1===r.length?vz(t,[1,r[0],1,1,1]):vz(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?vz(t,[1,1,1,1,r[0]]):vz(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?vz(t,[1,r[0],1,1]):vz(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?vz(t,[1,1,1,r[0]]):vz(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?vz(t,[1,r[0],1]):vz(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?vz(t,[1,1,r[0]]):vz(t,[1].concat(r))}else if(e<3)return t;throw new mG(`Unsupported input rank by biasAdd: ${t.rank}`)}function kU(e,t,n){return o_((()=>(null==n&&(n="channelsLast"),qG(n),X_(e,xU(e.rank,t,n)))))}function CU(e,t,n,r){return o_((()=>oB(e,t,n,r)))}function SU(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}const EU=["fanIn","fanOut","fanAvg"],NU=["normal","uniform","truncatedNormal"];class IU extends iM{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class $U extends IU{apply(e,t){return CL(e,t)}}$U.className="Zeros",lM($U);class TU extends IU{apply(e,t){return SL(e,t)}}TU.className="Ones",lM(TU);class AU extends IU{constructor(e){if(super(),"object"!==typeof e)throw new mG(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new mG(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return o_((()=>Q_(rM(this.value),SL(e,t))))}getConfig(){return{value:this.value}}}AU.className="Constant",lM(AU);class OU extends IU{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return RL(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}OU.className="RandomUniform",lM(OU);class RU extends IU{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new gG(`randomNormal does not support dType ${t}.`);return vU(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}RU.className="RandomNormal",lM(RU);class PU extends IU{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new gG(`truncatedNormal does not support dType ${t}.`);return QL(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}PU.className="TruncatedNormal",lM(PU);class DU extends IU{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return o_((()=>{if(2!==e.length||e[0]!==e[1])throw new mG("Identity matrix initializer can only be used for 2D square matrices.");return Q_(this.gain,Uz(e[0]))}))}getConfig(){return{gain:this.gain}}}DU.className="Identity",lM(DU);class FU extends IU{constructor(e){if(super(),e.scale<0)throw new mG(`scale must be a positive float. Got: ${e.scale}`);var t;this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,t=this.mode,PG(EU,"FanMode",t),this.distribution=null==e.distribution?"normal":e.distribution,function(e){PG(NU,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(qG(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){const r=rU(e,2);t=e[1]*r,n=e[0]*r}else if("channelsLast"===r){const r=rU(e,0,e.length-2);t=e[e.length-2]*r,n=e[e.length-1]*r}}else{const r=rU(e);t=Math.sqrt(r),n=Math.sqrt(r)}return[t,n]}(e),r=n[0],o=n[1];let a=this.scale;if("fanIn"===this.mode?a/=Math.max(1,r):"fanOut"===this.mode?a/=Math.max(1,o):a/=Math.max(1,(r+o)/2),"normal"===this.distribution){const n=Math.sqrt(a);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new gG(`${this.getClassName()} does not support dType ${t}.`);return QL(e,0,n,t,this.seed)}{const n=Math.sqrt(3*a);return RL(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}FU.className="VarianceScaling",lM(FU);class _U extends FU{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return FU.className}}_U.className="GlorotUniform",lM(_U);class MU extends FU{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return FU.className}}MU.className="GlorotNormal",lM(MU);class zU extends FU{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return FU.className}}zU.className="HeNormal",lM(zU);class LU extends FU{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return FU.className}}LU.className="HeUniform",lM(LU);class BU extends FU{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return FU.className}}BU.className="LeCunNormal",lM(BU);class jU extends FU{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return FU.className}}jU.className="LeCunUniform",lM(jU);class HU extends IU{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return o_((()=>{if(e.length<2)throw new gG("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError(`Unsupported data type ${t}.`);const n=FA(e.slice(0,-1)),r=e[e.length-1],o=n*r;o>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${o}) elements: Slowness may result.`);const a=vU([Math.max(r,n),Math.min(r,n)],0,1,t,this.seed),i=fj.qr(a,!1);let s=i[0];const l=i[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return s=Q_(s,l.sign()),n<r&&(s=s.transpose()),Q_(rM(this.gain),s.reshape(e))}))}getConfig(){return{gain:this.gain,seed:this.seed}}}HU.className="Orthogonal",lM(HU);const VU={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function WU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return TG(e,sM.getMap().classNameMap,t,"initializer")}function GU(e){return IG(e)}function UU(e){if("string"===typeof e){const t=e in VU?VU[e]:e;if("GlorotNormal"===t)return new MU;if("GlorotUniform"===t)return new _U;if("HeNormal"===t)return new zU;if("HeUniform"===t)return new LU;if("LeCunNormal"===t)return new BU;if("LeCunUniform"===t)return new jU;{const e={};return e.className=t,e.config={},WU(e)}}return e instanceof IU?e:WU(e)}function KU(e){return Array.isArray(e)&&Array.isArray(e[0])}function qU(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function XU(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new mG(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function JU(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new mG(`Expected exactly 1 Shape; got ${e.length}`)}return e}function YU(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce(((e,t)=>e*t));return t}const QU="Variable";class ZU{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:QU,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=LG(),n=null==n?QU:n,this.originalName=ZG(n),this.name=eU(this.originalName),this.trainable_=r,this.constraint=o,this.val=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return BF.makeVariable(e,t,n,r)}(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function eK(e){return e.map((e=>e.read()))}function tK(e){e.forEach((e=>{e[0].write(e[1])}))}class nK{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class rK{constructor(e,t,n,r,o,a,i){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=o,this.outputTensorIndex=i,this.id=LG(),null!=a&&(this.originalName=ZG(a),this.name=eU(this.originalName)),this.rank=t.length}}let oK=0;class aK{constructor(e,t){this.callArgs=t,this.id=oK++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let iK=0;class sK extends iM{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=iK++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=SG(e)+"_"+jG(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new fG(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new mG(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return kG(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return kG(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new pG(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new pG(`Layer ${this.name} is not connected, no input to return.`);return kG(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new pG(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new pG(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return kG(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map((e=>e()))}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach((t=>t.trainable=e)),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter((e=>e.trainable)):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter((e=>!e.trainable)).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=CG(e);if(null==this.inputSpec||0===this.inputSpec.length)return;const n=CG(this.inputSpec);if(t.length!==n.length)throw new mG(`Layer ${this.name} expects ${n.length} inputs, but it received ${t.length} input tensors. Input received: ${e}`);for(let r=0;r<t.length;r++){const e=t[r],o=n[r];if(null==o)continue;const a=e.rank;if(null!=o.ndim&&a!==o.ndim)throw new mG(`Input ${r} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(null!=o.maxNDim&&a>o.maxNDim)throw new mG(`Input ${r} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(null!=o.minNDim&&a<o.minNDim)throw new mG(`Input ${r} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(null!=o.dtype&&e.dtype!==o.dtype)throw new mG(`Input ${r} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${e.dtype}.`);if(o.axes){const t=e.shape;for(const e in o.axes){const n=Number(e),a=o.axes[e],i=n>=0?t[n]:t[t.length+n];if(null!=a&&-1===[a,null].indexOf(i))throw new mG(`Input ${r} is incompatible with layer ${this.name}: expected axis ${n} of input shape to have value ${a} but got shape ${t}.`)}}if(null!=o.shape)for(let t=0;t<o.shape.length;++t){const n=o.shape[t],a=e.shape[t];if(null!=n&&null!=a&&n!==a)throw new mG(`Input ${r} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${e.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=CG(e),r=function(e){let t=!0;for(const n of CG(e))if(!(n instanceof rK)){t=!1;break}return t}(e),o=function(e){let t=!0;for(const n of CG(e))if(n instanceof rK){t=!1;break}return t}(e);if(r===o)throw new mG("Arguments to apply() must be all SymbolicTensors or all Tensors");return QG(this.name,(()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of CG(e))t.push(n.shape);this.build(kG(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&o&&(this._refCount=1)}if(this.assertInputCompatibility(e),o){let r=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,r);const o=CG(r),a=[];for(let e of o)-1!==n.indexOf(e)&&(e=e.clone()),a.push(e);if(r=kG(a),null!=this.activityRegularizer)throw new gG("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(e){e=CG(e);const t=[];for(const n of e)t.push(n.shape);return kG(t)}(e),r=this.computeOutputShape(n);let o;const a="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),o=null!=r&&r.length>0&&Array.isArray(r[0])?r.map(((n,r)=>new rK(a,n,this,CG(e),t,this.name,r))):new rK(a,r,this,CG(e),t,this.name),this.addInboundNode(e,o,null,null,n,r,t),this._refCount++,null!=this.activityRegularizer)throw new gG("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}}))}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach(((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new pG(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new pG(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new fG(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return YU(this.weights)}build(e){this.built=!0}getWeights(){return eK(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}setWeights(e){o_((()=>{const t=this.weights;if(t.length!==e.length)throw new mG(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(0===t.length)return;const n=[],r=eK(t);for(let o=0;o<r.length;++o){const a=r[o],i=t[o],s=e[o];if(!_A(a.shape,s.shape))throw new mG(`Layer weight shape ${a.shape} not compatible with provided weight shape ${s.shape}`);n.push([i,s])}tK(n)}))}addWeight(e,t,n,r,o,a,i,s){if(-1!==this._addedWeightNames.indexOf(e))throw new mG(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():UU("zeros"));const l=r.apply(t,n),u=new ZU(l,n,e,a,i);return l.dispose(),null!=o&&this.addLoss((()=>o.apply(u.read()))),null==a&&(a=!0),a?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=CG(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);t.forEach((e=>{if(null!=e)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)}))}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;const r=this.computeMask(e,n),o=CG(t),a=CG(r);if(o.length!==a.length)throw new Error(`${this.name} outputs ${o.length} tensors but ${o.length} masks for those tensors`);for(let i=0;i<o.length;i++)o[i].kerasMask=a[i]}addInboundNode(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;const s=CG(e);t=CG(t),n=CG(n),r=CG(r),o=qU(o),a=qU(a);const l=[],u=[],c=[];for(const d of s)l.push(d.sourceLayer),u.push(d.nodeIndex),c.push(d.tensorIndex);new aK({outboundLayer:this,inboundLayers:l,nodeIndices:u,tensorIndices:c,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:o,outputShapes:a},i);for(let d=0;d<t.length;d++)t[d].sourceLayer=this,t[d].nodeIndex=this.inboundNodes.length-1,t[d].tensorIndex=d}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach((e=>e.dispose())),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function lK(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const r=lK(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of r)-1===t.indexOf(e)&&t.push(e)}return t}}}class uK extends sK{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:jG("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new mG("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new mG("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new mG("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const r=new rK(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new aK({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new mG(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}uK.className="InputLayer",lM(uK);class cK{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof cK)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new mG(`Duplicate key: name=${e.name}, id=${e.id}`);return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return U_(t,e.dtype)}catch(dTe){throw new mG(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof rK){if(null==this.id2Value[e.id])throw new mG(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new mG(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof rK){if(null==this.id2Value[e.id])throw new mG(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new mG(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&a_(this.id2Mask)}}const dK=new bG,hK=new bG;function pK(e,t,n,r){const o=null!=n&&n.training,a=Array.isArray(e),i=a?e:[e],s=i.map((e=>e.name)),l=[],u=t.names();for(const f of s)-1!==u.indexOf(f)?l.push(t.getValue(f)):l.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const c=s.join(",")+"|"+t.names().sort().join(",");let d,h=dK.get(c);if(null==h){const e=function(e,t){RA(null!=e&&e.length>0,(()=>"Expected at least one fetch, got none"));let n=[],r={};if(1===e.length){const o=mK(e[0],t);n=o.sorted,r=o.recipientMap}else{const o=new Set;for(const a of e){const{sorted:e,recipientMap:i}=mK(a,t);for(const t of e)o.has(t.name)||(n.push(t),o.add(t.name));for(const t in i)null==r[t]&&(r[t]=new Set),i[t].forEach((e=>r[t].add(e)))}}return{sorted:n,recipientCounts:fK(r)}}(i,t);h=e.sorted,d=e.recipientCounts,dK.put(c,h),hK.put(c,d)}d={},o||Object.assign(d,hK.get(c));const p=new cK(t);for(let f=0;f<h.length;++f){if(null!=r){const e=r_().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}const e=h[f],a=e.sourceLayer;if(a instanceof uK)continue;const i=[],u=[],c=[];let m=!1;for(const n of e.inputs){const e=p.getValue(n),r=p.getMask(n);i.push(e),u.push(r),null!=r&&(m=!0),o||(d[n.name]--,0!==d[n.name]||t.hasKey(n)||-1!==s.indexOf(n.name)||e.isDisposed||!0===n.sourceLayer.stateful||c.push(e))}m&&((n=n||{}).mask=u[0]);const g=CG(a.apply(i,n));let v=null;a.supportsMasking&&(v=a.computeMask(i,u));const b=gK(e),y=Array.isArray(b)?b:[b];for(let t=0;t<y.length;++t){p.hasKey(y[t])||p.add(y[t],g[t],Array.isArray(v)?v[0]:v);const e=s.indexOf(y[t].name);-1!==e&&(l[e]=g[t])}o||a_(c)}return p.disposeMasks(),a?l:l[0]}function fK(e){const t={};for(const n in e)t[n]=e[n].size;return t}function mK(e,t){const n=new Set,r=[],o={};for(const s of t.names())n.add(s);const a=[],i=[];for(a.push(e);a.length>0;){const e=a[a.length-1];if(n.has(e.name)){a.pop();continue}const t=i[i.length-1]===a.length-1;if(0===e.inputs.length||t)a.pop(),r.push(e),n.add(e.name),t&&i.pop();else{i.push(a.length-1);for(const t of e.inputs)null==o[t.name]&&(o[t.name]=new Set),o[t.name].add(e.name),n.has(t.name)||a.push(t)}}return{sorted:r,recipientMap:o}}function gK(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}function vK(e,t){return o_((()=>Z_(tL(Q_(e,e),t,!0))))}hO().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(()=>100),(function(e){null!=dK&&dK.setMaxEntries(e),null!=hK&&hK.setMaxEntries(e)}));class bK extends iM{getConfig(){return{}}}class yK extends bK{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return o_((()=>{const t=vK(e,this.axis),n=Ez(t,0,this.maxValue);return Q_(e,Y_(n,X_(lU(),t)))}))}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}yK.className="MaxNorm",lM(yK);class wK extends bK{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return o_((()=>Y_(e,X_(lU(),vK(e,this.axis)))))}getConfig(){return{axis:this.axis}}}wK.className="UnitNorm",lM(wK);class xK extends bK{apply(e){return DL(e)}}xK.className="NonNeg",lM(xK);class kK extends bK{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return o_((()=>{const t=vK(e,this.axis),n=X_(Q_(this.rate,Ez(t,this.minValue,this.maxValue)),Q_(1-this.rate,t));return Q_(e,Y_(n,X_(lU(),t)))}))}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}kK.className="MinMaxNorm",lM(kK);const CK={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function SK(e){return IG(e)}function EK(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return TG(e,sM.getMap().classNameMap,t,"constraint")}function NK(e){if(null==e)return null;if("string"===typeof e){return EK({className:e in CK?CK[e]:e,config:{}})}return e instanceof bK?e:EK(e)}async function IK(e){if(null==e)return;const t=[],n=[],r=[];for(const o in e){const a=e[o];if("number"!==typeof a){const e=a;t.push(e.data()),n.push(o),r.push(e)}}if(t.length>0){const o=await Promise.all(t);for(let t=0;t<o.length;++t)e[n[t]]=o[t][0];a_(r)}}function $K(e){if(null!=e)for(const t in e){const n=e[t];"number"!==typeof n&&n.dispose()}}var TK;!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(TK||(TK={}));class AK{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class OK{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class RK extends AK{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const r in t){const e=t[r];if("number"===typeof e)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+e*n;else{let t;r in this.totals?t=this.totals[r]:this.totals[r]=0;const o=o_((()=>X_(this.totals[r],Q_(e,n))));this.totals[r]=o,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const n of this.params.metrics)null!=this.totals[n]&&("number"===typeof this.totals[n]?t[n]=this.totals[n]/this.seen:o_((()=>{const e=Q_(Y_(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),i_(t[n])})))}}class PK extends AK{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){const e=[],t=[],n=[];for(const o in this.history){const r=this.history[o];for(let a=0;a<r.length;++a)if("number"!==typeof r[a]){const i=r[a];e.push(i.data()),t.push(o),n.push(a)}}const r=await Promise.all(e);for(let o=0;o<r.length;++o){this.history[t[o]][n[o]].dispose(),this.history[t[o]][n[o]]=r[o][0]}}}class DK extends AK{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||bj,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");XA(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let r,o=null!=n?n():nF();return function(){const a=null!=n?n():nF();return a-o<t||(o=a,r=e(...arguments)),r}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const r=[];null!=this.yield&&(await IK(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await IK(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await IK(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await IK(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await IK(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):XA(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await IK(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await IK(e),await this.trainEnd(e))}}function FK(e,t){if(null==e&&(e={}),e instanceof AK)return[e];if(Array.isArray(e)&&e[0]instanceof AK)return e;return CG(e).map((e=>new DK(e,t)))}class _K{constructor(){}static registerCallbackConstructor(e,t){RA(e>=0&&Number.isInteger(e),(()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`)),_K.checkForDuplicate(t),null==_K.constructors[e]&&(_K.constructors[e]=[]),_K.constructors[e].push(t)}static checkForDuplicate(e){for(const t in _K.constructors){_K.constructors[+t].forEach((t=>{if(t===e)throw new mG("Duplicate callback constructor.")}))}}static clear(){_K.constructors={}}static createCallbacks(e){const t=[];for(const n in _K.constructors){const r=+n;e>=r&&t.push(..._K.constructors[r])}return t.map((e=>new e))}}function MK(e,t,n,r,o,a,i,s,l){const u=new PK,c=[new RK,..._K.createCallbacks(t)];null!=e&&c.push(...e),c.push(u);const d=new OK(c);return d.setParams({epochs:n,initialEpoch:r,samples:o,steps:a,batchSize:i,verbose:t,doValidation:s,metrics:l}),{callbackList:d,history:u}}function zK(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return TG(e,sM.getMap().classNameMap,t,"layer",n)}function LK(e,t){return o_((()=>{"float32"!==e.dtype&&(e=U_(e,"float32"));const n=tL(wU(e),t,!0),r=dM(n.shape,lU()),o=Z_(wM(n,r));return Y_(e,o)}))}function BK(e,t){return o_((()=>gL(wU(fM(t,e)),-1)))}function jK(e,t){return o_((()=>gL(gM(fM(t,e)),-1)))}function HK(e,t){return o_((()=>{const n=fM(e,t),r=Ez(gM(e),lU(),Number.MAX_VALUE),o=gM(Y_(n,r));return Q_(100,gL(o,-1))}))}function VK(e,t){return o_((()=>{const n=Ez(t,lU(),Number.MAX_VALUE),r=Qz(X_(1,n)),o=Ez(e,lU(),Number.MAX_VALUE),a=Qz(X_(1,o));return gL(wU(fM(r,a)),-1)}))}function WK(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o_((()=>{if(n)t=WL(t);else{const e=tL(t,t.shape.length-1,!0);t=Y_(t,e)}return t=Ez(t,lU(),1-lU()),wL(tL(Q_(U_(e,"float32"),Qz(t)),t.shape.length-1))}))}function GK(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o_((()=>{const r=U_(Kz(function(e){const t=[rU(e.shape)];return vz(e,t)}(e)),"int32"),o=(t=Ez(t,lU(),1-lU())).shape;return WK(vz(kL(r,o[o.length-1]),o),t,n)}))}function UK(e,t){return o_((()=>{let n;return n=Ez(t,lU(),1-lU()),n=Qz(Y_(n,fM(1,n))),gL(function(e,t){if(!_A(e.shape,t.shape))throw new mG(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return o_((()=>{const n=DL(t),r=wL(gM(t));return X_(fM(n,Q_(t,e)),Zz(Vz(r)))}))}(e,n),-1)}))}function KK(e,t){return o_((()=>{const n=Ez(e,lU(),1),r=Ez(t,lU(),1);return tL(Q_(e,Qz(Y_(n,r))),-1)}))}function qK(e,t){return o_((()=>{const n=LK(e,-1),r=LK(t,-1),o=Q_(n,r);return wL(tL(o,-1))}))}_K.constructors={};const XK={meanSquaredError:BK,meanAbsoluteError:jK,meanAbsolutePercentageError:HK,meanSquaredLogarithmicError:VK,squaredHinge:function(e,t){return o_((()=>{const n=wM(0,fM(1,Q_(e,t)));return gL(wU(n),-1)}))},hinge:function(e,t){return o_((()=>{const n=wM(0,fM(1,Q_(e,t)));return gL(n,-1)}))},categoricalHinge:function(e,t){return o_((()=>{const n=tL(Q_(e,t),-1),r=eL(Q_(fM(1,e),t),-1);return wM(0,X_(1,fM(r,n)))}))},logcosh:function(e,t){return o_((()=>{const n=Math.log(2),r=fM(t,e),o=fM(X_(r,GL(Q_(-2,r))),n);return gL(o,-1)}))},categoricalCrossentropy:WK,sparseCategoricalCrossentropy:GK,binaryCrossentropy:UK,kullbackLeiblerDivergence:KK,poisson:function(e,t){return o_((()=>{const n=Qz(X_(lU(),t));return gL(fM(t,Q_(e,n)),-1)}))},cosineProximity:qK};function JK(e){if("string"===typeof e){if(e in XK)return XK[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new mG(t)}return e}function YK(e,t){return o_((()=>{const n=Q_(.5,EL(t)),r=uU(Xz(t,n),e.dtype);return gL(jz(e,r),-1)}))}function QK(e,t){return o_((()=>uU(jz(tz(e,-1),tz(t,-1)),"float32")))}function ZK(e,t){return o_((()=>U_(tL(hL(jz(e,1),jz(t,1))),"float32")))}function eq(e,t){return UK(e,t)}function tq(e,t){return e.rank===t.rank&&(e=KL(e,[e.rank-1])),(t=tz(t,-1)).dtype!==e.dtype&&(t=U_(t,e.dtype)),U_(jz(e,t),"float32")}const nq=WK,rq=GK,oq={binaryAccuracy:YK,categoricalAccuracy:QK,precision:function(e,t){return o_((()=>{const n=ZK(e,t),r=function(e,t){return o_((()=>U_(tL(hL(jz(e,0),jz(t,1))),"float32")))}(e,t),o=X_(n,r);return U_(eB(Xz(o,0),Y_(n,o),0),"float32")}))},categoricalCrossentropy:nq,sparseCategoricalCrossentropy:rq,mse:BK,MSE:BK,mae:jK,MAE:jK,mape:HK,MAPE:HK,cosine:qK};function aq(e){if("string"===typeof e&&e in oq)return oq[e];if("string"!==typeof e&&null!=e)return e;throw new mG(`Unknown metric ${e}`)}function iq(e){if(wG(null!==e,`Unknown LossOrMetricFn ${e}`),"string"===typeof e)return e;{let t;for(const n of Object.keys(XK))if(XK[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(oq))if(oq[n]===e){t=n;break}return void 0!==t?t:e.name}}const sq=1048576;function lq(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!uq(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>sq&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function uq(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!==typeof n)return!1;if(!uq(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!uq(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function cq(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;const o=function(e){let t=!0;const n=[],r=[];for(const o in e.nodesByDepth)n.push(e.nodesByDepth[o]);for(const o of n){if(o.length>1||1===o.length&&o[0].inboundLayers.length>1){t=!1;break}r.push(...o)}if(t)for(const o of e.layers){let e=!1;for(const n of o.inboundNodes)if(-1!==r.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),a=["Layer (type)","Input Shape","Output shape","Param #"];let i;if(o?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((e=>Math.floor(t*e)))),!o){a.push("Receives inputs"),i=[];for(const t in e.nodesByDepth)i.push(...e.nodesByDepth[t])}r("_".repeat(t)),dq(a,n,r),r("=".repeat(t));const s=e.layers;for(let c=0;c<s.length;++c)o?hq(s[c],n,r):pq(s[c],n,i,r),r((c===s.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=function(e){let t;t=null!=e.collectedTrainableWeights?YU(e.collectedTrainableWeights):YU(e.trainableWeights);return t}(e),u=YU(e.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(t))}function dq(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="";for(let o=0;o<e.length;++o)o>0&&(r=r.slice(0,r.length-1)+" "),r+=e[o],r=r.slice(0,t[o]),r+=" ".repeat(t[o]-r.length);n(r)}function hq(e,t,n){let r,o;try{o=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(dTe){o="multiple"}try{r=JSON.stringify(e.outputShape)}catch(dTe){r="multiple"}dq([`${e.name} (${e.getClassName()})`,o,r,e.countParams().toString()],t,n)}function pq(e,t,n,r){let o,a;try{a=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(dTe){a="multiple"}try{o=JSON.stringify(e.outputShape)}catch(dTe){o="multiple"}const i=[];for(const c of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(c)))for(let e=0;e<c.inboundLayers.length;++e){const t=c.inboundLayers[e].name,n=c.nodeIndices[e],r=c.tensorIndices[e];i.push(`${t}[${n}][${r}]`)}const s=e.name,l=e.getClassName(),u=0===i.length?"":i[0];dq([`${s} (${l})`,a,o,e.countParams().toString(),u],t,r);for(let c=1;c<i.length;++c)dq(["","","","",i[c]],t,r)}function fq(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function mq(e,t){if(null===e)return null;if("string"===typeof e)return EG(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let o=0;o<r;++o){const r=e[o];fq(t,o,r)?n.push(r):n.push(mq(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];if("name"===n&&"string"===typeof r)t[n]=r;else{const e=EG(n);t[e]=mq(r,e)}}return t}}function gq(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return SG(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let o=0;o<r;++o){const r=e[o];fq(t,o,r)?n.push(r):n.push(gq(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n],o=SG(n);t[o]="name"!==n&&"className"!==n||"string"!==typeof r?gq(r,n):r}return t}}const vq="4.21.0";class bq extends sK{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=jG(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],OG(this.inputs).length!==this.inputs.length)throw new mG(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map((e=>e.name))}`);OG(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map((e=>e.name))}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const v of this.outputs){const e=v.sourceLayer,t=v.nodeIndex,n=v.tensorIndex;this.outputLayers.push(e),this.outputLayersNodeIndices.push(t),this.outputLayersTensorIndices.push(n)}for(const v of this.inputs){const e=v.sourceLayer,t=v.nodeIndex,n=v.tensorIndex;wG(0===t,"input layer has >1 nodes"),wG(0===n,"input layer has >1 tensors"),this.inputLayers.push(e),this.inputLayersNodeIndices.push(t),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let v=0;v<this.inputLayers.length;v++){const t=this.inputLayers[v];if(!(t instanceof uK))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${v} (0-based) originates from layer type ${t.getClassName()}.`);this.inputNames.push(t.name),this.feedInputShapes.push(t.batchInputShape),this.feedInputNames.push(t.name)}for(const v of this.outputLayers)this.outputNames.push(v.name);this.internalInputShapes=this.inputs.map((e=>e.shape)),this.internalOutputShapes=this.outputs.map((e=>e.shape));const t={},n={},r={},o={},a={},i=[],s=(e,t,n,r,o,l)=>{null!=r&&null!=o&&null!=l||(r=e.sourceLayer,o=e.nodeIndex,l=e.tensorIndex);const u=r.inboundNodes[o];if(-1!==n.indexOf(u))throw new fG(`The tensor ${e.name} at layer "${r.name}" is part of a cycle.`);if(-1!==t.indexOf(u))return;this.containerNodes.add(bq.nodeKey(r,o)),r.id in a||(a[r.id]=Object.keys(a).length),-1===n.indexOf(u)&&n.push(u);const c=u.inboundLayers.length;for(let a=0;a<c;a++){const e=u.inputTensors[a],r=u.inboundLayers[a],o=u.nodeIndices[a],i=u.tensorIndices[a];s(e,t,n,r,o,i)}for(t.push(u);n.indexOf(u)>=0;)n.splice(n.indexOf(u),1);i.push(u)},l=[],u=[];for(const v of this.outputs)s(v,l,u);const c=i.slice().reverse();for(const v of c){n[v.id]=v,v.id in t||(t[v.id]=0);let e=t[v.id];const a=null==r[v.outboundLayer.id]?0:r[v.outboundLayer.id];e=Math.max(e,a),r[v.outboundLayer.id]=e,o[v.outboundLayer.id]=v.outboundLayer,t[v.id]=e;for(let r=0;r<v.inboundLayers.length;r++){const o=v.inboundLayers[r],a=v.nodeIndices[r],i=o.inboundNodes[a],s=null==t[i.id]?0:t[i.id];t[i.id]=Math.max(e+1,s),n[i.id]=i}}const d={};for(const v in t){const e=t[v];e in d||(d[e]=[]),d[e].push(n[v])}const h={};for(const v in r){const e=r[v];e in h||(h[e]=[]),h[e].push(o[v])}let p=Object.keys(h).map((e=>parseInt(e,10))).sort(AG);this.layers=[];for(const v of p){const e=h[v];e.sort(((e,t)=>{const n=a[e.id],r=a[t.id];return n<r?-1:n>r?1:0}));for(const t of e)t instanceof bq&&this.internalContainerRefs.push(t),this.layers.push(t)}this.layersByDepth=h,p=Object.keys(d).map((e=>parseInt(e,10))).sort(AG);const f=this.inputs.slice(),m=[];for(const v of p)for(const e of d[v]){const t=e.outboundLayer;if(null!=t){for(const n of e.inputTensors)if(-1===f.indexOf(n))throw new fG(`Graph disconnected: cannot obtain value for tensor ${n} at layer "${t.name}". The following previous layers were accessed without issue: ${m}`);for(const t of e.outputTensors)f.push(t);m.push(t.name)}}this.nodesByDepth=d;const g=this.layers.map((e=>e.name));for(const v of g){const e=g.filter((e=>e===v)).length;if(1!==e)throw new fG(`The name "${v}" is used ${e} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new aK({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map((e=>null)),outputMasks:this.outputs.map((e=>null)),inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs.map((e=>e.shape))}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach((t=>{t._trainableWeights.forEach((t=>t.trainable=e))})),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new mG("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n={};let r=0;const o=(e=>{const t=Object.keys(e);if(0===t.length)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))})(e);o&&this.parseWeights(e);for(const i of this.layers)for(const[e,t]of i.weights.entries()){const a=o?`${t.name.split("/").slice(0,-1).join("/")+"/"}${e}`:t.originalName;if(null!=n[a])throw new mG(`Duplicate weight name: ${a}`);n[a]=t,r++}const a=[];for(const i in e){let r=i;if(null==n[i]){const e=i.split("/");r=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[r])a.push([n[r],e[i]]);else if(t)throw new mG(`Provided weight data has no target variable: ${i}`);delete n[r]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new mG(`${e.length} of ${r} weights are not set: ${e}`)}tK(a)}parseWeights(e){for(const t in Object.keys(e)){const n=t.split("/"),r=["vars","layer_checkpoint_dependencies"],o=n.map((e=>e.startsWith("_")?e.slice(1):e)).filter((e=>!r.includes(e))).join("/");o!==t&&(e[o]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion=`tfjs-layers ${vq}`,t.backend="TensorFlow.js",t}toJSON(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=gq(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return o_((()=>{e=CG(e);const n=new cK;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return pK(this.outputs,n,t)}))}computeMask(e,t){return o_((()=>{let n;return e=CG(e),n=null==t?yG(null,e.length):CG(t),this.runInternalGraph(e,n)[1]}))}computeOutputShape(e){const t=qU(e);if(t.length!==this.inputLayers.length)throw new mG(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let i=0;i<t.length;i++){const e=this.inputLayers[i],r=t[i];n[e.name+"_0_0"]=r}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(AG);if(r.length>1)for(const i of r){const e=this.nodesByDepth[i];for(const t of e){const e=t.outboundLayer;if(-1!==this.inputLayers.map((e=>e.id)).indexOf(e.id))continue;const r=[];for(let i=0;i<t.inboundLayers.length;i++){const e=t.inboundLayers[i],o=t.nodeIndices[i],a=t.tensorIndices[i],s=n[`${e.name}_${o}_${a}`];r.push(s)}const o=qU(e.computeOutputShape(kG(r))),a=e.inboundNodes.indexOf(t);for(let t=0;t<o.length;t++){n[`${e.name}_${a}_${t}`]=o[t]}}}const o=[],a=[];for(let i=0;i<this.outputLayers.length;i++){const e=this.outputLayers[i],t=this.outputLayersNodeIndices[i],n=this.outputLayersTensorIndices[i],r=`${e.name}_${t}_${n}`;a.push(r)}for(let i=0;i<a.length;i++){const e=a[i];wG(e in n),o.push(n[e])}return kG(o)}runInternalGraph(e,t){null==t&&(t=yG(null,e.length));const n={};for(let s=0;s<this.inputs.length;++s){const r=this.inputs[s],o=e[s],a=t[s];n[r.id]=[o,a]}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(AG);for(const s of r){const e=this.nodesByDepth[s];for(const t of e){const e=t.outboundLayer,r=t.inputTensors,o=t.outputTensors,a=new Array;for(const t of r)t.id in n&&a.push(n[t.id]);if(a.length===r.length){let r,i,s,l,u={};if(null!=t.callArgs&&(u=t.callArgs),1===a.length){const[t,n]=a[0];null==u.mask&&(u.mask=n),s=CG(e.call(t,u)),l=CG(e.computeMask(t,n)),r=[t],i=[n]}else r=a.map((e=>e[0])),i=a.map((e=>e[1])),null==u.mask&&(u.mask=i),s=CG(e.call(r,u)),l=CG(e.computeMask(r,i));if(e.activityRegularizer)throw new gG("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<o.length;++e){const t=o[e],r=s[e],a=l[e];n[t.id]=[r,a]}}}}const o=[],a=[],i=[];for(const s of this.outputs){wG(s.id in n,`Could not compute output ${s.name} : ${s.id}`);const[e,t]=n[s.id];i.push(e.shape),o.push(e),a.push(t)}return[o,a,i]}buildNodeConversionMap(e){const t={};let n;for(const r of this.layers){n=r instanceof bq?1:0;for(let e=0;e<r.inboundNodes.length;e++){const o=bq.nodeKey(r,e);this.containerNodes.has(o)&&(t[o]=n,n+=1)}}return t}getLayer(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new mG("Provide either a layer name or layer index");if("number"===typeof e)return this.findLayer(e);for(const n of this.layers)if(n.name===e)return n;throw new mG(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new mG(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return o_((()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const r=bq.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e}))}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const a of this.layers){const e=a.getClassName(),r=a.getConfig(),o=[];for(let n=0;n<a.inboundNodes.length;n++){const e=a.inboundNodes[n],r=bq.nodeKey(a,n);let i={};if(this.containerNodes.has(r)){if(e.callArgs)try{JSON.stringify(e.callArgs),i=e.callArgs}catch(dTe){console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${e.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),i={}}if(e.inboundLayers.length>0){const n=[];for(let r=0;r<e.inboundLayers.length;r++){const o=e.inboundLayers[r],a=e.nodeIndices[r],s=e.tensorIndices[r];let l=t[bq.nodeKey(o,a)];null==l&&(l=0),n.push([o.name,l,s,i])}o.push(n)}}}const i={};i.name=a.name,i.className=e,i.config=r,i.inboundNodes=o,n.push(i)}e.layers=n;const r=[];for(let a=0;a<this.inputLayers.length;a++){const e=this.inputLayers[a],n=this.inputLayersNodeIndices[a],o=bq.nodeKey(e,n);if(!this.containerNodes.has(o))continue;let i=t[o];null!==i&&void 0!==i||(i=0);const s=this.inputLayersTensorIndices[a];r.push([e.name,i,s])}e.inputLayers=r;const o=[];for(let a=0;a<this.outputLayers.length;a++){const e=this.outputLayers[a],n=this.outputLayersNodeIndices[a],r=bq.nodeKey(e,n);if(!this.containerNodes.has(r))continue;let i=t[r];null!==i&&void 0!==i||(i=0);const s=this.outputLayersTensorIndices[a];o.push([e.name,i,s])}return e.outputLayers=o,e}static fromConfig(e,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={},o={};function a(e,t){e.name in o?o[e.name].push(t):o[e.name]=[t]}function i(e,t){const n=[];let o;for(const i of t){const s=i[0],l=i[1],u=i[2];if(o=null==i[3]?{}:i[3],!(s in r))return void a(e,t);const c=r[s];if(c.inboundNodes.length<=l)return void a(e,t);const d=c.inboundNodes[l];n.push(d.outputTensors[u])}n.length>0&&e.apply(kG(n),o)}function s(e){const o=e.name,i=zK(e,null!=t.customObjects?t.customObjects:{});i.setFastWeightInitDuringBuild(n),r[o]=i;e.inboundNodes.forEach((e=>{if(!(e instanceof Array))throw new mG(`Corrupted configuration, expected array for nodeData: ${e}`);a(i,e)}))}const l=t.name,u=t.layers;for(const f of u)s(f);for(;!RG(o);)for(const e of u){const t=r[e.name];if(t.name in o){const e=o[t.name];delete o[t.name];for(const n of e)i(t,n)}}const c=[],d=[],h=t.inputLayers;for(const f of h){const e=f[0],t=f[1],n=f[2];wG(e in r);const o=r[e].inboundNodes[t].outputTensors;c.push(o[n])}const p=t.outputLayers;for(const f of p){const e=f[0],t=f[1],n=f[2];wG(e in r);const o=r[e].inboundNodes[t].outputTensors;d.push(o[n])}return new e({inputs:c,outputs:d,name:l})}get stateful(){if(this._stateful)throw new mG("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){o_((()=>{this.layers.forEach((e=>{e.stateful&&e.resetStates()}))}))}}function yq(e,t,n){const r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>null));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){const n=[];return t.forEach((t=>{t in e?n.push(e[t]):n.push(null)})),n}throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}function wq(e,t){return yq(e,t,"classWeight")}async function xq(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=o_((()=>{if(1===e.shape.length)return K_(e);if(2===e.shape.length){if(e.shape[1]>1){return tz(e,1)}if(1===e.shape[1])return vz(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)})),r=Array.from(await t.data());a_(t);const o=[];return r.forEach((e=>{if(null==n[e])throw new Error(`classWeight must contain all classes in the training data. The class ${e} exists in the data but not in classWeight`);o.push(n[e])})),JL(o,"float32")}return null}function kq(e,t){return Q_(e,t)}function Cq(e,t){let n,r;const o=t;n=o.xs,r=o.ys,RA(null!=n&&null!=r,(()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`));const a=Sq("input",e.inputNames,n),i=Sq("output",e.outputNames,r),s=a[0].shape[0];RA(a.length===e.inputs.length,(()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`)),RA(i.length===e.outputs.length,(()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`));for(let l=0;l<a.length;l++)RA(a[l].shape[0]===s,(()=>`Batch size mismatch: input ${e.inputNames[l]} has ${a[l].shape[0]}; expected  ${s} based on input ${e.inputNames[0]}.`));for(let l=0;l<i.length;l++)RA(i[l].shape[0]===s,(()=>`Batch size mismatch: output ${e.outputNames[l]} has ${i[l].shape[0]}; expected  ${s} based on input ${e.inputNames[0]}.`));return{xs:a,ys:i}}function Sq(e,t,n){if(n instanceof yF)return[n];if(Array.isArray(n))return RA(n.length===t.length,(()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`)),n;{const r=[];for(const o of t){if(null==n[o])throw new mG(`The feature data generated by the dataset lacks the required ${e} key '${o}'.`);r.push(n[o])}return r}}async function Eq(e,t,n){const r=null!=n.batchesPerEpoch;if(RA(null!=e.optimizer,(()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig).")),RA(null!=n,(()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call.")),RA(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),(()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`)),RA(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),(()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`)),RA(null==n.validationSplit,(()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead.")),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const o=null!=n.validationData;let a,i;if(o)if(Nq(n.validationData))RA(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),(()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`));else{const e=function(e){if(3===e.length)throw new gG("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);a=e.xs,i=e.ys}const s=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let u;u=o?l.slice().concat(l.map((e=>"val_"+e))):l.slice();const c=FK(n.callbacks,n.yieldEvery),d=null==n.verbose?1:n.verbose,{callbackList:h,history:p}=MK(c,d,n.epochs,null,null,function(e,t){let n=null;null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size);return n}(t,n),null,o,u);h.setModel(e),e.history=p,await h.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,m=await t.iterator();for(;f<n.epochs;){const u={};await h.onEpochBegin(f);let c=0,d=0;for(r||(m=await t.iterator());!r||c<n.batchesPerEpoch;){const t=await m.next();if(r&&t.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${c} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, `+n.batchesPerEpoch*n.epochs+" batches). You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:r,ys:o}=Cq(e,t.value),a={};a.batch=d,a.size=r[0].shape[0],await h.onBatchBegin(d,a);const i=[];if(null!=n.classWeight){const t=wq(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)i.push(await xq(o[e],null,t[e]))}const u=r.concat(o).concat(i),p=s(u);a_(u);for(let e=0;e<l.length;++e){const t=l[e],n=p[e];a[t]=n,i_(n)}await h.onBatchEnd(d,a),$K(a),d++,c++}if(r?c>=n.batchesPerEpoch:t.done){if(o){let t;t=Nq(n.validationData)?CG(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):CG(e.evaluate(a,i,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)u[`val_${e.metricsNames[n]}`]=t[n]}break}if(e.stopTraining_)break}if(await h.onEpochEnd(f,u),f++,e.stopTraining_)break}return await h.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function Nq(e){return"function"===typeof e.iterator}function Iq(e){RA(e>0&&Number.isInteger(e),(()=>`batchSize is required to be a positive integer, but got ${e}`))}function $q(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((e=>dU(e,t,n-t))):dU(e,t,n-t)}function Tq(e,t){return o_((()=>null==e?null:Array.isArray(e)?e.map((e=>Tq(e,t))):yU(e,"int32"===t.dtype?t:U_(t,"int32"))))}function Aq(e,t){const n=[];let r=0,o=null;for(;r<e;)o=r+t,o>=e&&(o=e),n.push([r,o]),r=o;return n}function Oq(e){const t=[];e instanceof yF&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(1===r.rank)t.push(cU(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function Rq(e,t){if(null==e)return;const n=[];if(t instanceof yF)n.push(t.id);else if(Array.isArray(t))t.forEach((e=>n.push(e.id)));else if(null!=t)for(const o in t){const e=t[o];n.push(e.id)}const r=[];if(e instanceof yF)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach((e=>{-1===n.indexOf(e.id)&&r.push(e)}));else if(null!=e)for(const o in e){const t=e[o];-1===n.indexOf(t.id)&&r.push(t)}r.forEach((e=>{e.isDisposed||e.dispose()}))}function Pq(e){return Array.isArray(e)}function Dq(e){return!function(e){return e instanceof yF}(e)&&!Pq(e)}function Fq(e,t,n){let r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){let t=!1;if(Pq(e)&&e.length>0)t=!0;else if(Dq(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new mG(`Error when checking model ${a} expected no data, but got ${e}`)}return[]}if(null==e)return t.map((e=>null));if(Dq(e)){r=[];for(const n of t){if(null==e[n])throw new mG(`No data provided for "${n}". Need data for each key in: ${t}`);r.push(e[n])}}else if(Pq(e)){if(e.length!==t.length)throw new mG(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);r=e}else{if(t.length>1)throw new mG(`The model ${a} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);r=[e]}if(r=Oq(r),null!=n)for(let i=0;i<t.length;++i){if(null==n[i])continue;const e=r[i];if(e.shape.length!==n[i].length)throw new mG(`Error when checking ${a}: expected ${t[i]} to have ${n[i].length} dimension(s). but got array with shape ${e.shape}`);for(let t=0;t<n[i].length;++t){if(0===t&&!o)continue;const r=e.shape[t],s=n[i][t];if(null!=s&&s>=0&&r!==s)throw new mG(`${a} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${a} received an input with ${e.shape[0]} examples, each with shape [${e.shape.slice(1,e.shape.length)}] (tensor shape [${e.shape}])`)}}return r}function _q(e,t,n){let r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new mG(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);r=e}else{if(t.length>1)throw new mG(`The model expects ${t.length} ${a} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);r=[e]}if(null!=n)for(let i=0;i<t.length;++i){if(null==n[i])continue;const e=r[i];if(e.shape.length!==n[i].length)throw new mG(`Error when checking ${a}: expected ${t[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(e.shape)}`);for(let r=0;r<n[i].length;++r){if(0===r&&!o)continue;const s=e.shape[r],l=n[i][r];if(null!=l&&l!==s)throw new mG(`Error when checking ${a}: expected ${t[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(e.shape)}.`)}}}class Mq extends bq{constructor(e){super(e),this.isTraining=!1}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new mG("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");cq(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>gj.adagrad(.01),Adadelta:()=>gj.adadelta(1,.95,lU()),Adam:()=>gj.adam(.001,.9,.999,lU()),Adamax:()=>gj.adamax(.002,.9,.999,lU(),0),RMSProp:()=>gj.rmsprop(.001,.9,0,lU()),SGD:()=>gj.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new mG(`Unknown Optimizer ${e}`)}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof uM))throw new mG("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new mG(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);const n=e.loss;t=n.map((e=>JK(e)))}else{const n=JK(e.loss);this.outputs.forEach((e=>{t.push(n)}))}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new mG(`Unknown entry in loss dictionary: "${t}". Only expected the following keys: ${this.outputNames}`);for(const n of this.outputNames)null==e.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${n} during training`),t.push(JK(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const e=this.internalOutputShapes[a],t=this.outputNames[a];this.feedOutputNames.push(t),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[a])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],QG("loss",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}}));const r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>[]));let n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);n=e}if(Array.isArray(n))return t.map((e=>n));{const e=[];for(const r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),o=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};QG("metric",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;(t=>{let n,r,a;for(const i of t){if("string"===typeof i&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(i)){const t=this.internalOutputShapes[e];let o;1===t[t.length-1]||this.lossFunctions[e]===UK?-1!==["accuracy","acc"].indexOf(i)?r=YK:-1!==["crossentropy","ce"].indexOf(i)&&(r=eq):this.lossFunctions[e]===GK?-1!==["accuracy","acc"].indexOf(i)?r=tq:-1!==["crossentropy","ce"].indexOf(i)&&(r=rq):-1!==["accuracy","acc"].indexOf(i)?r=QK:-1!==["crossentropy","ce"].indexOf(i)&&(r=nq),-1!==["accuracy","acc"].indexOf(i)?o="acc":-1!==["crossentropy","ce"].indexOf(i)&&(o="ce"),a=r,n=""+o}else{const e=aq(i);a=e,n=""+iq(i)}let t;QG(n,(()=>{t=a})),o(e,n,t)}})(r[e])}})),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=null==n.batchSize?32:n.batchSize;Iq(r);const o=this.standardizeUserDataXY(e,t,!0,r);try{const e=o[0].concat(o[1]);this.makeTestFunction();const t=this.testFunction;return kG(this.testLoop(t,e,r,n.verbose,n.steps))}finally{Rq(o[0],e),Rq(o[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const r=null!=(n=n||{}).batches,o=e.testFunction;let a=[];if(n.verbose>0)throw new gG("Verbose mode is not implemented yet.");RA(!r||n.batches>0&&Number.isInteger(n.batches),(()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`));const i="function"===typeof t.next?t:await t.iterator();let s=0,l=0;for(;!r||l<n.batches;){const t=await i.next();if(a=o_((()=>{if(t.value){const{xs:n,ys:r}=Cq(e,t.value),i=n.concat(r),u=o_((()=>o(i)));if(a_(i),0===l)for(let e=0;e<u.length;++e)a.push(rM(0));const c=i[0].shape[0];for(let e=0;e<u.length;++e){const t=u[e],n=a[e];a[e]=o_((()=>X_(a[e],Q_(c,t)))),l>0&&a_(n)}a_(u),s+=c,++l}return a})),t.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<a.length;++u){const e=a[u];a[u]=Y_(a[u],s),a_(e)}return kG(a)}(this,e,t)}checkNumSamples(e,t,n){let r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new mG(`If ${o} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else{if(null==e)throw new mG(`Either the input data should have a defined shape, or ${o} shoud be specified.`);r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new mG("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),r=n?t:[t],o=this.retrieveSymbolicTensors(r),a=new cK;if(e instanceof yF&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new mG(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let t=0;t<this.inputs.length;++t)a.add(this.inputs[t],e[t])}else for(const s of this.inputs){const t=e[s.name];if(null==t)throw new mG(`No value is provided for the model's input ${s.name}`);a.add(s,t)}const i=pK(o,a);return n?i:i[0]}retrieveSymbolicTensors(e){const t=yG(null,e.length);let n=e.length;for(const r of this.layers){const o=Array.isArray(r.output)?r.output:[r.output],a=o.map((e=>e.name));for(let r=0;r<e.length;++r){const i=a.indexOf(e[r]);if(-1!==i&&(t[r]=o[i],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach(((t,r)=>{null==t&&n.push(e[r])})),new mG(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(n)}`)}return t}predictLoop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o_((()=>{const r=this.checkNumSamples(e);if(n)throw new gG("Verbose predictLoop() is not implemented yet.");const o=Aq(r,t),a=this.outputs.map((e=>[]));for(let t=0;t<o.length;++t){const n=o_((()=>{const n=o[t][0],r=o[t][1],a=$q(e,n,r),i=[];if(Array.isArray(a))for(let e=0;e<a.length;++e)i.push({key:this.inputs[e],value:a[e]});else i.push({key:this.inputs[0],value:a});const s=new cK(i);return pK(this.outputs,s)}));n.forEach(((e,t)=>a[t].push(e)))}return kG(a.map((e=>Nz(e,0))))}))}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Oq(e);_q(n,this.inputNames,this.feedInputShapes,!1);try{const e=null==t.batchSize?32:t.batchSize;return Iq(e),this.predictLoop(n,e)}finally{Rq(n,e)}}predictOnBatch(e){_q(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t){let n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new fG("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let o=0;o<this.feedOutputShapes.length;++o){const e=this.feedOutputShapes[o];this.feedLossFns[o]===GK?r.push(e.slice(0,e.length-1).concat([1])):r.push(e)}if(function(e,t){const n=OG(e.map((e=>e.shape[0])));n.sort();const r=OG(t.map((e=>e.shape[0])));if(r.sort(),n.length>1)throw new mG(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map((e=>e.shape)))}`);if(r.length>1)throw new mG(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map((e=>e.shape)))}`);if(n.length>0&&r.length>0&&!_A(n,r))throw new mG(`Input Tensors should have the same number of samples as target Tensors. Found ${n[0]} input sample(s) and ${r[0]} target sample(s).`)}(e=Fq(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=Fq(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){const r=[BK,UK,WK];for(let o=0;o<e.length;++o){const a=e[o],i=t[o],s=n[o];if(null!=i){if(i===WK&&1===a.shape[a.shape.length-1])throw new mG(`You are passing a target array of shape ${a.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==r.indexOf(i)){const e=a.shape.slice(1),t=s.slice(1);for(let n=0;n<e.length;++n){const r=e[n],o=t[n];if(null!=o&&r!==o)throw new mG(`A target Tensor with shape ${a.shape} was passed for an output of shape ${s}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new mG(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${n}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,n,r){let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5?arguments[5]:void 0;const[i,s]=this.standardizeUserDataXY(e,t,o,a);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const e=wq(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await xq(s[t],null,e[t]))}return[i,s,l]}testLoop(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;return o_((()=>{const a=this.checkNumSamples(t,n,o,"steps"),i=[];if(r>0)throw new gG("Verbose mode is not implemented yet.");if(null!=o)throw new gG("steps mode in testLoop() is not implemented yet");{const r=Aq(a,n),o=JL(iU(0,a));for(let n=0;n<r.length;++n){const a=r[n][0],s=r[n][1],l=dU(o,a,s-a),u=Tq(t,l),c=e(u);if(0===n)for(let e=0;e<c.length;++e)i.push(rM(0));for(let e=0;e<c.length;++e){const t=c[e];i[e]=X_(i[e],Q_(s-a,t))}}for(let e=0;e<i.length;++e)i[e]=Y_(i[e],a)}return i}))}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const r=e[n];let o=r;if(xG(e,r)>1){o+=`_${xG(e.slice(0,n),r)}`}t.push(o)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),a=[],i=this.collectedTrainableWeights.map((e=>e.read())),s=this.optimizer_.minimize((()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const i=new cK(e),s=pK(this.outputs,i,{training:!0});let l;for(let n=0;n<this.lossFunctions.length;++n){let e=(0,this.lossFunctions[n])(r[n],s[n]);null!=o[n]&&(e=kq(e,o[n]));const a=gL(e);t.push(a),l=0===n?e:X_(l,e)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{const t=this.metricsTensors[n][0],o=this.metricsTensors[n][1];e=gL(t(r[o],s[o]))}i_(e),a.push(e)}return l=gL(l),this.calculateLosses().forEach((e=>{l=X_(l,e)})),l}),!0,i);return[s].concat(a)}}makeTestFunction(){this.testFunction=e=>o_((()=>{const t=[];let n;const r=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let e=0;e<this.inputs.length;++e)a.push({key:this.inputs[e],value:r[e]});const i=new cK(a),s=pK(this.outputs,i);for(let e=0;e<this.lossFunctions.length;++e){const r=this.lossFunctions[e],a=gL(r(o[e],s[e]));n=0===e?a:X_(n,a),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],r=this.metricsTensors[e][1],a=gL(n(o[r],s[r]));t.push(a)}return t}))}async fit(e,t){let n,r,o,a,i,s,l,u,c,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;try{const h=null==d.batchSize?32:d.batchSize;Iq(h);const p=!1,f=await this.standardizeUserData(e,t,d.sampleWeight,d.classWeight,p,h);n=f[0],r=f[1],c=f[2];let m,g=!1;if(null!=d.validationData&&d.validationData.length>0){if(g=!0,2!==d.validationData.length)throw 3===d.validationData.length?new gG("validationData including sample weights is not supported yet."):new mG(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${d.validationData} is invalid.`);i=d.validationData[0],s=d.validationData[1];const e=!0,t=await this.standardizeUserData(i,s,null,null,e,h);l=t[0],u=t[1],m=l.concat(u)}else if(null!=d.validationSplit&&d.validationSplit>0&&d.validationSplit<1){g=!0;const e=Math.floor(n[0].shape[0]*(1-d.validationSplit)),t=n[0].shape[0];l=$q(n,e,t),o=n,n=$q(n,0,e),u=$q(r,e,t),a=r,r=$q(r,0,e),m=l.concat(u)}else null!=d.validationSteps&&(g=!0);const v=n.concat(r).concat(c);this.checkTrainableWeightsConsistency();const b=this.makeTrainFunction(),y=this.getDedupedMetricsNames();let w,x;g?(this.makeTestFunction(),w=this.testFunction,x=y.slice().concat(y.map((e=>"val_"+e)))):(w=null,m=[],x=y.slice());const k=FK(d.callbacks,d.yieldEvery);return await this.fitLoop(b,v,y,h,d.epochs,d.verbose,k,w,m,d.shuffle,x,d.initialEpoch,null,null)}finally{this.isTraining=!1,Rq(n,e),Rq(r,t),Rq(o,e),Rq(a,t),Rq(l,i),Rq(u,s),null!=c&&a_(c)}}async fitLoop(e,t,n,r,o,a,i,s,l,u,c,d,h,p){null==r&&(r=32),null==o&&(o=1),null==u&&(u=!0),null==d&&(d=0);let f=!1;if(null!=s&&null!=l&&(f=!0),null!=p&&(f=!0,null==h))throw new mG("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=this.checkNumSamples(t,r,h,"steps_per_epoch");let g;null!=m&&(g=iU(0,m)),null==a&&(a=1);const{callbackList:v,history:b}=MK(i,a,o,d,m,h,r,f,c);v.setModel(this),this.history=b,await v.onTrainBegin(),this.stopTraining_=!1;for(let y=d;y<o;++y){await v.onEpochBegin(y);const o={};if(null!=h)throw new gG("stepsPerEpoch mode is not implemented yet.");{if("batch"===u)throw new gG("batch shuffling is not implemneted yet");u&&$A(g);const a=JL(g),i=Aq(m,r);for(let u=0;u<i.length;++u){const c={};if(await v.onBatchBegin(u,c),o_((()=>{const d=i[u][0],h=i[u][1],p=dU(a,d,h-d);c.batch=u,c.size=h-d;const m=Tq(t,p),g=e(m);for(let e=0;e<n.length;++e){const t=n[e],r=g[e];c[t]=r,i_(r)}if(u===i.length-1&&f){const e=this.testLoop(s,l,r);for(let t=0;t<n.length;++t){const r=n[t],a=e[t];i_(a),o["val_"+r]=a}}})),await v.onBatchEnd(u,c),$K(c),this.stopTraining_)break}a.dispose()}if(await v.onEpochEnd(y,o),this.stopTraining_)break}return await v.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return Eq(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),r=n[0],o=n[1],a=this.makeTrainFunction()(r.concat(o)),i=[];for(const s of a){const e=await s.data();i.push(e[0])}return a_(a),Rq(n[0],e),Rq(n[1],t),kG(i)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,o=this.getWeights(n);for(let a=0;a<r.length;++a)n&&!r[a].trainable||t.push({name:r[a].originalName,tensor:o[a]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=r_().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-r_().numTensors}return e}getLossIdentifiers(){let e;if("string"===typeof this.loss)e=SG(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!==typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map((e=>SG(e)))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const r of t){if("string"!==typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=SG(n[r])}}return e}getMetricIdentifiers(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[SG(iq(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((e=>SG(iq(e))));{const e={};for(const t in this.metrics)e[t]=SG(iq(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=zK(mq(e.optimizer_config));let n,r;if("string"===typeof e.loss)n=EG(e.loss);else if(Array.isArray(e.loss))n=e.loss.map((e=>EG(e)));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=EG(e.loss[t])}if(Array.isArray(e.metrics))r=e.metrics.map((e=>EG(e)));else if(null!=e.metrics){r={};for(const t in e.metrics)r[t]=EG(e.metrics[t])}this.compile({loss:n,metrics:r,optimizer:t})}async save(e,t){if("string"===typeof e){const t=(n=e,v_.getSaveHandlers(n));if(0===t.length)throw new mG(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new mG(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}var n;if(null==e.save)throw new mG("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await u_(this.getNamedWeights(t)),o={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:`TensorFlow.js tfjs-layers v${vq}`,convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){o.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:n}=await u_(await this.optimizer.getWeights(),e);r.specs.push(...n),r.data=(a=[r.data,t],t_.join(a))}var a;if(null!=this.userDefinedMetadata){const e=!0;lq(this.userDefinedMetadata,this.name,e),o.userDefinedMetadata=this.userDefinedMetadata}return o.weightData=r.data,o.weightSpecs=r.specs,e.save(o)}setUserDefinedMetadata(e){lq(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Mq.className="Model",lM(Mq);class zq extends Mq{}zq.className="Functional",lM(zq);class Lq extends Mq{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:jG("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some((e=>e<0)))throw new mG(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof Lq||e instanceof Mq;let n;if(t){if(n=e,1!==n.outputs.length)throw new mG("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new mG("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new mG("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new mG("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new uK({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new mG(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(1!==e.inboundNodes[0].outputTensors.length)throw new mG("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=lK(this.outputs[0])}this.inboundNodes=[],new aK({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:yG(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(JU(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Mq({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new fG("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new fG("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new fG("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new fG("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t){let n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new mG("Legacy serialization format not supported yet.");n=t}else RA(null!=t.layers,(()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field.")),n=t.layers,delete t.layers,o=t;const a=new e(o);if(!(a instanceof Lq))throw new gG(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const i of n){const e=zK(i,void 0,r);r&&e.setFastWeightInitDuringBuild(!0),a.add(e)}return a}set stopTraining(e){if(null==this.model)throw new mG("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new mG("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}Lq.className="Sequential",lM(Lq);class Bq extends iM{getConfig(){return{}}}class jq extends Bq{apply(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new gG(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return Bz(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}jq.className="elu",lM(jq);class Hq extends Bq{apply(e){return _L(e)}}Hq.className="selu",lM(Hq);class Vq extends Bq{apply(e){return DL(e)}}Vq.className="relu",lM(Vq);class Wq extends Bq{apply(e){return o_((()=>bL(6,DL(e))))}}Wq.className="relu6",lM(Wq);class Gq extends Bq{apply(e){return e}}Gq.className="linear",lM(Gq);class Uq extends Bq{apply(e){return zL(e)}}Uq.className="sigmoid",lM(Uq);class Kq extends Bq{apply(e){return function(e){return o_((()=>{const t=X_(.5,Q_(.2,e));return Ez(t,0,1)}))}(e)}}Kq.className="hardSigmoid",lM(Kq);class qq extends Bq{apply(e){return GL(e)}}qq.className="softplus",lM(qq);class Xq extends Bq{apply(e){return function(e){return o_((()=>Y_(e,X_(gM(e),1))))}(e)}}Xq.className="softsign",lM(Xq);class Jq extends Bq{apply(e){return XL(e)}}Jq.className="tanh",lM(Jq);class Yq extends Bq{apply(e){return WL(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}Yq.className="softmax",lM(Yq);class Qq extends Bq{apply(e){return nL(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}Qq.className="logSoftmax",lM(Qq);class Zq extends Bq{apply(e){return o_((()=>o_((()=>{const t=Math.sqrt(2),n=Q_(.5,X_(1,Hz(Y_(e,t))));return Q_(e,n)}))))}}Zq.className="gelu",lM(Zq);class eX extends Bq{apply(e){return o_((()=>Q_(.5,Q_(e,X_(1,XL(Q_(Z_(Y_(2,Math.PI)),X_(e,Q_(.044715,pM(e,3))))))))))}}eX.className="gelu_new",lM(eX);class tX extends Bq{apply(e){return o_((()=>Q_(e,XL(GL(e)))))}}tX.className="mish",lM(tX);class nX extends Bq{apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return o_((()=>Q_(zL(Q_(e,t)),e)))}}function rX(e){return e.getClassName()}function oX(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return TG(e,sM.getMap().classNameMap,t,"activation")}function aX(e){if(null==e){const e={className:"linear",config:{}};return oX(e)}if("string"===typeof e){const t={};return t.className=e,t.config={},oX(t)}return e instanceof Bq?e:oX(e)}function iX(e){if(null!=e&&"object"!==typeof e)throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}nX.className="swish",lM(nX);class sX extends iM{}class lX extends sX{constructor(e){super(),iX(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return o_((()=>{let t=CL([1]);return this.hasL1&&(t=X_(t,tL(Q_(this.l1,gM(e))))),this.hasL2&&(t=X_(t,tL(Q_(this.l2,wU(e))))),vz(t,[])}))}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}lX.className="L1L2",lM(lX);const uX={l1l2:"L1L2"};function cX(e){return IG(e)}function dX(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return TG(e,sM.getMap().classNameMap,t,"regularizer")}function hX(e){if(null==e)return null;if("string"===typeof e){return dX({className:e in uX?uX[e]:e,config:{}})}return e instanceof sX?e:dX(e)}class pX extends sK{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=XU(e);let n=DL(e);return null!=this.maxValue&&(n=Ez(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}pX.className="ReLU",lM(pX);class fX extends sK{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=XU(e);return Yz(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}fX.className="LeakyReLU",lM(fX);class mX extends sK{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=UU(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=hX(e.alphaRegularizer),this.alphaConstraint=NK(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new mG(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`);this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=JU(e)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new nK({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=XU(e),IL(e,this.alpha.read())}getConfig(){const e={alphaInitializer:GU(this.alphaInitializer),alphaRegularizer:cX(this.alphaRegularizer),alphaConstraint:SK(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}mX.className="PReLU",lM(mX);class gX extends sK{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new gG(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=XU(e);return Bz(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}gX.className="ELU",lM(gX);class vX extends sK{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=XU(e);return Q_(n,U_(Xz(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}vX.className="ThresholdedReLU",lM(vX);class bX extends sK{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new Yq).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return o_((()=>{let n=XU(e);const r=t.mask;if(null!=r){const e=Q_(fM(SL(n.shape),U_(r,n.dtype)),rM(-1e9));n=X_(n,e)}return this.axis instanceof Array?this.axis.length>1?Vz(fM(n,dL(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)}))}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function yX(e,t,n){if("number"===typeof e)return yG(e,t);if(e.length!==t)throw new mG(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let o=0;o<t;++o){const a=e[o];if((r=a)!==parseInt(r.toString(),10))throw new mG(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${a}`)}return e;var r}function wX(e,t,n,r){if(null==e)return e;let o;return o="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((o+r-1)/r)}function xX(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+aU([n-t,0]);else{if("same"!==r)throw new mG(`Unsupport padding mode: ${r}.`);e*=t}return e}function kX(e,t){return o_((()=>(qG(t),"channelsFirst"===t?rB(e,[0,2,3,1]):e)))}function CX(e,t){return o_((()=>(qG(t),"channelsFirst"===t?rB(e,[0,2,3,4,1]):e)))}function SX(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return o_((()=>{if(null==a&&(a="channelsLast"),qG(a),3!==e.shape.length)throw new mG(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(3!==t.shape.length)throw new mG(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(null!=n&&1!==n.shape.length)throw new mG(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if("channelsFirst"===a&&(e=rB(e,[0,2,1])),"causal"===o)throw new gG("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=Rz(e,t,r,"same"===o?"same":"valid","NWC",i);return null!=n&&(s=kU(s,n)),s}))}function EX(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return o_((()=>{if(null==a&&(a="channelsLast"),qG(a),3!==e.rank&&4!==e.rank)throw new mG(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(3!==t.rank&&4!==t.rank)throw new mG(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=kX(e,a);if("causal"===o)throw new gG("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=gB({x:l,filter:t,strides:r,pad:"same"===o?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===a&&(l=rB(l,[0,3,1,2])),l}))}function NX(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;return o_((()=>{if(null==a&&(a="channelsLast"),qG(a),4!==e.rank&&5!==e.rank)throw new mG(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(4!==t.rank&&5!==t.rank)throw new mG(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let s=CX(e,a);if("causal"===o)throw new gG("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=Fz(s,t,r,"same"===o?"same":"valid","NDHWC",i),null!=n&&(s=kU(s,n)),"channelsFirst"===a&&(s=rB(s,[0,4,1,2,3])),s}))}bX.className="Softmax",lM(bX);class IX extends sK{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",IX.verifyArgs(t),this.rank=e,FG(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new gG(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=yX(t.kernelSize,e,"kernelSize"),this.strides=yX(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,XG(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,qG(this.dataFormat),this.activation=aX(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=UU(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=NK(t.biasConstraint),this.biasRegularizer=hX(t.biasRegularizer),this.activityRegularizer=hX(t.activityRegularizer),this.dilationRate=yX(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new mG(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new mG(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new mG(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(e){if(wG("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!DG(e.kernelSize,"number",1,3))throw new mG(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:rX(this.activation),useBias:this.useBias,biasInitializer:GU(this.biasInitializer),biasRegularizer:cX(this.biasRegularizer),activityRegularizer:cX(this.activityRegularizer),biasConstraint:SK(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class $X extends IX{constructor(e,t){super(e,t),this.kernel=null,$X.verifyArgs(t),this.filters=t.filters,FG(this.filters,"filters"),this.kernelInitializer=UU(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=NK(t.kernelConstraint),this.kernelRegularizer=hX(t.kernelRegularizer)}build(e){e=JU(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new mG(`The channel dimension of the input should be defined. Found ${e[t]}`);const n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return o_((()=>{let t;e=XU(e);const n=null==this.bias?null:this.bias.read(),r=MG(this.activation.getClassName());if(null!=r&&2===this.rank)t=EX(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=SX(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=EX(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new gG("convolutions greater than 3D are not implemented yet.");t=NX(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t}))}computeOutputShape(e){e=JU(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let o=0;o<n.length;++o){const e=wX(n[o],this.kernelSize[o],this.padding,this.strides[o],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[o]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:GU(this.kernelInitializer),kernelRegularizer:cX(this.kernelRegularizer),kernelConstraint:SK(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new mG(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class TX extends $X{constructor(e){super(2,e),TX.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!DG(e.kernelSize,"number",1,2))throw new mG(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}TX.className="Conv2D",lM(TX);class AX extends $X{constructor(e){super(3,e),AX.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new mG(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}AX.className="Conv3D",lM(AX);class OX extends TX{constructor(e){if(super(e),this.inputSpec=[new nK({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new mG(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(4!==(e=JU(e)).length)throw new mG("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new mG("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new nK({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return o_((()=>{let t=XU(e);if(4!==t.shape.length)throw new mG(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,r=n[0];let o,a;"channelsFirst"===this.dataFormat?(o=2,a=3):(o=1,a=2);const i=n[o],s=n[a],l=this.kernelSize[0],u=this.kernelSize[1],c=this.strides[0],d=this.strides[1],h=[r,xX(i,c,l,this.padding),xX(s,d,u,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=rB(t,[0,2,3,1]));let p=Dz(t,this.kernel.read(),h,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(p=rB(p,[0,3,1,2])),null!=this.bias&&(p=kU(p,this.bias.read(),this.dataFormat)),null!=this.activation&&(p=this.activation.apply(p)),p}))}computeOutputShape(e){const t=(e=JU(e)).slice();let n,r,o;"channelsFirst"===this.dataFormat?(n=1,r=2,o=3):(n=3,r=1,o=2);const a=this.kernelSize[0],i=this.kernelSize[1],s=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[r]=xX(t[r],s,a,this.padding),t[o]=xX(t[o],l,i,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}OX.className="Conv2DTranspose",lM(OX);class RX extends AX{constructor(e){if(super(e),this.inputSpec=[new nK({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new mG(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(5!==(e=JU(e)).length)throw new mG("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new mG("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new nK({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return o_((()=>{let t=XU(e);if(5!==t.shape.length)throw new mG(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,r=n[0];let o,a,i;"channelsFirst"===this.dataFormat?(i=2,o=3,a=4):(i=1,o=2,a=3);const s=n[i],l=n[o],u=n[a],c=this.kernelSize[0],d=this.kernelSize[1],h=this.kernelSize[2],p=this.strides[0],f=this.strides[1],m=this.strides[2],g=[r,xX(s,p,c,this.padding),xX(l,f,d,this.padding),xX(u,m,h,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=rB(t,[0,2,3,4,1]));let v=Mz(t,this.kernel.read(),g,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(v=rB(v,[0,4,1,2,3])),null!==this.bias&&(v=kU(v,this.bias.read(),this.dataFormat)),null!==this.activation&&(v=this.activation.apply(v)),v}))}computeOutputShape(e){const t=(e=JU(e)).slice();let n,r,o,a;"channelsFirst"===this.dataFormat?(n=1,r=2,o=3,a=4):(n=4,r=1,o=2,a=3);const i=this.kernelSize[0],s=this.kernelSize[1],l=this.kernelSize[2],u=this.strides[0],c=this.strides[1],d=this.strides[2];return t[n]=this.filters,t[r]=xX(t[r],u,i,this.padding),t[o]=xX(t[o],c,s,this.padding),t[a]=xX(t[a],d,l,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}RX.className="Conv3DTranspose",lM(RX);class PX extends $X{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new mG("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new mG("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new mG(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=UU(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=hX(t.depthwiseRegularizer),this.depthwiseConstraint=NK(t.depthwiseConstraint),this.pointwiseInitializer=UU(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=hX(t.pointwiseRegularizer),this.pointwiseConstraint=NK(t.pointwiseConstraint)}build(e){if((e=JU(e)).length<this.rank+2)throw new mG(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new mG(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);const n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),o=[];for(let i=0;i<this.rank;++i)o.push(1);o.push(n*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",o,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new nK({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return o_((()=>{let t;if(e=XU(e),1===this.rank)throw new gG("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=rB(e,[0,2,3,1])),t=ML(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=kU(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=rB(t,[0,3,1,2])),t}))}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=GU(this.depthwiseInitializer),e.pointwiseInitializer=GU(this.pointwiseInitializer),e.depthwiseRegularizer=cX(this.depthwiseRegularizer),e.pointwiseRegularizer=cX(this.pointwiseRegularizer),e.depthwiseConstraint=SK(this.depthwiseConstraint),e.pointwiseConstraint=SK(this.pointwiseConstraint),e}}PX.className="SeparableConv";class DX extends PX{constructor(e){super(2,e)}}DX.className="SeparableConv2D",lM(DX);class FX extends $X{constructor(e){super(1,e),FX.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!DG(e.kernelSize,"number",1,1))throw new mG(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}FX.className="Conv1D",lM(FX);class _X extends sK{constructor(e){super(e),"number"===typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return o_((()=>{if(e=XU(e),"channelsLast"===this.dataFormat){const t=pU(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return pU(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=pU(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return pU(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}}))}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}_X.className="Cropping2D",lM(_X);class MX extends sK{constructor(e){var t;super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,qG(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,t=this.interpolation,PG(VG,"InterpolationFormat",t)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return o_((()=>{let t=XU(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=rB(t,[0,2,3,1]);const e=this.size[0]*n[2],r=this.size[1]*n[3],o="nearest"===this.interpolation?pj.resizeNearestNeighbor(t,[e,r]):pj.resizeBilinear(t,[e,r]);return rB(o,[0,3,1,2])}{const e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?pj.resizeNearestNeighbor(t,[e,r]):pj.resizeBilinear(t,[e,r])}}))}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}MX.className="UpSampling2D",lM(MX);class zX extends IX{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=UU(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=NK(e.depthwiseConstraint),this.depthwiseRegularizer=hX(e.depthwiseRegularizer)}build(e){if((e=JU(e)).length<4)throw new mG(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new mG(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);const n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return o_((()=>{let t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return o_((()=>{null==o&&(o="channelsLast"),qG(o);let i=kX(e,o);if(4!==e.rank)throw new mG(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(4!==t.rank)throw new mG(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return i=Lz(i,t,n,"same"===r?"same":"valid","NHWC",a),"channelsFirst"===o&&(i=rB(i,[0,3,1,2])),i}))}(e=XU(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=kU(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t}))}computeOutputShape(e){e=JU(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,o=wX(t,this.kernelSize[0],this.padding,this.strides[0]),a=wX(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,o,a]:[e[0],o,a,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=GU(this.depthwiseInitializer),e.depthwiseRegularizer=cX(this.depthwiseRegularizer),e.depthwiseConstraint=SK(this.depthwiseRegularizer),e}}function LX(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new mG("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function o(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=o(t),constants:n=o(n)}}function BX(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return o_((()=>{const l=t.shape.length;if(l<3)throw new mG(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(iU(2,l));if(t=rB(t,u),null!=a)throw new gG("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=o&&(o=U_(U_(o,"bool"),"float32"),o.rank===l-1&&(o=Wz(o,-1)),o=rB(o,u)),r&&(t=FL(t,0),null!=o&&(o=FL(o,0)));const c=[];let d,h=n;const p=t.shape[0],f=ZL(t);let m,g;null!=o&&(m=ZL(o));for(let t=0;t<p;++t){const n=f[t],r=o_((()=>e(n,h)));if(null==o)d=r[0],h=r[1];else{const e=o_((()=>{const e=m[t],n=fM(EL(e),e),o=X_(Q_(r[0],e),Q_(h[0],n)),a=h.map(((t,o)=>X_(Q_(r[1][o],e),Q_(t,n))));return{output:o,newStates:a}}));d=e.output,h=e.newStates}s&&c.push(d)}if(s){g=qL(c,1)}return[d,g,h]}))}zX.className="DepthwiseConv2D",lM(zX);class jX extends sK{constructor(e){let t;if(super(e),null==e.cell)throw new mG("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new XX({cells:e.cell}):e.cell,null==t.stateSize)throw new mG("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new nK({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return iU(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((e=>null))}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){KU(e)&&(e=e[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let r;if(r=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const r of t)n.push([e[0],r]);return[r].concat(n)}return r}computeMask(e,t){return o_((()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map((e=>null));return[e].concat(t)}return e}))}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new gG("Constants support is not implemented in RNN yet.");KU(e)&&(e=e[0]);const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new nK({shape:[t,null,...n]});const r=[e[0]].concat(e.slice(2));let o;if(this.cell.build(r),o=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!_A(this.stateSpec.map((e=>e.shape[e.shape.length-1])),o))throw new mG(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=o.map((e=>new nK({shape:[null,e]})));this.stateful&&this.resetStates()}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o_((()=>{if(!this.stateful)throw new pG("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new mG("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>CL([n,e]))):this.states_=[CL([n,this.cell.stateSize])];else if(null==e)a_(this.states_),null!=this.keptStates&&(a_(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>CL([n,e]))):this.states_[0]=CL([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new mG(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);!0===t?this.keptStates.push(this.states_.slice()):a_(this.states_);for(let t=0;t<this.states_.length;++t){const r=e[t],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,a=[n,o];if(!_A(r.shape,a))throw new mG(`State ${t} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${r.shape}`);this.states_[t]=r}}this.states_=this.states_.map((e=>i_(e.clone())))}))}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const o=LX(e,n,r,this.numConstants);e=o.inputs,n=o.initialState,r=o.constants;let a=[],i=[];if(null!=n){t.initialState=n,a=a.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new nK({shape:e.shape}));i=i.concat(this.stateSpec)}null!=r&&(t.constants=r,a=a.concat(r),this.numConstants=r.length);if(a[0]instanceof rK){const n=[e].concat(a),r=this.inputSpec.concat(i),o=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=o,s}return super.apply(e,t)}call(e,t){return o_((()=>{const n=null==t?null:t.mask,r=null==t?null:t.training;let o=null==t?null:t.initialState;e=XU(e),null==o&&(o=this.stateful?this.states_:this.getInitialState(e));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(o.length!==a)throw new mG(`RNN Layer has ${a} state(s) but was passed ${o.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const i={training:r},s=BX(((e,t)=>{const n=this.cell.call([e].concat(t),i);return[n[0],n.slice(1)]}),e,o,this.goBackwards,n,null,this.unroll,this.returnSequences),l=s[0],u=s[1],c=s[2];this.stateful&&this.resetStates(c,r);const d=this.returnSequences?u:l;return this.returnState?[d].concat(c):d}))}getInitialState(e){return o_((()=>{let t=CL(e.shape);return t=tL(t,[1,2]),t=cU(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map((e=>e>1?gU(t,[1,e]):t)):this.cell.stateSize>1?[gU(t,[1,this.cell.stateSize])]:[t]}))}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===jX.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=zK(t.cell,n);return new e(Object.assign(t,{cell:r}))}}jX.className="RNN",lM(jX);class HX extends sK{}class VX extends HX{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,FG(this.units,"units"),this.activation=aX(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=UU(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=UU(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=UU(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=hX(e.kernelRegularizer),this.recurrentRegularizer=hX(e.recurrentRegularizer),this.biasRegularizer=hX(e.biasRegularizer),this.kernelConstraint=NK(e.kernelConstraint),this.recurrentConstraint=NK(e.recurrentConstraint),this.biasConstraint=NK(e.biasConstraint),this.dropout=oU([1,aU([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=oU([1,aU([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=JU(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return o_((()=>{if(2!==e.length)throw new mG(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let n=e[1];e=e[0];const r=null!=t.training&&t.training;let o;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=JX({ones:()=>EL(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=JX({ones:()=>EL(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,i=this.recurrentDropoutMask;o=bU(null!=a?Q_(e,a):e,this.kernel.read()),null!=this.bias&&(o=kU(o,this.bias.read())),null!=i&&(n=Q_(n,i));let s=X_(o,bU(n,this.recurrentKernel.read()));return null!=this.activation&&(s=this.activation.apply(s)),[s,s]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:rX(this.activation),useBias:this.useBias,kernelInitializer:GU(this.kernelInitializer),recurrentInitializer:GU(this.recurrentInitializer),biasInitializer:GU(this.biasInitializer),kernelRegularizer:cX(this.kernelRegularizer),recurrentRegularizer:cX(this.recurrentRegularizer),biasRegularizer:cX(this.biasRegularizer),activityRegularizer:cX(this.activityRegularizer),kernelConstraint:SK(this.kernelConstraint),recurrentConstraint:SK(this.recurrentConstraint),biasConstraint:SK(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}VX.className="SimpleRNNCell",lM(VX);class WX extends jX{constructor(e){e.cell=new VX(e),super(e)}call(e,t){return o_((()=>{null!=this.cell.dropoutMask&&(a_(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(a_(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,o=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:o})}))}static fromConfig(e,t){return new e(t)}}WX.className="SimpleRNN",lM(WX);class GX extends HX{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new mG("GRUCell does not support reset_after parameter set to true.");this.units=e.units,FG(this.units,"units"),this.activation=aX(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=aX(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=UU(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=UU(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=UU(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=hX(e.kernelRegularizer),this.recurrentRegularizer=hX(e.recurrentRegularizer),this.biasRegularizer=hX(e.biasRegularizer),this.kernelConstraint=NK(e.kernelConstraint),this.recurrentConstraint=NK(e.recurrentConstraint),this.biasConstraint=NK(e.biasConstraint),this.dropout=oU([1,aU([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=oU([1,aU([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){const t=(e=JU(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return o_((()=>{if(2!==e.length)throw new mG(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const n=null!=t.training&&t.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=JX({ones:()=>EL(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=JX({ones:()=>EL(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let i,s,l;0<this.dropout&&this.dropout<1&&(e=Q_(e,o[0]));let u=bU(e,this.kernel.read());this.useBias&&(u=kU(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=Q_(r,a[0]));const c=this.recurrentKernel.read(),[d,h]=UL(c,[2*this.units,this.units],c.rank-1),p=bU(r,d),[f,m,g]=UL(u,3,u.rank-1),[v,b]=UL(p,2,p.rank-1);i=this.recurrentActivation.apply(X_(f,v)),s=this.recurrentActivation.apply(X_(m,b));const y=bU(Q_(s,r),h);l=this.activation.apply(X_(g,y));const w=X_(Q_(i,r),Q_(X_(1,wL(i)),l));return[w,w]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:rX(this.activation),recurrentActivation:rX(this.recurrentActivation),useBias:this.useBias,kernelInitializer:GU(this.kernelInitializer),recurrentInitializer:GU(this.recurrentInitializer),biasInitializer:GU(this.biasInitializer),kernelRegularizer:cX(this.kernelRegularizer),recurrentRegularizer:cX(this.recurrentRegularizer),biasRegularizer:cX(this.biasRegularizer),activityRegularizer:cX(this.activityRegularizer),kernelConstraint:SK(this.kernelConstraint),recurrentConstraint:SK(this.recurrentConstraint),biasConstraint:SK(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}GX.className="GRUCell",lM(GX);class UX extends jX{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new GX(e),super(e)}call(e,t){return o_((()=>{null!=this.cell.dropoutMask&&(a_(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(a_(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,o=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:o})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}UX.className="GRU",lM(UX);class KX extends HX{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,FG(this.units,"units"),this.activation=aX(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=aX(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=UU(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=UU(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=UU(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=hX(e.kernelRegularizer),this.recurrentRegularizer=hX(e.recurrentRegularizer),this.biasRegularizer=hX(e.biasRegularizer),this.kernelConstraint=NK(e.kernelConstraint),this.recurrentConstraint=NK(e.recurrentConstraint),this.biasConstraint=NK(e.biasConstraint),this.dropout=oU([1,aU([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=oU([1,aU([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;const n=(e=JU(e))[e.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;r=new((t=class extends IU{apply(t,r){const o=e.apply([n]),a=(new TU).apply([n]),i=e.apply([2*n]);return mU(mU(o,a),i)}}).className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return o_((()=>{const n=null!=t.training&&t.training;if(3!==e.length)throw new mG(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1];const o=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=JX({ones:()=>EL(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=JX({ones:()=>EL(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,i=this.recurrentDropoutMask;let s,l,u,c;0<this.dropout&&this.dropout<1&&(e=Q_(e,a[0]));let d=bU(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=Q_(r,i[0])),d=X_(d,bU(r,this.recurrentKernel.read())),this.useBias&&(d=kU(d,this.bias.read()));const[h,p,f,m]=UL(d,4,d.rank-1);s=this.recurrentActivation.apply(h),l=this.recurrentActivation.apply(p),u=X_(Q_(l,o),Q_(s,this.activation.apply(f))),c=this.recurrentActivation.apply(m);const g=Q_(c,this.activation.apply(u));return[g,g,u]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:rX(this.activation),recurrentActivation:rX(this.recurrentActivation),useBias:this.useBias,kernelInitializer:GU(this.kernelInitializer),recurrentInitializer:GU(this.recurrentInitializer),biasInitializer:GU(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:cX(this.kernelRegularizer),recurrentRegularizer:cX(this.recurrentRegularizer),biasRegularizer:cX(this.biasRegularizer),activityRegularizer:cX(this.activityRegularizer),kernelConstraint:SK(this.kernelConstraint),recurrentConstraint:SK(this.recurrentConstraint),biasConstraint:SK(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}KX.className="LSTMCell",lM(KX);class qX extends jX{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new KX(e),super(e)}call(e,t){return o_((()=>{null!=this.cell.dropoutMask&&(a_(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(a_(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,o=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:o})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}qX.className="LSTM",lM(qX);class XX extends HX{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return o_((()=>{let n=e.slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();const o=[];let a;for(let i=0;i<this.cells.length;++i){const s=this.cells[i];n=r[i],a=0===i?[e[0]].concat(n):[a[0]].concat(n),a=s.call(a,t),o.push(a.slice(1))}n=[];for(const e of o.slice().reverse())n.push(...e);return[a[0]].concat(n)}))}build(e){let t;KU(e)&&(e=e[0]),this.cells.forEach(((n,r)=>{QG(`RNNCell_${r}`,(()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}getConfig(){const e=super.getConfig(),t={cells:this.cells.map((e=>({className:e.getClassName(),config:e.getConfig()})))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[];for(const o of t.cells)r.push(zK(o,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return eK(e)}setWeights(e){const t=[];for(const n of this.cells){const r=n.weights.length,o=e.splice(r);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],o[e]])}tK(t)}}function JX(e){const{ones:t,rate:n,training:r=!1,count:o=1,dropoutFunc:a}=e,i=()=>null!=a?a(t(),n):CU(t(),n),s=()=>SU(i,t,r);if(!o||o<=1)return i_(s().clone());return Array(o).fill(void 0).map(s).map((e=>i_(e.clone())))}XX.className="StackedRNNCells",lM(XX);var YX=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};class QX extends jX{constructor(e){if(e.unroll)throw new gG("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new gG("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new nK({ndim:5})]}call(e,t){return o_((()=>{if(null!=this.cell.dropoutMask&&(a_(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(a_(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new mG("ConvRNN2D cell does not support constants");const n=null==t?null:t.mask,r=null==t?null:t.training,o=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:o})}))}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return o_((()=>{const{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),o=CL([r[0],...r.slice(2)]);return Array.isArray(t)?Array(t.length).fill(o):[o]}))}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o_((()=>{if(!this.stateful)throw new pG("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),o=[r[0],...r.slice(2)];if(null==n[0])throw new mG("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>CL(o))):this.states_=[CL(o)];else if(null==e)a_(this.states_),null!=this.keptStates&&(a_(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>CL(o))):this.states_[0]=CL(o);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new mG(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):a_(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],r=o;if(!_A(n.shape,r))throw new mG(`State ${t} is incompatible with layer ${this.name}: expected shape=${r}, received shape=${n.shape}`);this.states_[t]=n}}this.states_=this.states_.map((e=>i_(e.clone())))}))}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:r,padding:o,strides:a,dilationRate:i}=this.cell,s="channelsFirst"===t,l=e[s?3:2],u=e[s?4:3],c=wX(l,r[0],o,a[0],i[0]),d=wX(u,r[1],o,a[1],i[1]);return[...e.slice(0,2),...s?[n,c,d]:[c,d,n]]}}QX.className="ConvRNN2D";class ZX extends KX{constructor(e){const{filters:t,kernelSize:n,strides:r,padding:o,dataFormat:a,dilationRate:i}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,FG(this.filters,"filters"),this.kernelSize=yX(n,2,"kernelSize"),this.kernelSize.forEach((e=>FG(e,"kernelSize"))),this.strides=yX(r||1,2,"strides"),this.strides.forEach((e=>FG(e,"strides"))),this.padding=o||"valid",XG(this.padding),this.dataFormat=a||"channelsLast",qG(this.dataFormat),this.dilationRate=yX(i||1,2,"dilationRate"),this.dilationRate.forEach((e=>FG(e,"dilationRate")))}build(e){var t;e=JU(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new mG(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],o=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;e=new((t=class extends IU{apply(e,t){return fU([n.apply([r]),SL([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return o_((()=>{if(3!==e.length)throw new mG(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const n=t.training||!1,r=e[0],o=e[1],a=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=JX({ones:()=>EL(r),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,s=(e,t,n)=>t&&t[n]?Q_(t[n],e):e;let l=s(r,i,0),u=s(r,i,1),c=s(r,i,2),d=s(r,i,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=JX({ones:()=>EL(o),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const h=this.recurrentDropoutMask;let p=s(o,h,0),f=s(o,h,1),m=s(o,h,2),g=s(o,h,3);const[v,b,y,w]=UL(this.kernel.read(),4,3),[x,k,C,S]=this.useBias?UL(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,v,x,this.padding),u=this.inputConv(u,b,k,this.padding),c=this.inputConv(c,y,C,this.padding),d=this.inputConv(d,w,S,this.padding);const[E,N,I,$]=UL(this.recurrentKernel.read(),4,3);p=this.recurrentConv(p,E),f=this.recurrentConv(f,N),m=this.recurrentConv(m,I),g=this.recurrentConv(g,$);const T=this.recurrentActivation.apply(X_(l,p)),A=this.recurrentActivation.apply(X_(u,f)),O=X_(Q_(A,a),Q_(T,this.activation.apply(X_(c,m)))),R=Q_(this.recurrentActivation.apply(X_(d,g)),this.activation.apply(O));return[R,R,O]}))}getConfig(){const e=super.getConfig(),{units:t}=e,n=YX(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,t,n,r){const o=Oz(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?kU(o,n,this.dataFormat):o}recurrentConv(e,t){return Oz(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}ZX.className="ConvLSTM2DCell",lM(ZX);class eJ extends QX{constructor(e){const t=new ZX(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}eJ.className="ConvLSTM2D",lM(eJ);class tJ extends sK{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}call(e,t){return o_((()=>{this.invokeCallHook(e,t);const n=XU(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,r=this.getNoiseShape(n);return SU((()=>CU(n,this.rate,r,this.seed)),(()=>n),e)}return e}))}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}tJ.className="Dropout",lM(tJ);class nJ extends tJ{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}nJ.className="SpatialDropout1D",lM(nJ);class rJ extends sK{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,FG(this.units,"units"),this.activation=aX(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=UU(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=UU(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=NK(e.kernelConstraint),this.biasConstraint=NK(e.biasConstraint),this.kernelRegularizer=hX(e.kernelRegularizer),this.biasRegularizer=hX(e.biasRegularizer),this.activityRegularizer=hX(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=JU(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=JU(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return o_((()=>{this.invokeCallHook(e,t);const n=XU(e),r=MG(this.activation.getClassName());let o;return null!=r?o=bU(n,this.kernel.read(),r,this.bias?this.bias.read():null):(o=bU(n,this.kernel.read()),null!=this.bias&&(o=kU(o,this.bias.read())),null!=this.activation&&(o=this.activation.apply(o))),o}))}getConfig(){const e={units:this.units,activation:rX(this.activation),useBias:this.useBias,kernelInitializer:GU(this.kernelInitializer),biasInitializer:GU(this.biasInitializer),kernelRegularizer:cX(this.kernelRegularizer),biasRegularizer:cX(this.biasRegularizer),activityRegularizer:cX(this.activityRegularizer),kernelConstraint:SK(this.kernelConstraint),biasConstraint:SK(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}rJ.className="Dense",lM(rJ);class oJ extends sK{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=JU(e);for(const t of e.slice(1))if(null==t)throw new mG(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],rU(e,1)]}call(e,t){return o_((()=>{this.invokeCallHook(e,t);let n=XU(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=rB(n,e)}return function(e){if(e.rank<=1)throw new mG(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],rU(e.shape,1)];return vz(e,t)}(n)}))}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}oJ.className="Flatten",lM(oJ);class aJ extends sK{constructor(e){super(e),this.supportsMasking=!0,this.activation=aX(e.activation)}call(e,t){return o_((()=>{this.invokeCallHook(e,t);const n=XU(e);return this.activation.apply(n)}))}getConfig(){const e={activation:rX(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}aJ.className="Activation",lM(aJ);class iJ extends sK{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return o_((()=>function(e,t){return o_((()=>{if(2!==e.shape.length)throw new mG(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);return gU(cU(e,1),[1,t,1])}))}(e=XU(e),this.n)))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}iJ.className="RepeatVector",lM(iJ);class sJ extends sK{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",r=t.slice();let o=1,a=null;for(let s=0;s<r.length;++s){const e=r[s];if(this.isUnknown(e)){if(null!==a)throw new mG("Can only specifiy one unknown dimension.");a=s}else o*=e}const i=rU(e);if(null!==a){if(0===o||i%o!==0)throw new mG(n);r[a]=i/o}else if(i!==o)throw new mG(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return o_((()=>{this.invokeCallHook(e,t);const n=XU(e),r=n.shape,o=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return vz(n,o)}))}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}sJ.className="Reshape",lM(sJ);class lJ extends sK{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const t=iU(1,e.dims.length+1);if(!_A(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new nK({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=JU(e)).slice();return this.dims.forEach(((n,r)=>{t[r+1]=e[n]})),t}call(e,t){return rB(XU(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}lJ.className="Permute",lM(lJ);class uJ extends sK{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=XU(e);return ez(xL(n,this.maskValue),-1)}call(e,t){return o_((()=>{this.invokeCallHook(e,t);const n=XU(e),r=ez(xL(n,this.maskValue),-1,!0);return Q_(n,U_(r,n.dtype))}))}}uJ.className="Masking",lM(uJ);class cJ extends sK{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(CG(e.inputLength))}this.inputDim=e.inputDim,FG(this.inputDim,"inputDim"),this.outputDim=e.outputDim,FG(this.outputDim,"outputDim"),this.embeddingsInitializer=UU(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=hX(e.embeddingsRegularizer),this.activityRegularizer=hX(e.activityRegularizer),this.embeddingsConstraint=NK(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return o_((()=>this.maskZero?(e=XU(e),xL(e,tM(e))):null))}computeOutputShape(e){if(e=JU(e),null==this.inputLength)return[...e,this.outputDim];const t=CG(this.inputLength);if(t.length!==e.length-1)throw new mG(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let r=0;r<t.length;++r){const o=t[r],a=e[r+1];if(null!=o&&null!=a&&o!==a)throw new mG(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==o&&(t[n]=a),n++}}return[e[0],...t,this.outputDim]}call(e,t){return o_((()=>{this.invokeCallHook(e,t);let n=XU(e);"int32"!==n.dtype&&(n=uU(n,"int32"));const r=yU(this.embeddings.read(),vz(n,[n.size]));return vz(r,JU(this.computeOutputShape(n.shape)))}))}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:GU(this.embeddingsInitializer),embeddingsRegularizer:cX(this.embeddingsRegularizer),activityRegularizer:cX(this.activityRegularizer),embeddingsConstraint:SK(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}cJ.className="Embedding",lM(cJ);class dJ extends sK{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new gG}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const o=e[e.length-t.length+r],a=t[r];if(null==o||null==a||o<0||a<0)n.push(null);else if(1===o)n.push(a);else if(1===a)n.push(o);else{if(o!==a)throw new mG("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(o)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[JU(e)]),e.length<2)throw new mG(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(const o of e)null!=o&&null!==o[0]&&t.push(o[0]);if(t=OG(t),t.length>1)throw new mG(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=null==e[0]?null:e[0].slice(1);for(let o=1;o<e.length;++o){const t=null==e[o]?null:e[o].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}const r=e.map((e=>e.length));-1===e.indexOf(null)&&1===OG(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return o_((()=>{if(this.reshapeRequired){const t=[],n=e.map((e=>e.rank));if(-1===n.indexOf(null)){const r=aU(n);for(let n of e){const e=n.rank;for(let t=0;t<r-e;++t)n=cU(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const a of e){const e=a.rank;if(null==e){const e=a.shape,r=e[0],o=e.slice(1).concat([r]);let i=vz(a,[r].concat(rU(e.slice(1))));i=rB(i,[1,0]),i=vz(i,o),t.push(i),n=!0}else if(e>1){const r=iU(1,e).concat([0]);t.push(rB(a,r)),n=!0}else t.push(a)}let r=this.mergeFunction(t);const o=r.rank;if(n)if(null==o){const e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=vz(rB(vz(r,[-1,t]),[1,0]),n)}else if(o>1){const e=[o-1].concat(iU(0,o-1));r=rB(r,e)}return r}}return this.mergeFunction(e)}))}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){const n=null==e[r]?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(const r of e)null!=r&&null!==r[0]&&n.push(r[0]);return n=OG(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return o_((()=>{if(null==t)return null;if(!Array.isArray(t))throw new mG("`mask` should be an Array");if(!Array.isArray(e))throw new mG("`inputs` should be an Array");if(t.length!==e.length)throw new mG(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every((e=>null==e)))return null;t=t.map((e=>null==e?e:Wz(e,0)));let n=t[0];for(let e=1;e<t.length-1;++e)n=hL(n,t[e]);return n}))}}class hJ extends dJ{constructor(e){super(e)}mergeFunction(e){return o_((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=X_(t,e[n]);return t}))}}hJ.className="Add",lM(hJ);class pJ extends dJ{constructor(e){super(e)}mergeFunction(e){return o_((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Q_(t,e[n]);return t}))}}pJ.className="Multiply",lM(pJ);class fJ extends dJ{constructor(e){super(e)}mergeFunction(e){return o_((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=X_(t,e[n]);return Q_(1/e.length,t)}))}}fJ.className="Average",lM(fJ);class mJ extends dJ{constructor(e){super(e)}mergeFunction(e){return o_((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=wM(t,e[n]);return t}))}}mJ.className="Maximum",lM(mJ);class gJ extends dJ{constructor(e){super(e)}mergeFunction(e){return o_((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=bL(t,e[n]);return t}))}}gJ.className="Minimum",lM(gJ);class vJ extends dJ{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new mG("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(const r of e)if(null!=r){t=!1;break}if(t)return;const n=[];for(let r=0;r<e.length;++r){const t=e[r].slice();t.splice(this.axis,1);let o=!1;for(const e of n)if(_A(e,t)){o=!0;break}o||n.push(t)}if(n.length>1)throw new mG("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return o_((()=>fU(e,this.axis)))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new mG("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const o of t.slice(1)){if(null==n[r]||null==o[r]){n[r]=null;break}n[r]+=o[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new mG("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new mG("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new mG(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return o_((()=>{let n=!0;if(t.forEach((e=>{null==e||(n=!1)})),n)return null;const r=[];for(let a=0;a<e.length;++a)null==t[a]?r.push(U_(EL(e[a]),"bool")):t[a].rank<e[a].rank?r.push(Wz(t[a],-1)):r.push(t[a]);const o=Nz(r,this.axis);return ZM(o,-1,!1)}))}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function bJ(e,t){for(;e<0;)e+=t;return e}vJ.className="Concatenate",lM(vJ);class yJ extends dJ{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){RA(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new gG("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new mG(`Dimension incompatibility: ${t[r[0]]} !== ${n[r[1]]}`)}mergeFunction(e){if(2!==e.length)throw new mG(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map(((t,n)=>bJ(t,e[n].shape.length))):[bJ(this.axes,n.shape.length),bJ(this.axes,r.shape.length)],this.normalize&&(n=LK(n,t[0]),r=LK(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new gG("batchDot is not implemented for tensors of 4D or higher rank yet");if(RA(e.shape.length>=2,(()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`)),RA(e.shape.length>=2,(()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`)),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new gG("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,o=t.shape.length;null==n&&(n=[r-1,o-2]);const a=n;return o_((()=>{let n,i;if(r>o){n=r-o;const e=[];for(let t=0;t<n;++t)e.push(1);t=vz(t,t.shape.concat(e))}else if(o>r){n=o-r;const t=[];for(let e=0;e<n;++e)t.push(1);e=vz(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)i=a[0]===a[1]?tL(Q_(e,t),a[0]):tL(Q_(rB(e,[1,0]),t),a[1]);else{const n=a[0]!==e.shape.length-1,r=a[1]===t.shape.length-1;i=pL(e,t,n,r)}if(n>0){let e;e=r>o?r+o-3:r-1;const t=[];for(let r=e;r<e+n;++r)t.push(r);i=KL(i,t)}return 1===i.shape.length&&(i=Wz(i,1)),i}))}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[bJ(this.axes,e.length),bJ(this.axes,t.length)],n}computeOutputShape(e){RA(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new gG("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const o=t.concat(n);return 1===o.length&&o.push(1),o}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}yJ.className="Dot",lM(yJ);class wJ extends sK{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return o_((()=>{this.invokeCallHook(e,t);const n=XU(e);return SU((()=>X_(vU(n.shape,0,this.stddev),n)),(()=>n),t.training||!1)}))}}wJ.className="GaussianNoise",lM(wJ);class xJ extends sK{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return o_((()=>{this.invokeCallHook(e,t);const n=XU(e);if(this.rate>0&&this.rate<1){return SU((()=>{const e=Math.sqrt(this.rate/(1-this.rate));return Q_(n,vU(n.shape,1,e))}),(()=>n),t.training||!1)}return n}))}}xJ.className="GaussianDropout",lM(xJ);class kJ extends sK{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||XU(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return o_((()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),r=()=>{const t=XU(e),r=-1.7580993408473766;let o=Jz(RL(n),this.rate);o=uU(o,"float32");const a=((1-this.rate)*(1+this.rate*r**2))**-.5,i=-a*r*this.rate,s=X_(Q_(t,o),Q_(X_(o,-1),r));return X_(Q_(s,a),i)};return SU(r,(()=>XU(e)),t.training||!1)}return e}))}}function CJ(e,t,n,r,o){let a,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)a=xz(e,t,n,r,o,i);else if(3===e.rank)a=kz(e,t,n,r,o,i);else{if(4!==e.rank)throw new gG(`batchNormalization is not implemented for array of rank ${e.rank} yet`);a=Cz(e,t,n,r,o,i)}return a}function SJ(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return _A(r.slice().sort(),iU(0,e.rank-1))?function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return o_((()=>{const a=yL(e,r),i=a.mean,s=a.variance;return[CJ(e,i,s,n,t,o),i,s]}))}(e,t,n,r,o):function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return o_((()=>{const a=yL(e,r),i=a.mean,s=a.variance,l=[];for(const t of iU(0,e.rank))-1!==r.indexOf(t)?l.push(1):l.push(e.shape[t]);const u=vz(i,l),c=vz(s,l),d=null==t?null:vz(t,l),h=null==n?null:vz(n,l);return[CJ(e,u,c,h,d,o),i,s]}))}(e,t,n,r,o)}kJ.className="AlphaDropout",lM(kJ);class EJ extends sK{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=UU(e.betaInitializer||"zeros"),this.gammaInitializer=UU(e.gammaInitializer||"ones"),this.movingMeanInitializer=UU(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=UU(e.movingVarianceInitializer||"ones"),this.betaConstraint=NK(e.betaConstraint),this.gammaConstraint=NK(e.gammaConstraint),this.betaRegularizer=hX(e.betaRegularizer),this.gammaRegularizer=hX(e.gammaRegularizer)}build(e){e=JU(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new mG(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new nK({ndim:e.length,axes:{[t]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return o_((()=>{const n=null!=t.training&&t.training,r=XU(e),o=r.shape,a=o.length,i=iU(0,a),s=this.axis>=0?this.axis:this.axis+a;i.splice(s,1);const l=yG(1,a);l[s]=o[s];const u=i.slice();u.sort();const c=!_A(u,iU(0,a).slice(0,a-1));if(!n)return(()=>{if(c){const e=vz(this.movingMean.read(),l),t=vz(this.movingVariance.read(),l),n=this.center?vz(this.beta.read(),l):null,o=this.scale?vz(this.gamma.read(),l):null;return CJ(r,e,t,n,o,this.epsilon)}return CJ(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[d,h,p]=SJ(r,this.gamma.read(),this.beta.read(),i,this.epsilon),f=(e,t,n)=>{o_((()=>{const r=1-n,o=e.read(),a=Q_(fM(o,t),r);e.write(fM(o,a))}))};return(()=>{f(this.movingMean,h,this.momentum),f(this.movingVariance,p,this.momentum)})(),d}))}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:GU(this.betaInitializer),gammaInitializer:GU(this.gammaInitializer),movingMeanInitializer:GU(this.movingMeanInitializer),movingVarianceInitializer:GU(this.movingVarianceInitializer),betaRegularizer:cX(this.betaRegularizer),gammaRegularizer:cX(this.gammaRegularizer),betaConstraint:SK(this.betaConstraint),gammaConstraint:SK(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}EJ.className="BatchNormalization",lM(EJ);class NJ extends sK{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"===typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);for(const e of this.axis)if(!Number.isInteger(e))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=UU(e.betaInitializer||"zeros"),this.gammaInitializer=UU(e.gammaInitializer||"ones"),this.betaRegularizer=hX(e.betaRegularizer),this.gammaRegularizer=hX(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=JU(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(let o=0;o<this.axis.length;++o)this.axis[o]<0&&(this.axis[o]+=t);for(const o of this.axis)if(o<0||o>=t)throw new Error(`Invalid axis: ${o}`);if(this.axis.length!==OG(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const n=this.axis.map((t=>e[t])),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,t){const n=XU(e),r=n.shape,o=r.length;return o_((()=>{let{mean:e,variance:t}=yL(n,this.axis,!0);const a=yG(1,o);for(const n of this.axis)a[n]=r[n];const i=e=>null!=e&&e.shape.length!==o?vz(e,a):e;let s=this.scale?i(this.gamma.read()):null,l=this.center?i(this.beta.read()):null;const u=[],c=[];for(let n=0;n<o;++n)-1!==this.axis.indexOf(n)?(u.push(r[n]),c.push(1)):(u.push(1),c.push(r[n]));return e=Gz(e,u),t=Gz(t,u),null!=s&&(s=Gz(s,c)),null!=l&&(l=Gz(l,c)),CJ(n,e,t,l,s,this.epsilon)}))}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:GU(this.betaInitializer),gammaInitializer:GU(this.gammaInitializer),betaRegularizer:cX(this.betaRegularizer),gammaRegularizer:cX(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}NJ.className="LayerNormalization",lM(NJ);class IJ extends sK{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new mG(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,n;if("number"===typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new mG(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new mG(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new nK({ndim:4})]}computeOutputShape(e){let t,n;return e=JU(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return o_((()=>{return t=XU(e),n=this.padding,r=this.dataFormat,o_((()=>{if(4!==t.rank)throw new mG(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new mG("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==r&&(r="channelsLast"),"channelsLast"!==r&&"channelsFirst"!==r)throw new mG(`Unknown data format: ${r}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let e;return e="channelsFirst"===r?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],NL(t,e)}));var t,n,r}))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function $J(e,t,n,r,o,a){return o_((()=>{let i;qG(o),JG(a),XG(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==o&&(o="channelsLast"),null==a&&(a="max"),e=kX(e,o);const s="same"===r?"same":"valid";return i="max"===a?fL(e,t,n,s):bz(e,t,n,s),"channelsFirst"===o&&(i=rB(i,[0,3,1,2])),i}))}function TJ(e,t,n,r,o,a){return o_((()=>{let i;qG(o),JG(a),XG(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==o&&(o="channelsLast"),null==a&&(a="max"),e=CX(e,o);const s="same"===r?"same":"valid";return i="max"===a?mL(e,t,n,s):yz(e,t,n,s),"channelsFirst"===o&&(i=rB(i,[0,4,1,2,3])),i}))}IJ.className="ZeroPadding2D",lM(IJ);class AJ extends sK{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"===typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new mG(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);this.poolSize=e.poolSize}if(FG(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"===typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new mG(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);this.strides=e.strides}FG(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,XG(this.padding),this.inputSpec=[new nK({ndim:3})]}computeOutputShape(e){const t=wX((e=JU(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return o_((()=>{this.invokeCallHook(e,t),e=cU(XU(e),2);const n=this.poolingFunction(XU(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return KL(n,[2])}))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class OJ extends AJ{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return qG(o),XG(r),$J(e,t,n,r,o,"max")}}OJ.className="MaxPooling1D",lM(OJ);class RJ extends AJ{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return qG(o),XG(r),$J(e,t,n,r,o,"avg")}}RJ.className="AveragePooling1D",lM(RJ);class PJ extends sK{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new mG(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];FG(this.poolSize,"poolSize"),FG(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,qG(this.dataFormat),XG(this.padding),this.inputSpec=[new nK({ndim:4})]}computeOutputShape(e){e=JU(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=wX(t,this.poolSize[0],this.padding,this.strides[0]),n=wX(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return o_((()=>(this.invokeCallHook(e,t),this.poolingFunction(XU(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class DJ extends PJ{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return qG(o),XG(r),$J(e,t,n,r,o,"max")}}DJ.className="MaxPooling2D",lM(DJ);class FJ extends PJ{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return qG(o),XG(r),$J(e,t,n,r,o,"avg")}}FJ.className="AveragePooling2D",lM(FJ);class _J extends sK{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new mG(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];FG(this.poolSize,"poolSize"),FG(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,qG(this.dataFormat),XG(this.padding),this.inputSpec=[new nK({ndim:5})]}computeOutputShape(e){e=JU(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=wX(t,this.poolSize[0],this.padding,this.strides[0]),n=wX(n,this.poolSize[1],this.padding,this.strides[1]),r=wX(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return o_((()=>(this.invokeCallHook(e,t),this.poolingFunction(XU(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class MJ extends _J{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return qG(o),XG(r),TJ(e,t,n,r,o,"max")}}MJ.className="MaxPooling3D",lM(MJ);class zJ extends _J{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return qG(o),XG(r),TJ(e,t,n,r,o,"avg")}}zJ.className="AveragePooling3D",lM(zJ);class LJ extends sK{constructor(e){super(e),this.inputSpec=[new nK({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new gG}}class BJ extends LJ{constructor(e){super(e||{})}call(e,t){return o_((()=>{const t=XU(e);return gL(t,1)}))}}BJ.className="GlobalAveragePooling1D",lM(BJ);class jJ extends LJ{constructor(e){super(e||{})}call(e,t){return o_((()=>{const t=XU(e);return eL(t,1)}))}}jJ.className="GlobalMaxPooling1D",lM(jJ);class HJ extends sK{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,qG(this.dataFormat),this.inputSpec=[new nK({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new gG}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class VJ extends HJ{call(e,t){return o_((()=>{const t=XU(e);return"channelsLast"===this.dataFormat?gL(t,[1,2]):gL(t,[2,3])}))}}VJ.className="GlobalAveragePooling2D",lM(VJ);class WJ extends HJ{call(e,t){return o_((()=>{const t=XU(e);return"channelsLast"===this.dataFormat?eL(t,[1,2]):eL(t,[2,3])}))}}WJ.className="GlobalMaxPooling2D",lM(WJ);class GJ extends sK{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=zK(t.layer,n);delete t.layer;const o={layer:r};return Object.assign(o,t),new e(o)}}class UJ extends GJ{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=JU(e)).length<3)throw new mG(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=JU(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return o_((()=>BX(((e,n)=>[XU(this.layer.call(e,t)),[]]),e=XU(e),[],!1,null,null,!1,!0)[1]))}}UJ.className="TimeDistributed",lM(UJ);class KJ extends GJ{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=zK(n),t.goBackwards=!0!==t.goBackwards;const r={};var o;if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=zK(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,o=this.mergeMode,PG(UG,"BidirectionalMergeMode",o),e.weights)throw new gG("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,o=this.forwardLayer.computeOutputShape(e);return Array.isArray(o)&&Array.isArray(o[0])||(o=[o]),this.returnState?(r=o.slice(1),t=o[0]):t=o[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):kG(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const o=LX(e,n,r,this.numConstants);if(e=o.inputs,n=o.initialState,r=o.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);const a=[],i=[];if(null!=n){const e=n.length;if(e%2>0)throw new mG("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,a.push(...n);const r=n.map((e=>new nK({shape:e.shape})));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),i.push(...r)}if(null!=r)throw new gG("Support for constants in Bidirectional layers is not implemented yet.");const s=a[0]instanceof rK;for(const l of a)if(l instanceof rK!==s)throw new mG("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(s){const n=[e].concat(a),r=this.inputSpec.concat(i),o=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=o,s}return super.apply(e,t)}call(e,t){return o_((()=>{const n=t.initialState;let r,o,a,i;if(null==n)r=this.forwardLayer.call(e,t),o=this.backwardLayer.call(e,t);else{const a=n.slice(0,n.length/2),i=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:a})),o=this.backwardLayer.call(e,Object.assign(t,{initialState:i}))}return this.returnState&&(Array.isArray(r)&&(a=r.slice(1).concat(o.slice(1))),r=r[0],o=o[0]),this.returnSequences&&(o=FL(o,1)),"concat"===this.mergeMode?i=fU([r,o]):"sum"===this.mergeMode?i=X_(r,o):"ave"===this.mergeMode?i=Q_(.5,X_(r,o)):"mul"===this.mergeMode?i=Q_(r,o):null==this.mergeMode&&(i=[r,o]),this.returnState?null==this.mergeMode?i.concat(a):[i].concat(a):i}))}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){QG(this.forwardLayer.name,(()=>{this.forwardLayer.build(e)})),QG(this.backwardLayer.name,(()=>{this.backwardLayer.build(e)})),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map((e=>null));return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=zK(t.layer);if(delete t.layer,null!=t.numConstants)throw new gG("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r.layer=n,new e(r)}}KJ.className="Bidirectional",lM(KJ);class qJ extends sK{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return o_((()=>("float32"!==(e=XU(e)).dtype&&(e=uU(e,"float32")),X_(Q_(e,this.scale),this.offset))))}}qJ.className="Rescaling",lM(qJ);const{resizeBilinear:XJ,cropAndResize:JJ}=pj;class YJ extends sK{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,o,a,i,s){return o_((()=>{let l,u=!1;const c=[t/a,n/i,(r+t)/a,(o+n)/i],d=[];3===e.rank?(u=!0,l=qL([e])):l=e;for(let e=0;e<l.shape[0];e++)d.push(c);const h=e_(d,[d.length,4]),p=PL(0,d.length,1,"int32"),f=JJ(l,h,p,[r,o],"nearest");return uU(u?XU(ZL(f)):f,s)}))}upsize(e,t,n,r){return o_((()=>uU(XJ(e,[t,n]),r)))}call(e,t){return o_((()=>{const t=XU(e),n=t.dtype,r=t.shape,o=r[r.length-3],a=r[r.length-2];let i=0;o!==this.height&&(i=Math.floor((o-this.height)/2));let s=0;return a!==this.width&&(s=Math.floor((a-this.width)/2),0===s&&(s=1)),i>=0&&s>=0?this.centerCrop(t,i,s,this.height,this.width,o,a,n):this.upsize(e,this.height,this.width,n)}))}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=JU(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}YJ.className="CenterCrop",lM(YJ);class QJ extends sK{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return null==(e=JU(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return o_((()=>{let n;if("int32"!==(e=XU(e)).dtype&&(e=uU(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==this.outputMode)throw new mG(`countWeights is not used when outputMode !== count.\n              Received countWeights=${t.countWeights}`);n=XU(t.countWeights)}const r=eL(e),o=vL(e),a=Xz(this.numTokens,r).bufferSync().get(0),i=Jz(o,0).bufferSync().get(0);if(!a||!i)throw new mG(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return function(e,t,n,r){let o=XU(e);if("int32"!==o.dtype&&(o=uU(o,"int32")),"int"===t)return o;const a=o.shape;if(0===o.rank&&(o=Wz(o,-1)),"oneHot"===t&&1!==o.shape[o.shape.length-1]&&(o=Wz(o,-1)),o.rank>2)throw new mG(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${a} which would result in output rank ${o.rank}.`);const i=["multiHot","oneHot"].includes(t),s=o;let l;if(l=zz(s,"undefined"!==typeof r&&"count"===t?r:[],n,i),"tfIdf"!==t)return l;if(r)return Q_(l,r);throw new mG("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)}))}}QJ.className="CategoryEncoding",lM(QJ);const ZJ=new Set(["bilinear","nearest"]);class eY extends sK{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!ZJ.has(e.interpolation))throw new mG(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(e.cropToAspectRatio)}computeOutputShape(e){const t=(e=JU(e))[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return o_((()=>{const t=[this.height,this.width];if("bilinear"===this.interpolation)return pj.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return pj.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...ZJ]} are supported`)}))}}eY.className="Resizing",lM(eY);class tY{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}tY.className="RandomSeed";class nY extends sK{constructor(e){super(e),this.randomGenerator=new tY(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}nY.className="BaseRandomLayer";const rY=new Set(["bilinear","nearest"]);class oY extends nY{constructor(e){super(e);const{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new mG(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new mG(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new mG(`factor cannot have upper bound less than lower bound.\n        Got upper bound: ${this.widthUpper}.\n        Got lower bound: ${this.widthLower}\n      `);if(n){if(!rY.has(n))throw new mG(`Invalid interpolation parameter: ${n} is not implemented`);this.interpolation=n}}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=JU(e))[2];return[this.imgHeight,-1,t]}call(e,t){return o_((()=>{const t=XU(e);this.imgHeight=t.shape[t.shape.length-3];const n=t.shape[t.shape.length-2];this.widthFactor=RL([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*n;r=Math.round(r);const o=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return pj.resizeBilinear(e,o);case"nearest":return pj.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}\n          but only ${[...rY]} are supported`)}}))}}oY.className="RandomWidth",lM(oY);var aY,iY;hO().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(aY||(aY={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(iY||(iY={}));Error;new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function sY(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const o=t(e);if(o.recurse&&null!==o.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(o.recurse){if(dY(e)){const o=Array.isArray(e)?[]:{};r.add(e);for(const a in e){const i=sY(e[a],t,n,r);o[a]=i}return r.delete(e),e.__proto__&&(o.__proto__=e.__proto__),o}throw new Error(`Can't recurse into non-iterable type: ${e}`)}return n.set(e,o.value),o.value}function lY(e){return uY(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:cY)}function uY(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");const o=t(e);if(o.recurse&&null!==o.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(o.recurse){if(dY(r)){const o=Array.isArray(r)?[]:{};n.add(r);for(const a in r){const r=uY(e.map((e=>e[a])),t,n);o[a]=r}return n.delete(r),o}throw new Error(`Can't recurse into non-iterable type: ${r}`)}return o.value}function cY(e){return null===e?null:dY(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function dY(e){let t=!1;if(hO().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:r}=n(222);t=e instanceof r}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof yF)&&!(e instanceof Promise)&&!t)}function hY(e){return function(e,t){return sY(e,t)}(e,pY)}function pY(e){return e instanceof yF?{value:e.clone(),recurse:!1}:dY(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class fY{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class mY extends fY{constructor(){super(mY.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function gY(e){return new wY(e)}function vY(e,t){return new OY(e,t)}mY.INITIAL_CAPACITY=32;class bY{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new IY(this,e)}filter(e){return new EY(this,e)}map(e){return new NY(this,e)}mapAsync(e){return new $Y(this,e)}serialMapAsync(e){return new $Y(this,e).serial()}flatmap(e){return new AY(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile((e=>!0===e))}rowMajorBatch(e){return new SY(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}columnMajorBatch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cY;return this.rowMajorBatch(e,t).map((e=>lY(e,n)))}concatenate(e,t){return new OY(new yY([this,e]),t)}take(e){return e<0||null==e?this:new CY(this,e)}skip(e){return e<0||null==e?this:new kY(this,e)}prefetch(e){return new PY(this,e)}shuffle(e,t){return new DY(this,e,t)}serial(){return new xY(this)}}class yY extends bY{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:hY(e),done:!1}}}class wY extends bY{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(kbe){throw kbe.message=`Error thrown while iterating through a dataset: ${kbe.message}`,kbe}}}class xY extends bY{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){return this.upstream.next()}}class kY extends bY{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;a_(e.value)}return this.upstream.next()}}class CY extends bY{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class SY extends bY{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class EY extends bY{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;a_(e.value)}}}class NY extends bY{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Map`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=DF(e.value),n=this.transform(e.value),r=DF(n);for(const o of t)PF(o,r)||o.dispose();return{value:n,done:!1}}}class IY extends bY{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(kbe){if(!this.handler(kbe))return{value:null,done:!0}}}}class $Y extends bY{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=DF(e.value),n=await this.transform(e.value),r=DF(n);for(const o of t)PF(o,r)||o.dispose();return{value:n,done:!1}}}class TY extends bY{constructor(){super(),this.outputQueue=new mY,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class AY extends TY{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=DF(e.value),n=this.transform(e.value),r=DF(n);this.outputQueue.pushAll(n);for(const o of t)PF(o,r)||o.dispose();return!0}}class OY extends bY{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}var RY;!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(RY||(RY={}));class PY extends bY{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new fY(t)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class DY extends PY{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=$L.alea(n||nF().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class FY{constructor(){this.size=null}batch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this;let r;return RA(e>0,(()=>`batchSize needs to be positive, but it is\n      ${e}`)),r=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),_Y((async()=>(await n.iterator()).columnMajorBatch(e,t,MY)),r)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,_Y((async()=>(await t.iterator()).concatenate(await e.iterator())),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,_Y((async()=>(await t.iterator()).filter((t=>o_((()=>e(t)))))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return _Y((async()=>(await t.iterator()).map((t=>o_((()=>e(t)))))),this.size)}mapAsync(e){const t=this;return _Y((async()=>(await t.iterator()).mapAsync(e)),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return _Y((async()=>(await t.iterator()).prefetch(e)),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,_Y((async()=>vY(gY((async()=>({value:await t.iterator(),done:!1}))).take(e))),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,_Y((async()=>(await t.iterator()).skip(e)),n)}shuffle(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const r=this,o=$L.alea(t||nF().toString());return _Y((async()=>{let t=o.int32();return n&&(t+=o.int32()),(await r.iterator()).shuffle(e,t.toString())}),this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,_Y((async()=>(await t.iterator()).take(e)),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function _Y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new class extends FY{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function MY(e){if(null===e)return null;if(function(e){return null==e||null===(t=e)||"object"!==typeof t&&"function"!==typeof t||Array.isArray(e)||"object"===typeof e&&e instanceof yF||aF(e);var t}(e[0])){return{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof yF?qL(e):e_(e)}(e),recurse:!1}}return{value:null,recurse:!0}}FY.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function zY(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&RA("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the CPU backend.`))}))}const LY=$H;class BY extends NA{nextDataId(){return BY.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new EA(this,n_())}write(e,t,n){this.firstUse&&(this.firstUse=!1,hO().get("IS_NODE")&&$D("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&qA(n[0])){const o=n.map((e=>rF(e)));r=this.write(o,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,r,o){this.data.set(e,{values:t,dtype:r,refCount:o})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){return Uj(this.readSync(n.real.dataId),this.readSync(n.imag.dataId))}return function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${t}`)}(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>oF(e)));return G_(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return G_(e.shape,e.dtype,t)}makeOutput(e,t,n){return n_().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=nF();e();return{kernelMs:nF()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){zY([e],"where");const t=this.readSync(e.dataId);return LY(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}BY.nextDataId=0;function jY(e){return(t,n,r)=>{const o=GA(n,t.length);for(let a=0;a<t.length;++a)o[a]=e(t[a],r);return o}}function HY(e,t,n){return VY(e,jY(t),n)}function VY(e,t,n){return r=>{let{inputs:o,attrs:a,backend:i}=r;const{x:s}=o;zY(s,e);const l=i,u=l.data.get(s.dataId).values;let c;if("string"===s.dtype){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");c=NH(u)}else c=u;const d=n||s.dtype,h=t(c,d,a);return l.makeTensorInfo(s.shape,d,h)}}s_("cpu",(()=>new BY),1);const WY=HY(mR,(e=>e>=0?e:Math.exp(e)-1)),GY={kernelName:mR,backendName:"cpu",kernelFunc:WY};function UY(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const KY={kernelName:RR,backendName:"cpu",kernelFunc:UY};function qY(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{alpha:a}=r;zY([o],"leakyRelu");const i=FA(o.shape),s=n.data.get(o.dataId).values,l=WA("float32",i);for(let u=0;u<s.length;u++)l[u]=s[u]<0?a*s[u]:s[u];return n.makeTensorInfo(o.shape,"float32",l)}const XY={kernelName:zR,backendName:"cpu",kernelFunc:qY};function JY(e){return(t,n,r,o,a)=>{const i=yM(t,n),s=i.length,l=ZA(i),u=WA(a,FA(i)),c=t.length,d=n.length,h=ZA(t),p=ZA(n),f=vM(t,i),m=vM(n,i);if(f.length+m.length===0)for(let g=0;g<u.length;++g)u[g]=e(r[g%r.length],o[g%o.length]);else for(let g=0;g<u.length;++g){const t=sO(g,s,l),n=t.slice(-c);f.forEach((e=>n[e]=0));const a=iO(n,c,h),i=t.slice(-d);m.forEach((e=>i[e]=0));const v=iO(i,d,p);u[g]=e(r[a],o[v])}return[u,i]}}const YY=JY(((e,t)=>e<0?t*e:e));function QY(e){const{inputs:t,backend:n}=e,{x:r,alpha:o}=t;zY([r,o],"prelu");const a=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,[s,l]=YY(r.shape,o.shape,a,i,"float32");return n.makeTensorInfo(l,"float32",s)}const ZY={kernelName:yP,backendName:"cpu",kernelFunc:QY},eQ=HY(IP,(e=>Math.max(0,e))),tQ={kernelName:IP,backendName:"cpu",kernelFunc:eQ},nQ=HY(PP,(e=>Math.min(Math.max(0,e),6))),rQ={kernelName:PP,backendName:"cpu",kernelFunc:nQ},oQ=jY((e=>1/(1+Math.exp(-e)))),aQ=HY(UP,(e=>1/(1+Math.exp(-e)))),iQ={kernelName:UP,backendName:"cpu",kernelFunc:aQ};function sQ(e,t,n,r,o){if("linear"===n)return UY({inputs:{x:t},backend:e});if("relu"===n)return eQ({inputs:{x:t},backend:e});if("elu"===n)return WY({inputs:{x:t},backend:e});if("relu6"===n)return nQ({inputs:{x:t},backend:e});if("prelu"===n)return QY({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return qY({inputs:{x:t},backend:e,attrs:{alpha:o}});if("sigmoid"===n)return aQ({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function lQ(e){const{inputs:t,backend:n}=e,{real:r,imag:o}=t,a=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",a),imag:n.makeTensorInfo(o.shape,"float32",i)},s}const uQ={kernelName:VO,backendName:"cpu",kernelFunc:lQ};function cQ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){return lQ({inputs:{real:cQ(e,t,"float32"),imag:cQ(e,t,"float32")},backend:e})}const r=rO(FA(t),n);return e.makeTensorInfo(t,n,r)}function dQ(e){const{inputs:t,backend:n}=e,{input:r}=t,o=n.data.get(r.dataId).complexTensorInfos.real,a=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,a)}const hQ={kernelName:EP,backendName:"cpu",kernelFunc:dQ};function pQ(e,t,n,r){if("int32"===r){return[t,"int32",Int32Array.from(e)]}if("bool"===r){const r=tF([0],n),[o,a]=JY(((e,t)=>e!==t?1:0))(t,[],e,r,"bool");return[a,"bool",o]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function fQ(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dtype:a}=r;if("complex64"===a){if("complex64"===o.dtype)return UY({inputs:{x:o},backend:n});const e=cQ(n,o.shape,o.dtype),t=fQ({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),r=lQ({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===o.dtype){const e=dQ({inputs:{input:o},backend:n}),t=fQ({inputs:{x:e},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(e),t}if(!UA(o.dtype,a)){const e=UY({inputs:{x:o},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:a}}const i=n.data.get(o.dataId).values,[s,l,u]=pQ(i,o.shape,o.dtype,a);return n.makeTensorInfo(s,l,u)}const mQ={kernelName:BO,backendName:"cpu",kernelFunc:fQ};function gQ(e,t,n,r){return null==n?n=>{let{inputs:o,backend:a}=n;const{a:i,b:s}=o,l=a;zY([i,s],e);const u=l.data.get(i.dataId).values,c=l.data.get(s.dataId).values,d="string"===i.dtype?NH(u):u,h="string"===i.dtype?NH(c):c,p=r||i.dtype,[f,m]=t(i.shape,s.shape,d,h,p);return l.makeTensorInfo(m,p,f)}:e=>{let{inputs:o,backend:a}=e;const{a:i,b:s}=o,l=a;if("complex64"===i.dtype||"complex64"===s.dtype){const e=fQ({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),t=l.data.get(e.dataId),r=t.complexTensorInfos.real,o=t.complexTensorInfos.imag,a=l.data.get(r.dataId).values,u=l.data.get(o.dataId).values,c=fQ({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),d=l.data.get(c.dataId),h=d.complexTensorInfos.real,p=d.complexTensorInfos.imag,f=l.data.get(h.dataId).values,m=l.data.get(p.dataId).values,[g,v,b]=n(i.shape,s.shape,a,u,f,m),y=l.makeTensorInfo(b,"float32",g),w=l.makeTensorInfo(b,"float32",v),x=lQ({inputs:{real:y,imag:w},backend:l});return l.disposeIntermediateTensorInfo(e),l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(y),l.disposeIntermediateTensorInfo(w),x}{const e=l.data.get(i.dataId).values,n=l.data.get(s.dataId).values,o=r||i.dtype,[a,u]=t(i.shape,s.shape,e,n,o);return l.makeTensorInfo(u,o,a)}}}function vQ(e){return(t,n,r,o,a,i)=>{const s=yM(t,n),l=FA(s),u=s.length,c=ZA(s),d=WA("float32",l),h=WA("float32",l),p=vM(t,s),f=vM(n,s),m=Uj(r,o),g=Uj(a,i),v=t.length,b=ZA(t),y=n.length,w=ZA(n);if(p.length+f.length===0)for(let x=0;x<d.length;x++){const t=x%m.length,n=x%g.length,r=e(m[2*t],m[2*t+1],g[2*n],g[2*n+1]);d[x]=r.real,h[x]=r.imag}else for(let x=0;x<d.length;x++){const t=sO(x,u,c),n=t.slice(-v);p.forEach((e=>n[e]=0));const r=iO(n,v,b),o=t.slice(-y);f.forEach((e=>o[e]=0));const a=iO(o,y,w),i=e(m[2*r],m[2*r+1],g[2*a],g[2*a+1]);d[x]=i.real,h[x]=i.imag}return[d,h,s]}}const bQ=JY(((e,t)=>e+t)),yQ=vQ(((e,t,n,r)=>({real:e+n,imag:t+r}))),wQ=gQ(wO,bQ,yQ),xQ={kernelName:wO,backendName:"cpu",kernelFunc:wQ};function kQ(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{shape:a}=r,i=FA(o.shape),s=jA(a,i),l=FA(s);RA(i===l,(()=>`The new shape (${s}) has ${l} elements and the old shape (${o.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`)),n.incRef(o.dataId);const u=n.data.get(o.dataId);if(null!=u.complexTensorInfos){const e=u.complexTensorInfos.real,t=u.complexTensorInfos.imag;e.shape=s,t.shape=s}return{dataId:o.dataId,shape:s,dtype:o.dtype}}const CQ={kernelName:$P,backendName:"cpu",kernelFunc:kQ};function SQ(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:a}=t,{transposeA:i,transposeB:s}=r;zY([o,a],"matMul");const l=o.shape.length,u=a.shape.length,c=i?o.shape[l-2]:o.shape[l-1],d=s?a.shape[u-1]:a.shape[u-2],h=i?o.shape[l-1]:o.shape[l-2],p=s?a.shape[u-2]:a.shape[u-1],f=o.shape.slice(0,-2),m=a.shape.slice(0,-2),g=FA(f),v=FA(m),b=yM(o.shape.slice(0,-2),a.shape.slice(0,-2)).concat([h,p]);RA(c===d,(()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${o.shape} and ${a.shape} and transposeA=${i} and transposeB=${s} must match.`));const y=s?[v,p,d]:[v,d,p],w=kQ({inputs:{x:o},backend:n,attrs:{shape:i?[g,c,h]:[g,h,c]}}),x=kQ({inputs:{x:a},backend:n,attrs:{shape:y}}),k=i?w.shape[1]:w.shape[2],C=i?w.shape[2]:w.shape[1],S=s?x.shape[1]:x.shape[2],E=Math.max(g,v),N=n.data.get(w.dataId).values,I=n.data.get(x.dataId).values,$=ZA(w.shape),T=ZA(x.shape),[A,O,R]=i?[$[0],1,$[1]]:[$[0],$[1],1],[P,D,F]=s?[1,T[1],T[0]]:[T[1],1,T[0]],_=C*S,M=G_([E,C,S],w.dtype),z=M.values,L=n.blockSize;for(let B=0;B<E;B++){const e=B%g,t=B%v;for(let n=0;n<C;n+=L){const r=Math.min(n+L,C);for(let o=0;o<S;o+=L){const a=Math.min(o+L,S);for(let i=0;i<k;i+=L){const s=Math.min(i+L,k);for(let l=n;l<r;l++)for(let n=o;n<a;n++){let r=0;for(let o=i;o<s;o++){r+=N[e*A+l*O+o*R]*I[o*P+n*D+t*F]}z[B*_+(l*S+n)]+=r}}}}}return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(x),n.makeTensorInfo(b,M.dtype,M.values)}const EQ={kernelName:FO,backendName:"cpu",kernelFunc:SQ};const NQ={kernelName:ED,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:a,bias:i,preluActivationWeights:s}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;let h,p,f;const m=[];h=SQ({inputs:{a:o,b:a},attrs:{transposeA:l,transposeB:u},backend:n}),i&&(p=wQ({inputs:{a:h,b:i},backend:n}),m.push(h),h=p),c&&(f=sQ(n,h,c,s,d),m.push(h),h=f);for(const g of m)n.disposeIntermediateTensorInfo(g);return h}};function IQ(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const $Q={kernelName:vO,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;zY(t,"abs");let r=new Float32Array(FA(t.shape));return r=IQ(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},TQ=HY(bO,(e=>Math.acos(e))),AQ={kernelName:bO,backendName:"cpu",kernelFunc:TQ},OQ=HY(yO,(e=>Math.acosh(e))),RQ={kernelName:yO,backendName:"cpu",kernelFunc:OQ};const PQ={kernelName:xO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;zY(t,"addN");const o=r.map((e=>n.data.get(e.dataId).values)),a=G_(r[0].shape,r[0].dtype),i=a.values;for(let s=0;s<r.length;s++){const e=o[s];for(let t=0;t<i.length;t++)i[t]+=e[t]}return n.makeTensorInfo(a.shape,a.dtype,a.values)}};function DQ(e,t,n,r,o){const a=t.length,i=FA(t),s=ZA(t),l=ZA(o),u=WA(n,FA(o));for(let c=0;c<i;++c){const t=sO(c,a,s),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[r[e]];u[iO(n,a,l)]=e[c]}return u}function FQ(e){const{inputs:t,attrs:n,backend:r}=e,{x:o}=t,{perm:a}=n;zY(o,"transpose");const i=o.shape.length,s=new Array(i);for(let u=0;u<s.length;u++)s[u]=o.shape[a[u]];const l=DQ(r.data.get(o.dataId).values,o.shape,o.dtype,a,s);return{dataId:r.write(l,s,o.dtype),shape:s,dtype:o.dtype}}const _Q={kernelName:vD,backendName:"cpu",kernelFunc:FQ};const MQ={kernelName:kO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;zY(o,"all");const s=HA(a,o.shape);let l=s;const u=lL(l,o.shape.length);let c=o;null!=u&&(c=FQ({inputs:{x:o},backend:n,attrs:{perm:u}}),l=cL(l.length,o.shape.length)),sL("all",l,c.shape.length);const[d,h]=aL(c.shape,l),p=FA(h),f=rO(FA(d),c.dtype),m=n.data.get(c.dataId).values;for(let v=0;v<f.length;++v){const e=v*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];t=t&&r}f[v]=t}null!=u&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,f);if(i){const e=kQ({inputs:{x:g},backend:n,attrs:{shape:iL(d,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const zQ={kernelName:CO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;zY(o,"any");const s=HA(a,o.shape);let l=s;const u=lL(l,o.shape.length);let c=o;null!=u&&(c=FQ({inputs:{x:o},backend:n,attrs:{perm:u}}),l=cL(l.length,o.shape.length)),sL("any",l,c.shape.length);const[d,h]=aL(c.shape,l),p=FA(h),f=rO(FA(d),c.dtype),m=n.data.get(c.dataId).values;for(let v=0;v<f.length;++v){const e=v*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];t=t||r}f[v]=t}null!=u&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,f);if(i){const e=kQ({inputs:{x:g},backend:n,attrs:{shape:iL(d,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const LQ={kernelName:SO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a}=r;zY(o,"argMax");let i=HA(a,o.shape);const s=lL(i,o.shape.length);let l=o;const u=[];null!=s&&(l=FQ({inputs:{x:o},backend:n,attrs:{perm:s}}),u.push(l),i=cL(i.length,l.shape.length)),i=[i[0]],sL("argMax",i,l.shape.length);const[c,d]=aL(l.shape,i),h=rO(FA(c),"int32"),p=FA(d),f=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const e=m*p;let t=f[e],n=0;for(let r=0;r<p;++r){const o=f[e+r];o>t&&(t=o,n=r)}h[m]=n}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(c,"int32",h)}};const BQ={kernelName:EO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a}=r;zY(o,"argMin");let i=HA(a,o.shape);const s=lL(i,o.shape.length);let l=o;const u=[];null!=s&&(l=FQ({inputs:{x:o},backend:n,attrs:{perm:s}}),u.push(l),i=cL(i.length,l.shape.length)),i=[i[0]],sL("argMin",i,l.shape.length);const[c,d]=aL(l.shape,i),h=rO(FA(c),"int32"),p=FA(d),f=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const e=m*p;let t=f[e],n=0;for(let r=0;r<p;++r){const o=f[e+r];o<t&&(t=o,n=r)}h[m]=n}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(c,"int32",h)}},jQ=HY(NO,(e=>Math.asin(e))),HQ={kernelName:NO,backendName:"cpu",kernelFunc:jQ},VQ=HY(IO,(e=>Math.asinh(e))),WQ={kernelName:IO,backendName:"cpu",kernelFunc:VQ},GQ=HY($O,(e=>Math.atan(e))),UQ={kernelName:$O,backendName:"cpu",kernelFunc:GQ},KQ=JY(((e,t)=>Math.atan2(e,t))),qQ=gQ(AO,KQ),XQ={kernelName:AO,backendName:"cpu",kernelFunc:qQ},JQ=HY(TO,(e=>Math.atanh(e))),YQ={kernelName:TO,backendName:"cpu",kernelFunc:JQ};function QQ(e,t,n,r,o,a){const i=o.strideHeight,s=o.strideWidth,l=o.dilationHeight,u=o.dilationWidth,c=o.effectiveFilterHeight,d=o.effectiveFilterWidth,h=o.padInfo.top,p=o.padInfo.left,f="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=G_(o.outShape,n),g=m.values,v=o.outShape[1]*o.outShape[2]*o.outShape[3],b=o.outShape[2]*o.outShape[3],y=o.outShape[3];for(let w=0;w<o.batchSize;++w){const t=w*v,n=w*r[0];for(let m=0;m<o.inChannels;++m)for(let v=0;v<o.outHeight;++v){const w=v*i-h,x=Math.max(0,w),k=Math.min(o.inHeight,c+w),C=t+v*b;for(let t=0;t<o.outWidth;++t){const i=t*s-p,c=Math.max(0,i),h=Math.min(o.inWidth,d+i);let v=f,b=0,w=0;for(let t=x;t<k;t+=l){const o=n+t*r[1];for(let t=c;t<h;t+=u){const n=e[o+t*r[2]+m];"max"===a&&n>v?v=n:"avg"===a&&(b+=n,w++)}if(isNaN(v))break}g[C+t*y+m]="avg"===a?b/w:v}}}return m}function ZQ(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=G_(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,m=G_(t,n,e);for(let g=0;g<r.batchSize;++g)for(let e=0;e<r.inChannels;++e)for(let t=0;t<r.outHeight;++t){const n=t*s-p;let v=n;for(;v<0;)v+=u;const b=Math.min(r.inHeight,d+n);for(let s=0;s<r.outWidth;++s){const d=s*l-f;let p=d;for(;p<0;)p+=c;const y=Math.min(r.inWidth,h+d);let w=Number.NEGATIVE_INFINITY,x=-1;for(let t=v;t<b;t+=u){const i=t-n;for(let n=p;n<y;n+=c){const s=n-d,l=m.get(g,t,n,e);l>w&&(w=l,x=o?a?((g*r.inHeight+t)*r.inWidth+n)*r.inChannels+e:(t*r.inWidth+n)*r.inChannels+e:i*h+s)}}i.set(x,g,t,s,e)}}return i}function eZ(e,t,n,r,o,a){const i=o.strideDepth,s=o.strideHeight,l=o.strideWidth,u=o.dilationDepth,c=o.dilationHeight,d=o.dilationWidth,h=o.effectiveFilterDepth,p=o.effectiveFilterHeight,f=o.effectiveFilterWidth,m=o.padInfo.front,g=o.padInfo.top,v=o.padInfo.left,b="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=G_(o.outShape,n),w=y.values,x=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],k=o.outShape[2]*o.outShape[3]*o.outShape[4],C=o.outShape[3]*o.outShape[4],S=o.outShape[4];for(let E=0;E<o.batchSize;++E){const t=E*x,n=E*r[0];for(let y=0;y<o.inChannels;++y)for(let x=0;x<o.outDepth;++x){const E=x*i-m;let N=E;for(;N<0;)N+=u;const I=Math.min(o.inDepth,h+E),$=t+x*k;for(let t=0;t<o.outHeight;++t){const i=t*s-g;let h=i;for(;h<0;)h+=c;const m=Math.min(o.inHeight,p+i),x=$+t*C;for(let t=0;t<o.outWidth;++t){const i=t*l-v;let s=i;for(;s<0;)s+=d;const p=Math.min(o.inWidth,f+i),g=x+t*S;let k=b,C=0,E=0;for(let t=N;t<I;t+=u){const o=n+t*r[1];for(let t=h;t<m;t+=c){const n=o+t*r[2];for(let t=s;t<p;t+=d){const o=e[n+t*r[3]+y];if("max"===a&&o>k?k=o:"avg"===a&&(C+=o,E++),isNaN(k))break}if(isNaN(k))break}if(isNaN(k))break}w[g+y]="avg"===a?C/Math.max(E,1):k}}}}return y}const tZ={kernelName:OO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;zY(o,"avgPool");const{filterSize:a,strides:i,pad:s,dimRoundingMode:l}=r;RA(pz(i,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const u=rz(o.shape,a,i,1,s,l);let c;if(1===u.filterWidth&&1===u.filterHeight&&_A(u.inShape,u.outShape))c=UY({inputs:{x:o},backend:n});else{const e=n.data.get(o.dataId).values,t=ZA(o.shape),r=QQ(e,o.shape,o.dtype,t,u,"avg");c=n.makeTensorInfo(u.outShape,o.dtype,r.values)}return c}};const nZ={kernelName:PO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:l,dataFormat:u}=r;zY(o,"avgPool3d");const c=oz(o.shape,a,i,1,s,l,u),d=eZ(n.data.get(o.dataId).values,o.shape,o.dtype,ZA(o.shape),c,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};const rZ={kernelName:DO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,{filterSize:i,strides:s,pad:l,dimRoundingMode:u}=r;zY([o,a],"avgPool3DGrad");const c=oz(a.shape,i,s,1,l,u),d=c.strideDepth,h=c.strideHeight,p=c.strideWidth,f=c.filterDepth,m=c.filterHeight,g=c.filterWidth,v=c.dilationDepth,b=c.dilationHeight,y=c.dilationWidth,w=c.effectiveFilterDepth,x=c.effectiveFilterHeight,k=c.effectiveFilterWidth,C=w-1-c.padInfo.front,S=k-1-c.padInfo.left,E=x-1-c.padInfo.top,N=G_(a.shape,"float32"),I=1/(f*m*g),$=n.bufferSync(o);for(let T=0;T<c.batchSize;++T)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inDepth;++t)for(let n=0;n<c.inHeight;++n)for(let r=0;r<c.inWidth;++r){const o=t-C,a=n-E,i=r-S;let s=0;for(let t=0;t<w;t+=v){const n=(o+t)/d;if(!(n<0||n>=c.outDepth||Math.floor(n)!==n))for(let t=0;t<x;t+=b){const r=(a+t)/h;if(!(r<0||r>=c.outHeight||Math.floor(r)!==r))for(let t=0;t<k;t+=y){const o=(i+t)/p;if(o<0||o>=c.outWidth||Math.floor(o)!==o)continue;s+=$.get(T,n,r,o,e)}}}N.set(s*I,T,t,n,r,e)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}};const oZ={kernelName:RO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,i=a;zY([o,a],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=rz(i.shape,s,l,1,u),d=c.strideHeight,h=c.strideWidth,p=c.filterHeight,f=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,v=c.effectiveFilterHeight,b=c.effectiveFilterWidth,y=b-1-c.padInfo.left,w=v-1-c.padInfo.top,x=G_(i.shape,"float32"),k=1/(p*f),C=n.data.get(o.dataId).values,S=G_(o.shape,"float32",C);for(let E=0;E<c.batchSize;++E)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inHeight;++t)for(let n=0;n<c.inWidth;++n){const r=t-w,o=n-y;let a=0;for(let t=0;t<v;t+=m){const n=(r+t)/d;if(!(n<0||n>=c.outHeight||Math.floor(n)!==n))for(let t=0;t<b;t+=g){const r=(o+t)/h;if(r<0||r>=c.outWidth||Math.floor(r)!==r)continue;a+=S.get(E,n,r,e)}}x.set(a*k,E,t,n,e)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};const aZ={kernelName:IR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,scale:a,offset:i,mean:s,variance:l}=t;RA(s.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),RA(null==i||s.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),RA(null==a||s.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks.")),zY([o,s,l,a,i],"batchNorm");let{varianceEpsilon:u}=r;null==u&&(u=.001);const c=n.data.get(o.dataId).values,d=n.data.get(s.dataId).values,h=n.data.get(l.dataId).values,p=a?n.data.get(a.dataId).values:new Float32Array([1]),f=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=f.length,v=p.length,b=h.length,y=d.length;let w=0,x=0,k=0,C=0;for(let S=0;S<c.length;++S)m[S]=f[w++]+(c[S]-d[x++])*p[k++]/Math.sqrt(h[C++]+u),w>=g&&(w=0),x>=y&&(x=0),k>=v&&(k=0),C>=b&&(C=0);return n.makeTensorInfo(o.shape,o.dtype,m)}};function iZ(e,t,n,r,o){const a=qM(r,t,n),i=FA(n),s=ZA(r);if(a){const n=XM(t,s);return"string"===o?e.slice(n,n+i):e.subarray(n,n+i)}const l=G_(r,o,"string"===o?NH(e):e),u=G_(n,o);for(let c=0;c<u.size;++c){const e=u.indexToLoc(c),n=e.map(((e,n)=>e+t[n]));u.set(l.get(...n),...e)}return"string"===o?IH(u.values):u.values}function sZ(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:a,size:i}=r;zY(o,"slice");const[s,l]=JM(o,a,i);_M(o,s,l);const u=iZ(n.data.get(o.dataId).values,s,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,u)}const lZ={kernelName:HP,backendName:"cpu",kernelFunc:sZ};const uZ={kernelName:_O,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:a,crops:i}=r;zY([o],"batchToSpaceND");const s=a.reduce(((e,t)=>e*t)),l=Tj(o.shape,a,s),u=Aj(l.length,a.length),c=Oj(o.shape,a,s),d=Rj(i,a.length),h=Pj(c,i,a.length),p=kQ({inputs:{x:o},backend:n,attrs:{shape:l}}),f=FQ({inputs:{x:p},backend:n,attrs:{perm:u}}),m=kQ({inputs:{x:f},backend:n,attrs:{shape:c}}),g=sZ({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}};function cZ(e,t,n,r,o){const a=FA(r),i=rO(o,n);for(let s=0;s<e.length;s++){const n=e[s];if(n<0)throw new Error("Input x must be non-negative!");n>=o||(i[n]+=a>0?t[s]:1)}return i}function dZ(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=e.shape[0],a=e.shape[1],i=G_([o,n],t.dtype);for(let s=0;s<o;s++)for(let o=0;o<a;o++){const a=e.get(s,o);if(a<0)throw new Error("Input x must be non-negative!");a>=n||(r?i.set(1,s,a):t.size>0?i.set(i.get(s,a)+t.get(s,o),s,a):i.set(i.get(s,a)+1,s,a))}return i}const hZ={kernelName:MO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:a}=t,{size:i}=r,s=cZ(n.data.get(o.dataId).values,n.data.get(a.dataId).values,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,s)}},pZ=JY(((e,t)=>e&t)),fZ={kernelName:zO,backendName:"cpu",kernelFunc:gQ(zO,pZ)};const mZ={kernelName:LO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:o}=t,a=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,s=yM(Array.from(a),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},gZ=jY((e=>Math.ceil(e))),vZ=VY(jO,gZ),bZ={kernelName:jO,backendName:"cpu",kernelFunc:vZ},yZ=HY(HO,((e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),wZ={kernelName:HO,backendName:"cpu",kernelFunc:yZ},xZ={kernelName:WO,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(FA(t.shape)),o=n.data.get(t.dataId),a=o.complexTensorInfos.real,i=o.complexTensorInfos.imag,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values;for(let u=0;u<s.length;u++){const e=s[u],t=l[u];r[u]=Math.hypot(e,t)}return n.makeOutput(r,t.shape,"float32")}};function kZ(e,t,n,r){const o=GA(n,FA(t));if(r&&"string"!==n){let t=0;e.forEach((e=>{const n=FA(e.shape);o.set(e.vals,t),t+=n}))}else{let r=0;e.forEach((e=>{const a="string"===n?NH(e.vals):e.vals;let i=0;for(let n=0;n<e.shape[0];++n){const s=n*t[1]+r;for(let t=0;t<e.shape[1];++t)o[s+t]=a[i++]}r+=e.shape[1]}))}return o}function CZ(e){const{inputs:t,backend:n}=e,{input:r}=t,o=n.data.get(r.dataId).complexTensorInfos.imag,a=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,a)}const SZ={kernelName:DR,backendName:"cpu",kernelFunc:CZ};function EZ(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r,a=HA(o,t[0].shape)[0],i=t.map((e=>e.shape));yj(i,a);let s=wj(t.map((e=>e.shape)),a);if(0===FA(s))return n.makeTensorInfo(s,t[0].dtype,[]);const l=t.filter((e=>FA(e.shape)>0));if(1===l.length)return UY({inputs:{x:l[0]},backend:n});if("complex64"===l[0].dtype){const e=l.map((e=>dQ({inputs:{input:e},backend:n}))),t=l.map((e=>CZ({inputs:{input:e},backend:n}))),r=EZ({inputs:e,backend:n,attrs:{axis:a}}),o=EZ({inputs:t,backend:n,attrs:{axis:a}}),i=lQ({inputs:{real:r,imag:o},backend:n});return e.forEach((e=>n.disposeIntermediateTensorInfo(e))),t.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),i}const u=l.map((e=>{const t=FA(e.shape.slice(a));return kQ({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),c=u.map((e=>({vals:n.data.get(e.dataId).values,shape:e.shape})));s=wj(u.map((e=>e.shape)),1);const d=1===u[0].shape[0],h=kZ(c,s,t[0].dtype,d),p=wj(l.map((e=>e.shape)),a),f=n.makeTensorInfo(p,t[0].dtype,h);return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}const NZ={kernelName:GO,backendName:"cpu",kernelFunc:EZ};function IZ(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r;zY([o,a],"conv2d");const d=mz(l),h=az(o.shape,a.shape,i,u,s,c,!1,d),p=h.filterHeight,f=h.filterWidth,m=h.dilationHeight,g=h.dilationWidth,v=h.padInfo.left,b=h.padInfo.top,y="channelsLast"===h.dataFormat,w=new mF(h.outShape,o.dtype),x=ZA(o.shape),k=ZA(a.shape),C=x[0],S=y?x[1]:x[2],E=y?x[2]:1,N=y?1:x[1],I=w.strides[0],$=y?w.strides[1]:w.strides[2],T=y?w.strides[2]:1,A=y?1:w.strides[1],O=n.data.get(o.dataId).values,R=n.data.get(a.dataId).values,P=w.values;for(let D=0;D<h.batchSize;++D){const e=D*C,t=D*I;for(let n=0;n<h.outHeight;++n){const r=t+n*$,o=n*h.strideHeight-b;for(let t=0;t<p;++t){const n=o+t*m;if(n<0||n>=h.inHeight)continue;const a=t*k[0],i=e+n*S;for(let e=0;e<h.outWidth;++e){const t=r+e*T,n=e*h.strideWidth-v;for(let e=0;e<f;++e){const r=n+e*g;if(r<0||r>=h.inWidth)continue;const o=i+r*E;let s=a+e*k[1];for(let e=0;e<h.inChannels;++e){const n=O[o+e*N];for(let e=0;e<h.outChannels;++e)P[t+e*A]+=n*R[s+e];s+=h.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,P)}const $Z={kernelName:UO,backendName:"cpu",kernelFunc:IZ};const TZ={kernelName:KO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;zY([o,a],"conv2dBackpropFilter");const d=mz(l),h=az(o.shape,c,i,1,s,u,!1,d),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:g}=h,v="channelsLast"===h.dataFormat,b=new mF(h.filterShape,"float32"),y=h.padInfo.left,w=h.padInfo.top,x=n.data.get(o.dataId).values,k=n.data.get(a.dataId).values,C=new mF(o.shape,o.dtype,x),S=new mF(a.shape,a.dtype,k);for(let E=0;E<m;++E){const e=Math.max(0,Math.ceil((w-E)/p)),t=Math.min(h.outHeight,(h.inHeight+w-E)/p);for(let n=0;n<g;++n){const r=Math.max(0,Math.ceil((y-n)/f)),o=Math.min(h.outWidth,(h.inWidth+y-n)/f);for(let a=0;a<h.inChannels;++a)for(let i=0;i<h.outChannels;++i){let s=0;for(let l=0;l<h.batchSize;++l)for(let u=e;u<t;++u){const e=E+u*p-w;for(let t=r;t<o;++t){const r=n+t*f-y;s+=v?C.get(l,e,r,a)*S.get(l,u,t,i):C.get(l,a,e,r)*S.get(l,i,u,t)}}b.set(s,E,n,a,i)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};const AZ={kernelName:qO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{inputShape:i,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r;zY([o,a],"conv2dBackpropInput");const d=ZA(a.shape),h=ZA(o.shape);let p=mz(u);const f=az(i,a.shape,s,1,l,c,!1,p),m=new mF(f.inShape,"float32"),g=m.values,v=n.data.get(o.dataId).values,b=n.data.get(a.dataId).values,[y,w,x]=d,{batchSize:k,filterHeight:C,filterWidth:S,inChannels:E,inHeight:N,inWidth:I,outChannels:$,outHeight:T,outWidth:A,strideHeight:O,strideWidth:R}=f;p=f.dataFormat;const P=C-1-f.padInfo.top,D=S-1-f.padInfo.left,F="channelsLast"===p,_=m.strides[0],M=F?m.strides[1]:m.strides[2],z=F?m.strides[2]:1,L=F?1:m.strides[1],B=h[0],j=F?h[1]:h[2],H=F?h[2]:1,V=F?1:h[1];for(let W=0;W<k;++W)for(let e=0;e<E;++e)for(let t=0;t<N;++t){const n=t-P,r=Math.max(0,Math.ceil(n/O)),o=Math.min(T,(C+n)/O);for(let a=0;a<I;++a){const i=a-D,s=Math.max(0,Math.ceil(i/R)),l=Math.min(A,(S+i)/R);let u=0;for(let t=r;t<o;++t){const r=t*O-n;for(let n=s;n<l;++n){const o=B*W+j*t+H*n,a=y*(C-1-r)+w*(S-1-(n*R-i))+x*e;for(let e=0;e<$;++e){u+=v[o+V*e]*b[a+e]}}}g[_*W+M*t+z*a+L*e]=u}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};const OZ={kernelName:XO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:l}=r;zY([o,a],"conv3d");const u=iz(o.shape,a.shape,i,l,s),{filterDepth:c,filterHeight:d,filterWidth:h,dilationDepth:p,dilationHeight:f,dilationWidth:m,padInfo:g}=u,v=g.front,b=g.left,y=g.top,w=new mF(u.outShape,o.dtype),x=n.data.get(o.dataId).values,k=n.data.get(a.dataId).values,C=w.values,S=ZA(o.shape),E=ZA(a.shape);for(let N=0;N<u.batchSize;++N){const e=N*S[0],t=N*w.strides[0];for(let n=0;n<u.outDepth;++n){const r=t+n*w.strides[1],o=n*u.strideDepth-v;for(let t=0;t<c;++t){const n=o+t*p;if(n<0||n>=u.inDepth)continue;const a=t*E[0],i=e+n*S[1];for(let e=0;e<u.outHeight;++e){const t=r+e*w.strides[2],n=e*u.strideHeight-y;for(let e=0;e<d;++e){const r=n+e*f;if(r<0||r>=u.inHeight)continue;const o=a+e*E[1],s=i+r*S[2];for(let e=0;e<u.outWidth;++e){const n=t+e*u.outChannels,r=e*u.strideWidth-b;for(let e=0;e<h;++e){const t=r+e*m;if(t<0||t>=u.inWidth)continue;const a=o+e*E[2],i=s+t*u.inChannels;let l=a;for(let e=0;e<u.inChannels;++e){const t=x[i+e];for(let e=0;e<u.outChannels;++e)C[n+e]+=t*k[l+e];l+=u.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};const RZ={kernelName:JO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,pad:s,filterShape:l}=r;zY([o,a],"conv3dBackpropFilterV2");const u=ZA(o.shape),c=ZA(a.shape),d=iz(o.shape,l,i,1,s),h=d.strideDepth,p=d.strideHeight,f=d.strideWidth,m=d.filterDepth,g=d.filterHeight,v=d.filterWidth,b=new mF(d.filterShape,"float32"),y=b.values,[w,x,k,C]=b.strides,S=n.data.get(a.dataId).values,[E,N,I,$]=c,T=n.data.get(o.dataId).values,[A,O,R,P]=u,D=d.padInfo.front,F=d.padInfo.left,_=d.padInfo.top;for(let M=0;M<m;++M){const e=Math.max(0,Math.ceil((D-M)/h)),t=Math.min(d.outDepth,(d.inDepth+D-M)/h),n=M*w;for(let r=0;r<g;++r){const o=Math.max(0,Math.ceil((_-r)/p)),a=Math.min(d.outHeight,(d.inHeight+_-r)/p),i=r*x+n;for(let n=0;n<v;++n){const s=Math.max(0,Math.ceil((F-n)/f)),l=Math.min(d.outWidth,(d.inWidth+F-n)/f),u=n*k+i;for(let i=0;i<d.inChannels;++i){const c=i*C+u;for(let u=0;u<d.outChannels;++u){let m=0;for(let c=0;c<d.batchSize;++c){const d=c*A,g=c*E;for(let c=e;c<t;++c){const e=(M+c*h-D)*O+d,t=c*N+g;for(let c=o;c<a;++c){const o=(r+c*p-_)*R+e,a=c*I+t;for(let e=s;e<l;++e){const t=e*$+a;m+=T[(n+e*f-F)*P+o+i]*S[t+u]}}}}y[c+u]=m}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};const PZ={kernelName:YO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{pad:i,strides:s,inputShape:l}=r;zY([o],"conv3dBackpropInputV2");const u=ZA(o.shape),c=ZA(a.shape),d=iz(l,a.shape,s,1,i),h=new mF(d.inShape,"float32"),p=h.values,[f,m,g,v]=h.strides,b=n.data.get(o.dataId).values,[y,w,x,k]=u,C=n.data.get(a.dataId).values,[S,E,N,I]=c,{batchSize:$,filterDepth:T,filterHeight:A,filterWidth:O,inChannels:R,inDepth:P,inHeight:D,inWidth:F,outChannels:_,outDepth:M,outHeight:z,outWidth:L,strideDepth:B,strideHeight:j,strideWidth:H}=d,V=T-1-d.padInfo.front,W=A-1-d.padInfo.top,G=O-1-d.padInfo.left;for(let U=0;U<$;++U)for(let e=0;e<R;++e)for(let t=0;t<P;++t){const n=t-V,r=Math.max(0,Math.ceil(n/B)),o=Math.min(M,(T+n)/B);for(let a=0;a<D;++a){const i=a-W,s=Math.max(0,Math.ceil(i/j)),l=Math.min(z,(A+i)/j);for(let u=0;u<F;++u){const c=u-G,d=Math.max(0,Math.ceil(c/H)),h=Math.min(L,(O+c)/H);let $=0;for(let t=r;t<o;++t){const r=t*B-n;for(let n=s;n<l;++n){const o=n*j-i;for(let a=d;a<h;++a){const i=y*U+w*t+x*n+k*a,s=S*(T-1-r)+E*(A-1-o)+N*(O-1-(a*H-c))+I*e;for(let e=0;e<_;++e){$+=b[i+e]*C[s+e]}}}}p[f*U+m*t+g*a+v*u+e]=$}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}},DZ=HY(QO,(e=>Math.cos(e))),FZ={kernelName:QO,backendName:"cpu",kernelFunc:DZ},_Z=HY(ZO,(e=>Math.cosh(e))),MZ={kernelName:ZO,backendName:"cpu",kernelFunc:_Z};const zZ={kernelName:nR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:o,boxes:a,boxInd:i}=t,{cropSize:s,method:l,extrapolationValue:u}=r,[c,d,h,p]=o.shape,f=a.shape[0],[m,g]=s,v=G_([f,m,g,p],"float32"),b=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,w=n.data.get(o.dataId).values,x=ZA(o.shape),k=ZA(v.shape);for(let C=0;C<f;C++){const e=4*C,t=b[e],n=b[e+1],r=b[e+2],o=b[e+3],a=y[C];if(a>=c)continue;const i=m>1?(r-t)*(d-1)/(m-1):0,s=g>1?(o-n)*(h-1)/(g-1):0;for(let c=0;c<m;c++){const e=m>1?t*(d-1)+c*i:.5*(t+r)*(d-1);if(e<0||e>d-1)for(let t=0;t<g;t++)for(let e=0;e<p;e++){const n=e+t*k[2]+c*k[1]+C*k[0];v.values[n]=u}else if("bilinear"===l){const t=Math.floor(e),r=Math.ceil(e),i=e-t;for(let e=0;e<g;e++){const l=g>1?n*(h-1)+e*s:.5*(n+o)*(h-1);if(l<0||l>h-1){for(let t=0;t<p;t++){const n=t+e*k[2]+c*k[1]+C*k[0];v.values[n]=u}continue}const d=Math.floor(l),f=Math.ceil(l),m=l-d;for(let n=0;n<p;n++){let o=n+d*x[2]+t*x[1]+a*x[0];const s=w[o];o=n+f*x[2]+t*x[1]+a*x[0];const l=w[o];o=n+d*x[2]+r*x[1]+a*x[0];const u=w[o];o=n+f*x[2]+r*x[1]+a*x[0];const h=s+(l-s)*m,p=u+(w[o]-u)*m;o=n+e*k[2]+c*k[1]+C*k[0],v.values[o]=h+(p-h)*i}}}else for(let t=0;t<g;++t){const r=g>1?n*(h-1)+t*s:.5*(n+o)*(h-1);if(r<0||r>h-1){for(let e=0;e<p;e++){const n=e+t*k[2]+c*k[1]+C*k[0];v.values[n]=u}continue}const i=Math.round(r),l=Math.round(e);for(let e=0;e<p;e++){const n=e+i*x[2]+l*x[1]+a*x[0],r=e+t*k[2]+c*k[1]+C*k[0];v.values[r]=w[n]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const LZ={kernelName:eR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,exclusive:i,reverse:s}=r;zY(o,"cumprod");const l=lL([a],o.shape.length);let u=o;null!=l&&(u=FQ({inputs:{x:o},backend:n,attrs:{perm:l}}));const c=cL(1,o.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=$F(u.dtype,"int32"),h=nO(FA(u.shape),d),p=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let v=0;v<p.length;v+=f)for(let e=0;e<f;e++){const t=m(v,e);if(0===e)h[t]=i?1:p[t];else{const n=m(v,e-1);h[t]=i?p[n]*h[n]:p[t]*h[n]}}const g=n.makeTensorInfo(u.shape,d,h);if(null!=l){const e=FQ({inputs:{x:g},backend:n,attrs:{perm:uL(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),e}return g}};const BZ={kernelName:tR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,exclusive:i,reverse:s}=r;zY(o,"cumsum");const l=lL([a],o.shape.length);let u=o;null!=l&&(u=FQ({inputs:{x:o},backend:n,attrs:{perm:l}}));const c=cL(1,o.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=$F(u.dtype,"int32"),h=rO(FA(u.shape),d),p=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let v=0;v<p.length;v+=f)for(let e=0;e<f;e++){const t=m(v,e);if(0===e)h[t]=i?0:p[t];else{const n=m(v,e-1);h[t]=i?p[n]+h[n]:p[t]+h[n]}}const g=n.makeTensorInfo(u.shape,d,h);if(null!=l){const e=FQ({inputs:{x:g},backend:n,attrs:{perm:uL(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),e}return g}};const jZ={kernelName:rR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:a}=t,{size:i,binaryOutput:s}=r;if(1===o.shape.length){const e=cZ(n.data.get(o.dataId).values,n.data.get(a.dataId).values,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,e)}if(2===o.shape.length){const e=dZ(n.bufferSync(o),n.bufferSync(a),i,s);return n.makeTensorInfo(e.shape,a.dtype,e.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}};const HZ={kernelName:oR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockSize:a,dataFormat:i}=r;RA("NHWC"===i,(()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`));const s=o.shape[0],l=o.shape[1],u=o.shape[2],c=o.shape[3],d=l*a,h=u*a,p=c/(a*a),f=n.data.get(o.dataId).values,m=new Float32Array(s*d*h*p);let g=0;for(let v=0;v<s;++v)for(let e=0;e<d;++e){const t=Math.floor(e/a),n=e%a;for(let e=0;e<h;++e){const r=Math.floor(e/a),o=(n*a+e%a)*p;for(let e=0;e<p;++e){const n=e+o+c*(r+u*(t+l*v));m[g++]=f[n]}}}return n.makeTensorInfo([s,d,h,p],o.dtype,m)}};function VZ(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:l,dimRoundingMode:u}=r;zY([o,a],"depthwiseConv2DNative");const c=ZA(o.shape),d=ZA(a.shape);let h=l;null==h&&(h=[1,1]),RA(pz(i,h),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${h}'`));const p=az(o.shape,a.shape,i,h,s,u,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:v,padInfo:b}=p,y=b.left,w=b.top,x=p.outChannels/p.inChannels,k=new mF(p.outShape,o.dtype),C=n.data.get(o.dataId).values,S=n.data.get(a.dataId).values,E=k.values;for(let N=0;N<p.batchSize;++N){const e=N*c[0],t=N*k.strides[0];for(let n=0;n<p.outHeight;++n){const r=t+n*k.strides[1],o=n*p.strideHeight-w;for(let t=0;t<f;++t){const n=o+t*g;if(n<0||n>=p.inHeight)continue;const a=t*d[0],i=e+n*c[1];for(let e=0;e<p.outWidth;++e){const t=r+e*k.strides[2],n=e*p.strideWidth-y;for(let e=0;e<m;++e){const r=n+e*v;if(r<0||r>=p.inWidth)continue;const o=a+e*d[1],s=i+r*p.inChannels;let l=t,u=o;for(let e=0;e<p.inChannels;++e){const t=C[s+e];for(let e=0;e<x;++e)E[l+e]+=t*S[u+e];l+=x,u+=x}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const WZ={kernelName:aR,backendName:"cpu",kernelFunc:VZ};const GZ={kernelName:iR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r;zY([o,a],"depthwiseConv2dNativeBackpropFilter");const d=az(o.shape,c,i,s,l,u,!0),{strideHeight:h,strideWidth:p,filterHeight:f,filterWidth:m}=d,g=new mF(d.filterShape,"float32"),v=d.padInfo.left,b=d.padInfo.top,y=d.outChannels/d.inChannels,w=n.data.get(o.dataId).values,x=new mF(o.shape,o.dtype,w),k=n.data.get(a.dataId).values,C=new mF(a.shape,a.dtype,k);for(let S=0;S<f;++S){const e=Math.max(0,Math.ceil((b-S)/h)),t=Math.min(d.outHeight,(d.inHeight+b-S)/h);for(let n=0;n<m;++n){const r=Math.max(0,Math.ceil((v-n)/p)),o=Math.min(d.outWidth,(d.inWidth+v-n)/p);for(let a=0;a<d.outChannels;++a){const i=Math.trunc(a/y),s=a%y;let l=0;for(let u=0;u<d.batchSize;++u)for(let s=e;s<t;++s){const e=S+s*h-b;for(let t=r;t<o;++t){const r=n+t*p-v;l+=x.get(u,e,r,i)*C.get(u,s,t,a)}}g.set(l,S,n,i,s)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const UZ={kernelName:sR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{strides:i,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r;zY([o,a],"depthwiseConv2DNativeBackpropInput");const d=ZA(o.shape),h=ZA(a.shape),p=az(c,a.shape,i,s,l,u,!0),f=new mF(p.inShape,"float32"),m=f.values,[g,v,b]=f.strides,y=n.data.get(o.dataId).values,[w,x,k]=d,C=n.data.get(a.dataId).values,[S,E,N]=h,{batchSize:I,filterHeight:$,filterWidth:T,inChannels:A,inHeight:O,inWidth:R,outChannels:P,outHeight:D,outWidth:F,strideHeight:_,strideWidth:M}=p,z=$-1-p.padInfo.top,L=T-1-p.padInfo.left,B=P/A;for(let j=0;j<I;++j)for(let e=0;e<A;++e)for(let t=0;t<O;++t){const n=t-z,r=Math.max(0,Math.ceil(n/_)),o=Math.min(D,($+n)/_);for(let a=0;a<R;++a){const i=a-L,s=Math.max(0,Math.ceil(i/M)),l=Math.min(F,(T+i)/M);let u=0;for(let t=r;t<o;++t){const r=t*_-n;for(let n=s;n<l;++n){const o=w*j+x*t+k*n,a=S*($-1-r)+E*(T-1-(n*M-i))+N*e;for(let t=0;t<B;++t){u+=y[o+(e*B+t)]*C[a+t]}}}m[g*j+v*t+b*a+e]=u}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};const KZ={kernelName:lR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,o=FA(r.shape),a=n.data.get(r.dataId).values,i=G_([o,o],r.dtype),s=i.values;for(let u=0;u<a.length;u++)s[u*o+u]=a[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,i.dtype,i.values)}},qZ={kernelName:uR,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o,filter:a}=t,{strides:i,pad:s,dilations:l}=r,u=n,c=u.data.get(o.dataId).values,d=o.shape.length,h=u.data.get(a.dataId).values,p=a.shape.length,{batchSize:f,inHeight:m,inWidth:g,inChannels:v,outHeight:b,outWidth:y,padInfo:w,strideHeight:x,strideWidth:k,filterHeight:C,filterWidth:S,dilationHeight:E,dilationWidth:N,outShape:I}=nz(o.shape,a.shape,i,s,"NHWC",l),$=FA(I),T=I.length,A=GA(o.dtype,$);for(let O=0;O<f;++O)for(let e=0;e<b;++e){const t=e*x-w.top;for(let n=0;n<y;++n){const r=n*k-w.left;for(let i=0;i<v;++i){let s=Number.MIN_SAFE_INTEGER;for(let e=0;e<C;++e){const n=t+e*E;if(n>=0&&n<m)for(let t=0;t<S;++t){const l=r+t*N;if(l>=0&&l<g){const r=iO([O,n,l,i],d,ZA(o.shape)),u=iO([e,t,i],p,ZA(a.shape)),f=c[r]+h[u];f>s&&(s=f)}}}A[iO([O,e,n,i],T,ZA(I))]=s}}}return{dataId:u.write(tF(A,o.dtype),I,o.dtype),shape:I,dtype:o.dtype}}},XZ={kernelName:dR,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o,filter:a,dy:i}=t,{strides:s,pad:l,dilations:u}=r,c=n,d=tO(o.shape,c.data.get(o.dataId).values),h=tO(a.shape,c.data.get(a.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:v,outWidth:b,padInfo:y,strideHeight:w,strideWidth:x,filterHeight:k,filterWidth:C,dilationHeight:S,dilationWidth:E,outShape:N}=nz(o.shape,a.shape,s,l,"NHWC",u);RA(i.rank===N.length,(()=>`Error in ${dR}, dy must have the same rank as output ${N.length}, but got ${i.rank}`));const I=tO(N,c.data.get(i.dataId).values),$=oO(a.shape,a.dtype);for(let T=0;T<p;++T)for(let e=0;e<v;++e){const t=e*w-y.top;for(let n=0;n<b;++n){const r=n*x-y.left;for(let o=0;o<g;++o){let a=Number.MIN_SAFE_INTEGER,i=0,s=0;for(let e=0;e<k;++e){const n=t+e*S;if(n>=0&&n<f)for(let t=0;t<C;++t){const l=r+t*E;if(l>=0&&l<m){const r=d[T][n][l][o]+h[e][t][o];r>a&&(a=r,i=e,s=t)}}}$[i][s][o]+=I[T][e][n][o]}}}return{dataId:c.write(tF($,o.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},JZ={kernelName:cR,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o,filter:a,dy:i}=t,{strides:s,pad:l,dilations:u}=r,c=n,d=tO(o.shape,c.data.get(o.dataId).values),h=tO(a.shape,c.data.get(a.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:v,outWidth:b,padInfo:y,strideHeight:w,strideWidth:x,filterHeight:k,filterWidth:C,dilationHeight:S,dilationWidth:E,outShape:N}=nz(o.shape,a.shape,s,l,"NHWC",u);RA(i.rank===N.length,(()=>`Error in ${cR}, dy must have the same rank as output ${N.length}, but got ${i.rank}`));const I=tO(N,c.data.get(i.dataId).values),$=oO(o.shape,o.dtype);for(let T=0;T<p;++T)for(let e=0;e<v;++e){const t=e*w-y.top;for(let n=0;n<b;++n){const r=n*x-y.left;for(let o=0;o<g;++o){let a=Number.MIN_SAFE_INTEGER,i=t<0?0:t,s=r<0?0:r;for(let e=0;e<k;++e){const n=t+e*S;if(n>=0&&n<f)for(let t=0;t<C;++t){const l=r+t*E;if(l>=0&&l<m){const r=d[T][n][l][o]+h[e][t][o];r>a&&(a=r,i=n,s=l)}}}$[T][i][s][o]+=I[T][e][n][o]}}}return{dataId:c.write(tF($,o.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};const YZ={kernelName:hR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:o}=t,{canvas:a,options:i}=r,{contextOptions:s,imageOptions:l}=i||{},u=(null===l||void 0===l?void 0:l.alpha)||1,c=(null===s||void 0===s?void 0:s.contextType)||"2d";if("2d"!==c)throw new Error(`Context type ${s.contextType} is not supported by the CPU backend.`);const d=a.getContext(c,(null===s||void 0===s?void 0:s.contextAttributes)||{});if(null==d)throw new Error(`Could not get the context with ${c} type.`);const[h,p]=o.shape.slice(0,2),f=2===o.shape.length?1:o.shape[2],m=n.data.get(o.dataId).values,g="float32"===o.dtype?255:1,v=new Uint8ClampedArray(p*h*4);for(let y=0;y<h*p;++y){const e=[0,0,0,255*u];for(let n=0;n<f;n++){const t=m[y*f+n];if("float32"===o.dtype){if(t<0||t>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${t}.`)}else if("int32"===o.dtype&&(t<0||t>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${t}.`);1===f?(e[0]=t*g,e[1]=t*g,e[2]=t*g):e[n]=t*g}const t=4*y;v[t+0]=Math.round(e[0]),v[t+1]=Math.round(e[1]),v[t+2]=Math.round(e[2]),v[t+3]=Math.round(e[3])}a.width=p,a.height=h;const b=new ImageData(v,p,h);return d.putImageData(b,0,0),o}},QZ=JY(((e,t)=>e*t)),ZZ=vQ(((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n}))),e0=gQ(lP,QZ,ZZ),t0={kernelName:lP,backendName:"cpu",kernelFunc:e0};function n0(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;let s;zY(o,"sum"),s="bool"===o.dtype?fQ({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):UY({inputs:{x:o},backend:n});const l=s.shape.length,u=HA(a,s.shape),c=lL(u,l);let d=u,h=s;null!=c&&(h=FQ({inputs:{x:s},backend:n,attrs:{perm:c}}),d=cL(d.length,l)),sL("sum",d,h.shape.length);const[p,f]=aL(h.shape,d);let m=cQ(n,p,$F(h.dtype,"int32"));const g=FA(f),v=n.data.get(m.dataId).values,b=n.data.get(h.dataId).values;for(let y=0;y<v.length;++y){const e=y*g;let t=0;for(let n=0;n<g;++n)t+=b[e+n];v[y]=t}if(i){const e=m;m=kQ({inputs:{x:m},backend:n,attrs:{shape:iL(m.shape,u)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(s),null!=c&&n.disposeIntermediateTensorInfo(h),m}const r0={kernelName:XP,backendName:"cpu",kernelFunc:n0};const o0={kernelName:fR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:o}=r,a=t,{allDims:i,summedDims:s,idDims:l}=oH(o,a.length);iH(i.length,l,a);const{path:u,steps:c}=sH(s,l),d=c.length;let h=null,p=i.length;const f=[];for(let m=0;m<d;++m){for(const e of c[m]){const{permutationIndices:t,expandDims:r}=aH(p,l[e]);let o;lH(t)?o=a[e]:(o=FQ({inputs:{x:a[e]},backend:n,attrs:{perm:t}}),f.push(o));const i=o.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);_A(o.shape,i)||(o=kQ({inputs:{x:o},backend:n,attrs:{shape:i}}),f.push(o)),null===h?h=o:(h=e0({inputs:{a:o,b:h},backend:n}),f.push(h))}m<d-1&&(u[m]>=0&&(h=n0({inputs:{x:h},backend:n,attrs:{axis:u[m]-(i.length-p),keepDims:!1}}),f.push(h)),p--)}for(const m of f)m!==h&&n.disposeIntermediateTensorInfo(m);return h}};const a0={kernelName:gR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:r,y:o}=t;zY([r,o],"eluGrad");const a=new Float32Array(FA(o.shape)),i=n.data.get(o.dataId).values,s=n.data.get(r.dataId).values;for(let l=0;l<i.length;++l){const e=i[l];a[l]=e>=0?s[l]:s[l]*(e+1)}return n.makeTensorInfo(o.shape,"float32",a)}},i0=JY(((e,t)=>e===t?1:0)),s0=gQ(bR,i0,null,"bool"),l0={kernelName:bR,backendName:"cpu",kernelFunc:s0},u0=Bj,c0=jj,d0=Hj,h0=Vj,p0=Wj,f0=Gj,m0=HY(vR,(e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+u0*n);return t*(1-((((f0*r+p0)*r+h0)*r+d0)*r+c0)*r*Math.exp(-n*n))})),g0={kernelName:vR,backendName:"cpu",kernelFunc:m0},v0=jY((e=>Math.exp(e))),b0=VY(yR,v0,"float32"),y0={kernelName:yR,backendName:"cpu",kernelFunc:b0};function w0(e){const{inputs:t,backend:n,attrs:r}=e,{input:o}=t,{dim:a}=r,i=o.shape.length,s=o.shape.slice();let l=a;return a<0&&(RA(-(i+1)<=a,(()=>`Axis must be in the interval [${-(i+1)}, ${i}]`)),l=i+a+1),s.splice(l,0,1),kQ({inputs:{x:o},backend:n,attrs:{shape:s}})}const x0={kernelName:wR,backendName:"cpu",kernelFunc:w0},k0=jY((e=>Math.expm1(e))),C0=VY(xR,k0),S0={kernelName:xR,backendName:"cpu",kernelFunc:C0},E0=JY(((e,t)=>e/t)),N0=gQ(pR,E0),I0={kernelName:pR,backendName:"cpu",kernelFunc:N0},$0=JY(((e,t)=>e-t)),T0=vQ(((e,t,n,r)=>({real:e-n,imag:t-r}))),A0=gQ(dD,$0,T0),O0={kernelName:dD,backendName:"cpu",kernelFunc:A0};function R0(e,t,n){const r=e.shape,o=r[0],a=r[1],i=n.data.get(e.dataId),s=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,u=[o,a],c=FA(u),d=WA("float32",c),h=WA("float32",c);for(let g=0;g<o;g++){const e=sZ({inputs:{x:s},backend:n,attrs:{begin:[g,0],size:[1,a]}}),r=sZ({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,a]}}),o=lQ({inputs:{real:e,imag:r},backend:n}),{real:i,imag:u}=P0(o,t,n),c=Uj(i,u);for(let t=0;t<a;t++){const e=Jj(c,t);d[g*a+t]=e.real,h[g*a+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o)}const p=n.makeTensorInfo(u,"float32",d),f=n.makeTensorInfo(u,"float32",h),m=lQ({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}function P0(e,t,n){const r=FA(e.shape),o=n.data.get(e.dataId),a=n.data.get(o.complexTensorInfos.real.dataId).values,i=n.data.get(o.complexTensorInfos.imag.dataId).values;if(function(e){return 0===(e&e-1)}(r)){const o=D0(a,i,r,t,n),s=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(s,"float32",o.real),t=n.makeTensorInfo(s,"float32",o.imag),a=n.makeTensorInfo([],"float32",eF(r,"float32")),i=UY({inputs:{x:a},backend:n}),l=I0.kernelFunc({inputs:{a:e,b:a},backend:n}),u=I0.kernelFunc({inputs:{a:t,b:i},backend:n}),c=n.data.get(l.dataId).values,d=n.data.get(u.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),{real:c,imag:d}}return o}{const e=function(e,t,n){const r=new Float32Array(2*t);for(let o=0;o<t;o++){let a=0,i=0;for(let r=0;r<t;r++){const s=Zj(o*r,t,n),l=Jj(e,r);a+=l.real*s.real-l.imag*s.imag,i+=l.real*s.imag+l.imag*s.real}n&&(a/=t,i/=t),Yj(r,a,i,o)}return r}(Uj(a,i),r,t);return Kj(e)}}function D0(e,t,n,r,o){if(1===n)return{real:e,imag:t};const a=Uj(e,t),i=n/2,s=qj(a),l=s.real,u=s.imag,c=[l.length],d=o.makeTensorInfo(c,"float32",l),h=o.makeTensorInfo(c,"float32",u),p=lQ({inputs:{real:d,imag:h},backend:o}),f=Xj(a),m=f.real,g=f.imag,v=[m.length],b=o.makeTensorInfo(v,"float32",m),y=o.makeTensorInfo(v,"float32",g),w=lQ({inputs:{real:b,imag:y},backend:o}),x=D0(l,u,i,r,o),k=x.real,C=x.imag,S=[k.length],E=o.makeTensorInfo(S,"float32",k),N=o.makeTensorInfo(S,"float32",C),I=lQ({inputs:{real:E,imag:N},backend:o}),$=D0(m,g,i,r,o),T=$.real,A=$.imag,O=[T.length],R=o.makeTensorInfo(O,"float32",T),P=o.makeTensorInfo(O,"float32",A),D=lQ({inputs:{real:R,imag:P},backend:o}),F=Qj(n,r),_=[F.real.length],M=o.makeTensorInfo(_,"float32",F.real),z=o.makeTensorInfo(_,"float32",F.imag),L=lQ({inputs:{real:M,imag:z},backend:o}),B=e0({inputs:{a:L,b:D},backend:o}),j=wQ({inputs:{a:I,b:B},backend:o}),H=A0({inputs:{a:I,b:B},backend:o}),V=dQ({inputs:{input:j},backend:o}),W=dQ({inputs:{input:H},backend:o}),G=CZ({inputs:{input:j},backend:o}),U=CZ({inputs:{input:H},backend:o}),K=EZ({inputs:[V,W],backend:o,attrs:{axis:0}}),q=EZ({inputs:[G,U],backend:o,attrs:{axis:0}}),X=o.data.get(K.dataId).values,J=o.data.get(q.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(p),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(y),o.disposeIntermediateTensorInfo(w),o.disposeIntermediateTensorInfo(E),o.disposeIntermediateTensorInfo(N),o.disposeIntermediateTensorInfo(I),o.disposeIntermediateTensorInfo(R),o.disposeIntermediateTensorInfo(P),o.disposeIntermediateTensorInfo(D),o.disposeIntermediateTensorInfo(M),o.disposeIntermediateTensorInfo(z),o.disposeIntermediateTensorInfo(L),o.disposeIntermediateTensorInfo(B),o.disposeIntermediateTensorInfo(j),o.disposeIntermediateTensorInfo(H),o.disposeIntermediateTensorInfo(V),o.disposeIntermediateTensorInfo(G),o.disposeIntermediateTensorInfo(W),o.disposeIntermediateTensorInfo(U),o.disposeIntermediateTensorInfo(K),o.disposeIntermediateTensorInfo(q),{real:X,imag:J}}const F0={kernelName:kR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,o=FA(r.shape),a=r.shape[r.shape.length-1],i=kQ({inputs:{x:r},backend:n,attrs:{shape:[o/a,a]}}),s=R0(i,!1,n),l=kQ({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),l}};function _0(e){const{backend:t,attrs:n}=e,{shape:r,value:o,dtype:a}=n,i=a||JA(o),s=GA(i,FA(r));return function(e,t){e.fill(t)}(s,o),t.makeTensorInfo(r,i,s)}const M0={kernelName:CR,backendName:"cpu",kernelFunc:_0};const z0={kernelName:SR,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:o}=t,a=r,i=WA(o.dtype,FA(o.shape)),[s,l,u,c]=o.shape,d=a.data.get(o.dataId).values;for(let h=0;h<s;h++){const e=h*u*l*c;for(let t=0;t<l;t++){const n=t*(u*c);for(let t=0;t<u;t++){const r=t*c;for(let o=0;o<c;o++){const a=Math.round(u-t-1),s=e+n+r+o;let l=d[s];if(a>=0&&a<u){l=d[e+n+a*c+o]}i[s]=l}}}}return{dataId:a.write(i,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},L0=jY((e=>Math.floor(e))),B0=VY(ER,L0),j0={kernelName:ER,backendName:"cpu",kernelFunc:B0},H0=JY(((e,t)=>Math.floor(e/t))),V0=gQ(NR,H0,null,"int32"),W0={kernelName:NR,backendName:"cpu",kernelFunc:V0};const G0={kernelName:ND,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r;let m=IZ({inputs:{x:o,filter:a},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h}});if(i){const e=m;if("NCHW"===c&&1===i.shape.length&&1!==i.shape[0]){const e=kQ({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});m=wQ({inputs:{a:m,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else m=wQ({inputs:{a:m,b:i},backend:n});n.disposeIntermediateTensorInfo(e)}if(p){const e=m;if("NCHW"===c&&"prelu"===p&&1===s.shape.length&&1!==s.shape[0]){const e=kQ({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=sQ(n,m,p,e,f),n.disposeIntermediateTensorInfo(e)}else m=sQ(n,m,p,s,f);n.disposeIntermediateTensorInfo(e)}return m}};const U0={kernelName:ID,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r;let m=VZ({inputs:{x:o,filter:a},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h}});if(i){const e=m;m=wQ({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){const e=m;m=sQ(n,m,p,s,f),n.disposeIntermediateTensorInfo(e)}return m}};function K0(e,t,n,r,o,a,i,s,l){const u=G_([r,a],n);for(let c=0;c<r;c++){const n=[];let r=0;for(let t=0;t<o;t++){const a=e[c*o+t];r+=a*i[t],n.push(a)}if(r<0||r>=l/a)throw new Error(`Invalid indices: ${n} does not index into ${s}`);for(let e=0;e<a;e++)u.values[c*a+e]=t.get(...t.indexToLoc(r*a+e))}return u}const q0={kernelName:TR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:o}=t,a=FA(r.shape),i=o.shape,s=i[i.length-1],[l,u,c,d]=Dj(r,o);if(0===u)return n.makeTensorInfo(l,r.dtype,[]);const h=K0(n.data.get(o.dataId).values,n.bufferSync(r),r.dtype,u,s,c,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,h.values)}};function X0(e,t,n){const r=G_(n,e.dtype);for(let o=0;o<r.size;++o){const n=r.indexToLoc(o).slice(),a=n[0],i=n[2],s=t.locToIndex([a,i]);n[2]=t.values[s];const l=e.locToIndex(n);0<=l&&l<e.values.length&&(r.values[o]=e.values[l])}return r}const J0={kernelName:$R,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,indices:a}=t,{axis:i,batchDims:s}=r;zY([o,a],"gatherV2");const l=HA(i,o.shape)[0],u=n.data.get(a.dataId).values,c=o.shape[l];for(let y=0;y<u.length;++y){const e=u[y];RA(e<=c-1&&e>=0,(()=>`GatherV2: the index value ${e} is not in [0, ${c-1}]`))}let d=s;null==s&&(d=0);const h=FA(a.shape),p=EH(o,a,l,d),f=kQ({inputs:{x:o},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=kQ({inputs:{x:a},backend:n,attrs:{shape:[p.batchSize,h/p.batchSize]}}),g=[p.batchSize,p.outerSize,h/p.batchSize,p.sliceSize],v=n.bufferSync(m),b=X0(n.bufferSync(f),v,g);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(p.outputShape,b.dtype,b.values)}},Y0=JY(((e,t)=>e>t?1:0)),Q0=gQ(AR,Y0,null,"bool"),Z0={kernelName:AR,backendName:"cpu",kernelFunc:Q0},e1=JY(((e,t)=>e>=t?1:0)),t1=gQ(OR,e1,null,"bool"),n1={kernelName:OR,backendName:"cpu",kernelFunc:t1};const r1={kernelName:PR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,o=FA(r.shape),a=r.shape[r.shape.length-1],i=kQ({inputs:{x:r},backend:n,attrs:{shape:[o/a,a]}}),s=R0(i,!0,n),l=kQ({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),l}},o1=HY(FR,(e=>Number.isFinite(e)?1:0),"bool"),a1={kernelName:FR,backendName:"cpu",kernelFunc:o1},i1=HY(_R,(e=>Math.abs(e)===1/0?1:0),"bool"),s1={kernelName:_R,backendName:"cpu",kernelFunc:i1},l1=HY(MR,(e=>Number.isNaN(e)?1:0),"bool"),u1={kernelName:MR,backendName:"cpu",kernelFunc:l1},c1=JY(((e,t)=>e<t?1:0)),d1=gQ(LR,c1,null,"bool"),h1={kernelName:LR,backendName:"cpu",kernelFunc:d1},p1=JY(((e,t)=>e<=t?1:0)),f1=gQ(BR,p1,null,"bool"),m1={kernelName:BR,backendName:"cpu",kernelFunc:f1};function g1(e,t,n){const r=(t-e)/(n-1),o=rO(n,"float32");o[0]=e;for(let a=1;a<o.length;a++)o[a]=o[a-1]+r;return o}const v1={kernelName:jR,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:o,num:a}=n,i=g1(r,o,a);return t.makeTensorInfo([i.length],"float32",i)}},b1=jY((e=>Math.log(e))),y1=VY(HR,b1),w1={kernelName:HR,backendName:"cpu",kernelFunc:y1},x1=HY(VR,(e=>Math.log1p(e))),k1={kernelName:VR,backendName:"cpu",kernelFunc:x1},C1=JY(((e,t)=>e&&t)),S1=gQ(WR,C1,null,"bool"),E1={kernelName:WR,backendName:"cpu",kernelFunc:S1},N1=HY(GR,(e=>e?0:1),"bool"),I1={kernelName:GR,backendName:"cpu",kernelFunc:N1},$1=JY(((e,t)=>e||t)),T1=gQ(UR,$1,null,"bool"),A1={kernelName:UR,backendName:"cpu",kernelFunc:T1};const O1={kernelName:KR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{depthRadius:a,bias:i,alpha:s,beta:l}=r;zY(o,"LRN");const u=o.shape[3],c=u-1,d=n.data.get(o.dataId).values,h=FA(o.shape),p=new Float32Array(h);function f(e){const t=e%u;let n=e-t+Math.max(0,t-a);const r=e-t+Math.min(t+a,c);let o=0;for(;n<=r;n++){const e=d[n];o+=e*e}return o}for(let m=0;m<h;m++){const e=f(m),t=d[m]*Math.pow(i+s*e,-l);p[m]=t}return n.makeTensorInfo(o.shape,o.dtype,p)}};const R1={kernelName:qR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,y:a,dy:i}=t,{depthRadius:s,bias:l,alpha:u,beta:c}=r;zY(i,"LRNGrad");const d=FA(i.shape),h=i.shape[3],p=n.data.get(i.dataId).values,f=n.data.get(o.dataId).values,m=n.data.get(a.dataId).values,g=new Float32Array(d),v=d;for(let b=0;b<v;b++){const e=b%h,t=b-e+Math.max(0,e-s),n=b-e+Math.min(h,e+s+1);let r=0;for(let o=t;o<n;o++)r+=Math.pow(f[o],2);r=u*r+l;for(let o=t;o<n;o++){let e=-2*u*c*f[o]*m[b]/r;b===o&&(e+=Math.pow(r,-c)),e*=p[b],g[o]+=e}}return n.makeTensorInfo(i.shape,o.dtype,g)}};function P1(e,t,n,r){const o=WA(r,FA(n));for(let a=0;a<o.length;++a){const n=a*t;let r=e[n];for(let o=0;o<t;++o){const t=e[n+o];(Number.isNaN(t)||t>r)&&(r=t)}o[a]=r}return o}function D1(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reductionIndices:a,keepDims:i}=r,s=n;let l=o.shape;const u=l.length,c=HA(a,l);let d=c;const h=lL(d,u);let p=s.data.get(o.dataId).values;if(null!=h){const e=new Array(u);for(let t=0;t<e.length;t++)e[t]=l[h[t]];p=DQ(p,l,o.dtype,h,e),d=cL(d.length,u),l=e}zY(o,"max"),sL("max",d,u);const[f,m]=aL(l,d),g=P1(p,FA(m),f,o.dtype),v=s.write(g,f,o.dtype);let b=f;if(i){b=iL(f,c)}return{dataId:v,shape:b,dtype:o.dtype}}const F1={kernelName:XR,backendName:"cpu",kernelFunc:D1},_1=JY(((e,t)=>Math.max(e,t))),M1=gQ(JR,_1),z1={kernelName:JR,backendName:"cpu",kernelFunc:M1};const L1={kernelName:YR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;zY(o,"maxPool");const{filterSize:a,strides:i,pad:s,dimRoundingMode:l}=r;RA(pz(i,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const u=rz(o.shape,a,i,1,s,l);let c;if(1===u.filterWidth&&1===u.filterHeight&&_A(u.inShape,u.outShape))c=UY({inputs:{x:o},backend:n});else{const e=n.data.get(o.dataId).values,t=ZA(o.shape),r=QQ(e,o.shape,o.dtype,t,u,"max");c=n.makeTensorInfo(u.outShape,o.dtype,r.values)}return c}};const B1={kernelName:ZR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:l,dataFormat:u}=r;zY(o,"maxPool3d");const c=oz(o.shape,a,i,1,s,l,u),d=eZ(n.data.get(o.dataId).values,o.shape,o.dtype,ZA(o.shape),c,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};const j1={kernelName:eP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,{filterSize:i,strides:s,pad:l,dimRoundingMode:u}=r;zY([o,a],"maxPool3DGrad");const c=oz(a.shape,i,s,1,l,u),d=function(e,t){const n=G_(t.outShape,"int32"),r=t.strideDepth,o=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let v=0;v<t.outDepth;++v){const b=v*r-h;let y=b;for(;y<0;)y+=i;const w=Math.min(t.inDepth,u+b);for(let r=0;r<t.outHeight;++r){const u=r*o-p;let h=u;for(;h<0;)h+=s;const x=Math.min(t.inHeight,c+u);for(let o=0;o<t.outWidth;++o){const p=o*a-f;let k=p;for(;k<0;)k+=l;const C=Math.min(t.inWidth,d+p);let S=Number.NEGATIVE_INFINITY,E=-1;for(let t=y;t<w;t+=i){const n=t-b;for(let r=h;r<x;r+=s){const o=r-u;for(let a=k;a<C;a+=l){const i=a-p,s=e.get(m,t,r,a,g);s>=S&&(S=s,E=n*c*d+o*c+i)}}}n.set(E,m,v,r,o,g)}}}return n}(n.bufferSync(a),c),h=c.strideDepth,p=c.strideHeight,f=c.strideWidth,m=c.dilationDepth,g=c.dilationHeight,v=c.dilationWidth,b=c.effectiveFilterDepth,y=c.effectiveFilterHeight,w=c.effectiveFilterWidth,x=b-1-c.padInfo.front,k=w-1-c.padInfo.left,C=y-1-c.padInfo.top,S=G_(a.shape,"float32"),E=n.bufferSync(o);for(let N=0;N<c.batchSize;++N)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inDepth;++t)for(let n=0;n<c.inHeight;++n)for(let r=0;r<c.inWidth;++r){const o=t-x,a=n-C,i=r-k;let s=0;for(let t=0;t<b;t+=m){const n=(o+t)/h;if(!(n<0||n>=c.outDepth||Math.floor(n)!==n))for(let r=0;r<y;r+=g){const o=(a+r)/p;if(!(o<0||o>=c.outHeight||Math.floor(o)!==o))for(let a=0;a<w;a+=v){const l=(i+a)/f;if(l<0||l>=c.outWidth||Math.floor(l)!==l)continue;const u=b*y*w-1-d.get(N,n,o,l,e)===t*y*w+r*w+a?1:0;if(0===u)continue;s+=E.get(N,n,o,l,e)*u}}}S.set(s,N,t,n,r,e)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};const H1={kernelName:QR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a,output:i}=t,s=a;zY([a,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,h=rz(s.shape,l,u,1,c,d),p=n.data.get(s.dataId).values,f=G_(h.outShape,s.dtype,ZQ(p,s.shape,s.dtype,h).values),m=h.strideHeight,g=h.strideWidth,v=h.dilationHeight,b=h.dilationWidth,y=h.effectiveFilterHeight,w=h.effectiveFilterWidth,x=w-1-h.padInfo.left,k=y-1-h.padInfo.top,C=G_(s.shape,"float32"),S=n.data.get(o.dataId).values,E=G_(o.shape,"float32",S);for(let N=0;N<h.batchSize;++N)for(let e=0;e<h.inChannels;++e)for(let t=0;t<h.inHeight;++t)for(let n=0;n<h.inWidth;++n){const r=t-k,o=n-x;let a=0;for(let t=0;t<y;t+=v){const n=(r+t)/m;if(!(n<0||n>=h.outHeight||Math.floor(n)!==n))for(let r=0;r<w;r+=b){const i=(o+r)/g;if(i<0||i>=h.outWidth||Math.floor(i)!==i)continue;const s=y*w-1-f.get(N,n,i,e)===t*w+r?1:0;if(0===s)continue;a+=E.get(N,n,i,e)*s}}C.set(a,N,t,n,e)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};const V1={kernelName:tP,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:o}=t,{filterSize:a,strides:i,pad:s,includeBatchInIndex:l}=n,u=r;zY(o,"MaxPoolWithArgmax");const c=u.data.get(o.dataId).values,d=rz(o.shape,a,i,[1,1],s),[h,p]=function(e,t,n,r,o){const a=QQ(e,0,n,ZA(t),o,"max"),i=ZQ(e,t,n,o,!0,r);return[a.values,i.values]}(c,o.shape,o.dtype,l,d),f=u.write(h,d.outShape,o.dtype),m=u.write(p,d.outShape,o.dtype);return[{dataId:f,shape:d.outShape,dtype:o.dtype},{dataId:m,shape:d.outShape,dtype:"int32"}]}};const W1={kernelName:nP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=HA(a,o.shape),l=FA(aL(o.shape,s)[1]),u=[],c=n.makeTensorInfo([],"float32",new Float32Array([l]));u.push(c);const d=fQ({inputs:{x:o},backend:n,attrs:{dtype:"float32"}});u.push(d);const h=N0({inputs:{a:d,b:c},backend:n});u.push(h);const p=n0({inputs:{x:h},backend:n,attrs:{axis:a,keepDims:i}});return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}};const G1={kernelName:rP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;zY(o,"min");const s=HA(a,o.shape);let l=s;const u=lL(l,o.shape.length);let c=o;null!=u&&(c=FQ({inputs:{x:o},backend:n,attrs:{perm:u}}),l=cL(l.length,o.shape.length)),sL("min",l,c.shape.length);const[d,h]=aL(c.shape,l),p=FA(h),f=rO(FA(d),c.dtype),m=n.data.get(c.dataId).values;for(let v=0;v<f.length;++v){const e=v*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];(Number.isNaN(r)||r<t)&&(t=r)}f[v]=t}null!=u&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,f);if(i){const e=kQ({inputs:{x:g},backend:n,attrs:{shape:iL(d,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}},U1=JY(((e,t)=>Math.min(e,t))),K1=gQ(oP,U1),q1={kernelName:oP,backendName:"cpu",kernelFunc:K1};const X1={kernelName:aP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:a,mode:i}=r;zY(o,"mirrorPad");const s=a.map(((e,t)=>e[0]+o.shape[t]+e[1])),l=a.map((e=>e[0])),u=a.map(((e,t)=>e[0]+o.shape[t])),c="reflect"===i?0:1,d=n.data.get(o.dataId).values,h=o.shape.length,p=ZA(o.shape),f=FA(s),m=s.length,g=ZA(s),v=WA(o.dtype,f);for(let b=0;b<f;b++){let e=sO(b,m,g);for(let n=0;n<m;n++)e[n]<l[n]?e[n]=2*l[n]-e[n]-c:e[n]>=u[n]&&(e[n]=2*(u[n]-1)-e[n]+c);e=e.map(((e,t)=>e-l[t]));const t=iO(e,h,p);v[b]=d[t]}return{dataId:n.write(v,s,o.dtype),shape:s,dtype:o.dtype}}},J1=JY(((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),Y1=gQ(iP,J1),Q1={kernelName:iP,backendName:"cpu",kernelFunc:Y1};function Z1(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{dim:a}=r,i=o.shape.length;let s=a;if(-1===s&&(s=i-1),s!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${s}`);const l=HA([s],o.shape),u=D1({inputs:{x:o},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=iL(u.shape,l),d=kQ({inputs:{x:u},backend:n,attrs:{shape:c}}),h=A0({inputs:{a:o,b:d},backend:n}),p=b0({inputs:{x:h},backend:n}),f=n0({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),m=kQ({inputs:{x:f},backend:n,attrs:{shape:c}}),g=N0({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const e2={kernelName:QP,backendName:"cpu",kernelFunc:Z1};const t2={kernelName:sP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{numSamples:a,seed:i,normalized:s}=r;zY(o,"multinomial");const l=s?o:Z1({inputs:{logits:o},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,h=[u,a],p=rO(FA(h),"int32");for(let f=0;f<u;++f){const e=f*c,t=new Float32Array(c-1);t[0]=d[e];for(let o=1;o<t.length;++o)t[o]=t[o-1]+d[e+o];const n=$L.alea(i.toString()),r=f*a;for(let o=0;o<a;++o){const e=n();p[r+o]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){p[r+o]=n;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",p)}};function n2(e,t,n){const r=eF(-1,n);return QZ([],t,r,e,n)}const r2={kernelName:uP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;zY(r,"neg");const o=n.data.get(r.dataId).values,[a,i]=n2(o,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,a)}},o2=AB;const a2={kernelName:dP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:l}=r;zY(o,"NonMaxSuppression");const u=n.data.get(o.dataId).values,c=n.data.get(a.dataId).values,{selectedIndices:d}=o2(u,c,i,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},i2=OB;const s2={kernelName:hP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r;zY(o,"NonMaxSuppressionPadded");const c=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,{selectedIndices:h,validOutputs:p}=i2(c,d,i,s,l,u);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},l2=RB;const u2={kernelName:pP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r;zY(o,"NonMaxSuppressionWithScore");const c=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,h=i,p=s,f=l,m=u,{selectedIndices:g,selectedScores:v}=l2(c,d,h,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}},c2=JY(((e,t)=>e!==t?1:0)),d2=gQ(cP,c2,null,"bool"),h2={kernelName:cP,backendName:"cpu",kernelFunc:d2};const p2={kernelName:mP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o}=t,{dtype:a,depth:i,onValue:s,offValue:l}=r;zY(o,"oneHot");const u=FA(o.shape),c=new Float32Array(u*i);c.fill(l);const d=n.data.get(o.dataId).values;for(let h=0;h<u;++h)d[h]>=0&&d[h]<i&&(c[h*i+d[h]]=s);return n.makeTensorInfo([...o.shape,i],a,c)}};function f2(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=dQ({inputs:{input:r},backend:n}),t=f2({inputs:{x:e},backend:n}),o=CZ({inputs:{input:r},backend:n}),a=f2({inputs:{x:o},backend:n}),i=lQ({inputs:{real:t,imag:a},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),i}return _0({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const m2={kernelName:xD,backendName:"cpu",kernelFunc:f2};const g2={kernelName:fP,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:o}=n;if("string"===o.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===o.dtype){const t=dQ({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r}),a=CZ({inputs:{input:o},backend:r}),i=f2({inputs:{x:a},backend:r}),s=lQ({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),s}return _0({backend:r,attrs:{shape:o.shape,value:1,dtype:o.dtype}})}};function v2(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r;if(1===t.length)return w0({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const a=t[0].shape,i=t[0].dtype;t.forEach((e=>{PA(a,e.shape,"All tensors passed to stack must have matching shapes"),RA(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],l=t.map((e=>{const t=w0({inputs:{input:e},backend:n,attrs:{dim:o}});return s.push(t),t})),u=EZ({inputs:l,backend:n,attrs:{axis:o}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}const b2={kernelName:gP,backendName:"cpu",kernelFunc:v2};const y2={kernelName:vP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:a,constantValue:i}=r;zY(o,"pad");const s=a.map(((e,t)=>e[0]+o.shape[t]+e[1])),l=a.map((e=>e[0])),u=n.data.get(o.dataId).values,c=FA(o.shape),d=o.shape.length,h=ZA(o.shape),p=FA(s),f=s.length,m=ZA(s),g=WA(o.dtype,p);0!==i&&g.fill(i);for(let v=0;v<c;v++){const e=sO(v,d,h).map(((e,t)=>e+l[t]));g[iO(e,f,m)]=u[v]}return{dataId:n.write(g,s,o.dtype),shape:s,dtype:o.dtype}}},w2=JY(((e,t)=>Math.pow(e,t))),x2=gQ(bP,w2),k2={kernelName:bP,backendName:"cpu",kernelFunc:x2};function C2(e,t,n,r){const[o,a]=aL(e,r),i=$F(t,"int32"),s=rO(FA(o),i),l=FA(a);for(let u=0;u<s.length;++u){const e=u*l;let t=1;for(let r=0;r<l;++r)t*=n[e+r];s[u]=t}return{outVals:s,outShape:o,outDtype:i}}const S2={kernelName:wP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;zY(o,"prod");const s=o.shape.length,l=HA(a,o.shape),u=lL(l,s);let c=l,d=o;const h=[];null!=u&&(d=FQ({inputs:{x:o},backend:n,attrs:{perm:u}}),h.push(d),c=cL(c.length,s));const p=n.data.get(d.dataId).values,{outVals:f,outShape:m,outDtype:g}=C2(d.shape,d.dtype,p,c);let v=m;return i&&(v=iL(m,l)),h.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(v,g,f)}};function E2(e,t,n,r){const o=[];let a=0;const i=t.length-1+n.length,s=new Array(i).fill(null).map((()=>[0]));!function(e,t){for(let n=0;n<e.length;++n){const r=e[n],o=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>o)throw new Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let l=1;for(let u=0;u<t.length-1;++u){l*=t[u];const e=t[u+1];for(let t=1;t<l+1;++t)s[u].push(t*e)}for(let u=0;u<e.length;++u){let r=e[u],i=e[u]+1;for(let e=0;e<n.length;++e){const o=n[e],a=e+t.length-1;if(a>=0){const e=s[a],t=e[e.length-1]-o[r];for(let n=r;n<i;++n)s[a].push(o[n+1]+t)}r=o[r],i=o[i]}i!==r&&(o.push([r,i]),a+=i-r)}return{outSplits:s,valueSlices:o,numValues:a}}function N2(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function I2(e,t,n,r,o){const a=t.slice();a[0]=o;const i=GA(n,FA(a)),s=e.length;return function(e,t,n,r,o,a){const i=N2(t,2)[1],s=N2(a,2)[1];let l=0;for(const u of n)for(let t=u[0];t<u[1];++t){for(let n=0;n<r;++n)o[l*s+n]=e[t*i+n];++l}}(e,t,r,0===s?0:s/t[0],i,a),[i,a]}function $2(e,t,n,r,o,a,i,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach(((e,r)=>{if(e<0||e>=n){const o=sO(r,t.length,ZA(t)).join(",");throw new Error(`indices[${o}] = ${e} is not in [0, ${n})`)}}))}(a,i,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:u,valueSlices:c,numValues:d}=E2(a,i,e,l),h=function(e){const t=[];for(let n=0;n<e.length;++n){const r=GA("int32",e[n].length);t.push(r),e[n].forEach(((e,t)=>r[t]=e))}return t}(u),p=I2(n,r,o,c,d);return[h,p[0],p[1]]}const T2={kernelName:xP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:o,paramsDenseValues:a,indices:i}=t,{outputRaggedRank:s}=r,l=o.map((e=>n.data.get(e.dataId).values)),u=o.map((e=>e.shape)),c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,[h,p,f]=$2(l,u,c,a.shape,a.dtype,d,i.shape),m=h.map((e=>n.makeTensorInfo([e.length],"int32",e))),g=n.makeTensorInfo(f,a.dtype,p);return m.concat([g])}},A2=2147483647;function O2(e,t,n,r,o,a,i){if(t.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const s=0===t.length,l=0===o.length,u=0===i.length,c=[];s||c.push(t[0]),l||c.push(o[0]),u||c.push(i[0]);for(let m=1;m<c.length;++m)if(c[m]!==c[m-1])throw new Error("starts, limits, and deltas must have the same shape");const d=0===c.length?1:c[0],h=GA("int32",d+1);h[0]=0;for(let m=0;m<d;++m){const t=s?e[0]:e[m],n=l?r[0]:r[m],o=u?a[0]:a[m];if(0===o)throw new Error("Requires delta != 0");let i;if(o>0&&n<t||o<0&&n>t)i=0;else if(i=Math.ceil(Math.abs((n-t)/o)),i>A2)throw new Error(`Requires ((limit - start) / delta) <= ${A2}`);h[m+1]=h[m]+i}const p=GA(n,h[d]);let f=0;for(let m=0;m<d;++m){const t=h[m+1]-h[m];let n=s?e[0]:e[m];const r=u?a[0]:a[m];for(let e=0;e<t;++e)p[f++]=n,n+=r}return[h,p]}const R2={kernelName:kP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:o,deltas:a}=t,i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values,[u,c]=O2(i,r.shape,r.dtype,s,o.shape,l,a.shape);return[n.makeTensorInfo([u.length],"int32",u),n.makeTensorInfo([c.length],r.dtype,c)]}};var P2=xj;class D2{constructor(e,t,n,r,o,a,i,s,l,u){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=o,this.defaultValue=a,this.defaultValueShape=i,this.rowPartitionValues=s,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=Cj(u),this.raggedRank=Sj(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===P2.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===P2.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case P2.VALUE_ROWIDS:return D2.getMaxWidthValueRowID(t);case P2.ROW_SPLITS:return D2.getMaxWidthRowSplit(t);default:throw new Error(`Cannot handle partition type ${P2[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){const t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,r=e[0],o=0;for(let a=1;a<t;++a){const t=e[a];t!==r&&(r=t,o=Math.max(a-n,o),n=a)}return Math.max(t-n,o)}tensorShapeFromTensor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return _2(e,n)}calculateOutputSize(e){const t=this.valuesShape;Ej(this.defaultValueShape,t);const n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=kj(this.raggedRank,n,t);r[0]<0&&(r[0]=e);for(let o=1;o<=this.raggedRank;++o)r[o]<0&&(r[o]=this.getMaxWidth(o));return r}calculateFirstParentOutputIndex(e,t,n){const r=Math.min(e,n),o=[];let a=0;for(let i=0;i<r;++i,a+=t)o.push(a);for(let i=r;i<e;++i)o.push(-1);return RA(o.length===e,(()=>"Final length of result must be equal to firstDimension.")),o}calculateOutputIndexRowSplit(e,t,n,r){const o=e.length,a=[];for(let i=0;i<o-1;++i){const o=e[i+1]-e[i];let s=Math.min(r,o),l=t[i];-1===l&&(s=0);for(let e=0;e<s;++e)a.push(l),l+=n;for(let e=0;e<o-s;++e)a.push(-1)}if(o>0&&a.length!==e[o-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(e,t,n,r){const o=e.length,a=[];if(0===o)return[];let i=0,s=e[0];if(s>=t.length)throw new Error(`Got currentValueRowId=${s}, which is not less than ${t.length}`);let l=t[s];a.push(l);for(let u=1;u<o;++u){const o=e[u];if(o===s)l>=0&&(++i,i<r?l+=n:l=-1);else{if(i=0,s=o,o>=t.length)throw new Error(`Got nextValueRowId=${o} which is not less than ${t.length}`);l=t[o]}a.push(l)}if(a.length!==e.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(e,t,n,r){const o=this.getRowPartitionTensor(e),a=this.getRowPartitionTypeByDimension(e);switch(a){case P2.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(o,t,n,r);case P2.ROW_SPLITS:if(o.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${o.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(o,t,n,r);default:throw new Error(`Unsupported partition type: ${P2[a]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case P2.FIRST_DIM_SIZE:return e[0];case P2.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case P2.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${P2[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let a=n.length-2;a>=0;--a)n[a]=n[a+1]*t[a+1];const r=_2(t,!1),o=GA(this.valuesDType,FA(r));if(n[0]*t[0]>0){let a=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e){a=this.calculateOutputIndex(e-1,a,n[e],t[e])}this.setOutput(this.raggedRank,a,o,r)}return[r,o]}setOutput(e,t,n,r){if(0===n.length)return;const o=this.values,a=n;let i=r.slice();i=i.slice(e+1);const s=FA(i),l=t.length;let u=this.defaultValue;if(u.length!==s&&1!==u.length){const e=this.defaultValueShape;o_((()=>{const t=vz(u,e),n=Sz(t,i);u=n.dataSync()}))}let c=0,d=0,h=0;for(let p=0;p<=l;++p){let e=p<l?t[p]:-1;if(e!==h){if(d<h){const e=o.subarray(c*s);F2(a.subarray(d*s),e,(h-d)*s)}if(p>=l){const t=n.length;e=Math.floor(t/s)}if(e>h)if(1===this.defaultValue.length)a.subarray(h*s,e*s).fill(this.defaultValue[0]),h=e;else for(;e>h;){F2(a.slice(h*s),u,s),++h}e<0?(c=p+1,d=h):(c=p,d=h,h=d+1)}else++h}}}function F2(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function _2(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function M2(e,t,n,r,o,a,i,s,l,u){return new D2(e,t,n,r,o,a,i,s,l,u).compute()}const z2={kernelName:CP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:o,values:a,defaultValue:i,rowPartitionTensors:s}=t,{rowPartitionTypes:l}=r,u=n.data.get(o.dataId).values,c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,h=s.map((e=>n.data.get(e.dataId).values)),p=s.map((e=>e.shape)),[f,m]=M2(u,o.shape,c,a.shape,a.dtype,d,i.shape,h,p,l);return n.makeTensorInfo(f,a.dtype,m)}};function L2(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return rO(0,r);const o=rO(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),o[0]=e;for(let a=1;a<o.length;a++)o[a]=o[a-1]+n;return o}const B2={kernelName:SP,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:o,dtype:a,step:i}=n,s=L2(r,o,i,a);return t.makeTensorInfo([s.length],a,s)}},j2=HY(NP,(e=>1/e)),H2={kernelName:NP,backendName:"cpu",kernelFunc:j2};const V2={kernelName:OP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=r;zY(o,"resizeBilinear");const l=ZA(o.shape),[u,c]=s,[d,h,p,f]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(FA([d,u,c,f])),v=[a&&u>1?h-1:h,a&&c>1?p-1:p],b=[a&&u>1?u-1:u,a&&c>1?c-1:c];let y=0;const w=v[0]/b[0],x=v[1]/b[1];for(let k=0;k<d;k++)for(let e=0;e<u;e++){let t;t=i?w*(e+.5)-.5:w*e;const n=Math.max(0,Math.floor(t)),r=t-n,o=Math.min(h-1,Math.ceil(t)),a=k*l[0]+n*l[1],s=k*l[0]+o*l[1];for(let e=0;e<c;e++){let t;t=i?x*(e+.5)-.5:x*e;const n=Math.max(0,Math.floor(t)),o=t-n,u=Math.min(p-1,Math.ceil(t)),c=a+n*l[2],d=s+n*l[2],h=a+u*l[2],v=s+u*l[2];for(let e=0;e<f;e++){const t=m[c+e],n=m[d+e],a=t+(m[h+e]-t)*o,i=a+(n+(m[v+e]-n)*o-a)*r;g[y++]=i}}}return n.makeTensorInfo([d,u,c,f],"float32",g)}};const W2={kernelName:RP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:a}=t,{alignCorners:i}=r;zY([a,o],"resizeBilinearGrad");const s=ZA(o.shape),[l,u,c,d]=o.shape,[,h,p]=a.shape,f=new Float32Array(l*u*c*d),m=[i&&h>1?u-1:u,i&&p>1?c-1:c],g=[i&&h>1?h-1:h,i&&p>1?p-1:p],v=m[0]/g[0],b=m[1]/g[1],y=n.data.get(a.dataId).values;let w=0;for(let x=0;x<l;x++){const e=x*s[0];for(let t=0;t<h;t++){const n=t*v,r=Math.floor(n),o=Math.min(Math.ceil(n),u-1),a=e+r*s[1],i=e+o*s[1],l=n-r,h=1-l;for(let e=0;e<p;e++){const t=e*b,n=Math.floor(t),r=Math.min(Math.ceil(t),c-1),o=t-n,u=1-o,p=a+n*s[2],m=a+r*s[2],g=i+n*s[2],v=i+r*s[2],x=h*u,k=h*o,C=l*u,S=l*o;for(let e=0;e<d;e++){const t=y[w++];f[p+e]+=t*x,f[m+e]+=t*k,f[g+e]+=t*C,f[v+e]+=t*S}}}}return n.makeTensorInfo([l,c,u,d],"float32",f)}};const G2={kernelName:TP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=r;zY(o,"resizeNearestNeighbor");const l=ZA(o.shape),[u,c]=s,[d,h,p,f]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(d*u*c*f),v=[a&&u>1?h-1:h,a&&c>1?p-1:p],b=[a&&u>1?u-1:u,a&&c>1?c-1:c],y=v[0]/b[0],w=v[1]/b[1];let x=0;for(let k=0;k<d;k++){const e=k*l[0];for(let t=0;t<u;t++){const n=i?y*(t+.5):y*t;let r=Math.min(h-1,a?Math.round(n):Math.floor(n));i&&(r=Math.max(0,r));const o=e+r*l[1];for(let e=0;e<c;e++){const t=i?w*(e+.5):w*e;let n=Math.min(p-1,a?Math.round(t):Math.floor(t));i&&(n=Math.max(0,n));const r=o+n*l[2];for(let e=0;e<f;e++){const t=m[r+e];g[x++]=t}}}}return n.makeTensorInfo([d,u,c,f],o.dtype,g)}};const U2={kernelName:AP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:a}=t,{alignCorners:i}=r;zY([a,o],"resizeNearestNeighborGrad");const s=ZA(o.shape),l=ZA(a.shape),[u,c,d,h]=o.shape,[,p,f]=a.shape,m=new Float32Array(u*c*d*h),g=n.data.get(a.dataId).values,v=[i&&p>1?c-1:c,i&&f>1?d-1:d],b=[i&&p>1?p-1:p,i&&f>1?f-1:f],y=v[0]/b[0],w=v[1]/b[1],x=1/y,k=1/w,C=2*Math.ceil(x)+2,S=2*Math.ceil(k)+2;for(let E=0;E<u;E++){const e=E*s[0];for(let t=0;t<c;t++){const n=e+t*s[1],r=Math.floor(t*x),o=Math.floor(r-C/2);for(let a=0;a<d;a++){const r=n+a*s[2],u=Math.floor(a*k),v=Math.floor(u-S/2);for(let n=0;n<h;n++){let s=0;for(let r=0;r<C;r++){const u=r+o;if(u<0||u>=p)continue;const h=e+u*l[1],m=u*y;if(t===Math.min(c-1,i?Math.round(m):Math.floor(m)))for(let e=0;e<S;e++){const t=e+v;if(t<0||t>=f)continue;const r=h+t*l[2],o=t*w;a===Math.min(d-1,i?Math.round(o):Math.floor(o))&&(s+=g[r+n])}}m[r+n]=s}}}}return n.makeTensorInfo(o.shape,o.dtype,m)}};const K2={kernelName:DP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dims:a}=r;zY(o,"reverse");const i=o.shape.length,s=HA(a,o.shape);if(0===i)return UY({inputs:{x:o},backend:n});const l=new mF(o.shape,o.dtype),u=n.bufferSync(o);for(let c=0;c<l.size;c++){const e=l.indexToLoc(c),t=e.slice();s.forEach((e=>t[e]=o.shape[e]-1-t[e])),l.set(u.get(...t),...e)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},q2={kernelName:SD,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:o}=t,{radians:a,fillValue:i,center:s}=n,l=r,u=WA(o.dtype,FA(o.shape)),[c,d,h,p]=o.shape,[f,m]=$j(s,d,h),g=Math.sin(a),v=Math.cos(a),b=l.data.get(o.dataId).values;for(let y=0;y<c;y++){const e=y*h*d*p;for(let t=0;t<d;t++){const n=t*(h*p);for(let r=0;r<h;r++){const o=r*p;for(let a=0;a<p;a++){const s=[c,t,r,a],l=s[2],y=s[1];let w=(l-f)*v-(y-m)*g,x=(l-f)*g+(y-m)*v;w=Math.round(w+f),x=Math.round(x+m);let k=i;if("number"!==typeof i&&(k=3===a?255:i[a]),w>=0&&w<h&&x>=0&&x<d){k=b[e+x*(h*p)+w*p+a]}u[e+n+o+a]=k}}}}return{dataId:l.write(u,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},X2=HY(FP,(e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),J2={kernelName:FP,backendName:"cpu",kernelFunc:X2},Y2=jY((e=>1/Math.sqrt(e))),Q2=VY(_P,Y2),Z2={kernelName:_P,backendName:"cpu",kernelFunc:Q2};function e3(e,t,n,r,o,a,i,s,l,u){const c=[r/o,o],d=e.values,h=t.values;if(0===r)return G_(n,t.dtype);const p=l instanceof mF?l:G_(c,t.dtype);"string"===typeof l||"number"===typeof l?p.values.fill(l):"boolean"===typeof l&&p.values.fill(+l);for(let f=0;f<a;f++){const e=[];let a=0;for(let t=0;t<i;t++){const n=d[f*i+t];e.push(n),a+=n*s[t]}if(a<0||a>=r/o)throw new Error(`Invalid indices: ${e} does not index into ${n}`);for(let n=0;n<o;n++)u?p.values[a*o+n]+=h[f*o+n]:p.values[a*o+n]=0===t.rank?h[0]:h[f*o+n]}return p}const t3={kernelName:MP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o,updates:a}=t,{shape:i}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Mj(0,o,i),h=e3(n.bufferSync(o),n.bufferSync(a),i,d,u,l,s,c,0,!0);return n.makeTensorInfo(i,h.dtype,h.values)}};function n3(e,t){let n=0,r=e.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),e[o]<t?n=o+1:r=o;return r}function r3(e,t){let n=0,r=e.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),e[o]<=t?n=o+1:r=o;return r}const o3={kernelName:LP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:o,values:a}=t,{side:i}=r,s=function(e,t,n,r,o,a){const i=GA("int32",n*o);for(let s=0;s<n;++s){const n=e.slice(s*r,(s+1)*r),l=s*o;for(let e=0;e<o;++e)i[l+e]="left"===a?n3(n,t[e+l]):r3(n,t[e+l])}return i}(n.data.get(o.dataId).values,n.data.get(a.dataId).values,o.shape[0],o.shape[1],a.shape[1],i);return n.makeTensorInfo(a.shape,"int32",s)}};const a3={kernelName:BP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:o,e:a}=t;zY([r,o,a],"select");const i=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,u=n.data.get(a.dataId).values,c=$F(o.dtype,a.dtype),d=rO(FA(o.shape),c);let h=0;const p=0===i||i>1||1===o.shape.length?1:FA(o.shape.slice(1));for(let f=0;f<s.length;f++)for(let e=0;e<p;e++)1===s[f]?d[h++]=l[f]:d[h++]=u[f];return n.makeTensorInfo(o.shape,c,d)}},i3=zj,s3=Lj,l3=HY(jP,(e=>e>=0?s3*e:i3*(Math.exp(e)-1))),u3={kernelName:jP,backendName:"cpu",kernelFunc:l3},c3=HY(GP,(e=>e<0?-1:e>0?1:0)),d3={kernelName:GP,backendName:"cpu",kernelFunc:c3},h3=HY(VP,(e=>Math.sin(e))),p3={kernelName:VP,backendName:"cpu",kernelFunc:h3},f3=HY(WP,(e=>Math.sinh(e))),m3={kernelName:WP,backendName:"cpu",kernelFunc:f3},g3=Math.log(1.1920928955078125e-7)+2,v3=HY(KP,(e=>{const t=e>-g3,n=e<g3,r=Math.exp(e);let o;return o=n?r:t?e:Math.log(1+r),o})),b3={kernelName:KP,backendName:"cpu",kernelFunc:v3};const y3={kernelName:JP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:a,paddings:i}=r;zY([o],"spaceToBatchND");const s=FA(a),l=[[0,0]];l.push(...i);for(let g=1+a.length;g<o.shape.length;++g)l.push([0,0]);const u=y2.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),c=Tj(u.shape,a,s,!1),d=Aj(c.length,a.length,!1),h=Oj(u.shape,a,s,!1),p=kQ({inputs:{x:u},backend:n,attrs:{shape:c}}),f=FQ({inputs:{x:p},backend:n,attrs:{perm:d}}),m=kQ({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}};function w3(e,t,n,r,o,a,i){const s=t[0],l=a[0],u=new Array(l),c=new Array(s),d=t[1];if(0===l){if(0!==s)throw new Error(dH(s));return[GA(n,0),[0,d],GA(o,0),u,c]}let h=!0,p=0;const f=new Array(l).fill(0);for(let g=0;g<s;++g){const t=e[g*d];if(t<0)throw new Error(hH(g,t));if(t>=l)throw new Error(pH(g,t,l));++f[t],h=h&&t>=p,p=t}let m=!0;for(let g=0;g<l;++g){const e=0===f[g];u[g]=e,m=m&&!e,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&h){const t=e,n=r;for(let e=0;e<s;++e)c[e]=e;return[t,[s,d],n,u,c]}{const t=f[l-1],a=GA(n,t*d),h=GA(o,t),p=new Array(l).fill(0);for(let n=0;n<s;++n){const t=e[n*d],o=p[t],i=(0===t?0:f[t-1])+o;p[t]++;for(let r=0;r<d;++r)a[i*d+r]=e[n*d+r];h[i]=r[n],c[n]=i}for(let e=0;e<l;++e){if(0===p[e]){const t=0===e?0:f[e-1];a[t*d+0]=e;for(let e=1;e<d;++e)a[t*d+e]=0;h[t]=i}}return[a,[t,d],h,u,c]}}const x3={kernelName:ZP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:o,denseShape:a,defaultValue:i}=t;if(1!==a.shape.length)throw new Error(`Dense shape must be a vector, saw:\n        ${a.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n        ${r.shape}`);if(1!==o.shape.length)throw new Error(`Values must be a vector, saw:\n        ${o.shape}`);if(0!==i.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${i.shape}`);const s=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values[0],[d,h,p,f,m]=w3(s,r.shape,r.dtype,l,o.dtype,u,c);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],o.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};function k3(e,t,n,r,o){const a=FA(r),i=t[0],s=o.length,l=[];let u=1,c=-1;for(let m=0;m<s;++m){const e=o[m];if(-1===e){if(-1!==c)throw new Error(fH(c,m));c=m,l.push(1)}else{if(e<0)throw new Error(mH(m,e));u*=e,l.push(e)}}if(-1!==c){if(u<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(a/u);if(u*e!==a)throw new Error(vH(r,l));l[c]=e}if(FA(l)!==a)throw new Error(bH(r,l));const d=r.length,h=[];if(d>0){h[d-1]=1;for(let e=d-2;e>=0;--e)h[e]=h[e+1]*r[e+1]}const p=[];if(s>0){p[s-1]=1;for(let e=s-2;e>=0;--e)p[e]=p[e+1]*l[e+1]}const f=GA(n,i*s);for(let m=0;m<i;++m){let t=0;for(let n=0;n<d;++n)t+=e[m*d+n]*h[n];for(let e=0;e<s;++e)f[m*s+e]=Math.trunc(t/p[e]),t%=p[e]}return[f,[i,s],l]}const C3={kernelName:eD,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:o,newShape:a}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${r.shape}`);if(1!==o.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${o.shape}`);if(1!==a.shape.length)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const i=Array.from(n.data.get(o.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(a.dataId).values),[u,c,d]=k3(s,r.shape,r.dtype,i,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}};function S3(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const s=r.length,l=[t[0],e.length/t[0]],u=l[1],c=s>0?o[s-1]+1:0;if(c<0)throw new Error("segment ids must be >= 0");const d=t.slice();d[0]=c;const h=GA(n,d.reduce(((e,t)=>e*t),1));if(0===s)return c>0&&h.fill(i),[h,d];if(c<=0)throw new Error("segment ids must be >= 0");let p=0,f=1,m=0,g=o[p];for(;;){let t=0;if(f<s){if(t=o[f],g===t){++f;continue}if(g>=t)throw new Error("segment ids are not increasing")}if(g<0||g>=c)throw new Error(xH(g,c));g>m&&h.fill(i,m*u,g*u);for(let n=p;n<f;++n){const t=r[n];if(t<0||t>=l[0])throw new Error(kH(n,r[n],l[0]));for(let n=0;n<u;n++)h[g*u+n]+=e[t*u+n]}if(a)for(let e=0;e<u;e++)h[g*u+e]/=f-p;if(p=f,++f,m=g+1,g=t,f>s)break}return m<c&&h.fill(i,m*u,c*u),[h,d]}const E3={kernelName:tD,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error(`Indices should be a vector but received shape\n          ${o.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n          ${a.shape}`);if(o.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values,[u,c]=S3(i,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}};const N3={kernelName:nD,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error(`Indices should be a vector but received shape\n         ${o.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n         ${a.shape}`);if(o.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values,[u,c]=S3(i,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}};const I3={kernelName:rD,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:o,sparseValues:a,defaultValue:i}=t,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:h}=Mj(0,o,s),p=!1,f=n.bufferSync(o);let m;switch(a.dtype){case"bool":m=e3(f,n.bufferSync(a),s,h,c,u,l,d,Boolean(n.data.get(i.dataId).values[0]),p);break;case"float32":m=e3(f,n.bufferSync(a),s,h,c,u,l,d,n.data.get(i.dataId).values[0],p);break;case"int32":m=e3(f,n.bufferSync(a),s,h,c,u,l,d,n.data.get(i.dataId).values[0],p);break;case"string":m=e3(f,n.bufferSync(a),s,h,c,u,l,d,oF(n.data.get(i.dataId).values[0]),p);break;default:throw new Error(`Unsupported type ${a.dtype}`)}return n.makeTensorInfo(s,m.dtype,m.values)}};const $3={kernelName:YP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{numOrSizeSplits:a,axis:i}=r,s=HA(i,o.shape)[0],l=cH(o,a,s),u=new Array(o.shape.length).fill(0),c=o.shape.slice();return l.map((e=>{const t=[...c];t[s]=e;const r=sZ({inputs:{x:o},backend:n,attrs:{begin:u,size:t}});return u[s]+=e,r}))}},T3=jY((e=>Math.sqrt(e))),A3=HY(qP,(e=>Math.sqrt(e))),O3={kernelName:qP,backendName:"cpu",kernelFunc:A3},R3={kernelName:aD,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{x:r}=t,o=n;zY(r,"square");const a=o.data.get(r.dataId).values,i=new Float32Array(a.length);for(let s=0;s<a.length;++s){const e=a[s];i[s]=e*e}return{dataId:o.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},P3=JY(((e,t)=>{const n=e-t;return n*n})),D3=gQ(oD,P3),F3={kernelName:oD,backendName:"cpu",kernelFunc:D3},_3=jY(((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:o}=t;return e.replace(new RegExp(n,r?"g":""),o)})),M3=VY(iD,_3),z3={kernelName:iD,backendName:"cpu",kernelFunc:M3},L3=HY(kD,((e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),B3={kernelName:kD,backendName:"cpu",kernelFunc:L3};function j3(e,t,n,r){const o=G_(e,t.dtype);for(let a=0;a<o.size;a++){const e=o.indexToLoc(a),i=new Array(e.length);for(let t=0;t<i.length;t++)i[t]=e[t]*n[t]+r[t];o.set(t.get(...i),...e)}return o}const H3={kernelName:sD,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:a,end:i,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:h}=r;zY(o,"stridedSlice");const{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:b,end:y,strides:w}=YM(o.shape,a,i,s,l,u,c,d,h);let x;if(m)x=kQ({inputs:{x:o},backend:n,attrs:{shape:f}});else if(g||v){RA(o.shape.length>=1,(()=>`Input must have rank at least 1, got: ${o.shape.length}`));const e=zM(b,y,w),t=sZ({inputs:{x:o},backend:n,attrs:{begin:b,size:e}});x=kQ({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=j3(p,n.bufferSync(o),w,b);x=n.makeTensorInfo(f,e.dtype,e.values)}return x}};class V3{constructor(e,t,n,r,o,a){this.separator=rF(e),this.nGramWidths=t,this.leftPad=rF(n),this.rightPad=rF(r),this.padWidth=o,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,o,a){for(let i=0;i<o;++i){const s=this.getPadWidth(a),l=Math.max(0,s-i),u=Math.max(0,s-(o-(i+1))),c=a-(l+u),d=t+(l>0?0:i-s);let h=0;h+=l*this.leftPad.length;for(let t=0;t<c;++t)h+=e[d+t].length;h+=u*this.rightPad.length;h+=(l+u+c-1)*this.separator.length,n[r+i]=new Uint8Array(h);const p=n[r+i];let f=0;const m=e=>e.forEach((e=>p[f++]=e));for(let e=0;e<l;++e)m(this.leftPad),m(this.separator);for(let t=0;t<c-1;++t)m(e[d+t]),m(this.separator);if(c>0){m(e[d+c-1]);for(let e=0;e<u;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<u-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error(`First split value must be 0, got ${e}`);for(let o=1;o<r;++o){let r=t[o]>=e;if(r=r&&t[o]<=n,!r)throw new Error(`Invalid split value ${t[o]}, must be in [${e}, ${n}]`);e=t[o]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}const o=r-1,a=GA("int32",r);if(0===n||0===r){const e=new Array(n);for(let t=0;t<=o;++t)a[t]=0;return[e,a]}a[0]=0;for(let s=1;s<=o;++s){const e=t[s]-t[s-1];let n=0;this.nGramWidths.forEach((t=>{n+=this.getNumNGrams(e,t)})),this.preserveShort&&e>0&&0===n&&(n=1),a[s]=a[s-1]+n}const i=new Array(a[o]);for(let s=0;s<o;++s){const n=t[s];let r=a[s];if(this.nGramWidths.forEach((o=>{const a=t[s+1]-t[s],l=this.getNumNGrams(a,o);this.createNGrams(e,n,i,r,l,o),r+=l})),this.preserveShort&&r===a[s]){const o=t[s+1]-t[s];if(0===o)continue;const a=o+2*this.padWidth,l=1;this.createNGrams(e,n,i,r,l,a)}}return[i,a]}}function W3(e,t,n,r,o,a,i,s){return new V3(n,r,o,a,i,s).compute(e,t)}const G3={kernelName:lD,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:o,nGramWidths:a,leftPad:i,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=t,h=n.data.get(c.dataId).values,p=n.data.get(d.dataId).values,[f,m]=W3(h,p,o,a,i,s,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}};function U3(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const o=t[0];let a=e.indexOf(o);for(;-1!==a;){const t=e.subarray(0,a);n&&0===t.length||r.push(t),a=(e=e.subarray(a+1)).indexOf(o)}return void(n&&0===e.length||r.push(e))}let o=0;for(let a=0;a<e.length+1;a++)if(a===e.length||-1!==t.indexOf(e[a])){const t=e.subarray(o,a);n&&0===t.length||r.push(t),o=a+1}}function K3(e,t,n){const r=e.length,o=[];let a=0,i=0;const s=new Array(r);for(let h=0;h<r;++h){const r=o.length;U3(e[h],t,n,o);const l=o.length-r;s[h]=l,a+=l,i=Math.max(i,l)}const l=GA("int32",2*a),u=new Array(a),c=[r,i];let d=0;for(let h=0;h<r;++h)for(let e=0;e<s[h];++e)l[2*d]=h,l[2*d+1]=e,u[d]=o[d],++d;return[l,u,c]}const q3={kernelName:uD,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:o}=r,{input:a,delimiter:i}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(0!==i.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values[0],[u,c,d]=K3(s,l,o),h=c.length;return[n.makeTensorInfo([h,2],"int32",u),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};function X3(e,t){const n=GA("int32",e.length);for(let r=0;r<e.length;++r)n[r]=ZD(e[r]).modulo(t).getLowBitsUnsigned();return n}const J3={kernelName:cD,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:o}=r,{input:a}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=X3(n.data.get(a.dataId).values,o);return n.makeTensorInfo(a.shape,"int32",i)}},Y3=HY(hD,(e=>Math.tan(e))),Q3={kernelName:hD,backendName:"cpu",kernelFunc:Y3},Z3=HY(pD,(e=>Math.tanh(e)));const e4={kernelName:zP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{tensor:r,indices:o,updates:a}=t,{sliceRank:i,numUpdates:s,sliceSize:l,strides:u,outputSize:c}=Mj(0,o,r.shape),d=n.bufferSync(o),h=n.bufferSync(a),p=n.bufferSync(r),f=e3(d,h,r.shape,c,l,s,i,u,p,!1);return n.makeTensorInfo(r.shape,f.dtype,f.values)}};function t4(e,t){const n=new Array(e.rank);for(let o=0;o<n.length;o++)n[o]=e.shape[o]*t[o];const r=G_(n,e.dtype);for(let o=0;o<r.values.length;++o){const t=r.indexToLoc(o),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];const a=e.locToIndex(n);r.values[o]=e.values[a]}return r}const n4={kernelName:fD,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reps:a}=r;zY(o,"tile");const i=t4(n.bufferSync(o),a);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},r4=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function o4(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;for(;r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,i=Math.log(o),s=.5*Math.exp(2*i/3),l=.5*Math.sqrt(i*s*(o-s)/o)*Math.sign(a-o/2);o4(e,t,Math.max(n,Math.floor(t-a*s/o+l)),Math.min(r,Math.floor(t+(o-a)*s/o+l)))}const o=e[t];let a=n,i=r;for(OA(e,n,t),r4(e[r],o)>0&&OA(e,n,r);a<i;){for(OA(e,a,i),a++,i--;r4(e[a],o)<0;)a+=1;for(;r4(e[i],o)>0;)i-=1}0===r4(e[n],o)?OA(e,n,i):(i+=1,OA(e,i,r)),i<=t&&(n=i+1),t<=i&&(r=i-1)}}function a4(e,t,n,r,o){const a=t[t.length-1],[i,s]=[e.length/a,a],l=WA(n,i*r),u=WA("int32",i*r);for(let d=0;d<i;d++){const t=d*s,n=e.subarray(t,t+s);let a=new Array(n.length);n.forEach(((e,t)=>a[t]={value:e,index:t})),r<a.length&&(o4(a,r),a=a.slice(0,r)),o&&a.sort(r4);const i=d*r,c=l.subarray(i,i+r),h=u.subarray(i,i+r);for(let e=0;e<r;e++)c[e]=a[e].value,h[e]=a[e].index}const c=t.slice();return c[c.length-1]=r,[G_(c,n,l),G_(c,"int32",u)]}const i4={kernelName:mD,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{k:a,sorted:i}=r;zY(o,"topk");const s=n.data.get(o.dataId).values,[l,u]=a4(s,o.shape,o.dtype,a,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}};const s4={kernelName:gD,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{image:o,transforms:a}=t,{interpolation:i,fillMode:s,fillValue:l,outputShape:u}=n,[c,d,h,p]=o.shape,[f,m]=null!=u?u:[d,h],g=[c,f,m,p],v=ZA(o.shape),b=v[0],y=v[1],w=v[2],x=ZA(g),k=x[0],C=x[1],S=x[2],E=WA(o.dtype,FA(g));E.fill(l);const N=r.data.get(o.dataId).values,I=r.data.get(a.dataId).values;for(let $=0;$<c;++$){const e=1===a.shape[0]?I:I.subarray(8*$,8*$+8);for(let t=0;t<f;++t)for(let n=0;n<m;++n)for(let r=0;r<p;++r){let o;const a=e[6]*n+e[7]*t+1;if(0===a)continue;const u=(e[0]*n+e[1]*t+e[2])/a,c=(e[3]*n+e[4]*t+e[5])/a,p=l4(u,h,s),f=l4(c,d,s);switch(i){case"nearest":o=c4(N,d,h,b,y,w,$,f,p,r,l);break;case"bilinear":o=d4(N,d,h,b,y,w,$,f,p,r,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}E[$*k+t*C+n*S+r]=o}return r.makeTensorInfo(g,o.dtype,E)}return{dataId:r.write(E,g,o.dtype),shape:o.shape,dtype:o.dtype}}};function l4(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return TA(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return TA(0,n,t-1)}(e,t);case"nearest":return function(e,t){return TA(0,e,t-1)}(e,t);default:return function(e){return e}(e)}}function u4(e,t,n,r,o,a,i,s,l,u,c){return 0<=s&&s<t&&0<=l&&l<n?e[i*r+s*o+l*a+u]:c}function c4(e,t,n,r,o,a,i,s,l,u,c){return u4(e,t,n,r,o,a,i,Math.round(s),Math.round(l),u,c)}function d4(e,t,n,r,o,a,i,s,l,u,c){const d=Math.floor(s),h=Math.floor(l),p=d+1,f=h+1;return(p-s)*((f-l)*u4(e,t,n,r,o,a,i,d,h,u,c)+(l-h)*u4(e,t,n,r,o,a,i,d,f,u,c))+(s-d)*((f-l)*u4(e,t,n,r,o,a,i,p,h,u,c)+(l-h)*u4(e,t,n,r,o,a,i,p,f,u,c))}function h4(e,t,n,r){const o=HA(t,n)[0],a=[1,n[0],1];for(let f=0;f<o;f++)a[0]*=n[f];a[1]=n[o];for(let f=o+1;f<n.length;f++)a[2]*=n[f];const i=new Map,s=new Int32Array(n[o]),l=new mF(a,r,e),u=[],c=1===a[0]&&1===a[2];for(let f=0;f<n[o];f++){let t;if(c)t=e[f].toString();else{const e=[];for(let t=0;t<a[0];t++)for(let n=0;n<a[2];n++)e.push(l.get(t,f,n));t=e.join(",")}const n=i.get(t);if(null!=n)s[f]=n;else{const e=i.size;i.set(t,e),s[f]=e,u.push(f)}}const d=a.slice();d[1]=i.size;const h=new mF(d,r);u.forEach(((e,t)=>{for(let n=0;n<a[0];n++)for(let r=0;r<a[2];r++)h.set(l.get(n,e,r),n,t,r)}));const p=n.slice();return p[o]=d[1],{outputValues:h.values,outputShape:p,indices:s}}const p4={kernelName:bD,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:o}=n,{x:a}=t;zY(a,"unique");const i=r.data.get(a.dataId).values,{outputValues:s,outputShape:l,indices:u}=h4(i,o,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}};const f4={kernelName:yD,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:o}=t;let{axis:a}=r;a<0&&(a+=o.shape.length);const i=o.shape.length,s=o.shape[a],l=new Array(i-1);let u=0;for(let p=0;p<i;p++)p!==a&&(l[u++]=o.shape[p]);const c=new Array(i).fill(0),d=o.shape.slice();d[a]=1;const h=new Array(s);for(let p=0;p<h.length;p++){c[a]=p;const e=sZ({inputs:{x:o},backend:n,attrs:{begin:c,size:d}});h[p]=kQ({inputs:{x:e},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(e)}return h}};const m4={kernelName:wD,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,segmentIds:a}=t,{numSegments:i}=r;zY(o,"unsortedSegmentSum");const s=[],l=[],u=o.shape.length-a.shape.length;let c=a;for(let h=0;h<u;++h){const e=w0({inputs:{input:c},backend:n,attrs:{dim:h+1}});c=e,l.push(e)}for(let h=0;h<i;++h){const e=eF(h,"int32"),t=n.makeTensorInfo([],"int32",e),r=s0({inputs:{a:t,b:c},backend:n}),a=fQ({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),i=e0({inputs:{a:a,b:o},backend:n}),u=n0({inputs:{x:i},backend:n,attrs:{axis:0,keepDims:!1}});s.push(u),l.push(t),l.push(r),l.push(a),l.push(i),l.push(u)}const d=v2({inputs:s,backend:n,attrs:{axis:0}});return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}},g4=[NQ,$Q,AQ,RQ,xQ,PQ,MQ,zQ,LQ,BQ,HQ,WQ,UQ,XQ,YQ,tZ,nZ,rZ,oZ,EQ,aZ,uZ,hZ,fZ,mZ,mQ,bZ,wZ,uQ,xZ,NZ,$Z,TZ,AZ,OZ,RZ,PZ,FZ,MZ,zZ,LZ,BZ,jZ,HZ,WZ,GZ,UZ,KZ,qZ,XZ,JZ,YZ,o0,GY,a0,l0,g0,y0,x0,S0,F0,M0,z0,j0,W0,G0,U0,q0,J0,Z0,n1,KY,r1,SZ,a1,s1,u1,XY,h1,m1,v1,w1,k1,E1,I1,A1,O1,R1,F1,z1,L1,B1,j1,H1,V1,W1,G1,q1,X1,Q1,t2,t0,r2,a2,s2,u2,h2,p2,g2,b2,y2,k2,ZY,S2,T2,R2,z2,B2,hQ,I0,H2,tQ,rQ,CQ,V2,W2,G2,U2,K2,q2,J2,Z2,t3,o3,a3,u3,iQ,d3,p3,m3,lZ,e2,b3,y3,x3,C3,E3,N3,I3,$3,O3,R3,F3,z3,B3,H3,G3,q3,J3,O0,r0,Q3,{kernelName:pD,backendName:"cpu",kernelFunc:Z3},e4,n4,i4,s4,_Q,p4,f4,m4,m2];for(const n of g4)FD(n);const v4={},b4={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function y4(e,t){if(!(e in v4)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if(hO().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete v4[e]}),!1),hO().getBool("SOFTWARE_WEBGL_ENABLED")&&(b4.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",b4)||n.getContext("experimental-webgl",b4);return n.getContext("webgl2",b4)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;v4[e]=n}const n=v4[e];return null==n||n.isContextLost()?(delete v4[e],y4(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),v4[e])}var w4,x4,k4;function C4(e,t){return[t,e]}function S4(e){const t=FA(e);return zA(Math.ceil(t/4))}function E4(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function N4(e,t){const n=e;let r,o,a,i,s,l,u,c,d,h;return 2===hO().getNumber("WEBGL_VERSION")?(r=n.R32F,o=n.R16F,a=n.RGBA16F,i=n.RGBA32F,s=n.RED,u=4,c=1,d=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(r=e.RGBA,o=e.RGBA,a=e.RGBA,i=n.RGBA,s=e.RGBA,u=4,c=4,d=null!=t?t.HALF_FLOAT_OES:null,h=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:s,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:h}}function I4(e,t){const n=t();return hO().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(w4||(w4={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(x4||(x4={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(k4||(k4={}));function $4(e){return!!(hO().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function T4(e,t){return z4(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}const A4=/ERROR: [0-9]+:([0-9]+):/g;function O4(e,t){const n=A4.exec(t);if(null==n)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(e);const r=+n[1],o=e.split("\n"),a=o.length.toString().length+2,i=o.map(((e,t)=>LA((t+1).toString(),a)+e));let s=0;for(let d=0;d<i.length;d++)s=Math.max(i[d].length,s);const l=i.slice(0,r-1),u=i.slice(r-1,r),c=i.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${LA(u[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join("\n"))}function R4(e,t){if(I4(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function P4(e,t,n,r,o,a,i){const s=e.getAttribLocation(t,n);return-1!==s&&(I4(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,r))),I4(e,(()=>e.vertexAttribPointer(s,o,e.FLOAT,!1,a,i))),I4(e,(()=>e.enableVertexAttribArray(s))),!0)}function D4(e,t,n,r){I4(e,(()=>function(e,t,n){L4(e,n),I4(e,(()=>e.activeTexture(e.TEXTURE0+n))),I4(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}(e,t,r))),I4(e,(()=>e.uniform1i(n,r)))}function F4(e,t,n){I4(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),I4(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function _4(e,t){I4(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),I4(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function M4(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}(e,t))}function z4(e,t,n){const r=I4(e,(()=>t()));if(null==r)throw new Error(n);return r}function L4(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${n}]`}.`)}}function B4(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return FA(e.slice(0,e.length-t))}function j4(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function H4(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[B4(e),...j4(e)]),t}function V4(e){return e%2===0}function W4(e,t){if(_A(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(V4(n)&&V4(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&V4(e[0])&&V4(t[0])}let G4,U4;function K4(e,t){return null!=e.getExtension(t)}function q4(e){try{if(null!=y4(e))return!0}catch(kbe){return console.log("Error when getting WebGL context: ",kbe),!1}return!1}function X4(e){if(0===e)return!1;const t=y4(e);if(1!==e){if(K4(t,"EXT_color_buffer_float"))return J4(t);const e="EXT_color_buffer_half_float";if(K4(t,e)){const n=t.getExtension(e);return function(e,t){const n=N4(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const o=1,a=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,o,a,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),s}(t,n)}return!1}if(!K4(t,"OES_texture_float"))return!1;if(!K4(t,"WEBGL_color_buffer_float"))return!1;return J4(t)}function J4(e){const t=N4(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),o}function Y4(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&RA("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the WebGL backend.`))}))}const Q4=hO();function Z4(){let e,t,n,r,o,a,i,s,l,u;return 2===hO().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",o="texture",a="outputColor",i="out vec4 outputColor;",s=hO().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",o="texture2D",a="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:a,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}function e5(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=ZA(t);return r.map(((t,o)=>`${`int ${e[o]} = ${n} / ${t}`}; ${o===r.length-1?`int ${e[o+1]} = ${n} - ${e[o]} * ${t}`:`index -= ${e[o]} * ${t}`};`)).join("")}function t5(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=ZA(t);return r.map(((t,o)=>`${`int ${e[o]} = ${n} / outShapeStrides[${o}]`}; ${o===r.length-1?`int ${e[o+1]} = ${n} - ${e[o]} * outShapeStrides[${o}]`:`index -= ${e[o]} * outShapeStrides[${o}]`};`)).join("")}function n5(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=e.map(((e,t)=>t)),o=function(e,t){const n=e.length,r=e.map((e=>`${t}[${e}]`)),o=new Array(n-1);o[n-2]=r[n-1];for(let a=n-3;a>=0;--a)o[a]=`(${o[a+1]} * ${r[a+1]})`;return o}(r,t);return o.map(((t,r)=>`${`int ${e[r]} = ${n} / ${o[r]}`}; ${r===o.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * ${o[r]}`:`index -= ${e[r]} * ${o[r]}`};`)).join("")}function r5(e){const t=ZA(e).map((e=>e.toString()));return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}Q4.registerFlag("HAS_WEBGL",(()=>Q4.getNumber("WEBGL_VERSION")>0)),Q4.registerFlag("WEBGL_VERSION",(()=>q4(2)?2:q4(1)?1:0)),Q4.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),Q4.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===Q4.get("WEBGL_VERSION"))),Q4.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),Q4.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),Q4.registerFlag("WEBGL_PACK",(()=>Q4.getBool("HAS_WEBGL"))),Q4.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>Q4.getBool("WEBGL_PACK"))),Q4.registerFlag("WEBGL_PACK_CLIP",(()=>Q4.getBool("WEBGL_PACK"))),Q4.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>Q4.getBool("WEBGL_PACK"))),Q4.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>Q4.getBool("WEBGL_PACK"))),Q4.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>Q4.getBool("WEBGL_PACK"))),Q4.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>Q4.getBool("WEBGL_PACK"))),Q4.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>Q4.getBool("WEBGL_PACK"))),Q4.registerFlag("WEBGL_PACK_REDUCE",(()=>Q4.getBool("WEBGL_PACK"))),Q4.registerFlag("WEBGL_LAZILY_UNPACK",(()=>Q4.getBool("WEBGL_PACK"))),Q4.registerFlag("WEBGL_CONV_IM2COL",(()=>Q4.getBool("WEBGL_PACK"))),Q4.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",(()=>Q4.getBool("WEBGL_PACK"))),Q4.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(e){if(null==G4){const t=y4(e);G4=t.getParameter(t.MAX_TEXTURE_SIZE)}return G4}(Q4.getNumber("WEBGL_VERSION")))),Q4.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(e){if(null==U4){const t=y4(e);U4=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,U4)}(Q4.getNumber("WEBGL_VERSION")))),Q4.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=Q4.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=y4(e);return t=K4(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:K4(n,"EXT_disjoint_timer_query")?1:0,t}(e)})),Q4.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>Q4.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!VF())),Q4.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(e){if(0===e)return!1;const t=y4(e);if(1===e){if(!K4(t,"OES_texture_float"))return!1}else if(!K4(t,"EXT_color_buffer_float"))return!1;return J4(t)}(Q4.getNumber("WEBGL_VERSION")))),Q4.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!Q4.getBool("WEBGL_FORCE_F16_TEXTURES")&&Q4.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),Q4.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>X4(Q4.getNumber("WEBGL_VERSION")))),Q4.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(e=Q4.getNumber("WEBGL_VERSION"))&&null!=y4(e).fenceSync;var e})),Q4.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>Q4.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),Q4.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if("number"!==typeof e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)})),Q4.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>VF()?1:-1),(e=>{if("number"!==typeof e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)})),Q4.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),Q4.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),Q4.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),Q4.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128)),Q4.registerFlag("WEBGL_EXP_CONV",(()=>!1)),Q4.registerFlag("SOFTWARE_WEBGL_ENABLED",(()=>Q4.getBool("IS_TEST"))),Q4.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(()=>1/0)),Q4.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(()=>!1)),Q4.registerFlag("WEBGL2_ISNAN_CUSTOM",(()=>!1)),Q4.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1));const o5="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:a5}=r;function i5(e,t,n){const r=[];if(e.forEach((e=>{const t=FA(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(r.push(`uniform sampler2D ${e.name};`),r.push(`uniform int offset${e.name};`)),n.enableShapeUniforms){const{uniformShape:t}=v5(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push(`uniform int ${e.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${e.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${e.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${e.name}Shape;`)}r.push(`uniform ivec2 ${e.name}TexShape;`)}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{r.push(`uniform ${e.type} ${e.name}${e.arrayIndex?`[${e.arrayIndex}]`:""};`)}));const o=r.join("\n"),a=e.map((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,o="";o+=n?l5(e,r):s5(e,r);const a=e.shapeInfo.logicalShape,i=t.logicalShape;a.length<=i.length&&(o+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",a=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,s=a5(e.shapeInfo.logicalShape,t.logicalShape),l=g5(i),u=i-a;let c;const d=["x","y","z","w","u","v"];c=0===a?"":i<2&&s.length>=1?"coords = 0;":s.map((e=>`coords.${d[e+u]} = 0;`)).join("\n");let h="";h=i<2&&a>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${d[t+u]}`)).join(", ");let p="return outputValue;";const f=1===FA(e.shapeInfo.logicalShape),m=FA(t.logicalShape),g=1===m;if(1!==a||f||g){if(f&&!g)p=1===i?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){const e=a-2,t=a-1;s.indexOf(e)>-1&&s.indexOf(t)>-1?p="return vec4(outputValue.x);":s.indexOf(e)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(t)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${o}() {\n      ${l} coords = getOutputCoords();\n      ${c}\n      vec4 outputValue = get${r}(${h});\n      ${p}\n    }\n  `}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",a=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===l&&null==e.shapeInfo.flatOffset&&_A(i,a))return`\n      float ${o}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const u=g5(l),c=a5(e.shapeInfo.logicalShape,t.logicalShape),d=l-s;let h;const p=["x","y","z","w","u","v"];h=0===s?"":l<2&&c.length>=1?"coords = 0;":c.map((e=>`coords.${p[e+d]} = 0;`)).join("\n");let f="";f=l<2&&s>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${p[t+d]}`)).join(", ");return`\n    float ${o}() {\n      ${u} coords = getOutputCoords();\n      ${h}\n      return get${r}(${f});\n    }\n  `}(e,t));return o}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),i=t.texShape,s=Z4(),l=function(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}(s);let u,c,d=function(e){const t=`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${u5}\n    ${c5}\n    ${d5}\n  `;return t}(s);t.isPacked?(u=function(e,t,n){switch(e.length){case 0:return p5();case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${r[1]}.0);\n      }\n    `;if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${r[0]}.0);\n      }\n    `;if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\n    }\n  `}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(_A(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\n      }\n    `;const o=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[2]/2),a=o*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[e.length-1]/2),a=o*Math.ceil(e[e.length-2]/2);let i=a,s="",l="b, r, c";for(let u=2;u<e.length-1;u++)i*=e[e.length-u-1],s=`\n      int b${u} = index / ${i};\n      index -= b${u} * ${i};\n    `+s,l=`b${u}, `+l;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      ${s}\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec${e.length}(${l});\n    }\n  `}(e,t,n)}}(t.logicalShape,i,n.enableShapeUniforms),c=function(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}(s)):(u=function(e,t,n){switch(e.length){case 0:return p5();case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${t[1]}.0);\n      }\n    `;if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${t[0]}.0);\n      }\n    `;if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return resTexRC.x * ${t[1]} + resTexRC.y;\n    }\n  `}(0,t,n);case 2:return function(e,t,n){if(_A(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `;if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `;if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `;if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n){return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${t5(["r","c","d"],e)}\n    return ivec3(r, c, d);\n  }\n`}const r=e5(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}(e,t,n);case 4:return function(e,t,n){if(n){return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${t5(["r","c","d","d2"],e)}\n      return ivec4(r, c, d, d2);\n    }\n  `}const r=e5(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}(e,t,n);case 5:return function(e,t){const n=e5(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(e,t);case 6:return function(e,t){const n=e5(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}(t.logicalShape,i,n.enableShapeUniforms),c=function(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}(s)),n.packedInputs&&(d+=h5);return[d,l,c,o,u,a,n.userCode].join("\n")}function s5(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[o,a]=e.shapeInfo.texShape;if(1===o&&1===a)return`\n      float ${r}() {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const i=f5(n);if(t)return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});\n      return sampleTexture(${n}, uv);\n    }\n  `;const[s,l]=e.shapeInfo.texShape;return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${s}, ${l}, ${i});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${r}(int index) {\n        ${m5(e)}\n      }\n    `;const o=e.shapeInfo.texShape,a=o[0],i=o[1];if(1===i&&1===a)return`\n      float ${r}(int index) {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const s=f5(n);if(1===i)return t?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${a}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(1===a)return t?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${i}.0, 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(t)return`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `;return`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${a}, ${i}, index + ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape;if(null!=a&&_A(n,a)){if(t)return`\n      float ${o}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `;const e=a[0];return`\n    float ${o}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${a[1]}.0, ${e}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `}const{newShape:i,keptDims:s}=VA(n),l=i;if(l.length<n.length){const n=["row","col"];return`\n      ${s5(b5(e,l),t)}\n      float ${o}(int row, int col) {\n        return ${o}(${y5(n,s)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\n        ${m5(e)}\n      }\n    `;const u=a[0],c=a[1],d=f5(r);if(1===c)return t?`\n      float ${o}(int row, int col) {\n        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col) {\n      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;if(1===u)return t?`\n      float ${o}(int row, int col) {\n        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col) {\n      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);\n      return sampleTexture(${r}, uv);\n    }\n  `;if(t)return`\n      float ${o}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${r}Shape[1] + col + ${d};\n        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n        return sampleTexture(${r}, uv);\n      }\n    `;return`\n  float ${o}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${n[1]} + col + ${d};\n    vec2 uv = uvFromFlat(${u}, ${c}, index);\n    return sampleTexture(${r}, uv);\n  }\n`}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[1]*n[2],i=n[2],{newShape:s,keptDims:l}=VA(n),u=s;if(u.length<n.length){const n=["row","col","depth"];return`\n        ${s5(b5(e,u),t)}\n        float ${o}(int row, int col, int depth) {\n          return ${o}(${y5(n,l)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${a}, ${i}, 1)));\n        ${m5(e)}\n      }\n    `;const c=e.shapeInfo.texShape,d=c[0],h=c[1],p=e.shapeInfo.flatOffset;if(h===a&&null==p)return t?`\n      float ${o}(int row, int col, int depth) {\n        int stride1 = ${r}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n        float ${o}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${i}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${h}.0, ${d}.0);\n          return sampleTexture(${r}, uv);\n        }\n      `;if(h===i&&null==p)return t?`\n      float ${o}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${d}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;const f=f5(r);if(t)return`\n    float ${o}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${r}Shape[1] * ${r}Shape[2];\n      int stride1 = ${r}Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ${f};\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n      return sampleTexture(${r}, uv);\n    }\n    `;return`\n      float ${o}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${a} + col * ${i} + depth + ${f};\n        vec2 uv = uvFromFlat(${d}, ${h}, index);\n        return sampleTexture(${r}, uv);\n      }\n  `}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[3],i=n[2]*a,s=n[1]*i,{newShape:l,keptDims:u}=VA(n);if(l.length<n.length){const n=["row","col","depth","depth2"];return`\n      ${s5(b5(e,l),t)}\n      float ${o}(int row, int col, int depth, int depth2) {\n        return ${o}(${y5(n,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${s}, ${i}, ${a}, 1)));\n        ${m5(e)}\n      }\n    `;const c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],p=d[1],f=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(p===s&&null==c)return t?`\n      float ${o}(int row, int col, int depth, int depth2) {\n        ${f}\n        ${m}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${o}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${i}, ${a}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${h}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;if(p===a&&null==c)return t?`\n      float ${o}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${o}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${h}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;const v=f5(r);if(t)return`\n    float ${o}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${f}\n      ${m}\n      ${g}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${v});\n      return sampleTexture(${r}, uv);\n    }\n  `;return`\n    float ${o}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${i} +\n          depth * ${a} + depth2;\n      vec2 uv = uvFromFlat(${h}, ${p}, index + ${v});\n      return sampleTexture(${r}, uv);\n    }\n  `}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],a=t[3]*o,i=t[2]*a,s=t[1]*i,{newShape:l,keptDims:u}=VA(t);if(l.length<t.length){const t=["row","col","depth","depth2","depth3"];return`\n      ${s5(b5(e,l))}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${y5(t,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${s}, ${i}, ${a}, ${o})) +\n          depth3;\n        ${m5(e)}\n      }\n    `;const c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],p=d[1];if(p===s&&null==c)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${i}, ${a}, ${o}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(p===o&&null==c)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const f=f5(n);return`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${i} + depth * ${a} +\n          depth2 * ${o} + depth3 + ${f};\n      vec2 uv = uvFromFlat(${h}, ${p}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:a}=VA(t);if(o.length<t.length){const t=["row","col","depth","depth2","depth3","depth4"];return`\n      ${s5(b5(e,o))}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${y5(t,a)});\n      }\n    `}const i=t[5],s=t[4]*i,l=t[3]*s,u=t[2]*l,c=t[1]*u;if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${c}, ${u}, ${l}, ${s})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${i}, 1)));\n        ${m5(e)}\n      }\n    `;const d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],f=h[1];if(f===c&&null==d)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${u}, ${l}, ${s}, ${i})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(f===i&&null==d)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const m=f5(n);return`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${c} + col * ${u} + depth * ${l} +\n          depth2 * ${s} + depth3 * ${i} + depth4 + ${m};\n      vec2 uv = uvFromFlat(${p}, ${f}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function l5(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Z4();return`\n    vec4 ${n}() {\n      return ${r.texture2D}(${t}, halfCR);\n    }\n  `}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,a=Z4();if(t)return`\n    vec4 ${r}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${a.texture2D}(${n}, uv);\n    }\n  `;const i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`\n    vec4 ${r}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${i[0]}, ${i[1]}, index);\n      return ${a.texture2D}(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,i=a[0],s=a[1],l=Z4();if(null!=a&&_A(n,a))return t?`\n      vec4 ${o}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `:`\n      vec4 ${o}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${i}.0);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `;if(t)return`\n    vec4 ${o}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `;const u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=Math.ceil(n[1]/2);return`\n    vec4 ${o}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===n[0]){const r=[1,2],a=["b","row","col"];return`\n        ${l5(b5(e,n.slice(1)),t)}\n        vec4 ${o}(int b, int row, int col) {\n          return ${o}(${y5(a,r)});\n        }\n      `}const s=Z4();if(t)return`\n    vec4 ${o}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${s.texture2D}(${r}, uv);\n    }\n  `;const l=i[0],u=i[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`\n    vec4 ${o}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${l}, ${u}, ${d}, ${c}, b, row, col);\n      return ${s.texture2D}(${r}, uv);\n    }\n  `}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=Z4();if(t)return`\n    vec4 ${r}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${n}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${n}, uv);\n    }\n  `;const a=e.shapeInfo.logicalShape,i=a.length,s=e.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=l[0],c=l[1],d=Math.ceil(a[i-1]/2);let h=d*Math.ceil(a[i-2]/2),p="int b, int row, int col",f=`b * ${h} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<i-1;m++)p=`int b${m}, `+p,h*=a[i-m-1],f=`b${m} * ${h} + `+f;return`\n    vec4 ${r}(${p}) {\n      int index = ${f};\n      int texR = index / ${c};\n      int texC = index - texR * ${c};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});\n      return ${o.texture2D}(${n}, uv);\n    }\n  `}(e,t)}}const u5="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",c5="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",d5="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",h5="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function p5(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function f5(e){return`offset${e}`}function m5(e){const t=e.name,n=FA(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function g5(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function v5(e,t,n){const{newShape:r,keptDims:o}=VA(t),a=t.length,i=e&&3===a&&1===t[0],s=i?t.slice(1):r,l=!e&&a>1&&!_A(t,n)&&r.length<a||i;return{useSqueezeShape:l,uniformShape:l?s:t,keptDims:o}}function b5(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function y5(e,t){return t.map((t=>e[t])).join(", ")}function w5(e,t,n,r){const o=n.map(((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),a=o.map((e=>e.shapeInfo)),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=i5(o,i,t),l=function(e,t){const n=z4(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(I4(e,(()=>e.shaderSource(n,t))),I4(e,(()=>e.compileShader(n))),hO().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw O4(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),u=e.createProgram(l);return hO().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:a,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(u),Object.assign({program:t,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:a,outShapeInfo:i},x5(e,t,u)))}function x5(e,t,n){const r=[],o=[];let a,i,s,l=null,u=null;u=e.getUniformLocation(n,"NAN",!1),1===hO().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const d of t.variableNames){const o={name:d,uniform:e.getUniformLocation(n,d,c),offset:e.getUniformLocation(n,`offset${d}`,c)};t.enableShapeUniforms&&(o.shape=e.getUniformLocation(n,`${d}Shape`,c),o.texShape=e.getUniformLocation(n,`${d}TexShape`,c)),r.push(o)}if(t.enableShapeUniforms&&(a=e.getUniformLocation(n,"outShape",c),s=e.getUniformLocation(n,"outShapeStrides",c),i=e.getUniformLocation(n,"outTexShape",c)),t.customUniforms)for(const d of t.customUniforms)o.push(e.getUniformLocation(n,d.name,c));return{variablesLocations:r,customUniformLocations:o,infLoc:l,nanLoc:u,outShapeLocation:a,outShapeStridesLocation:s,outTexShapeLocation:i}}function k5(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach(((e,n)=>{const r=e.logicalShape,o=t[n],a=o.shape;if(!_A(r,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${a} must match`);if(e.isUniform&&o.isUniform)return;const i=e.texShape,s=o.isUniform?null:o.texData.texShape;if(!_A(i,s))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${i} and ${s} must match`)}))}function C5(e){return hO().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class S5{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=w4.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=Z4();this.outputShape=e,this.enableShapeUniforms=C5(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?t5(["r","c","d"],e):e5(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${t.output} = result;\n      }\n    `}}class E5{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=w4.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=Z4();this.outputShape=e,this.enableShapeUniforms=C5(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?t5(["r","c","d"],e):e5(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${t.output} = result;\n      }\n    `}}class N5{constructor(e){this.variableNames=["A"],this.outTexUsage=x4.DOWNLOAD;const t=Z4();this.outputShape=e,this.userCode=`\n      ${o5}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}class I5{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=x4.DOWNLOAD;const t=Z4();this.outputShape=e,this.userCode=`\n      ${o5}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}const $5={R:0,G:1,B:2,A:3};class T5{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Z4();this.outputShape=e,this.enableShapeUniforms=C5(this.outputShape.length);let o="result";t&&(o="floor(result * 255. + 0.5)");let a="";for(let i=0;i<n.length;i++){const e=n[i];a+=`\n          if(offset == ${i}) {\n            result = values[${$5[e]}];\n          }`}this.userCode=`\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":r5(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ${n.length});\n\n        flatIndex = idiv(flatIndex, ${n.length}, 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ${r.texture2D}(A, uv);\n          ${a}\n        }\n        ${r.output} = vec4(${o}, 0., 0., 0.);\n      }\n    `}}class A5{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Z4();this.outputShape=e,this.enableShapeUniforms=C5(this.outputShape.length);let r="",o="result";t&&(o="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let t=0;t<=1;t++){const o=2*a+t;r+=`\n          localCoords = coords;\n          if(localCoords[2] + ${t} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {\n          localCoords[2] += ${t};\n          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {\n            localCoords[1] += ${a};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${n.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${o}] = values[0];\n            } else if (offset == 1) {\n              result[${o}] = values[1];\n            } else if (offset == 2) {\n              result[${o}] = values[2];\n            } else {\n              result[${o}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":r5(e)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${r}\n\n          ${n.output} = ${o};\n        }\n    `}}function O5(e){const t=Z4();return function(e,t){const n=z4(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(I4(e,(()=>e.shaderSource(n,t))),I4(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}function R5(e){return function(e,t){const n=z4(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return I4(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),I4(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function P5(e){return function(e,t){const n=z4(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return I4(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),I4(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Uint16Array([0,1,2,2,1,3]))}function D5(e,t,n,r,o,a){!function(e,t){const n=hO().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error(`Requested texture size [${e}x${t}] is invalid.`);if(e>n||t>n)throw new Error(`Requested texture size [${e}x${t}] greater than WebGL maximum on this browser / GPU [${n}x${n}].`)}(t,n);const i=function(e){return z4(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return I4(e,(()=>e.bindTexture(s,i))),I4(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),I4(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),I4(e,(()=>e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST))),I4(e,(()=>e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===hO().getNumber("WEBGL_VERSION")?I4(e,(()=>e.texImage2D(s,0,r,t,n,0,o,a,null))):I4(e,(()=>e.texStorage2D(s,1,r,t,n))),I4(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),{texture:i,texShape:[n,t]}}function F5(e){return e.internalFormatFloat}function _5(e){return e.internalFormatHalfFloat}function M5(e){return e.downloadTextureFormat}function z5(e){return e.internalFormatPackedFloat}function L5(e){return e.internalFormatPackedHalfFloat}function B5(e,t,n,r,o,a,i,s){const l=e,u=new Float32Array(function(e,t){const[n,r]=E4(e,t);return n*r*4}(a,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}class j5{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=hO().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,function(e,t){v4[e]=t}(t,e)):this.gl=y4(t),e=this.gl,2===hO().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>I4(t,(()=>t.createVertexArray())),this.bindVertexArray=e=>I4(t,(()=>t.bindVertexArray(e))),this.deleteVertexArray=e=>I4(t,(()=>t.deleteVertexArray(e))),this.getVertexArray=()=>I4(t,(()=>t.getParameter(t.VERTEX_ARRAY_BINDING)))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>I4(e,(()=>t.createVertexArrayOES())),this.bindVertexArray=n=>I4(e,(()=>t.bindVertexArrayOES(n))),this.deleteVertexArray=n=>I4(e,(()=>t.deleteVertexArrayOES(n))),this.getVertexArray=()=>I4(e,(()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES)))}let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===hO().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=T4(this.gl,e),K4(this.gl,t))this.textureHalfFloatExtension=T4(this.gl,t);else if(hO().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),K4(this.gl,r))this.colorBufferHalfFloatExtension=T4(this.gl,r);else if(hO().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",K4(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!K4(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=R5(this.gl),this.indexBuffer=P5(this.gl),this.framebuffer=function(e){return z4(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=N4(this.gl,this.textureHalfFloatExtension)}get debug(){return hO().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;I4(e,(()=>e.finish())),I4(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),I4(e,(()=>e.deleteFramebuffer(this.framebuffer))),I4(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),I4(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),I4(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=C4(t,n);return D5(e,o,a,F5(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=C4(t,n);return D5(e,o,a,_5(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=C4(t,n);return D5(e,o,a,M5(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){I4(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?2===hO().getNumber("WEBGL_VERSION")?I4(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data))):I4(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):2===hO().getNumber("WEBGL_VERSION")?I4(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n))):I4(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),I4(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,o,a){let i,s,l;I4(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),o instanceof Uint8Array?(i=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,l=e.RGBA):(i=new Float32Array(n*r*4),s=e.FLOAT,l=a.internalFormatPackedFloat),i.set(o),2===hO().getNumber("WEBGL_VERSION")?I4(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,i))):I4(e,(()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,s,i))),I4(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=E4(t,n);return D5(e,o,a,L5(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=E4(t,n);return D5(e,o,a,z5(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(_4(this.gl,this.framebuffer),this.outputTexture=null),I4(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n,r){const[o,a]=C4(t,n),i=new Uint8Array(t*n*4);return I4(e,(()=>e.readPixels(0,0,o,a,r.downloadTextureFormat,e.UNSIGNED_BYTE,i))),new Float32Array(i.buffer)}(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,r,o,a){return B5(this.gl,e,0,0,0,o,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n){const r=e.createBuffer();I4(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,r)));const o=16*t*n;return I4(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ))),I4(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),I4(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),r}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(hO().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,o=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(o,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=o}else hO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,hO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n){const r=new Float32Array(t*n*4);return I4(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r))),r}(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=O5(t));const n=function(e){return z4(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}(t);I4(t,(()=>t.attachShader(n,this.vertexShader))),I4(t,(()=>t.attachShader(n,e))),function(e,t){if(I4(e,(()=>e.linkProgram(t))),!hO().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n);const r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&R4(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;I4(t,(()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer))),function(e,t,n){I4(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),P4(e,t,"clipSpacePos",n,3,20,0)&&P4(e,t,"uv",n,2,20,12)}(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(I4(this.gl,(()=>this.gl.deleteProgram(e))),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&R4(this.gl,this.program),I4(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return z4(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),I4(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),D4(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,o]=E4(t,n);this.setOutputMatrixTextureDriver(e,r,o)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&R4(this.gl,this.program),M4(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}I4(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),I4(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=T4(this.gl,2===hO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===hO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===hO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await BA((()=>this.disposed||this.isQueryAvailable(e,hO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,hO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in hO().platform&&(n=hO().platform.setTimeoutCustom.bind(hO().platform)),BA((()=>(this.pollItems(),0===this.itemsToPoll.length)),(()=>0),null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),F4(this.gl,e,this.framebuffer),this.debug&&M4(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(F4(this.gl,this.outputTexture,this.framebuffer),this.debug&&M4(this.gl)):_4(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;F4(r,e,this.framebuffer),this.debug&&M4(r),this.outputTexture=e,I4(r,(()=>r.viewport(0,0,t,n))),I4(r,(()=>r.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),I4(this.gl,(()=>this.gl.scissor(e,t,n,r)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{mx:H5,XI:V5,Nk:W5,f6:G5,ct:U5,YG:K5,hH:q5,z3:X5,sG:J5,uM:Y5,vS:Q5,qB:Z5,GG:e6,rq:t6,lg:n6,WR:r6,cu:o6,GE:a6,px:i6,jC:s6,He:l6,hE:u6,BF:c6,Dk:d6,cl:h6,_B:p6,ub:f6,_f:m6,Ku:g6,qy:v6,Zy:b6,bu:y6,zv:w6,dH:x6,HS:k6,yH:C6,l3:S6,z9:E6,x6:N6,_m:I6,eW:$6,GK:T6,SP:A6,yr:O6,dl:R6,Dw:P6,xT:D6,_X:F6,wz:_6}=o;function M6(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>`${e}.${t}`))}function z6(e,t){return 1===t?[e]:M6(e,t)}class L6{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=C5(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=z6("rc",this.rank),t=g5(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),o=this.getOutput(e);this.userCode=`\n        void main() {\n          ${t} rc = getOutputCoords();\n\n          if(${n}) {\n            setOutput(vec4(0));\n          } else {\n            ${r}\n\n            setOutput(vec4(${o}));\n          }\n        }\n      `}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let o=`${0===n?"r":"rp1"}, ${0===r?"c":"cp1"}`;for(let t=2;t<this.rank;t++)o=`${e[e.length-1-t]},`+o;t.push(o)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let n=this.rank-2;n<this.rank;n++)t+=`${e[n]} >= ${this.enableShapeUniforms?`outShape[${n}]`:this.outputShape[n]}`,n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`\n      int r = ${t[0]};\n      int c = ${t[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${n};\n      bool rEdge = rp1 >= ${r};\n    `}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){return`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`}return`getA(${t[0]}),\n            cEdge ? 0. : getA(${t[1]}),\n            rEdge ? 0. : getA(${t[2]}),\n            rEdge || cEdge ? 0. : getA(${t[3]})`}}class B6{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=C5(this.outputShape.length);let n="";for(let a=0;a<4;a++){let e="thisRC = rc;";a%2===1&&(e+="thisRC.z += 1;"),a>1&&(e+="thisRC.y += 1;"),n+=`\n        ${e}\n        ${a>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${a}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${a>0?"}":""}\n      `}var r,o;this.userCode=`\n      ${r=t,o=this.enableShapeUniforms,`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${o?n5(["r","c","d"],"inputShape"):e5(["r","c","d"],r)}\n      return ivec3(r, c, d);\n    }\n  `}\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":r5(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}class j6{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){const r=V6(t,n),o=W6(e,r,n);o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]);const a=H6(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const e=this.freeTextures[o].pop();return this.usedTextures[o].push(e),e}let i;return r===k4.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===k4.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===k4.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===k4.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===k4.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(i),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),i}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const o=V6(n,r),a=W6(t,o,r);a in this.freeTextures||(this.freeTextures[a]=[]);const i=H6(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=hO().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=i):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;const l=this.usedTextures[a],u=l&&l.indexOf(e);if(null==u||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[u]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function H6(e,t,n,r,o){const a=function(e,t){switch(e){case k4.PACKED_2X2_FLOAT32:return z5(t);case k4.PACKED_2X2_FLOAT16:return L5(t);case k4.UNPACKED_FLOAT32:return F5(t);case k4.UNPACKED_FLOAT16:return _5(t);case k4.PACKED_4X1_UNSIGNED_BYTE:return M5(t);default:throw new Error(`Unknown physical texture type ${e}`)}}(t,r);let i;if(o){const[t,n]=E4(e[0],e[1]);i=t*n}else{const[t,n]=C4(e[0],e[1]);i=t*n}const s=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}(n,a);return i*s}function V6(e,t){if(e===x4.UPLOAD)return k4.PACKED_2X2_FLOAT32;if(e===x4.RENDER||null==e)return function(e){return hO().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?k4.PACKED_2X2_FLOAT32:k4.UNPACKED_FLOAT32:e?k4.PACKED_2X2_FLOAT16:k4.UNPACKED_FLOAT16}(t);if(e===x4.DOWNLOAD||e===x4.PIXELS)return k4.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function W6(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}class G6{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=C5(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const U6="if (isnan(x)) return x;",K6="return abs(x);";const q6=U6+"\n  return (x < 0.0) ? 0.0 : x;\n",X6=U6+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",J6="return x;";class Y6{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=C5(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class Q6{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=C5(this.outputShape.length);const t=e.length,n=z6("rc",t),r=g5(t),o=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),a=n.slice(-2),i=t<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${o});\n\n        setOutput(getChannel(packedInput, ${i}));\n      }\n    `}}const Z6=$H,e8={};const t8=hO().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class n8 extends NA{nextDataId(){return n8.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!hO().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof j5)t=e;else{const n=y4(hO().getNumber("WEBGL_VERSION"),e);t=new j5(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=y4(hO().getNumber("WEBGL_VERSION"));t=new j5(e),this.binaryCache=((n=hO().getNumber("WEBGL_VERSION"))in e8||(e8[n]={}),e8[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new j6(this.gpgpu),this.numMBBeforeWarning=null==hO().global.screen?1024:hO().global.screen.height*hO().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new EA(this,n_())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,o,a){const i=this.makeTensorInfo(t,n),s=this.texData.get(i.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,o]},s.texShape=[r,o];const l=H4(t),u=new T5(l,!1,a),c=this.runWebGLProgram(u,[i],n,[[r,o]]);return c.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(i),c.dataId}write(e,t,n){if((hO().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||hO().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:x4.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,r,o){if(hO().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:x4.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:o,slice:a,shape:i,isPacked:s}=t;if(null!=a){let t;t=s?new Y6(i,J6):new G6(i,J6);const n=this.runWebGLProgram(t,[{dataId:e,shape:i,dtype:r}],r),o=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),o}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const l=null!=this.activeTimers;let u,c;if(l&&(u=nF()),"complex64"===r){c=Uj(this.readSync(o.real.dataId),this.readSync(o.imag.dataId))}else c=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=nF()-u),this.convertAndCacheOnCPU(e,c)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:r,slice:o,dtype:a,complexTensorInfos:i,isPacked:s}=t;if(null!=o){let t;t=s?new Y6(r,J6):new G6(r,J6);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:a}],a),o=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),o}if(null!=n)return this.convertAndCacheOnCPU(e);if(hO().getBool("DEBUG")&&!hO().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===hO().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,u,c=null;if("complex64"!==a&&hO().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);c=this.gpgpu.createBufferFromTexture(t.texture.texture,...S4(r))}if(this.pendingRead.set(e,[]),"complex64"!==a&&await this.gpgpu.createAndWaitForFence(),"complex64"===a){const e=await Promise.all([this.read(i.real.dataId),this.read(i.imag.dataId)]);u=Uj(e[0],e[1])}else if(null==c)u=this.getValuesFromTexture(e);else{const e=FA(r);u=this.gpgpu.downloadFloat32MatrixFromBuffer(c,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=c){const e=this.gpgpu.gl;I4(e,(()=>e.deleteBuffer(c)))}const d=this.convertAndCacheOnCPU(e,u),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach((e=>e(d))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&n_().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.texData.get(e),{values:r,shape:o,slice:a,dtype:i,isPacked:s,texture:l}=n;if("complex64"===i)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=a){let n;n=s?new Y6(o,J6):new G6(o,J6);const r=this.runWebGLProgram(n,[{dataId:e,shape:o,dtype:i}],i),a=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),a}if(null==l)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,t.customTexShape),c=n_().makeTensorFromTensorInfo(u),d=this.texData.get(u.dataId);return Object.assign({tensorRef:c},d.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>oF(e)));return G_(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return G_(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!$4(n)){if(hO().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),o=FA(t);if(hO().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),a=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...S4(t)).subarray(0,o);return this.disposeIntermediateTensorInfo(n),a}const a=hO().getBool("WEBGL_PACK")&&!0===r,i=a?H4(t):t,s=a?new I5(i):new N5(i),l=this.runWebGLProgram(s,[{shape:i,dtype:n,dataId:e}],"float32"),u=this.texData.get(l.dataId),c=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(l),c}timerAvailable(){return hO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const o=iF(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),a=iF(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,r&&(this.programTimersStack=null);const i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(hO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(o);i.kernelMs=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}(e),i.getExtraProfileInfo=()=>e.map(((e,t)=>({name:a[t],ms:e}))).map((e=>`${e.name}: ${e.ms}`)).join(", ")}else i.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,i})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return hO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:nF(),endMs:null}}endTimer(e){return hO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=nF(),e)}async getQueryTime(e){if(hO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:o,isPacked:a,slice:i}=this.texData.get(e),s=i&&i.origDataId||e,l=this.dataRefCount.get(s);l>1?this.dataRefCount.set(s,l-1):(this.dataRefCount.delete(s),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,o,a)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t8;return hO().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&FA(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){$D("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return Z6(e.shape,t)}packedUnaryOp(e,t,n){const r=new Y6(e.shape,t),o=this.compileAndRun(r,[e],n);return n_().makeTensorFromTensorInfo(o)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=x6(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(hO().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,K6,e.dtype);const t=new G6(e.shape,K6),n=this.compileAndRun(t,[e]);return n_().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&qA(n[0])){const o=n.map((e=>rF(e)));r=this.write(o,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return n_().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new Q6(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new L6(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[B4(e.shape),...j4(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},o=[B4(t),...j4(t)],a=new B6(o,n),i=[n],s=this.runWebGLProgram(a,[r],e.dtype,i,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:r,shape:o,dtype:a}=n;if(null!=t){RA(FA(o)<=t[0]*t[1]*4,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."))}const i=H4(o);let s;s=r?new E5(i):new S5(i);const l=[null!=t?t:S4(i)];return{dtype:a,shape:o,dataId:this.runWebGLProgram(s,[{shape:i,dtype:a,dataId:e}],a,l,!0,t).dataId}}runWebGLProgram(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0;const i=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(i.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===w4.DENSE){const t=null!=a?a:S4(e.outputShape);s.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===FA(i.shape))return s.values=WA(i.dtype,0),i;const l=[],u=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&FA(t.shape)<=hO().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),l.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!W4(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),l.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(i.dataId);const c={shape:i.shape,texData:s,isUniform:!1},d=function(e,t,n){let r="";t.concat(n).forEach((t=>{const o=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const a=t.texData.texShape,{useSqueezeShape:i,uniformShape:s,keptDims:l}=v5(e.packedInputs,t.shape,a);let u="",c="",d="";if(1===s.length&&e.packedInputs){const e=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];u=`${e[0]>1}_${e[1]>1}`}else if(2!==s.length||e.packedInputs){if(s.length>2&&!e.packedInputs){const e=ZA(s);d=`${e[0]===a[1]}_${e[e.length-1]===a[1]}`}}else c=`${s[0]>1}_${s[1]>1}`;const h=t.shape.length,p=2===s.length&&_A(t.shape,a),f=1===FA(t.shape),m=vM(t.shape,n.shape),g=!e.packedInputs&&h===n.shape.length&&_A(a,n.texData.texShape),v=e.packedInputs||s.length>2?"":`${a[0]>1}_${a[1]>1}`;r+=`${h}_${g}_${i?l:""}_${s.length}_${f}_${m}_${p}_${u}_${c}_${d}_${v}_${o}`}else{const e=t.isUniform?"uniform":t.texData.texShape;r+=`${t.shape}_${e}_${o}`}}));const o=e.userCode;let a=e.constructor.name;return a+="_"+r+"_"+o+`${hO().getNumber("WEBGL_VERSION")}`,a}(e,u,c),h=this.getAndSaveBinary(d,(()=>w5(this.gpgpu,e,u,c))),p=null!=this.activeTimers;let f;p&&(f=this.startTimer()),hO().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,o){t.program.enableShapeUniforms||(k5(t.inShapeInfos,n),k5([t.outShapeInfo],[r]));const a=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(a.texture,i[0],i[1]):e.setOutputMatrixTexture(a.texture,i[0],i[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===hO().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<n.length;++l){const r=n[l],{uniform:o,offset:a,shape:i,texShape:s}=t.variablesLocations[l];if(i){const{uniformShape:n}=v5(t.program.packedInputs,r.shape,r.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(i,new Int32Array(n));break;case 2:e.gl.uniform2iv(i,new Int32Array(n));break;case 3:e.gl.uniform3iv(i,new Int32Array(n));break;case 4:e.gl.uniform4iv(i,new Int32Array(n))}}if(s&&e.gl.uniform2i(s,r.texData.texShape[0],r.texData.texShape[1]),null!=o)if(r.isUniform)if(FA(r.shape)<2)e.gl.uniform1f(o,r.uniformValues[0]);else{let t=r.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(o,t)}else null!=r.texData.slice&&null!=a&&e.gl.uniform1i(a,r.texData.slice.flatOffset),e.setInputMatrixTexture(r.texData.texture.texture,o,l)}const s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=ZA(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&o)for(let l=0;l<t.program.customUniforms.length;++l){const n=t.program.customUniforms[l],r=t.customUniformLocations[l],a=o[l];if("float"===n.type)e.gl.uniform1fv(r,a);else if("vec2"===n.type)e.gl.uniform2fv(r,a);else if("vec3"===n.type)e.gl.uniform3fv(r,a);else if("vec4"===n.type)e.gl.uniform4fv(r,a);else if("int"===n.type)e.gl.uniform1iv(r,a);else if("ivec2"===n.type)e.gl.uniform2iv(r,a);else if("ivec3"===n.type)e.gl.uniform3iv(r,a);else{if("ivec4"!==n.type)throw Error(`uniform type ${n.type} is not supported yet.`);e.gl.uniform4iv(r,a)}}e.executeProgram()}(this.gpgpu,h,u,c,r),l.forEach((e=>this.disposeIntermediateTensorInfo(e))),p&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));const m=hO().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){const e=nF();e-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!hO().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===o){const e=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),e}return i}compileAndRun(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,r,o)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!hO().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}))}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=o_((()=>{if(!hO().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=hO().getBool("DEBUG");hO().set("DEBUG",!1);const t=this.abs(rM(1e-8)).dataSync()[0];if(hO().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:o,texture:a,usage:i,isPacked:s}=t;if(null!=a)return;const l=null!=this.activeTimers;let u;l&&(u=nF());let c=t.texShape;if(null==c&&(c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=hO().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=hO().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&hO().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,e=e.map(((t,n)=>n>=e.length-2?AA(e[n]):e[n])),1===e.length&&(e=[2,e[0]])),2!==e.length){const t=VA(e);e=t.newShape}let o=FA(e),a=null;e.length<=1&&o<=n?a=[1,o]:2===e.length&&e[0]<=n&&e[1]<=n?a=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?a=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?a=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?a=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(a=[e[0],e[1]*e[2]*e[3]]);const i=null!=a&&Math.max(...a)>r&&Math.min(...a)<=(t?2:1)&&Math.min(...a)>0;if(null==a||i)if(t){const t=B4(e);let n=2,r=2;e.length&&([n,r]=j4(e)),o=t*(n/2)*(r/2),a=zA(o).map((e=>2*e))}else a=zA(o);return a}(n,s),t.texShape=c),null!=o){const e=H4(n);let a,i=c[1],d=c[0];const h=o instanceof Uint8Array||o instanceof Uint8ClampedArray;!s&&h||([i,d]=E4(c[0],c[1])),a=s?new A5(e,h):new T5(e,h);const p=h?[d,i]:c,f=this.makeTensorInfo(p,r),m=this.texData.get(f.dataId);m.usage=h?x4.PIXELS:x4.UPLOAD,m.texShape=p,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),i,d,o);const g=[[d,i]],v=!0,b=this.runWebGLProgram(a,[f],r,g,v),y=this.texData.get(b.dataId);t.texShape=y.texShape,t.isPacked=y.isPacked,t.usage=y.usage,hO().get("ENGINE_COMPILE_ONLY")?this.disposeData(b.dataId):(t.texture=y.texture,t.values=null,this.texData.delete(b.dataId)),this.disposeIntermediateTensorInfo(f),l&&(this.uploadWaitMs+=nF()-u)}else{const e=this.acquireTexture(c,i,r,s);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error(`Unknown dtype ${t}`)}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*KA(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise((e=>{try{this.checkCompletion_(t),e(!0)}catch(n){throw n}}));e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await bj(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw O4(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:o,outShapeLocation:a,outShapeStridesLocation:i,outTexShapeLocation:s}=x5(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=o,e.outShapeLocation=a,e.outShapeStridesLocation=i,e.outTexShapeLocation=s}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";const{texture:r,height:o,width:a,channels:i}=e,s=n_().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=s.writeTexture(r,t,n,o,a,i);return n_().makeTensorFromDataId(l,t,n,s)}}n8.nextDataId=0;WF()&&s_("webgl",(()=>new n8),2);const r8="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class o8{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=yM(t,n),this.enableShapeUniforms=C5(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}const a8="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class i8{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=yM(t,n);const o=this.outputShape.length;this.enableShapeUniforms=C5(o);let a="";if(r)if(0===o||1===FA(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{if(a=`\n          ${g5(o)} coords = getOutputCoords();\n        `,1===o)this.enableShapeUniforms?a+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":a+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=z6("coords",o);this.enableShapeUniforms?a+=`\n            bool nextRowOutOfBounds =\n              (${e[o-2]} + 1) >= outShape[${o} - 2];\n            bool nextColOutOfBounds =\n              (${e[o-1]} + 1) >= outShape[${o} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:a+=`\n            bool nextRowOutOfBounds =\n              (${e[o-2]} + 1) >= ${this.outputShape[o-2]};\n            bool nextColOutOfBounds =\n              (${e[o-1]} + 1) >= ${this.outputShape[o-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${a}\n\n        setOutput(result);\n      }\n    `}}function s8(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const l8={kernelName:RR,backendName:"webgl",kernelFunc:s8};function u8(e){const{inputs:t,backend:n}=e,{real:r,imag:o}=t,a=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(a.dataId),s=s8({inputs:{x:r},backend:n}),l=s8({inputs:{x:o},backend:n});return i.complexTensorInfos={real:s,imag:l},a}const c8={kernelName:VO,backendName:"webgl",kernelFunc:u8},d8="return (a < 0.) ? b * a : a;",h8="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const p8={kernelName:zR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{alpha:a}=r,i=n.makeTensorInfo([],"float32",eF(a,"float32")),s=hO().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new i8(h8,o.shape,i.shape):new o8(d8,o.shape,i.shape),l=n.runWebGLProgram(s,[o,i],"float32");return n.disposeIntermediateTensorInfo(i),l}},f8="return (a < 0.) ? b * a : a;",m8="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const g8={kernelName:yP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:o}=t,a=hO().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new i8(m8,r.shape,o.shape):new o8(f8,r.shape,o.shape);return n.runWebGLProgram(a,[r,o],"float32")}},v8="if (isnan(x)) return x;";function b8(e){let{opSnippet:t,packedOpSnippet:n,cpuKernelImpl:r,dtype:o}=e;return e=>{let{inputs:a,backend:i}=e;const{x:s}=a,l=i,u=o||s.dtype;if(l.shouldExecuteOnCPU([s])&&null!=r){const e=l.texData.get(s.dataId),t=r(e.values,u);return l.makeTensorInfo(s.shape,u,t)}let c;return c=hO().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new Y6(s.shape,n):new G6(s.shape,t),l.runWebGLProgram(c,[s],u)}}function y8(e){let{opSnippet:t,packedOpSnippet:n,checkOutOfBounds:r=!1,supportsComplex:o=!1,cpuKernelImpl:a,dtype:i}=e;return e=>{let{inputs:s,backend:l}=e;const{a:u,b:c}=s,d=l;if(o&&"complex64"===u.dtype){const e=d.texData.get(u.dataId),n=d.texData.get(c.dataId),[r,o]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((e=>{const[n,r]=e,o={dataId:n.dataId,dtype:n.dtype,shape:u.shape},a={dataId:r.dataId,dtype:r.dtype,shape:c.shape},i=new o8(t,u.shape,c.shape);return d.runWebGLProgram(i,[o,a],$F(n.dtype,r.dtype))})),a=u8({inputs:{real:r,imag:o},backend:d});return d.disposeIntermediateTensorInfo(r),d.disposeIntermediateTensorInfo(o),a}const h=i||$F(u.dtype,c.dtype);if(("string"===u.dtype||"string"===c.dtype||d.shouldExecuteOnCPU([u,c]))&&null!=a){const e=d.texData.get(u.dataId).values,t=d.texData.get(c.dataId).values,n="string"===u.dtype?NH(e):e,r="string"===u.dtype?NH(t):t,[o,i]=a(u.shape,c.shape,n,r,h),s=d.makeTensorInfo(i,h);return d.texData.get(s.dataId).values=o,s}let p;return p=hO().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new i8(n,u.shape,c.shape,r):new o8(t,u.shape,c.shape),d.runWebGLProgram(p,[u,c],h)}}function w8(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":q6;if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":X6;if("prelu"===e)return t?m8:f8;if("leakyrelu"===e)return t?h8:d8;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}class x8{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=C5(this.outputShape.length);const u=r?e[1]:e[2],c=Math.ceil(u/2),d=r?"i * 2, rc.y":"rc.y, i * 2",h=o?"rc.z, i * 2":"i * 2, rc.z",p=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";i&&(m=s?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${i}\n        }`:l?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${i}\n        }`:`vec4 activation(vec4 x) {\n          ${i}\n        }`,g="result = activation(result);");const v=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let b="rc.x",y="rc.x";e[0]<t[0]?b=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(y=`imod(rc.x, ${t[0]})`),this.userCode=`\n      ${m}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${c}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ${b};\n        int batchB = ${y};\n        for (int i = 0; i < ${c}; i++) {\n          vec4 a = getMatrixA(batchA, ${d});\n          vec4 b = getMatrixB(batchB, ${h});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${p[0]} * ${f[0]});\n          result += (${p[1]} * ${f[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${v}\n\n        ${g}\n\n        setOutput(result);\n      }\n    `}}const k8="return areal * breal - aimag * bimag;",C8="return areal * bimag + aimag * breal;";class S8{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=yM(t,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const E8="return a * b;";function N8(e){const{inputs:t,backend:n}=e,{a:r,b:o}=t,a=$F(r.dtype,o.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(o.dataId),a=new S8(k8,r.shape,o.shape),i=new S8(C8,r.shape,o.shape),s=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:o.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:o.shape}],l=n.runWebGLProgram(a,s,"float32"),u=n.runWebGLProgram(i,s,"float32"),c=u8({inputs:{real:l,imag:u},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),c}if(n.shouldExecuteOnCPU([r,o])){const e=n.texData.get(r.dataId),t=n.texData.get(o.dataId),[i,s]=c6(r.shape,o.shape,e.values,t.values,a),l=n.makeTensorInfo(s,a);return n.texData.get(l.dataId).values=i,l}let i;return i=hO().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new i8(E8,r.shape,o.shape):new o8(E8,r.shape,o.shape),n.runWebGLProgram(i,[r,o],a)}const I8={kernelName:lP,backendName:"webgl",kernelFunc:N8};function $8(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{shape:a}=r,i=n,s=FA(o.shape),l=jA(a,s),u=FA(l);RA(s===u,(()=>`The new shape (${l}) has ${u} elements and the old shape (${o.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`));const c=i.texData.get(o.dataId);return!c.isPacked||W4(o.shape,l)||null!==c.texture&&W4(c.shape,l)?(i.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype}):function(e,t,n){const r=[B4(e.shape),...j4(e.shape)],o={dtype:e.dtype,shape:r,dataId:e.dataId},a=[B4(t),...j4(t)],i=new B6(a,r),s=[r],l=n.runWebGLProgram(i,[o],e.dtype,s,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(o,l,i)}const T8={kernelName:$P,backendName:"webgl",kernelFunc:$8};class A8{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:o,outSize:a}=e;this.outputShape=[r,a];const i=4*Math.floor(n/4),s=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l=`sumValue += dot(values * ${MA(e)?e.toPrecision(2):e}, ones);`}let u="";o%n>0&&(u=`\n        if (inIdx < 0 || inIdx >= ${o}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${u}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${i}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${i};\n        if (${1===s}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}}class O8{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:o,outSize:a}=e;this.outputShape=[r,a];let i="0.0",s="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",s="min"):"max"===t&&(i="-1.0 / 1e-20",s="max");let l=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");const u=4*Math.floor(n/4),c=n%4;let d=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${s}(values, minMaxValue);\n        if (${"min"===t} || ${"max"===t}) {\n          minMaxValue = ${s}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,h="vec4";"all"===t?(i="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===t&&(i="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");let p="";o%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${o}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${i};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${p}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${i});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${h} values = ${h}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${d}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===c}) {\n          ${h} values = ${h}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${d}\n        } else if (${2===c}) {\n          ${h} values = ${h}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${d}\n        } else if (${3===c}) {\n          ${h} values = ${h}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${d}\n        }\n        setOutput(${l});\n      }\n    `}}function R8(e,t,n,r){const o=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=Ij(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let a=e;for(let i=0;i<o.length;i++){const{inSize:s,windowSize:l,outSize:u}=o[i];let c,d;c="mean"===n?0===i?new A8({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:u},s):new A8({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:u}):new O8({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:u},n),d=a,a=r.runWebGLProgram(c,[a],t),d.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(d)}return a}class P8{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[t[a]];this.outputShape=n,this.rank=n.length;const r=g5(this.rank),o=function(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let o=0;o<e.length;o++)r[e[o]]=n[o];return r.join()}(t);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${o}));\n    }\n    `}}class D8{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let u=0;u<n.length;u++)n[u]=e[t[u]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=g5(this.rank),o=M6("rc",this.rank),a=new Array(this.rank);for(let u=0;u<t.length;u++)a[t[u]]=o[u];const i=`vec2(${a.slice(-2).join()})`,s=`++${o[this.rank-1]} < ${n[this.rank-1]}`,l=`getChannel(getA(${a.join()}), ${i})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${l};\n      if(${s}) {\n        result[1] = ${l};\n      }\n      --${o[this.rank-1]};\n      if(++${o[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${l};\n        if(${s}) {\n          result[3] = ${l};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function F8(e,t,n){const r=hO().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new D8(e.shape,t):new P8(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function _8(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;return function(e,t,n,r){const o=t,a=e.shape.length,i=HA(o,e.shape);let s=i;const l=lL(s,a),u=null!=l;let c=e;u&&(c=F8(e,l,r),s=cL(s.length,a)),sL("sum",s,a);const[d,h]=aL(c.shape,s);let p=d;n&&(p=iL(d,i));const f=FA(h),m=$8({inputs:{x:c},attrs:{shape:[FA(e.shape)/f,f]},backend:r}),g=R8(m,TF(e.dtype),"sum",r),v=$8({inputs:{x:g},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),u&&r.disposeIntermediateTensorInfo(c),v}(o,a,i,n)}const M8={kernelName:XP,backendName:"webgl",kernelFunc:_8};function z8(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{perm:a}=r,i=n,s=o.shape.length,l=new Array(s);for(let c=0;c<l.length;c++)l[c]=o.shape[a[c]];let u;if(i.shouldExecuteOnCPU([o])){const e=i.texData.get(o.dataId).values,t=F6(e,o.shape,o.dtype,a,l);u=i.makeTensorInfo(l,o.dtype);i.texData.get(u.dataId).values=t}else u=F8(o,a,i);return u}const L8={kernelName:vD,backendName:"webgl",kernelFunc:z8};function B8(e){let{a:t,b:n,transposeA:r,transposeB:o,backend:a,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:l=0,activation:u=null}=e;const c=t.shape.length,d=n.shape.length,h=r?t.shape[c-2]:t.shape[c-1],p=o?n.shape[d-1]:n.shape[d-2],f=r?t.shape[c-1]:t.shape[c-2],m=o?n.shape[d-2]:n.shape[d-1],g=t.shape.slice(0,-2),v=n.shape.slice(0,-2),b=FA(g),y=FA(v),w=yM(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([f,m]);RA(h===p,(()=>`Error in matMul: inner shapes (${h}) and (${p}) of Tensors with shapes ${t.shape} and ${n.shape} and transposeA=${r} and transposeB=${o} must match.`));const x=r?[b,h,f]:[b,f,h],k=o?[y,m,p]:[y,p,m],C=$8({inputs:{x:t},backend:a,attrs:{shape:x}}),S=$8({inputs:{x:n},backend:a,attrs:{shape:k}}),E=[C,S],N=Math.max(b,y),I=r?C.shape[1]:C.shape[2],$=null!=i,T=null!=s,A="leakyrelu"===u,O=null!=u?w8(u,!0):null;let R;if((1===f||1===m)&&I>1e3&&!1===($||T||A||null!=O)){let e=C,t=S;r&&(e=z8({inputs:{x:C},backend:a,attrs:{perm:[0,2,1]}}),E.push(e)),o&&(t=z8({inputs:{x:S},backend:a,attrs:{perm:[0,2,1]}}),E.push(t));const n=1===m;let i=e;1!==m&&(i=$8({inputs:{x:e},backend:a,attrs:{shape:[N,I,1]}}),E.push(i));const s=1===m?2:1;let l=t;n&&(l=$8({inputs:{x:t},backend:a,attrs:{shape:[N,1,I]}}),E.push(l));const u=N8({inputs:{a:i,b:l},backend:a});R=_8({inputs:{x:u},backend:a,attrs:{axis:s,keepDims:!0}}),E.push(u)}else{const e=$F(t.dtype,n.dtype),u=new x8(x,k,[N,f,m],r,o,$,O,T,A),c=[C,S];if(null!=i&&c.push(i),T&&c.push(s),A){const e=a.makeTensorInfo([],"float32",eF(l,"float32"));c.push(e),E.push(e)}R=a.runWebGLProgram(u,c,e)}const P=$8({inputs:{x:R},backend:a,attrs:{shape:w}});E.push(R);for(const D of E)a.disposeIntermediateTensorInfo(D);return P}const j8={kernelName:ED,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:a,bias:i,preluActivationWeights:s}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;return B8({a:o,b:a,transposeA:l,transposeB:u,backend:n,bias:i,preluActivationWeights:s,leakyreluAlpha:d,activation:c})}},H8="return abs(x);";const V8={kernelName:vO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=x6(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let o;return o=hO().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Y6(r.shape,H8):new G6(r.shape,H8),n.runWebGLProgram(o,[r],r.dtype)}},W8=b8({opSnippet:U6+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),G8={kernelName:bO,backendName:"webgl",kernelFunc:W8},U8=b8({opSnippet:U6+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),K8={kernelName:yO,backendName:"webgl",kernelFunc:U8},q8="return a + b;",X8=y8({opSnippet:q8,packedOpSnippet:q8,supportsComplex:!0,cpuKernelImpl:H5}),J8={kernelName:wO,backendName:"webgl",kernelFunc:X8};class Y8{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`float v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}class Q8{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}const Z8={kernelName:xO,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,o=n;if(1===o.length)return s8({inputs:{x:o[0]},backend:r});if(o.length>hO().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(o.length/2),n=e({inputs:o.slice(0,t),backend:r}),a=e({inputs:o.slice(t),backend:r});return e({inputs:[n,a],backend:r})}const a=o.map((e=>e.dtype)).reduce(((e,t)=>$F(e,t))),i=o.map((e=>e.shape)),s=hO().getBool("WEBGL_PACK")?new Q8(o[0].shape,i):new Y8(o[0].shape,i);return r.runWebGLProgram(s,o,a)}};const e9={kernelName:kO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=o.shape.length,l=HA(a,o.shape);let u=l;const c=lL(u,s);let d=o;null!=c&&(d=z8({inputs:{x:o},backend:n,attrs:{perm:c}}),u=cL(u.length,s)),sL("all",u,s);const[h,p]=aL(d.shape,u),f=$8({inputs:{x:d},backend:n,attrs:{shape:[-1,FA(p)]}}),m=R8(f,f.dtype,"all",n);let g;if(i){g=$8({inputs:{x:m},backend:n,attrs:{shape:iL(h,l)}})}else g=$8({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=c&&n.disposeIntermediateTensorInfo(d),g}};const t9={kernelName:CO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=o.shape.length,l=HA(a,o.shape);let u=l;const c=lL(u,s);let d=o;null!=c&&(d=z8({inputs:{x:o},backend:n,attrs:{perm:c}}),u=cL(u.length,s)),sL("any",u,s);const[h,p]=aL(d.shape,u),f=$8({inputs:{x:d},backend:n,attrs:{shape:[-1,FA(p)]}}),m=R8(f,f.dtype,"any",n);let g;if(i){g=$8({inputs:{x:m},backend:n,attrs:{shape:iL(h,l)}})}else g=$8({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=c&&n.disposeIntermediateTensorInfo(d),g}};class n9{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:o,outSize:a}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,a];const i="max"===t?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${s};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${i} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}class r9{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,RA(e.length>2,(()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`));const o=e[e.length-1],a=Math.ceil(o/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");const i=this.outputShape,s=i.length,l=g5(s),u=z6("coords",s);let c,d;if(1===a){d=s+1;const e=g5(d);c=`\n        ${e} sourceLocR = ${e}(${u.join()}, 0);\n        ++${u[s-1]};\n        ${e} sourceLocG = ${e}(${u.join()}, 0);\n        ++${u[s-2]};\n        ${e} sourceLocA = ${e}(${u.join()}, 0);\n        --${u[s-1]};\n        ${e} sourceLocB = ${e}(${u.join()}, 0);\n        --${u[s-2]};`}else d=s,c=`\n        ${l} sourceLocR = coords;\n        ++${u[s-1]};\n        ${l} sourceLocG = coords;\n        ++${u[s-2]};\n        ${l} sourceLocA = coords;\n        --${u[s-1]};\n        ${l} sourceLocB = coords;\n        --${u[s-2]};`;const h=["x","y","z","w","u","v"].slice(0,d),p="."+h[d-1],f=h.map((e=>"int "+e)),m=z6("sourceLocR",d-1).concat("inIdx.r"),g=z6("sourceLocG",d-1).concat("inIdx.g"),v=z6("sourceLocB",d-1).concat("inIdx.b"),b=z6("sourceLocA",d-1).concat("inIdx.a"),y="max"===n?"greaterThan":"lessThan",w=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${v.join()}),\n                             getBestIndicesAChannel(${b.join()})));`,x=`vec4(\n            getAChannel(${m.join()}),\n            hasNextCol ? getAChannel(${g.join()}) : 0.,\n            hasNextRow ? getAChannel(${v.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,k=r?"":`\n      float getBestIndicesAChannel(${f.join()}) {\n        return getChannel(getBestIndicesA(${h.join()}),\n                                          vec2(${h.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${f.join()}) {\n        return getChannel(getA(${h.join()}),\n                               vec2(${h.slice(-2).join()}));\n      }\n      ${k}\n      void main() {\n        ${l} coords = getOutputCoords();\n        bool hasNextCol = ${u[s-1]} < ${i[s-1]-1};\n        bool hasNextRow = ${u[s-2]} < ${i[s-2]-1};\n        ${c}\n        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},\n          sourceLocB${p}, sourceLocA${p}) * ${t};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${x};\n\n        for (int i = 0; i < ${t}; i++) {\n          inIdx = srcIdx;\n          ${w}\n          vec4 candidate = ${x};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${y}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}function o9(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=t.shape[0],a=t.shape[1];null!=r&&(o=r.shape[0],a=r.shape[1]);const i=Ij(a),s={windowSize:i,inSize:a,batchSize:o,outSize:Math.ceil(a/i)},l=new n9(s,n,null==r),u=[t];null!=r&&u.push(r);const c=e.runWebGLProgram(l,u,"int32");if(1===c.shape[1])return c;const d=o9(e,t,n,c);return e.disposeIntermediateTensorInfo(c),d}function a9(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const o=null!=r?r.shape:t.shape,a=Ij(o[o.length-1]),i=new r9(o,a,n,null==r),s=null==r?[t]:[t,r],l=e.runWebGLProgram(i,s,"int32");if(l.shape.length===t.shape.length){const r=a9(e,t,n,l);return e.disposeIntermediateTensorInfo(l),r}return l}function i9(e,t,n,r){const o=[n];if(sL("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,t.shape.length),!hO().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],a=e.texData.get(t.dataId);let i=t;null!==a&&a.isPacked&&(i=e.unpackTensor(t),n.push(i));const[s,l]=aL(i.shape,o),u=FA(l),c=$8({inputs:{x:i},backend:e,attrs:{shape:[-1,u]}});n.push(c);const d=o9(e,c,r);n.push(d);const h=$8({inputs:{x:d},backend:e,attrs:{shape:s}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),h}return a9(e,t,r)}const s9={kernelName:SO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a}=r;let i=HA(a,o.shape);const s=lL(i,o.shape.length);let l=o;const u=[];null!=s&&(l=z8({inputs:{x:o},backend:n,attrs:{perm:s}}),u.push(l),i=cL(i.length,l.shape.length)),sL("argMax",[i[0]],l.shape.length);const c=i9(n,l,i[0],"max");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}};const l9={kernelName:EO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a}=r;let i=HA(a,o.shape);const s=lL(i,o.shape.length);let l=o;const u=[];null!=s&&(l=z8({inputs:{x:o},backend:n,attrs:{perm:s}}),u.push(l),i=cL(i.length,l.shape.length)),sL("argMin",[i[0]],l.shape.length);const c=i9(n,l,i[0],"min");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}},u9=b8({opSnippet:U6+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),c9={kernelName:NO,backendName:"webgl",kernelFunc:u9},d9=b8({opSnippet:U6+"return log(x + sqrt(x * x + 1.0));"}),h9={kernelName:IO,backendName:"webgl",kernelFunc:d9},p9=b8({opSnippet:U6+"\n  return atan(x);\n"}),f9={kernelName:$O,backendName:"webgl",kernelFunc:p9},m9=y8({opSnippet:r8+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+a8+"\n  return result;\n"}),g9={kernelName:AO,backendName:"webgl",kernelFunc:m9},v9=b8({opSnippet:U6+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),b9={kernelName:TO,backendName:"webgl",kernelFunc:v9};class y9{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,i=e.strideHeight,s=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let v="0.0";if(f||(v="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${i}, ${s});\n        const ivec2 pads = ivec2(${h}, ${p});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${c};\n              wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${t} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?o?m:g:`wR * ${d} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let b=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(b="avgValue / max(count, 1.0)");const y=4*Math.floor(a/4),w=a%4,x=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${i}, ${s});\n      const ivec2 pads = ivec2(${h}, ${p});\n      const float initializationValue = ${v};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${v});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${c};\n            wR += ${l}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${y}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${x}\n          }\n\n          int xC = xCCorner + ${y};\n          if (${1===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${x}\n          } else if (${2===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${x}\n          } else if (${3===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${x}\n          }\n        }\n        setOutput(${b});\n      }\n    `}}class w9{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,i=e.strideDepth,s=e.strideHeight,l=e.strideWidth,u=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;const b="avg"===t;let y="0.0";if(b||(y="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${i}, ${s}, ${l});\n        const ivec3 pads = ivec3(${m}, ${g}, ${v});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${h};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${p};\n                wR += ${c}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${d}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${t} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?o?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let w=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(w="avgValue / max(count, 1.0)");const x=4*Math.floor(a/4),k=a%4,C=`\n      if (${b}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${i}, ${s}, ${l});\n      const ivec3 pads = ivec3(${m}, ${g}, ${v});\n      const float initializationValue = ${y};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${y});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${h};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${p};\n            wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${x}; wC += 4) {\n              int xC = xCCorner + wC * ${d};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${d}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${d}, ch)\n              );\n\n              ${C}\n            }\n\n            int xC = xCCorner + ${x};\n            if (${1===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${C}\n            } else if (${2===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${C}\n            } else if (${3===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${d}, ch),\n                initializationValue\n              );\n\n              ${C}\n            }\n          }\n        }\n        setOutput(${w});\n      }\n    `}}const x9={kernelName:OO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;Y4(o,"avgPool");const{filterSize:a,strides:i,pad:s,dimRoundingMode:l}=r;RA(pz(i,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const u=rz(o.shape,a,i,1,s,l);if(1===u.filterWidth&&1===u.filterHeight&&_A(u.inShape,u.outShape))return s8({inputs:{x:o},backend:n});const c=new y9(u,"avg",!1);return n.runWebGLProgram(c,[o],"float32")}};const k9={kernelName:PO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:l,dataFormat:u}=r,c=oz(o.shape,a,i,[1,1,1],s,l,u),d=new w9(c,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}};class C9{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=s-1-e.padInfo.top,c=l-1-e.padInfo.left,d=1/(t*n);this.userCode=`\n      const ivec2 pads = ivec2(${u}, ${c});\n      const float avgMultiplier = float(${d});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${s};\n            wR += ${a}) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${l};\n            wC+= ${i}) {\n            float dyC = float(dyCCorner + wC) / ${o}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class S9{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=c-1-e.padInfo.front,f=d-1-e.padInfo.top,m=h-1-e.padInfo.left,g=1/(t*n*r);this.userCode=`\n      const ivec3 pads = ivec3(${p}, ${f}, ${m});\n      const float avgMultiplier = float(${g});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${c};\n            wD += ${s}) {\n          float dyD = float(dyDCorner + wD) / ${o}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${d};\n              wR += ${l}) {\n            float dyR = float(dyRCorner + wR) / ${a}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${h};\n                wC += ${u}) {\n              float dyC = float(dyCCorner + wC) / ${i}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const E9={kernelName:DO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,i=a,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,d=oz(i.shape,s,l,[1,1,1],u,c),h=new S9(d);return n.runWebGLProgram(h,[o],i.dtype)}};const N9={kernelName:RO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,i=a;Y4([o,a],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=rz(i.shape,s,l,1,u),d=new C9(c);return n.runWebGLProgram(d,[o],i.dtype)}};const I9={kernelName:FO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:a}=t,{transposeA:i,transposeB:s}=r;return B8({a:o,b:a,transposeA:i,transposeB:s,backend:n})}};class $9{constructor(e,t,n,r,o,a){this.outputShape=[],this.variableNames=["x","mean","variance"],yM(e,t),yM(e,n);let i="0.0";null!=r&&(yM(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let s="1.0";null!=o&&(yM(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${i};\n        float scale = ${s};\n        float inv = scale * inversesqrt(variance + float(${a}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}class T9{constructor(e,t,n,r,o,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],yM(e,t),yM(e,n);let i="vec4(0.0)";null!=r&&(yM(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=o&&(yM(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        vec4 offset = ${i};\n        vec4 scale = ${s};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${a}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}const A9={kernelName:IR,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o,mean:a,variance:i,offset:s,scale:l}=t;RA(a.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),RA(null==s||a.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),RA(null==l||a.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:u}=r;null==u&&(u=.001);const c=[o,a,i];let d=null;null!=s&&(d=s.shape,c.push(s));let h=null;null!=l&&(h=l.shape,c.push(l));const p=hO().getBool("WEBGL_PACK_NORMALIZATION")?new T9(o.shape,a.shape,i.shape,d,h,u):new $9(o.shape,a.shape,i.shape,d,h,u);return n.runWebGLProgram(p,c,c[0].dtype)}};class O9{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=g5(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return R9.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);let r;const o=e.map(((e,t)=>`sourceLoc.${R9[t]} = start[${t}] + coords.${R9[t]};`));r=`\n        ${t} sourceLoc;\n        ${t} coords = getOutputCoords();\n        ${o.join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${r}\n        setOutput(getSource(${n}));\n      }\n    `}}const R9=["x","y","z","w","u","v"];class P9{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=g5(this.rank),n=z6("coords",this.rank),r=z6("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,a=`getChannel(getSource(${r.join()}), ${o})`,i=`\n      result.x = ${a};\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${a};\n        --${r[this.rank-1]};\n      }\n    `,s=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${a};\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${a};\n        }\n      }\n    `,l=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map(((e,t)=>`start[${t}]`)).join()});`:e.map(((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`)).join("\n");this.userCode=`\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${l}\n        vec4 result = vec4(0.);\n        ${i}\n        ${s}\n        setOutput(result);\n      }\n    `}}function D9(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:a,size:i}=r,[s,l]=JM(o,a,i);if(_M(o,s,l),0===FA(l))return n.makeTensorInfo(l,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||"string"===o.dtype){const e=n.texData.get(o.dataId),t=k6(e.values,s,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,t)}const{isPacked:u}=n.texData.get(o.dataId),c=qM(o.shape,s,l);if(u||!c){const e=hO().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new P9(l):new O9(l),t=[s];return n.runWebGLProgram(e,[o],o.dtype,t)}return n.uploadToGPU(o.dataId),function(e,t,n,r){const o=r.texData.get(e.dataId),a=r.makeTensorInfo(n,e.dtype),i=r.texData.get(a.dataId);Object.assign(i,o),i.refCount=1,i.shape=n,i.dtype=e.dtype;let s=XM(t,ZA(e.shape));o.slice&&(s+=o.slice.flatOffset),i.slice={flatOffset:s,origDataId:o.slice&&o.slice.origDataId||e.dataId};const l=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,l+1),a}(o,s,l,n)}const F9={kernelName:HP,backendName:"webgl",kernelFunc:D9},_9={kernelName:_O,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:a,crops:i}=r;RA(o.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const s=a.reduce(((e,t)=>e*t)),l=Tj(o.shape,a,s),u=Aj(l.length,a.length),c=Oj(o.shape,a,s),d=Rj(i,a.length),h=Pj(c,i,a.length),p=[],f=$8({inputs:{x:o},backend:n,attrs:{shape:l}}),m=z8({inputs:{x:f},backend:n,attrs:{perm:u}}),g=$8({inputs:{x:m},backend:n,attrs:{shape:c}}),v=D9({inputs:{x:g},backend:n,attrs:{begin:d,size:h}});return p.push(f),p.push(m),p.push(g),p.forEach((e=>n.disposeIntermediateTensorInfo(e))),v}};const M9={kernelName:MO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:a}=t,{size:i}=r,s=n.readSync(o.dataId),l=n.readSync(a.dataId),u=V5(s,l,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,u)}};const z9={kernelName:zO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{a:r,b:o}=t,a=hO().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=hO().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,o])||1===i){const e=n.texData.get(r.dataId).values,t=n.texData.get(o.dataId).values,[a,i]=G5(r.shape,o.shape,e,t,r.dtype),s=n.makeTensorInfo(i,r.dtype);return n.texData.get(s.dataId).values=a,s}let s;return s=a?new i8("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",r.shape,o.shape,!1):new o8("\n  return float(int(a.r) & int(b.r));\n",r.shape,o.shape),n.runWebGLProgram(s,[r,o],r.dtype)}};const L9={kernelName:LO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:o}=t,a=n.readSync(r.dataId),i=n.readSync(o.dataId),s=yM(Array.from(a),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},B9=y8({opSnippet:"return float(a != b);",cpuKernelImpl:h6,dtype:"bool"}),j9={kernelName:cP,backendName:"webgl",kernelFunc:B9};function H9(e){const{inputs:t,backend:n}=e,{input:r}=t;return s8({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const V9={kernelName:EP,backendName:"webgl",kernelFunc:H9};const W9={kernelName:BO,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:o}=t,{x:a}=n,{dtype:i}=o;if("complex64"===i){if("complex64"===a.dtype)return s8({inputs:{x:a},backend:r});const t=CL(a.shape),n=e({inputs:{x:a},backend:r,attrs:{dtype:"float32"}}),o=u8({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),o}if("complex64"===a.dtype){const t=H9({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(t),n}if(!UA(a.dtype,i)){const e=s8({inputs:{x:a},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:i}}if(r.shouldExecuteOnCPU([a])){const e=r.texData.get(a.dataId).values,[t,n,o]=U5(e,a.shape,a.dtype,i);return r.makeTensorInfo(t,n,o)}if("int32"===i)return function(e,t){const n=new G6(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(a,r);if("bool"===i){const e=r.makeTensorInfo([],"bool",WA("bool",1)),t=B9({inputs:{a:a,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${i}`)}},G9="return ceil(x);",U9=b8({opSnippet:G9,packedOpSnippet:G9,cpuKernelImpl:K5}),K9={kernelName:jO,backendName:"webgl",kernelFunc:U9};class q9{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class X9{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const J9={kernelName:HO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{clipValueMin:a,clipValueMax:i}=r;let s;s=hO().getBool("WEBGL_PACK_CLIP")?new X9(o.shape):new q9(o.shape);const l=[[a],[i]];return n.runWebGLProgram(s,[o],o.dtype,l)}};class Y9{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function Q9(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const Z9={kernelName:WO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,o=n.texData.get(r.dataId),a=new Y9(r.shape),i=[Q9(r,o.complexTensorInfos.real),Q9(r,o.complexTensorInfos.imag)];return n.runWebGLProgram(a,i,i[0].dtype)}};class e7{constructor(e){this.outputShape=[],this.outputShape=wj(e,1),this.variableNames=e.map(((e,t)=>`T${t}`));const t=new Array(e.length-1);t[0]=e[0][1];for(let a=1;a<t.length;a++)t[a]=t[a-1]+e[a][1];const n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<t.length;a++){const e=t[a-1];n.push(`else if (yC < ${t[a]}) setOutput(getT${a}(yR, yC-${e}));`)}const r=t.length,o=t[t.length-1];n.push(`else setOutput(getT${r}(yR, yC-${o}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}class t7{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=wj(e,t);const n=this.outputShape,r=n.length,o=g5(r),a=z6("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(((e,t)=>`T${t}`));const s=new Array(e.length-1);s[0]=e[0][t];for(let f=1;f<s.length;f++)s[f]=s[f-1]+e[f][t];const l=i[t],u=i.slice(-2),c=i.join();let d=`if (${l} < ${s[0]}) {\n        return getChannel(\n            getT0(${c}), vec2(${u.join()}));\n        }`;for(let f=1;f<s.length;f++){const e=s[f-1];d+=`\n        if (${l} < ${s[f]}  && ${l} >= ${s[f-1]}) {\n          return getChannel(\n            getT${f}(${n7(i,l,e)}),\n            vec2(${n7(u,l,e)}));\n        }`}const h=s.length,p=s[s.length-1];d+=`\n        return getChannel(\n          getT${h}(${n7(i,l,p)}),\n          vec2(${n7(u,l,p)}));`,this.userCode=`\n      float getValue(${i.map((e=>"int "+e))}) {\n        ${d}\n      }\n\n      void main() {\n        ${o} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${a}), 0., 0., 0.);\n\n        ${a[r-1]} = ${a[r-1]} + 1;\n        if (${a[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${a});\n        }\n\n        ${a[r-2]} = ${a[r-2]} + 1;\n        if (${a[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${a});\n        }\n\n        ${a[r-1]} = ${a[r-1]} - 1;\n        if (${a[r-2]} < ${n[r-2]} &&\n            ${a[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${a});\n        }\n        setOutput(result);\n      }\n    `}}function n7(e,t,n){const r=e.indexOf(t),o=e.map(((e,t)=>t===r?`${e} - ${n}`:e));return o.join()}function r7(e){const{inputs:t,backend:n}=e,{input:r}=t;return s8({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const o7={kernelName:DR,backendName:"webgl",kernelFunc:r7};function a7(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map((e=>H9({inputs:{input:e},backend:n}))),o=e.map((e=>r7({inputs:{input:e},backend:n}))),a=a7(r,t,n),i=a7(o,t,n),s=u8({inputs:{real:a,imag:i},backend:n});return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),o.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),s}let o=n.shouldExecuteOnCPU(e);if("string"===r&&(o=!0),o){const o=e.map((e=>{const r=FA(e.shape.slice(t));return $8({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),a=o.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),i=wj(o.map((e=>e.shape)),1),s=1===o[0].shape[0],l=q5(a,i,r,s),u=wj(e.map((e=>e.shape)),t),c=n.makeTensorInfo(u,r,l);return o.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}const a=e.filter((e=>FA(e.shape)>0)),i=hO().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(1===a.length){const t=i?new G6(e[0].shape,J6):new Y6(e[0].shape,J6);return n.runWebGLProgram(t,e,r)}const s=hO().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>s){const e=[];for(let o=0;o<a.length;o+=s){const r=a.slice(o,o+s);e.push(a7(r,t,n))}const r=a7(e,t,n);for(const t of e)n.disposeIntermediateTensorInfo(t);return r}if(i){const e=new t7(a.map((e=>e.shape)),t);return n.runWebGLProgram(e,a,r)}const{tensors2D:l,outShape:u}=function(e,t,n){const r=wj(e.map((e=>e.shape)),t),o=e.map((e=>$8({inputs:{x:e},attrs:{shape:[-1,FA(e.shape.slice(t))]},backend:n})));return{tensors2D:o,outShape:r}}(a,t,n),c=new e7(l.map((e=>e.shape))),d=n.runWebGLProgram(c,l,r);l.forEach((e=>n.disposeIntermediateTensorInfo(e)));const h=$8({inputs:{x:d},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(d),h}function i7(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r,a=HA(o,t[0].shape)[0],i=t.map((e=>e.shape));yj(i,a);const s=wj(t.map((e=>e.shape)),a);if(0===FA(s))return n.makeTensorInfo(s,t[0].dtype,[]);const l=t.filter((e=>FA(e.shape)>0));return 1===l.length?s8({inputs:{x:l[0]},backend:n}):a7(l,a,n)}const s7={kernelName:GO,backendName:"webgl",kernelFunc:i7};class l7{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,i=e.padInfo.left,s=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,v=m?2:3,b=m?3:1;let y="",w="";n&&(y=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:o?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,w="result = activation(result);");const x=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${y}\n\n      const ivec2 strides = ivec2(${s}, ${l});\n      const ivec2 pads = ivec2(${a}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${b}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${v}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${d}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${h}; wC++) {\n            int xC = xCCorner + wC * ${c};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${p}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${m}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===f}) {\n\n              if (${m}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${p}) *\n                    getW(wR, wC, ${p}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${p}, xR, xC) *\n                    getW(wR, wC, ${p}, d2);\n              }\n\n            } else if (${2===f}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2)\n              );\n\n              if (${m}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===f}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2),\n                getW(wR, wC, ${p} + 2, d2)\n              );\n\n              if (${m}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1),\n                  getX(batch, xR, xC, ${p} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC),\n                  getX(batch, ${p} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${x}\n        ${w}\n        setOutput(result);\n      }\n    `}}class u7{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterDepth,d=e.filterHeight,h=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${o}, ${a}, ${i});\n      const ivec3 pads = ivec3(${t}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${c}; wF++) {\n          int xF = xFCorner + wF * ${s};\n\n          if (xF < 0 || xF >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${d}; wR++) {\n            int xR = xRCorner + wR * ${l};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${h}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${p}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${p}) *\n                  getW(wF, wR, wC, ${p}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1),\n                  getX(batch, xF, xR, xC, ${p} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2),\n                  getW(wF, wR, wC, ${p} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class c7{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=C5(this.outputShape.length);const a=e.padInfo.left,i=e.strideWidth,s=e.dilationWidth,l=e.filterHeight,u=e.filterWidth,c=u;let d="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let m=0;m<u;m++)d+=`\n           vec4 xTexelC${2*m};\n           int xTexelC${2*m}Ready;\n           vec4 xTexelC${2*m+1};\n           int xTexelC${2*m+1}Ready;\n           vec4 xC${m};`;d+=`\n     for (int r = 0; r < ${l}; r++) {\n      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {\n       `;for(let m=0;m<u;m++)d+=`\n           xTexelC${2*m} = vec4(0.0);\n           xTexelC${2*m}Ready = 0;\n           xTexelC${2*m+1} = vec4(0.0);\n           xTexelC${2*m+1}Ready = 0;\n           xC${m} = vec4(0.0);`;d+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let m=0;m<(c+1)/2;m++){const t=2*m;if(d+=`\n           xC = xCCorner + ${t*s};\n           `,1===i){if(t<u&&(a%2===1?(d+=`\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                   xTexelC${t} = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${t}.zw = vec2(0.0);\n                   }\n                   xTexelC${t}Ready = 1;\n                 }\n               `,d+=1===s&&t>0?`\n                 xC${t} = vec4(xTexelC${t-2}.zw, xTexelC${t}.xy);\n                 `:`\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC${t} = vec4(previous.zw, xTexelC${t}.xy);\n                   } else {\n                     xC${t} = vec4(0.0, 0.0, xTexelC${t}.xy);\n                   }\n                   `):d+=`\n                 if (xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                   xTexelC${t} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${t}.zw = vec2(0.0);\n                   }\n                   xTexelC${t}Ready = 1;\n                 }\n\n                 xC${t} = xTexelC${t};\n                 `,t+1<u)){const e=a%2===0?AA(s):s;s%2===0&&a%2===1||s%2!==0&&a%2!==1?(d+=`\n                   xCOffset = xC + imod(pads[1], 2) + ${e};\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                     xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC${t+1}.zw = vec2(0.0);\n                     }\n                     xTexelC${t+1}Ready = 1;\n                   }\n                   `,d+=s>1?`\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC${t+1} = vec4(previous.zw, xTexelC${t+1}.xy);\n                     } else {\n                      xC${t+1} = vec4(0.0, 0.0, xTexelC${t+1}.xy);\n                     }\n                     `:`\n                     xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.xy);\n                     `):d+=1===e?`\n                     xC${t+1} = xTexelC${t};\n                     `:`\n                     xCOffset = xC + ${e};\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                       xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC${t+1}.zw = vec2(0.0);\n                       }\n                       xTexelC${t+1}Ready = 1;\n                     }\n\n                     xC${t+1} = xTexelC${t+1};\n                     `}}else t<u&&(a%2===1?(d+=`\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                   xTexelC${t} = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${t}.zw = vec2(0.0);\n                   }\n                   xTexelC${t}Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${t+1}Ready == 0) {\n                   xTexelC${t+1} = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC${t+1}.zw = vec2(0.0);\n                   }\n                   xTexelC${t+1}Ready = 1;\n                 }\n\n                 xC${t} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n               `,t+1<u&&(d+=`\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC${t+1} = vec4(xTexelC${t+1}.xy, final.xy);\n                 `)):(d+=`\n                 if(xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                   xTexelC${t} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${t}.zw = vec2(0.0);\n                   }\n                   xTexelC${t}Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                   xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${t+1}.zw = vec2(0.);\n                   }\n                   xTexelC${t+1}Ready = 1;\n                 }\n\n                 xC${t} = vec4(\n                   xTexelC${t}.xy, xTexelC${t+1}.xy);\n               `,t+1<u&&(d+=`\n                   xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n                 `)));t<u&&(d+=`\n             wTexel = getW(r, ${t}, d1, d2);\n             dotProd += xC${t}.xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ${e.inChannels}) {\n               dotProd += xC${t}.yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           `,t+1<u&&(d+=`\n               wTexel = getW(r, ${t+1}, d1, d2);\n               dotProd += xC${t+1}.xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ${e.inChannels}) {\n                 dotProd += xC${t+1}.yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             `))}d+="\n     }\n   ",d+="\n     }\n   ",d+="\n     }\n   ";let h="",p="";n&&(h=r?`vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ${n}\n         }`:o?`vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ${n}\n         }`:`vec4 activation(vec4 x) {\n           ${n}\n         }`,p="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n       ${h}\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ${d}\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ${f}\n         ${p}\n         setOutput(result);\n       }\n     `}}class d7{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=C5(this.outputShape.length);const{dataFormat:n}=t,r=Z4(),o="channelsLast"===n,a=o?1:2,i=o?2:3,s=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let l="";for(let u=0;u<=1;u++)for(let e=0;e<=1;e++)l+=`\n          blockIndex = rc.z + ${e};\n          pos = rc.y + ${u};\n\n          ${s}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${a}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${i}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${o}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*u+e}] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*u+e}] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${l}\n\n        ${r.output} = result;\n      }\n    `}}function h7(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function p7(e){let{x:t,filter:n,convInfo:r,backend:o,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:l=null}=e;const u=t.shape,c=o.texData.get(t.dataId),d=r.inChannels,h=u[0]*u[1]*u[2],p=r.outChannels,f="channelsLast"===r.dataFormat,m=!1;let g;const v=[];if(null!=i){const e=h7(i.shape,f);null!=e&&(i=$8({inputs:{x:i},backend:o,attrs:{shape:e}}),v.push(i))}if(null!=a){const e=h7(a.shape,f);null!=e&&(a=$8({inputs:{x:a},backend:o,attrs:{shape:e}}),v.push(a))}if(!((1===h||1===p)&&d>1e3)&&c.isPacked&&f&&null!=c.texture&&u[2]%2!==0&&_A(c.shape.slice(-3),u.slice(-3))){const e=u[0]*u[1]*(u[2]+1),d={dataId:t.dataId,shape:[1,e,r.inChannels],dtype:t.dtype},h=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,RA(W4(c.shape,d.shape),(()=>`packed reshape ${c.shape} to ${d.shape} isn't free`));const p=$8({inputs:{x:n},backend:o,attrs:{shape:[1,r.inChannels,r.outChannels]}});v.push(p);const f=B8({a:d,b:p,backend:o,transposeA:false,transposeB:m,bias:a,activation:l,preluActivationWeights:i,leakyreluAlpha:s}),b=o.texData.get(f.dataId);RA(b.isPacked,(()=>"batchMatMul result is expected to be packed")),c.shape=h,b.shape=r.outShape,g=s8({inputs:{x:f},backend:o}),g.shape=r.outShape,v.push(f)}else{const e=r.outHeight*r.outWidth,u=$8({inputs:{x:t},backend:o,attrs:{shape:f?[r.batchSize,e,r.inChannels]:[r.batchSize,r.inChannels,e]}}),c=$8({inputs:{x:n},backend:o,attrs:{shape:[1,r.inChannels,r.outChannels]}}),d=B8({a:f?u:c,b:f?c:u,transposeA:!f,transposeB:m,backend:o,bias:a,activation:l,preluActivationWeights:i,leakyreluAlpha:s});g=$8({inputs:{x:d},backend:o,attrs:{shape:r.outShape}}),v.push(u),v.push(c),v.push(d)}for(const b of v)o.disposeIntermediateTensorInfo(b);return g}function f7(e){let{x:t,filter:n,convInfo:r,backend:o,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:l=null}=e;const{filterWidth:u,filterHeight:c,inChannels:d,outWidth:h,outHeight:p,dataFormat:f}=r,m="channelsLast"===f,g=u*c*d,v=p*h,b=[r.batchSize,g,v],y=[];if(null!=i){const e=h7(i.shape,m);null!=e&&(i=$8({inputs:{x:i},backend:o,attrs:{shape:e}}),y.push(i))}if(null!=a){const e=h7(a.shape,m);null!=e&&(a=$8({inputs:{x:a},backend:o,attrs:{shape:e}}),y.push(a))}const w=$8({inputs:{x:n},backend:o,attrs:{shape:[1,g,FA(n.shape)/g]}});y.push(w);const x=new d7(b,r),k=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],C=o.runWebGLProgram(x,[t],"float32",k),S=$8({inputs:{x:C},backend:o,attrs:{shape:b}});y.push(C),y.push(S);const E=null!=a,N=null!=i,I="leakyrelu"===l,$=l?w8(l,!0):null,T=new x8(m?S.shape:w.shape,m?w.shape:S.shape,m?[r.batchSize,v,r.outChannels]:[r.batchSize,r.outChannels,v],!0,!1,E,$,N,I),A=m?[S,w]:[w,S];if(a&&A.push(a),N&&A.push(i),I){const e=o.makeTensorInfo([],"float32",eF(s,"float32"));A.push(e),y.push(e)}const O=o.runWebGLProgram(T,A,"float32"),R=$8({inputs:{x:O},backend:o,attrs:{shape:r.outShape}});y.push(O);for(const P of y)o.disposeIntermediateTensorInfo(P);return R}const m7={kernelName:UO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r,d=mz(l),h=az(o.shape,a.shape,i,u,s,c,!1,d);let p;if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if(h.strideWidth<=2&&"channelsLast"===d&&hO().getBool("WEBGL_EXP_CONV")){const e=new c7(h),t=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];p=n.runWebGLProgram(e,[o,a],"float32",t)}else if(hO().getBool("WEBGL_CONV_IM2COL"))p=f7({x:o,filter:a,convInfo:h,backend:n});else{const e=new l7(h);p=n.runWebGLProgram(e,[o,a],"float32")}else p=p7({x:o,filter:a,convInfo:h,backend:n});const f=$8({inputs:{x:p},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(p),f}};class g7{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,a="channelsLast"===e.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${o};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              ${a?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);"}\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class v7{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a="channelsLast"===e.dataFormat,i=t-1-e.padInfo.top,s=n-1-e.padInfo.left,l=a?1:2,u=a?2:3,c=a?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${i}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${c}];\n\n        ivec2 dyCorner = ivec2(coords[${l}], coords[${u}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${o}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${a}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class b7{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,a=e.padInfo.top,i=e.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\n            int xF = wF + yF * ${t} - ${o};\n\n            if (xF < 0 || xF >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\n              int xR = wR + yR * ${n} - ${a};\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\n                int xC = wC + yC * ${r} - ${i};\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class y7{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=t-1-e.padInfo.front,l=n-1-e.padInfo.top,u=r-1-e.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${s}, ${l}, ${u});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${o}.0;\n\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${a}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${i}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const w7={kernelName:KO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,d=mz(l),h=az(o.shape,c,i,1,s,u,!1,d),p=new g7(h);return n.runWebGLProgram(p,[o,a],"float32")}};class x7{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=C5(this.outputShape.length);const t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,o=n-1-e.padInfo.left;this.userCode=`\n      const ivec2 pads = ivec2(${r}, ${o});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            int wCPerm = ${n} - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    `}}const k7={kernelName:qO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{inputShape:i,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r,d=mz(u),h=az(i,a.shape,s,1,l,c,!1,d);if(hO().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===d){const e=[[h.strideHeight,h.strideWidth]],t=new x7(h);return n.runWebGLProgram(t,[o,a],"float32",e)}{const e=new v7(h);return n.runWebGLProgram(e,[o,a],"float32")}}};const C7={kernelName:XO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:l}=r,u=iz(o.shape,a.shape,i,l,s),c=new u7(u);return n.runWebGLProgram(c,[o,a],"float32")}};const S7={kernelName:JO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,pad:s,filterShape:l}=r,u=iz(o.shape,l,i,1,s),c=new b7(u);return n.runWebGLProgram(c,[o,a],"float32")}};const E7={kernelName:YO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{pad:i,strides:s,inputShape:l}=r,u=iz(l,a.shape,s,1,i),c=new y7(u);return n.runWebGLProgram(c,[o,a],"float32")}},N7=b8({opSnippet:v8+"\n  return cos(x);\n",packedOpSnippet:`\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ${a8}\n  return result;\n`}),I7={kernelName:QO,backendName:"webgl",kernelFunc:N7},$7=b8({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),T7={kernelName:ZO,backendName:"webgl",kernelFunc:$7};class A7{constructor(e,t,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,i,s,l]=e,[u]=t,[c,d]=n;this.outputShape=[u,c,d,l];const h="bilinear"===r?1:0,[p,f]=[i-1+".0",s-1+".0"],[m,g,v]=c>1?[""+(i-1)/(c-1),"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[b,y,w]=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${f}`];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${b});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${a}) {\n          return;\n        }\n\n        float height_scale = ${g};\n        float width_scale = ${y};\n\n        float in_y = ${v};\n        if( in_y < 0.0 || in_y > ${p} ) {\n          setOutput(float(${o}));\n          return;\n        }\n        float in_x = ${w};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${o}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${h} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}const O7={kernelName:nR,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:o,boxes:a,boxInd:i}=t,{cropSize:s,method:l,extrapolationValue:u}=r,c=new A7(o.shape,a.shape,s,l,u);return n.runWebGLProgram(c,[o,a,i],"float32")}};var R7;!function(e){e.Prod="*",e.Sum="+"}(R7||(R7={}));class P7{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const o=this.outputShape.length,a=this.op===R7.Prod?"1.0":"0.0",i=n?a:`getX(${D7(o,"coords",this.op)})`,s=this.outputShape[this.outputShape.length-1];let l="",u="";n?(l=r?"end != "+(s-1):"end != 0",u=r?"end + 1":"end - 1"):(l=r?`end + pow2 < ${s}`:"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${g5(o)} coords = getOutputCoords();\n        int end = ${F7(o,"coords",this.op)};\n        float val = ${i};\n        int pow2 = int(pow(2.0, index));\n        if (${l}) {\n          int idx = ${u};\n          ${F7(o,"coords",this.op)} = idx;\n          val ${this.op}= getX(${D7(o,"coords",this.op)});\n        }\n        setOutput(val);\n      }\n    `}}function D7(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function F7(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.y`;if(3===e)return`${t}.z`;if(4===e)return`${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function _7(e,t,n,r,o,a){const i=t.shape.length,s=lL([r],i);let l=t;null!=s&&(l=z8({inputs:{x:t},backend:n,attrs:{perm:s}}));const u=cL(1,i)[0];if(u!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);const c=l.shape[u];let d=s8({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(c))-1;h++){const t=new P7(e,l.shape,!1,a),r=[[h]],o=d;d=n.runWebGLProgram(t,[d],d.dtype,r),n.disposeIntermediateTensorInfo(o)}if(o){const t=new P7(e,l.shape,o,a),r=d;d=n.runWebGLProgram(t,[d],d.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=s){const e=z8({inputs:{x:d},backend:n,attrs:{perm:uL(s)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),e}return d}const M7={kernelName:eR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,exclusive:i,reverse:s}=r;return _7(R7.Prod,o,n,a,i,s)}};const z7={kernelName:tR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,exclusive:i,reverse:s}=r;return _7(R7.Sum,o,n,a,i,s)}};const L7={kernelName:rR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:a}=t,{size:i,binaryOutput:s}=r;if(1===o.shape.length){const e=n.readSync(o.dataId),t=n.readSync(a.dataId),r=V5(e,t,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,r)}if(2===o.shape.length){const e=n.bufferSync(o),t=n.bufferSync(a),r=W5(e,t,i,s);return n.makeTensorInfo(r.shape,a.dtype,r.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}};class B7{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${t};\n      int offset_h = imod(h, ${t});\n      int in_w = w / ${t};\n      int offset_w = imod(w, ${t});\n      int offset_d = (offset_h * ${t} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const j7={kernelName:oR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockSize:a,dataFormat:i}=r,s=o.shape[0],l=("NHWC"===i?o.shape[1]:o.shape[2])*a,u=("NHWC"===i?o.shape[2]:o.shape[3])*a,c=("NHWC"===i?o.shape[3]:o.shape[1])/(a*a),d=new B7("NHWC"===i?[s,l,u,c]:[s,c,l,u],a,i);return n.runWebGLProgram(d,[o],o.dtype)}};class H7{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=C5(this.outputShape.length);const a=e.filterHeight,i=e.filterWidth,s=e.outChannels/e.inChannels;let l="",u="";n&&(l=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:o?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,u="result = activation(result);");const c=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${l}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${s};\n        int q = d2 - d1 * ${s};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${a}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${i}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${c}\n        ${u}\n        setOutput(result);\n      }\n    `}}class V7{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=C5(this.outputShape.length);const a=e.outChannels/e.inChannels,i=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,d=c;let h="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let g=0;g<c;g++)h+=`\n          vec4 xTexelC${2*g};\n          int xTexelC${2*g}Ready;\n          vec4 xTexelC${2*g+1};\n          int xTexelC${2*g+1}Ready;\n          vec4 xC${g};`;h+=`\n    for (int r = 0; r < ${u}; r++) {\n      `;for(let g=0;g<c;g++)h+=`\n          xTexelC${2*g} = vec4(0.0);\n          xTexelC${2*g}Ready = 0;\n          xTexelC${2*g+1} = vec4(0.0);\n          xTexelC${2*g+1}Ready = 0;\n          xC${g} = vec4(0.0);`;h+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let g=0;g<(d+1)/2;g++){const e=2*g;if(h+=`\n          xC = xCCorner + ${e*l};\n          `,1===s){if(e<c&&(i%2===1?(h+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n              `,h+=1===l&&e>0?`\n                xC${e} = vec4(xTexelC${e-2}.zw, xTexelC${e}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${e} = vec4(previous.zw, xTexelC${e}.xy);\n                  } else {\n                    xC${e} = vec4(0.0, 0.0, xTexelC${e}.xy);\n                  }\n                  `):h+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n\n                xC${e} = xTexelC${e};\n                `,e+1<c)){const t=i%2===0?AA(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(h+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${t};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                    xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${e+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${e+1}Ready = 1;\n                  }\n                  `,h+=l>1?`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC${e+1} = vec4(previous.zw, xTexelC${e+1}.xy);\n                    } else {\n                     xC${e+1} = vec4(0.0, 0.0, xTexelC${e+1}.xy);\n                    }\n                    `:`\n                    xC${e+1} = vec4(xTexelC${e}.zw, xTexelC${e+1}.xy);\n                    `):h+=1===t?`\n                    xC${e+1} = xTexelC${e};\n                    `:`\n                    xCOffset = xC + ${t};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                      xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${e+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${e+1}Ready = 1;\n                    }\n\n                    xC${e+1} = xTexelC${e+1};\n                    `}}else e<c&&(i%2===1?(h+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${e+1}Ready == 0) {\n                  xTexelC${e+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${e+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${e+1}Ready = 1;\n                }\n\n                xC${e} = vec4(xTexelC${e}.zw, xTexelC${e+1}.zw);\n              `,e+1<c&&(h+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${e+1} = vec4(xTexelC${e+1}.xy, final.xy);\n                `)):(h+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                  xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${e+1}.zw = vec2(0.);\n                  }\n                  xTexelC${e+1}Ready = 1;\n                }\n\n                xC${e} = vec4(\n                  xTexelC${e}.xy, xTexelC${e+1}.xy);\n              `,e+1<c&&(h+=`\n                  xC${e+1} = vec4(xTexelC${e}.zw, xTexelC${e+1}.zw);\n                `)));e<c&&(h+=`\n            wTexel = getW(r, ${e}, d1, q);\n            dotProd += xC${e} * vec4(wTexel.xz, wTexel.xz);\n          `,e+1<c&&(h+=`\n              wTexel = getW(r, ${e+1}, d1, q);\n              dotProd += xC${e+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}h+="\n    }\n  ",h+="\n      }\n    ";let p="",f="";n&&(p=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:o?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,f="result = activation(result);");const m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${p}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${a};\n        int q = d2 - d1 * ${a};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${h}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${m}\n        ${f}\n        setOutput(result);\n      }\n    `}}const W7={kernelName:aR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:l,dimRoundingMode:u}=r;let c=l;null==c&&(c=[1,1]),RA(pz(i,c),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`));const d=az(o.shape,a.shape,i,c,s,u,!0);let h;h=hO().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new V7(d):new H7(d);const p=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[o,a],"float32",p)}};class G7{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${a} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${o};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class U7{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=t-1-e.padInfo.top,i=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${a}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${o}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${s}; dm++) {\n              int d2 = d1 * ${s} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const K7={kernelName:iR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r,d=az(o.shape,c,i,s,l,u,!0),h=new G7(d);return n.runWebGLProgram(h,[o,a],"float32")}};const q7={kernelName:sR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{strides:i,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r,d=az(c,a.shape,i,s,l,u,!0),h=new U7(d);return n.runWebGLProgram(h,[o,a],"float32")}};class X7{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const J7={kernelName:lR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,o=[...r.shape,...r.shape],a=FA(r.shape),i=$8({inputs:{x:r},backend:n,attrs:{shape:[a]}}),s=new X7(a),l=n.runWebGLProgram(s,[i],i.dtype),u=$8({inputs:{x:l},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}};class Y7{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:o,strideWidth:a,filterHeight:i,filterWidth:s,dilationHeight:l,dilationWidth:u}=e,{top:c,left:d}=r;this.userCode=`\n      const ivec2 strides = ivec2(${o}, ${a});\n      const ivec2 pads = ivec2(${c}, ${d});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${i}; h++) {\n          int hIn = hBeg + h * ${l};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${s}; w++) {\n              int wIn = wBeg + w * ${u};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}const Q7={kernelName:uR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:l}=r,u=nz(o.shape,a.shape,i,s,"NHWC",l);let c;const d=new Y7(u);c=n.runWebGLProgram(d,[o,a],"float32");const h=$8({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),h}};const Z7={kernelName:fR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:o}=r,a=t,{allDims:i,summedDims:s,idDims:l}=oH(o,a.length);iH(i.length,l,a);const{path:u,steps:c}=sH(s,l),d=c.length;let h=null,p=i.length;const f=[];for(let m=0;m<d;++m){for(const e of c[m]){const{permutationIndices:t,expandDims:r}=aH(p,l[e]);let o;lH(t)?o=a[e]:(o=z8({inputs:{x:a[e]},backend:n,attrs:{perm:t}}),f.push(o));const i=o.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);_A(o.shape,i)||(o=$8({inputs:{x:o},backend:n,attrs:{shape:i}}),f.push(o)),null===h?h=o:(h=N8({inputs:{a:o,b:h},backend:n}),f.push(h))}m<d-1&&(u[m]>=0&&(h=_8({inputs:{x:h},backend:n,attrs:{axis:u[m]-(i.length-p),keepDims:!1}}),f.push(h)),p--)}for(const m of f)m!==h&&n.disposeIntermediateTensorInfo(m);return h}},eee=b8({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),tee={kernelName:mR,backendName:"webgl",kernelFunc:eee},nee={kernelName:gR,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:o}=t,a=hO().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new i8("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,o.shape):new o8("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,o.shape);return n.runWebGLProgram(a,[r,o],r.dtype)}},ree=y8({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:X5}),oee={kernelName:bR,backendName:"webgl",kernelFunc:ree},aee=b8({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${Bj};\n  float a1 = ${jj};\n  float a2 = ${Hj};\n  float a3 = ${Vj};\n  float a4 = ${Wj};\n  float a5 = ${Gj};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),iee={kernelName:vR,backendName:"webgl",kernelFunc:aee},see=b8({opSnippet:v8+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:J5,dtype:"float32"}),lee={kernelName:yR,backendName:"webgl",kernelFunc:see};function uee(e){const{inputs:t,attrs:n,backend:r}=e,{dim:o}=n,{input:a}=t,i=a.shape.length,s=a.shape.slice();let l=o;return o<0&&(RA(-(i+1)<=o,(()=>`Axis must be in the interval [${-(i+1)}, ${i}]`)),l=i+o+1),s.splice(l,0,1),$8({inputs:{x:a},backend:r,attrs:{shape:s}})}const cee={kernelName:wR,backendName:"webgl",kernelFunc:uee},dee="return exp(x) - 1.0;",hee=b8({opSnippet:dee,packedOpSnippet:dee,cpuKernelImpl:Y5}),pee={kernelName:xR,backendName:"webgl",kernelFunc:hee};class fee{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const o=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=n?`${r}.0`:"1.0";let i;if("real"===e)i="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);i="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${o};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${i}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${a};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}function mee(e,t,n){const r=n.texData.get(e.dataId),o=FA(e.shape),a=e.shape[e.shape.length-1],i=$8({inputs:{x:e},backend:n,attrs:{shape:[o/a,a]}}),s=i.shape,l=new fee("real",s,t),u=new fee("imag",s,t),c=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(l,c,"float32"),h=n.runWebGLProgram(u,c,"float32"),p=u8({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);const f=$8({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(p),f}const gee={kernelName:kR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return mee(r,!1,n)}};class vee{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function bee(e){const{backend:t,attrs:n}=e,{shape:r,value:o}=n;let{dtype:a}=n;if(a=a||JA(o),"string"===a){const e=GA(a,FA(r));return e.fill(o),t.makeTensorInfo(r,a,e)}{const e=new vee(r,o),n=[[o]];return t.runWebGLProgram(e,[],a,n)}}const yee={kernelName:CR,backendName:"webgl",kernelFunc:bee};class wee{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const xee={kernelName:SR,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{image:r}=t,o=n,a=new wee(r.shape);return o.runWebGLProgram(a,[r],r.dtype)}},kee="return floor(x);",Cee=b8({opSnippet:kee,packedOpSnippet:kee,cpuKernelImpl:Q5}),See={kernelName:ER,backendName:"webgl",kernelFunc:Cee},Eee=y8({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),Nee={kernelName:NR,backendName:"webgl",kernelFunc:Eee};class Iee{constructor(e){this.variableNames=["A"];const t=Z4(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${t.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class $ee{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=Z4(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${t.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${t.output} = result;\n      }\n    `}}const Tee={kernelName:CD,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:o}=t;const{numChannels:a}=r,i="undefined"!==typeof HTMLVideoElement&&o instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&o instanceof HTMLImageElement,[l,u]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],c=[u,l],d=[u,l,a];if(s||i){const e=hO().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=Aee&&e===Oee||(Oee=e,Aee=document.createElement("canvas").getContext("2d",{willReadFrequently:Oee})),Aee.canvas.width=l,Aee.canvas.height=u,Aee.drawImage(o,0,0,l,u),o=Aee.canvas}const h=n.makeTensorInfo(c,"int32");n.texData.get(h.dataId).usage=x4.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),o);const p=hO().getBool("WEBGL_PACK")?new $ee(d):new Iee(d),f=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),f}};let Aee,Oee=hO().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const Ree={kernelName:ND,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r,m=mz(c),g=az(o.shape,a.shape,l,d,u,h,!1,m);let v;const b=[],y=null!=i,w=null!=s,x="leakyrelu"===p,k=()=>{const e=[o,a],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=$8({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return b.push(t),t}return e};if(y&&e.push(t(i,c)),w&&e.push(t(s,c)),x){const t=n.makeTensorInfo([],"float32",eF(f,"float32"));e.push(t),b.push(t)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===m&&hO().getBool("WEBGL_EXP_CONV")){const e=p?w8(p,!0):null,t=new c7(g,y,e,w,x),r=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],o=k();v=n.runWebGLProgram(t,o,"float32",r)}else if(hO().getBool("WEBGL_CONV_IM2COL"))v=f7({x:o,filter:a,convInfo:g,backend:n,bias:i,activation:p,preluActivationWeights:s,leakyreluAlpha:f});else{const e=p?w8(p,!1):null,t=new l7(g,y,e,w,x),r=k();v=n.runWebGLProgram(t,r,"float32")}else v=p7({x:o,filter:a,convInfo:g,backend:n,bias:i,activation:p,preluActivationWeights:s,leakyreluAlpha:f});const C=$8({inputs:{x:v},backend:n,attrs:{shape:g.outShape}});return b.push(v),b.forEach((e=>n.disposeIntermediateTensorInfo(e))),C}};const Pee={kernelName:ID,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r,f=[];let m=c;null==m&&(m=[1,1]),RA(pz(l,m),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`));const g=az(o.shape,a.shape,l,m,u,d,!0),v=hO().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=h?w8(h,v):null,y=[o,a],w=null!=i,x=null!=s,k="leakyrelu"===h;if(w&&y.push(i),x&&y.push(s),k){const e=n.makeTensorInfo([],"float32",eF(p,"float32"));y.push(e),f.push(e)}let C;C=v?new V7(g,w,b,x,k):new H7(g,w,b,x,k);const S=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],E=n.runWebGLProgram(C,y,"float32",S);return f.forEach((e=>n.disposeIntermediateTensorInfo(e))),E}};class Dee{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;const o=g5(n.length);let a="\n    int index;";for(let i=0;i<this.sliceDim;i++)a+=`\n          index = round(getIndices(coords[0], ${i}));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[i]};\n          flattenIndex += index * ${this.strides[i]};`;this.userCode=`\n         void main() {\n          ${o} coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ${a}\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      `}}const Fee={kernelName:TR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:o}=t,a=o.shape,i=a[a.length-1],s=FA(r.shape),[l,u,c,d]=Dj(r,o),h=$8({inputs:{x:o},backend:n,attrs:{shape:[u,i]}}),p=$8({inputs:{x:r},backend:n,attrs:{shape:[FA(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,o])||"string"===r.dtype){const e=n.readSync(o.dataId),t=n.bufferSync(r),a=Z5(e,t,r.dtype,u,i,c,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,a.values)}const f=new Dee(i,d,[u,c],r.shape),m=n.runWebGLProgram(f,[p,h],p.dtype),g=$8({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}};class _ee{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=g5(this.rank),r=function(e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let r=0;r<e.length;r++)2===r?n.push("index"):n.push(`${t[r]}`);return n.join()}(e);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${r}));\n      }\n    `}}function Mee(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,indices:a}=t,{axis:i,batchDims:s}=r,l=HA(i,o.shape)[0];if(hO().get("DEBUG")){const e=n.readSync(a.dataId),t=o.shape[l];for(let n=0;n<e.length;++n){const r=e[n];RA(r<=t-1&&r>=0,(()=>`GatherV2: the index value ${r} is not in [0, ${t-1}]`))}}const u=EH(o,a,l,s),c=FA(a.shape),d=[],h=$8({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),p=$8({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(h),d.push(p);const f=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([o,a])||"string"===o.dtype){const e=n.bufferSync(p),t=n.bufferSync(h),r=e6(t,e,f);return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u.outputShape,r.dtype,r.values)}const m=new _ee(h.shape,f),g=n.runWebGLProgram(m,[h,p],h.dtype);d.push(g);const v=$8({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),v}const zee={kernelName:$R,backendName:"webgl",kernelFunc:Mee},Lee=y8({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:t6,dtype:"bool"}),Bee={kernelName:AR,backendName:"webgl",kernelFunc:Lee},jee=y8({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:n6}),Hee={kernelName:OR,backendName:"webgl",kernelFunc:jee};const Vee={kernelName:PR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return mee(r,!0,n)}},Wee=b8({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),Gee={kernelName:FR,backendName:"webgl",kernelFunc:Wee},Uee=b8({opSnippet:"return float(isinf(x));",dtype:"bool"}),Kee={kernelName:_R,backendName:"webgl",kernelFunc:Uee},qee=b8({opSnippet:"return float(isnan(x));",dtype:"bool"}),Xee={kernelName:MR,backendName:"webgl",kernelFunc:qee},Jee=y8({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:r6,dtype:"bool"}),Yee={kernelName:LR,backendName:"webgl",kernelFunc:Jee},Qee=y8({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:o6,dtype:"bool"}),Zee={kernelName:BR,backendName:"webgl",kernelFunc:Qee};const ete={kernelName:jR,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:o,num:a}=n,i=a6(r,o,a);return t.makeTensorInfo([i.length],"float32",i)}},tte=b8({opSnippet:v8+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:i6}),nte={kernelName:HR,backendName:"webgl",kernelFunc:tte},rte=b8({opSnippet:v8+"\n  return log(1.0 + x);\n"}),ote={kernelName:VR,backendName:"webgl",kernelFunc:rte},ate=y8({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),ite={kernelName:WR,backendName:"webgl",kernelFunc:ate},ste=b8({opSnippet:"return float(!(x >= 1.0));"}),lte={kernelName:GR,backendName:"webgl",kernelFunc:ste},ute=y8({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),cte={kernelName:UR,backendName:"webgl",kernelFunc:ute};class dte{constructor(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[];const a=t,i=e[3]-1;let s;this.outputShape=e;const l=`float(${n}) + float(${r}) * sum`;s=.5===o?`inversesqrt(${l})`:1===o?`1.0/(${l})`:`exp(log(${l}) * float(-${o}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${a}; j <= ${a}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${i}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${s};\n        setOutput(val);\n      }\n    `}}class hte{constructor(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=t,i=e[3]-1;let s;this.outputShape=e;const l=`float(${n}) + float(${r}) * sum`;s=.5===o?`inversesqrt(${l})`:1===o?`1.0/(${l})`:`exp(log(${l}) * float(-${o}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${a};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${a}; j <= ${a}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${i}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${s};\n        setOutput(result);\n      }\n    `}}const pte={kernelName:KR,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{depthRadius:a,bias:i,alpha:s,beta:l}=r,u=hO().getBool("WEBGL_PACK_NORMALIZATION")?new hte(o.shape,a,i,s,l):new dte(o.shape,a,i,s,l);return n.runWebGLProgram(u,[o],o.dtype)}};class fte{constructor(e,t,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=o,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${o})\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${o});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}const mte={kernelName:qR,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o,y:a,dy:i}=t,{depthRadius:s,bias:l,alpha:u,beta:c}=r,d=new fte(o.shape,s,l,u,c);return n.runWebGLProgram(d,[o,a,i],o.dtype)}};function gte(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reductionIndices:a,keepDims:i}=r,s=o.shape.length,l=HA(a,o.shape);let u=l;const c=lL(u,s),d=null!=c,h=n.shouldExecuteOnCPU([o]);let p=o;if(d){if(h){const e=n.texData.get(p.dataId).values,t=new Array(s);for(let n=0;n<t.length;n++)t[n]=o.shape[c[n]];const r=F6(e,o.shape,o.dtype,c,t);p=n.makeTensorInfo(t,o.dtype);n.texData.get(p.dataId).values=r}else p=F8(o,c,n);u=cL(u.length,s)}sL("max",u,s);const[f,m]=aL(p.shape,u);let g,v=f;if(i&&(v=iL(f,l)),h){const e=n.texData.get(p.dataId).values,t=s6(e,FA(m),v,o.dtype);g=n.makeTensorInfo(v,o.dtype);n.texData.get(g.dataId).values=t}else g=function(e,t,n,r){const o=FA(t),a=$8({inputs:{x:e},attrs:{shape:[FA(e.shape)/o,o]},backend:r}),i=R8(a,e.dtype,"max",r),s=$8({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),s}(p,m,v,n);return d&&n.disposeIntermediateTensorInfo(p),g}const vte={kernelName:XR,backendName:"webgl",kernelFunc:gte},bte=y8({opSnippet:r8+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+a8+"\n  return result;\n",cpuKernelImpl:l6}),yte={kernelName:JR,backendName:"webgl",kernelFunc:bte};const wte={kernelName:YR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;Y4(o,"maxPool");const{filterSize:a,strides:i,pad:s,dimRoundingMode:l}=r;RA(pz(i,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const u=rz(o.shape,a,i,1,s,l);if(1===u.filterWidth&&1===u.filterHeight&&_A(u.inShape,u.outShape))return s8({inputs:{x:o},backend:n});const c=new y9(u,"max",!1);return n.runWebGLProgram(c,[o],o.dtype)}};const xte={kernelName:ZR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:a,strides:i,pad:s,dataFormat:l,dimRoundingMode:u}=r,c=oz(o.shape,a,i,[1,1,1],s,u,l),d=new w9(c,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}};class kte{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,a=e.effectiveFilterWidth,i=o-1-e.padInfo.top,s=a-1-e.padInfo.left,l=o*a-1;this.userCode=`\n      const ivec2 pads = ivec2(${i}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${o};\n          wR += ${r}) {\n          float dyR = float(dyRCorner + wR) / ${t}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${a}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${a} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Cte{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterDepth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=s-1-e.padInfo.front,d=l-1-e.padInfo.top,h=u-1-e.padInfo.left,p=s*l*u-1;this.userCode=`\n      const ivec3 pads = ivec3(${c}, ${d}, ${h});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${s};\n           wD += ${o}) {\n          float dyD = float(dyDCorner + wD) / ${t}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${l};\n              wR += ${a}) {\n            float dyR = float(dyRCorner + wR) / ${n}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${u};\n                wC += ${i}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${p} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${l} * ${u} +\n                  wR * ${u} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const Ste={kernelName:eP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,i=a,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,d=oz(i.shape,s,l,[1,1,1],u,c),h=new w9(d,"max",!0),p=n.runWebGLProgram(h,[i],i.dtype),f=new Cte(d),m=n.runWebGLProgram(f,[o,p],i.dtype);return n.disposeIntermediateTensorInfo(p),m}};const Ete={kernelName:QR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a,output:i}=t,s=a;Y4([a,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,h=rz(s.shape,l,u,1,c,d),p=new y9(h,"max",!0),f=n.runWebGLProgram(p,[s],s.dtype),m=new kte(h),g=n.runWebGLProgram(m,[o,f],s.dtype);return n.disposeIntermediateTensorInfo(f),g}};const Nte={kernelName:tP,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:o}=t,{filterSize:a,strides:i,pad:s,includeBatchInIndex:l}=n,u=r;RA(4===o.shape.length,(()=>`Error in maxPool: input must be rank 4 but got rank ${o.shape.length}.`));const c=[1,1];RA(pz(i,c),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`));const d=rz(o.shape,a,i,c,s),[h,p]=function(e,t,n,r){let o=new y9(n,"max",!1);const a=r.runWebGLProgram(o,[e],"float32");return o=new y9(n,"max",!0,!0,t),[a,r.runWebGLProgram(o,[e],"float32")]}(o,l,d,u);return[h,p]}};const Ite={kernelName:nP,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:o}=t,{keepDims:a,axis:i}=n,s=r,l=o.shape.length,u=HA(i,o.shape);let c=u;const d=lL(c,l),h=null!=d,p=s.shouldExecuteOnCPU([o]),f=[];let m=o;if(h){if(p){const e=s.texData.get(m.dataId).values,t=new Array(l);for(let r=0;r<t.length;r++)t[r]=o.shape[d[r]];const n=F6(e,o.shape,o.dtype,d,t);m=s.makeTensorInfo(t,o.dtype);s.texData.get(m.dataId).values=n}else m=F8(o,d,s);f.push(m),c=cL(c.length,l)}sL("sum",c,l);const[g,v]=aL(m.shape,c);let b=g;a&&(b=iL(g,u));const y=function(e,t,n,r){const o=FA(t),a=$8({inputs:{x:e},attrs:{shape:[FA(e.shape)/o,o]},backend:r}),i=R8(a,"float32","mean",r),s=$8({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),s}(m,v,b,s);for(const w of f)s.disposeIntermediateTensorInfo(w);return y}};const $te={kernelName:rP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=o.shape.length,l=HA(a,o.shape);let u=l;const c=lL(u,s);let d=o;null!=c&&(d=z8({inputs:{x:o},backend:n,attrs:{perm:c}}),u=cL(u.length,o.shape.length)),sL("min",u,s);const[h,p]=aL(d.shape,u),f=$8({inputs:{x:d},backend:n,attrs:{shape:[-1,FA(p)]}}),m=R8(f,f.dtype,"min",n);let g;if(i){g=$8({inputs:{x:m},backend:n,attrs:{shape:iL(h,l)}})}else g=$8({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=c&&n.disposeIntermediateTensorInfo(d),g}},Tte=y8({opSnippet:r8+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+a8+"\n  return result;\n",cpuKernelImpl:u6}),Ate={kernelName:oP,backendName:"webgl",kernelFunc:Tte};class Ote{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=g5(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;this.userCode=1!==r?`\n      ${o} start = ${o}(${a});\n      ${o} end = ${o}(${i});\n\n      void main() {\n        ${o} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${l};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};\n          }\n        }\n        ${o} coords = outC - start;\n        setOutput(getX(${s}));\n      }\n    `:`\n        int start = ${a};\n        int end = ${i};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${l};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${l};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}class Rte{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=g5(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=z6("rc",r),l=z6("source",r),u=`${s[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${l.slice(-2).join()})`,d="reflect"===n?0:1;let h="";if(1===r){const e=`\n        ${o} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${d};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${d};\n        }\n        source -= start;\n      `;h=`\n        ${o} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${c});\n        ${s[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${c});\n        }\n      `}else{const e=`\n        ${o} source = rc;\n        ${o} lt = ${o}(lessThan(source, start));\n        ${o} gte = ${o}(greaterThanEqual(source, end));\n        ${o} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${d}) +\n                gte * ((end - 1) * 2 - source + ${d});\n        source -= start;\n      `;h=`\n        ${o} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${c});\n        ${s[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${c});\n        }\n        rc = outputLoc;\n        ${s[r-2]} += 1;\n        if(${s[r-2]} < ${this.outputShape[r-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${l.join()}), ${c});\n          ${s[r-1]} += 1;\n          if(${u}) {\n            ${e}\n            result[3] = getChannel(getX(${l.join()}), ${c});\n          }\n        }\n      `}this.userCode=`\n      const ${o} start = ${o}(${a});\n      const ${o} end = ${o}(${i});\n\n      void main() {\n        ${o} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${h}\n        setOutput(result);\n      }\n    `}}const Pte={kernelName:aP,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o}=t,{paddings:a,mode:i}=r,s=hO().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Rte(o.shape,a,i):new Ote(o.shape,a,i);return n.runWebGLProgram(s,[o],o.dtype)}},Dte=y8({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+a8+"\n  return result;\n"}),Fte={kernelName:iP,backendName:"webgl",kernelFunc:Dte};class _te{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}}const Mte=y8({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),zte={kernelName:pR,backendName:"webgl",kernelFunc:Mte},Lte="return a - b;",Bte=y8({opSnippet:Lte,packedOpSnippet:Lte,supportsComplex:!0,cpuKernelImpl:R6}),jte={kernelName:dD,backendName:"webgl",kernelFunc:Bte};function Hte(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{dim:a}=r,i=HA([a],o.shape),s=gte({inputs:{x:o},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=iL(s.shape,i),u=$8({inputs:{x:s},backend:n,attrs:{shape:l}}),c=Bte({inputs:{a:o,b:u},backend:n}),d=see({inputs:{x:c},backend:n}),h=_8({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),p=$8({inputs:{x:h},backend:n,attrs:{shape:l}}),f=Mte({inputs:{a:d,b:p},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),f}const Vte={kernelName:QP,backendName:"webgl",kernelFunc:Hte};const Wte={kernelName:sP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{numSamples:a,seed:i,normalized:s}=r,l=s?o:Hte({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new _te(u,c,a),h=[[i]],p=n.runWebGLProgram(d,[l],"int32",h);return s||n.disposeIntermediateTensorInfo(l),p}},Gte=U6+"\n  return -x;\n";const Ute={kernelName:uP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,o]=d6(e.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,t)}let o;return o=hO().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Y6(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new G6(r.shape,Gte),n.runWebGLProgram(o,[r],r.dtype)}},Kte=AB;const qte={kernelName:dP,backendName:"webgl",kernelFunc:function(e){$D("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:l}=r,u=n.readSync(o.dataId),c=n.readSync(a.dataId),{selectedIndices:d}=Kte(u,c,i,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},Xte=OB;const Jte={kernelName:hP,backendName:"webgl",kernelFunc:function(e){$D("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(o.dataId),d=n.readSync(a.dataId),{selectedIndices:h,validOutputs:p}=Xte(c,d,i,s,l,u);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},Yte=RB;const Qte={kernelName:pP,backendName:"webgl",kernelFunc:function(e){$D("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(o.dataId),d=n.readSync(a.dataId),h=i,p=s,f=l,m=u,{selectedIndices:g,selectedScores:v}=Yte(c,d,h,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}};class Zte{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}const ene={kernelName:mP,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:o}=t,{dtype:a,depth:i,onValue:s,offValue:l}=r,u=FA(o.shape),c=new Zte(u,i,s,l),d=$8({inputs:{x:o},backend:n,attrs:{shape:[u]}}),h=n.runWebGLProgram(c,[d],a);n.disposeIntermediateTensorInfo(d);const p=$8({inputs:{x:h},backend:n,attrs:{shape:[...o.shape,i]}});return n.disposeIntermediateTensorInfo(h),p}};function tne(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=H9({inputs:{input:r},backend:n}),t=tne({inputs:{x:e},backend:n}),o=r7({inputs:{input:r},backend:n}),a=tne({inputs:{x:o},backend:n}),i=u8({inputs:{real:t,imag:a},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),i}return bee({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const nne={kernelName:xD,backendName:"webgl",kernelFunc:tne};const rne={kernelName:fP,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:o}=n;if("string"===o.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===o.dtype){const t=H9({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r}),a=r7({inputs:{input:o},backend:r}),i=tne({inputs:{x:a},backend:r}),s=u8({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),s}return bee({attrs:{shape:o.shape,dtype:o.dtype,value:1},backend:r})}};const one={kernelName:gP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r;if(1===t.length)return uee({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const a=t[0].shape,i=t[0].dtype;t.forEach((e=>{PA(a,e.shape,"All tensors passed to stack must have matching shapes"),RA(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],l=t.map((e=>{const t=uee({inputs:{input:e},backend:n,attrs:{dim:o}});return s.push(t),t})),u=i7({inputs:l,backend:n,attrs:{axis:o}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}};class ane{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=g5(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${o} start = ${o}(${a});\n      ${o} end = ${o}(${i});\n\n      void main() {\n        ${o} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${o} coords = outC - start;\n          setOutput(getX(${s}));\n        }\n      }\n    `:`\n        int start = ${a};\n        int end = ${i};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}class ine{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=g5(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=z6("rc",r),l=z6("source",r),u=`${s[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${l.slice(-2).join()})`,d=[`${o} rc = outputLoc;`,`${s[r-1]} += 1;\n       if(${u}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${s[r-2]} += 1;\n       if(${s[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${s[r-1]} += 1;\n         if(${u}) {`],h=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,m=1===r?2:4;f<m;f++)p+=`\n        ${d[f]}\n        if (${h}) {\n          result[${f}] = float(value);\n        } else {\n          ${o} source = rc - start;\n          result[${f}] = getChannel(getX(${l.join()}), ${c});\n        }\n      `;p+=1===r?"} ":"}}",this.userCode=`\n      const ${o} start = ${o}(${a});\n      const ${o} end = ${o}(${i});\n\n      void main() {\n        ${o} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}}const sne=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:a,constantValue:i}=r;if(0===FA(o.shape)){const e=a.map(((e,t)=>e[0]+o.shape[t]+e[1]));return bee({backend:n,attrs:{shape:e,value:i,dtype:o.dtype}})}const s=hO().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ine(o.shape,a,i):new ane(o.shape,a,i),l=[[i]];return n.runWebGLProgram(s,[o],o.dtype,l)},lne={kernelName:vP,backendName:"webgl",kernelFunc:sne},une=y8({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+a8+"\n  return result;\n"}),cne={kernelName:bP,backendName:"webgl",kernelFunc:une};const dne={kernelName:wP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=o.shape.length,l=[],u=HA(a,o.shape);let c=u;const d=lL(c,s);let h,p=o;if(null!=d&&(p=z8({inputs:{x:o},backend:n,attrs:{perm:d}}),c=cL(c.length,s),l.push(p)),sL("prod",c,s),n.shouldExecuteOnCPU([p])){const e=n.texData.get(p.dataId).values,{outVals:t,outShape:r,outDtype:o}=p6(p.shape,p.dtype,e,c);h=n.makeTensorInfo(r,o,t)}else{const[e,t]=aL(p.shape,c),r=FA(t),a=$8({inputs:{x:p},backend:n,attrs:{shape:[-1,r]}}),i=R8(a,TF(o.dtype),"prod",n);h=$8({inputs:{x:i},backend:n,attrs:{shape:e}}),l.push(a),l.push(i)}if(i){l.push(h);const e=iL(h.shape,u);h=$8({inputs:{x:h},backend:n,attrs:{shape:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}};const hne={kernelName:xP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:o,paramsDenseValues:a,indices:i}=t,{outputRaggedRank:s}=r,l=o.map((e=>n.readSync(e.dataId))),u=o.map((e=>e.shape)),c=n.readSync(a.dataId),d=n.readSync(i.dataId),[h,p,f]=f6(l,u,c,a.shape,a.dtype,d,i.shape,s),m=h.map((e=>n.makeTensorInfo([e.length],"int32",e))),g=n.makeTensorInfo(f,a.dtype,p);return m.concat([g])}};const pne={kernelName:kP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:o,deltas:a}=t,i=n.readSync(r.dataId),s=n.readSync(o.dataId),l=n.readSync(a.dataId),[u,c]=m6(i,r.shape,r.dtype,s,o.shape,l,a.shape);return[n.makeTensorInfo([u.length],"int32",u),n.makeTensorInfo([c.length],r.dtype,c)]}};const fne={kernelName:CP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:o,values:a,defaultValue:i,rowPartitionTensors:s}=t,{rowPartitionTypes:l}=r,u=n.readSync(o.dataId),c=n.readSync(a.dataId),d=n.readSync(i.dataId),h=s.map((e=>n.readSync(e.dataId))),p=s.map((e=>e.shape)),[f,m]=g6(u,o.shape,c,a.shape,a.dtype,d,i.shape,h,p,l);return n.makeTensorInfo(f,a.dtype,m)}},mne=e=>{const{backend:t,attrs:n}=e,{start:r,stop:o,step:a,dtype:i}=n,s=v6(r,o,a,i);return t.makeTensorInfo([s.length],i,s)},gne={kernelName:SP,backendName:"webgl",kernelFunc:mne},vne=b8({opSnippet:"return 1.0 / x;"}),bne={kernelName:NP,backendName:"webgl",kernelFunc:vne},yne=b8({opSnippet:U6+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),wne={kernelName:IP,backendName:"webgl",kernelFunc:yne},xne=b8({opSnippet:U6+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),kne={kernelName:PP,backendName:"webgl",kernelFunc:xne};class Cne{constructor(e,t,n,r,o){this.variableNames=["A"],this.outputShape=[];const[a,i,s,l]=e;this.outputShape=[a,t,n,l];const u=[r&&t>1?i-1:i,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=o?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${i}.0, ${s}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${d};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class Sne{constructor(e,t,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,i,s,l]=e;this.outputShape=[a,t,n,l];const u=[r&&t>1?i-1:i,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=o?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]},\n          ${u[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${i}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${d};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}const Ene={kernelName:OP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=r,[l,u]=s,c=hO().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Sne(o.shape,l,u,a,i):new Cne(o.shape,l,u,a,i);return n.runWebGLProgram(c,[o],"float32")}};class Nne{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,o]=t,[,a,i]=e,s=[n&&a>1?r-1:r,n&&i>1?o-1:o],l=[n&&a>1?a-1:a,n&&i>1?i-1:i],u=s[0]/l[0],c=s[1]/l[1],d=1/u,h=1/c,p=2*Math.ceil(d)+2,f=2*Math.ceil(h)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${d});\n        const float invWidthScale = float(${h});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${a}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${i}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${o-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const Ine={kernelName:RP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:a}=t,{alignCorners:i}=r,s=new Nne(a.shape,o.shape,i);return n.runWebGLProgram(s,[a],a.dtype)}};class $ne{constructor(e,t,n,r,o){this.variableNames=["A"],this.outputShape=[];const[a,i,s,l]=e;this.outputShape=[a,t,n,l];const u=[r&&t>1?i-1:i,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let h;h=o?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${i}.0, ${s}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${h};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}class Tne{constructor(e,t,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,i,s,l]=e;this.outputShape=[a,t,n,l];const u=[r&&t>1?i-1:i,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let h;h=o?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]},\n          ${u[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${i}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${h};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}const Ane={kernelName:TP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=r,[l,u]=s,c=hO().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Tne(o.shape,l,u,a,i):new $ne(o.shape,l,u,a,i);return n.runWebGLProgram(c,[o],o.dtype)}};class One{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,o]=t,[,a,i]=e,s=[n&&a>1?r-1:r,n&&i>1?o-1:o],l=[n&&a>1?a-1:a,n&&i>1?i-1:i],u=s[0]/l[0],c=s[1]/l[1],d=1/u,h=1/c,p=2*Math.ceil(d)+2,f=2*Math.ceil(h)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${d});\n        const float invWidthScale = float(${h});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${a}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${i}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${s[0]}) *\n                (float(dyR) / float(${l[0]}));\n\n            float sourceFracCol =\n                float(${s[1]}) *\n                  (float(dyC) / float(${l[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${o}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const Rne={kernelName:AP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:a}=t,{alignCorners:i}=r,s=new One(a.shape,o.shape,i);return n.runWebGLProgram(s,[a],a.dtype)}};class Pne{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);const r=e.map(((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`)(r))).join(","),o=g5(n);this.userCode=`\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}class Dne{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;const r=z6("rc",n),o=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,a=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,i=g5(n);function s(n){const r=e.map(((r,o)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - ${r[n]} - 1`:`${r[n]}`}(o,n)));return`getChannel(getX(${r.join(",")}), vec2(${r.slice(-2).join(",")}))`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${o}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${i} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(e){return s(e)}(r.slice())};\n          if(${o}){\n            result.g = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())};\n          }\n          if(${a}) {\n            result.b = ${function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())};\n            if(${o}) {\n              result.a = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}const Fne={kernelName:DP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dims:a}=r,i=o.shape.length,s=HA(a,o.shape);if(0===i)return s8({inputs:{x:o},backend:n});const l=hO().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Dne(o.shape,s):new Pne(o.shape,s);return n.runWebGLProgram(l,[o],o.dtype)}};class _ne{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let o="";o="number"===typeof t?`float outputValue = ${t.toFixed(2)};`:`\n        vec3 fill = vec3(${t.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${o}\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const Mne={kernelName:SD,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:o}=t,{radians:a,fillValue:i,center:s}=n,l=r,u=new _ne(o.shape,i),[c,d]=$j(s,o.shape[1],o.shape[2]),h=[[c,d,Math.sin(a),Math.cos(a)]];return l.runWebGLProgram(u,[o],o.dtype,h)}},zne=b8({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),Lne={kernelName:FP,backendName:"webgl",kernelFunc:zne},Bne=b8({opSnippet:"return inversesqrt(x);",cpuKernelImpl:b6}),jne={kernelName:_P,backendName:"webgl",kernelFunc:Bne};class Hne{constructor(e,t,n,r,o,a){let i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const s=g5(o.length),l=g5(a.length);let u="";1===n?u="i":2===n&&(u="i, j");const c=`getIndices(${u})`;let d="";1===r?d="i":2===r&&(d="i, coords[1]");const h=`getUpdates(${d})`;let p="";i&&(p="coords[0], coords[1]");const f=`getDefaultValue(${p})`,m=t>1?"strides[j]":"strides";this.userCode=`\n        ${s} strides = ${s}(${o});\n\n        void main() {\n          ${l} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${t}; j++) {\n              int index = round(${c});\n              flattenedIndex += index * ${m};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${h};\n              found = true;\n            }\n          }\n          setOutput(mix(${f}, sum, float(found)));\n        }\n      `}}class Vne{constructor(e,t,n,r,o,a){let i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;const s=g5(o.length),l=g5(a.length);let u="";1===n?u="i":2===n&&(u="i, j");const c=`getIndices(${u})`;let d="";1===r?d="i":2===r&&(d="i, coords[1]");const h=`getUpdates(${d})`;let p="";i&&(p="coords[0], coords[1]");const f=`getDefaultValue(${p})`,m=t>1?"strides[j]":"strides",g=t>1?"strides[j + 1]":"strides";this.userCode=`\n        ${s} strides = ${s}(${o});\n\n        void main() {\n          ${l} coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ${e}; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ${t}; j+=2) {\n              ivec4 index = round(${c});\n              flattenedIndex += index.xz * ${m};\n              if (j + 1 < ${t}) {\n                flattenedIndex += index.yw * ${g};\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ${h};\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(${f}, sum, found));\n        }\n      `}}const Wne={kernelName:MP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o,updates:a}=t,{shape:i}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Mj(0,o,i),h=[d/u,u];if(0===d)return n.makeTensorInfo(i,o.dtype);const p=$8({inputs:{x:o},backend:n,attrs:{shape:[l,s]}}),f=$8({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;g=hO().getBool("WEBGL_PACK")?new Vne(l,s,p.shape.length,f.shape.length,c,h):new Hne(l,s,p.shape.length,f.shape.length,c,h);const v=n.runWebGLProgram(g,[f,p,m],f.dtype),b=$8({inputs:{x:v},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),b}};class Gne{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const o=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,a=2===hO().getNumber("WEBGL_VERSION")?"while (left < right) {":o,i="left"===r?"<":"<=";this.userCode=`\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ${a}\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ${i} value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     `}}const Une={kernelName:LP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:o,values:a}=t,{side:i}=r,s=new Gne(o.shape[0],o.shape[1],a.shape[1],i),l=[[o.shape[1]]];return n.runWebGLProgram(s,[o,a],"int32",l)}};class Kne{constructor(e,t,n){let r,o;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)o="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],i=[];for(let r=0;r<t.length;r++)i.push(`${n[r]}`),r<e&&a.push(`${n[r]}`);r=a.join(),o=i.join()}const a=g5(n);this.userCode=`\n      void main() {\n        ${a} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${o}));\n        } else {\n          setOutput(getB(${o}));\n        }\n      }\n    `}}const qne={kernelName:BP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:o,e:a}=t,i=new Kne(r.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(i,[r,o,a],$F(o.dtype,a.dtype))}},Xne=b8({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${zj};\n  float scale = ${Lj};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),Jne={kernelName:jP,backendName:"webgl",kernelFunc:Xne},Yne=b8({opSnippet:v8+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:w6}),Qne={kernelName:UP,backendName:"webgl",kernelFunc:Yne},Zne=b8({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),ere={kernelName:GP,backendName:"webgl",kernelFunc:Zne},tre=b8({opSnippet:v8+"\n  return sin(x);\n",packedOpSnippet:`\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ${a8}\n  return result;\n`}),nre={kernelName:VP,backendName:"webgl",kernelFunc:tre},rre=b8({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),ore={kernelName:WP,backendName:"webgl",kernelFunc:rre},are=b8({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),ire={kernelName:KP,backendName:"webgl",kernelFunc:are},sre={kernelName:JP,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:a,paddings:i}=r;RA(o.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const s=a.reduce(((e,t)=>e*t)),l=[[0,0]];l.push(...i);for(let v=1+a.length;v<o.shape.length;++v)l.push([0,0]);const u=[],c=sne({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),d=Tj(c.shape,a,s,!1),h=Aj(d.length,a.length,!1),p=Oj(c.shape,a,s,!1),f=$8({inputs:{x:c},backend:n,attrs:{shape:d}}),m=z8({inputs:{x:f},backend:n,attrs:{perm:h}}),g=$8({inputs:{x:m},backend:n,attrs:{shape:p}});return u.push(c),u.push(f),u.push(m),u.forEach((e=>n.disposeIntermediateTensorInfo(e))),g}};const lre={kernelName:ZP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:o,denseShape:a,defaultValue:i}=t;if(1!==a.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${a.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${r.shape}`);if(1!==o.shape.length)throw new Error(`Values must be a vector, saw:\n         ${o.shape}`);if(0!==i.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${i.shape}`);const s=n.readSync(r.dataId),l=n.readSync(o.dataId),u=n.readSync(a.dataId),c=n.readSync(i.dataId)[0],[d,h,p,f,m]=C6(s,r.shape,r.dtype,l,o.dtype,u,c);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],o.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};const ure={kernelName:eD,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:o,newShape:a}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(1!==o.shape.length)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(1!==a.shape.length)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const i=Array.from(n.readSync(o.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(a.dataId)),[u,c,d]=S6(s,r.shape,r.dtype,i,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}};const cre={kernelName:tD,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${o.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${a.shape}`);const i=n.readSync(r.dataId),s=n.readSync(o.dataId),l=n.readSync(a.dataId),[u,c]=E6(i,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}};const dre={kernelName:nD,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${o.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${a.shape}`);const i=n.readSync(r.dataId),s=n.readSync(o.dataId),l=n.readSync(a.dataId),[u,c]=E6(i,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}};const hre={kernelName:rD,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:o,sparseValues:a,defaultValue:i}=t,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:h}=Mj(0,o,s),p=!1;if("string"===a.dtype){const e=n.bufferSync(o),t=n.bufferSync(a),r=oF(n.readSync(i.dataId)[0]),f=y6(e,t,s,h,c,u,l,d,r,p);return n.makeTensorInfo(s,f.dtype,f.values)}const f=new Hne(u,l,o.shape.length,a.shape.length,d,[h,1],p),m=n.runWebGLProgram(f,[a,o,i],a.dtype),g=$8({inputs:{x:m},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(m),g}};const pre={kernelName:YP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{numOrSizeSplits:a,axis:i}=r,s=HA(i,o.shape)[0],l=cH(o,a,s),u=o.shape.length,c=new Array(u).fill(0),d=o.shape.slice();return l.map((e=>{const t=[...d];t[s]=e;const r=D9({inputs:{x:o},backend:n,attrs:{begin:c,size:t}});return c[s]+=e,r}))}},fre="return sqrt(x);",mre=b8({opSnippet:fre,packedOpSnippet:fre,cpuKernelImpl:N6}),gre={kernelName:qP,backendName:"webgl",kernelFunc:mre},vre={kernelName:aD,backendName:"webgl",kernelFunc:b8({opSnippet:"return x * x;"})},bre="return (a - b) * (a - b);",yre=y8({opSnippet:bre,packedOpSnippet:bre}),wre={kernelName:oD,backendName:"webgl",kernelFunc:yre};const xre={kernelName:iD,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");const a=NH(n.readSync(o.dataId)),i=I6(a,"string",r);return n.makeTensorInfo(o.shape,"string",i)}};const kre={kernelName:kD,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e;const{x:o}=t,a=U6+`\n    return x > 0.0 ? 1.0 : float(${n.alpha});\n  `,i=new G6(o.shape,a);return r.runWebGLProgram(i,[o],o.dtype)}};class Cre{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,o=g5(n.length),a=g5(n.length);let i="";if(1===r)i="coords * strides + begin";else{let e=0;i=n.map(((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`))).join(",")}this.userCode=`\n      ${o} begin = ${o}(${e});\n      ${o} strides = ${o}(${t});\n\n      void main() {\n        ${a} coords = getOutputCoords();\n        setOutput(getX(${i}));\n      }\n    `}}const Sre={kernelName:sD,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:a,end:i,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:h}=r,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:b,end:y,strides:w}=YM(o.shape,a,i,s,l,u,c,d,h);let x;if(m)x=$8({inputs:{x:o},backend:n,attrs:{shape:f}});else if(g||v){RA(o.shape.length>=1,(()=>`Input must have rank at least 1, got: ${o.shape.length}`));const e=zM(b,y,w),t=D9({inputs:{x:o},backend:n,attrs:{begin:b,size:e}});x=$8({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([o])){const e=n.readSync(o.dataId),t=G_(o.shape,o.dtype,e),r=$6(p,t,w,b);x=n.makeTensorInfo(f,o.dtype,r.values)}else{const e=new Cre(b,w,p);x=n.runWebGLProgram(e,[o],o.dtype)}}const k=$8({inputs:{x:x},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(x),k}};const Ere={kernelName:lD,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:o,nGramWidths:a,leftPad:i,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=t,h=n.readSync(c.dataId),p=n.readSync(d.dataId),[f,m]=T6(h,p,o,a,i,s,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}};const Nre={kernelName:uD,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:o}=r,{input:a,delimiter:i}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(0!==i.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const s=n.readSync(a.dataId),l=n.readSync(i.dataId)[0],[u,c,d]=A6(s,l,o),h=c.length;return[n.makeTensorInfo([h,2],"int32",u),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};const Ire={kernelName:cD,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:o}=r,{input:a}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(a.dataId),s=O6(i,o);return n.makeTensorInfo(a.shape,"int32",s)}},$re=b8({opSnippet:"return tan(x);"}),Tre={kernelName:hD,backendName:"webgl",kernelFunc:$re},Are=b8({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),Ore={kernelName:pD,backendName:"webgl",kernelFunc:Are};const Rre={kernelName:zP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:o,indices:a,updates:i}=t,{}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Mj(0,a,o.shape),h=[d/u,u];if(0===d)return n.makeTensorInfo(o.shape,a.dtype);const p=$8({inputs:{x:a},backend:n,attrs:{shape:[l,s]}}),f=$8({inputs:{x:i},backend:n,attrs:{shape:[l,u]}}),m=$8({inputs:{x:o},backend:n,attrs:{shape:h}}),g=new Hne(l,s,p.shape.length,f.shape.length,c,h,!1,!0),v=n.runWebGLProgram(g,[f,p,m],m.dtype),b=$8({inputs:{x:v},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),b}};class Pre{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[a]*t[a];this.outputShape=n,this.rank=n.length;const r=g5(this.rank),o=function(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let o=0;o<e.length;o++)r.push(`imod(${n[o]}, ${e[o]})`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${o}));\n      }\n    `}}function Dre(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reps:a}=r;if("string"===o.dtype||o.shape.length>5){const e=n.readSync(o.dataId),t="string"===o.dtype?e.map((e=>oF(e))):e,r=G_(o.shape,o.dtype,t),i=P6(r,a);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const i=new Pre(o.shape,a);return n.runWebGLProgram(i,[o],o.dtype)}const Fre={kernelName:fD,backendName:"webgl",kernelFunc:Dre};class _re{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class Mre{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function zre(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function Lre(e){let t=1;for(;t<e;)t*=2;return t}const Bre={kernelName:mD,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{k:a,sorted:i}=r,s=hO().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=hO().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=o.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([o])||c<s||a>l){const e=n.readSync(o.dataId),[t,r]=D6(e,u,o.dtype,a,i);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===a)return u[u.length-1]=0,[n.makeTensorInfo(u,o.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(1===c)return[o,bee({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(o.dataId),h=null!==d&&d.isPacked,p=h?n.unpackTensor(o):o,f=FA(u)/c,m=$8({inputs:{x:p},attrs:{shape:[f,c]},backend:n});h&&zre(n,p);const g=Lre(a),v=Lre(c);let b=null;const y=()=>null===b?[m,m]:[m,b],w=(e,t,r)=>{const o=y(),a=new _re(r),i=[[c],[null===b?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=b;b=n.runWebGLProgram(a,o,"int32",i),zre(n,s)};for(let E=1;E<g;E*=2){const e=2*E;for(let t=E;t>=1;t/=2)w(e,t,[f,v])}for(let E=v;E>g;E/=2){const e=y(),t=new Mre([f,E/2]),r=[[c],[null===b?1:0],[g]],o=b;b=n.runWebGLProgram(t,e,"int32",r),zre(n,o);const a=g/2,i=2*a;for(let n=a;n>=1;n/=2)w(i,n,b.shape)}let x=b;b=D9({inputs:{x:b},backend:n,attrs:{begin:0,size:[f,a]}}),zre(n,x);let k=Mee({inputs:{x:m,indices:b},backend:n,attrs:{axis:1,batchDims:1}});zre(n,m);const C=u.slice(0,-1);C.push(a),x=b,b=$8({inputs:{x:b},attrs:{shape:C},backend:n}),zre(n,x);const S=k;return k=$8({inputs:{x:k},attrs:{shape:C},backend:n}),zre(n,S),[k,b]}};class jre{constructor(e,t,n,r,o,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const i="nearest"===n?1:2;let s;switch(r){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${s} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${s} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${s} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${o});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${o});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${t}));\n                float mapY = mapCoord(inY, float(${e}));\n\n                if (${i} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}const Hre={kernelName:gD,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:o,transforms:a}=t,{interpolation:i,fillMode:s,fillValue:l,outputShape:u}=r,[c,d,h,p]=o.shape,[f,m]=null!=u?u:[d,h],g=new jre(d,h,i,s,l,[c,f,m,p]);return n.runWebGLProgram(g,[o,a],"float32")}};const Vre={kernelName:bD,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:o}=n,{x:a}=t;Y4(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(a.dataId),{outputValues:s,outputShape:l,indices:u}=_6(i,o,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}};const Wre={kernelName:yD,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:o}=t;let{axis:a}=r;a<0&&(a+=o.shape.length);const i=o,s=i.shape.length,l=o.shape[a],u=new Array(s-1);let c=0;for(let m=0;m<s;m++)m!==a&&(u[c++]=i.shape[m]);const d=[],h=new Array(s).fill(0),p=i.shape.slice();p[a]=1;const f=new Array(l);for(let m=0;m<f.length;m++){h[a]=m;const e=D9({inputs:{x:i},backend:n,attrs:{begin:h,size:p}}),t=$8({inputs:{x:e},backend:n,attrs:{shape:u}});f[m]=t,d.push(e)}return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}};class Gre{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,o=e.inSize,a=e.numSegments,i=a*Math.ceil(o/n);this.outputShape=[r,i];const s=4*Math.floor(n/4),l=n%4,u="\n        sumValue += dot(values, segFilter);\n    ";let c="";o%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${o}) {\n          return initializationValue;\n        }\n      `);let d="";o%n>0&&(d=`\n        if (inIdx < 0 || inIdx >= ${o}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${c}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${d}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${a})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${a})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${s}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${s};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${u}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${u}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}const Ure={kernelName:wD,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,segmentIds:a}=t,{numSegments:i}=r,s=o.shape.length,l=[];let u=0;const c=lL([u],s);let d=o;null!=c&&(d=z8({inputs:{x:o},backend:n,attrs:{perm:c}}),l.push(d),u=cL(1,s)[0]);const h=SH(d.shape,u,i),p=FA([d.shape[u]]),f=$8({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});l.push(f);const m=TF(o.dtype),g=(e,t,r,o,a)=>{const i=e.shape[0],s=e.shape[1],u=CH(s,a),c=new Gre({windowSize:u,inSize:s,batchSize:i,numSegments:a},t),d=n.compileAndRun(c,[e,r],o);if(l.push(d),d.shape[1]===a)return d;const h=mne({backend:n,attrs:{start:0,stop:a,step:1,dtype:"float32"}}),p=Dre({inputs:{x:h},backend:n,attrs:{reps:[s/u]}});l.push(h),l.push(p);return g(d,t,p,o,a)},v=$8({inputs:{x:g(f,"unsortedSegmentSum",a,m,i)},backend:n,attrs:{shape:h}});let b=v;if(null!=c){l.push(v);const e=uL(c);b=z8({inputs:{x:b},backend:n,attrs:{perm:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),b}},Kre=[j8,V8,G8,K8,J8,Z8,e9,t9,s9,l9,c9,h9,f9,g9,b9,x9,k9,E9,N9,I9,A9,_9,M9,z9,L9,W9,K9,J9,c8,Z9,s7,m7,w7,k7,C7,S7,E7,I7,T7,O7,M7,z7,L7,j7,W7,K7,q7,J7,Q7,Z7,tee,nee,oee,iee,lee,cee,pee,gee,yee,xee,See,Nee,Tee,Ree,Pee,Fee,zee,Bee,Hee,l8,Vee,o7,Gee,Kee,Xee,p8,Yee,Zee,ete,nte,ote,ite,lte,cte,pte,mte,vte,yte,wte,xte,Ste,Ete,Nte,Ite,$te,Ate,Pte,Fte,Wte,I8,Ute,qte,Jte,Qte,j9,ene,rne,one,lne,cne,g8,dne,hne,pne,fne,gne,V9,zte,bne,wne,kne,T8,Ene,Ine,Ane,Rne,Fne,Mne,Lne,jne,Wne,Une,qne,Jne,Qne,ere,nre,ore,F9,Vte,ire,sre,lre,ure,cre,dre,hre,pre,gre,vre,wre,xre,kre,Sre,Ere,Nre,Ire,jte,M8,Tre,Ore,Rre,Fre,Bre,Hre,L8,Vre,Wre,Ure,nne];for(const n of Kre)FD(n);class qre{refCount(e){return Xre("refCount")}incRef(e){return Xre("incRef")}timerAvailable(){return!0}time(e){return Xre("time")}read(e){return Xre("read")}readSync(e){return Xre("readSync")}readToGPU(e,t){return Xre("readToGPU")}numDataIds(){return Xre("numDataIds")}disposeData(e,t){return Xre("disposeData")}write(e,t,n){return Xre("write")}move(e,t,n,r,o){return Xre("move")}memory(){return Xre("memory")}floatPrecision(){return Xre("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return Xre("dispose")}}function Xre(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function Jre(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function Yre(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Jre(toe(e,t),(()=>n+` Shapes ${e} and ${t} must match`))}function Qre(e){Jre(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function Zre(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||aoe(e)&&!n)for(let r=0;r<e.length;++r)Zre(e[r],t,n);else t.push(e);return t}function eoe(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function toe(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function noe(e){return e%1===0}function roe(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function ooe(e,t){const n=t.length;return e=null==e?t.map(((e,t)=>t)):[].concat(e),Jre(e.every((e=>e>=-n&&e<n)),(()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`)),Jre(e.every((e=>noe(e))),(()=>`All values in axis param must be integers but got axis ${e}`)),e.map((e=>e<0?n+e:e))}function aoe(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function ioe(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function soe(e){return"string"===typeof e||e instanceof String}function loe(e){return Array.isArray(e)?loe(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":"number"===typeof e?"float32":soe(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function uoe(e){return!!(e&&e.constructor&&e.call&&e.apply)}function coe(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function doe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=new Array;if(1===t.length){const a=t[0]*(r?2:1);for(let t=0;t<a;t++)o[t]=n[e+t]}else{const a=t[0],i=t.slice(1),s=i.reduce(((e,t)=>e*t))*(r?2:1);for(let t=0;t<a;t++)o[t]=doe(e+t*s,i,n,r)}return o}function hoe(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];const r=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return doe(0,e,t,n)}function poe(e,t){const n=foe(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function foe(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function moe(e){e.forEach((t=>{Jre(Number.isInteger(t)&&t>=0,(()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`))}))}function goe(e){return e&&e.then&&"function"===typeof e.then}const voe="tfjsflags";class boe{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=yoe,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(woe().getBool("IS_TEST")||woe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];woe().getBool("IS_TEST")||woe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(goe(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(voe in e){e[voe].split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}(t,n)}))}}}function yoe(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}function woe(){return koe}let xoe,koe=null;function Coe(){if(null==xoe){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}xoe=e}return xoe}function Soe(e,t){const n=function(){const e=Coe();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const Eoe="Cast",Noe="Fill",Ioe="Identity",$oe="LinSpace",Toe="Range",Aoe="Tile",Ooe="Transpose",Roe="_FusedMatMul",Poe="FusedConv2D",Doe="FusedDepthwiseConv2D",Foe=Soe("kernelRegistry",(()=>new Map)),_oe=Soe("gradRegistry",(()=>new Map));function Moe(e,t){const n=Boe(e,t);return Foe.get(n)}function zoe(e){return _oe.get(e)}function Loe(e){const t=Foe.entries(),n=[];for(;;){const{done:r,value:o}=t.next();if(r)break;const[a,i]=o,[s]=a.split("_");s===e&&n.push(i)}return n}function Boe(e,t){return`${t}_${e}`}function joe(){woe().getBool("IS_TEST")||woe().getBool("PROD")||console.warn(...arguments)}const Hoe=BD()||LD;function Voe(e){return Hoe.fromString(e,!0,16)}Voe("c3a5c85c97cb3127"),Voe("b492b66fbe98f273"),Voe("9ae16a3b2f90404f");function Woe(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Zre(e)),woe().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error(`Unknown data type ${t}`)}function Goe(){return woe().platform.now()}function Uoe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",woe().platform.encode(e,t)}function Koe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",woe().platform.decode(e,t)}class qoe{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Joe)}profileKernel(e,t,n){let r;const o=()=>{r=n()};let a;const i=Goe();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{o();for(const e of r)e.dataSync();a=Promise.resolve({kernelMs:Goe()-i})}if(woe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let s=0;s<r.length;s++){const t=r[s];t.data().then((n=>{Xoe(n,t.dtype,e)}))}return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((e=>e.kernelMs)),extraInfo:a.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:o,extraInfo:a}=e;n.forEach((e=>{Promise.all([e.data(),r,a]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],o,n[2])}))}))}}function Xoe(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){const t=e[r];if(isNaN(t)||!isFinite(t))return console.warn(`Found ${t} in the result of '${n}'`),!0}return!1}class Joe{logKernelProfile(e,t,n,r,o,a){const i="number"===typeof r?roe(`${r}ms`,9):r.error,s=roe(e,25),l=t.rank,u=t.size,c=roe(t.shape.toString(),14);let d="";for(const h in o){const e=o[h];if(null!=e){const n=e.shape||t.shape,r=n.length;d+=`${h}: ${r}D ${r>0?n:""} `}}console.log(`%c${s}\t%c${i}\t%c${l}D ${c}\t%c${u}\t%c${d}\t%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function Yoe(e,t,n,r){const o=coe(t),a=function(e,t,n,r){const o=eoe(t),a=r[r.length-1],i=new Array(a).fill(0),s=t.length,l="complex64"===n?tae(e):e;if(s>1)for(let u=0;u<o/a;u++){const e=u*a;for(let t=0;t<a;t++)i[t]=Math.max(i[t],Qoe(l[e+t],0,n).length)}return i}(e,t,n,o),i=t.length,s=eae(e,t,n,o,a),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${i}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(s.map((e=>"    "+e)).join("\n")),l.join("\n")}function Qoe(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:soe(e)?`'${e}'`:"bool"===n?Zoe(e):parseFloat(e.toFixed(7)).toString(),roe(r,t)}function Zoe(e){return 0===e?"false":"true"}function eae(e,t,n,r,o){let a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const i="complex64"===n?2:1,s=t[0],l=t.length;if(0===l){if("complex64"===n){return[Qoe(tae(e)[0],0,n)]}return"bool"===n?[Zoe(e[0])]:[e[0].toString()]}if(1===l){if(s>20){const t=3*i;let r=Array.from(e.slice(0,t)),a=Array.from(e.slice((s-3)*i,s*i));return"complex64"===n&&(r=tae(r),a=tae(a)),["["+r.map(((e,t)=>Qoe(e,o[t],n))).join(", ")+", ..., "+a.map(((e,t)=>Qoe(e,o[s-3+t],n))).join(", ")+"]"]}return["["+("complex64"===n?tae(e):Array.from(e)).map(((e,t)=>Qoe(e,o[t],n))).join(", ")+"]"]}const u=t.slice(1),c=r.slice(1),d=r[0]*i,h=[];if(s>20){for(let t=0;t<3;t++){const r=t*d,a=r+d;h.push(...eae(e.slice(r,a),u,n,c,o,!1))}h.push("...");for(let t=s-3;t<s;t++){const r=t*d,a=r+d;h.push(...eae(e.slice(r,a),u,n,c,o,t===s-1))}}else for(let m=0;m<s;m++){const t=m*d,r=t+d;h.push(...eae(e.slice(t,r),u,n,c,o,m===s-1))}const p=2===l?",":"";h[0]="["+h[0]+p;for(let m=1;m<h.length-1;m++)h[m]=" "+h[m]+p;let f=",\n";for(let m=2;m<l;m++)f+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(a?"":f),h}function tae(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class nae{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=eoe(e),null!=n){const e=n.length;Jre(e===this.size,(()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||function(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);n=new Array(t)}return n}(t,this.size),this.strides=coe(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),Jre(n.length===this.rank,(()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`));const o=this.locToIndex(n);this.values[o]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let r=0;for(const a of t){if(a<0||a>=this.shape[r]){const e=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(e)}r++}let o=t[t.length-1];for(let a=0;a<t.length-1;++a)o+=this.strides[a]*t[a];return this.values[o]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return rae().makeTensor(this.values,this.shape,this.dtype)}}let rae=null,oae=null,aae=null;class iae{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=eoe(e),this.strides=coe(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return oae.buffer(this.shape,this.dtype,e)}bufferSync(){return oae.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return hoe(this.shape,e,"complex64"===this.dtype)}arraySync(){return hoe(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=rae().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map((e=>Koe(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),rae().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=rae().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>Koe(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await rae().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(rae().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return oae.print(this,e)}clone(){return this.throwIfDisposed(),oae.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Yoe(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),oae.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),rae().makeVariable(this,e,t,n)}}Object.defineProperty(iae,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),Soe("Tensor",(()=>iae));class sae extends iae{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!toe(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);rae().disposeTensor(this),this.dataId=e.dataId,rae().incRef(this,null)}dispose(){rae().disposeVariable(this),this.isDisposedInternal=!0}}var lae,uae,cae,dae,hae;Object.defineProperty(sae,Symbol.hasInstance,{value:e=>e instanceof iae&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(lae||(lae={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(uae||(uae={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(cae||(cae={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(dae||(dae={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(hae||(hae={}));const pae={float32:dae,int32:uae,bool:cae,complex64:hae};function fae(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return pae[e][t]}function mae(e,t){if(e.dtype===t.dtype)return[e,t];const n=fae(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function gae(e){const t=[];return vae(e,t,new Set),t}function vae(e,t,n){if(null==e)return;if(e instanceof iae)return void t.push(e);if(r=e,!Array.isArray(r)&&"object"!==typeof r)return;var r;const o=e;for(const a in o){const e=o[a];n.has(e)||(n.add(e),vae(e,t,n))}}function bae(e){return null!=e.kernelName}class yae{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class wae{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new yae}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(joe(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new qoe(this.backendInstance),!0}setupRegisteredKernels(){Loe(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){Loe(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const n=t.factory();if(!n||n instanceof qre||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,joe(`Initialization of backend ${e} failed`),joe(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(dTe){return joe(`Initialization of backend ${e} failed`),joe(dTe.stack||dTe.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:o}=this.initializeBackend(n);if(o||r)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,o=this.readSync(t),a=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,o,n.shape,n.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return wae.nextTensorId++}nextVariableId(){return wae.nextVariableId++}clone(e){const t=kae.runKernel(Ioe,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e},n={dtype:"float32"};return kae.runKernel(Eoe,t,n)}})),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=Moe(e,this.backendName)))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let o=0;n.forEach((e=>{o+="complex64"===e.dtype?3:1}));const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-o-a;if(i>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${i} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),o=this.state.numBytes,a=this.state.numTensors;let i,s;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=bae(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(bae(e)){const{kernelName:t,inputs:o,attrs:a}=e;null==this.backendName&&this.backend;const l=Moe(t,this.backendName);Jre(null!=l,(()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`)),i=()=>{const e=this.backend.numDataIds();s=l.kernelFunc({inputs:o,attrs:a,backend:this.backend});const i=Array.isArray(s)?s:[s];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,i);const u=i.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(r){const e=this.getTensorsForGradient(t,o,u);n=this.saveTensorsForBackwardMode(e)}return u}}else{const{forwardFunc:t}=e,o=e=>{r&&(n=e.map((e=>this.keep(this.clone(e)))))};i=()=>{const e=this.backend.numDataIds();s=this.tidy((()=>t(this.backend,o)));const n=Array.isArray(s)?s:[s];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:u,attrs:c}=e,d=bae(e)?null:e.backwardsFunc;let h;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(h=this.profiler.profileKernel(l,u,(()=>i())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),t=h.outputs):t=i()})),r&&this.addTapeNode(l,u,t,d,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map((e=>null!=u[e]?u[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(s)?t:t[0]}saveTensorsForBackwardMode(e){return e.map((e=>this.keep(this.clone(e))))}getTensorsForGradient(e,t,n){const r=zoe(e);if(null!=r){const e=r.inputsToSave||[],o=r.outputsToSave||[];let a;r.saveAllInputs?(Jre(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),a=Object.keys(t).map((e=>t[e]))):a=e.map((e=>t[e]));const i=n.filter(((e,t)=>o[t]));return a.concat(i)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let o=e;"string"===n&&soe(e[0])&&(o=e.map((e=>Uoe(e))));const a=r.write(o,t,n),i=new iae(t,n,a,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){const e=this.state.tensorInfo.get(a),t=function(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}(o);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,n,r){const o={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(o,r)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:r,dtype:o}=e,a=new iae(r,o,n,this.nextTensorId());return this.trackTensor(a,t),a}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const o=new sae(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*ioe(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof sae||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*ioe(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,o,a){const i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:o},s=zoe(e);null!=s&&(r=s.gradFunc),null!=r&&(i.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],r=foe(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e})),r(e.length>1?e:e[0],o,a))),this.state.activeTape.push(i)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=gae(e),n=new Set(t.map((e=>e.id)));for(let o=0;o<this.state.activeScope.track.length;o++){const e=this.state.activeScope.track[o];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==r.id||this.track(e)}))}gradients(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Jre(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const o=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));Jre(o instanceof iae,(()=>"The result y returned by f() must be a tensor."));const a=function(e,t,n){const r={},o={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){const n=e[l],a=n.inputs;for(const e in a){const i=a[e];let s=!1;for(let e=0;e<t.length;e++)if(r[i.id]){n.outputs.forEach((e=>r[e.id]=!0)),s=!0,o[n.id]=!0;break}if(s)break}}const a={};a[n.id]=!0;const i={};for(let l=e.length-1;l>=0;l--){const t=e[l],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(a[t.outputs[e].id]){for(const e in n)a[n[e].id]=!0,i[t.id]=!0;break}}const s=[];for(let l=0;l<e.length;l++){const t=e[l];if(o[t.id]&&i[t.id]){const e={};for(const o in t.inputs){const n=t.inputs[o];r[n.id]&&(e[o]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,s.push(n)}}return s}(this.state.activeTape,t,o);if(!r&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[o.id]=null==n?function(e){const t=poe(eoe(e),"float32");return kae.makeTensor(t,e,"float32")}(o.shape):n,function(e,t,n,r){for(let o=t.length-1;o>=0;o--){const a=t[o],i=[];if(a.outputs.forEach((t=>{const n=e[t.id];null!=n?i.push(n):i.push(null)})),null==a.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const s=a.gradient(i);for(const t in a.inputs){if(!(t in s))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(s)}.`);const o=n((()=>s[t]()));if("float32"!==o.dtype)throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${o.dtype}'`);const i=a.inputs[t];if(!toe(o.shape,i.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${t}' has shape '${o.shape}', which does not match the shape of the input '${i.shape}'`);if(null==e[i.id])e[i.id]=o;else{const t=e[i.id];e[i.id]=r(t,o),t.dispose()}}}}(e,a,(e=>this.tidy(e)),Cae);const r=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:o,grads:r}}))}customGrad(e){var t=this;return Jre(uoe(e),(()=>"The f passed in customGrad(f) must be a function.")),function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];let a;Jre(r.every((e=>e instanceof iae)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const i={};r.forEach(((e,t)=>{i[t]=e}));return t.runKernelFunc({forwardFunc:(t,n)=>(a=e(...r,n),Jre(a.value instanceof iae,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),Jre(uoe(a.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),a.value),backwardsFunc:(e,t)=>{const n=a.gradFunc(e,t),o=Array.isArray(n)?n:[n];Jre(o.length===r.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),Jre(o.every((e=>e instanceof iae)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const i={};return o.forEach(((e,t)=>{i[t]=()=>e})),i},inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=Goe(),n=await this.backend.time(e);return n.wallMs=Goe()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new yae;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function xae(){const e=Coe();if(null==e._tfengine){const t=new boe(e);e._tfengine=new wae(t)}var t;return t=e._tfengine.ENV,koe=t,function(e){rae=e}((()=>e._tfengine)),e._tfengine}wae.nextTensorId=0,wae.nextVariableId=0;const kae=xae();function Cae(e,t){const n={a:e,b:t};return kae.runKernel("Add",n)}const Sae=woe();function Eae(e,t){let n=e;if(aoe(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||aoe(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&woe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Nae(e,r,[]),r}function Nae(e,t,n){if(n=n||[],!Array.isArray(e)&&!aoe(e))return void Jre(0===t.length,(()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`));Jre(t.length>0,(()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`)),Jre(e.length===t[0],(()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`));const r=t.slice(1);for(let o=0;o<e.length;++o)Nae(e[o],r,n.concat(o))}function Iae(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function $ae(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof iae)return Iae(r,e.dtype,t,n),e;let o=loe(e);if("string"!==o&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),Iae(r,o,t,n),null==e||!aoe(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}const a=Eae(e,o);aoe(e)||Array.isArray(e)||(e=[e]);const i="string"!==o?Woe(e,o):Zre(e,[],!0);return kae.makeTensor(i,a,o)}function Tae(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map(((e,o)=>$ae(e,`${t}[${o}]`,n,r)))}Sae.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Sae.registerFlag("IS_BROWSER",(()=>"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope)),Sae.registerFlag("IS_NODE",(()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node)),Sae.registerFlag("IS_CHROME",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),Sae.registerFlag("PROD",(()=>!1)),Sae.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>Sae.getBool("DEBUG"))),Sae.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),Sae.registerFlag("IS_TEST",(()=>!1)),Sae.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>!0)),Sae.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),Sae.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1)),Sae.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(()=>!1)),Sae.registerFlag("USE_SETTIMEOUTCUSTOM",(()=>!1));const Aae="__op";function Oae(e){const t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=Aae;const o=function(){kae.startScope(n);try{const e=r(...arguments);return goe(e)&&console.error("Cannot return a Promise inside of tidy."),kae.endScope(e),e}catch(e){throw kae.endScope(null),e}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}const Rae=Oae({complex_:function(e,t){const n=$ae(e,"real","complex"),r=$ae(t,"imag","complex");Yre(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const o={real:n,imag:r};return kae.runKernel("Complex",o)}});function Pae(e,t,n,r){if(null==r&&(r=loe(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!aoe(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){moe(t);const e=eoe(t),r=eoe(n);Jre(e===r,(()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`));for(let o=0;o<n.length;++o){const e=n[o],r=o!==n.length-1||e!==eoe(t.slice(o));Jre(n[o]===t[o]||!r,(()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `))}}return aoe(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?Woe(e,r):Zre(e,[],!0),kae.makeTensor(e,t,r)}function Dae(e,t,n){return Pae(e,t,Eae(e,n),n)}const Fae={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},_ae=4;async function Mae(e,t){const n=[],r=[],o=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let a=0;a<o.length;++a){const i=o[a],s=Array.isArray(e)?e[a].tensor:e[i];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error(`Unsupported dtype in weight '${i}': ${s.dtype}`);const l={name:i,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){const e=new Promise((async e=>{const t=await s.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+_ae*t.length,r=new Uint8Array(n);let o=0;for(let a=0;a<t.length;a++){const e=t[a],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,o),o+=_ae,r.set(e,o),o+=e.length}e(r)}));r.push(e)}else r.push(s.data());null!=t&&(l.group=t),n.push(l)}return{data:Lae(await Promise.all(r)),specs:n}}function zae(e,t){const n={};let r,o=0;for(const a of t){const t=a.name,i=a.dtype,s=a.shape,l=eoe(s);let u;if("quantization"in a){const n=a.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n)||!("scale"in n))throw new Error(`Weight ${a.name} with quantization ${n.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==n.dtype)throw new Error(`Weight ${a.name} has unknown quantization dtype ${n.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==i)throw new Error(`Weight ${a.name} is quantized with ${n.dtype} which only supports weights of type float32 not ${i}.`)}const s=Fae[n.dtype],c=e.slice(o,o+l*s),d="uint8"===n.dtype?new Uint8Array(c):new Uint16Array(c);if("float32"===i)if("uint8"===n.dtype||"uint16"===n.dtype){u=new Float32Array(d.length);for(let e=0;e<d.length;e++){const t=d[e];u[e]=t*n.scale+n.min}}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type float32.`);void 0===r&&(r=Xae()),u=r(d)}else{if("int32"!==i)throw new Error(`Unsupported dtype in weight '${t}': ${i}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type int32.`);u=new Int32Array(d.length);for(let e=0;e<d.length;e++){const t=d[e];u[e]=Math.round(t*n.scale+n.min)}}o+=l*s}else if("string"===i){const t=eoe(a.shape);u=[];for(let n=0;n<t;n++){const t=new Uint32Array(e.slice(o,o+_ae))[0];o+=_ae;const n=new Uint8Array(e.slice(o,o+t));u.push(n),o+=t}}else{const r=Fae[i],a=e.slice(o,o+l*r);if("float32"===i)u=new Float32Array(a);else if("int32"===i)u=new Int32Array(a);else if("bool"===i)u=new Uint8Array(a);else{if("complex64"!==i)throw new Error(`Unsupported dtype in weight '${t}': ${i}`);{u=new Float32Array(a);const e=new Float32Array(u.length/2),r=new Float32Array(u.length/2);for(let t=0;t<e.length;t++)e[t]=u[2*t],r[t]=u[2*t+1];const o=Dae(e,s,"float32"),i=Dae(r,s,"float32");n[t]=Rae(o,i),o.dispose(),i.dispose()}}o+=l*r}"complex64"!==i&&(n[t]=Dae(u,s,i))}return n}function Lae(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)}));const r=new Uint8Array(t);let o=0;return n.forEach((e=>{r.set(new Uint8Array(e.buffer),o),o+=e.byteLength})),r.buffer}const Bae="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function jae(e){return Bae?Buffer.byteLength(e):new Blob([e]).size}function Hae(e){if(1===e.length)return e[0];let t=0;e.forEach((e=>{t+=e.byteLength}));const n=new Uint8Array(t);let r=0;return e.forEach((e=>{n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Vae(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function Wae(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function Gae(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),r}async function Uae(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),Gae(e,n,r)}function Kae(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:jae(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:jae(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function qae(e){const t=[];for(const n of e)t.push(...n.weights);return t}function Xae(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;0===(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{const o=new ArrayBuffer(4*r.length),a=new Uint32Array(o);for(let i=0;i<r.length;i++){const o=r[i],s=e[n[o>>10]+(1023&o)]+t[o>>10];a[i]=s}return new Float32Array(o)}}class Jae{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==Jae.instance&&(Jae.instance=new Jae),Jae.instance}static registerSaveRouter(e){Jae.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Jae.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Jae.getHandlers(e,"save")}static getLoadHandlers(e,t){return Jae.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?Jae.getInstance().loadRouters:Jae.getInstance().saveRouters).forEach((t=>{const o=t(e,n);null!==o&&r.push(o)})),r}}const Yae=e=>Jae.registerSaveRouter(e),Qae=e=>Jae.registerLoadRouter(e),Zae=e=>Jae.getSaveHandlers(e),eie=(e,t)=>Jae.getLoadHandlers(e,t),tie="tensorflowjs",nie="models_store",rie="model_info_store";function oie(){if(!woe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function aie(e){const t=e.result;t.createObjectStore(nie,{keyPath:"modelPath"}),t.createObjectStore(rie,{keyPath:"modelPath"})}class iie{constructor(e){if(this.indexedDB=oie(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const r=this.indexedDB.open(tie,1);r.onupgradeneeded=()=>aie(r),r.onsuccess=()=>{const o=r.result;if(null==t){const t=o.transaction(nie,"readonly"),r=t.objectStore(nie).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return o.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(o.close(),n(r.error)),t.oncomplete=()=>o.close()}else{const r=Kae(t),a=o.transaction(rie,"readwrite");let i=a.objectStore(rie);const s=i.put({modelPath:this.modelPath,modelArtifactsInfo:r});let l;s.onsuccess=()=>{l=o.transaction(nie,"readwrite");const s=l.objectStore(nie).put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r});s.onsuccess=()=>e({modelArtifactsInfo:r}),s.onerror=e=>{i=a.objectStore(rie);const t=i.delete(this.modelPath);t.onsuccess=()=>(o.close(),n(s.error)),t.onerror=e=>(o.close(),n(s.error))}},s.onerror=e=>(o.close(),n(s.error)),a.oncomplete=()=>{null==l?o.close():l.oncomplete=()=>o.close()}}},r.onerror=e=>n(r.error)}))}}iie.URL_SCHEME="indexeddb://";const sie=e=>{return woe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(iie.URL_SCHEME)?(t=e.slice(iie.URL_SCHEME.length),new iie(t)):null;var t};Jae.registerSaveRouter(sie),Jae.registerLoadRouter(sie);class lie{constructor(){this.indexedDB=oie()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(tie,1);n.onupgradeneeded=()=>aie(n),n.onsuccess=()=>{const r=n.result,o=r.transaction(rie,"readonly"),a=o.objectStore(rie).getAll();a.onsuccess=()=>{const t={};for(const e of a.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},a.onerror=e=>(r.close(),t(a.error)),o.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(iie.URL_SCHEME)?t.slice(iie.URL_SCHEME.length):t,new Promise(((t,n)=>{const r=this.indexedDB.open(tie,1);r.onupgradeneeded=()=>aie(r),r.onsuccess=()=>{const o=r.result,a=o.transaction(rie,"readwrite"),i=a.objectStore(rie),s=i.get(e);let l;s.onsuccess=()=>{if(null==s.result)return o.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const r=i.delete(e),a=()=>{l=o.transaction(nie,"readwrite");const r=l.objectStore(nie).delete(e);r.onsuccess=()=>t(s.result.modelArtifactsInfo),r.onerror=e=>n(s.error)};r.onsuccess=a,r.onerror=e=>(a(),o.close(),n(s.error))}},s.onerror=e=>(o.close(),n(s.error)),a.oncomplete=()=>{null==l?o.close():l.oncomplete=()=>o.close()}},r.onerror=e=>n(r.error)}))}}const uie="/",cie="tensorflowjs_models",die="info",hie="model_topology",pie="weight_specs",fie="weight_data",mie="model_metadata";function gie(e){return{info:[cie,e,die].join(uie),topology:[cie,e,hie].join(uie),weightSpecs:[cie,e,pie].join(uie),weightData:[cie,e,fie].join(uie),modelMetadata:[cie,e,mie].join(uie)}}function vie(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function bie(e){const t=e.split(uie);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(uie)}class yie{constructor(e){if(!woe().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=gie(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=Kae(e);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(Bae)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,o=t.length;r<o;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:r}}catch(dTe){throw vie(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;const o=this.LS.getItem(this.keys.modelMetadata);if(null!=o){const e=JSON.parse(o);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(null==a)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(Bae){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}(a),t}}yie.URL_SCHEME="localstorage://";const wie=e=>{return woe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(yie.URL_SCHEME)?(t=e.slice(yie.URL_SCHEME.length),new yie(t)):null;var t};Jae.registerSaveRouter(wie),Jae.registerLoadRouter(wie);class xie{constructor(){Jre(woe().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),Jre("undefined"===typeof window||"undefined"!==typeof window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=cie+uie,n=uie+die;for(let r=0;r<this.LS.length;++r){const o=this.LS.key(r);if(o.startsWith(t)&&o.endsWith(n)){e[bie(o)]=JSON.parse(this.LS.getItem(o))}}return e}async removeModel(e){var t;const n=gie(e=(t=e).startsWith(yie.URL_SCHEME)?t.slice(yie.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return vie(n),r}}const kie="://";class Cie{constructor(){this.managers={}}static getInstance(){return null==Cie.instance&&(Cie.instance=new Cie),Cie.instance}static registerManager(e,t){Jre(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(kie)&&(e=e.slice(0,e.indexOf(kie))),Jre(e.length>0,(()=>"scheme must not be an empty string."));const n=Cie.getInstance();Jre(null==n.managers[e],(()=>`A model store manager is already registered for scheme '${e}'.`)),n.managers[e]=t}static getManager(e){const t=Cie.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(Cie.getInstance().managers)}}function Sie(e){if(-1===e.indexOf(kie))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Cie.getSchemes().join(",")}`);return{scheme:e.split(kie)[0],path:e.split(kie)[1]}}async function Eie(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Jre(e!==t,(()=>`Old path and new path are the same: '${e}'`));const r=Jae.getLoadHandlers(e);Jre(r.length>0,(()=>`Copying failed because no load handler is found for source URL ${e}.`)),Jre(r.length<2,(()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`));const o=r[0],a=Jae.getSaveHandlers(t);Jre(a.length>0,(()=>`Copying failed because no save handler is found for destination URL ${t}.`)),Jre(a.length<2,(()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`));const i=a[0],s=Sie(e).scheme,l=Sie(e).path,u=s===Sie(e).scheme,c=await o.load();n&&u&&await Cie.getManager(s).removeModel(l);const d=await i.save(c);return n&&!u&&await Cie.getManager(s).removeModel(l),d.modelArtifactsInfo}async function Nie(){const e=Cie.getSchemes(),t={};for(const n of e){const e=await Cie.getManager(n).listModels();for(const r in e){t[n+kie+r]=e[r]}}return t}async function Iie(e){const t=Sie(e);return Cie.getManager(t.scheme).removeModel(t.path)}async function $ie(e,t){return Eie(e,t,!1)}async function Tie(e,t){return Eie(e,t,!0)}class Aie{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){window&&woe().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}}),!0))):setTimeout(e,t)}}if(woe().get("IS_BROWSER")){woe().setPlatform("browser",new Aie);try{Cie.registerManager(yie.URL_SCHEME,new xie)}catch(dTe){}try{Cie.registerManager(iie.URL_SCHEME,new lie)}catch(dTe){}}const Oie=()=>n(817);let Rie;class Pie{constructor(){this.util=n(590),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=woe().global.fetch?woe().global.fetch(e,t):(null==Rie&&(Rie=Oie()),Rie(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}function Die(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",moe(e),new nae(e,t,n)}woe().get("IS_NODE")&&!woe().get("IS_BROWSER")&&woe().setPlatform("node",new Pie);const Fie=Oae({cast_:function(e,t){const n=$ae(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},o={dtype:t};return kae.runKernel(Eoe,r,o)}});const _ie=Oae({clone_:function(e){const t={x:$ae(e,"x","clone","string_or_numeric")};return kae.runKernel(Ioe,t)}});function Mie(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}xae();!function(e){oae=e}({buffer:Die,cast:Fie,clone:_ie,print:Mie});function zie(e){return new Promise((e=>setTimeout(e))).then(e)}class Lie{constructor(e){if(!woe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Lie.URL_SCHEME)&&(e=e.slice(Lie.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n=Wae(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(n)],{type:"application/json"})),o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=r,await zie((()=>o.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=t,await zie((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:Kae(e)}}}}Lie.URL_SCHEME="downloads://";class Bie{constructor(e){if(null==e||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise(((e,t)=>{const n=new FileReader;n.onload=n=>{const r=JSON.parse(n.target.result),o=r.modelTopology;if(null==o)return void t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));if(null==r.weightsManifest)return void t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));if(0===this.weightsFiles.length)return void e({modelTopology:o});const a=Uae(r,(e=>this.loadWeights(e)));e(a)},n.onerror=e=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)}))}loadWeights(e){const t=[],n=[];for(const a of e)t.push(...a.weights),n.push(...a.paths);const r=this.checkManifestAndWeightFiles(e),o=n.map((e=>this.loadWeightsFile(e,r[e])));return Promise.all(o).then((e=>[t,Hae(e)]))}loadWeightsFile(e,t){return new Promise(((n,r)=>{const o=new FileReader;o.onload=e=>{const t=e.target.result;n(t)},o.onerror=t=>r(`Failed to weights data from file of path '${e}'.`),o.readAsArrayBuffer(t)}))}checkManifestAndWeightFiles(e){const t=[],n=this.weightsFiles.map((e=>Vae(e.name))),r={};for(const o of e)o.paths.forEach((e=>{const o=Vae(e);if(-1!==t.indexOf(o))throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(t.push(o),-1===n.indexOf(o))throw new Error(`Weight file with basename '${o}' is not provided.`);r[e]=this.weightsFiles[n.indexOf(o)]}));if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}function jie(e){return new Bie(e)}function Hie(e,t,n,r){!function(e){Jre(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){Jre(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${e}`)),Jre(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${t}`)),Jre(t>=e,(()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`))}(n=null==n?0:n,r=null==r?1:r);let o=0;return Promise.all(e.map((a=>(a.then((a=>{const i=n+ ++o/e.length*(r-n);return t(i),a})),a))))}async function Vie(e,t){null==t&&(t={});const n=null==t.fetchFunc?woe().platform.fetch:t.fetchFunc,r=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),o=(null==t.onProgress?await Promise.all(r):await Hie(r,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(o):await Hie(o,t.onProgress,.5,1)}async function Wie(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return Gie((e=>Vie(e,{requestInit:r})))(e,t,n)}function Gie(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;const o=t.map((()=>!1)),a={},i=null!=r?r.map((()=>!1)):[],s=[];if(t.forEach(((e,t)=>{let n=0;e.weights.forEach((e=>{const l="quantization"in e?e.quantization.dtype:e.dtype,u=Fae[l]*eoe(e.shape),c=()=>{o[t]=!0,null==a[t]&&(a[t]=[]),a[t].push({manifestEntry:e,groupOffset:n,sizeBytes:u})};null!=r?r.forEach(((t,n)=>{t===e.name&&(c(),i[n]=!0)})):c(),s.push(e.name),n+=u}))})),!i.every((e=>e))){const e=r.filter(((e,t)=>!i[t]));throw new Error(`Could not find weights in manifest with names: ${e.join(", ")}. \nManifest JSON has weights with names: ${s.join(", ")}.`)}const l=o.reduce(((e,t,n)=>(t&&e.push(n),e)),[]),u=[];l.forEach((e=>{t[e].paths.forEach((e=>{const t=n+(n.endsWith("/")?"":"/")+e;u.push(t)}))}));const c=await e(u),d={};let h=0;return l.forEach((e=>{const n=t[e].paths.length;let r=0;for(let t=0;t<n;t++)r+=c[h+t].byteLength;const o=new ArrayBuffer(r),i=new Uint8Array(o);let s=0;for(let t=0;t<n;t++){const e=new Uint8Array(c[h+t]);i.set(e,s),s+=e.byteLength}a[e].forEach((e=>{const t=zae(o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(const n in t)d[n]=t[n]})),h+=n})),d}}Jae.registerSaveRouter((e=>woe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Lie.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new Lie(e)}(e.slice(Lie.URL_SCHEME.length)):null));class Uie{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(Jre("function"===typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=woe().platform.fetch,Jre(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&Jre(2===e.length,(()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`)),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=Wae(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin");const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:Kae(e),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch(kbe){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return Uae(t,(e=>this.loadWeights(e)))}async loadWeights(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),o=n>t?e.substring(n):"";return[r+"/",o]}(t),o=this.weightPathPrefix||n,a=qae(e),i=[],s=[];for(const l of e)for(const e of l.paths)null!=this.weightUrlConverter?s.push(this.weightUrlConverter(e)):i.push(o+e+r);this.weightUrlConverter&&i.push(...await Promise.all(s));return[a,Hae(await Vie(i,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress}))]}}function Kie(e){return null!=e.match(Uie.URL_SCHEME_REGEX)}Uie.URL_SCHEME_REGEX=/^https?:\/\//;const qie=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>Kie(e))):Kie(e),n)return Xie(e,t)}return null};function Xie(e,t){return new Uie(e,t)}function Jie(e,t){return Xie(e,t)}Jae.registerSaveRouter(qie),Jae.registerLoadRouter(qie);class Yie{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class Qie{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class Zie{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function ese(e,t,n,r){return new Zie(tse(...arguments))}function tse(e,t,n,r){if(1===arguments.length){return null!=e.modelTopology||null!=e.weightSpecs?new Yie(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Yie({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Yie({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function nse(e){return new Qie(e)}function rse(e){return new Qie(e)}const ose=Oae({abs_:function(e){const t=$ae(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return kae.runKernel("ComplexAbs",e)}{const e={x:t};return kae.runKernel("Abs",e)}}});const ase=Oae({acos_:function(e){const t={x:$ae(e,"x","acos")};return kae.runKernel("Acos",t)}});const ise=Oae({acosh_:function(e){const t={x:$ae(e,"x","acosh")};return kae.runKernel("Acosh",t)}});const sse=Oae({add_:function(e,t){let n=$ae(e,"a","add"),r=$ae(t,"b","add");[n,r]=mae(n,r);const o={a:n,b:r};return kae.runKernel("Add",o)}});const lse=Oae({addN_:function(e){Jre(Array.isArray(e),(()=>"The argument passed to tf.addN() must be a list of tensors")),Jre(e.length>=1,(()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`));const t=e.map(((e,t)=>$ae(e,`tensors${t}`,"addN"))),n=t[0];t.forEach((e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((e=>{if(!toe(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));const r=t;return kae.runKernel("AddN",r)}});const use=Oae({all_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:$ae(e,"x","all","bool")},o={axis:t,keepDims:n};return kae.runKernel("All",r,o)}});const cse=Oae({any_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:$ae(e,"x","any","bool")},o={axis:t,keepDims:n};return kae.runKernel("Any",r,o)}});const dse=Oae({argMax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:$ae(e,"x","argMax")},r={axis:t};return kae.runKernel("ArgMax",n,r)}});const hse=Oae({argMin_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:$ae(e,"x","argMin")},r={axis:t};return kae.runKernel("ArgMin",n,r)}});const pse=Oae({asin_:function(e){const t={x:$ae(e,"x","asin")};return kae.runKernel("Asin",t)}});const fse=Oae({asinh_:function(e){const t={x:$ae(e,"x","asinh")};return kae.runKernel("Asinh",t)}});const mse=Oae({atan_:function(e){const t={x:$ae(e,"x","atan")};return kae.runKernel("Atan",t)}});const gse=Oae({atan2_:function(e,t){let n=$ae(e,"a","atan2"),r=$ae(t,"b","atan2");[n,r]=mae(n,r);const o={a:n,b:r};return kae.runKernel("Atan2",o)}});const vse=Oae({atanh_:function(e){const t={x:$ae(e,"x","atanh")};return kae.runKernel("Atanh",t)}});function bse(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[l,u,c,d]=[-1,-1,-1,-1];if("channelsLast"===s)[l,u,c,d]=e;else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);[l,d,u,c]=e}const[h,p,,f]=t,[m,g]=wse(n),[v,b]=wse(r),y=xse(h,v),w=xse(p,b),{padInfo:x,outHeight:k,outWidth:C}=function(e,t,n,r,o,a,i,s,l){let u,c,d;if("number"===typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const o=function(e,t,n,r,o){null==r&&(r=yse(e,t,n));const a=e[0],i=e[1],s=kse((a-t+2*r)/n+1,o),l=kse((i-t+2*r)/n+1,o);return[s,l]}([t,n],a,r,e,s);c=o[0],d=o[1]}else if("same"===e){c=Math.ceil(t/r),d=Math.ceil(n/o);const e=Math.max(0,(c-1)*r+a-t),s=Math.max(0,(d-1)*o+i-n),l=Math.floor(e/2),h=e-l,p=Math.floor(s/2);u={top:l,bottom:h,left:p,right:s-p,type:"SAME"}}else if("valid"===e)u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-a+1)/r),d=Math.ceil((n-i+1)/o);else{if("object"!==typeof e)throw Error(`Unknown padding parameter: ${e}`);{const h="channelsLast"===l?e[1][0]:e[2][0],p="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1];u={top:h,bottom:p,left:f,right:m,type:0===h&&0===p&&0===f&&0===m?"VALID":"EXPLICIT"},c=kse((t-a+h+p)/r+1,s),d=kse((n-i+f+m)/o+1,s)}}return{padInfo:u,outHeight:c,outWidth:d}}(o,u,c,m,g,y,w,a,s),S=i?f*d:f;let E;return"channelsFirst"===s?E=[l,S,k,C]:"channelsLast"===s&&(E=[l,k,C,S]),{batchSize:l,dataFormat:s,inHeight:u,inWidth:c,inChannels:d,outHeight:k,outWidth:C,outChannels:S,padInfo:x,strideHeight:m,strideWidth:g,filterHeight:h,filterWidth:p,effectiveFilterHeight:y,effectiveFilterWidth:w,dilationHeight:v,dilationWidth:b,inShape:e,outShape:E,filterShape:t}}function yse(e,t,n){const r=xse(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function wse(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function xse(e,t){return t<=1?e:e+(e-1)*(t-1)}function kse(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function Cse(e){const[t,n,r]=wse(e);return 1===t&&1===n&&1===r}function Sse(e,t){return Cse(e)||Cse(t)}function Ese(e,t,n){if(null!=n){if("string"===typeof t)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if("number"===typeof t)Jre(noe(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`));else{if("object"!==typeof t)throw Error(`Error in ${e}: Unknown padding parameter: ${t}`);t.forEach((t=>{t.forEach((t=>{Jre(noe(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`))}))}))}}}const Nse=Oae({reshape_:function(e,t){const n={x:$ae(e,"x","reshape","string_or_numeric")},r={shape:t};return kae.runKernel("Reshape",n,r)}});const Ise=Oae({avgPool_:function(e,t,n,r,o){const a=$ae(e,"x","avgPool","float32");Jre(Sse(n,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`));let i=a,s=!1;3===a.rank&&(s=!0,i=Nse(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Jre(4===i.rank,(()=>`Error in avgPool: x must be rank 4 but got rank ${i.rank}.`)),Ese("avgPool",r,o);const l={x:i},u={filterSize:t,strides:n,pad:r,dimRoundingMode:o};let c=kae.runKernel("AvgPool",l,u);return c=Fie(c,a.dtype),s?Nse(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const $se=Oae({avgPool3d_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const i=$ae(e,"x","avgPool3d","float32");let s=i,l=!1;4===i.rank&&(l=!0,s=Nse(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Jre(5===s.rank,(()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`)),Jre("NDHWC"===a,(()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`)),Ese("avgPool3d",r,o);const u={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:a};let d=kae.runKernel("AvgPool3D",u,c);return d=Fie(d,s.dtype),l?Nse(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const Tse=Oae({concat_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Jre(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=Tae(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)})),1===n.length)return _ie(n[0]);const r=n,o={axis:t};return kae.runKernel("Concat",r,o)}});const Ase=Oae({matMul_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=$ae(e,"a","matMul"),a=$ae(t,"b","matMul");[o,a]=mae(o,a);const i={a:o,b:a},s={transposeA:n,transposeB:r};return kae.runKernel("BatchMatMul",i,s)}});const Ose=Oae({mul_:function(e,t){let n=$ae(e,"a","mul"),r=$ae(t,"b","mul");[n,r]=mae(n,r);const o={a:n,b:r};return kae.runKernel("Multiply",o)}});const Rse=Oae({sigmoid_:function(e){const t={x:$ae(e,"x","sigmoid","float32")};return kae.runKernel("Sigmoid",t)}});const Pse=Oae({slice_:function(e,t,n){const r=$ae(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");const o={x:r},a={begin:t,size:n};return kae.runKernel("Slice",o,a)}});const Dse=Oae({tanh_:function(e){const t={x:$ae(e,"x","tanh","float32")};return kae.runKernel("Tanh",t)}});const Fse=Oae({basicLSTMCell_:function(e,t,n,r,o,a){const i=$ae(e,"forgetBias","basicLSTMCell"),s=$ae(t,"lstmKernel","basicLSTMCell"),l=$ae(n,"lstmBias","basicLSTMCell"),u=$ae(r,"data","basicLSTMCell"),c=$ae(o,"c","basicLSTMCell"),d=$ae(a,"h","basicLSTMCell"),h=Tse([u,d],1),p=Ase(h,s),f=sse(p,l),m=f.shape[0],g=f.shape[1]/4,v=[m,g],b=Pse(f,[0,0],v),y=Pse(f,[0,g],v),w=Pse(f,[0,2*g],v),x=Pse(f,[0,3*g],v),k=sse(Ose(Rse(b),Dse(y)),Ose(c,Rse(sse(i,w))));return[k,Ose(Dse(k),Rse(x))]}});const _se=Oae({batchToSpaceND_:function(e,t,n){const r=$ae(e,"x","batchToSpaceND"),o=t.reduce(((e,t)=>e*t));Jre(r.rank>=1+t.length,(()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`)),Jre(n.length===t.length,(()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`)),Jre(r.shape[0]%o===0,(()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${o}`));const a={x:r},i={blockShape:t,crops:n};return kae.runKernel("BatchToSpaceND",a,i)}});const Mse=Oae({batchNorm_:function(e,t,n,r,o,a){null==a&&(a=.001);const i=$ae(e,"x","batchNorm"),s=$ae(t,"mean","batchNorm"),l=$ae(n,"variance","batchNorm");let u,c;null!=o&&(u=$ae(o,"scale","batchNorm")),null!=r&&(c=$ae(r,"offset","batchNorm")),Jre(s.rank===l.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),Jre(null==c||s.rank===c.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),Jre(null==u||s.rank===u.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const d={x:function(e){let t;return t=0===e.rank||1===e.rank?Nse(e,[1,1,1,e.size]):2===e.rank?Nse(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Nse(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(i),scale:u,offset:c,mean:s,variance:l},h={varianceEpsilon:a},p=kae.runKernel("FusedBatchNorm",d,h);return Nse(p,i.shape)}});const zse=Oae({batchNorm2d_:function(e,t,n,r,o,a){const i=$ae(e,"x","batchNorm"),s=$ae(t,"mean","batchNorm"),l=$ae(n,"variance","batchNorm");let u,c;return null!=o&&(u=$ae(o,"scale","batchNorm")),null!=r&&(c=$ae(r,"offset","batchNorm")),Jre(2===i.rank,(()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`)),Jre(2===s.rank||1===s.rank,(()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`)),Jre(2===l.rank||1===l.rank,(()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`)),null!=u&&Jre(2===u.rank||1===u.rank,(()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`)),null!=c&&Jre(2===c.rank||1===c.rank,(()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`)),Mse(i,s,l,c,u,a)}});const Lse=Oae({batchNorm3d_:function(e,t,n,r,o,a){const i=$ae(e,"x","batchNorm"),s=$ae(t,"mean","batchNorm"),l=$ae(n,"variance","batchNorm");let u,c;return null!=o&&(u=$ae(o,"scale","batchNorm")),null!=r&&(c=$ae(r,"offset","batchNorm")),Jre(3===i.rank,(()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`)),Jre(3===s.rank||1===s.rank,(()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`)),Jre(3===l.rank||1===l.rank,(()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`)),null!=u&&Jre(3===u.rank||1===u.rank,(()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`)),null!=c&&Jre(3===c.rank||1===c.rank,(()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`)),Mse(i,s,l,c,u,a)}});const Bse=Oae({batchNorm4d_:function(e,t,n,r,o,a){const i=$ae(e,"x","batchNorm"),s=$ae(t,"mean","batchNorm"),l=$ae(n,"variance","batchNorm");let u,c;return null!=o&&(u=$ae(o,"scale","batchNorm")),null!=r&&(c=$ae(r,"offset","batchNorm")),Jre(4===i.rank,(()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`)),Jre(4===s.rank||1===s.rank,(()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`)),Jre(4===l.rank||1===l.rank,(()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`)),null!=u&&Jre(4===u.rank||1===u.rank,(()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`)),null!=c&&Jre(4===c.rank||1===c.rank,(()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`)),Mse(i,s,l,c,u,a)}});const jse=Oae({bincount_:function(e,t,n){const r=$ae(e,"x","bincount"),o=$ae(t,"weights","bincount");Jre("int32"===r.dtype,(()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`)),Jre(n>=0,(()=>`size must be non-negative, but got ${n}.`)),Jre(o.size===r.size||0===o.size,(()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`));const a={x:r,weights:o},i={size:n};return kae.runKernel("Bincount",a,i)}});const Hse=Oae({broadcastArgs_:function(e,t){const n=$ae(e,"s0","broadcastArgs","int32"),r=$ae(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(1!==r.rank)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const o={s0:n,s1:r};return kae.runKernel("BroadcastArgs",o)}});const Vse=Oae({broadcastTo_:function(e,t){let n=$ae(e,"broadcastTo","x");const r=n.shape;if(t.some((e=>!(e>0)||e%1!==0)))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=Nse(n,e)}const o=n.shape,a=Array.from(t);for(let u=t.length-1;u>=0;u--)if(o[u]===t[u])a[u]=1;else if(1!==n.shape[u])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);const i=a.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0));if(0===i.length)return _ie(n);const s={x:n},l={reps:a};return kae.runKernel(Aoe,s,l)}});const Wse=Oae({ceil_:function(e){const t={x:$ae(e,"x","ceil","float32")};return kae.runKernel("Ceil",t)}});function Gse(e,t,n){const r={shape:e,value:t,dtype:n};return kae.runKernel(Noe,{},r)}const Use=Oae({clipByValue_:function(e,t,n){const r=$ae(e,"x","clipByValue");if(Jre(t<=n,(()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`)),t===n)return Gse(r.shape,t,r.dtype);const o={x:r},a={clipValueMin:t,clipValueMax:n};return kae.runKernel("ClipByValue",o,a)}});const Kse=Oae({concat1d_:function(e){return Tse(e,0)}});const qse=Oae({concat2d_:function(e,t){return Tse(e,t)}});const Xse=Oae({concat3d_:function(e,t){return Tse(e,t)}});const Jse=Oae({concat4d_:function(e,t){return Tse(e,t)}});const Yse=Oae({conv2d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0;const s=$ae(e,"x","conv2d","float32"),l=$ae(t,"filter","conv2d","float32");let u=s,c=!1;3===s.rank&&(c=!0,u=Nse(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Jre(4===u.rank,(()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`)),Jre(4===l.rank,(()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`)),Ese("conv2d",r,i);const d="NHWC"===o?u.shape[3]:u.shape[1];Jre(d===l.shape[2],(()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`)),Jre(Sse(n,a),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`));const h={x:u,filter:l},p={strides:n,pad:r,dataFormat:o,dilations:a,dimRoundingMode:i},f=kae.runKernel("Conv2D",h,p);return c?Nse(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const Qse=Oae({conv1d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0;const s=$ae(e,"x","conv1d"),l=$ae(t,"filter","conv1d");let u=s,c=!1;2===s.rank&&(c=!0,u=Nse(s,[1,s.shape[0],s.shape[1]])),Jre(3===u.rank,(()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`)),Jre(3===l.rank,(()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`)),Ese("conv1d",r,i),Jre(u.shape[2]===l.shape[1],(()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`)),Jre(Sse(n,a),(()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${a}'`)),Jre("NWC"===o,(()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`));const d=Nse(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=Nse(u,[u.shape[0],1,u.shape[1],u.shape[2]]),p=Yse(h,d,[1,n],r,"NHWC",[1,a],i);return Nse(p,c?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});const Zse=Oae({conv2DBackpropInput_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0;Jre(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let s=e,l=t,u=!1;3===t.rank&&(u=!0,l=Nse(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),Jre(4===s.length,(()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`)),Jre(4===l.rank,(()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`)),Jre(4===n.rank,(()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`));const c="NHWC"===a?s[3]:s[1],d="NHWC"===a?l.shape[3]:l.shape[1];Jre(c===n.shape[2],(()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`)),Jre(d===n.shape[3],(()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`)),Ese("conv2dDerInput",o,i);const h={dy:l,filter:n},p={strides:r,pad:o,dataFormat:a,dimRoundingMode:i,inputShape:s},f=kae.runKernel("Conv2DBackpropInput",h,p);return u?Nse(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const ele=Oae({conv2dTranspose_:function(e,t,n,r,o,a){const i=$ae(e,"x","conv2dTranspose"),s=$ae(t,"filter","conv2dTranspose");return Zse(n,i,s,r,o,"NHWC",a)}});const tle=Oae({conv3d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1];const i=$ae(e,"x","conv3d"),s=$ae(t,"filter","conv3d");let l=i,u=!1;4===i.rank&&(u=!0,l=Nse(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Jre(5===l.rank,(()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`)),Jre(5===s.rank,(()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`)),Jre(l.shape[4]===s.shape[3],(()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${s.shape[3]}.`)),Jre(Sse(n,a),(()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`)),Jre("NDHWC"===o,(()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`));const c={x:l,filter:s},d={strides:n,pad:r,dataFormat:o,dilations:a},h=kae.runKernel("Conv3D",c,d);return u?Nse(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const nle=Oae({conv3DBackpropInput_:function(e,t,n,r,o){Jre(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let a=e,i=t,s=!1;4===t.rank&&(s=!0,i=Nse(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),a=[1,e[0],e[1],e[2],e[3]]);const l=a[4],u=i.shape[4];Jre(5===a.length,(()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`)),Jre(5===i.rank,(()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`)),Jre(5===n.rank,(()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`)),Jre(l===n.shape[3],(()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`)),Jre(u===n.shape[4],(()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`));const c={dy:i,filter:n},d={pad:o,strides:r,inputShape:a},h=kae.runKernel("Conv3DBackpropInputV2",c,d);return s?Nse(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const rle=Oae({conv3dTranspose_:function(e,t,n,r,o){const a=$ae(e,"x","conv3dTranspose"),i=$ae(t,"filter","conv3dTranspose");return nle(n,a,i,r,o)}});const ole=Oae({cos_:function(e){const t={x:$ae(e,"x","cos","float32")};return kae.runKernel("Cos",t)}});const ale=Oae({cosh_:function(e){const t={x:$ae(e,"x","cosh","float32")};return kae.runKernel("Cosh",t)}});const ile=Oae({cumprod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o={x:$ae(e,"x","cumprod")},a={axis:t,exclusive:n,reverse:r};return kae.runKernel("Cumprod",o,a)}});const sle=Oae({cumsum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o={x:$ae(e,"x","cumsum")},a={axis:t,exclusive:n,reverse:r};return kae.runKernel("Cumsum",o,a)}});const lle=Oae({denseBincount_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=$ae(e,"x","denseBincount"),a=$ae(t,"weights","denseBincount");Jre("int32"===o.dtype,(()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`)),Jre(o.rank<=2,(()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`)),Jre(n>=0,(()=>`size must be non-negative, but got ${n}.`)),Jre(a.size===o.size||0===a.size,(()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${a.shape}.`));const i={x:o,weights:a},s={size:n,binaryOutput:r};return kae.runKernel("DenseBincount",i,s)}});const ule=Oae({depthToSpace_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC";const r=$ae(e,"x","depthToSpace","float32"),o="NHWC"===n?r.shape[1]:r.shape[2],a="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];Jre(t>1,(()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`)),Jre(o*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${o} and ${t}  for depthToSpace with input shape\n    ${r.shape}`)),Jre(a*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${a} and ${t} for depthToSpace with input shape\n        ${r.shape}`)),Jre(i%(t*t)===0,(()=>`Dimension size must be evenly divisible by ${t*t} but is ${i} for depthToSpace with input shape ${r.shape}`));const s={x:r},l={blockSize:t,dataFormat:n};return kae.runKernel("DepthToSpace",s,l)}});const cle=Oae({depthwiseConv2d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0;const s=$ae(e,"x","depthwiseConv2d","float32"),l=$ae(t,"filter","depthwiseConv2d","float32");let u=s,c=!1;3===s.rank&&(c=!0,u=Nse(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Jre(4===u.rank,(()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`)),Jre(4===l.rank,(()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`));const d="NHWC"===o?u.shape[3]:u.shape[1];Jre(d===l.shape[2],(()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`)),Ese("depthwiseConv2d",r,i);const h={x:u,filter:l},p={strides:n,pad:r,dataFormat:o,dilations:a,dimRoundingMode:i},f=kae.runKernel("DepthwiseConv2dNative",h,p);return c?Nse(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const dle=Oae({diag_:function(e){const t={x:$ae(e,"x","diag")};return kae.runKernel("Diag",t)}});const hle=Oae({dilation2d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC";const i=$ae(e,"x","dilation2d"),s=$ae(t,"filter","dilation2d");Jre(3===i.rank||4===i.rank,(()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`)),Jre(3===s.rank,(()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`)),Jre("NHWC"===a,(()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`));let l=i,u=!1;3===i.rank&&(l=Nse(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=!0);const c={x:l,filter:s},d={strides:n,pad:r,dilations:o},h=kae.runKernel("Dilation2D",c,d);return u?Nse(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});const ple=Oae({floorDiv_:function(e,t){let n=$ae(e,"a","floorDiv"),r=$ae(t,"b","floorDiv");[n,r]=mae(n,r);const o={a:n,b:r};return kae.runKernel("FloorDiv",o)}});const fle=Oae({div_:function(e,t){let n=$ae(e,"a","div"),r=$ae(t,"b","div");if([n,r]=mae(n,r),"int32"===n.dtype&&"int32"===r.dtype)return ple(n,r);const o={a:n,b:r};return kae.runKernel("RealDiv",o,{})}});function mle(e,t){const n=[],r=Math.max(e.length,t.length);for(let o=0;o<r;o++){let r=e[e.length-o-1];null==r&&(r=1);let a=t[t.length-o-1];if(null==a&&(a=1),1===r)n.unshift(a);else if(1===a)n.unshift(r);else{if(r!==a){throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`)}n.unshift(r)}}return n}const gle=Oae({equal_:function(e,t){let n=$ae(e,"a","equal","string_or_numeric"),r=$ae(t,"b","equal","string_or_numeric");[n,r]=mae(n,r),mle(n.shape,r.shape);const o={a:n,b:r};return kae.runKernel("Equal",o)}});const vle=Oae({where_:function(e,t,n){const r=$ae(t,"a","where"),o=$ae(n,"b","where"),a=$ae(e,"condition","where","bool"),i=mle(mle(a.shape,r.shape),o.shape),s={condition:Vse(a,i),t:Vse(r,i),e:Vse(o,i)};return kae.runKernel("Select",s)}});const ble=Oae({zerosLike_:function(e){const t={x:$ae(e,"x","zerosLike")};return kae.runKernel("ZerosLike",t)}});const yle=Oae({divNoNan_:function(e,t){let n=$ae(e,"a","div"),r=$ae(t,"b","div");[n,r]=mae(n,r);const o=fle(n,r),a=ble(o),i=gle(r,a);return vle(i,a,o)}});const wle=Oae({dot_:function(e,t){const n=$ae(e,"t1","dot"),r=$ae(t,"t2","dot");Jre((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`));const o=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];if(Jre(o===a,(()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${a}.`)),1===n.rank&&1===r.rank){const e=Nse(n,[1,-1]),t=Nse(r,[-1,1]),o=Ase(e,t);return Nse(o,[])}if(1===n.rank&&2===r.rank){const e=Nse(n,[1,-1]),t=Nse(r,[r.shape[0],r.shape[1]]),o=Ase(e,t);return Nse(o,[o.size])}if(2===n.rank&&1===r.rank){const e=Nse(r,[-1,1]),t=Ase(n,e);return Nse(t,[t.size])}{const e=Nse(r,[r.shape[0],r.shape[1]]);return Ase(n,e)}}});const xle=Oae({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(((e,t)=>$ae(e,`tensors${t}`,"einsum"))),a={equation:e};return kae.runKernel("Einsum",o,a)}});const kle=Oae({elu_:function(e){const t={x:$ae(e,"x","elu","float32")};return kae.runKernel("Elu",t)}});const Cle=Oae({erf_:function(e){let t=$ae(e,"x","erf");Jre("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=Fie(t,"float32"));const n={x:t};return kae.runKernel("Erf",n)}});function Sle(e,t){return function(e,t,n){const r=e.length+t.length,o=[];let a=0,i=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?o.push(e[a++]):o.push(t[i++]);return o}(e,t.map((e=>1)),t)}const Ele=Oae({max_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:$ae(e,"x","max")},o={reductionIndices:t,keepDims:n};return kae.runKernel("Max",r,o)}});const Nle=Oae({min_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:$ae(e,"x","min")},o={axis:t,keepDims:n};return kae.runKernel("Min",r,o)}});const Ile=Oae({pow_:function(e,t){let n=$ae(e,"base","pow"),r=$ae(t,"exp","pow");[n,r]=mae(n,r);const o={a:n,b:r};return kae.runKernel("Pow",o)}});function $le(e,t){if((aoe(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&aoe(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Pae(e,[],[],t)}const Tle=Oae({sqrt_:function(e){const t={x:$ae(e,"x","sqrt","float32")};return kae.runKernel("Sqrt",t)}});const Ale=Oae({square_:function(e){const t=$ae(e,"x","square");return kae.runKernel("Square",{x:t},{})}});const Ole=Oae({sum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$ae(e,"x","sum");"bool"===r.dtype&&(r=Fie(r,"int32"));const o={x:r},a={axis:t,keepDims:n};return kae.runKernel("Sum",o,a)}});function Rle(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return ose(e);if(1!==e.rank&&null===n)return Rle(Nse(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Ole(ose(e),n);if(t===1/0)return Ele(ose(e),n);if(t===-1/0)return Nle(ose(e),n);if("euclidean"===t||2===t)return Tle(Ole(Ile(ose(e),$le(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&2===n.length){if(1===t)return Ele(Ole(ose(e),n[0]),n[1]-1);if(t===1/0)return Ele(Ole(ose(e),n[1]),n[0]);if(t===-1/0)return Nle(Ole(ose(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Tle(Ole(Ale(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Ple=Oae({norm_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=Rle(e=$ae(e,"x","norm"),t,n);let a=o.shape;if(r){const t=ooe(n,e.shape);a=Sle(o.shape,t)}return Nse(o,a)}});const Dle=Oae({euclideanNorm_:function(e){return Ple(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});const Fle=Oae({exp_:function(e){const t={x:$ae(e,"x","exp")};return kae.runKernel("Exp",t)}});const _le=Oae({expandDims_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=$ae(e,"x","expandDims","string_or_numeric");Jre(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const r={input:n},o={dim:t};return kae.runKernel("ExpandDims",r,o)}});const Mle=Oae({expm1_:function(e){const t={x:$ae(e,"x","expm1")};return kae.runKernel("Expm1",t)}});const zle=Oae({tile_:function(e,t){const n=$ae(e,"x","tile","string_or_numeric");Jre(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`));const r={x:n},o={reps:t};return kae.runKernel(Aoe,r,o)}});const Lle=Oae({eye_:function(e,t,n){null==t&&(t=e);const r=Die([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),o=e<=t?e:t;for(let i=0;i<o;++i)r.set(1,i,i);const a=Nse(r.toTensor(),[e,t]);if(null==n)return a;if(1===n.length)return zle(_le(a,0),[n[0],1,1]);if(2===n.length)return zle(_le(_le(a,0),0),[n[0],n[1],1,1]);if(3===n.length)return zle(_le(_le(_le(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});const Ble=Oae({floor_:function(e){const t={x:$ae(e,"x","floor","float32")};return kae.runKernel("Floor",t)}});const jle=Oae({gather_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o={x:$ae(e,"x","gather"),indices:$ae(t,"indices","gather","int32")},a={axis:n,batchDims:r};return kae.runKernel("GatherV2",o,a)}});const Hle=Oae({greater_:function(e,t){let n=$ae(e,"a","greater","string_or_numeric"),r=$ae(t,"b","greater","string_or_numeric");[n,r]=mae(n,r),mle(n.shape,r.shape);const o={a:n,b:r};return kae.runKernel("Greater",o)}});const Vle=Oae({greaterEqual_:function(e,t){let n=$ae(e,"a","greaterEqual","string_or_numeric"),r=$ae(t,"b","greaterEqual","string_or_numeric");[n,r]=mae(n,r),mle(n.shape,r.shape);const o={a:n,b:r};return kae.runKernel("GreaterEqual",o)}});const Wle=Oae({imag_:function(e){const t={input:$ae(e,"input","imag")};return kae.runKernel("Imag",t)}});const Gle=Oae({isFinite_:function(e){const t={x:$ae(e,"x","isFinite")};return kae.runKernel("IsFinite",t)}});const Ule=Oae({isInf_:function(e){const t={x:$ae(e,"x","isInf")};return kae.runKernel("IsInf",t)}});const Kle=Oae({isNaN_:function(e){const t={x:$ae(e,"x","isNaN")};return kae.runKernel("IsNan",t)}});const qle=Oae({leakyRelu_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;const n={x:$ae(e,"x","leakyRelu")},r={alpha:t};return kae.runKernel("LeakyRelu",n,r)}});const Xle=Oae({less_:function(e,t){let n=$ae(e,"a","less","string_or_numeric"),r=$ae(t,"b","less","string_or_numeric");[n,r]=mae(n,r),mle(n.shape,r.shape);const o={a:n,b:r};return kae.runKernel("Less",o)}});const Jle=Oae({lessEqual_:function(e,t){let n=$ae(e,"a","lessEqual","string_or_numeric"),r=$ae(t,"b","lessEqual","string_or_numeric");[n,r]=mae(n,r),mle(n.shape,r.shape);const o={a:n,b:r};return kae.runKernel("LessEqual",o)}});function Yle(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:e,stop:t,num:n};return kae.runKernel($oe,{},r)}const Qle=Oae({localResponseNormalization_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const a=$ae(e,"x","localResponseNormalization");Jre(4===a.rank||3===a.rank,(()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${a.rank}.`)),Jre(noe(t),(()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`));let i=a,s=!1;3===a.rank&&(s=!0,i=Nse(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const l={x:i},u={depthRadius:t,bias:n,alpha:r,beta:o},c=kae.runKernel("LRN",l,u);return s?Nse(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const Zle=Oae({log_:function(e){const t={x:$ae(e,"x","log","float32")};return kae.runKernel("Log",t)}});const eue=Oae({log1p_:function(e){const t={x:$ae(e,"x","log1p")};return kae.runKernel("Log1p",t)}});function tue(e){return kae.customGrad(e)}const nue=Oae({neg_:function(e){const t={x:$ae(e,"x","neg")};return kae.runKernel("Neg",t)}});const rue=Oae({softplus_:function(e){const t={x:$ae(e,"x","softplus")};return kae.runKernel("Softplus",t)}});const oue=Oae({logSigmoid_:function(e){const t=$ae(e,"x","logSigmoid");return tue((e=>({value:nue(rue(nue(e))),gradFunc:t=>Ose(t,Rse(nue(e)))})))(t)}});const aue=Oae({sub_:function(e,t){let n=$ae(e,"a","sub"),r=$ae(t,"b","sub");[n,r]=mae(n,r);const o={a:n,b:r};return kae.runKernel("Sub",o)}});const iue=Oae({logSoftmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=$ae(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);const r=tue(((e,n)=>{const r=Ele(e,t,!0),o=aue(e,r),a=aue(Fie(o,"float32"),Zle(Ole(Fle(o),t,!0)));n([a]);return{value:a,gradFunc:(e,n)=>{const[r]=n,o=Fle(r);return aue(e,Ose(Ole(e,t,!0),o))}}}));return r(n)}});const sue=Oae({logSumExp_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=$ae(e,"x","logSumExp"),o=ooe(t,r.shape),a=Ele(r,o,!0),i=aue(r,a),s=Fle(i),l=Ole(s,o),u=Zle(l),c=sse(Nse(a,u.shape),u);if(n){const e=Sle(c.shape,o);return Nse(c,e)}return c}});const lue=Oae({logicalAnd_:function(e,t){const n=$ae(e,"a","logicalAnd","bool"),r=$ae(t,"b","logicalAnd","bool");mle(n.shape,r.shape);const o={a:n,b:r};return kae.runKernel("LogicalAnd",o)}});const uue=Oae({logicalNot_:function(e){const t={x:$ae(e,"x","logicalNot","bool")};return kae.runKernel("LogicalNot",t)}});const cue=Oae({logicalOr_:function(e,t){const n=$ae(e,"a","logicalOr","bool"),r=$ae(t,"b","logicalOr","bool");mle(n.shape,r.shape);const o={a:n,b:r};return kae.runKernel("LogicalOr",o)}});const due=Oae({logicalXor_:function(e,t){const n=$ae(e,"a","logicalXor","bool"),r=$ae(t,"b","logicalXor","bool");return mle(n.shape,r.shape),lue(cue(e,t),uue(lue(e,t)))}}),hue=2147483648;const pue=Oae({searchSorted_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left";const r=$ae(e,"sortedSequence","searchSorted"),o=$ae(t,"values","searchSorted"),a=r.shape[r.shape.length-1],i=o.shape[o.shape.length-1],s=Nse(r,[-1,a]),l=Nse(o,[-1,i]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(eoe(l.shape)>=hue)throw new Error("values tensor size must less than 2147483648");if(s.shape[1]>=hue)throw new Error(`trailing dim_size must less than 2147483648 for int32 output type, was ${s.shape[1]}`);const u={sortedSequence:s,values:l},c={side:n};return kae.runKernel("SearchSorted",u,c)}});function fue(e,t){return pue(e,t,"left")}const mue=Oae({maxPool_:function(e,t,n,r,o){const a=$ae(e,"x","maxPool");let i=a,s=!1;3===a.rank&&(s=!0,i=Nse(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Jre(4===i.rank,(()=>`Error in maxPool: input must be rank 4 but got rank ${i.rank}.`)),Jre(Sse(n,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`)),Ese("maxPool",r,o);const l={x:i},u={filterSize:t,strides:n,pad:r,dimRoundingMode:o},c=kae.runKernel("MaxPool",l,u);return s?Nse(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const gue=Oae({maxPool3d_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const i=$ae(e,"x","maxPool3d");let s=i,l=!1;4===i.rank&&(l=!0,s=Nse(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Jre(5===s.rank,(()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`)),Jre("NDHWC"===a,(()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`)),Ese("maxPool3d",r,o);const u={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:a},d=kae.runKernel("MaxPool3D",u,c);return l?Nse(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const vue=Oae({maxPoolWithArgmax_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a={x:$ae(e,"x","maxPoolWithArgmax")},i={filterSize:t,strides:n,pad:r,includeBatchInIndex:o},s=kae.runKernel("MaxPoolWithArgmax",a,i);return{result:s[0],indexes:s[1]}}});const bue=Oae({maximum_:function(e,t){let n=$ae(e,"a","maximum"),r=$ae(t,"b","maximum");[n,r]=mae(n,r),"bool"===n.dtype&&(n=Fie(n,"int32"),r=Fie(r,"int32")),mle(n.shape,r.shape);const o={a:n,b:r};return kae.runKernel("Maximum",o)}});const yue=Oae({mean_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:$ae(e,"x","mean")},o={axis:t,keepDims:n};return kae.runKernel("Mean",r,o)}});function wue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){const t=wue(e,"float32"),n=wue(e,"float32");return Rae(t,n)}const n=foe(eoe(e),t);return kae.makeTensor(n,e,t)}function xue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){const t=xue(e,"float32"),n=wue(e,"float32");return Rae(t,n)}const n=poe(eoe(e),t);return kae.makeTensor(n,e,t)}function kue(e,t){let{indexing:n="xy"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("xy"!==n&&"ij"!==n)throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(void 0===e)return[];let r=$ae(e,"x","meshgrid",e instanceof iae?e.dtype:"float32");if(void 0===t)return[r];let o=$ae(t,"y","meshgrid",t instanceof iae?t.dtype:"float32");const a=eoe(r.shape),i=eoe(o.shape);return"xy"===n?(r=Nse(r,[1,-1]),o=Nse(o,[-1,1]),[Ase(xue([i,1],r.dtype),r),Ase(o,xue([1,a],o.dtype))]):(r=Nse(r,[-1,1]),o=Nse(o,[1,-1]),[Ase(r,xue([1,i],r.dtype)),Ase(xue([a,1],o.dtype),o)])}const Cue=Oae({minimum_:function(e,t){let n=$ae(e,"a","minimum"),r=$ae(t,"b","minimum");[n,r]=mae(n,r),"bool"===n.dtype&&(n=Fie(n,"int32"),r=Fie(r,"int32")),mle(n.shape,r.shape);const o={a:n,b:r};return kae.runKernel("Minimum",o)}});const Sue=Oae({mirrorPad_:function(e,t,n){Jre("reflect"===n||"symmetric"===n,(()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`));const r=$ae(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Jre(t.length===r.rank,(()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`));const o="reflect"===n?1:0;for(let s=0;s<r.rank;s++)Jre(2===t[s].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Jre(t[s][0]>=0&&t[s][0]<=r.shape[s]-o&&t[s][1]>=0&&t[s][1]<=r.shape[s]-o,(()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-o} or less than 0 for input of shape ${r.shape}`));const a={paddings:t,mode:n},i={x:r};return kae.runKernel("MirrorPad",i,a)}});const Eue=Oae({mod_:function(e,t){let n=$ae(e,"a","mod"),r=$ae(t,"b","mod");[n,r]=mae(n,r);const o={a:n,b:r};return kae.runKernel("Mod",o)}});const Nue=Oae({moments_:function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=ooe(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=$ae(e,"x","moments")).shape),r=yue(e,n,t);let o=r.shape;t||(o=Sle(r.shape,n));const a=Ale(aue(Fie(e,"float32"),Nse(r,o)));return{mean:r,variance:yue(a,n,t)}}});const Iue=Oae({multiRNNCell_:function(e,t,n,r){const o=$ae(t,"data","multiRNNCell"),a=Tae(n,"c","multiRNNCell"),i=Tae(r,"h","multiRNNCell");let s=o;const l=[];for(let d=0;d<e.length;d++){const t=e[d](s,a[d],i[d]);l.push(t[0]),l.push(t[1]),s=t[1]}const u=[],c=[];for(let d=0;d<l.length;d+=2)u.push(l[d]),c.push(l[d+1]);return[u,c]}});const $ue=Oae({multinomial_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=$ae(e,"logits","multinomial"),a=o.size,i=o.rank;if(a<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${a}.`);if(i>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${i}`);n=n||Math.random();const s={logits:1===i?Nse(o,[1,-1]):o},l={numSamples:t,seed:n,normalized:r},u=kae.runKernel("Multinomial",s,l);return 1===i?Nse(u,[u.size]):u}});const Tue=Oae({notEqual_:function(e,t){let n=$ae(e,"a","notEqual","string_or_numeric"),r=$ae(t,"b","notEqual","string_or_numeric");[n,r]=mae(n,r),mle(n.shape,r.shape);const o={a:n,b:r};return kae.runKernel("NotEqual",o)}});const Aue=Oae({oneHot_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const a={indices:$ae(e,"indices","oneHot","int32")},i={dtype:o,depth:t,onValue:n,offValue:r};return kae.runKernel("OneHot",a,i)}});const Oue=Oae({onesLike_:function(e){const t={x:$ae(e,"x","onesLike")};return kae.runKernel("OnesLike",t)}});const Rue=Oae({outerProduct_:function(e,t){const n=$ae(e,"v1","outerProduct"),r=$ae(t,"v2","outerProduct");Jre(1===n.rank&&1===r.rank,(()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`));const o=Nse(n,[-1,1]),a=Nse(r,[1,-1]);return Ase(o,a)}});const Pue=Oae({pad_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=$ae(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:t,constantValue:n},a={x:r};return kae.runKernel("PadV2",a,o)}});const Due=Oae({pad1d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Jre(2===t.length,(()=>"Invalid number of paddings. Must be length of 2.")),Pue(e,[t],n)}});const Fue=Oae({pad2d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Jre(2===t.length&&2===t[0].length&&2===t[1].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Pue(e,t,n)}});const _ue=Oae({pad3d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Jre(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Pue(e,t,n)}});const Mue=Oae({pad4d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Jre(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Pue(e,t,n)}});const zue=Oae({spaceToBatchND_:function(e,t,n){const r=$ae(e,"x","spaceToBatchND");Jre(r.rank>=1+t.length,(()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`)),Jre(n.length===t.length,(()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`)),Jre(r.shape.reduce(((e,r,o)=>o>0&&o<=t.length?e&&(r+n[o-1][0]+n[o-1][1])%t[o-1]===0:e),!0),(()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`));const o={x:r},a={blockShape:t,paddings:n};return kae.runKernel("SpaceToBatchND",o,a)}});const Lue=Oae({pool_:function(e,t,n,r,o,a,i){null==o&&(o=[1,1]),null==a&&(a=1),0===r&&(r="valid");const s=$ae(e,"x","maxPool");let l=s,u=!1;3===s.rank&&(u=!0,l=Nse(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Jre(Sse(a,o),(()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${o}'`));const c=function(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[s,l]=wse(t);let u;if("channelsLast"===i)u=[s,l,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error(`Unknown dataFormat ${i}`);u=[s,l,e[1],e[1]]}return bse(e,u,n,r,o,a,!1,i)}(l.shape,t,a,o,r),d=[c.dilationHeight,c.dilationWidth];let h;h="same"===r?function(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))),r=n.map((e=>e-1)),o=r.map((e=>Math.floor(e/2))),a=r.map(((e,t)=>e-o[t]));return r.map(((e,t)=>[o[t],a[t]]))}([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];const p=1===d[0]&&1===d[1],[f,m]=function(e,t,n){const r=n.map((e=>e[0])),o=n.map((e=>e[1])),a=e.concat(r,o),i=t.map(((e,t)=>(e-a[t]%e)%e)),s=o.map(((e,t)=>e+i[t])),l=t.map(((e,t)=>[r[t],s[t]])),u=t.map(((e,t)=>[0,i[t]]));return[l,u]}([c.inHeight,c.inWidth],d,h),g=p?r:"valid",v=p?l:zue(l,d,f),b=("avg"===n?()=>Ise(v,t,a,g,i):()=>mue(v,t,a,g,i))(),y=p?b:_se(b,d,m);return u?Nse(y,[y.shape[1],y.shape[2],y.shape[3]]):y}});const Bue=Oae({prelu_:function(e,t){const n={x:$ae(e,"x","prelu"),alpha:$ae(t,"alpha","prelu")};return kae.runKernel("Prelu",n)}});const jue=Oae({prod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$ae(e,"x","prod");"bool"===r.dtype&&(r=Fie(r,"int32"));const o={x:r},a={axis:t,keepDims:n};return kae.runKernel("Prod",o,a)}});const Hue=Oae({raggedGather_:function(e,t,n,r){const o=e.map(((e,t)=>$ae(e,`tensors${t}`,"raggedGather","int32"))),a={paramsNestedSplits:o,paramsDenseValues:$ae(t,"paramsDenseValues","raggedGather"),indices:$ae(n,"indices","raggedGather","int32")},i={outputRaggedRank:r},s=kae.runKernel("RaggedGather",a,i);return{outputNestedSplits:s.slice(0,s.length-1),outputDenseValues:s[s.length-1]}}});const Vue=Oae({raggedTensorToTensor_:function(e,t,n,r,o){const a=$ae(e,"shape","raggedTensorToTensor","int32"),i=$ae(t,"values","raggedTensorToTensor"),s=$ae(n,"defaultValue","raggedTensorToTensor",i.dtype),l=r.map(((e,t)=>$ae(e,`tensors${t}`,"raggedTensorToTensor","int32"))),u={shape:a,values:i,defaultValue:s,rowPartitionTensors:l},c={rowPartitionTypes:o};return kae.runKernel("RaggedTensorToTensor",u,c)}});const Wue=Oae({rand_:function(e,t,n){const r=eoe(e);let o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error(`Unknown data type ${n}`);o=new Uint8Array(r)}for(let a=0;a<r;a++)o[a]=t();return kae.makeTensor(o,e,n)}});class Gue{constructor(e,t,n,r,o){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const a=o||Math.random();this.random=$L.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,o,a;do{r=2*this.random()-1,o=2*this.random()-1,a=r*r+o*o}while(a>=1||0===a);const i=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*r*i,t=this.mean+this.stdDev*o*i,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Uue{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;const o=r||Math.random();this.randu=$L.alea(o.toString()),this.randn=new Gue(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,o,a;for(;;){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(a*=a*a,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-a+Math.log(a)),o=this.randu(),o<t||Math.log(o)<n)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class Kue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"===typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=$L.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const que=Oae({randomGamma_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",o=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error(`Unsupported data type ${r}`);const a=new Uue(t,n,r,o),i=Die(e,r);for(let s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}});const Xue=Oae({randomNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error(`Unsupported data type ${r}`);const a=new Gue(t,n,r,!1,o),i=Die(e,r);for(let s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}});const Jue=Oae({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error(`Unsupported data type ${t}`);return Xue(e,0,1,t,n)}});const Yue=Oae({randomUniform_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>4?arguments[4]:void 0;const o=Die(e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),a=new Kue(t,n,null,r);for(let i=0;i<o.values.length;i++)o.values[i]=a.nextValue();return o.toTensor()}});function Que(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");const o={start:e,stop:t,step:n,dtype:r};return kae.runKernel(Toe,{},o)}const Zue=Oae({real_:function(e){const t={input:$ae(e,"input","real")};return kae.runKernel("Real",t)}});const ece=Oae({reciprocal_:function(e){const t={x:$ae(e,"x","reciprocal")};return kae.runKernel("Reciprocal",t)}});const tce=Oae({relu_:function(e){const t={x:$ae(e,"x","relu")};return kae.runKernel("Relu",t)}});const nce=Oae({relu6_:function(e){const t={x:$ae(e,"x","relu6")};return kae.runKernel("Relu6",t)}});const rce=Oae({reverse_:function(e,t){const n={x:$ae(e,"x","reverse")},r={dims:t};return kae.runKernel("Reverse",n,r)}});const oce=Oae({reverse1d_:function(e){const t=$ae(e,"x","reverse");return Jre(1===t.rank,(()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`)),rce(t,0)}});const ace=Oae({reverse2d_:function(e,t){const n=$ae(e,"x","reverse");return Jre(2===n.rank,(()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`)),rce(n,t)}});const ice=Oae({reverse3d_:function(e,t){const n=$ae(e,"x","reverse");return Jre(3===n.rank,(()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`)),rce(n,t)}});const sce=Oae({reverse4d_:function(e,t){const n=$ae(e,"x","reverse");return Jre(4===n.rank,(()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`)),rce(n,t)}});const lce=Oae({round_:function(e){const t={x:$ae(e,"x","round")};return kae.runKernel("Round",t)}});const uce=Oae({rsqrt_:function(e){const t={x:$ae(e,"x","rsqrt","float32")};return kae.runKernel("Rsqrt",t)}});const cce=Oae({selu_:function(e){const t={x:$ae(e,"x","selu")};return kae.runKernel("Selu",t)}});const dce=Oae({separableConv2d_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC";const s=$ae(e,"x","separableConv2d"),l=$ae(t,"depthwiseFilter","separableConv2d"),u=$ae(n,"pointwiseFilter","separableConv2d");let c=s,d=!1;if(3===s.rank&&(d=!0,c=Nse(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Jre(4===c.rank,(()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`)),Jre(4===l.rank,(()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`)),Jre(4===u.rank,(()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`)),Jre(1===u.shape[0],(()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`)),Jre(1===u.shape[1],(()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`));const h=l.shape[2],p=l.shape[3];Jre(u.shape[2]===h*p,(()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*p}, but got ${u.shape[2]}.`));const f=cle(c,l,r,o,i,a),m=Yse(f,u,1,"valid",i);return d?Nse(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});const hce=async function(e,t){const n=$ae(e,"x","setdiff1d"),r=$ae(t,"y","setdiff1d");Jre(n.dtype===r.dtype,(()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`)),Jre(1===n.rank,(()=>`x should be 1D tensor, but got x (${n.shape}).`)),Jre(1===r.rank,(()=>`y should be 1D tensor, but got y (${r.shape}).`));const o=await n.data(),a=await r.data(),i=new Set(a);let s=0;for(let c=0;c<o.length;c++)i.has(o[c])||s++;const l=new nae([s],n.dtype),u=new nae([s],"int32");for(let c=0,d=0;c<o.length;c++)i.has(o[c])||(l.values[d]=o[c],u.values[d]=c,d++);return[l.toTensor(),u.toTensor()]};const pce=Oae({sign_:function(e){const t={x:$ae(e,"x","sign")};return kae.runKernel("Sign",t)}});const fce=Oae({sin_:function(e){const t={x:$ae(e,"x","sin","float32")};return kae.runKernel("Sin",t)}});const mce=Oae({sinh_:function(e){const t={x:$ae(e,"x","sinh")};return kae.runKernel("Sinh",t)}});const gce=Oae({slice1d_:function(e,t,n){const r=$ae(e,"x","slice1d");return Jre(1===r.rank,(()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`)),Pse(r,[t],[n])}});const vce=Oae({slice2d_:function(e,t,n){const r=$ae(e,"x","slice2d");return Jre(2===r.rank,(()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`)),Pse(r,t,n)}});const bce=Oae({slice3d_:function(e,t,n){const r=$ae(e,"x","slice3d");return Jre(3===r.rank,(()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`)),Pse(r,t,n)}});const yce=Oae({slice4d_:function(e,t,n){const r=$ae(e,"x","slice4d");return Jre(4===r.rank,(()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`)),Pse(r,t,n)}});const wce=Oae({softmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=$ae(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const r={logits:n},o={dim:t};return kae.runKernel("Softmax",r,o)}});const xce=Oae({fft_:function(e){Jre("complex64"===e.dtype,(()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`));const t={input:e};return kae.runKernel("FFT",t)}});const kce=Oae({ifft_:function(e){Jre("complex64"===e.dtype,(()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`));const t={input:e};return kae.runKernel("IFFT",t)}});const Cce=Oae({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const o=Nse(e,[n,t]);r=kce(o)}else{const o=[n,2*(t-1)],a=Nse(Zue(e),[n,t]),i=Nse(Wle(e),[n,t]),s=rce(Pse(a,[0,1],[n,t-2]),1),l=Ose(rce(Pse(i,[0,1],[n,t-2]),1),$le(-1)),u=Tse([a,s],1),c=Tse([i,l],1),d=Nse(Rae(u,c),[o[0],o[1]]);r=kce(d)}if(r=Zue(r),3===e.rank&&0!==e.shape[0]){const t=r,n=e.shape[0];r=Nse(r,[n,r.shape[0]/n,r.shape[1]]),t.dispose()}return r}});const Sce=Oae({split_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={x:$ae(e,"x","split")},o={numOrSizeSplits:t,axis:n};return kae.runKernel("SplitV",r,o)}});const Ece=Oae({rfft_:function(e,t){Jre("float32"===e.dtype,(()=>`The dtype for rfft() must be real value but got ${e.dtype}`));let n=e.shape[e.shape.length-1];const r=e.size/n;let o;if(null!=t&&t<n){const r=e.shape.map((e=>0)),a=e.shape.map((e=>e));a[e.shape.length-1]=t,o=Pse(e,r,a),n=t}else if(null!=t&&t>n){const r=e.shape.map((e=>e));r[e.shape.length-1]=t-n,o=Tse([e,wue(r)],e.shape.length-1),n=t}else o=e;const a=ble(o),i=Nse(Rae(o,a),[r,n]),s=xce(i),l=Math.floor(n/2)+1,u=Zue(s),c=Wle(s),d=Sce(u,[l,n-l],u.shape.length-1),h=Sce(c,[l,n-l],c.shape.length-1),p=o.shape.slice();return p[o.shape.length-1]=l,Nse(Rae(d[0],h[0]),p)}});const Nce=Oae({squaredDifference_:function(e,t){let n=$ae(e,"a","squaredDifference"),r=$ae(t,"b","squaredDifference");[n,r]=mae(n,r),mle(n.shape,r.shape);const o={a:n,b:r};return kae.runKernel("SquaredDifference",o,{})}});const Ice=Oae({squeeze_:function(e,t){const n=$ae(e,"x","squeeze","string_or_numeric");return Nse(n,function(e,t){const n=[],r=[],o=null!=t&&Array.isArray(t)&&0===t.length,a=null==t||o?null:ooe(t,e).sort();let i=0;for(let s=0;s<e.length;++s){if(null!=a){if(a[i]===s&&1!==e[s])throw new Error(`Can't squeeze axis ${s} since its dim '${e[s]}' is not 1`);(null==a[i]||a[i]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),a[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}(n.shape,t).newShape)}});const $ce=Oae({stack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Tae(e,"tensors","stack","string_or_numeric");Jre(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&Jre(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const r=n,o={axis:t};return kae.runKernel("Pack",r,o)}});const Tce=Oae({step_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:$ae(e,"x","step")},r={alpha:t};return kae.runKernel("Step",n,r)}});const Ace=Oae({stridedSlice_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;const u={x:$ae(e,"x","stridedSlice","string_or_numeric")},c={begin:t,end:n,strides:r,beginMask:o,endMask:a,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:l};return kae.runKernel("StridedSlice",u,c)}});const Oce=Oae({tan_:function(e){const t={x:$ae(e,"x","tan","float32")};return kae.runKernel("Tan",t)}});function Rce(e,t){Qre(e);const n=Eae(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Pae(e,null,n,t)}function Pce(e,t,n){if(Qre(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=Eae(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Pae(e,t,r,n)}function Dce(e,t,n){if(Qre(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const r=Eae(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Pae(e,t,r,n)}function Fce(e,t,n){if(Qre(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");const r=Eae(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Pae(e,t,r,n)}function _ce(e,t,n){if(Qre(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");const r=Eae(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Pae(e,t,r,n)}function Mce(e,t,n){if(Qre(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");const r=Eae(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Pae(e,t=t||r,r,n)}const zce=Oae({topk_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=$ae(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const o=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${t}`);const a={x:r},i={k:t,sorted:n},[s,l]=kae.runKernel("TopK",a,i);return{values:s,indices:l}}});const Lce=Oae({truncatedNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const a=new Gue(t,n,r,!0,o),i=Die(e,r);for(let s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}});const Bce=Oae({unique_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=$ae(e,"x","unique","string_or_numeric");Jre(n.rank>0,(()=>"The input tensor must be at least 1D"));const r={x:n},o={axis:t},[a,i]=kae.runKernel("Unique",r,o);return{values:a,indices:i}}});const jce=Oae({unsortedSegmentSum_:function(e,t,n){const r=$ae(e,"x","unsortedSegmentSum"),o=$ae(t,"segmentIds","unsortedSegmentSum","int32");Jre(noe(n),(()=>"numSegments must be of dtype int"));const a={x:r,segmentIds:o},i={numSegments:n};return kae.runKernel("UnsortedSegmentSum",a,i)}});const Hce=Oae({unstack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=$ae(e,"x","unstack","string_or_numeric");Jre(t>=-n.shape.length&&t<n.shape.length,(()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`));const r={value:n},o={axis:t};return kae.runKernel("Unpack",r,o)}});function Vce(e,t){return pue(e,t,"right")}function Wce(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return kae.makeVariable(e,t,n,r)}const Gce=async function(e){const t=$ae(e,"condition","whereAsync","bool"),n=await t.data(),r=function(e,t){const n=[];for(let a=0;a<t.length;a++)t[a]&&n.push(a);const r=Die(e,"int32"),o=Die([n.length,e.length],"int32");for(let a=0;a<n.length;a++){const t=r.indexToLoc(n[a]),i=a*e.length;o.values.set(t,i)}return o.toTensor()}(t.shape,n);return e!==t&&t.dispose(),r};const Uce=async function(e,t,n){const r=$ae(e,"tensor","boolMask"),o=$ae(t,"mask","boolMask","bool"),a=null==n?0:n,i=o.rank,s=r.shape;Jre(i>0,(()=>"mask cannot be scalar")),Yre(s.slice(a,a+i),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=a;m<a+i;m++)l*=s[m];const u=s.slice(0,a).concat([l],s.slice(a+i)),c=Nse(r,u),d=Nse(o,[-1]),h=await Gce(d),p=Ice(h,[1]),f=jle(c,p,a);return e!==r&&r.dispose(),t!==o&&o.dispose(),p.dispose(),c.dispose(),d.dispose(),h.dispose(),f};function Kce(e,t){return kae.tidy(e,t)}function qce(e){return kae.keep(e)}!function(e){aae=e}((function(e){woe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}));const Xce=Oae({transpose_:function(e,t,n){const r=$ae(e,"x","transpose");if(null==t&&(t=r.shape.map(((e,t)=>t)).reverse()),Jre(r.rank===t.length,(()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`)),t.forEach((e=>{Jre(e>=0&&e<r.rank,(()=>"All entries in 'perm' must be between 0 and "+(r.rank-1)+` but got ${t}`))})),r.rank<=1)return r.clone();const o={x:r},a={perm:t};return"complex64"===r.dtype?Kce((()=>{let e=Zue(r),t=Wle(r);return e=kae.runKernel(Ooe,{x:e},a),t=kae.runKernel(Ooe,{x:t},a),n&&(t=nue(t)),Rae(e,t)})):kae.runKernel(Ooe,o,a)}});const Jce=Oae({movingAverage_:function(e,t,n,r){let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const a=$ae(e,"v","movingAverage"),i=$ae(t,"x","movingAverage"),s=$ae(n,"decay","movingAverage");!function(e,t){Jre(e.dtype===t.dtype,(()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`))}(a,i),Jre(toe(a.shape,i.shape),(()=>"Shape mismatch in v and x"));const l=$le(1),u=aue(l,s);let c=Ose(aue(i,a),u);if(o){Jre(null!=r,(()=>"When using zeroDebias: true, step is required."));const e=$ae(r,"step","movingAverage");c=fle(c,aue(l,Ile(s,e)))}return sse(a,c)}});function Yce(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}!function(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(a+` update.rank < ${o}. `);if(e.length<r+(n.rank-o))throw new Error(a+` Output shape length < ${r+(n.rank-o)}`);if(n.rank!==o+e.length-r)throw new Error(a+" update.rank != "+(o+e.length-r));for(let i=0;i<o;++i)if(n.shape[i]!==t.shape[i])throw new Error(a+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${t.shape[i]}).`);for(let i=0;i<n.rank-o;++i)if(n.shape[i+o]!==e[i+r])throw new Error(a+` updates.shape[${i+o}] (${n.shape[i+o]}) != shape[${i+o}] (${e[i+o]})`)}(n,t,e)}const Qce=Oae({scatterND_:function(e,t,n){const r=$ae(e,"indices","scatterND","int32"),o=$ae(t,"updates","scatterND");Yce(o,r,n);const a={indices:r,updates:o},i={shape:n};return kae.runKernel("ScatterNd",a,i)}});const Zce=Oae({sparseToDense_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=$ae(e,"sparseIndices","sparseToDense","int32"),a=$ae(t,"sparseValues","sparseToDense","string_or_numeric"),i=$ae(r,"defaultValue","sparseToDense",a.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);const o=e.rank>0?e.shape[0]:1,a=e.rank>1?e.shape[1]:1;if(n.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${a}.`);const i=t.size;if(0!==t.rank&&(1!==t.rank||i!==o))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${o}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,a,n,i);const s={sparseIndices:o,sparseValues:a,defaultValue:i},l={outputShape:n};return kae.runKernel("SparseToDense",s,l)}});const ede=Oae({gatherND_:function(e,t){const n=$ae(t,"indices","gatherND","int32"),r={params:$ae(e,"x","gatherND","string_or_numeric"),indices:n};return kae.runKernel("GatherNd",r)}});const tde=Oae({dropout_:function(e,t,n,r){const o=$ae(e,"x","dropout");if(Jre("float32"===o.dtype,(()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`)),Jre(t>=0&&t<1,(()=>`rate must be a float in the range [0, 1), but got ${t}.`)),0===t)return e instanceof iae?o.clone():o;const a=function(e,t){if(null==t)return e.shape.slice();if(toe(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(o,n),i=1-t,s=fle(Ble(sse(Yue(a,0,1,"float32",r),i)),i);return Ose(o,s)}});function nde(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function rde(e,t,n){const r=1-e%2,o=new Float32Array(e);for(let a=0;a<e;++a){const i=2*Math.PI*a/(e+r-1);o[a]=t-n*Math.cos(i)}return Rce(o,"float32")}const ode=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=$ae(e,"predictions","inTopK"),o=$ae(t,"targets","inTopK");Jre(r.rank>1,(()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`)),Jre(r.rank-1===o.rank,(()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${o.rank}`)),Yre(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=r.shape[r.shape.length-1];Jre(n>0&&n<=a,(()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${n}`));const i=await r.data(),s=await o.data(),[l,u]=[i.length/a,a],c=function(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error(`Unknown data type ${e}`);n=new Uint8Array(t)}return n}("bool",l);for(let d=0;d<l;d++){const e=d*u,t=i.subarray(e,e+u),r=[];for(let n=0;n<t.length;n++)r.push({value:t[n],index:n});r.sort(((e,t)=>t.value-e.value)),c[d]=0;for(let o=0;o<n;o++)if(r[o].index===s[d]){c[d]=1;break}}return e!==r&&r.dispose(),t!==o&&o.dispose(),Dae(c,o.shape,"bool")};const ade=Oae({conv2DBackpropFilter_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Nse(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=Nse(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Jre(4===s.rank,(()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`)),Jre(4===l.rank,(()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`)),Jre(4===n.length,(()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`));const u="NHWC"===a?s.shape[3]:s.shape[1],c="NHWC"===a?l.shape[3]:l.shape[1];Jre(u===n[2],(()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`)),Jre(c===n[3],(()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`)),Ese("conv2dDerFilter",o,i);const d={x:s,dy:l},h={strides:r,pad:o,dataFormat:a,dimRoundingMode:i,filterShape:n};return kae.runKernel("Conv2DBackpropFilter",d,h)}});function ide(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Ose(e,Tce(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function sde(e,t){let n=t;const r=function(e,t){const n=[];for(let r=0;r<t.length;r++){const o=e[e.length-r-1],a=t.length-r-1,i=t[a];(null==o||1===o&&i>1)&&n.unshift(a)}return n}(e.shape,t.shape);return r.length>0&&(n=Ole(n,r)),Nse(n,e.shape)}function lde(e,t,n,r){if("linear"===t)return e;if("relu"===t)return tce(e);if("elu"===t)return kle(e);if("relu6"===t)return nce(e);if("prelu"===t)return Bue(e,n);if("leakyrelu"===t)return qle(e,r);if("sigmoid"===t)return Rse(e);throw new Error(`Unknown fused activation ${t}.`)}const ude=(e,t)=>!(e>0)||"linear"===t;const cde=Oae({fusedConv2d_:function(e){let{x:t,filter:n,strides:r,pad:o,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:l,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:d}=e;if(u=u||"linear",!1===ude(kae.state.gradientDepth,u)){Jre("NHWC"===a,(()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`));let e=Yse(t,n,r,o,a,i,s);return null!=l&&(e=sse(e,l)),lde(e,u,c,d)}const h=$ae(t,"x","conv2d","float32"),p=$ae(n,"filter","conv2d","float32");let f=h,m=!1;3===h.rank&&(m=!0,f=Nse(h,[1,h.shape[0],h.shape[1],h.shape[2]])),Jre(4===f.rank,(()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`)),Jre(4===p.rank,(()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`)),Ese("fused conv2d",o,s);const g="NHWC"===a?f.shape[3]:f.shape[1];Jre(p.shape[2]===g,(()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${p.shape[2]}.`)),Jre(Sse(r,i),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${r} and dilations '${i}'`));const v=bse(f.shape,p.shape,r,i,o,s);let b,y;if(null!=l&&(b=$ae(l,"bias","fused conv2d"),[b]=mae(b,h),"NHWC"===a?mle(v.outShape,b.shape):(Jre(b.shape.length<=1,(()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`)),Jre(0===b.shape.length||b.shape[0]===v.outChannels||1===b.shape[0],(()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${v.outChannels})`)))),null!=c){const e=c.shape;if(Jre(e.length<=1||3===e.length,(()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${e.length}.`)),1===e.length)Jre(1===e[0]||e[0]===v.outChannels,(()=>`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the number of output channels (${v.outChannels}).`));else if(3===e.length)try{mle(e,v.outShape)}catch(kbe){const n=`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(n)}y=$ae(c,"prelu weights","fused conv2d")}const w=(e,t)=>{Jre("NHWC"===a,(()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`));const[n,s,l,c]=t,d=ide(e,l,u);Jre(Cse(i),(()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`));const h=[Zse(s.shape,d,n,r,o),ade(s,d,n.shape,r,o)];if(null!=c){const e=sde(c,d);h.push(e)}return h},x={x:f,filter:p,bias:b,preluActivationWeights:y},k={strides:r,pad:o,dataFormat:a,dilations:i,dimRoundingMode:s,activation:u,leakyreluAlpha:d};if(null==l){const e=tue(((e,t,n)=>{let r=kae.runKernel(Poe,x,k);return n([t,e,r]),m&&(r=Nse(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:w}}));return e(f,p)}{const e=tue(((e,t,n,r)=>{let o=kae.runKernel(Poe,x,k);return r([t,e,o,n]),m&&(o=Nse(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:w}}));return e(f,p,b)}}});const dde=Oae({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Nse(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=Nse(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={x:s,dy:l},c={strides:r,pad:o,dimRoundingMode:i,dilations:a,filterShape:n};return kae.runKernel("DepthwiseConv2dNativeBackpropFilter",u,c)}});const hde=Oae({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=t,l=!1;3===t.rank&&(l=!0,s=Nse(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={dy:s,filter:n},c={strides:r,pad:o,dimRoundingMode:i,dilations:a,inputShape:e},d=kae.runKernel("DepthwiseConv2dNativeBackpropInput",u,c);return l?Nse(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});const pde=Oae({fusedDepthwiseConv2d_:function(e){let{x:t,filter:n,strides:r,pad:o,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:l,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:d}=e;if(!1===ude(kae.state.gradientDepth,u)){let e=cle(t,n,r,o,a,i,s);return null!=l&&(e=sse(e,l)),lde(e,u,c,d)}const h=$ae(t,"x","depthwiseConv2d","float32"),p=$ae(n,"filter","depthwiseConv2d","float32");let f=h,m=!1;3===h.rank&&(m=!0,f=Nse(h,[1,h.shape[0],h.shape[1],h.shape[2]])),Jre(4===f.rank,(()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`)),Jre(4===p.rank,(()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`)),Jre(f.shape[3]===p.shape[2],(()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`)),null==i&&(i=[1,1]),Jre(Sse(r,i),(()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${r} and dilations '${i}'`)),Ese("fused depthwiseConv2d",o,s);const g=bse(f.shape,p.shape,r,i,o,s,!0);let v,b;null!=l&&(v=$ae(l,"bias","fused conv2d"),[v]=mae(v,h),mle(g.outShape,v.shape)),null!=c&&(b=$ae(c,"prelu weights","fused depthwiseConv2d"));const y=(e,t)=>{Jre(Cse(i),(()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`));const[n,a,l,c]=t,d=ide(e,l,u),h=hde(a.shape,d,n,r,o,i,s),p=dde(a,d,n.shape,r,o,i,s);if(null!=c){return[h,p,sde(v,d)]}return[h,p]},w={x:f,filter:p,bias:v,preluActivationWeights:b},x={strides:r,pad:o,dataFormat:a,dilations:i,dimRoundingMode:s,activation:u,leakyreluAlpha:d};if(null==l){const e=tue(((e,t,n)=>{let r=kae.runKernel(Doe,w,x);return n([t,e,r]),m&&(r=Nse(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:y}}));return e(f,p)}{const e=tue(((e,t,n,r)=>{let o=kae.runKernel(Doe,w,x);return r([t,e,o,n]),m&&(o=Nse(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:y}}));return e(f,p,v)}}});const fde=Oae({fusedMatMul_:function(e){let{a:t,b:n,transposeA:r=!1,transposeB:o=!1,bias:a,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:l=.2}=e;if(!1===ude(kae.state.gradientDepth,i)){let e=Ase(t,n,r,o);return null!=a&&(e=sse(e,a)),lde(e,i,s,l)}let u=$ae(t,"a","fused matMul"),c=$ae(n,"b","fused matMul");[u,c]=mae(u,c);const d=r?u.shape[u.rank-2]:u.shape[u.rank-1],h=o?c.shape[c.rank-1]:c.shape[c.rank-2],p=r?u.shape[u.rank-1]:u.shape[u.rank-2],f=o?c.shape[c.rank-2]:c.shape[c.rank-1],m=u.shape.slice(0,-2),g=c.shape.slice(0,-2),v=eoe(m),b=eoe(g);Jre(d===h,(()=>`Error in fused matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${u.shape} and ${c.shape} and transposeA=${r} and transposeB=${o} must match.`));const y=mle(u.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,f]),w=Nse(u,r?[v,d,p]:[v,p,d]),x=Nse(c,o?[b,f,h]:[b,h,f]);let k,C;null!=a&&(k=$ae(a,"bias","fused matMul"),[k]=mae(k,u),mle(y,k.shape)),null!=s&&(C=$ae(s,"prelu weights","fused matMul"));const S=(e,t)=>{const[n,s,l,u]=t,c=ide(Nse(e,l.shape),l,i);let d,h;if(r||o?!r&&o?(d=Ase(c,s,!1,!1),h=Ase(c,n,!0,!1)):r&&!o?(d=Ase(s,c,!1,!0),h=Ase(n,c,!1,!1)):(d=Ase(s,c,!0,!0),h=Ase(c,n,!0,!0)):(d=Ase(c,s,!1,!0),h=Ase(n,c,!0,!1)),null!=a){return[d,h,sde(u,c)]}return[d,h]},E={a:w,b:x,bias:k,preluActivationWeights:C},N={transposeA:r,transposeB:o,activation:i,leakyreluAlpha:l};if(null==a){const e=tue(((e,t,n)=>{const r=kae.runKernel(Roe,E,N);return n([e,t,r]),{value:Nse(r,y),gradFunc:S}}));return e(w,x)}{const e=tue(((e,t,n,r)=>{const o=kae.runKernel(Roe,E,N);return r([e,t,o,n]),{value:Nse(o,y),gradFunc:S}}));return e(w,x,k)}}});const mde=Oae({hammingWindow_:function(e){return rde(e,.54,.46)}});const gde=Oae({hannWindow_:function(e){return rde(e,.5,.5)}});const vde=Oae({frame_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=0;const i=[];for(;a+t<=e.size;)i.push(Pse(e,a,t)),a+=n;if(r)for(;a<e.size;){const r=a+t-e.size,s=Tse([Pse(e,a,t-r),Gse([r],o)]);i.push(s),a+=n}return 0===i.length?Pce([],[0,t]):Nse(Tse(i),[i.length,t])}});const bde=Oae({stft_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:gde;null==r&&(r=nde(t));const a=vde(e,t,n),i=Ose(a,o(t));return Ece(i,r)}});const yde=Oae({cropAndResize_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=$ae(e,"image","cropAndResize"),s=$ae(t,"boxes","cropAndResize","float32"),l=$ae(n,"boxInd","cropAndResize","int32"),u=s.shape[0];Jre(4===i.rank,(()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`)),Jre(2===s.rank&&4===s.shape[1],(()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${s.shape}.`)),Jre(1===l.rank&&l.shape[0]===u,(()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${s.shape}.`)),Jre(2===r.length,(()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`)),Jre(r[0]>=1&&r[1]>=1,(()=>`cropSize must be atleast [1,1], but was ${r}`)),Jre("bilinear"===o||"nearest"===o,(()=>`method must be bilinear or nearest, but was ${o}`));const c={image:i,boxes:s,boxInd:l},d={method:o,extrapolationValue:a,cropSize:r};return kae.runKernel("CropAndResize",c,d)}});const wde=Oae({flipLeftRight_:function(e){const t=$ae(e,"image","flipLeftRight","float32");Jre(4===t.rank,(()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`));const n={image:t};return kae.runKernel("FlipLeftRight",n,{})}});const xde=Oae({grayscaleToRGB_:function(e){const t=$ae(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];Jre(t.rank>=2,(()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`)),Jre(1===r,(()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`));const o=new Array(t.rank);return o.fill(1,0,n),o[n]=3,zle(t,o)}});const kde=Oae({rotateWithOffset_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const o=$ae(e,"image","rotateWithOffset","float32");Jre(4===o.rank,(()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`));const a={image:o},i={radians:t,fillValue:n,center:r};return kae.runKernel("RotateWithOffset",a,i)}});function Cde(e,t,n,r,o,a){null==r&&(r=.5),null==o&&(o=Number.NEGATIVE_INFINITY),null==a&&(a=0);const i=e.shape[0];return n=Math.min(n,i),Jre(0<=r&&r<=1,(()=>`iouThreshold must be in [0, 1], but was '${r}'`)),Jre(2===e.rank,(()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`)),Jre(4===e.shape[1],(()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`)),Jre(1===t.rank,(()=>"scores must be a 1D tensor")),Jre(t.shape[0]===i,(()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${t.shape[0]}`)),Jre(0<=a&&a<=1,(()=>`softNmsSigma must be in [0, 1], but was '${a}'`)),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:a}}const Sde=Oae({nonMaxSuppression_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const a=$ae(e,"boxes","nonMaxSuppression","float32"),i=$ae(t,"scores","nonMaxSuppression","float32"),s=Cde(a,i,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return kae.runKernel("NonMaxSuppressionV3",{boxes:a,scores:i},l)}});function Ede(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,o=e.length,a=0,i=!1;for(;r<o;){a=r+(o-r>>>1);const s=n(t,e[a]);s>0?r=a+1:(o=a,i=!s)}return i?r:-r-1}(e,t,n||Nde)}(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function Nde(e,t){return e>t?1:e<t?-1:0}function Ide(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const u=[];for(let g=0;g<t.length;g++)t[g]>o&&u.push({score:t[g],boxIndex:g,suppressBeginIndex:0});u.sort(Ade);const c=a>0?-.5/a:0,d=[],h=[];for(;d.length<n&&u.length>0;){const t=u.pop(),{score:n,boxIndex:a,suppressBeginIndex:i}=t;if(n<o)break;let s=!1;for(let l=d.length-1;l>=i;--l){const n=$de(e,a,d[l]);if(n>=r){s=!0;break}if(t.score=t.score*Tde(r,c,n),t.score<=o)break}t.suppressBeginIndex=d.length,s||(t.score===n?(d.push(a),h.push(t.score)):t.score>o&&Ede(u,t,Ade))}const p=d.length,f=n-p;s&&f>0&&(d.push(...new Array(f).fill(0)),h.push(...new Array(f).fill(0)));const m={selectedIndices:d};return i&&(m.selectedScores=h),l&&(m.validOutputs=p),m}function $de(e,t,n){const r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),h=Math.max(o[1],o[3]),p=(s-a)*(l-i),f=(d-u)*(h-c);if(p<=0||f<=0)return 0;const m=Math.max(a,u),g=Math.max(i,c),v=Math.min(s,d),b=Math.min(l,h),y=Math.max(v-m,0)*Math.max(b-g,0);return y/(p+f-y)}function Tde(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function Ade(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const Ode=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const a=$ae(e,"boxes","nonMaxSuppressionAsync"),i=$ae(t,"scores","nonMaxSuppressionAsync"),s=Cde(a,i,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;const l=await Promise.all([a.data(),i.data()]),u=l[0],c=l[1],{selectedIndices:d}=function(e,t,n,r,o){return Ide(e,t,n,r,o,0)}(u,c,n,r,o);return a!==e&&a.dispose(),i!==t&&i.dispose(),Rce(d,"int32")};const Rde=Oae({nonMaxSuppressionWithScore_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=$ae(e,"boxes","nonMaxSuppression"),s=$ae(t,"scores","nonMaxSuppression"),l=Cde(i,s,n,r,o,a);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,a=l.softNmsSigma;const u={boxes:i,scores:s},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:a},d=kae.runKernel("NonMaxSuppressionV5",u,c);return{selectedIndices:d[0],selectedScores:d[1]}}});const Pde=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=$ae(e,"boxes","nonMaxSuppressionAsync"),s=$ae(t,"scores","nonMaxSuppressionAsync"),l=Cde(i,s,n,r,o,a);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,a=l.softNmsSigma;const u=await Promise.all([i.data(),s.data()]),c=u[0],d=u[1],{selectedIndices:h,selectedScores:p}=function(e,t,n,r,o,a){return Ide(e,t,n,r,o,a,!0)}(c,d,n,r,o,a);return i!==e&&i.dispose(),s!==t&&s.dispose(),{selectedIndices:Rce(h,"int32"),selectedScores:Rce(p)}};const Dde=Oae({nonMaxSuppressionPadded_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=$ae(e,"boxes","nonMaxSuppression"),s=$ae(t,"scores","nonMaxSuppression"),l=Cde(i,s,n,r,o,null),u={boxes:i,scores:s},c={maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:a},d=kae.runKernel("NonMaxSuppressionV4",u,c);return{selectedIndices:d[0],validOutputs:d[1]}}});const Fde=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=$ae(e,"boxes","nonMaxSuppressionAsync"),s=$ae(t,"scores","nonMaxSuppressionAsync"),l=Cde(i,s,n,r,o,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[h,p]=await Promise.all([i.data(),s.data()]),{selectedIndices:f,validOutputs:m}=function(e,t,n,r,o,a){return Ide(e,t,n,r,o,0,!1,a,!0)}(h,p,u,c,d,a);return i!==e&&i.dispose(),s!==t&&s.dispose(),{selectedIndices:Rce(f,"int32"),validOutputs:$le(m,"int32")}};const _de=Oae({resizeBilinear_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=$ae(e,"images","resizeBilinear");Jre(3===o.rank||4===o.rank,(()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`)),Jre(2===t.length,(()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`)),Jre(!1===r||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let a=o,i=!1;3===o.rank&&(i=!0,a=Nse(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const[]=t,s={images:a},l={alignCorners:n,halfPixelCenters:r,size:t},u=kae.runKernel("ResizeBilinear",s,l);return i?Nse(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const Mde=Oae({resizeNearestNeighbor_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=$ae(e,"images","resizeNearestNeighbor");Jre(3===o.rank||4===o.rank,(()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`)),Jre(2===t.length,(()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`)),Jre("float32"===o.dtype||"int32"===o.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),Jre(!1===r||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let a=o,i=!1;3===o.rank&&(i=!0,a=Nse(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const[]=t,s={images:a},l={alignCorners:n,halfPixelCenters:r,size:t},u=kae.runKernel("ResizeNearestNeighbor",s,l);return i?Nse(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const zde=Oae({threshold_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const o=$ae(e,"image","threshold"),a=o.shape[0]*o.shape[1];let i,s,l,u,c=Ose(Rce([r]),255);if(Jre(3===o.rank,(()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`)),Jre(3===o.shape[2]||1===o.shape[2],(()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`)),Jre("int32"===o.dtype||"float32"===o.dtype,(()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`)),Jre("otsu"===t||"binary"===t,(()=>`Method must be binary or otsu, but was ${t}`)),3===o.shape[2]){[i,s,l]=Sce(o,[1,1,1],-1);const e=Ose(i,.2989),t=Ose(s,.587),n=Ose(l,.114);u=sse(sse(e,t),n)}else u=e;if("otsu"===t){c=function(e,t){let n,r,o,a,i,s,l=Rce([-1]),u=Rce([0]),c=Rce([0]);for(let d=0;d<e.size-1;d++){n=Pse(e,0,d+1),r=Pse(e,d+1),i=fle(Ole(n),t),s=fle(Ole(r),t);const h=Ole(Ose(n,Que(0,n.size)));o=fle(h,Ole(n));const p=Gse(r.shape,n.size),f=sse(Que(0,r.size),p),m=Ose(r,f);a=fle(Ole(m),Ole(r));const g=aue(o,a),v=aue(o,a),b=Ose(i,s);c=Ose(Ose(b,g),v);const y=Hle(c,u);u=vle(y,c,u),l=vle(y,Rce([d]),l)}return l}(jse(Fie(lce(u),"int32"),Dae([]),256),a)}const d=n?Jle(u,c):Hle(u,c);return Fie(Ose(d,255),"int32")}});const Lde=Oae({transform_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0;const i=$ae(e,"image","transform","float32"),s=$ae(t,"transforms","transform","float32");Jre(4===i.rank,(()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`)),Jre(2===s.rank&&(s.shape[0]===i.shape[0]||1===s.shape[0])&&8===s.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),Jre(null==a||2===a.length,(()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`));const l={image:i,transforms:s},u={interpolation:n,fillMode:r,fillValue:o,outputShape:a};return kae.runKernel("Transform",l,u)}});const Bde=Oae({bandPart_:function(e,t,n){Jre(t%1===0,(()=>`bandPart(): numLower must be an integer, got ${t}.`)),Jre(n%1===0,(()=>`bandPart(): numUpper must be an integer, got ${n}.`));const r=$ae(e,"a","bandPart");Jre(r.rank>=2,(()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`));const o=r.shape,[a,i]=r.shape.slice(-2);if(!(t<=a))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${a}).`);if(!(n<=i))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`);t<0&&(t=a),n<0&&(n=i);const s=Nse(Que(0,a,1,"int32"),[-1,1]),l=Que(0,i,1,"int32"),u=aue(s,l),c=lue(Jle(u,$le(+t,"int32")),Vle(u,$le(-n,"int32"))),d=wue([a,i],r.dtype);return Nse($ce(Hce(Nse(r,[-1,a,i])).map((e=>vle(c,e,d)))),o)}});const jde=Oae({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,Jre(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)Jre(e[t].shape[0]===n,(()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`))}else t=!0,e=Sce(e,e.shape[0],0).map((e=>Ice(e,[0])));Jre(e.length<=e[0].shape[0],(()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`));const n=[],r=e;for(let o=0;o<e.length;++o)n.push(kae.tidy((()=>{let e=r[o];if(o>0)for(let t=0;t<o;++t){const r=Ose(Ole(Ose(n[t],e)),n[t]);e=aue(e,r)}return fle(e,Ple(e,"euclidean"))})));return t?$ce(n,0):n}});function Hde(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return kae.tidy((()=>{Jre(2===e.shape.length,(()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`));const n=e.shape[0],r=e.shape[1];let o=Lle(n),a=_ie(e);const i=Pce([[1]],[1,1]);let s=_ie(i);const l=n>=r?r:n;for(let e=0;e<l;++e){const t=a,l=s,u=o;[s,a,o]=kae.tidy((()=>{const t=Pse(a,[e,e],[n-e,1]),l=Ple(t),u=Pse(a,[e,e],[1,1]),c=vle(Hle(u,0),Pce([[-1]]),Pce([[1]])),d=aue(u,Ose(c,l)),h=fle(t,d);s=1===h.shape[0]?_ie(i):Tse([i,Pse(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);const p=nue(fle(Ase(c,d),l)),f=Pse(a,[e,0],[n-e,r]),m=Ose(p,s),g=Xce(s);if(0===e)a=aue(f,Ase(m,Ase(g,f)));else{const t=aue(f,Ase(m,Ase(g,f)));a=Tse([Pse(a,[0,0],[e,r]),t],0)}const v=Xce(m),b=Pse(o,[0,e],[n,o.shape[1]-e]);if(0===e)o=aue(b,Ase(Ase(b,s),v));else{const t=aue(b,Ase(Ase(b,s),v));o=Tse([Pse(o,[0,0],[n,e]),t],1)}return[s,a,o]})),gae([t,l,u]).forEach((e=>e.dispose()))}return!t&&n>r&&(o=Pse(o,[0,0],[n,r]),a=Pse(a,[0,0],[r,r])),[o,a]}))}const Vde=Oae({qr_:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Jre(e.rank>=2,(()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`)),2===e.rank)return Hde(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),r=Hce(Nse(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],a=[];r.forEach((e=>{const[n,r]=Hde(e,t);o.push(n),a.push(r)}));return[Nse($ce(o,0),e.shape),Nse($ce(a,0),e.shape)]}}});var Wde;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Wde||(Wde={}));const Gde=Oae({computeWeightedLoss_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wde.SUM_BY_NONZERO_WEIGHTS;const r=$ae(e,"losses","computeWeightedLoss");let o=null;null!=t&&(o=$ae(t,"weights","computeWeightedLoss"));const a=null==o?r:Ose(r,o);if(n===Wde.NONE)return a;if(n===Wde.SUM)return Ole(a);if(n===Wde.MEAN){if(null==o)return yue(a);{const e=r.size/o.size,t=fle(Ole(a),Ole(o));return e>1?fle(t,$le(e)):t}}if(n===Wde.SUM_BY_NONZERO_WEIGHTS){if(null==o)return fle(Ole(a),$le(r.size));{const e=Ose(o,xue(r.shape)),t=Fie(Ole(Tue(e,$le(0))),"float32");return fle(Ole(a),t)}}throw Error(`Unknown reduction: ${n}`)}});const Ude=Oae({absoluteDifference_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Wde.SUM_BY_NONZERO_WEIGHTS;const o=$ae(e,"labels","absoluteDifference"),a=$ae(t,"predictions","absoluteDifference");let i=null;null!=n&&(i=$ae(n,"weights","absoluteDifference")),Yre(o.shape,a.shape,"Error in absoluteDifference: ");const s=ose(aue(o,a));return Gde(s,i,r)}});const Kde=Oae({cosineDistance_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Wde.SUM_BY_NONZERO_WEIGHTS;const a=$ae(e,"labels","cosineDistance"),i=$ae(t,"predictions","cosineDistance");let s=null;null!=r&&(s=$ae(r,"weights","cosineDistance")),Yre(a.shape,i.shape,"Error in cosineDistance: ");const l=$le(1),u=aue(l,Ole(Ose(a,i),n,!0));return Gde(u,s,o)}});const qde=Oae({hingeLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Wde.SUM_BY_NONZERO_WEIGHTS,o=$ae(e,"labels","hingeLoss");const a=$ae(t,"predictions","hingeLoss");let i=null;null!=n&&(i=$ae(n,"weights","hingeLoss")),Yre(o.shape,a.shape,"Error in hingeLoss: ");const s=$le(1);o=aue(Ose($le(2),o),s);const l=tce(aue(s,Ose(o,a)));return Gde(l,i,r)}});const Xde=Oae({huberLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Wde.SUM_BY_NONZERO_WEIGHTS;const a=$ae(e,"labels","huberLoss"),i=$ae(t,"predictions","huberLoss");let s=null;null!=n&&(s=$ae(n,"weights","huberLoss")),Yre(a.shape,i.shape,"Error in huberLoss: ");const l=$le(r),u=ose(aue(i,a)),c=Cue(u,l),d=aue(u,c),h=sse(Ose($le(.5),Ale(c)),Ose(l,d));return Gde(h,s,o)}});const Jde=Oae({logLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Wde.SUM_BY_NONZERO_WEIGHTS;const a=$ae(e,"labels","logLoss"),i=$ae(t,"predictions","logLoss");let s=null;null!=n&&(s=$ae(n,"weights","logLoss")),Yre(a.shape,i.shape,"Error in logLoss: ");const l=$le(1),u=$le(r),c=nue(Ose(a,Zle(sse(i,u)))),d=Ose(aue(l,a),Zle(sse(aue(l,i),u))),h=aue(c,d);return Gde(h,s,o)}});const Yde=Oae({meanSquaredError_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Wde.SUM_BY_NONZERO_WEIGHTS;const o=$ae(e,"labels","meanSquaredError"),a=$ae(t,"predictions","meanSquaredError");let i=null;null!=n&&(i=$ae(n,"weights","meanSquaredError")),Yre(o.shape,a.shape,"Error in meanSquaredError: ");const s=Nce(o,a);return Gde(s,i,r)}});const Qde=Oae({sigmoidCrossEntropy_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Wde.SUM_BY_NONZERO_WEIGHTS,a=$ae(e,"multiClassLabels","sigmoidCrossEntropy");const i=$ae(t,"logits","sigmoidCrossEntropy");let s=null;if(null!=n&&(s=$ae(n,"weights","sigmoidCrossEntropy")),Yre(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){const e=$le(r),t=$le(1),n=$le(.5);a=sse(Ose(a,aue(t,e)),Ose(n,e))}const l=function(e,t){const n=$ae(e,"labels","sigmoidCrossEntropyWithLogits"),r=$ae(t,"logits","sigmoidCrossEntropyWithLogits");Yre(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const o=tce(r),a=Ose(r,n),i=eue(Fle(nue(ose(r))));return sse(aue(o,a),i)}(a,i);return Gde(l,s,o)}});const Zde=Oae({softmaxCrossEntropy_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Wde.SUM_BY_NONZERO_WEIGHTS,a=$ae(e,"onehotLabels","softmaxCrossEntropy");const i=$ae(t,"logits","softmaxCrossEntropy");let s=null;if(null!=n&&(s=$ae(n,"weights","softmaxCrossEntropy")),Yre(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){const e=$le(r),t=$le(1),n=$le(a.shape[1]);a=sse(Ose(a,aue(t,e)),fle(e,n))}const l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);const r=tue(((e,t,r)=>{const o=sue(t,[n],!0),a=aue(Fie(t,"float32"),o);r([e,a]);const i=nue(Ose(a,e));return{value:Ole(i,[n]),gradFunc:(e,t)=>{const[r,o]=t,a=Sle(e.shape,[n]);return[Ose(Nse(e,a),aue(Fie(r,"float32"),Fle(o))),Ose(Nse(e,a),aue(Fle(o),Fie(r,"float32")))]}}}));return r(e,t)}(a,i);return Gde(l,s,o)}});const ehe=Oae({sparseFillEmptyRows_:function(e,t,n,r){const o=$ae(e,"indices","sparseFillEmptyRows","int32"),a=$ae(t,"values","sparseFillEmptyRows"),i=$ae(n,"denseShape","sparseFillEmptyRows","int32"),s=$ae(r,"defaultValue","sparseFillEmptyRows",a.dtype);if(2!==o.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${o.shape}`);if(1!==a.rank)throw new Error(`Values should be Tensor1D but received shape ${a.shape}`);if(1!==i.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(0!==s.rank)throw new Error(`Default value should be a scalar but received shape ${s.shape}`);const l={indices:o,values:a,denseShape:i,defaultValue:s},u=kae.runKernel("SparseFillEmptyRows",l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}});const the=Oae({sparseReshape_:function(e,t,n){const r=$ae(e,"inputIndices","sparseReshape","int32"),o=$ae(t,"inputShape","sparseReshape","int32"),a=$ae(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${r.shape}`);if(1!==o.rank)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(1!==a.rank)throw new Error(`New shape should be Tensor1D but received shape ${a.shape}`);const i={inputIndices:r,inputShape:o,newShape:a},s=kae.runKernel("SparseReshape",i);return{outputIndices:s[0],outputShape:s[1]}}});const nhe=Oae({sparseSegmentMean_:function(e,t,n){const r=$ae(e,"data","sparseSegmentMean"),o=$ae(t,"indices","sparseSegmentMean","int32"),a=$ae(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${o.shape}`);if(1!==a.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${a.shape}`);const i={data:r,indices:o,segmentIds:a};return kae.runKernel("SparseSegmentMean",i)}});const rhe=Oae({sparseSegmentSum_:function(e,t,n){const r=$ae(e,"data","sparseSegmentSum"),o=$ae(t,"indices","sparseSegmentSum","int32"),a=$ae(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${o.shape}`);if(1!==a.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${a.shape}`);const i={data:r,indices:o,segmentIds:a};return kae.runKernel("SparseSegmentSum",i)}});const ohe=Oae({stringNGrams_:function(e,t,n,r,o,a,i,s){const l=$ae(e,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=$ae(t,"dataSplits","stringNGrams");if("int32"!==u.dtype)throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:o,rightPad:a,padWidth:i,preserveShortSequences:s},d={data:l,dataSplits:u},h=kae.runKernel("StringNGrams",d,c);return{nGrams:h[0],nGramsSplits:h[1]}}});const ahe=Oae({stringSplit_:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=$ae(e,"input","stringSplit","string"),o=$ae(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(0!==o.rank)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);const a={skipEmpty:n},i={input:r,delimiter:o},s=kae.runKernel("StringSplit",i,a);return{indices:s[0],values:s[1],shape:s[2]}}});const ihe=Oae({stringToHashBucketFast_:function(e,t){const n=$ae(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const o={input:n};return kae.runKernel("StringToHashBucketFast",o,r)}}),she={fft:xce,ifft:kce,rfft:Ece,irfft:Cce},lhe={hammingWindow:mde,hannWindow:gde,frame:vde,stft:bde},uhe={flipLeftRight:wde,grayscaleToRGB:xde,resizeNearestNeighbor:Mde,resizeBilinear:_de,rotateWithOffset:kde,cropAndResize:yde,nonMaxSuppression:Sde,nonMaxSuppressionAsync:Ode,nonMaxSuppressionWithScore:Rde,nonMaxSuppressionWithScoreAsync:Pde,nonMaxSuppressionPadded:Dde,nonMaxSuppressionPaddedAsync:Fde,threshold:zde,transform:Lde},che={bandPart:Bde,gramSchmidt:jde,qr:Vde},dhe={absoluteDifference:Ude,computeWeightedLoss:Gde,cosineDistance:Kde,hingeLoss:qde,huberLoss:Xde,logLoss:Jde,meanSquaredError:Yde,sigmoidCrossEntropy:Qde,softmaxCrossEntropy:Zde},hhe={sparseFillEmptyRows:ehe,sparseReshape:the,sparseSegmentMean:nhe,sparseSegmentSum:rhe},phe={stringNGrams:ohe,stringSplit:ahe,stringToHashBucketFast:ihe};var fhe,mhe;woe().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(fhe||(fhe={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(mhe||(mhe={}));const ghe={};function vhe(e){return ghe[e]}function bhe(e,t,n,r,o){const a=t.inputParams[e];if(a&&void 0!==a.inputIndexStart){const e=a.inputIndexStart,i=0===a.inputIndexEnd?void 0:void 0===a.inputIndexEnd?e+1:a.inputIndexEnd;if("tensor"===a.type)return yhe(t.inputNames[a.inputIndexStart],n,r,o);if("tensors"===a.type){return t.inputNames.slice(e,i).map((e=>yhe(e,n,r,o)))}const s=yhe(t.inputNames.slice(e)[0],n,r,o),l=s.dataSync();return"number"===a.type?l[0]:hoe(s.shape,l)}const i=t.attrParams[e];return i&&i.value}function yhe(e,t,n,r){const[o,a]=khe(e);if(null!=r){const e=r.getHashTableHandleByName(o);if(null!=e)return e}const i=n.currentContextIds.find((e=>!!t[xhe(o,e)]));return void 0!==i?t[xhe(o,i)][a]:void 0}function whe(e,t){const[n,r,o]=khe(e);return[xhe(n,t&&t.currentContextId),r,o]}function xhe(e,t){return t?`${e}-${t}`:e}function khe(e){const t=e.split(":");if(1===t.length)return[e,0,void 0];const n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function Che(e,t,n){let r=bhe("pad",e,t,n);if("explicit"===r){r=bhe("explicitPaddings",e,t,n);const o=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)o[e][0]=r[2*e],o[e][1]=r[2*e+1];return o}return r}function She(e){return e.kept?e:_ie(e)}const Ehe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Nhe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Ihe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],$he=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],The=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Ahe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Ohe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Rhe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Phe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],Dhe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Fhe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],_he=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],Mhe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],zhe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Lhe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],Bhe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],jhe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Hhe=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Vhe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class Whe{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[s,l,u,c,d,h,p,f,m,g,v,b,y,w,x,k,C,S,E].map((e=>e.json)));this.opMappers=e.reduce(((e,t)=>(e[t.tfOpName]=t,e)),{})}transformGraph(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.node,r=[],o=[],a=[],i=n.reduce(((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?o.push(e[t.name]):null!=t.input&&0!==t.input.length||a.push(e[t.name]),e)),{});let s=[];const l=[];let u={},c={};null!=t&&(u=this.mapSignatureEntries(t.inputs),c=this.mapSignatureEntries(t.outputs));const d=Object.keys(i);d.forEach((e=>{const t=i[e];t.inputNames.forEach(((e,n)=>{const[r,,o]=whe(e),a=i[r];if(null!=a.outputs){const e=a.outputs.indexOf(o);if(-1!==e){const o=`${r}:${e}`;t.inputNames[n]=o}}t.inputs.push(a),a.children.push(t)}))})),0===Object.keys(c).length?d.forEach((e=>{const t=i[e];0===t.children.length&&l.push(t)})):Object.keys(c).forEach((e=>{const[t]=whe(e),n=i[t];null!=n&&(n.signatureKey=c[e],l.push(n))})),Object.keys(u).length>0?Object.keys(u).forEach((e=>{const[t]=whe(e),n=i[t];n&&(n.signatureKey=u[e],s.push(n))})):s=r;let h={};null!=e.library&&null!=e.library.function&&(h=e.library.function.reduce(((e,t)=>(e[t.signature.name]=this.mapFunction(t),e)),{}));const p={nodes:i,inputs:s,outputs:l,weights:o,placeholders:r,signature:t,functions:h};return a.length>0&&(p.initNodes=a),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce(((t,n)=>(t[e[n].name]=n,t)),{})}mapNode(e){const t=vhe(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((e=>e.startsWith("^")?e.slice(1):e)),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce(((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e)),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce(((t,n)=>{const r=n.type;let o;switch(n.type){case"string":o=Uhe(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=Uhe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":o=npe(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=npe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":o=qhe(e.attr,n.tfName,n.defaultValue||0),void 0===o&&n.tfDeprecatedName&&(o=qhe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":o=tpe(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=tpe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":o=Khe(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=Khe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":o=ope(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=ope(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":o=epe(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=epe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":o=rpe(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=rpe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":o=Yhe(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=Yhe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":o=Qhe(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=Qhe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":o=Jhe(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=Jhe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${e.op}`)}return t[n.name]={value:o,type:r},t}),{})),n}mapFunction(e){const t=e.nodeDef,n=[];let r={};null!=t&&(r=t.reduce(((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e)),{}));const o=[],a=[];e.signature.inputArg.forEach((e=>{const[t]=whe(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:Xhe(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,o.push(n),r[t]=n}));Object.keys(r).forEach((e=>{const t=r[e];t.inputNames.forEach(((e,n)=>{const[o,,a]=whe(e),i=r[o];if(null!=i.outputs){const e=i.outputs.indexOf(a);if(-1!==e){const r=`${o}:${e}`;t.inputNames[n]=r}}t.inputs.push(i),i.children.push(t)}))}));const i=e.ret;e.signature.outputArg.forEach((e=>{const[t,n]=whe(i[e.name]),o=r[t];null!=o&&(o.defaultOutput=n,a.push(o))}));const s=this.mapArgsToSignature(e);return{nodes:r,inputs:o,outputs:a,weights:n,placeholders:[],signature:s}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce(((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e)),{}),outputs:e.signature.outputArg.reduce(((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t)),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function Ghe(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const t=woe().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function Uhe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=e[t];return null!=o?Ghe(o.s,r):n}function Khe(e,t,n){const r=e[t];return r?r.b:n}function qhe(e,t,n){const r=e[t]||{},o=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof o?o:parseInt(o,10)}function Xhe(e){switch("string"===typeof e&&(e=fhe[e]),e){case fhe.DT_FLOAT:case fhe.DT_HALF:return"float32";case fhe.DT_INT32:case fhe.DT_INT64:case fhe.DT_INT8:case fhe.DT_UINT8:return"int32";case fhe.DT_BOOL:return"bool";case fhe.DT_DOUBLE:return"float32";case fhe.DT_STRING:return"string";default:return null}}function Jhe(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function Yhe(e,t,n){const r=e[t];return r&&r.type?Xhe(r.type):n}function Qhe(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map((e=>Xhe(e))):n}function Zhe(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((e=>"number"===typeof e.size?e.size:parseInt(e.size,10))):[]}function epe(e,t,n){const r=e[t];return r&&r.shape?Zhe(r.shape):n}function tpe(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((e=>"number"===typeof e?e:parseInt(e,10))):n}function npe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=e[t];return o&&o.list&&o.list.s?o.list.s.map((e=>Ghe(e,r))):n}function rpe(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((e=>Zhe(e))):n}function ope(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}class ape{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((e=>this.getInput(e))),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce(((e,t)=>(e[t]=this.getAttr(t),e)),{}))}getInput(e){return yhe(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return yhe(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return qhe(this.node.rawAttrs,e,t);if(null!=n.s)return Uhe(this.node.rawAttrs,e,t);if(null!=n.b)return Khe(this.node.rawAttrs,e,t);if(null!=n.shape)return epe(this.node.rawAttrs,e,t);if(null!=n.type)return Yhe(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return tpe(this.node.rawAttrs,e,t);if(null!=n.list.s)return npe(this.node.rawAttrs,e,t);if(null!=n.list.shape)return rpe(this.node.rawAttrs,e,t);if(null!=n.list.b)return ope(this.node.rawAttrs,e,t);if(null!=n.list.type)return Qhe(this.node.rawAttrs,e,t)}return t}}function ipe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){Jre(e.length===t.length,(()=>n+` Shapes ${e} and ${t} must match`));for(let r=0;r<e.length;r++){const o=e[r],a=t[r];Jre(o<0||a<0||o===a,(()=>n+` Shapes ${e} and ${t} must match`))}}}function spe(e){return"number"!==typeof e&&!e.some((e=>e<0))}function lpe(e,t,n){let r=upe(e,n);const o=!spe(r);if(o&&0===t.length)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(o&&t.forEach((e=>{r=upe(e.shape,r)})),!spe(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function upe(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const n=[];for(let r=0;r<e.length;++r){const o=e[r],a=t[r];if(o>=0&&a>=0&&o!==a)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=o>=0?o:a}return n}class cpe{constructor(e,t,n,r,o,a,i){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=o,this.dynamicSize=a,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=$le(0),qce(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map((e=>this.read(e)))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},\n          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),ipe(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,qce(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach(((e,n)=>this.write(e,t[n])))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return Dae([],[0].concat(this.elementShape));const n=this.readMany(e);return ipe(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),$ce(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return Dae([],[0].concat(this.elementShape));const t=[];for(let r=0;r<this.size();r++)t.push(r);const n=this.readMany(t);return ipe(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),Tse(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,Hce(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0;const r=e.map((e=>(n+=e,n)));if(n!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const o=0===n?0:t.size/n,a=[];Kce((()=>{t=Nse(t,[1,n,o]);for(let n=0;n<e.length;++n){const i=[0,0===n?0:r[n-1],0],s=[1,e[n],o];a[n]=Nse(Pse(t,i,s),this.elementShape)}return a}));const i=[];for(let s=0;s<e.length;s++)i[s]=s;this.writeMany(i,a)}}class dpe{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach((e=>{if(n!==e.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${e.dtype}`);ipe(t,e.shape,"TensorList shape mismatch: "),qce(e)})),this.idTensor=$le(0),this.maxNumElements=r,qce(this.idTensor)}get id(){return this.idTensor.id}copy(){return new dpe([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);ipe(e,this.elementShape,"TensorList shape mismatch: ");const r=lpe(this.elementShape,this.tensors,e);return Kce((()=>{const e=this.tensors.map((e=>Nse(e,r)));return $ce(e,0)}))}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=lpe(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,ipe(r.shape,e,"TensorList shape mismatch: "),Nse(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(ipe(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");qce(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const t=new dpe([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let n=0;n<Math.min(this.tensors.length,e);++n)t.tensors[n]=this.tensors[n];return t}getItem(e,t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);ipe(this.tensors[e].shape,t,"TensorList shape mismatch: ");const r=lpe(this.elementShape,this.tensors,t);return Nse(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);ipe(this.elementShape,t.shape,"TensorList shape mismatch: "),qce(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);ipe(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=lpe(this.elementShape,this.tensors,n);return 0===e.length?Dae([],[0].concat(r)):Kce((()=>{const t=e.map((e=>Nse(this.tensors[e],r)));return $ce(t,0)}))}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);ipe(this.elementShape,t,"TensorList shape mismatch: ");const n=lpe(this.elementShape,this.tensors,t);return 0===this.size()?Dae([],[0].concat(n)):Kce((()=>{const e=this.tensors.map((e=>Nse(e,n)));return Tse(e,0)}))}}const hpe=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=bhe("thenBranch",e,t,n),o=bhe("elseBranch",e,t,n),a=bhe("cond",e,t,n),i=bhe("args",e,t,n);return(await a.data())[0]?n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap):n.functionMap[o].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=bhe("body",e,t,n),o=bhe("cond",e,t,n),a=bhe("args",e,t,n),i=await n.functionMap[o].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap),s=a.map((e=>e.id));let l=await i[0].data();i.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||e.dispose()}));let u=a;for(;l[0];){const e=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const t=u.map((e=>e.id));e.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}));const a=await n.functionMap[o].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await a[0].data(),a.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}))}return u}case"LoopCond":return[She(bhe("pred",e,t,n))];case"Switch":{const r=bhe("pred",e,t,n);let o=bhe("data",e,t,n);return o.kept||(o=She(o)),(await r.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{const r=e.inputNames.find((e=>void 0!==yhe(e,t,n)));if(r){return[She(yhe(r,t,n))]}return}case"Enter":{const r=bhe("frameName",e,t,n),o=bhe("tensor",e,t,n);return n.enterFrame(r),[She(o)]}case"Exit":{const r=bhe("tensor",e,t,n);return n.exitFrame(),[She(r)]}case"NextIteration":{const r=bhe("tensor",e,t,n);return n.nextIteration(),[She(r)]}case"TensorArrayV3":{const r=bhe("size",e,t,n),o=bhe("dtype",e,t,n),a=bhe("elementShape",e,t,n),i=bhe("dynamicSize",e,t,n),s=bhe("clearAfterRead",e,t,n),l=bhe("identicalElementShapes",e,t,n),u=bhe("name",e,t,n),c=new cpe(u,o,r,a,l,i,s);return n.addTensorArray(c),[c.idTensor,$le(1)]}case"TensorArrayWriteV3":{const r=bhe("tensorArrayId",e,t,n),o=bhe("index",e,t,n),a=bhe("tensor",e,t,n),i=n.getTensorArray(r.id);return i.write(o,a),[i.idTensor]}case"TensorArrayReadV3":{const r=bhe("tensorArrayId",e,t,n),o=bhe("index",e,t,n);return[n.getTensorArray(r.id).read(o)]}case"TensorArrayGatherV3":{const r=bhe("tensorArrayId",e,t,n),o=bhe("indices",e,t,n),a=bhe("dtype",e,t,n);return[n.getTensorArray(r.id).gather(o,a)]}case"TensorArrayScatterV3":{const r=bhe("tensorArrayId",e,t,n),o=bhe("indices",e,t,n),a=bhe("tensor",e,t,n),i=n.getTensorArray(r.id);return i.scatter(o,a),[i.idTensor]}case"TensorArrayConcatV3":{const r=bhe("tensorArrayId",e,t,n),o=n.getTensorArray(r.id),a=bhe("dtype",e,t,n);return[o.concat(a)]}case"TensorArraySplitV3":{const r=bhe("tensorArrayId",e,t,n),o=bhe("tensor",e,t,n),a=bhe("lengths",e,t,n),i=n.getTensorArray(r.id);return i.split(a,o),[i.idTensor]}case"TensorArraySizeV3":{const r=bhe("tensorArrayId",e,t,n);return[$le(n.getTensorArray(r.id).size(),"int32")]}case"TensorArrayCloseV3":{const r=bhe("tensorArrayId",e,t,n),o=n.getTensorArray(r.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{const r=bhe("tensorListId",e,t,n),o=bhe("index",e,t,n),a=bhe("tensor",e,t,n),i=n.getTensorList(r.id);return i.setItem(o,a),[i.idTensor]}case"TensorListGetItem":{const r=bhe("tensorListId",e,t,n),o=bhe("index",e,t,n),a=bhe("elementShape",e,t,n),i=bhe("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(o,a,i)]}case"TensorListScatterV2":case"TensorListScatter":{const r=bhe("indices",e,t,n),o=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const o=Math.max(...t);if(null!=r&&-1!==r&&o>=r)throw new Error(`Max index must be < array size (${o}  vs. ${r})`);const a=new dpe([],n,e.dtype,r),i=Hce(e,0);return t.forEach(((e,t)=>{a.setItem(e,i[t])})),a}(bhe("tensor",e,t,n),r,bhe("elementShape",e,t,n),bhe("numElements",e,t,n));return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=bhe("elementShape",e,t,n),o=bhe("elementDType",e,t,n);let a;a="TensorListReserve"===e.op?"numElements":"maxNumElements";const i=bhe(a,e,t,n),s=function(e,t,n,r){return new dpe([],e,t,r)}(r,o,0,"TensorListReserve"===e.op?-1:i);return n.addTensorList(s),[s.idTensor]}case"TensorListGather":{const r=bhe("tensorListId",e,t,n),o=bhe("indices",e,t,n),a=bhe("elementShape",e,t,n),i=bhe("elementDType",e,t,n);return[n.getTensorList(r.id).gather(o,i,a)]}case"TensorListStack":{const r=bhe("tensorListId",e,t,n),o=bhe("elementShape",e,t,n),a=bhe("elementDType",e,t,n),i=bhe("numElements",e,t,n);return[n.getTensorList(r.id).stack(o,a,i)]}case"TensorListFromTensor":{const r=function(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);ipe(e.shape.slice(1),t,"TensorList shape mismatch: ");const o=Hce(e);return new dpe(o,t,r)}(bhe("tensor",e,t,n),bhe("elementShape",e,t,n),bhe("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=bhe("tensorListId",e,t,n),o=n.getTensorList(r.id),a=bhe("dtype",e,t,n),i=bhe("elementShape",e,t,n);return[o.concat(a,i)]}case"TensorListPushBack":{const r=bhe("tensorListId",e,t,n),o=bhe("tensor",e,t,n),a=n.getTensorList(r.id);return a.pushBack(o),[a.idTensor]}case"TensorListPopBack":{const r=bhe("tensorListId",e,t,n),o=bhe("elementShape",e,t,n),a=bhe("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(o,a)]}case"TensorListSplit":{const r=bhe("tensor",e,t,n),o=bhe("elementShape",e,t,n),a=function(e,t,n){let r=0;const o=t.map((e=>(r+=e,r)));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${e.shape}`);const a=upe(e.shape.slice(1),n),i=0===r?0:e.size/r,s=Kce((()=>{const n=[];e=Nse(e,[1,r,i]);for(let r=0;r<t.length;++r){const s=[0,0===r?0:o[r-1],0],l=[1,t[r],i];n[r]=Nse(Pse(e,s,l),a)}return e.dispose(),n})),l=new dpe([],n,e.dtype,t.length);for(let u=0;u<s.length;u++)l.setItem(u,s[u]);return l}(r,bhe("lengths",e,t,n),o);return n.addTensorList(a),[a.idTensor]}case"TensorListLength":{const r=bhe("tensorListId",e,t,n);return[$le(n.getTensorList(r.id).size(),"int32")]}case"TensorListResize":{const r=bhe("tensorListId",e,t,n),o=bhe("size",e,t,n),a=n.getTensorList(r.id).resize(o);return n.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};function ppe(e,t,n){const[r,o]=bhe("fusedOps",e,t,n),a="biasadd"===r,i=!a,s="prelu"===o,l="fusedbatchnorm"===r,u=bhe("numArgs",e,t,n);if(a){if(s&&2!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&a&&1!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=bhe("strides",e,t,n),d=Che(e,t,n),h=bhe("dataFormat",e,t,n).toUpperCase(),p=bhe("dilations",e,t,n);let[f,m]=bhe("args",e,t,n);i&&(m=f,f=void 0);return{stride:c,pad:d,dataFormat:h,dilations:p,biasArg:f,preluArg:m,activationFunc:o,leakyreluAlpha:bhe("leakyreluAlpha",e,t,n)}}function fpe(e,t,n){return{boxes:bhe("boxes",e,t,n),scores:bhe("scores",e,t,n),maxOutputSize:bhe("maxOutputSize",e,t,n),iouThreshold:bhe("iouThreshold",e,t,n),scoreThreshold:bhe("scoreThreshold",e,t,n),softNmsSigma:bhe("softNmsSigma",e,t,n)}}class mpe{constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=$le(0),this.tensorMap=new Map,qce(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return $le(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),Kce((()=>{const e=Hce(t),r=n.length,o=e.length;Jre(r===o,(()=>`The number of elements doesn't match, keys has ${r} elements, the values has ${o} elements.`));for(let t=0;t<r;t++){const r=n[t],o=e[t];qce(o),this.tensorMap.set(r,o)}return this.handle}))}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return Kce((()=>{const e=[];for(let r=0;r<n.length;r++){const o=n[r],a=this.findWithDefault(o,t);e.push(a)}return $ce(e)}))}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}function gpe(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Kce;const a=((e,t,n)=>{switch(e.category){case"arithmetic":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(bhe("a",e,t,n),bhe("b",e,t,n))];case"AddN":return[r.addN(bhe("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(bhe("a",e,t,n),bhe("b",e,t,n))];case"Mul":return[r.mul(bhe("a",e,t,n),bhe("b",e,t,n))];case"RealDiv":case"Div":return[r.div(bhe("a",e,t,n),bhe("b",e,t,n))];case"DivNoNan":return[r.divNoNan(bhe("a",e,t,n),bhe("b",e,t,n))];case"FloorDiv":return[r.floorDiv(bhe("a",e,t,n),bhe("b",e,t,n))];case"Sub":return[r.sub(bhe("a",e,t,n),bhe("b",e,t,n))];case"Minimum":return[r.minimum(bhe("a",e,t,n),bhe("b",e,t,n))];case"Maximum":return[r.maximum(bhe("a",e,t,n),bhe("b",e,t,n))];case"Pow":return[r.pow(bhe("a",e,t,n),bhe("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(bhe("a",e,t,n),bhe("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"basic_math":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(bhe("x",e,t,n))];case"Acos":return[r.acos(bhe("x",e,t,n))];case"Acosh":return[r.acosh(bhe("x",e,t,n))];case"Asin":return[r.asin(bhe("x",e,t,n))];case"Asinh":return[r.asinh(bhe("x",e,t,n))];case"Atan":return[r.atan(bhe("x",e,t,n))];case"Atan2":return[r.atan2(bhe("x",e,t,n),bhe("y",e,t,n))];case"Atanh":return[r.atanh(bhe("x",e,t,n))];case"Ceil":return[r.ceil(bhe("x",e,t,n))];case"Complex":return[r.complex(bhe("real",e,t,n),bhe("imag",e,t,n))];case"Cos":return[r.cos(bhe("x",e,t,n))];case"Cosh":return[r.cosh(bhe("x",e,t,n))];case"Elu":return[r.elu(bhe("x",e,t,n))];case"Erf":return[r.erf(bhe("x",e,t,n))];case"Exp":return[r.exp(bhe("x",e,t,n))];case"Expm1":return[r.expm1(bhe("x",e,t,n))];case"Floor":return[r.floor(bhe("x",e,t,n))];case"Log":return[r.log(bhe("x",e,t,n))];case"Log1p":return[r.log1p(bhe("x",e,t,n))];case"Imag":return[r.imag(bhe("x",e,t,n))];case"Neg":return[r.neg(bhe("x",e,t,n))];case"Reciprocal":return[r.reciprocal(bhe("x",e,t,n))];case"Real":return[r.real(bhe("x",e,t,n))];case"Relu":return[r.relu(bhe("x",e,t,n))];case"Round":return[r.round(bhe("x",e,t,n))];case"Selu":return[r.selu(bhe("x",e,t,n))];case"Sigmoid":return[r.sigmoid(bhe("x",e,t,n))];case"Sin":return[r.sin(bhe("x",e,t,n))];case"Sign":return[r.sign(bhe("x",e,t,n))];case"Sinh":return[r.sinh(bhe("x",e,t,n))];case"Softplus":return[r.softplus(bhe("x",e,t,n))];case"Sqrt":return[r.sqrt(bhe("x",e,t,n))];case"Square":return[r.square(bhe("x",e,t,n))];case"Tanh":return[r.tanh(bhe("x",e,t,n))];case"Tan":return[r.tan(bhe("x",e,t,n))];case"ClipByValue":return[r.clipByValue(bhe("x",e,t,n),bhe("clipValueMin",e,t,n),bhe("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(bhe("x",e,t,n))];case"Rsqrt":return[r.rsqrt(yhe(e.inputNames[0],t,n))];case"Prod":return[r.prod(bhe("x",e,t,n),bhe("axes",e,t,n))];case"LeakyRelu":return[r.leakyRelu(bhe("x",e,t,n),bhe("alpha",e,t,n))];case"Prelu":return[r.prelu(bhe("x",e,t,n),bhe("alpha",e,t,n))];case"IsNan":return[r.isNaN(yhe(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"control":return hpe(e,t,n);case"convolution":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"Conv1D":{const o=bhe("stride",e,t,n),a=bhe("pad",e,t,n),i=bhe("dataFormat",e,t,n).toUpperCase(),s=bhe("dilation",e,t,n);return[r.conv1d(bhe("x",e,t,n),bhe("filter",e,t,n),o,a,i,s)]}case"Conv2D":{const o=bhe("strides",e,t,n),a=Che(e,t,n),i=bhe("dataFormat",e,t,n).toUpperCase(),s=bhe("dilations",e,t,n);return[r.conv2d(bhe("x",e,t,n),bhe("filter",e,t,n),[o[1],o[2]],a,i,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:o,pad:a,dataFormat:i,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=ppe(e,t,n);return[r.fused.conv2d({x:bhe("x",e,t,n),filter:bhe("filter",e,t,n),strides:[o[1],o[2]],pad:a,dataFormat:i,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:o,pad:a,dataFormat:i,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=ppe(e,t,n);return[r.fused.depthwiseConv2d({x:bhe("x",e,t,n),filter:bhe("filter",e,t,n),strides:[o[1],o[2]],pad:a,dataFormat:i,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const o=bhe("outputShape",e,t,n),a=bhe("strides",e,t,n),i=Che(e,t,n);return[r.conv2dTranspose(bhe("x",e,t,n),bhe("filter",e,t,n),o,[a[1],a[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const o=bhe("strides",e,t,n),a=Che(e,t,n),i=bhe("dilations",e,t,n),s=bhe("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(bhe("input",e,t,n),bhe("filter",e,t,n),[o[1],o[2]],a,s,[i[1],i[2]])]}case"Conv3D":{const o=bhe("strides",e,t,n),a=bhe("pad",e,t,n),i=bhe("dataFormat",e,t,n).toUpperCase(),s=bhe("dilations",e,t,n);return[r.conv3d(bhe("x",e,t,n),bhe("filter",e,t,n),[o[1],o[2],o[3]],a,i,[s[1],s[2],s[3]])]}case"AvgPool":{const o=bhe("strides",e,t,n),a=bhe("pad",e,t,n),i=bhe("kernelSize",e,t,n);return[r.avgPool(bhe("x",e,t,n),[i[1],i[2]],[o[1],o[2]],a)]}case"MaxPool":{const o=bhe("strides",e,t,n),a=bhe("pad",e,t,n),i=bhe("kernelSize",e,t,n);return[r.maxPool(bhe("x",e,t,n),[i[1],i[2]],[o[1],o[2]],a)]}case"MaxPoolWithArgmax":{const o=bhe("strides",e,t,n),a=bhe("pad",e,t,n),i=bhe("kernelSize",e,t,n),s=bhe("includeBatchInIndex",e,t,n),{result:l,indexes:u}=r.maxPoolWithArgmax(bhe("x",e,t,n),[i[1],i[2]],[o[1],o[2]],a,s);return[l,u]}case"AvgPool3D":{const o=bhe("strides",e,t,n),a=bhe("pad",e,t,n),i=bhe("kernelSize",e,t,n);return[r.avgPool3d(bhe("x",e,t,n),[i[1],i[2],i[3]],[o[1],o[2],o[3]],a)]}case"MaxPool3D":{const o=bhe("strides",e,t,n),a=bhe("pad",e,t,n),i=bhe("kernelSize",e,t,n);return[r.maxPool3d(bhe("x",e,t,n),[i[1],i[2],i[3]],[o[1],o[2],o[3]],a)]}case"Dilation2D":{const o=bhe("strides",e,t,n),a=bhe("pad",e,t,n),i=bhe("dilations",e,t,n),s=o[1],l=o[2],u=i[1],c=i[2];return[r.dilation2d(bhe("x",e,t,n),bhe("filter",e,t,n),[s,l],a,[u,c],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"creation":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"Fill":{const o=bhe("shape",e,t,n),a=bhe("dtype",e,t,n),i=bhe("value",e,t,n);return[r.fill(o,i,a)]}case"LinSpace":{const o=bhe("start",e,t,n),a=bhe("stop",e,t,n),i=bhe("num",e,t,n);return[r.linspace(o,a,i)]}case"Multinomial":{const o=bhe("logits",e,t,n),a=bhe("numSamples",e,t,n),i=bhe("seed",e,t,n);return[r.multinomial(o,a,i)]}case"OneHot":{const o=bhe("indices",e,t,n),a=bhe("depth",e,t,n),i=bhe("onValue",e,t,n),s=bhe("offValue",e,t,n),l=bhe("dtype",e,t,n);return[r.oneHot(o,a,i,s,l)]}case"Ones":return[r.ones(bhe("shape",e,t,n),bhe("dtype",e,t,n))];case"OnesLike":return[r.onesLike(bhe("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(bhe("shape",e,t,n),bhe("dtype",e,t,n),bhe("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(bhe("shape",e,t,n),bhe("minval",e,t,n),bhe("maxval",e,t,n),bhe("dtype",e,t,n))];case"Range":{const o=bhe("start",e,t,n),a=bhe("stop",e,t,n),i=bhe("step",e,t,n);return[r.range(o,a,i,bhe("dtype",e,t,n))]}case"TruncatedNormal":{const o=bhe("shape",e,t,n),a=bhe("mean",e,t,n),i=bhe("stdDev",e,t,n),s=bhe("seed",e,t,n);return[r.truncatedNormal(o,a,i,bhe("dtype",e,t,n),s)]}case"Zeros":return[r.zeros(bhe("shape",e,t,n),bhe("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(bhe("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"dynamic":return async function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:N;switch(e.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:a,maxOutputSize:i,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=fpe(e,t,n),c=await o.image.nonMaxSuppressionWithScoreAsync(r,a,i,s,l,u);return[c.selectedIndices,c.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:a,maxOutputSize:i,iouThreshold:s,scoreThreshold:l}=fpe(e,t,n),u=bhe("padToMaxOutputSize",e,t,n),c=await o.image.nonMaxSuppressionPaddedAsync(r,a,i,s,l,u);return[c.selectedIndices,c.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:a,maxOutputSize:i,iouThreshold:s,scoreThreshold:l}=fpe(e,t,n);return[await o.image.nonMaxSuppressionAsync(r,a,i,s,l)]}case"Where":{const r=o.cast(bhe("condition",e,t,n),"bool"),a=[await o.whereAsync(r)];return r.dispose(),a}case"ListDiff":return o.setdiff1dAsync(bhe("x",e,t,n),bhe("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n);case"evaluation":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"LowerBound":{const o=bhe("sortedSequence",e,t,n),a=bhe("values",e,t,n);return[r.lowerBound(o,a)]}case"TopKV2":{const o=bhe("x",e,t,n),a=bhe("k",e,t,n),i=bhe("sorted",e,t,n),s=r.topk(o,a,i);return[s.values,s.indices]}case"UpperBound":{const o=bhe("sortedSequence",e,t,n),a=bhe("values",e,t,n);return[r.upperBound(o,a)]}case"Unique":{const o=bhe("x",e,t,n),a=r.unique(o);return[a.values,a.indices]}case"UniqueV2":{const o=bhe("x",e,t,n),a=bhe("axis",e,t,n),i=r.unique(o,a);return[i.values,i.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"image":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"ResizeBilinear":{const o=bhe("images",e,t,n),a=bhe("size",e,t,n),i=bhe("alignCorners",e,t,n),s=bhe("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(o,[a[0],a[1]],i,s)]}case"ResizeNearestNeighbor":{const o=bhe("images",e,t,n),a=bhe("size",e,t,n),i=bhe("alignCorners",e,t,n),s=bhe("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(o,[a[0],a[1]],i,s)]}case"CropAndResize":{const o=bhe("image",e,t,n),a=bhe("boxes",e,t,n),i=bhe("boxInd",e,t,n),s=bhe("cropSize",e,t,n),l=bhe("method",e,t,n),u=bhe("extrapolationValue",e,t,n);return[r.image.cropAndResize(o,a,i,s,l,u)]}case"ImageProjectiveTransformV3":{const o=bhe("images",e,t,n),a=bhe("transforms",e,t,n),i=bhe("outputShape",e,t,n),s=bhe("fillValue",e,t,n),l=bhe("interpolation",e,t,n),u=bhe("fillMode",e,t,n);return[r.image.transform(o,a,l.toLowerCase(),u.toLowerCase(),s,i)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"graph":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const o=bhe("default",e,t,n);return[yhe(e.name,t,n)||o];case"Placeholder":return[yhe(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[She(bhe("x",e,t,n))];case"IdentityN":return bhe("x",e,t,n).map((e=>She(e)));case"Shape":return[r.tensor1d(bhe("x",e,t,n).shape,"int32")];case"ShapeN":return bhe("x",e,t,n).map((e=>r.tensor1d(e.shape)));case"Size":return[r.scalar(bhe("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(bhe("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const a=bhe("x",e,t,n),i=bhe("data",e,t,n),s=bhe("message",e,t,n),l=bhe("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(let e=0;e<i.length;e++)console.log(Array.prototype.slice.call(i[e].dataSync()).slice(0,l));return[a];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"logical":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"Equal":return[r.equal(bhe("a",e,t,n),bhe("b",e,t,n))];case"NotEqual":return[r.notEqual(bhe("a",e,t,n),bhe("b",e,t,n))];case"Greater":return[r.greater(bhe("a",e,t,n),bhe("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(bhe("a",e,t,n),bhe("b",e,t,n))];case"Less":return[r.less(bhe("a",e,t,n),bhe("b",e,t,n))];case"LessEqual":return[r.lessEqual(bhe("a",e,t,n),bhe("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(bhe("a",e,t,n),bhe("b",e,t,n))];case"LogicalNot":return[r.logicalNot(bhe("a",e,t,n))];case"LogicalOr":return[r.logicalOr(bhe("a",e,t,n),bhe("b",e,t,n))];case"Select":case"SelectV2":return[r.where(bhe("condition",e,t,n),bhe("a",e,t,n),bhe("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"matrices":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(bhe("a",e,t,n),bhe("b",e,t,n),bhe("transposeA",e,t,n),bhe("transposeB",e,t,n))];case"Einsum":return[r.einsum(bhe("equation",e,t,n),...bhe("tensors",e,t,n))];case"Transpose":return[r.transpose(bhe("x",e,t,n),bhe("perm",e,t,n))];case"_FusedMatMul":const[o,a]=bhe("fusedOps",e,t,n),i="biasadd"===o,s="prelu"===a,l=bhe("numArgs",e,t,n),u=bhe("leakyreluAlpha",e,t,n);if(i){if(s&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,d]=bhe("args",e,t,n);return[r.fused.matMul({a:bhe("a",e,t,n),b:bhe("b",e,t,n),transposeA:bhe("transposeA",e,t,n),transposeB:bhe("transposeB",e,t,n),bias:c,activation:a,preluActivationWeights:d,leakyreluAlpha:u})];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"normalization":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(bhe("x",e,t,n),bhe("axis",e,t,n),bhe("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(bhe("x",e,t,n),bhe("mean",e,t,n),bhe("variance",e,t,n),bhe("offset",e,t,n),bhe("scale",e,t,n),bhe("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(bhe("x",e,t,n),bhe("radius",e,t,n),bhe("bias",e,t,n),bhe("alpha",e,t,n),bhe("beta",e,t,n))];case"Softmax":return[r.softmax(bhe("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(bhe("x",e,t,n))];case"SparseToDense":return[r.sparseToDense(bhe("sparseIndices",e,t,n),bhe("outputShape",e,t,n),bhe("sparseValues",e,t,n),bhe("defaultValue",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"reduction":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"Max":{const o=bhe("axis",e,t,n),a=bhe("keepDims",e,t,n);return[r.max(bhe("x",e,t,n),o,a)]}case"Mean":{const o=bhe("axis",e,t,n),a=bhe("keepDims",e,t,n);return[r.mean(bhe("x",e,t,n),o,a)]}case"Min":{const o=bhe("axis",e,t,n),a=bhe("keepDims",e,t,n);return[r.min(bhe("x",e,t,n),o,a)]}case"Sum":{const o=bhe("axis",e,t,n),a=bhe("keepDims",e,t,n);return[r.sum(bhe("x",e,t,n),o,a)]}case"All":{const o=bhe("axis",e,t,n),a=bhe("keepDims",e,t,n);return[r.all(bhe("x",e,t,n),o,a)]}case"Any":{const o=bhe("axis",e,t,n),a=bhe("keepDims",e,t,n);return[r.any(bhe("x",e,t,n),o,a)]}case"ArgMax":{const o=bhe("axis",e,t,n);return[r.argMax(bhe("x",e,t,n),o)]}case"ArgMin":{const o=bhe("axis",e,t,n);return[r.argMin(bhe("x",e,t,n),o)]}case"Prod":{const o=bhe("axis",e,t,n),a=bhe("keepDims",e,t,n);return[r.prod(bhe("x",e,t,n),o,a)]}case"Cumprod":{const o=bhe("axis",e,t,n),a=bhe("exclusive",e,t,n),i=bhe("reverse",e,t,n);return[r.cumprod(bhe("x",e,t,n),o,a,i)]}case"Cumsum":{const o=bhe("axis",e,t,n),a=bhe("exclusive",e,t,n),i=bhe("reverse",e,t,n);return[r.cumsum(bhe("x",e,t,n),o,a,i)]}case"Bincount":const o=bhe("x",e,t,n),a=bhe("weights",e,t,n),i=bhe("size",e,t,n);return[r.bincount(o,a,i)];case"DenseBincount":{const o=bhe("x",e,t,n),a=bhe("weights",e,t,n),i=bhe("size",e,t,n),s=bhe("binaryOutput",e,t,n);return[r.denseBincount(o,a,i,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"slice_join":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"ConcatV2":case"Concat":{const o=bhe("n",e,t,n),a=bhe("axis",e,t,n);let i=bhe("tensors",e,t,n);return i=i.slice(0,o),[r.concat(i,a)]}case"Gather":{const o=bhe("x",e,t,n),a=bhe("indices",e,t,n);return[r.gather(o,r.cast(a,"int32"),0)]}case"GatherV2":{const o=bhe("axis",e,t,n),a=bhe("batchDims",e,t,n),i=bhe("x",e,t,n),s=bhe("indices",e,t,n);return[r.gather(i,r.cast(s,"int32"),o,a)]}case"Reverse":{const o=bhe("dims",e,t,n),a=[];for(let e=0;e<o.length;e++)o[e]&&a.push(e);const i=bhe("x",e,t,n);return[r.reverse(i,a)]}case"ReverseV2":{const o=bhe("axis",e,t,n),a=bhe("x",e,t,n);return[r.reverse(a,o)]}case"Slice":{const o=bhe("begin",e,t,n),a=bhe("size",e,t,n);return[r.slice(bhe("x",e,t,n),o,a)]}case"StridedSlice":{const o=bhe("begin",e,t,n),a=bhe("end",e,t,n),i=bhe("strides",e,t,n),s=bhe("beginMask",e,t,n),l=bhe("endMask",e,t,n),u=bhe("ellipsisMask",e,t,n),c=bhe("newAxisMask",e,t,n),d=bhe("shrinkAxisMask",e,t,n),h=bhe("x",e,t,n);return[r.stridedSlice(h,o,a,i,s,l,u,c,d)]}case"Pack":return Kce((()=>{const o=bhe("axis",e,t,n),a=bhe("tensors",e,t,n),i=a[0].shape,s=r.squeeze(a[0]).shape,l=a.map((e=>{const t=toe(e.shape,i);if(!t&&!toe(r.squeeze(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,i)}));return[r.stack(l,o)]}));case"Unpack":{const o=bhe("axis",e,t,n),a=bhe("tensor",e,t,n);return r.unstack(a,o)}case"Tile":{const o=bhe("reps",e,t,n);return[r.tile(bhe("x",e,t,n),o)]}case"Split":case"SplitV":{const o=bhe("axis",e,t,n),a=bhe("numOrSizeSplits",e,t,n),i=bhe("x",e,t,n);return r.split(i,a,o)}case"ScatterNd":{const o=bhe("indices",e,t,n),a=bhe("values",e,t,n),i=bhe("shape",e,t,n);return[r.scatterND(o,a,i)]}case"GatherNd":{const o=bhe("x",e,t,n),a=bhe("indices",e,t,n);return[r.gatherND(o,a)]}case"SparseToDense":{const o=bhe("sparseIndices",e,t,n),a=bhe("outputShape",e,t,n),i=bhe("sparseValues",e,t,n),s=bhe("defaultValue",e,t,n);return[r.sparseToDense(o,i,a,i.dtype===s.dtype?s:r.cast(s,i.dtype))]}default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"sparse":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:o,outputValues:a,emptyRowIndicator:i,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows(bhe("indices",e,t,n),bhe("values",e,t,n),bhe("denseShape",e,t,n),bhe("defaultValue",e,t,n));return[o,a,i,s]}case"SparseReshape":{const{outputIndices:o,outputShape:a}=r.sparse.sparseReshape(bhe("inputIndices",e,t,n),bhe("inputShape",e,t,n),bhe("newShape",e,t,n));return[o,a]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(bhe("data",e,t,n),bhe("indices",e,t,n),bhe("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(bhe("data",e,t,n),bhe("indices",e,t,n),bhe("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"spectral":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"FFT":return[r.fft(bhe("x",e,t,n))];case"IFFT":return[r.ifft(bhe("x",e,t,n))];case"RFFT":return[r.rfft(bhe("x",e,t,n))];case"IRFFT":return[r.irfft(bhe("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"string":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"StringNGrams":{const{nGrams:o,nGramsSplits:a}=r.string.stringNGrams(bhe("data",e,t,n),bhe("dataSplits",e,t,n),bhe("separator",e,t,n),bhe("nGramWidths",e,t,n),bhe("leftPad",e,t,n),bhe("rightPad",e,t,n),bhe("padWidth",e,t,n),bhe("preserveShortSequences",e,t,n));return[o,a]}case"StringSplit":{const{indices:o,values:a,shape:i}=r.string.stringSplit(bhe("input",e,t,n),bhe("delimiter",e,t,n),bhe("skipEmpty",e,t,n));return[o,a,i]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(bhe("input",e,t,n),bhe("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"transformation":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"Cast":return[r.cast(bhe("x",e,t,n),bhe("dtype",e,t,n))];case"ExpandDims":{const o=bhe("axis",e,t,n);return[r.expandDims(bhe("x",e,t,n),o)]}case"Squeeze":{const o=bhe("axis",e,t,n);return[r.squeeze(bhe("x",e,t,n),o)]}case"Reshape":return[r.reshape(bhe("x",e,t,n),bhe("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(bhe("x",e,t,n),bhe("padding",e,t,n),bhe("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(bhe("x",e,t,n),bhe("padding",e,t,n),bhe("constantValue",e,t,n))];case"SpaceToBatchND":{const o=bhe("blockShape",e,t,n),a=bhe("paddings",e,t,n);return[r.spaceToBatchND(bhe("x",e,t,n),o,a)]}case"BatchToSpaceND":{const o=bhe("blockShape",e,t,n),a=bhe("crops",e,t,n);return[r.batchToSpaceND(bhe("x",e,t,n),o,a)]}case"DepthToSpace":{const o=bhe("blockSize",e,t,n),a=bhe("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(bhe("x",e,t,n),o,a)]}case"BroadcastTo":return[r.broadcastTo(bhe("x",e,t,n),bhe("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(bhe("s0",e,t,n),bhe("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"hash_table":return(async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const o=bhe("keyDType",e,t,n),a=bhe("valueDType",e,t,n),i=new mpe(o,a);return r.addHashTable(e.name,i),[i.handle]}case"LookupTableImport":case"LookupTableImportV2":{const o=bhe("tableHandle",e,t,n,r),a=bhe("keys",e,t,n),i=bhe("values",e,t,n),s=r.getHashTableById(o.id);return[await s.import(a,i)]}case"LookupTableFind":case"LookupTableFindV2":{const o=bhe("tableHandle",e,t,n,r),a=bhe("keys",e,t,n),i=bhe("defaultValue",e,t,n),s=r.getHashTableById(o.id);return[await s.find(a,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const o=bhe("tableHandle",e,t,n,r);return[r.getHashTableById(o.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n,r);case"custom":const a=vhe(e.op);if(a&&a.customExecutor)return a.customExecutor(new ape(e,t,n));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return goe(a)?a.then((e=>[].concat(e))):[].concat(a)}class vpe{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map((e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`)).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function bpe(e,t,n,r){const o=new Set,a=[];let i=null,s=null;const l=new Set,u=Object.keys(e).map((e=>khe(e)[0]));let c=[];null!=r&&(c=r.map((e=>khe(e.name)[0])));const d=[...t];for(;d.length>0;){const e=d.pop();(kpe(e)||Cpe(e)||Spe(e))&&null==i&&(i=e,s=i.children.map((e=>e.name)).filter((e=>o.has(e)))),o.add(e.name),null==n[e.name]&&(-1===u.indexOf(e.name)&&-1===c.indexOf(e.name)&&(0!==e.inputs.length?e.inputs.forEach((e=>{l.has(e.name)||(l.add(e.name),d.push(e))})):a.push(e.name)))}return{inputs:e,outputs:t,usedNodes:o,missingInputs:a,dynamicNode:i,syncInputs:s}}const ype=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],wpe=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],xpe=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function kpe(e){return ype.indexOf(e.op)>=0}function Cpe(e){return wpe.indexOf(e.op)>=0}function Spe(e){return xpe.indexOf(e.op)>=0}class Epe{constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach((t=>{this._functionExecutorMap[t]=new Epe(e.functions[t],this)}))}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map((t=>e[t].map((e=>e.id))));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get outputs(){return this._outputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get inputNodes(){return this._inputs.map((e=>e.signatureKey||e.name))}get outputNodes(){return this._outputs.map((e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t}))}get functions(){return Object.keys(this._functions).reduce(((e,t)=>(e[t]=this._functions[t].signature,e)),{})}getCompilationKey(e,t){const n=e.map((e=>e.name)).sort(),r=t.map((e=>e.name)).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}compile(e,t){const n=bpe(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:o,syncInputs:a}=n;if(null!=o)throw new Error(`This execution contains the node '${o.name}', which has the dynamic op '${o.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(r.length>0){const n=t.map((e=>e.name)),o=Object.keys(e);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${o}]. Missing the following inputs: [${r}]`)}return function(e,t,n){const{usedNodes:r,inputs:o}=n,a=[],i=Object.keys(o).map((e=>khe(e)[0])).map((t=>e.nodes[t])),s=e.initNodes;i.forEach((e=>{r.has(e.name)&&a.push(e)})),e.weights.forEach((e=>{r.has(e.name)&&a.push(e)})),null!=s&&s.forEach((e=>{r.has(e.name)&&a.push(e)}));const l=new Set,u=[];for(;a.length>0;){const e=a.pop();l.add(e.name),t[e.name]||u.push(e),e.children.forEach((e=>{!l.has(e.name)&&r.has(e.name)&&e.inputs.every((e=>l.has(e.name)))&&a.push(e)}))}return u}(this.graph,this.weightMap,n)}execute(e,t){e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const r=n.map((e=>this.graph.nodes[khe(e)[0]])),o=t.map((e=>khe(e)[0]));let a=o.map((e=>this.graph.nodes[e]));this.resetIntermediateTensors(),0===a.length&&(a=this._outputs);const i=this.getCompilationKey(r,a);let s=this.compiledMap.get(i);null==s&&(s=this.compile(e,a),this.compiledMap.set(i,s));const l={},u={};return Kce((()=>{const n=new vpe(this.weightMap,l,u,this.functionExecutorMap),r=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,o]=khe(t),a=[];a[o]=e[t],r[n]=a}));const a=this.getFrozenTensorIds(r),i={};for(let e=0;e<s.length;e++){const t=s[e];if(!r[t.name]){const e=gpe(t,r,n,this._resourceManager);if(goe(e))throw new Error(`The execution of the op '${t.op}' returned a promise. Please use model.executeAsync() instead.`);r[t.name]=e,this.checkTensorForDisposal(t.name,t,r,n,a,o,i)}}return null==this.parent&&n.dispose(a),t.map((e=>yhe(e,r,n)))}))}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map((t=>e[t])).map((e=>e.map((e=>e.id)))));return new Set(t)}checkTensorForDisposal(e,t,n,r,o,a,i){"control"!==t.category&&-1===a.indexOf(e)&&(n[e].forEach((e=>{null!=e&&(i[e.id]=(i[e.id]||0)+t.children.length)})),t.inputs.forEach((e=>{if("control"!==e.category){const a=function(e,t,n){return t[xhe(e,n.currentContextId)]}(e.name,n,r);null!=a&&a.forEach((e=>{if(e&&!e.kept&&!o.has(e.id)){const n=i[e.id];if(1===n){if(this.keepTensorForDebug){const[n,o]=whe(t.name,r);this.intermediateTensors[n]||(this.intermediateTensors[n]=[]),this.intermediateTensors[n][o]=e}else e.dispose();delete i[e.id]}else null!=n&&i[e.id]--}}))}})))}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach((e=>this.intermediateTensors[e].forEach((e=>e.dispose())))),this.disposeTensorsMap())}disposeTensorsMap(){this.tensorsMap&&Object.keys(this.tensorsMap).forEach((e=>{this.tensorsMap[e].forEach((e=>{!e||e.kept||e.isDisposed||this.keepIds.has(e.id)||e.dispose()}))}))}getIntermediateTensors(){return this.tensorsMap}resetIntermediateTensors(){for(const e in this.intermediateTensors)this.intermediateTensors[e].forEach((e=>e.dispose())),delete this.intermediateTensors[e]}async _executeAsync(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepTensorForDebug=woe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(kbe){console.warn(kbe.message)}this.resetIntermediateTensors();const a=new vpe(this.weightMap,r,o,this.functionExecutorMap);this.tensorsMap=await this.executeWithControlFlow(e,a,t,n);const i=t.map((e=>yhe(e,this.tensorsMap,a))),s=i.map((e=>e.id)),l=Object.keys(e).map((t=>e[t].id));return this.keepIds=new Set([...s,...l,...this.weightIds]),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&a.dispose(this.keepIds),i}async executeFunctionAsync(e,t,n){const r=e.reduce(((e,t,n)=>(e[this.inputs[n].name]=t,e)),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){const o=Object.keys(e),a=o.map((e=>this.graph.nodes[khe(e)[0]])),i=n.map((e=>khe(e)[0]));let s=i.map((e=>this.graph.nodes[e]));0===s.length&&(s=this._outputs);const{usedNodes:l,missingInputs:u,dynamicNode:c,syncInputs:d}=bpe(e,s,this.weightMap,this._initNodes),h=[...a,...this.graph.weights,...this._initNodes||[]].map((e=>({node:e,contexts:t.currentContext}))),p=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,r]=khe(t),o=[];o[r]=e[t],p[n]=o}));const f={},m=this.getFrozenTensorIds(p),g={};for(;h.length>0;){const e=this.processStack(a,h,t,p,g,m,i,f,l);await Promise.all(e)}null!=c||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const v=s.filter((e=>!kpe(e)&&!yhe(e.name,p,t))).map((e=>e.name));if(v.length>0){let e="";throw null!=c&&(e=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${d}]`),new Error(`Cannot compute the outputs [${v}] from the provided inputs [${o}]. Consider providing the following inputs: [${u}]. ${e}`)}return p}processStack(e,t,n,r,o,a,i,s,l){const u=[];for(;t.length>0;){const e=t.pop();n.currentContext=e.contexts;let c="";if("Enter"===e.node.op&&bhe("isConstant",e.node,r,n)&&([c]=whe(e.node.name,n)),null==r[e.node.name]){const d=gpe(e.node,r,n,this._resourceManager);c||([c]=whe(e.node.name,n));const h=n.currentContext;goe(d)?u.push(d.then((u=>(r[c]=u,n.currentContext=h,this.checkTensorForDisposal(c,e.node,r,n,a,i,s),this.processChildNodes(e.node,t,n,r,o,l),u)))):(r[c]=d,this.checkTensorForDisposal(c,e.node,r,n,a,i,s),this.processChildNodes(e.node,t,n,r,o,l))}else this.processChildNodes(e.node,t,n,r,o,l)}return u}processChildNodes(e,t,n,r,o,a){e.children.forEach((e=>{const[i]=whe(e.name,n);!o[i]&&a.has(e.name)&&("Merge"===e.op?e.inputNames.some((e=>!!yhe(e,r,n)))&&(o[i]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((e=>!!yhe(e,r,n)))&&(o[i]=!0,t.push({contexts:n.currentContext,node:e})))}))}dispose(){Object.keys(this.weightMap).forEach((e=>this.weightMap[e].forEach((e=>e.dispose()))))}checkInputShapeAndType(e){Object.keys(e).forEach((t=>{const n=e[t],[r]=khe(t),o=this.graph.nodes[r];if(o.attrParams.shape&&o.attrParams.shape.value){const e=o.attrParams.shape.value,t=e.length===n.shape.length&&n.shape.every(((t,n)=>-1===e[n]||e[n]===t));Jre(t,(()=>`The shape of dict['${o.name}'] provided in model.execute(dict) must be [${e}], but was [${n.shape}]`))}o.attrParams.dtype&&o.attrParams.dtype.value&&Jre(n.dtype===o.attrParams.dtype.value,(()=>`The dtype of dict['${o.name}'] provided in model.execute(dict) must be ${o.attrParams.dtype.value}, but was ${n.dtype}`))}))}mapInputs(e){const t={};for(const n in e)if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]){t[this._signature.inputs[n].name]=e[n]}else t[n]=e[n];return t}checkInputs(e){const t=Object.keys(e).filter((e=>{const[t]=khe(e);return null==this.graph.nodes[t]}));if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map((e=>{if(null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[e]){return this._signature.outputs[e].name}return e}),{})}checkOutputs(e){e.forEach((e=>{const[t]=khe(e);if(!this.graph.nodes[t])throw new Error(`The output '${e}' is not found in the graph`)}))}}class Npe{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}const Ipe="?tfjs-format=file",$pe="model.json";class Tpe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=n,null==t&&(this.loadOptions={}),this.resourceManager=new Npe}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return goe(e)?e.then((e=>this.loadSync(e))):this.loadSync(e)}loadSync(e){this.artifacts=e;const t=this.artifacts.modelTopology;let n=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const e=this.artifacts.userDefinedMetadata;null!=e.signature&&(n=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}this.signature=n,this.version=`${t.versions.producer}.${t.versions.minConsumer}`;const r=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new Epe(Whe.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=Whe.Instance.transformGraph(e.modelInitializer);this.initializer=new Epe(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,t){if("string"===typeof e){const t=this.io.getSaveHandlers(e);if(0===t.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Error(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,t){const n=this.execute(e,this.outputNodes);if(this.structuredOutputKeys){const e={};return(n instanceof iae?[n]:n).forEach(((t,n)=>e[this.structuredOutputKeys[n]]=t)),e}return n}normalizeInputs(e){if(!(e instanceof iae)&&!Array.isArray(e))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce(((t,n,r)=>(t[n]=e[r],t)),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce(((t,n)=>(t[n]=[e[n]],t)),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function Ape(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&"string"===typeof e&&(e=function(e){e.endsWith("/")||(e+="/");return`${e}${$pe}${Ipe}`}(e));const r=new Tpe(e,t,n);return await r.load(),r}function Ope(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))}function Rpe(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var Ppe=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var o=r[n];t.push(o)}return t},Dpe=function(){this.parent=null,this.children={},this.end=!1,this.word=[[],0,0]},Fpe=function(){function e(){this.root=new Dpe}return e.prototype.insert=function(e,t,n){for(var r=this.root,o=Ppe(e),a=0;a<o.length;a++)r.children[o[a]]||(r.children[o[a]]=new Dpe,r.children[o[a]].parent=r,r.children[o[a]].word[0]=r.word[0].concat(o[a])),r=r.children[o[a]],a===o.length-1&&(r.end=!0,r.word[1]=t,r.word[2]=n)},e.prototype.commonPrefixSearch=function(e){for(var t=[],n=this.root.children[e[0]],r=0;r<e.length&&n;r++)n.end&&t.push(n.word),n=n.children[e[r+1]];return t.length||t.push([[e[0]],0,0]),t},e}();var _pe=function(){function e(e,t){void 0===t&&(t=6),this.vocabulary=e,this.reservedSymbolsCount=t,this.trie=new Fpe;for(var n=this.reservedSymbolsCount;n<this.vocabulary.length;n++)this.trie.insert(this.vocabulary[n][0],this.vocabulary[n][1],n)}return e.prototype.encode=function(e){var t=[],n=[],r=[];e=function(e){var t=e.normalize("NFKC");return t.length>0?"\u2581"+t.replace(/ /g,"\u2581"):t}(e);for(var o=Ppe(e),a=0;a<=o.length;a++)t.push({}),n.push(0),r.push(0);for(a=0;a<o.length;a++)for(var i=this.trie.commonPrefixSearch(o.slice(a)),s=0;s<i.length;s++){var l=i[s],u={key:l[0],score:l[1],index:l[2]};null==t[a+(c=l[0].length)][a]&&(t[a+c][a]=[]),t[a+c][a].push(u)}for(var c=0;c<=o.length;c++)for(var d in t[c]){var h=t[c][d];for(s=0;s<h.length;s++){var p=h[s],f=p.score+r[c-p.key.length];(0===r[c]||f>=r[c])&&(r[c]=f,n[c]=h[s].index)}}for(var m=[],g=n.length-1;g>0;)m.push(n[g]),g-=this.vocabulary[n[g]][0].length;var v=[],b=!1;for(a=0;a<m.length;a++){var y=m[a];b&&0===y||v.push(y),b=0===y}return v.reverse()},e}();function Mpe(e){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(t){switch(t.label){case 0:return[4,(n=e,woe().platform.fetch(n,r))];case 1:return[2,t.sent().json()]}var n,r}))}))}var zpe="https://tfhub.dev/google/tfjs-model/universal-sentence-encoder-qa-ondevice/1",Lpe=[0,1,2],Bpe=192;!function(){function e(){}e.prototype.loadModel=function(){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(e){return[2,Ape(zpe,{fromTFHub:!0})]}))}))},e.prototype.load=function(){return Ope(this,void 0,void 0,(function(){var e,t,n;return Rpe(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this.loadModel(),Mpe(zpe+"/vocab.json?tfjs-format=file")])];case 1:return e=r.sent(),t=e[0],n=e[1],this.model=t,this.tokenizer=new _pe(n,3),[2]}}))}))},e.prototype.embed=function(e){var t=this,n=Kce((function(){var n=t.tokenizeStrings(e.queries,Bpe),r=t.tokenizeStrings(e.responses,Bpe);if(null!=e.contexts&&e.contexts.length!==e.responses.length)throw new Error("The length of response strings and context strings need to match.");var o=e.contexts||[];null==e.contexts&&(o.length=e.responses.length,o.fill(""));var a=t.tokenizeStrings(o,Bpe),i={};return i.input_inp_text=n,i.input_res_text=r,i.input_res_context=a,t.model.execute(i,["Final/EncodeQuery/mul","Final/EncodeResult/mul"])}));return{queryEmbedding:n[0],responseEmbedding:n[1]}},e.prototype.tokenizeStrings=function(e,t){var n=this;return Pce(e.map((function(e){return n.shiftTokens(n.tokenizer.encode(e),Bpe)})),[e.length,Bpe],"int32")},e.prototype.shiftTokens=function(e,t){e.unshift(1);for(var n=0;n<t;n++)n>=e.length?e[n]=2:Lpe.includes(e[n])||(e[n]+=3);return e.slice(0,t)}}();var jpe=function(){function e(){}return e.prototype.loadModel=function(e){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(t){return[2,e?Ape(e):Ape("https://tfhub.dev/tensorflow/tfjs-model/universal-sentence-encoder-lite/1/default/1",{fromTFHub:!0})]}))}))},e.prototype.load=function(e){return void 0===e&&(e={}),Ope(this,void 0,void 0,(function(){var t,n,r;return Rpe(this,(function(o){switch(o.label){case 0:return[4,Promise.all([this.loadModel(e.modelUrl),Mpe(e.vocabUrl||"https://storage.googleapis.com/tfjs-models/savedmodel/universal_sentence_encoder/vocab.json")])];case 1:return t=o.sent(),n=t[0],r=t[1],this.model=n,this.tokenizer=new _pe(r),[2]}}))}))},e.prototype.embed=function(e){return Ope(this,void 0,void 0,(function(){var t,n,r,o,a,i,s,l,u=this;return Rpe(this,(function(c){switch(c.label){case 0:for("string"==typeof e&&(e=[e]),t=e.map((function(e){return u.tokenizer.encode(e)})),n=t.map((function(e,t){return e.map((function(e,n){return[t,n]}))})),r=[],o=0;o<n.length;o++)r=r.concat(n[o]);return a=Pce(r,[r.length,2],"int32"),i=Rce(Zre(t),"int32"),s={indices:a,values:i},[4,this.model.executeAsync(s)];case 1:return l=c.sent(),a.dispose(),i.dispose(),[2,l]}}))}))},e}();const Hpe={methods:{one:{},two:{},three:{},four:{}},model:{one:{},two:{},three:{}},compute:{},hooks:[]},Vpe={compute:function(e){const{world:t}=this,n=t.compute;return"string"===typeof e&&n.hasOwnProperty(e)?n[e](this):(e=>"[object Array]"===Object.prototype.toString.call(e))(e)?e.forEach((r=>{t.compute.hasOwnProperty(r)?n[r](this):console.warn("no compute:",e)})):"function"===typeof e?e(this):console.warn("no compute:",e),this}},Wpe=Vpe,Gpe={forEach:function(e){return this.fullPointer.forEach(((t,n)=>{let r=this.update([t]);e(r,n)})),this},map:function(e,t){let n=this.fullPointer.map(((t,n)=>{let r=this.update([t]),o=e(r,n);return void 0===o?this.none():o}));if(0===n.length)return t||this.update([]);if(void 0!==n[0]){if("string"===typeof n[0])return n;if("object"===typeof n[0]&&(null===n[0]||!n[0].isView))return n}let r=[];return n.forEach((e=>{r=r.concat(e.fullPointer)})),this.toView(r)},filter:function(e){let t=this.fullPointer;return t=t.filter(((t,n)=>{let r=this.update([t]);return e(r,n)})),this.update(t)},find:function(e){let t=this.fullPointer.find(((t,n)=>{let r=this.update([t]);return e(r,n)}));return this.update([t])},some:function(e){return this.fullPointer.some(((t,n)=>{let r=this.update([t]);return e(r,n)}))},random:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.fullPointer,n=Math.floor(Math.random()*t.length);return n+e>this.length&&(n=this.length-e,n=n<0?0:n),t=t.slice(n,n+e),this.update(t)}},Upe={termList:function(){return this.methods.one.termList(this.docs)},terms:function(e){let t=this.match(".");return"number"===typeof e?t.eq(e):t},groups:function(e){if(e||0===e)return this.update(this._groups[e]||[]);let t={};return Object.keys(this._groups).forEach((e=>{t[e]=this.update(this._groups[e])})),t},eq:function(e){let t=this.pointer;return t||(t=this.docs.map(((e,t)=>[t]))),t[e]?this.update([t[e]]):this.none()},first:function(){return this.eq(0)},last:function(){let e=this.fullPointer.length-1;return this.eq(e)},firstTerms:function(){return this.match("^.")},lastTerms:function(){return this.match(".$")},slice:function(e,t){let n=this.pointer||this.docs.map(((e,t)=>[t]));return n=n.slice(e,t),this.update(n)},all:function(){return this.update().toView()},fullSentences:function(){let e=this.fullPointer.map((e=>[e[0]]));return this.update(e).toView()},none:function(){return this.update([])},isDoc:function(e){if(!e||!e.isView)return!1;let t=this.fullPointer,n=e.fullPointer;return!t.length!==n.length&&t.every(((e,t)=>!!n[t]&&(e[0]===n[t][0]&&e[1]===n[t][1]&&e[2]===n[t][2])))},wordCount:function(){return this.docs.reduce(((e,t)=>(e+=t.filter((e=>""!==e.text)).length,e)),0)},isFull:function(){let e=this.pointer;if(!e)return!0;if(0===e.length||0!==e[0][0])return!1;let t=0,n=0;return this.document.forEach((e=>t+=e.length)),this.docs.forEach((e=>n+=e.length)),t===n},getNth:function(e){return"number"===typeof e?this.eq(e):"string"===typeof e?this.if(e):this}};Upe.group=Upe.groups,Upe.fullSentence=Upe.fullSentences,Upe.sentence=Upe.fullSentences,Upe.lastTerm=Upe.lastTerms,Upe.firstTerm=Upe.firstTerms;const Kpe=Upe,qpe=Object.assign({},Kpe,Wpe,Gpe);qpe.get=qpe.eq;const Xpe=qpe;class Jpe{constructor(e,t){[["document",e],["world",Hpe],["_groups",arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}],["_cache",null],["viewType","View"]].forEach((e=>{Object.defineProperty(this,e[0],{value:e[1],writable:!0})})),this.ptrs=t}get docs(){let e=this.document;return this.ptrs&&(e=Hpe.methods.one.getDoc(this.ptrs,this.document)),e}get pointer(){return this.ptrs}get methods(){return this.world.methods}get model(){return this.world.model}get hooks(){return this.world.hooks}get isView(){return!0}get found(){return this.docs.length>0}get length(){return this.docs.length}get fullPointer(){let{docs:e,ptrs:t,document:n}=this,r=t||e.map(((e,t)=>[t]));return r.map((e=>{let[t,r,o,a,i]=e;return r=r||0,o=o||(n[t]||[]).length,n[t]&&n[t][r]&&(a=a||n[t][r].id,n[t][o-1]&&(i=i||n[t][o-1].id)),[t,r,o,a,i]}))}update(e){let t=new Jpe(this.document,e);if(this._cache&&e&&e.length>0){let n=[];e.forEach(((e,t)=>{let[r,o,a]=e;(1===e.length||0===o&&this.document[r].length===a)&&(n[t]=this._cache[r])})),n.length>0&&(t._cache=n)}return t.world=this.world,t}toView(e){return new Jpe(this.document,e||this.pointer)}fromText(e){const{methods:t}=this;let n=t.one.tokenize.fromString(e,this.world),r=new Jpe(n);return r.world=this.world,r.compute(["normal","freeze","lexicon"]),this.world.compute.preTagger&&r.compute("preTagger"),r.compute("unfreeze"),r}clone(){let e=this.document.slice(0);e=e.map((e=>e.map((e=>((e=Object.assign({},e)).tags=new Set(e.tags),e)))));let t=this.update(this.pointer);return t.document=e,t._cache=this._cache,t}}Object.assign(Jpe.prototype,Xpe);const Ype=Jpe,Qpe=function(e){return e&&"object"===typeof e&&!Array.isArray(e)};function Zpe(e,t){if(Qpe(t))for(const n in t)Qpe(t[n])?(e[n]||Object.assign(e,{[n]:{}}),Zpe(e[n],t[n])):Object.assign(e,{[n]:t[n]});return e}const efe=function(e,t,n,r){const{methods:o,model:a,compute:i,hooks:s}=t;e.methods&&function(e,t){for(const n in t)e[n]=e[n]||{},Object.assign(e[n],t[n])}(o,e.methods),e.model&&Zpe(a,e.model),e.irregulars&&function(e,t){let n=e.two.models||{};Object.keys(t).forEach((e=>{t[e].pastTense&&(n.toPast&&(n.toPast.ex[e]=t[e].pastTense),n.fromPast&&(n.fromPast.ex[t[e].pastTense]=e)),t[e].presentTense&&(n.toPresent&&(n.toPresent.ex[e]=t[e].presentTense),n.fromPresent&&(n.fromPresent.ex[t[e].presentTense]=e)),t[e].gerund&&(n.toGerund&&(n.toGerund.ex[e]=t[e].gerund),n.fromGerund&&(n.fromGerund.ex[t[e].gerund]=e)),t[e].comparative&&(n.toComparative&&(n.toComparative.ex[e]=t[e].comparative),n.fromComparative&&(n.fromComparative.ex[t[e].comparative]=e)),t[e].superlative&&(n.toSuperlative&&(n.toSuperlative.ex[e]=t[e].superlative),n.fromSuperlative&&(n.fromSuperlative.ex[t[e].superlative]=e))}))}(a,e.irregulars),e.compute&&Object.assign(i,e.compute),s&&(t.hooks=s.concat(e.hooks||[])),e.api&&e.api(n),e.lib&&Object.keys(e.lib).forEach((t=>r[t]=e.lib[t])),e.tags&&r.addTags(e.tags),e.words&&r.addWords(e.words),e.frozen&&r.addWords(e.frozen,!0),e.mutate&&e.mutate(t,r)},tfe=function(e){return"[object Array]"===Object.prototype.toString.call(e)},nfe=function(e,t,n){const{methods:r}=n;let o=new t([]);if(o.world=n,"number"===typeof e&&(e=String(e)),!e)return o;if("string"===typeof e){return new t(r.one.tokenize.fromString(e,n))}if(a=e,"[object Object]"===Object.prototype.toString.call(a)&&e.isView)return new t(e.document,e.ptrs);var a;if(tfe(e)){if(tfe(e[0])){let n=e.map((e=>e.map((e=>({text:e,normal:e,pre:"",post:" ",tags:new Set})))));return new t(n)}let n=function(e){return e.map((e=>e.terms.map((e=>(tfe(e.tags)&&(e.tags=new Set(e.tags)),e)))))}(e);return new t(n)}return o};let rfe=Object.assign({},Hpe);const ofe=function(e,t){t&&ofe.addWords(t);let n=nfe(e,Ype,rfe);return e&&n.compute(rfe.hooks),n};Object.defineProperty(ofe,"_world",{value:rfe,writable:!0}),ofe.tokenize=function(e,t){const{compute:n}=this._world;t&&ofe.addWords(t);let r=nfe(e,Ype,rfe);return n.contractions&&r.compute(["alias","normal","machine","contractions"]),r},ofe.plugin=function(e){return efe(e,this._world,Ype,this),this},ofe.extend=ofe.plugin,ofe.world=function(){return this._world},ofe.model=function(){return this._world.model},ofe.methods=function(){return this._world.methods},ofe.hooks=function(){return this._world.hooks},ofe.verbose=function(e){const t="undefined"===typeof process?self.env||{}:{NODE_ENV:"production",PUBLIC_URL:"/websm",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0};return t.DEBUG_TAGS="tagger"===e||!0===e||"",t.DEBUG_MATCH="match"===e||!0===e||"",t.DEBUG_CHUNKS="chunker"===e||!0===e||"",this},ofe.version="14.14.1";const afe=ofe,ife=function(e){let t=e.map((e=>{let t=new Set;return e.forEach((e=>{""!==e.normal&&t.add(e.normal),e.switch&&t.add(`%${e.switch}%`),e.implicit&&t.add(e.implicit),e.machine&&t.add(e.machine),e.root&&t.add(e.root),e.alias&&e.alias.forEach((e=>t.add(e)));let n=Array.from(e.tags);for(let r=0;r<n.length;r+=1)t.add("#"+n[r])})),t}));return t},sfe={cache:function(){return this._cache=this.methods.one.cacheDoc(this.document),this},uncache:function(){return this._cache=null,this}},lfe=function(e){Object.assign(e.prototype,sfe)},ufe={api:lfe,compute:{cache:function(e){e._cache=e.methods.one.cacheDoc(e.document)}},methods:{one:{cacheDoc:ife}}},cfe=e=>/^\p{Lu}[\p{Ll}'\u2019]/u.test(e)||/^\p{Lu}$/u.test(e),dfe=(e,t,n)=>{if(n.forEach((e=>e.dirty=!0)),e){let r=[t,0].concat(n);Array.prototype.splice.apply(e,r)}return e},hfe=function(e){let t=e[e.length-1];!t||/ $/.test(t.post)||/[-\u2013\u2014]/.test(t.post)||(t.post+=" ")},pfe=(e,t,n)=>{const r=/[-.?!,;:)\u2013\u2014'"]/g;let o=e[t-1];if(!o)return;let a=o.post;if(r.test(a)){let e=a.match(r).join(""),t=n[n.length-1];t.post=e+t.post,o.post=o.post.replace(r,"")}},ffe=function(e,t,n,r){let[o,a,i]=t;0===a||i===r[o].length?hfe(n):(hfe(n),hfe([e[t[1]]])),function(e,t,n){let r=e[t];if(0!==t||!cfe(r.text))return;n[0].text=n[0].text.replace(/^\p{Ll}/u,(e=>e.toUpperCase()));let o=e[t];o.tags.has("ProperNoun")||o.tags.has("Acronym")||cfe(o.text)&&o.text.length>1&&(o.text=(a=o.text,a.replace(/^\p{Lu}/u,(e=>e.toLowerCase()))));var a}(e,a,n),dfe(e,a,n)};let mfe=0;const gfe=e=>(e=e.length<3?"0"+e:e).length<3?"0"+e:e,vfe=function(e){let[t,n]=e.index||[0,0];mfe+=1,mfe=mfe>46655?0:mfe,t=t>46655?0:t,n=n>1294?0:n;let r=gfe(mfe.toString(36));r+=gfe(t.toString(36));let o=n.toString(36);return o=o.length<2?"0"+o:o,r+=o,r+=parseInt(36*Math.random(),10).toString(36),e.normal+"|"+r.toUpperCase()},bfe=function(e){if(e.has("@hasContraction")&&"function"===typeof e.contractions){e.grow("@hasContraction").contractions().expand()}},yfe=e=>"[object Array]"===Object.prototype.toString.call(e),wfe=function(e,t,n){const{document:r,world:o}=t;t.uncache();let a=t.fullPointer,i=t.fullPointer;t.forEach(((s,l)=>{let u=s.fullPointer[0],[c]=u,d=r[c],h=function(e,t){const{methods:n}=t;return"string"===typeof e?n.one.tokenize.fromString(e,t)[0]:"object"===typeof e&&e.isView?e.clone().docs[0]||[]:yfe(e)?yfe(e[0])?e[0]:e:[]}(e,o);0!==h.length&&(h=function(e){return e.map((e=>(e.id=vfe(e),e)))}(h),n?(bfe(t.update([u]).firstTerm()),ffe(d,u,h,r)):(bfe(t.update([u]).lastTerm()),function(e,t,n,r){let[o,,a]=t,i=(r[o]||[]).length;a<i?(pfe(e,a,n),hfe(n)):i===a&&(hfe(e),pfe(e,a,n),r[o+1]&&(n[n.length-1].post+=" ")),dfe(e,t[2],n),t[4]=n[n.length-1].id}(d,u,h,r)),r[c]&&r[c][u[1]]&&(u[3]=r[c][u[1]].id),i[l]=u,u[2]+=h.length,a[l]=u)}));let s=t.toView(a);return t.ptrs=i,s.compute(["id","index","freeze","lexicon"]),s.world.compute.preTagger&&s.compute("preTagger"),s.compute("unfreeze"),s},xfe={insertAfter:function(e){return wfe(e,this,!1)},insertBefore:function(e){return wfe(e,this,!0)}};xfe.append=xfe.insertAfter,xfe.prepend=xfe.insertBefore,xfe.insert=xfe.insertAfter;const kfe=xfe,Cfe=/\$[0-9a-z]+/g,Sfe={},Efe=e=>e.replace(/^\p{Ll}/u,(e=>e.toUpperCase())),Nfe=e=>e.replace(/^\p{Lu}/u,(e=>e.toLowerCase()));Sfe.replaceWith=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.fullPointer,r=this;if(this.uncache(),"function"===typeof e)return function(e,t,n){return e.forEach((e=>{let r=t(e);e.replaceWith(r,n)})),e}(r,e,t);let o=r.docs[0];if(!o)return r;let a=t.possessives&&o[o.length-1].tags.has("Possessive"),i=t.case&&(s=o[0].text,/^\p{Lu}[\p{Ll}'\u2019]/u.test(s)||/^\p{Lu}$/u.test(s));var s;e=function(e,t){if("string"!==typeof e)return e;let n=t.groups();return e=e.replace(Cfe,(e=>{let t=e.replace(/\$/,"");return n.hasOwnProperty(t)?n[t].text():e})),e}(e,r);let l=this.update(n);n=n.map((e=>e.slice(0,3)));let u=(l.docs[0]||[]).map((e=>Array.from(e.tags))),c=l.docs[0][0].pre,d=l.docs[0][l.docs[0].length-1].post;if("string"===typeof e&&(e=this.fromText(e).compute("id")),r.insertAfter(e),l.has("@hasContraction")&&r.contractions){r.grow("@hasContraction+").contractions().expand()}if(r.delete(l),a){let e=r.docs[0],t=e[e.length-1];t.tags.has("Possessive")||(t.text+="'s",t.normal+="'s",t.tags.add("Possessive"))}c&&(r.docs[0][0].pre=c),d&&!r.docs[0][r.docs[0].length-1].post.trim()&&(r.docs[0][r.docs[0].length-1].post=d);let h=r.toView(n).compute(["index","freeze","lexicon"]);if(h.world.compute.preTagger&&h.compute("preTagger"),h.compute("unfreeze"),t.tags&&h.terms().forEach(((e,t)=>{e.tagSafe(u[t])})),!h.docs[0]||!h.docs[0][0])return h;if(t.case){let e=i?Efe:Nfe;h.docs[0][0].text=e(h.docs[0][0].text)}return h},Sfe.replace=function(e,t,n){if(e&&!t)return this.replaceWith(e,n);let r=this.match(e);return r.found?(this.soften(),r.replaceWith(t,n)):this};const Ife=Sfe,$fe=function(e,t){t.forEach((t=>{let[n,r,o]=t,a=o-r;e[n]&&(o===e[n].length&&o>1&&function(e,t){let n=e.length-1,r=e[n],o=e[n-t];o&&r&&(o.post+=r.post,o.post=o.post.replace(/ +([.?!,;:])/,"$1"),o.post=o.post.replace(/[,;:]+([.?!])/,"$1"))}(e[n],a),e[n].splice(r,a))}));for(let n=e.length-1;n>=0;n-=1)if(0===e[n].length&&(e.splice(n,1),n===e.length&&e[n-1])){let t=e[n-1],r=t[t.length-1];r&&(r.post=r.post.trimEnd())}return e},Tfe={remove:function(e){const{indexN:t}=this.methods.one.pointer;this.uncache();let n=this.all(),r=this;e&&(n=this,r=this.match(e));let o=!n.ptrs;if(r.has("@hasContraction")&&r.contractions){r.grow("@hasContraction").contractions().expand()}let a=n.fullPointer,i=r.fullPointer.reverse(),s=$fe(this.document,i);return a=function(e,t){return e=e.map((e=>{let[n]=e;return t[n]?(t[n].forEach((t=>{let n=t[2]-t[1];e[1]<=t[1]&&e[2]>=t[2]&&(e[2]-=n)})),e):e})),e.forEach(((t,n)=>{if(0===t[1]&&0==t[2])for(let r=n+1;r<e.length;r+=1)e[r][0]-=1,e[r][0]<0&&(e[r][0]=0)})),e=(e=e.filter((e=>e[2]-e[1]>0))).map((e=>(e[3]=null,e[4]=null,e)))}(a,t(i)),n.ptrs=a,n.document=s,n.compute("index"),o&&(n.ptrs=void 0),e?n.toView(a):(this.ptrs=[],n.none())}};Tfe.delete=Tfe.remove;const Afe=Tfe,Ofe={pre:function(e,t){return void 0===e&&this.found?this.docs[0][0].pre:(this.docs.forEach((n=>{let r=n[0];!0===t?r.pre+=e:r.pre=e})),this)},post:function(e,t){if(void 0===e){let e=this.docs[this.docs.length-1];return e[e.length-1].post}return this.docs.forEach((n=>{let r=n[n.length-1];!0===t?r.post+=e:r.post=e})),this},trim:function(){if(!this.found)return this;let e=this.docs,t=e[0][0];t.pre=t.pre.trimStart();let n=e[e.length-1],r=n[n.length-1];return r.post=r.post.trimEnd(),this},hyphenate:function(){return this.docs.forEach((e=>{e.forEach(((t,n)=>{0!==n&&(t.pre=""),e[n+1]&&(t.post="-")}))})),this},dehyphenate:function(){const e=/[-\u2013\u2014]/;return this.docs.forEach((t=>{t.forEach((t=>{e.test(t.post)&&(t.post=" ")}))})),this},toQuotations:function(e,t){return e=e||'"',t=t||'"',this.docs.forEach((n=>{n[0].pre=e+n[0].pre;let r=n[n.length-1];r.post=t+r.post})),this},toParentheses:function(e,t){return e=e||"(",t=t||")",this.docs.forEach((n=>{n[0].pre=e+n[0].pre;let r=n[n.length-1];r.post=t+r.post})),this}};Ofe.deHyphenate=Ofe.dehyphenate,Ofe.toQuotation=Ofe.toQuotations;const Rfe=Ofe,Pfe={alpha:(e,t)=>e.normal<t.normal?-1:e.normal>t.normal?1:0,length:(e,t)=>{let n=e.normal.trim().length,r=t.normal.trim().length;return n<r?1:n>r?-1:0},wordCount:(e,t)=>e.words<t.words?1:e.words>t.words?-1:0,sequential:(e,t)=>e[0]<t[0]?1:e[0]>t[0]?-1:e[1]>t[1]?1:-1,byFreq:function(e){let t={};return e.forEach((e=>{t[e.normal]=t[e.normal]||0,t[e.normal]+=1})),e.sort(((e,n)=>{let r=t[e.normal],o=t[n.normal];return r<o?1:r>o?-1:0})),e}},Dfe=new Set(["index","sequence","seq","sequential","chron","chronological"]),Ffe=new Set(["freq","frequency","topk","repeats"]),_fe=new Set(["alpha","alphabetical"]),Mfe={unique:function(){let e=new Set,t=this.filter((t=>{let n=t.text("machine");return!e.has(n)&&(e.add(n),!0)}));return t},reverse:function(){let e=this.pointer||this.docs.map(((e,t)=>[t]));return e=[].concat(e),e=e.reverse(),this._cache&&(this._cache=this._cache.reverse()),this.update(e)},sort:function(e){let{docs:t,pointer:n}=this;if(this.uncache(),"function"===typeof e)return function(e,t){let n=e.fullPointer;return n=n.sort(((n,r)=>(n=e.update([n]),r=e.update([r]),t(n,r)))),e.ptrs=n,e}(this,e);e=e||"alpha";let r=n||t.map(((e,t)=>[t])),o=t.map(((e,t)=>({index:t,words:e.length,normal:e.map((e=>e.machine||e.normal||"")).join(" "),pointer:r[t]})));return Dfe.has(e)&&(e="sequential"),_fe.has(e)&&(e="alpha"),Ffe.has(e)?(o=Pfe.byFreq(o),this.update(o.map((e=>e.pointer)))):"function"===typeof Pfe[e]?(o=o.sort(Pfe[e]),this.update(o.map((e=>e.pointer)))):this}},zfe=function(e,t){if(e.length>0){let t=e[e.length-1],n=t[t.length-1];!1===/ /.test(n.post)&&(n.post+=" ")}return e=e.concat(t)},Lfe={concat:function(e){if("string"===typeof e){let t=this.fromText(e);if(this.found&&this.ptrs){let e=this.fullPointer,n=e[e.length-1][0];this.document.splice(n,0,...t.document)}else this.document=this.document.concat(t.document);return this.all().compute("index")}if("object"===typeof e&&e.isView)return function(e,t){if(e.document===t.document){let n=e.fullPointer.concat(t.fullPointer);return e.toView(n).compute("index")}return t.fullPointer.forEach((t=>{t[0]+=e.document.length})),e.document=zfe(e.document,t.docs),e.all()}(this,e);if(t=e,"[object Array]"===Object.prototype.toString.call(t)){let t=zfe(this.document,e);return this.document=t,this.all()}var t;return this}},Bfe={harden:function(){return this.ptrs=this.fullPointer,this},soften:function(){let e=this.ptrs;return!e||e.length<1||(e=e.map((e=>e.slice(0,3))),this.ptrs=e),this}},jfe=Object.assign({},{toLowerCase:function(){return this.termList().forEach((e=>{e.text=e.text.toLowerCase()})),this},toUpperCase:function(){return this.termList().forEach((e=>{e.text=e.text.toUpperCase()})),this},toTitleCase:function(){return this.termList().forEach((e=>{e.text=e.text.replace(/^ *[a-z\u00C0-\u00FF]/,(e=>e.toUpperCase()))})),this},toCamelCase:function(){return this.docs.forEach((e=>{e.forEach(((t,n)=>{0!==n&&(t.text=t.text.replace(/^ *[a-z\u00C0-\u00FF]/,(e=>e.toUpperCase()))),n!==e.length-1&&(t.post="")}))})),this}},kfe,Ife,Afe,Rfe,Mfe,Lfe,Bfe),Hfe=function(e){Object.assign(e.prototype,jfe)},Vfe={id:function(e){let t=e.docs;for(let n=0;n<t.length;n+=1)for(let e=0;e<t[n].length;e+=1){let r=t[n][e];r.id=r.id||vfe(r)}}},Wfe={api:Hfe,compute:Vfe},Gfe=!0,Ufe={one:{contractions:[{word:"@",out:["at"]},{word:"arent",out:["are","not"]},{word:"alot",out:["a","lot"]},{word:"brb",out:["be","right","back"]},{word:"cannot",out:["can","not"]},{word:"dun",out:["do","not"]},{word:"can't",out:["can","not"]},{word:"shan't",out:["should","not"]},{word:"won't",out:["will","not"]},{word:"that's",out:["that","is"]},{word:"what's",out:["what","is"]},{word:"let's",out:["let","us"]},{word:"dunno",out:["do","not","know"]},{word:"gonna",out:["going","to"]},{word:"gotta",out:["have","got","to"]},{word:"gimme",out:["give","me"]},{word:"outta",out:["out","of"]},{word:"tryna",out:["trying","to"]},{word:"gtg",out:["got","to","go"]},{word:"im",out:["i","am"]},{word:"imma",out:["I","will"]},{word:"imo",out:["in","my","opinion"]},{word:"irl",out:["in","real","life"]},{word:"ive",out:["i","have"]},{word:"rn",out:["right","now"]},{word:"tbh",out:["to","be","honest"]},{word:"wanna",out:["want","to"]},{word:"c'mere",out:["come","here"]},{word:"c'mon",out:["come","on"]},{word:"shoulda",out:["should","have"]},{word:"coulda",out:["coulda","have"]},{word:"woulda",out:["woulda","have"]},{word:"musta",out:["must","have"]},{word:"tis",out:["it","is"]},{word:"twas",out:["it","was"]},{word:"y'know",out:["you","know"]},{word:"ne'er",out:["never"]},{word:"o'er",out:["over"]},{after:"ll",out:["will"]},{after:"ve",out:["have"]},{after:"re",out:["are"]},{after:"m",out:["am"]},{before:"c",out:["ce"]},{before:"m",out:["me"]},{before:"n",out:["ne"]},{before:"qu",out:["que"]},{before:"s",out:["se"]},{before:"t",out:["tu"]},{word:"shouldnt",out:["should","not"]},{word:"couldnt",out:["could","not"]},{word:"wouldnt",out:["would","not"]},{word:"hasnt",out:["has","not"]},{word:"wasnt",out:["was","not"]},{word:"isnt",out:["is","not"]},{word:"cant",out:["can","not"]},{word:"dont",out:["do","not"]},{word:"wont",out:["will","not"]},{word:"howd",out:["how","did"]},{word:"whatd",out:["what","did"]},{word:"whend",out:["when","did"]},{word:"whered",out:["where","did"]}],numberSuffixes:{st:Gfe,nd:Gfe,rd:Gfe,th:Gfe,am:Gfe,pm:Gfe,max:Gfe,"\xb0":Gfe,s:Gfe,e:Gfe,er:Gfe,"\xe8re":Gfe,"\xe8me":Gfe}}},Kfe=function(e,t,n){let[r,o]=t;n&&0!==n.length&&(n=n.map(((e,t)=>(e.implicit=e.text,e.machine=e.text,e.pre="",e.post="",e.text="",e.normal="",e.index=[r,o+t],e))),n[0]&&(n[0].pre=e[r][o].pre,n[n.length-1].post=e[r][o].post,n[0].text=e[r][o].text,n[0].normal=e[r][o].normal),e[r].splice(o,1,...n))},qfe=/'/,Xfe=new Set(["what","how","when","where","why"]),Jfe=new Set(["be","go","start","think","need"]),Yfe=new Set(["been","gone"]),Qfe=function(e,t){let n=e[t].normal.split(qfe)[0];if(Xfe.has(n))return[n,"did"];if(e[t+1]){if(Yfe.has(e[t+1].normal))return[n,"had"];if(Jfe.has(e[t+1].normal))return[n,"would"]}return null},Zfe=function(e,t){if("ain't"===e[t].normal||"aint"===e[t].normal)return null;return[e[t].normal.replace(/n't/,""),"not"]},eme=/'/,tme=/(e|\xe9|aison|sion|tion)$/,nme=/(age|isme|acle|ege|oire)$/,rme=(e,t)=>["je",e[t].normal.split(eme)[1]],ome=(e,t)=>{let n=e[t].normal.split(eme)[1];return n&&n.endsWith("e")?["la",n]:["le",n]},ame=(e,t)=>{let n=e[t].normal.split(eme)[1];return n&&tme.test(n)&&!nme.test(n)?["du",n]:n&&n.endsWith("s")?["des",n]:["de",n]},ime=/^([0-9.]{1,4}[a-z]{0,2}) ?[-\u2013\u2014] ?([0-9]{1,4}[a-z]{0,2})$/i,sme=/^([0-9]{1,2}(:[0-9][0-9])?(am|pm)?) ?[-\u2013\u2014] ?([0-9]{1,2}(:[0-9][0-9])?(am|pm)?)$/i,lme=/^[0-9]{3}-[0-9]{4}$/,ume=function(e,t){let n=e[t],r=n.text.match(ime);return null!==r?!0===n.tags.has("PhoneNumber")||lme.test(n.text)?null:[r[1],"to",r[2]]:(r=n.text.match(sme),null!==r?[r[1],"to",r[4]]:null)},cme=/^([+-]?[0-9][.,0-9]*)([a-z\xb0\xb2\xb3\xb5/]+)$/,dme=function(e,t,n){const r=n.model.one.numberSuffixes||{};let o=e[t].text.match(cme);if(null!==o){let e=o[2].toLowerCase().trim();return r.hasOwnProperty(e)?null:[o[1],e]}return null},hme=/'/,pme=/^[0-9][^-\u2013\u2014]*[-\u2013\u2014].*?[0-9]/,fme=function(e,t,n,r){let o=t.update();o.document=[e];let a=n+r;n>0&&(n-=1),e[a]&&(a+=1),o.ptrs=[[0,n,a]]},mme={t:(e,t)=>Zfe(e,t),d:(e,t)=>Qfe(e,t)},gme={j:(e,t)=>rme(e,t),l:(e,t)=>ome(e,t),d:(e,t)=>ame(e,t)},vme=function(e,t,n,r){for(let o=0;o<e.length;o+=1){let a=e[o];if(a.word===t.normal)return a.out;if(null!==r&&r===a.after)return[n].concat(a.out);if(null!==n&&n===a.before&&r&&r.length>2)return a.out.concat(r)}return null},bme=function(e,t){let n=t.fromText(e.join(" "));return n.compute(["id","alias"]),n.docs[0]},yme=function(e,t){for(let n=t+1;n<5&&e[n];n+=1)if("been"===e[n].normal)return["there","has"];return["there","is"]},wme=e=>{let{world:t,document:n}=e;const{model:r,methods:o}=t;let a=r.one.contractions||[];n.forEach(((r,i)=>{for(let s=r.length-1;s>=0;s-=1){let l=null,u=null;if(!0===hme.test(r[s].normal)){let e=r[s].normal.split(hme);l=e[0],u=e[1]}let c=vme(a,r[s],l,u);!c&&mme.hasOwnProperty(u)&&(c=mme[u](r,s,t)),!c&&gme.hasOwnProperty(l)&&(c=gme[l](r,s)),"there"===l&&"s"===u&&(c=yme(r,s)),c?(c=bme(c,e),Kfe(n,[i,s],c),fme(n[i],e,s,c.length)):pme.test(r[s].normal)?(c=ume(r,s),c&&(c=bme(c,e),Kfe(n,[i,s],c),o.one.setTag(c,"NumberRange",t),c[2]&&c[2].tags.has("Time")&&o.one.setTag([c[0]],"Time",t,null,"time-range"),fme(n[i],e,s,c.length))):(c=dme(r,s,t),c&&(c=bme(c,e),Kfe(n,[i,s],c),o.one.setTag([c[1]],"Unit",t,null,"contraction-unit")))}}))},xme={model:Ufe,compute:{contractions:wme},hooks:["contractions"]},kme=function(e){const t=e.world,{model:n,methods:r}=e.world,o=r.one.setTag,{frozenLex:a}=n.one,i=n.one._multiCache||{};e.docs.forEach((e=>{for(let n=0;n<e.length;n+=1){let r=e[n],s=r.machine||r.normal;if(void 0!==i[s]&&e[n+1]){for(let r=n+i[s]-1;r>n;r-=1){let i=e.slice(n,r+1),s=i.map((e=>e.machine||e.normal)).join(" ");!0!==a.hasOwnProperty(s)||(o(i,a[s],t,!1,"1-frozen-multi-lexicon"),i.forEach((e=>e.frozen=!0)))}}void 0!==a[s]&&a.hasOwnProperty(s)&&(o([r],a[s],t,!1,"1-freeze-lexicon"),r.frozen=!0)}}))},Cme=e=>"\x1b[34m"+e+"\x1b[0m",Sme=e=>"\x1b[3m\x1b[2m"+e+"\x1b[0m",Eme=function(e){e.docs.forEach((e=>{console.log(Cme("\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500")),e.forEach((e=>{let t=`  ${Sme("\u2502")}  `,n=e.implicit||e.text||"-";!0===e.frozen?t+=`${Cme(n)} \u2744\ufe0f`:t+=Sme(n),console.log(t)}))}))},Nme={compute:{frozen:kme,freeze:kme,unfreeze:function(e){return e.docs.forEach((e=>{e.forEach((e=>{delete e.frozen}))})),e}},mutate:e=>{const t=e.methods.one;t.termMethods.isFrozen=e=>!0===e.frozen,t.debug.freeze=Eme,t.debug.frozen=Eme},api:function(e){e.prototype.freeze=function(){return this.docs.forEach((e=>{e.forEach((e=>{e.frozen=!0}))})),this},e.prototype.unfreeze=function(){this.compute("unfreeze")},e.prototype.isFrozen=function(){return this.match("@isFrozen+")}},hooks:["freeze"]},Ime=function(e,t,n){const{model:r,methods:o}=n,a=o.one.setTag,i=r.one._multiCache||{},{lexicon:s}=r.one||{};let l=e[t],u=l.machine||l.normal;if(void 0!==i[u]&&e[t+1]){for(let r=t+i[u]-1;r>t;r-=1){let o=e.slice(t,r+1);if(o.length<=1)return!1;let i=o.map((e=>e.machine||e.normal)).join(" ");if(!0===s.hasOwnProperty(i)){let e=s[i];return a(o,e,n,!1,"1-multi-lexicon"),!e||2!==e.length||"PhrasalVerb"!==e[0]&&"PhrasalVerb"!==e[1]||a([o[1]],"Particle",n,!1,"1-phrasal-particle"),!0}}return!1}return null},$me=/^(under|over|mis|re|un|dis|semi|pre|post)-?/,Tme=new Set(["Verb","Infinitive","PastTense","Gerund","PresentTense","Adjective","Participle"]),Ame=function(e,t,n){const{model:r,methods:o}=n,a=o.one.setTag,{lexicon:i}=r.one;let s=e[t],l=s.machine||s.normal;if(void 0!==i[l]&&i.hasOwnProperty(l))return a([s],i[l],n,!1,"1-lexicon"),!0;if(s.alias){let e=s.alias.find((e=>i.hasOwnProperty(e)));if(e)return a([s],i[e],n,!1,"1-lexicon-alias"),!0}if(!0===$me.test(l)){let e=l.replace($me,"");if(i.hasOwnProperty(e)&&e.length>3&&Tme.has(i[e]))return a([s],i[e],n,!1,"1-lexicon-prefix"),!0}return null},Ome={lexicon:function(e){const t=e.world;e.docs.forEach((e=>{for(let n=0;n<e.length;n+=1)if(0===e[n].tags.size){let r=null;r=r||Ime(e,n,t),r=r||Ame(e,n,t)}}))}},Rme=function(e){let t={},n={};return Object.keys(e).forEach((r=>{let o=e[r],a=(r=(r=r.toLowerCase().trim()).replace(/'s\b/,"")).split(/ /);a.length>1&&(void 0===n[a[0]]||a.length>n[a[0]])&&(n[a[0]]=a.length),t[r]=t[r]||o})),delete t[""],delete t.null,delete t[" "],{lex:t,_multi:n}},Pme={addWords:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.world(),{methods:r,model:o}=n;if(!e)return;if(Object.keys(e).forEach((t=>{"string"===typeof e[t]&&e[t].startsWith("#")&&(e[t]=e[t].replace(/^#/,""))})),!0===t){let{lex:t,_multi:a}=r.one.expandLexicon(e,n);return Object.assign(o.one._multiCache,a),void Object.assign(o.one.frozenLex,t)}if(r.two.expandLexicon){let{lex:t,_multi:a}=r.two.expandLexicon(e,n);Object.assign(o.one.lexicon,t),Object.assign(o.one._multiCache,a)}let{lex:a,_multi:i}=r.one.expandLexicon(e,n);Object.assign(o.one.lexicon,a),Object.assign(o.one._multiCache,i)}},Dme={model:{one:{lexicon:{},_multiCache:{},frozenLex:{}}},methods:{one:{expandLexicon:Rme}},compute:Ome,lib:Pme,hooks:["lexicon"]},Fme=function(e,t){let n=[{}],r=[null],o=[0],a=[],i=0;e.forEach((function(e){let o=0,a=function(e,t){const{methods:n,model:r}=t;let o=n.one.tokenize.splitTerms(e,r).map((e=>n.one.tokenize.splitWhitespace(e,r)));return o.map((e=>e.text.toLowerCase()))}(e,t);for(let t=0;t<a.length;t++){let e=a[t];n[o]&&n[o].hasOwnProperty(e)?o=n[o][e]:(i++,n[o][e]=i,n[i]={},o=i,r[i]=null)}r[o]=[a.length]}));for(let s in n[0])i=n[0][s],o[i]=0,a.push(i);for(;a.length;){let e=a.shift(),t=Object.keys(n[e]);for(let s=0;s<t.length;s+=1){let l=t[s],u=n[e][l];for(a.push(u),i=o[e];i>0&&!n[i].hasOwnProperty(l);)i=o[i];if(n.hasOwnProperty(i)){let e=n[i][l];o[u]=e,r[e]&&(r[u]=r[u]||[],r[u]=r[u].concat(r[e]))}else o[u]=0}}return{goNext:n,endAs:r,failTo:o}},_me=function(e,t,n){let r=0,o=[];for(let a=0;a<e.length;a++){let i=e[a][n.form]||e[a].normal;for(;r>0&&(void 0===t.goNext[r]||!t.goNext[r].hasOwnProperty(i));)r=t.failTo[r]||0;if(t.goNext[r].hasOwnProperty(i)&&(r=t.goNext[r][i],t.endAs[r])){let n=t.endAs[r];for(let t=0;t<n.length;t++){let r=n[t],i=e[a-r+1],[s,l]=i.index;o.push([s,l,l+r,i.id])}}}return o},Mme=function(e,t){for(let n=0;n<e.length;n+=1)if(!0===t.has(e[n]))return!1;return!0},zme=function(e,t,n){let r=[];n.form=n.form||"normal";let o=e.docs;if(!t.goNext||!t.goNext[0])return console.error("Compromise invalid lookup trie"),e.none();let a=Object.keys(t.goNext[0]);for(let i=0;i<o.length;i++){if(e._cache&&e._cache[i]&&!0===Mme(a,e._cache[i]))continue;let s=o[i],l=_me(s,t,n);l.length>0&&(r=r.concat(l))}return e.update(r)};const Lme=(e,t)=>{for(let n=e.length-1;n>=0;n-=1)if(e[n]!==t)return e=e.slice(0,n+1);return e},Bme=function(e){return e.goNext=e.goNext.map((e=>{if(0!==Object.keys(e).length)return e})),e.goNext=Lme(e.goNext,void 0),e.failTo=Lme(e.failTo,0),e.endAs=Lme(e.endAs,null),e},jme={buildTrie:function(e){const t=Fme(e,this.world());return Bme(t)}};jme.compile=jme.buildTrie;const Hme={api:function(e){e.prototype.lookup=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return this.none();"string"===typeof e&&(e=[e]);let n=(r=e,"[object Object]"===Object.prototype.toString.call(r)?e:Fme(e,this.world));var r;let o=zme(this,n,t);return o=o.settle(),o}},lib:jme},Vme=function(e,t){return t?(e.forEach((e=>{let n=e[0];t[n]&&(e[0]=t[n][0],e[1]+=t[n][1],e[2]+=t[n][1])})),e):e},Wme=function(e,t){let{ptrs:n,byGroup:r}=e;return n=Vme(n,t),Object.keys(r).forEach((e=>{r[e]=Vme(r[e],t)})),{ptrs:n,byGroup:r}},Gme=function(e,t,n){const r=n.methods.one;return"number"===typeof e&&(e=String(e)),"string"===typeof e&&(e=r.killUnicode(e,n),e=r.parseMatch(e,t,n)),e},Ume=e=>"[object Object]"===Object.prototype.toString.call(e),Kme=e=>e&&Ume(e)&&!0===e.isView,qme=e=>e&&Ume(e)&&!0===e.isNet,Xme={matchOne:function(e,t,n){const r=this.methods.one;if(Kme(e))return this.intersection(e).eq(0);if(qme(e))return this.sweep(e,{tagger:!1,matchOne:!0}).view;let o={regs:e=Gme(e,n,this.world),group:t,justOne:!0},a=r.match(this.docs,o,this._cache),{ptrs:i,byGroup:s}=Wme(a,this.fullPointer),l=this.toView(i);return l._groups=s,l},match:function(e,t,n){const r=this.methods.one;if(Kme(e))return this.intersection(e);if(qme(e))return this.sweep(e,{tagger:!1}).view.settle();let o={regs:e=Gme(e,n,this.world),group:t},a=r.match(this.docs,o,this._cache),{ptrs:i,byGroup:s}=Wme(a,this.fullPointer),l=this.toView(i);return l._groups=s,l},has:function(e,t,n){const r=this.methods.one;if(Kme(e)){return this.intersection(e).fullPointer.length>0}if(qme(e))return this.sweep(e,{tagger:!1}).view.found;let o={regs:e=Gme(e,n,this.world),group:t,justOne:!0};return r.match(this.docs,o,this._cache).ptrs.length>0},if:function(e,t,n){const r=this.methods.one;if(Kme(e))return this.filter((t=>t.intersection(e).found));if(qme(e)){let t=this.sweep(e,{tagger:!1}).view.settle();return this.if(t)}let o={regs:e=Gme(e,n,this.world),group:t,justOne:!0},a=this.fullPointer,i=this._cache||[];a=a.filter(((e,t)=>{let n=this.update([e]);return r.match(n.docs,o,i[t]).ptrs.length>0}));let s=this.update(a);return this._cache&&(s._cache=a.map((e=>i[e[0]]))),s},ifNo:function(e,t,n){const{methods:r}=this,o=r.one;if(Kme(e))return this.filter((t=>!t.intersection(e).found));if(qme(e)){let t=this.sweep(e,{tagger:!1}).view.settle();return this.ifNo(t)}e=Gme(e,n,this.world);let a=this._cache||[],i=this.filter(((n,r)=>{let i={regs:e,group:t,justOne:!0};return 0===o.match(n.docs,i,a[r]).ptrs.length}));return this._cache&&(i._cache=i.ptrs.map((e=>a[e[0]]))),i}},Jme={before:function(e,t,n){const{indexN:r}=this.methods.one.pointer;let o=[],a=r(this.fullPointer);Object.keys(a).forEach((e=>{let t=a[e].sort(((e,t)=>e[1]>t[1]?1:-1))[0];t[1]>0&&o.push([t[0],0,t[1]])}));let i=this.toView(o);return e?i.match(e,t,n):i},after:function(e,t,n){const{indexN:r}=this.methods.one.pointer;let o=[],a=r(this.fullPointer),i=this.document;Object.keys(a).forEach((e=>{let t=a[e].sort(((e,t)=>e[1]>t[1]?-1:1))[0],[n,,r]=t;r<i[n].length&&o.push([n,r,i[n].length])}));let s=this.toView(o);return e?s.match(e,t,n):s},growLeft:function(e,t,n){"string"===typeof e&&(e=this.world.methods.one.parseMatch(e,n,this.world)),e[e.length-1].end=!0;let r=this.fullPointer;return this.forEach(((n,o)=>{let a=n.before(e,t);if(a.found){let e=a.terms();r[o][1]-=e.length,r[o][3]=e.docs[0][0].id}})),this.update(r)},growRight:function(e,t,n){"string"===typeof e&&(e=this.world.methods.one.parseMatch(e,n,this.world)),e[0].start=!0;let r=this.fullPointer;return this.forEach(((n,o)=>{let a=n.after(e,t);if(a.found){let e=a.terms();r[o][2]+=e.length,r[o][4]=null}})),this.update(r)},grow:function(e,t,n){return this.growRight(e,t,n).growLeft(e,t,n)}},Yme=function(e,t){return[e[0],e[1],t[2]]},Qme=(e,t,n)=>{return"string"===typeof e||(r=e,"[object Array]"===Object.prototype.toString.call(r))?t.match(e,n):e||t.none();var r},Zme=function(e,t){let[n,r,o]=e;return t.document[n]&&t.document[n][r]&&(e[3]=e[3]||t.document[n][r].id,t.document[n][o-1]&&(e[4]=e[4]||t.document[n][o-1].id)),e},ege={splitOn:function(e,t){const{splitAll:n}=this.methods.one.pointer;let r=Qme(e,this,t).fullPointer,o=n(this.fullPointer,r),a=[];return o.forEach((e=>{a.push(e.passthrough),a.push(e.before),a.push(e.match),a.push(e.after)})),a=a.filter((e=>e)),a=a.map((e=>Zme(e,this))),this.update(a)},splitBefore:function(e,t){const{splitAll:n}=this.methods.one.pointer;let r=Qme(e,this,t).fullPointer,o=n(this.fullPointer,r);for(let i=0;i<o.length;i+=1)!o[i].after&&o[i+1]&&o[i+1].before&&o[i].match&&o[i].match[0]===o[i+1].before[0]&&(o[i].after=o[i+1].before,delete o[i+1].before);let a=[];return o.forEach((e=>{a.push(e.passthrough),a.push(e.before),e.match&&e.after?a.push(Yme(e.match,e.after)):a.push(e.match)})),a=a.filter((e=>e)),a=a.map((e=>Zme(e,this))),this.update(a)},splitAfter:function(e,t){const{splitAll:n}=this.methods.one.pointer;let r=Qme(e,this,t).fullPointer,o=n(this.fullPointer,r),a=[];return o.forEach((e=>{a.push(e.passthrough),e.before&&e.match?a.push(Yme(e.before,e.match)):(a.push(e.before),a.push(e.match)),a.push(e.after)})),a=a.filter((e=>e)),a=a.map((e=>Zme(e,this))),this.update(a)}};ege.split=ege.splitAfter;const tge=ege,nge=function(e,t){return!(!e||!t)&&(e[0]===t[0]&&e[2]===t[1])},rge=function(e,t,n){const r=e.world,o=r.methods.one.parseMatch;n=n||"^.";let a=o(t=t||".$",{},r),i=o(n,{},r);a[a.length-1].end=!0,i[0].start=!0;let s=e.fullPointer,l=[s[0]];for(let u=1;u<s.length;u+=1){let t=l[l.length-1],n=s[u],r=e.update([t]),o=e.update([n]);nge(t,n)&&r.has(a)&&o.has(i)?l[l.length-1]=[t[0],t[1],n[2],t[3],n[4]]:l.push(n)}return e.update(l)},oge={joinIf:function(e,t){return rge(this,e,t)},join:function(){return rge(this)}},age=Object.assign({},Xme,Jme,tge,oge);age.lookBehind=age.before,age.lookBefore=age.before,age.lookAhead=age.after,age.lookAfter=age.after,age.notIf=age.ifNo;const ige=function(e){Object.assign(e.prototype,age)},sge=/(?:^|\s)([![^]*(?:<[^<]*>)?\/.*?[^\\/]\/[?\]+*$~]*)(?:\s|$)/,lge=/([!~[^]*(?:<[^<]*>)?\([^)]+[^\\)]\)[?\]+*$~]*)(?:\s|$)/,uge=/ /g,cge=e=>/^[![^]*(<[^<]*>)?\//.test(e)&&/\/[?\]+*$~]*$/.test(e),dge=function(e){return e=(e=e.map((e=>e.trim()))).filter((e=>e))},hge=function(e){let t=e.split(sge),n=[];t.forEach((e=>{cge(e)?n.push(e):n=n.concat(e.split(lge))})),n=dge(n);let r=[];return n.forEach((e=>{(e=>/^[![^]*(<[^<]*>)?\(/.test(e)&&/\)[?\]+*$~]*$/.test(e))(e)||cge(e)?r.push(e):r=r.concat(e.split(uge))})),r=dge(r),r},pge=/\{([0-9]+)?(, *[0-9]*)?\}/,fge=/&&/,mge=new RegExp(/^<\s*(\S+)\s*>/),gge=e=>e.charAt(0).toUpperCase()+e.substring(1),vge=e=>e.charAt(e.length-1),bge=e=>e.charAt(0),yge=e=>e.substring(1),wge=e=>e.substring(0,e.length-1),xge=function(e){return e=yge(e),e=wge(e)},kge=function(e,t){let n={};for(let r=0;r<2;r+=1){if("$"===vge(e)&&(n.end=!0,e=wge(e)),"^"===bge(e)&&(n.start=!0,e=yge(e)),"?"===vge(e)&&(n.optional=!0,e=wge(e)),("["===bge(e)||"]"===vge(e))&&(n.group=null,"["===bge(e)&&(n.groupStart=!0),"]"===vge(e)&&(n.groupEnd=!0),e=(e=e.replace(/^\[/,"")).replace(/\]$/,""),"<"===bge(e))){const t=mge.exec(e);t.length>=2&&(n.group=t[1],e=e.replace(t[0],""))}if("+"===vge(e)&&(n.greedy=!0,e=wge(e)),"*"!==e&&"*"===vge(e)&&"\\*"!==e&&(n.greedy=!0,e=wge(e)),"!"===bge(e)&&(n.negative=!0,e=yge(e)),"~"===bge(e)&&"~"===vge(e)&&e.length>2&&(e=xge(e),n.fuzzy=!0,n.min=t.fuzzy||.85,!1===/\(/.test(e)))return n.word=e,n;if("/"===bge(e)&&"/"===vge(e))return e=xge(e),t.caseSensitive&&(n.use="text"),n.regex=new RegExp(e),n;if(!0===pge.test(e)&&(e=e.replace(pge,((e,t,r)=>(void 0===r?(n.min=Number(t),n.max=Number(t)):(r=r.replace(/, */,""),void 0===t?(n.min=0,n.max=Number(r)):(n.min=Number(t),n.max=Number(r||999))),n.greedy=!0,n.min||(n.optional=!0),"")))),"("===bge(e)&&")"===vge(e)){fge.test(e)?(n.choices=e.split(fge),n.operator="and"):(n.choices=e.split("|"),n.operator="or"),n.choices[0]=yge(n.choices[0]);let r=n.choices.length-1;n.choices[r]=wge(n.choices[r]),n.choices=n.choices.map((e=>e.trim())),n.choices=n.choices.filter((e=>e)),n.choices=n.choices.map((e=>e.split(/ /g).map((e=>kge(e,t))))),e=""}if("{"===bge(e)&&"}"===vge(e)){if(e=xge(e),n.root=e,/\//.test(e)){let e=n.root.split(/\//);n.root=e[0],n.pos=e[1],"adj"===n.pos&&(n.pos="Adjective"),n.pos=n.pos.charAt(0).toUpperCase()+n.pos.substr(1).toLowerCase(),void 0!==e[2]&&(n.sense=e[2])}return n}if("<"===bge(e)&&">"===vge(e))return e=xge(e),n.chunk=gge(e),n.greedy=!0,n;if("%"===bge(e)&&"%"===vge(e))return e=xge(e),n.switch=e,n}return"#"===bge(e)?(n.tag=yge(e),n.tag=gge(n.tag),n):"@"===bge(e)?(n.method=yge(e),n):"."===e?(n.anything=!0,n):"*"===e?(n.anything=!0,n.greedy=!0,n.optional=!0,n):(e&&(e=(e=e.replace("\\*","*")).replace("\\.","."),t.caseSensitive?n.use="text":e=e.toLowerCase(),n.word=e),n)},Cge=kge,Sge=/[a-z0-9][-\u2013\u2014][a-z]/i,Ege=function(e,t){let n=t.model.one.prefixes;for(let r=e.length-1;r>=0;r-=1){let t=e[r];if(t.word&&Sge.test(t.word)){let o=t.word.split(/[-\u2013\u2014]/g);if(n.hasOwnProperty(o[0]))continue;o=o.filter((e=>e)).reverse(),e.splice(r,1),o.forEach((n=>{let o=Object.assign({},t);o.word=n,e.splice(r,0,o)}))}}return e},Nge=function(e,t){let{all:n}=t.methods.two.transform.verb||{},r=e.root;return n?n(r,t.model):[]},Ige=function(e,t){let{all:n}=t.methods.two.transform.noun||{};return n?n(e.root,t.model):[e.root]},$ge=function(e,t){let{all:n}=t.methods.two.transform.adjective||{};return n?n(e.root,t.model):[e.root]},Tge=function(e,t){return e=e.map((e=>{if(e.root)if(t.methods.two&&t.methods.two.transform){let n=[];e.pos?"Verb"===e.pos?n=n.concat(Nge(e,t)):"Noun"===e.pos?n=n.concat(Ige(e,t)):"Adjective"===e.pos&&(n=n.concat($ge(e,t))):(n=n.concat(Nge(e,t)),n=n.concat(Ige(e,t)),n=n.concat($ge(e,t))),n=n.filter((e=>e)),n.length>0&&(e.operator="or",e.fastOr=new Set(n))}else e.machine=e.root,delete e.id,delete e.root;return e})),e},Age=function(e){return e=function(e){let t=0,n=null;for(let r=0;r<e.length;r++){const o=e[r];!0===o.groupStart&&(n=o.group,null===n&&(n=String(t),t+=1)),null!==n&&(o.group=n),!0===o.groupEnd&&(n=null)}return e}(e),e=e.map((e=>{if(void 0!==e.choices){if("or"!==e.operator)return e;if(!0===e.fuzzy)return e;!0===e.choices.every((e=>{if(1!==e.length)return!1;let t=e[0];return!0!==t.fuzzy&&!t.start&&!t.end&&void 0!==t.word&&!0!==t.negative&&!0!==t.optional&&!0!==t.method}))&&(e.fastOr=new Set,e.choices.forEach((t=>{e.fastOr.add(t[0].word)})),delete e.choices)}return e})),e=function(e){return e.map((e=>(e.fuzzy&&e.choices&&e.choices.forEach((t=>{1===t.length&&t[0].word&&(t[0].fuzzy=!0,t[0].min=e.min)})),e)))}(e),e},Oge=function(e,t,n){if(null===e||void 0===e||""===e)return[];t=t||{},"number"===typeof e&&(e=String(e));let r=hge(e);return r=r.map((e=>Cge(e,t))),r=Ege(r,n),r=Tge(r,n),r=Age(r,t),r},Rge=function(e,t){for(let n of t)if(e.has(n))return!0;return!1},Pge=function(e,t){for(let n=0;n<e.length;n+=1){let r=e[n];if(!0!==r.optional&&!0!==r.negative&&!0!==r.fuzzy){if(void 0!==r.word&&!1===t.has(r.word))return!0;if(void 0!==r.tag&&!1===t.has("#"+r.tag))return!0;if(r.fastOr&&!1===Rge(r.fastOr,t))return!1}}return!1},Dge=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(e===t)return 1;if(e.length<n||t.length<n)return 0;const r=function(e,t){let n=e.length,r=t.length;if(0===n)return r;if(0===r)return n;let o=(r>n?r:n)+1;if(Math.abs(n-r)>(o||100))return o||100;let a,i,s,l,u,c,d=[];for(let h=0;h<o;h++)d[h]=[h],d[h].length=o;for(let h=0;h<o;h++)d[0][h]=h;for(let h=1;h<=n;++h)for(i=e[h-1],a=1;a<=r;++a){if(h===a&&d[h][a]>4)return n;s=t[a-1],l=i===s?0:1,u=d[h-1][a]+1,(c=d[h][a-1]+1)<u&&(u=c),(c=d[h-1][a-1]+l)<u&&(u=c);let r=h>1&&a>1&&i===t[a-2]&&e[h-2]===s&&(c=d[h-2][a-2]+l)<u;d[h][a]=r?c:u}return d[n][r]}(e,t);let o=Math.max(e.length,t.length);return 1-(0===o?0:r/o)},Fge=/([\u0022\uFF02\u0027\u201C\u2018\u201F\u201B\u201E\u2E42\u201A\u00AB\u2039\u2035\u2036\u2037\u301D\u0060\u301F])/,_ge=/([\u0022\uFF02\u0027\u201D\u2019\u00BB\u203A\u2032\u2033\u2034\u301E\u00B4])/,Mge=/^[-\u2013\u2014]$/,zge=/ [-\u2013\u2014]{1,3} /,Lge=(e,t)=>-1!==e.post.indexOf(t),Bge={hasQuote:e=>Fge.test(e.pre)||_ge.test(e.post),hasComma:e=>Lge(e,","),hasPeriod:e=>!0===Lge(e,".")&&!1===Lge(e,"..."),hasExclamation:e=>Lge(e,"!"),hasQuestionMark:e=>Lge(e,"?")||Lge(e,"\xbf"),hasEllipses:e=>Lge(e,"..")||Lge(e,"\u2026"),hasSemicolon:e=>Lge(e,";"),hasColon:e=>Lge(e,":"),hasSlash:e=>/\//.test(e.text),hasHyphen:e=>Mge.test(e.post)||Mge.test(e.pre),hasDash:e=>zge.test(e.post)||zge.test(e.pre),hasContraction:e=>Boolean(e.implicit),isAcronym:e=>e.tags.has("Acronym"),isKnown:e=>e.tags.size>0,isTitleCase:e=>/^\p{Lu}[a-z'\u00C0-\u00FF]/u.test(e.text),isUpperCase:e=>/^\p{Lu}+$/u.test(e.text)};Bge.hasQuotation=Bge.hasQuote;const jge=Bge;let Hge=function(){};Hge=function(e,t,n,r){let o=function(e,t,n,r){if(!0===t.anything)return!0;if(!0===t.start&&0!==n)return!1;if(!0===t.end&&n!==r-1)return!1;if(void 0!==t.id&&t.id===e.id)return!0;if(void 0!==t.word){if(t.use)return t.word===e[t.use];if(null!==e.machine&&e.machine===t.word)return!0;if(void 0!==e.alias&&e.alias.hasOwnProperty(t.word))return!0;if(!0===t.fuzzy){if(t.word===e.root)return!0;if(Dge(t.word,e.normal)>=t.min)return!0}return!(!e.alias||!e.alias.some((e=>e===t.word)))||t.word===e.text||t.word===e.normal}if(void 0!==t.tag)return!0===e.tags.has(t.tag);if(void 0!==t.method)return"function"===typeof jge[t.method]&&!0===jge[t.method](e);if(void 0!==t.pre)return e.pre&&e.pre.includes(t.pre);if(void 0!==t.post)return e.post&&e.post.includes(t.post);if(void 0!==t.regex){let n=e.normal;return t.use&&(n=e[t.use]),t.regex.test(n)}if(void 0!==t.chunk)return e.chunk===t.chunk;if(void 0!==t.switch)return e.switch===t.switch;if(void 0!==t.machine)return e.normal===t.machine||e.machine===t.machine||e.root===t.machine;if(void 0!==t.sense)return e.sense===t.sense;if(void 0!==t.fastOr){if(t.pos&&!e.tags.has(t.pos))return null;let n=e.root||e.implicit||e.machine||e.normal;return t.fastOr.has(n)||t.fastOr.has(e.text)}return void 0!==t.choices&&("and"===t.operator?t.choices.every((t=>Hge(e,t,n,r))):t.choices.some((t=>Hge(e,t,n,r))))}(e,t,n,r);return!0===t.negative?!o:o};const Vge=Hge,Wge=function(e,t){if(!0===e.end&&!0===e.greedy&&t.start_i+t.t<t.phrase_length-1){let n=Object.assign({},e,{end:!1});if(!0===Vge(t.terms[t.t],n,t.start_i+t.t,t.phrase_length))return!0}return!1},Gge=function(e,t){return e.groups[e.inGroup]||(e.groups[e.inGroup]={start:t,length:0}),e.groups[e.inGroup]},Uge=function(e){let{regs:t}=e,n=t[e.r],r=function(e,t){let n=e.t;if(!t)return e.terms.length;for(;n<e.terms.length;n+=1)if(!0===Vge(e.terms[n],t,e.start_i+n,e.phrase_length))return n;return null}(e,t[e.r+1]);if(null===r||0===r)return null;if(void 0!==n.min&&r-e.t<n.min)return null;if(void 0!==n.max&&r-e.t>n.max)return e.t=e.t+n.max,!0;if(!0===e.hasGroup){Gge(e,e.t).length=r-e.t}return e.t=r,!0},Kge=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.regs[e.r],r=!1;for(let a=0;a<n.choices.length;a+=1){let i=n.choices[a];if(o=i,"[object Array]"!==Object.prototype.toString.call(o))return!1;if(r=i.every(((n,r)=>{let o=0,a=e.t+r+t+o;if(void 0===e.terms[a])return!1;let i=Vge(e.terms[a],n,a+e.start_i,e.phrase_length);if(!0===i&&!0===n.greedy)for(let t=1;t<e.terms.length;t+=1){let r=e.terms[a+t];if(r){if(!0!==Vge(r,n,e.start_i+t,e.phrase_length))break;o+=1}}return t+=o,i})),r){t+=i.length;break}}var o;return r&&!0===n.greedy?Kge(e,t):t},qge=function(e){const{regs:t}=e;let n=t[e.r],r=Kge(e);if(r){if(!0===n.negative)return null;if(!0===e.hasGroup){Gge(e,e.t).length+=r}if(!0===n.end){let t=e.phrase_length;if(e.t+e.start_i+r!==t)return null}return e.t+=r,!0}return!!n.optional||null},Xge=function(e){const{regs:t}=e;let n=t[e.r],r=function(e){let t=0;return!0===e.regs[e.r].choices.every((n=>{let r=n.every(((t,n)=>{let r=e.t+n;return void 0!==e.terms[r]&&Vge(e.terms[r],t,r,e.phrase_length)}));return!0===r&&n.length>t&&(t=n.length),r}))&&t}(e);if(r){if(!0===n.negative)return null;if(!0===e.hasGroup){Gge(e,e.t).length+=r}if(!0===n.end){let t=e.phrase_length-1;if(e.t+e.start_i!==t)return null}return e.t+=r,!0}return!!n.optional||null},Jge=function(e,t,n){let r=0;for(let o=e.t;o<e.terms.length;o+=1){let a=Vge(e.terms[o],t,e.start_i+e.t,e.phrase_length);if(a)break;if(n&&(a=Vge(e.terms[o],n,e.start_i+e.t,e.phrase_length),a))break;if(r+=1,void 0!==t.max&&r===t.max)break}return 0!==r&&(!(t.min&&t.min>r)&&(e.t+=r,!0))},Yge=function(e){const{regs:t}=e;let n=t[e.r],r=Object.assign({},n);if(r.negative=!1,Vge(e.terms[e.t],r,e.start_i+e.t,e.phrase_length))return!1;if(n.optional){let n=t[e.r+1];if(n){if(Vge(e.terms[e.t],n,e.start_i+e.t,e.phrase_length))e.r+=1;else if(n.optional&&t[e.r+2]){Vge(e.terms[e.t],t[e.r+2],e.start_i+e.t,e.phrase_length)&&(e.r+=2)}}}return n.greedy?Jge(e,r,t[e.r+1]):(e.t+=1,!0)},Qge=function(e){const{regs:t}=e;let n=t[e.r],r=e.terms[e.t],o=Vge(r,t[e.r+1],e.start_i+e.t,e.phrase_length);if(n.negative||o){let n=e.terms[e.t+1];n&&Vge(n,t[e.r+1],e.start_i+e.t,e.phrase_length)||(e.r+=1)}},Zge=function(e){const{regs:t,phrase_length:n}=e;let r=t[e.r];return e.t=function(e,t){let n=Object.assign({},e.regs[e.r],{start:!1,end:!1}),r=e.t;for(;e.t<e.terms.length;e.t+=1){if(t&&Vge(e.terms[e.t],t,e.start_i+e.t,e.phrase_length))return e.t;let o=e.t-r+1;if(void 0!==n.max&&o===n.max)return e.t;if(!1===Vge(e.terms[e.t],n,e.start_i+e.t,e.phrase_length))return void 0!==n.min&&o<n.min?null:e.t}return e.t}(e,t[e.r+1]),null===e.t||r.min&&r.min>e.t?null:!0!==r.end||e.start_i+e.t===n||null},eve=function(e){let t=e.terms[e.t],n=e.regs[e.r];if(t.implicit&&e.terms[e.t+1]){if(!e.terms[e.t+1].implicit)return;n.word===t.normal&&(e.t+=1),"hasContraction"===n.method&&(e.t+=1)}},tve=function(e){const{regs:t}=e;let n=t[e.r],r=e.terms[e.t],o=e.t;if(n.optional&&t[e.r+1]&&n.negative)return!0;if(n.optional&&t[e.r+1]&&Qge(e),r.implicit&&e.terms[e.t+1]&&eve(e),e.t+=1,!0===n.end&&e.t!==e.terms.length&&!0!==n.greedy)return null;if(!0===n.greedy){if(!Zge(e))return null}return!0===e.hasGroup&&function(e,t){let n=e.regs[e.r];const r=Gge(e,t);e.t>1&&n.greedy?r.length+=e.t-t:r.length++}(e,o),!0},nve=function(e,t,n,r){if(0===e.length||0===t.length)return null;let o={t:0,terms:e,r:0,regs:t,groups:{},start_i:n,phrase_length:r,inGroup:null};for(;o.r<t.length;o.r+=1){let e=t[o.r];if(o.hasGroup=Boolean(e.group),!0===o.hasGroup?o.inGroup=e.group:o.inGroup=null,!o.terms[o.t]){if(!1===t.slice(o.r).some((e=>!e.optional)))break;return null}if(!0!==e.anything||!0!==e.greedy)if(void 0===e.choices||"or"!==e.operator)if(void 0===e.choices||"and"!==e.operator)if(!0!==e.anything)if(!0!==Wge(e,o))if(e.negative){if(!Yge(o))return null}else if(!0!==Vge(o.terms[o.t],e,o.start_i+o.t,o.phrase_length)){if(!0!==e.optional)return null}else{if(!tve(o))return null}else{if(!tve(o))return null}else{if(e.negative&&e.anything)return null;if(!tve(o))return null}else{if(!Xge(o))return null}else{if(!qge(o))return null}else{if(!Uge(o))return null}}let a=[null,n,o.t+n];if(a[1]===a[2])return null;let i={};return Object.keys(o.groups).forEach((e=>{let t=o.groups[e],r=n+t.start;i[e]=[null,r,r+t.length]})),{pointer:a,groups:i}},rve=function(e,t){let n=[],r={};return 0===e.length||("number"===typeof t&&(t=String(t)),t?e.forEach((e=>{e.groups[t]&&n.push(e.groups[t])})):e.forEach((e=>{n.push(e.pointer),Object.keys(e.groups).forEach((t=>{r[t]=r[t]||[],r[t].push(e.groups[t])}))}))),{ptrs:n,byGroup:r}},ove=function(e,t,n){return e=e.filter((e=>{let[r,o,a]=e.pointer,i=n[r].slice(o,a);for(let n=0;n<i.length;n+=1){let e=i.slice(n);if(null!==nve(e,t,n,i.length))return!1}return!0})),e},ave=function(e,t){return e.pointer[0]=t,Object.keys(e.groups).forEach((n=>{e.groups[n][0]=t})),e},ive=function(e,t,n){let r=nve(e,t,0,e.length);return r?(r=ave(r,n),r):null},sve=function(e,t,n){n=n||[];let{regs:r,group:o,justOne:a}=t,i=[];if(!r||0===r.length)return{ptrs:[],byGroup:{}};const s=r.filter((e=>!0!==e.optional&&!0!==e.negative)).length;e:for(let l=0;l<e.length;l+=1){let t=e[l];if(!n[l]||!Pge(r,n[l]))if(!0!==r[0].start)for(let e=0;e<t.length;e+=1){let n=t.slice(e);if(n.length<s)break;let o=nve(n,r,e,t.length);if(o){if(o=ave(o,l),i.push(o),!0===a)break e;let t=o.pointer[2];Math.abs(t-1)>e&&(e=Math.abs(t-1))}}else{let e=ive(t,r,l);e&&i.push(e)}}return!0===r[r.length-1].end&&(i=i.filter((t=>{let n=t.pointer[0];return e[n].length===t.pointer[2]}))),t.notIf&&(i=ove(i,t.notIf,e)),i=rve(i,o),i.ptrs.forEach((t=>{let[n,r,o]=t;t[3]=e[n][r].id,t[4]=e[n][o-1].id})),i},lve={api:ige,methods:{one:{termMethods:jge,parseMatch:Oge,match:sve}},lib:{parseMatch:function(e,t){const n=this.world();let r=n.methods.one.killUnicode;return r&&(e=r(e,n)),n.methods.one.parseMatch(e,t,n)}}},uve=/^\../,cve=/^#./,dve=function(e,t){let n={},r={};return Object.keys(t).forEach((o=>{let a=t[o],i=function(e){let t="",n="</span>";return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),uve.test(e)?t=`<span class="${e.replace(/^\./,"")}"`:cve.test(e)?t=`<span id="${e.replace(/^#/,"")}"`:(t=`<${e}`,n=`</${e}>`),t+=">",{start:t,end:n}}(o);"string"===typeof a&&(a=e.match(a)),a.docs.forEach((e=>{if(e.every((e=>e.implicit)))return;let t=e[0].id;n[t]=n[t]||[],n[t].push(i.start);let o=e[e.length-1].id;r[o]=r[o]||[],r[o].push(i.end)}))})),{starts:n,ends:r}},hve={html:function(e){let{starts:t,ends:n}=dve(this,e),r="";return this.docs.forEach((e=>{for(let o=0;o<e.length;o+=1){let a=e[o];t.hasOwnProperty(a.id)&&(r+=t[a.id].join("")),r+=a.pre||"",r+=a.text||"",n.hasOwnProperty(a.id)&&(r+=n[a.id].join("")),r+=a.post||""}})),r}},pve=/[,:;)\]*.?~!\u0022\uFF02\u201D\u2019\u00BB\u203A\u2032\u2033\u2034\u301E\u00B4\u2014-]+$/,fve=/^[(['"*~\uFF02\u201C\u2018\u201F\u201B\u201E\u2E42\u201A\u00AB\u2039\u2035\u2036\u2037\u301D\u0060\u301F]+/,mve=/[,:;)('"\u201D\]]/,gve=/^[-\u2013\u2014]$/,vve=/ /,bve=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r="";return e.forEach((e=>{let n=e.pre||"",o=e.post||"";"some"===t.punctuation&&(n=n.replace(fve,""),gve.test(o)&&(o=" "),o=o.replace(mve,""),o=o.replace(/\?!+/,"?"),o=o.replace(/!+/,"!"),o=o.replace(/\?+/,"?"),o=o.replace(/\.{2,}/,""),e.tags.has("Abbreviation")&&(o=o.replace(/\./,""))),"some"===t.whitespace&&(n=n.replace(/\s/,""),o=o.replace(/\s+/," ")),t.keepPunct||(n=n.replace(fve,""),o="-"===o?" ":o.replace(pve,""));let a=e[t.form||"text"]||e.normal||"";"implicit"===t.form&&(a=e.implicit||e.text),"root"===t.form&&e.implicit&&(a=e.root||e.implicit||e.normal),"machine"!==t.form&&"implicit"!==t.form&&"root"!==t.form||!e.implicit||o&&vve.test(o)||(o+=" "),r+=n+a+o})),!1===n&&(r=r.trim()),!0===t.lowerCase&&(r=r.toLowerCase()),r},yve={text:{form:"text"},normal:{whitespace:"some",punctuation:"some",case:"some",unicode:"some",form:"normal"},machine:{keepSpace:!1,whitespace:"some",punctuation:"some",case:"none",unicode:"some",form:"machine"},root:{keepSpace:!1,whitespace:"some",punctuation:"some",case:"some",unicode:"some",form:"root"},implicit:{form:"implicit"}};yve.clean=yve.normal,yve.reduced=yve.root;const wve=yve;let xve=[],kve=0;for(;kve<64;)xve[kve]=0|4294967296*Math.sin(++kve%Math.PI);const Cve=function(e){let t,n,r,o=[t=1732584193,n=4023233417,~t,~n],a=[],i=decodeURI(encodeURI(e))+"\x80",s=i.length;for(e=--s/4+2|15,a[--e]=8*s;~s;)a[s>>2]|=i.charCodeAt(s)<<8*s--;for(kve=i=0;kve<e;kve+=16){for(s=o;i<64;s=[r=s[3],t+((r=s[0]+[t&n|~t&r,r&t|~r&n,t^n^r,n^(t|~r)][s=i>>4]+xve[i]+~~a[kve|15&[i,5*i+1,3*i+5,7*i][s]])<<(s=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*s+i++%4])|r>>>-s),t,n])t=0|s[1],n=s[2];for(i=4;i;)o[--i]+=s[i]}for(e="";i<32;)e+=(o[i>>3]>>4*(1^i++)&15).toString(16);return e},Sve={text:!0,terms:!0};let Eve={case:"none",unicode:"some",form:"machine",punctuation:"some"};const Nve=function(e,t){return Object.assign({},e,t)},Ive={text:e=>bve(e,{keepPunct:!0},!1),normal:e=>bve(e,Nve(wve.normal,{keepPunct:!0}),!1),implicit:e=>bve(e,Nve(wve.implicit,{keepPunct:!0}),!1),machine:e=>bve(e,Eve,!1),root:e=>bve(e,Nve(Eve,{form:"root"}),!1),hash:e=>Cve(bve(e,{keepPunct:!0},!1)),offset:e=>{let t=Ive.text(e).length;return{index:e[0].offset.index,start:e[0].offset.start,length:t}},terms:e=>e.map((e=>{let t=Object.assign({},e);return t.tags=Array.from(e.tags),t})),confidence:(e,t,n)=>t.eq(n).confidence(),syllables:(e,t,n)=>t.eq(n).syllables(),sentence:(e,t,n)=>t.eq(n).fullSentence().text(),dirty:e=>e.some((e=>!0===e.dirty))};Ive.sentences=Ive.sentence,Ive.clean=Ive.normal,Ive.reduced=Ive.root;const $ve={json:function(e){let t=(n=this,"string"===typeof(r=(r=e)||{})&&(r={}),(r=Object.assign({},Sve,r)).offset&&n.compute("offset"),n.docs.map(((e,t)=>{let o={};return Object.keys(r).forEach((a=>{r[a]&&Ive[a]&&(o[a]=Ive[a](e,n,t))})),o})));var n,r;return"number"===typeof e?t[e]:t}};$ve.data=$ve.json;const Tve=$ve,Ave=function(e){let t=this.methods.one.debug||{};return e&&t.hasOwnProperty(e)?(t[e](this),this):"undefined"!==typeof window&&window.document?(t.clientSide(this),this):(t.tags(this),this)},Ove=function(e){let t=e.pre||"",n=e.post||"";return t+e.text+n},Rve=function(e,t){let n=function(e,t){let n={};return Object.keys(t).forEach((r=>{e.match(r).fullPointer.forEach((e=>{n[e[3]]={fn:t[r],end:e[2]}}))})),n}(e,t),r="";return e.docs.forEach(((t,o)=>{for(let a=0;a<t.length;a+=1){let i=t[a];if(n.hasOwnProperty(i.id)){let{fn:s,end:l}=n[i.id],u=e.update([[o,a,l]]);r+=t[a].pre||"",r+=s(u),a=l-1,r+=t[a].post||""}else r+=Ove(i)}})),r},Pve={debug:Ave,out:function(e){if(t=e,"[object Object]"===Object.prototype.toString.call(t))return Rve(this,e);var t;if("text"===e)return this.text();if("normal"===e)return this.text("normal");if("root"===e)return this.text("root");if("machine"===e||"reduced"===e)return this.text("machine");if("hash"===e||"md5"===e)return Cve(this.text());if("json"===e)return this.json();if("offset"===e||"offsets"===e)return this.compute("offset"),this.json({offset:!0});if("array"===e){let e=this.docs.map((e=>e.reduce(((e,t)=>e+t.pre+t.text+t.post),"").trim()));return e.filter((e=>e))}if("freq"===e||"frequency"===e||"topk"===e)return function(e){let t={};e.forEach((e=>{t[e]=t[e]||0,t[e]+=1}));let n=Object.keys(t).map((e=>({normal:e,count:t[e]})));return n.sort(((e,t)=>e.count>t.count?-1:0))}(this.json({normal:!0}).map((e=>e.normal)));if("terms"===e){let e=[];return this.docs.forEach((t=>{let n=t.map((e=>e.text));n=n.filter((e=>e)),e=e.concat(n)})),e}return"tags"===e?this.docs.map((e=>e.reduce(((e,t)=>(e[t.implicit||t.normal]=Array.from(t.tags),e)),{}))):"debug"===e?this.debug():this.text()},wrap:function(e){return Rve(this,e)}},Dve=Pve,Fve={text:function(e){let t={};var n;if(e&&"string"===typeof e&&wve.hasOwnProperty(e)?t=Object.assign({},wve[e]):e&&(n=e,"[object Object]"===Object.prototype.toString.call(n))&&(t=Object.assign({},e)),void 0!==t.keepSpace||this.isFull()||(t.keepSpace=!1),void 0===t.keepEndPunct&&this.pointer){let e=this.pointer[0];e&&e[1]?t.keepEndPunct=!1:t.keepEndPunct=!0}return void 0===t.keepPunct&&(t.keepPunct=!0),void 0===t.keepSpace&&(t.keepSpace=!0),function(e,t){let n="";if(!e||!e[0]||!e[0][0])return n;for(let r=0;r<e.length;r+=1)n+=bve(e[r],t,!0);if(t.keepSpace||(n=n.trim()),!1===t.keepEndPunct){e[0][0].tags.has("Emoticon")||(n=n.replace(fve,""));let t=e[e.length-1];t[t.length-1].tags.has("Emoticon")||(n=n.replace(pve,"")),n.endsWith("'")&&!n.endsWith("s'")&&(n=n.replace(/'/,""))}return!0===t.cleanWhitespace&&(n=n.trim()),n}(this.docs,t)}},_ve=Object.assign({},Dve,Fve,Tve,hve),Mve=function(e){Object.assign(e.prototype,_ve)},zve=function(e){console.log("%c -=-=- ","background-color:#6699cc;"),e.forEach((e=>{console.groupCollapsed(e.text());let t=e.docs[0].map((e=>{let t=e.text||"-";return e.implicit&&(t="["+e.implicit+"]"),{text:t,tags:"["+Array.from(e.tags).join(", ")+"]"}}));console.table(t,["text","tags"]),console.groupEnd()}))},Lve="\x1b[0m",Bve={green:e=>"\x1b[32m"+e+Lve,red:e=>"\x1b[31m"+e+Lve,blue:e=>"\x1b[34m"+e+Lve,magenta:e=>"\x1b[35m"+e+Lve,cyan:e=>"\x1b[36m"+e+Lve,yellow:e=>"\x1b[33m"+e+Lve,black:e=>"\x1b[30m"+e+Lve,dim:e=>"\x1b[2m"+e+Lve,i:e=>"\x1b[3m"+e+Lve},jve=function(e){let{docs:t,model:n}=e;0===t.length&&console.log(Bve.blue("\n     \u2500\u2500\u2500\u2500\u2500\u2500")),t.forEach((t=>{console.log(Bve.blue("\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500")),t.forEach((t=>{let r=[...t.tags||[]],o=t.text||"-";t.sense&&(o=`{${t.normal}/${t.sense}}`),t.implicit&&(o="["+t.implicit+"]"),o=Bve.yellow(o);let a="'"+o+"'";if(t.reference){let n=e.update([t.reference]).text("normal");a+=` - ${Bve.dim(Bve.i("["+n+"]"))}`}a=a.padEnd(18);let i=Bve.blue("  \u2502 ")+Bve.i(a)+"  - "+function(e,t){return t.one.tagSet&&(e=e.map((e=>{if(!t.one.tagSet.hasOwnProperty(e))return e;const n=t.one.tagSet[e].color||"blue";return Bve[n](e)}))),e.join(", ")}(r,n);console.log(i)}))})),console.log("\n")},Hve=function(e){let{docs:t}=e;console.log(""),t.forEach((e=>{let t=[];e.forEach((e=>{"Noun"===e.chunk?t.push(Bve.blue(e.implicit||e.normal)):"Verb"===e.chunk?t.push(Bve.green(e.implicit||e.normal)):"Adjective"===e.chunk?t.push(Bve.yellow(e.implicit||e.normal)):"Pivot"===e.chunk?t.push(Bve.red(e.implicit||e.normal)):t.push(e.implicit||e.normal)})),console.log(t.join(" "),"\n")})),console.log("\n")},Vve=function(e){if(!e.found)return;let t={};e.fullPointer.forEach((e=>{t[e[0]]=t[e[0]]||[],t[e[0]].push(e)})),Object.keys(t).forEach((n=>{let r=e.update([[Number(n)]]).text();e.update(t[n]).json({offset:!0}).forEach(((e,t)=>{r=function(e,t,n){let r=((e,t,n)=>{let r=9*n,o=t.start+r,a=o+t.length;return[e.substring(0,o),e.substring(o,a),e.substring(a,e.length)]})(e,t,n);return`${r[0]}${Bve.blue(r[1])}${r[2]}`}(r,e.offset,t)})),console.log(r)})),console.log("\n")},Wve={api:Mve,methods:{one:{hash:Cve,debug:{tags:jve,clientSide:zve,chunks:Hve,highlight:Vve}}}},Gve=function(e,t){if(e[0]!==t[0])return!1;let[,n,r]=e,[,o,a]=t;return n<=o&&r>o||o<=n&&a>n},Uve=function(e){let t={};return e.forEach((e=>{t[e[0]]=t[e[0]]||[],t[e[0]].push(e)})),t},Kve=function(e,t){let n=Uve(t),r=[];return e.forEach((e=>{let[t]=e,o=n[t]||[];if(o=o.filter((t=>function(e,t){return e[1]<=t[1]&&t[2]<=e[2]}(e,t))),0===o.length)return void r.push({passthrough:e});o=o.sort(((e,t)=>e[1]-t[1]));let a=e;o.forEach(((e,t)=>{let n=function(e,t){let[n,r]=e,o=t[1],a=t[2],i={};if(r<o){let t=o<e[2]?o:e[2];i.before=[n,r,t]}return i.match=t,e[2]>a&&(i.after=[n,a,e[2]]),i}(a,e);o[t+1]?(r.push({before:n.before,match:n.match}),n.after&&(a=n.after)):r.push(n)}))})),r},qve=function(e,t){let n=[];return e.forEach(((r,o)=>{if(!r)return;let[a,i,s,l,u]=r,c=t[a]||[];if(void 0===i&&(i=0),void 0===s&&(s=c.length),!l||c[i]&&c[i].id===l)c=c.slice(i,s);else{let n=function(e,t,n){for(let r=0;r<20;r+=1){if(t[n-r]){let o=t[n-r].findIndex((t=>t.id===e));if(-1!==o)return[n-r,o]}if(t[n+r]){let o=t[n+r].findIndex((t=>t.id===e));if(-1!==o)return[n+r,o]}}return null}(l,t,a);if(null!==n){let r=s-i;c=t[n[0]].slice(n[1],n[1]+r);let a=c[0]?c[0].id:null;e[o]=[n[0],n[1],n[1]+r,a]}}0!==c.length&&i!==s&&(u&&c[c.length-1].id!==u&&(c=function(e,t){let[n,r,,,o]=e,a=t[n],i=a.findIndex((e=>e.id===o));return-1===i?(e[2]=t[n].length,e[4]=a.length?a[a.length-1].id:null):e[2]=i,t[n].slice(r,e[2]+1)}(r,t)),n.push(c))})),n=n.filter((e=>e.length>0)),n},Xve={one:{termList:function(e){let t=[];for(let n=0;n<e.length;n+=1)for(let r=0;r<e[n].length;r+=1)t.push(e[n][r]);return t},getDoc:qve,pointer:{indexN:Uve,splitAll:Kve}}},Jve=function(e,t){let n=e.concat(t),r=Uve(n),o=[];return n.forEach((e=>{let[t]=e;if(1===r[t].length)return void o.push(e);let n=r[t].filter((t=>Gve(e,t)));n.push(e);let a=function(e){let t=e[0][1],n=e[0][2];return e.forEach((e=>{e[1]<t&&(t=e[1]),e[2]>n&&(n=e[2])})),[e[0][0],t,n]}(n);o.push(a)})),o=function(e){let t={};for(let n=0;n<e.length;n+=1)t[e[n].join(",")]=e[n];return Object.values(t)}(o),o},Yve=function(e,t){let n=[];return Kve(e,t).forEach((e=>{e.passthrough&&n.push(e.passthrough),e.before&&n.push(e.before),e.after&&n.push(e.after)})),n},Qve=function(e,t){let n=Uve(t),r=[];return e.forEach((e=>{let t=n[e[0]]||[];t=t.filter((t=>Gve(e,t))),0!==t.length&&t.forEach((t=>{let n=function(e,t){let n=e[1]<t[1]?t[1]:e[1],r=e[2]>t[2]?t[2]:e[2];return n<r?[e[0],n,r]:null}(e,t);n&&r.push(n)}))})),r},Zve=(e,t)=>{return"string"===typeof e||(n=e,"[object Array]"===Object.prototype.toString.call(n))?t.match(e):e||t.none();var n},ebe=function(e,t){return e.map((e=>{let[n,r]=e;return t[n]&&t[n][r]&&(e[3]=t[n][r].id),e}))},tbe={union:function(e){e=Zve(e,this);let t=Jve(this.fullPointer,e.fullPointer);return t=ebe(t,this.document),this.toView(t)}};tbe.and=tbe.union,tbe.intersection=function(e){e=Zve(e,this);let t=Qve(this.fullPointer,e.fullPointer);return t=ebe(t,this.document),this.toView(t)},tbe.not=function(e){e=Zve(e,this);let t=Yve(this.fullPointer,e.fullPointer);return t=ebe(t,this.document),this.toView(t)},tbe.difference=tbe.not,tbe.complement=function(){let e=this.all(),t=Yve(e.fullPointer,this.fullPointer);return t=ebe(t,this.document),this.toView(t)},tbe.settle=function(){let e=this.fullPointer;return e.forEach((t=>{e=Jve(e,[t])})),e=ebe(e,this.document),this.update(e)};const nbe=function(e){Object.assign(e.prototype,tbe)},rbe={methods:Xve,api:nbe},obe=function(e){e.prototype.sweep=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{world:n,docs:r}=this,{methods:o}=n;let a=o.one.bulkMatch(r,e,this.methods,t);!1!==t.tagger&&o.one.bulkTagger(a,r,this.world),a=a.map((e=>{let t=e.pointer,n=r[t[0]][t[1]],o=t[2]-t[1];return n.index&&(e.pointer=[n.index[0],n.index[1],t[1]+o]),e}));let i=a.map((e=>e.pointer));return a=a.map((e=>(e.view=this.update([e.pointer]),delete e.regs,delete e.needs,delete e.pointer,delete e._expanded,e))),{view:this.update(i),found:a}}},abe=function(e){return!0===e.optional||!0===e.negative?null:e.tag?"#"+e.tag:e.word?e.word:e.switch?`%${e.switch}%`:null},ibe=function(e,t){const n=t.methods.one.parseMatch;return e.forEach((e=>{e.regs=n(e.match,{},t),"string"===typeof e.ifNo&&(e.ifNo=[e.ifNo]),e.notIf&&(e.notIf=n(e.notIf,{},t)),e.needs=function(e){let t=[];return e.forEach((e=>{t.push(abe(e)),"and"===e.operator&&e.choices&&e.choices.forEach((e=>{e.forEach((e=>{t.push(abe(e))}))}))})),t.filter((e=>e))}(e.regs);let{wants:r,count:o}=function(e){let t=[],n=0;return e.forEach((e=>{"or"!==e.operator||e.optional||e.negative||(e.fastOr&&Array.from(e.fastOr).forEach((e=>{t.push(e)})),e.choices&&e.choices.forEach((e=>{e.forEach((e=>{let n=abe(e);n&&t.push(n)}))})),n+=1)})),{wants:t,count:n}}(e.regs);e.wants=r,e.minWant=o,e.minWords=e.regs.filter((e=>!e.optional)).length})),e},sbe=function(e,t){e=ibe(e,t);let n={};e.forEach((e=>{e.needs.forEach((t=>{n[t]=Array.isArray(n[t])?n[t]:[],n[t].push(e)})),e.wants.forEach((t=>{n[t]=Array.isArray(n[t])?n[t]:[],n[t].push(e)}))})),Object.keys(n).forEach((e=>{let t={};n[e]=n[e].filter((e=>"boolean"!==typeof t[e.match]&&(t[e.match]=!0,!0)))}));let r=e.filter((e=>0===e.needs.length&&0===e.wants.length));return{hooks:n,always:r}},lbe=function(e,t){return e.map(((n,r)=>{let o=[];Object.keys(t).forEach((n=>{e[r].has(n)&&(o=o.concat(t[n]))}));let a={};return o=o.filter((e=>"boolean"!==typeof a[e.match]&&(a[e.match]=!0,!0))),o}))},ube=function(e,t){return e.map(((e,n)=>{let r=t[n];return e=(e=(e=e.filter((e=>e.needs.every((e=>r.has(e)))))).filter((e=>void 0===e.ifNo||!0!==e.ifNo.some((e=>r.has(e)))))).filter((e=>{if(0===e.wants.length)return!0;return e.wants.filter((e=>r.has(e))).length>=e.minWant}))}))},cbe=function(e,t,n,r,o){let a=[];for(let i=0;i<e.length;i+=1)for(let n=0;n<e[i].length;n+=1){let s=e[i][n],l=r.one.match([t[i]],s);if(l.ptrs.length>0&&(l.ptrs.forEach((e=>{e[0]=i;let t=Object.assign({},s,{pointer:e});void 0!==s.unTag&&(t.unTag=s.unTag),a.push(t)})),!0===o.matchOne))return[a[0]]}return a},dbe=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.one.cacheDoc(e),a=lbe(o,t.hooks);return a=ube(a,o,e),t.always.length>0&&(a=a.map((e=>e.concat(t.always)))),a=function(e,t){return e.map(((e,n)=>{let r=t[n].length;return e=e.filter((e=>r>=e.minWords)),e}))}(a,e),cbe(a,e,o,n,r)},hbe=function(e,t,n){let r=n.one.tagSet;if(!r.hasOwnProperty(t))return!0;let o=r[t].not||[];for(let a=0;a<e.length;a+=1){let t=e[a];for(let e=0;e<o.length;e+=1)if(!0===t.tags.has(o[e]))return!1}return!0},pbe=function(e,t,n){const{model:r,methods:o}=n,{getDoc:a,setTag:i,unTag:s}=o.one,l=o.two.looksPlural;if(0===e.length)return e;return("undefined"===typeof process?self.env||{}:{NODE_ENV:"production",PUBLIC_URL:"/websm",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).DEBUG_TAGS&&console.log(`\n\n  \x1b[32m\u2192 ${e.length} post-tagger:\x1b[0m`),e.map((e=>{if(!e.tag&&!e.chunk&&!e.unTag)return;let o=e.reason||e.match,u=a([e.pointer],t)[0];if(!0===e.safe){if(!1===hbe(u,e.tag,r))return;if("-"===u[u.length-1].post)return}if(void 0!==e.tag){if(i(u,e.tag,n,e.safe,`[post] '${o}'`),"Noun"===e.tag&&l){let t=u[u.length-1];l(t.text)?i([t],"Plural",n,e.safe,"quick-plural"):i([t],"Singular",n,e.safe,"quick-singular")}!0===e.freeze&&u.forEach((e=>e.frozen=!0))}void 0!==e.unTag&&s(u,e.unTag,n,e.safe,o),e.chunk&&u.forEach((t=>t.chunk=e.chunk))}))},fbe={lib:{buildNet:function(e){let t=this.methods().one.buildNet(e,this.world());return t.isNet=!0,t}},api:obe,methods:{one:{buildNet:sbe,bulkMatch:dbe,bulkTagger:pbe}}},mbe=/ /,gbe=function(e,t){"Noun"===t&&(e.chunk=t),"Verb"===t&&(e.chunk=t)},vbe=function(e,t,n,r){if(!0===e.tags.has(t))return null;if("."===t)return null;!0===e.frozen&&(r=!0);let o=n[t];if(o){if(o.not&&o.not.length>0)for(let t=0;t<o.not.length;t+=1){if(!0===r&&e.tags.has(o.not[t]))return null;e.tags.delete(o.not[t])}if(o.parents&&o.parents.length>0)for(let t=0;t<o.parents.length;t+=1)e.tags.add(o.parents[t]),gbe(e,o.parents[t])}return e.tags.add(t),e.dirty=!0,gbe(e,t),!0},bbe=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;const a=n.model.one.tagSet||{};if(!t)return;const i="undefined"===typeof process?self.env||{}:{NODE_ENV:"production",PUBLIC_URL:"/websm",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0};var s;if(i&&i.DEBUG_TAGS&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=e.map((e=>e.text||"["+e.implicit+"]")).join(" ");var o;"string"!==typeof t&&t.length>2&&(t=t.slice(0,2).join(", #")+" +"),t="string"!==typeof t?t.join(", #"):t,console.log(` ${(o=r,"\x1b[33m\x1b[3m"+o+"\x1b[0m").padEnd(24)} \x1b[32m\u2192\x1b[0m #${t.padEnd(22)}  ${(e=>"\x1b[3m"+e+"\x1b[0m")(n)}`)}(e,t,o),!0!==(s=t,"[object Array]"===Object.prototype.toString.call(s)))if("string"===typeof t)if(t=t.trim(),mbe.test(t))!function(e,t,n,r){let o=t.split(mbe);e.forEach(((e,t)=>{let a=o[t];a&&(a=a.replace(/^#/,""),vbe(e,a,n,r))}))}(e,t,a,r);else{t=t.replace(/^#/,"");for(let n=0;n<e.length;n+=1)vbe(e[n],t,a,r)}else console.warn(`compromise: Invalid tag '${t}'`);else t.forEach((t=>bbe(e,t,n,r)))},ybe=bbe,wbe=function(e,t,n){t=t.trim().replace(/^#/,"");for(let r=0;r<e.length;r+=1){let o=e[r];if(!0===o.frozen)continue;if("*"===t){o.tags.clear();continue}let a=n[t];if(a&&a.children.length>0)for(let e=0;e<a.children.length;e+=1)o.tags.delete(a.children[e]);o.tags.delete(t)}},xbe=function(e,t,n){if(!n.hasOwnProperty(t))return!0;let r=n[t].not||[];for(let o=0;o<r.length;o+=1)if(e.tags.has(r[o]))return!1;return!0},kbe=function(e){return e.children=e.children||[],e._cache=e._cache||{},e.props=e.props||{},e._cache.parents=e._cache.parents||[],e._cache.children=e._cache.children||[],e},Cbe=/^ *(#|\/\/)/,Sbe=function(e){let t=e.trim().split(/->/),n=[];t.forEach((e=>{n=n.concat(function(e){if(!(e=e.trim()))return null;if(/^\[/.test(e)&&/\]$/.test(e)){let t=(e=(e=e.replace(/^\[/,"")).replace(/\]$/,"")).split(/,/);return t=t.map((e=>e.trim())).filter((e=>e)),t=t.map((e=>kbe({id:e}))),t}return[kbe({id:e})]}(e))})),n=n.filter((e=>e));let r=n[0];for(let o=1;o<n.length;o+=1)r.children.push(n[o]),r=n[o];return n[0]},Ebe=(e,t)=>{let n=[],r=[e];for(;r.length>0;){let e=r.pop();n.push(e),e.children&&e.children.forEach((n=>{t&&t(e,n),r.push(n)}))}return n},Nbe=e=>"[object Array]"===Object.prototype.toString.call(e),Ibe=e=>(e=e||"").trim(),$be=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return"string"==typeof e?function(e){let t=e.split(/\r?\n/),n=[];t.forEach((e=>{if(!e.trim()||Cbe.test(e))return;let t=(e=>{const t=/^( {2}|\t)/;let n=0;for(;t.test(e);)e=e.replace(t,""),n+=1;return n})(e);n.push({indent:t,node:Sbe(e)})}));let r=function(e){let t={children:[]};return e.forEach(((n,r)=>{0===n.indent?t.children=t.children.concat(n.node):e[r-1]&&function(e,t){let n=e[t].indent;for(;t>=0;t-=1)if(e[t].indent<n)return e[t];return e[0]}(e,r).node.children.push(n.node)})),t}(n);return r=kbe(r),r}(e):Nbe(e)?function(e){let t={};e.forEach((e=>{t[e.id]=e}));let n=kbe({});return e.forEach((e=>{if((e=kbe(e)).parent)if(t.hasOwnProperty(e.parent)){let n=t[e.parent];delete e.parent,n.children.push(e)}else console.warn(`[Grad] - missing node '${e.parent}'`);else n.children.push(e)})),n}(e):(Ebe(t=e).forEach(kbe),t);var t},Tbe=function(e,t){let n="-> ";t&&(n=(e=>"\x1b[2m"+e+"\x1b[0m")("\u2192 "));let r="";return Ebe(e).forEach(((e,o)=>{let a=e.id||"";if(t&&(a=(e=>"\x1b[31m"+e+"\x1b[0m")(a)),0===o&&!e.id)return;let i=e._cache.parents.length;r+="    ".repeat(i)+n+a+"\n"})),r},Abe=function(e){let t=Ebe(e);t.forEach((e=>{delete(e=Object.assign({},e)).children}));let n=t[0];return n&&!n.id&&0===Object.keys(n.props).length&&t.shift(),t},Obe={text:Tbe,txt:Tbe,array:Abe,flat:Abe},Rbe=function(e,t){return"nested"===t||"json"===t?e:"debug"===t?(console.log(Tbe(e,!0)),null):Obe.hasOwnProperty(t)?Obe[t](e):e},Pbe=e=>{Ebe(e,((e,t)=>{e.id&&(e._cache.parents=e._cache.parents||[],t._cache.parents=e._cache.parents.concat([e.id]))}))},Dbe=/\//;class Fbe{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.defineProperty(this,"json",{enumerable:!1,value:e,writable:!0})}get children(){return this.json.children}get id(){return this.json.id}get found(){return this.json.id||this.json.children.length>0}props(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.json.props||{};return"string"==typeof e&&(t[e]=!0),this.json.props=Object.assign(t,e),this}get(e){if(e=Ibe(e),!Dbe.test(e)){let t=this.json.children.find((t=>t.id===e));return new Fbe(t)}let t=((e,t)=>{let n=(e=>"string"!=typeof e?e:(e=e.replace(/^\//,"")).split(/\//))(t=t||"");for(let r=0;r<n.length;r+=1){let t=e.children.find((e=>e.id===n[r]));if(!t)return null;e=t}return e})(this.json,e)||kbe({});return new Fbe(t)}add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Nbe(e))return e.forEach((e=>this.add(Ibe(e),t))),this;e=Ibe(e);let n=kbe({id:e,props:t});return this.json.children.push(n),new Fbe(n)}remove(e){return e=Ibe(e),this.json.children=this.json.children.filter((t=>t.id!==e)),this}nodes(){return Ebe(this.json).map((e=>(delete(e=Object.assign({},e)).children,e)))}cache(){return(e=>{let t=Ebe(e,((e,t)=>{e.id&&(e._cache.parents=e._cache.parents||[],e._cache.children=e._cache.children||[],t._cache.parents=e._cache.parents.concat([e.id]))})),n={};t.forEach((e=>{e.id&&(n[e.id]=e)})),t.forEach((e=>{e._cache.parents.forEach((t=>{n.hasOwnProperty(t)&&n[t]._cache.children.push(e.id)}))})),e._cache.children=Object.keys(n)})(this.json),this}list(){return Ebe(this.json)}fillDown(){var e;return e=this.json,Ebe(e,((e,t)=>{t.props=((e,t)=>(Object.keys(t).forEach((n=>{if(t[n]instanceof Set){let r=e[n]||new Set;e[n]=new Set([...r,...t[n]])}else if((e=>e&&"object"==typeof e&&!Array.isArray(e))(t[n])){let r=e[n]||{};e[n]=Object.assign({},t[n],r)}else Nbe(t[n])?e[n]=t[n].concat(e[n]||[]):void 0===e[n]&&(e[n]=t[n])})),e))(t.props,e.props)})),this}depth(){Pbe(this.json);let e=Ebe(this.json),t=e.length>1?1:0;return e.forEach((e=>{if(0===e._cache.parents.length)return;let n=e._cache.parents.length+1;n>t&&(t=n)})),t}out(e){return Pbe(this.json),Rbe(this.json,e)}debug(){return Pbe(this.json),Rbe(this.json,"debug"),this}}const _be=function(e){let t=$be(e);return new Fbe(t)};_be.prototype.plugin=function(e){e(this)};const Mbe={Noun:"blue",Verb:"green",Negative:"green",Date:"red",Value:"red",Adjective:"magenta",Preposition:"cyan",Conjunction:"cyan",Determiner:"cyan",Hyphenated:"cyan",Adverb:"cyan"},zbe=function(e){if(Mbe.hasOwnProperty(e.id))return Mbe[e.id];if(Mbe.hasOwnProperty(e.is))return Mbe[e.is];let t=e._cache.parents.find((e=>Mbe[e]));return Mbe[t]},Lbe=function(e){const t={};return e.forEach((e=>{let{not:n,also:r,is:o,novel:a}=e.props,i=e._cache.parents;r&&(i=i.concat(r)),t[e.id]={is:o,not:n,novel:a,also:r,parents:i,children:e._cache.children,color:zbe(e)}})),Object.keys(t).forEach((e=>{let n=new Set(t[e].not);t[e].not.forEach((e=>{t[e]&&t[e].children.forEach((e=>n.add(e)))})),t[e].not=Array.from(n)})),t},Bbe=function(e){return e?"string"===typeof e?[e]:e:[]},jbe=function(e,t){return e=function(e,t){return Object.keys(e).forEach((n=>{e[n].isA&&(e[n].is=e[n].isA),e[n].notA&&(e[n].not=e[n].notA),e[n].is&&"string"===typeof e[n].is&&(t.hasOwnProperty(e[n].is)||e.hasOwnProperty(e[n].is)||(e[e[n].is]={})),e[n].not&&"string"===typeof e[n].not&&!e.hasOwnProperty(e[n].not)&&(t.hasOwnProperty(e[n].not)||e.hasOwnProperty(e[n].not)||(e[e[n].not]={}))})),e}(e,t),Object.keys(e).forEach((t=>{e[t].children=Bbe(e[t].children),e[t].not=Bbe(e[t].not)})),Object.keys(e).forEach((t=>{(e[t].not||[]).forEach((n=>{e[n]&&e[n].not&&e[n].not.push(t)}))})),e},Hbe=function(e,t){Object.keys(t).length>0&&(e=function(e){return Object.keys(e).forEach((t=>{e[t]=Object.assign({},e[t]),e[t].novel=!0})),e}(e)),e=jbe(e,t);const n=function(e){const t=Object.keys(e).map((t=>{let n=e[t];const r={not:new Set(n.not),also:n.also,is:n.is,novel:n.novel};return{id:t,parent:n.is,props:r,children:[]}}));return _be(t).cache().fillDown().out("array")}(Object.assign({},t,e));return Lbe(n)},Vbe={one:{setTag:ybe,unTag:wbe,addTags:Hbe,canBe:xbe}},Wbe=function(e){return"[object Array]"===Object.prototype.toString.call(e)},Gbe={tag:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;if(!this.found||!e)return this;let r=this.termList();if(0===r.length)return this;const{methods:o,verbose:a,world:i}=this;return!0===a&&console.log(" +  ",e,t||""),Wbe(e)?e.forEach((e=>o.one.setTag(r,e,i,n,t))):o.one.setTag(r,e,i,n,t),this.uncache(),this},tagSafe:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.tag(e,t,!0)},unTag:function(e,t){if(!this.found||!e)return this;let n=this.termList();if(0===n.length)return this;const{methods:r,verbose:o,model:a}=this;!0===o&&console.log(" -  ",e,t||"");let i=a.one.tagSet;return Wbe(e)?e.forEach((e=>r.one.unTag(n,e,i))):r.one.unTag(n,e,i),this.uncache(),this},canBe:function(e){e=e.replace(/^#/,"");let t=this.model.one.tagSet,n=this.methods.one.canBe,r=[];this.document.forEach(((o,a)=>{o.forEach(((o,i)=>{n(o,e,t)||r.push([a,i,i+1])}))}));let o=this.update(r);return this.difference(o)}},Ube=Gbe,Kbe=function(e){Object.assign(e.prototype,Ube)},qbe={addTags:function(e){const{model:t,methods:n}=this.world(),r=t.one.tagSet;let o=(0,n.one.addTags)(e,r);return t.one.tagSet=o,this}},Xbe=new Set(["Auxiliary","Possessive"]),Jbe=function(e){const{document:t,world:n}=e,r=n.model.one.tagSet;t.forEach((e=>{e.forEach((e=>{let t=Array.from(e.tags);e.tagRank=function(e,t){return e=e.sort(((e,n)=>{if(Xbe.has(e)||!t.hasOwnProperty(n))return 1;if(Xbe.has(n)||!t.hasOwnProperty(e))return-1;let r=t[e].children||[],o=r.length;return r=t[n].children||[],o-r.length})),e}(t,r)}))}))},Ybe={model:{one:{tagSet:{}}},compute:{tagRank:Jbe},methods:Vbe,api:Kbe,lib:qbe},Qbe=/([.!?\u203D\u2E18\u203C\u2047-\u2049\u3002]+\s)/g,Zbe=/^[.!?\u203D\u2E18\u203C\u2047-\u2049\u3002]+\s$/,eye=/((?:\r?\n|\r)+)/,tye=function(e){let t=[],n=e.split(eye);for(let r=0;r<n.length;r++){let e=n[r].split(Qbe);for(let n=0;n<e.length;n++)e[n+1]&&!0===Zbe.test(e[n+1])&&(e[n]+=e[n+1],e[n+1]=""),""!==e[n]&&t.push(e[n])}return t},nye=/[a-z0-9\u00C0-\u00FF\u00a9\u00ae\u2000-\u3300\ud000-\udfff]/i,rye=/\S/,oye=function(e){let t=[];for(let n=0;n<e.length;n++){let r=e[n];if(void 0!==r&&""!==r){if(!1===rye.test(r)||!1===nye.test(r)){if(t[t.length-1]){t[t.length-1]+=r;continue}if(e[n+1]){e[n+1]=r+e[n+1];continue}}t.push(r)}}return t},aye=function(e,t){const n=t.methods.one.tokenize.isSentence,r=t.model.one.abbreviations||new Set;let o=[];for(let a=0;a<e.length;a++){let t=e[a];e[a+1]&&!1===n(t,r)?e[a+1]=t+(e[a+1]||""):t&&t.length>0&&(o.push(t),e[a]="")}return o},iye={'"':'"',"\uff02":"\uff02","\u201c":"\u201d","\u201f":"\u201d","\u201e":"\u201d","\u2e42":"\u201d","\u201a":"\u2019","\xab":"\xbb","\u2039":"\u203a","\u2035":"\u2032","\u2036":"\u2033","\u2037":"\u2034","\u301d":"\u301e","\u301f":"\u301e"},sye=RegExp("["+Object.keys(iye).join("")+"]","g"),lye=RegExp("["+Object.values(iye).join("")+"]","g"),uye=function(e){if(!e)return!1;let t=e.match(lye);return null!==t&&1===t.length},cye=function(e){let t=[];for(let n=0;n<e.length;n+=1){let r=e[n].match(sye);if(null!==r&&1===r.length){if(uye(e[n+1])&&e[n+1].length<280){e[n]+=e[n+1],t.push(e[n]),e[n+1]="",n+=1;continue}if(uye(e[n+2])){let r=e[n+1]+e[n+2];if(r.length<280){e[n]+=r,t.push(e[n]),e[n+1]="",e[n+2]="",n+=2;continue}}}t.push(e[n])}return t},dye=/\(/g,hye=/\)/g,pye=function(e){let t=[];for(let n=0;n<e.length;n+=1){let r=e[n].match(dye);if(null!==r&&1===r.length&&e[n+1]&&e[n+1].length<250){if(null!==e[n+1].match(hye)&&1===r.length&&!dye.test(e[n+1])){e[n]+=e[n+1],t.push(e[n]),e[n+1]="",n+=1;continue}}t.push(e[n])}return t},fye=/\S/,mye=/^\s+/,gye=function(e,t){if(e=e||"",!(e=String(e))||"string"!==typeof e||!1===fye.test(e))return[];e=e.replace("\xa0"," ");let n=tye(e),r=oye(n);if(r=aye(r,t),r=cye(r),r=pye(r),0===r.length)return[e];for(let o=1;o<r.length;o+=1){let e=r[o].match(mye);null!==e&&(r[o-1]+=e[0],r[o]=r[o].replace(mye,""))}return r},vye=function(e,t){let n=e.split(/[-\u2013\u2014]/);if(n.length<=1)return!1;const{prefixes:r,suffixes:o}=t.one;if(1===n[0].length&&/[a-z]/i.test(n[0]))return!1;if(r.hasOwnProperty(n[0]))return!1;if(n[1]=n[1].trim().replace(/[.?!]$/,""),o.hasOwnProperty(n[1]))return!1;if(!0===/^([a-z\u00C0-\u00FF`"'/]+)[-\u2013\u2014]([a-z0-9\u00C0-\u00FF].*)/i.test(e))return!0;return!0===/^[('"]?([0-9]{1,4})[-\u2013\u2014]([a-z\u00C0-\u00FF`"'/-]+[)'"]?$)/i.test(e)},bye=function(e){let t=[];const n=e.split(/[-\u2013\u2014]/);let r="-",o=e.match(/[-\u2013\u2014]/);o&&o[0]&&(r=o);for(let a=0;a<n.length;a++)a===n.length-1?t.push(n[a]):t.push(n[a]+r);return t},yye=function(e){const t=/^[0-9]{1,4}(:[0-9][0-9])?([a-z]{1,2})? ?[-\u2013\u2014] ?$/,n=/^[0-9]{1,4}([a-z]{1,2})? ?$/;for(let r=0;r<e.length-1;r+=1)e[r+1]&&t.test(e[r])&&n.test(e[r+1])&&(e[r]=e[r]+e[r+1],e[r+1]=null);return e},wye=/\p{L} ?\/ ?\p{L}+$/u,xye=function(e){for(let t=1;t<e.length-1;t++)wye.test(e[t])&&(e[t-1]+=e[t]+e[t+1],e[t]=null,e[t+1]=null);return e},kye=/\S/,Cye=/^[!?.]+$/,Sye=/(\S+)/;let Eye=[".","?","!",":",";","-","\u2013","\u2014","--","...","(",")","[","]",'"',"'","`","\xab","\xbb","*","\u2022"];Eye=Eye.reduce(((e,t)=>(e[t]=!0,e)),{});const Nye=function(e,t){let n=[],r=[];if("number"===typeof(e=e||"")&&(e=String(e)),function(e){return"[object Array]"===Object.prototype.toString.call(e)}(e))return e;const o=e.split(Sye);for(let i=0;i<o.length;i++)!0!==vye(o[i],t)?r.push(o[i]):r=r.concat(bye(o[i]));let a="";for(let i=0;i<r.length;i++){let e=r[i];!0===kye.test(e)&&!1===Eye.hasOwnProperty(e)&&!1===Cye.test(e)?(n.length>0?(n[n.length-1]+=a,n.push(e)):n.push(a+e),a=""):a+=e}return a&&(0===n.length&&(n[0]=""),n[n.length-1]+=a),n=xye(n),n=yye(n),n=n.filter((e=>e)),n},Iye=/\p{Letter}/u,$ye=/[\p{Number}\p{Currency_Symbol}]/u,Tye=/^[a-z]\.([a-z]\.)+/i,Aye=/[sn]['\u2019]$/,Oye=function(e,t){let{prePunctuation:n,postPunctuation:r,emoticons:o}=t.one,a=e,i="",s="",l=Array.from(e);if(o.hasOwnProperty(e.trim()))return{str:e.trim(),pre:i,post:" "};let u=l.length;for(let c=0;c<u;c+=1){let e=l[0];if(!0!==n[e]){if(("+"===e||"-"===e)&&$ye.test(l[1]))break;if("'"===e&&3===e.length&&$ye.test(l[1]))break;if(Iye.test(e)||$ye.test(e))break;i+=l.shift()}}u=l.length;for(let c=0;c<u;c+=1){let e=l[l.length-1];if(!0!==r[e]){if(Iye.test(e)||$ye.test(e))break;"."===e&&!0===Tye.test(a)||"'"===e&&!0===Aye.test(a)||(s=l.pop()+s)}}return""===(e=l.join(""))&&(a=a.replace(/ *$/,(e=>(s=e||"",""))),e=a,i=""),{str:e,pre:i,post:s}},Rye=(e,t)=>{let{str:n,pre:r,post:o}=Oye(e,t);return{text:n,pre:r,post:o,tags:new Set}},Pye=function(e,t){const n=t.model.one.unicode||{};let r=(e=e||"").split("");return r.forEach(((e,t)=>{n[e]&&(r[t]=n[e])})),r.join("")},Dye=function(e){let t=e=(e=(e=e||"").toLowerCase()).trim();return e=(e=(e=e.replace(/[,;.!?]+$/,"")).replace(/\u2026/g,"...")).replace(/\u2013/g,"-"),!1===/^[:;]/.test(e)&&(e=(e=(e=e.replace(/\.{3,}$/g,"")).replace(/[",.!:;?)]+$/g,"")).replace(/^['"(]+/g,"")),""===(e=(e=e.replace(/[\u200B-\u200D\uFEFF]/g,"")).trim())&&(e=t),e=e.replace(/([0-9]),([0-9])/g,"$1$2")},Fye=/([A-Z]\.)+[A-Z]?,?$/,_ye=/^[A-Z]\.,?$/,Mye=/[A-Z]{2,}('s|,)?$/,zye=/([a-z]\.)+[a-z]\.?$/,Lye=function(e){return function(e){return!0===Fye.test(e)||!0===zye.test(e)||!0===_ye.test(e)||!0===Mye.test(e)}(e)&&(e=e.replace(/\./g,"")),e},Bye=function(e,t){const n=t.methods.one.killUnicode;let r=e.text||"";r=Dye(r),r=n(r,t),r=Lye(r),e.normal=r},jye=function(e,t){const{methods:n,model:r}=t,{splitSentences:o,splitTerms:a,splitWhitespace:i}=n.one.tokenize;return e=o(e=e||"",t).map((e=>{let n=a(e,r);return n=n.map((e=>i(e,r))),n.forEach((e=>{Bye(e,t)})),n})),e},Hye=/[ .][A-Z]\.? *$/i,Vye=/(?:\u2026|\.{2,}) *$/,Wye=/\p{L}/u,Gye=/\. *$/,Uye=/^[A-Z]\. $/,Kye={one:{killUnicode:Pye,tokenize:{splitSentences:gye,isSentence:function(e,t){if(!1===Wye.test(e))return!1;if(!0===Hye.test(e))return!1;if(3===e.length&&Uye.test(e))return!1;if(!0===Vye.test(e))return!1;let n=e.replace(/[.!?\u203D\u2E18\u203C\u2047-\u2049] *$/,"").split(" "),r=n[n.length-1].toLowerCase();return!0!==t.hasOwnProperty(r)||!0!==Gye.test(e)},splitTerms:Nye,splitWhitespace:Rye,fromString:jye}}},qye={"&":"and","@":"at","%":"percent",plz:"please",bein:"being"};let Xye={},Jye={};[[["approx","apt","bc","cyn","eg","esp","est","etc","ex","exp","prob","pron","gal","min","pseud","fig","jd","lat","lng","vol","fm","def","misc","plz","ea","ps","sec","pt","pref","pl","pp","qt","fr","sq","nee","ss","tel","temp","vet","ver","fem","masc","eng","adj","vb","rb","inf","situ","vivo","vitro","wr"]],[["dl","ml","gal","qt","pt","tbl","tsp","tbsp","km","dm","cm","mm","mi","td","hr","hrs","kg","hg","dg","cg","mg","\xb5g","lb","oz","sq ft","hz","mps","mph","kmph","kb","mb","tb","lx","lm","fl oz","yb"],"Unit"],[["ad","al","arc","ba","bl","ca","cca","col","corp","ft","fy","ie","lit","ma","md","pd","tce"],"Noun"],[["adj","adm","adv","asst","atty","bldg","brig","capt","cmdr","comdr","cpl","det","dr","esq","gen","gov","hon","jr","llb","lt","maj","messrs","mlle","mme","mr","mrs","ms","mstr","phd","prof","pvt","rep","reps","res","rev","sen","sens","sfc","sgt","sir","sr","supt","surg"],"Honorific"],[["jan","feb","mar","apr","jun","jul","aug","sep","sept","oct","nov","dec"],"Month"],[["dept","univ","assn","bros","inc","ltd","co"],"Organization"],[["rd","st","dist","mt","ave","blvd","cl","cres","hwy","ariz","cal","calif","colo","conn","fla","fl","ga","ida","ia","kan","kans","minn","neb","nebr","okla","penna","penn","pa","dak","tenn","tex","ut","vt","va","wis","wisc","wy","wyo","usafa","alta","ont","que","sask"],"Place"]].forEach((e=>{e[0].forEach((t=>{Xye[t]=!0,Jye[t]="Abbreviation",void 0!==e[1]&&(Jye[t]=[Jye[t],e[1]])}))}));const Yye=["anti","bi","co","contra","de","extra","infra","inter","intra","macro","micro","mis","mono","multi","peri","pre","pro","proto","pseudo","re","sub","supra","trans","tri","un","out","ex"].reduce(((e,t)=>(e[t]=!0,e)),{});let Qye={"!":"\xa1","?":"\xbf\u0241",'"':'\u201c\u201d"\u275d\u275e',"'":"\u2018\u201b\u275b\u275c\u2019","-":"\u2014\u2013",a:"\xaa\xc0\xc1\xc2\xc3\xc4\xc5\xe0\xe1\xe2\xe3\xe4\xe5\u0100\u0101\u0102\u0103\u0104\u0105\u01cd\u01ce\u01de\u01df\u01e0\u01e1\u01fa\u01fb\u0200\u0201\u0202\u0203\u0226\u0227\u023a\u0386\u0391\u0394\u039b\u03ac\u03b1\u03bb\u0410\u0430\u0466\u0467\u04d0\u04d1\u04d2\u04d3\u019b\xe6",b:"\xdf\xfe\u0180\u0181\u0182\u0183\u0184\u0185\u0243\u0392\u03b2\u03d0\u03e6\u0411\u0412\u042a\u042c\u0432\u044a\u044c\u0462\u0463\u048c\u048d",c:"\xa2\xa9\xc7\xe7\u0106\u0107\u0108\u0109\u010a\u010b\u010c\u010d\u0186\u0187\u0188\u023b\u023c\u037b\u037c\u03f2\u03f9\u03fd\u03fe\u0421\u0441\u0454\u0480\u0481\u04aa\u04ab",d:"\xd0\u010e\u010f\u0110\u0111\u0189\u018a\u0221\u018b\u018c",e:"\xc8\xc9\xca\xcb\xe8\xe9\xea\xeb\u0112\u0113\u0114\u0115\u0116\u0117\u0118\u0119\u011a\u011b\u0190\u0204\u0205\u0206\u0207\u0228\u0229\u0246\u0247\u0388\u0395\u039e\u03a3\u03ad\u03b5\u03be\u03f5\u0400\u0401\u0415\u0435\u0450\u0451\u04bc\u04bd\u04be\u04bf\u04d6\u04d7\u1ec5",f:"\u0191\u0192\u03dc\u03dd\u04fa\u04fb\u0492\u0493\u017f",g:"\u011c\u011d\u011e\u011f\u0120\u0121\u0122\u0123\u0193\u01e4\u01e5\u01e6\u01e7\u01f4\u01f5",h:"\u0124\u0125\u0126\u0127\u0195\u01f6\u021e\u021f\u0389\u0397\u0402\u040a\u040b\u041d\u043d\u0452\u045b\u04a2\u04a3\u04a4\u04a5\u04ba\u04bb\u04c9\u04ca",I:"\xcc\xcd\xce\xcf",i:"\xec\xed\xee\xef\u0128\u0129\u012a\u012b\u012c\u012d\u012e\u012f\u0130\u0131\u0196\u0197\u0208\u0209\u020a\u020b\u038a\u0390\u03aa\u03af\u03b9\u03ca\u0406\u0407\u0456\u0457i\u0307",j:"\u0134\u0135\u01f0\u0237\u0248\u0249\u03f3\u0408\u0458",k:"\u0136\u0137\u0138\u0198\u0199\u01e8\u01e9\u039a\u03ba\u040c\u0416\u041a\u0436\u043a\u045c\u049a\u049b\u049c\u049d\u049e\u049f\u04a0\u04a1",l:"\u0139\u013a\u013b\u013c\u013d\u013e\u013f\u0140\u0141\u0142\u019a\u01aa\u01c0\u01cf\u01d0\u0234\u023d\u0399\u04c0\u04cf",m:"\u039c\u03fa\u03fb\u041c\u043c\u04cd\u04ce",n:"\xd1\xf1\u0143\u0144\u0145\u0146\u0147\u0148\u0149\u014a\u014b\u019d\u019e\u01f8\u01f9\u0220\u0235\u039d\u03a0\u03ae\u03b7\u03de\u040d\u0418\u0419\u041b\u041f\u0438\u0439\u043b\u043f\u045d\u048a\u048b\u04c5\u04c6\u04e2\u04e3\u04e4\u04e5\u03c0",o:"\xd2\xd3\xd4\xd5\xd6\xd8\xf0\xf2\xf3\xf4\xf5\xf6\xf8\u014c\u014d\u014e\u014f\u0150\u0151\u019f\u01a0\u01a1\u01d1\u01d2\u01ea\u01eb\u01ec\u01ed\u01fe\u01ff\u020c\u020d\u020e\u020f\u022a\u022b\u022c\u022d\u022e\u022f\u0230\u0231\u038c\u0398\u039f\u03b8\u03bf\u03c3\u03cc\u03d5\u03d8\u03d9\u03ec\u03f4\u041e\u0424\u043e\u0472\u0473\u04e6\u04e7\u04e8\u04e9\u04ea\u04eb",p:"\u01a4\u03a1\u03c1\u03f7\u03f8\u03fc\u0420\u0440\u048e\u048f\xde",q:"\u024a\u024b",r:"\u0154\u0155\u0156\u0157\u0158\u0159\u01a6\u0210\u0211\u0212\u0213\u024c\u024d\u0403\u0413\u042f\u0433\u044f\u0453\u0490\u0491",s:"\u015a\u015b\u015c\u015d\u015e\u015f\u0160\u0161\u01a7\u01a8\u0218\u0219\u023f\u0405\u0455",t:"\u0162\u0163\u0164\u0165\u0166\u0167\u01ab\u01ac\u01ad\u01ae\u021a\u021b\u0236\u023e\u0393\u03a4\u03c4\u03ee\u0422\u0442",u:"\xd9\xda\xdb\xdc\xf9\xfa\xfb\xfc\u0168\u0169\u016a\u016b\u016c\u016d\u016e\u016f\u0170\u0171\u0172\u0173\u01af\u01b0\u01b1\u01b2\u01d3\u01d4\u01d5\u01d6\u01d7\u01d8\u01d9\u01da\u01db\u01dc\u0214\u0215\u0216\u0217\u0244\u03b0\u03c5\u03cb\u03cd",v:"\u03bd\u0474\u0475\u0476\u0477",w:"\u0174\u0175\u019c\u03c9\u03ce\u03d6\u03e2\u03e3\u0428\u0429\u0448\u0449\u0461\u047f",x:"\xd7\u03a7\u03c7\u03d7\u03f0\u0425\u0445\u04b2\u04b3\u04fc\u04fd\u04fe\u04ff",y:"\xdd\xfd\xff\u0176\u0177\u0178\u01b3\u01b4\u0232\u0233\u024e\u024f\u038e\u03a5\u03ab\u03b3\u03c8\u03d2\u03d3\u03d4\u040e\u0423\u0443\u0447\u045e\u0470\u0471\u04ae\u04af\u04b0\u04b1\u04ee\u04ef\u04f0\u04f1\u04f2\u04f3",z:"\u0179\u017a\u017b\u017c\u017d\u017e\u01b5\u01b6\u0224\u0225\u0240\u0396"},Zye={};Object.keys(Qye).forEach((function(e){Qye[e].split("").forEach((function(t){Zye[t]=e}))}));const ewe=/\//,twe=/[a-z]\.[a-z]/i,nwe=/[0-9]/,rwe=function(e,t){let n=e.normal||e.text||e.machine;const r=t.model.one.aliases;if(r.hasOwnProperty(n)&&(e.alias=e.alias||[],e.alias.push(r[n])),ewe.test(n)&&!twe.test(n)&&!nwe.test(n)){let t=n.split(ewe);t.length<=3&&t.forEach((t=>{""!==(t=t.trim())&&(e.alias=e.alias||[],e.alias.push(t))}))}return e},owe=/^\p{Letter}+-\p{Letter}+$/u,awe=function(e){let t=e.implicit||e.normal||e.text;t=t.replace(/['\u2019]s$/,""),t=t.replace(/s['\u2019]$/,"s"),t=t.replace(/([aeiou][ktrp])in'$/,"$1ing"),owe.test(t)&&(t=t.replace(/-/g,"")),t=t.replace(/^[#@]/,""),t!==e.normal&&(e.machine=t)},iwe=function(e){let t=e.docs,n={};for(let r=0;r<t.length;r+=1)for(let e=0;e<t[r].length;e+=1){let o=t[r][e],a=o.machine||o.normal;n[a]=n[a]||0,n[a]+=1}for(let r=0;r<t.length;r+=1)for(let e=0;e<t[r].length;e+=1){let o=t[r][e],a=o.machine||o.normal;o.freq=n[a]}},swe=function(e){let t=0,n=0,r=e.document;for(let o=0;o<r.length;o+=1)for(let e=0;e<r[o].length;e+=1){let a=r[o][e];a.offset={index:n,start:t+a.pre.length,length:a.text.length},t+=a.pre.length+a.text.length+a.post.length,n+=1}},lwe=function(e){let t=e.document;for(let n=0;n<t.length;n+=1)for(let e=0;e<t[n].length;e+=1)t[n][e].index=[n,e]},uwe=function(e){let t=0,n=e.docs;for(let r=0;r<n.length;r+=1)for(let e=0;e<n[r].length;e+=1)""!==n[r][e].normal&&(t+=1,n[r][e].wordCount=t)},cwe=function(e,t){let n=e.docs;for(let r=0;r<n.length;r+=1)for(let o=0;o<n[r].length;o+=1)t(n[r][o],e.world)},dwe={compute:{alias:e=>cwe(e,rwe),machine:e=>cwe(e,awe),normal:e=>cwe(e,Bye),freq:iwe,offset:swe,index:lwe,wordCount:uwe},methods:Kye,model:{one:{aliases:qye,abbreviations:Xye,prefixes:Yye,suffixes:{like:!0,ish:!0,less:!0,able:!0,elect:!0,type:!0,designate:!0},prePunctuation:{"#":!0,"@":!0,_:!0,"\xb0":!0,"\u200b":!0,"\u200c":!0,"\u200d":!0,"\ufeff":!0},postPunctuation:{"%":!0,_:!0,"\xb0":!0,"\u200b":!0,"\u200c":!0,"\u200d":!0,"\ufeff":!0},lexicon:Jye,unicode:Zye,emoticons:{"<3":!0,"</3":!0,"<\\3":!0,":^P":!0,":^p":!0,":^O":!0,":^3":!0}}},hooks:["alias","machine","index","id"]},hwe={typeahead:function(e){const t=e.model.one.typeahead,n=e.docs;if(0===n.length||0===Object.keys(t).length)return;let r=n[n.length-1]||[],o=r[r.length-1];if(!o.post&&t.hasOwnProperty(o.normal)){let n=t[o.normal];o.implicit=n,o.machine=n,o.typeahead=!0,e.compute.preTagger&&e.last().unTag("*").compute(["lexicon","preTagger"])}}},pwe=function(){const e=this.docs;if(0===e.length)return this;let t=e[e.length-1]||[],n=t[t.length-1];return!0===n.typeahead&&n.machine&&(n.text=n.machine,n.normal=n.machine),this},fwe=function(e){e.prototype.autoFill=pwe},mwe=function(e,t,n){let r={},o=[],a=n.prefixes||{};return e.forEach((e=>{let i=(e=e.toLowerCase().trim()).length;t.max&&i>t.max&&(i=t.max);for(let s=t.min;s<i;s+=1){let i=e.substring(0,s);t.safe&&n.model.one.lexicon.hasOwnProperty(i)||(!0!==a.hasOwnProperty(i)&&!0!==r.hasOwnProperty(i)?r[i]=e:o.push(i))}})),r=Object.assign({},a,r),o.forEach((e=>{delete r[e]})),r},gwe={safe:!0,min:3},vwe={typeahead:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.model();var r;t=Object.assign({},gwe,t),r=e,"[object Object]"===Object.prototype.toString.call(r)&&(Object.assign(n.one.lexicon,e),e=Object.keys(e));let o=mwe(e,t,this.world());return Object.keys(o).forEach((e=>{n.one.typeahead.hasOwnProperty(e)?delete n.one.typeahead[e]:n.one.typeahead[e]=o[e]})),this}},bwe={model:{one:{typeahead:{}}},api:fwe,lib:vwe,compute:hwe,hooks:["typeahead"]};afe.extend(Wfe),afe.extend(Wve),afe.extend(lve),afe.extend(rbe),afe.extend(Ybe),afe.plugin(xme),afe.extend(dwe),afe.extend(Nme),afe.plugin(ufe),afe.extend(Hme),afe.extend(bwe),afe.extend(Dme),afe.extend(fbe);const ywe=afe,wwe={addendum:"addenda",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",opus:"opera",ovum:"ova",phenomenon:"phenomena",referendum:"referenda",alga:"algae",alumna:"alumnae",antenna:"antennae",formula:"formulae",larva:"larvae",nebula:"nebulae",vertebra:"vertebrae",analysis:"analyses",axis:"axes",diagnosis:"diagnoses",parenthesis:"parentheses",prognosis:"prognoses",synopsis:"synopses",thesis:"theses",neurosis:"neuroses",appendix:"appendices",index:"indices",matrix:"matrices",ox:"oxen",sex:"sexes",alumnus:"alumni",bacillus:"bacilli",cactus:"cacti",fungus:"fungi",hippopotamus:"hippopotami",libretto:"libretti",modulus:"moduli",nucleus:"nuclei",octopus:"octopi",radius:"radii",stimulus:"stimuli",syllabus:"syllabi",cookie:"cookies",calorie:"calories",auntie:"aunties",movie:"movies",pie:"pies",rookie:"rookies",tie:"ties",zombie:"zombies",leaf:"leaves",loaf:"loaves",thief:"thieves",foot:"feet",goose:"geese",tooth:"teeth",beau:"beaux",chateau:"chateaux",tableau:"tableaux",bus:"buses",gas:"gases",circus:"circuses",crisis:"crises",virus:"viruses",database:"databases",excuse:"excuses",abuse:"abuses",avocado:"avocados",barracks:"barracks",child:"children",clothes:"clothes",echo:"echoes",embargo:"embargoes",epoch:"epochs",deer:"deer",halo:"halos",man:"men",woman:"women",mosquito:"mosquitoes",mouse:"mice",person:"people",quiz:"quizzes",rodeo:"rodeos",shoe:"shoes",sombrero:"sombreros",stomach:"stomachs",tornado:"tornados",tuxedo:"tuxedos",volcano:"volcanoes"},xwe={Comparative:"true\xa6bett1f0;arth0ew0in0;er",Superlative:"true\xa6earlier",PresentTense:"true\xa6bests,sounds",Condition:"true\xa6lest,unless",PastTense:"true\xa6began,came,d4had,kneel3l2m0sa4we1;ea0sg2;nt;eap0i0;ed;id",Participle:"true\xa60:09;a06b01cZdXeat0fSgQhPoJprov0rHs7t6u4w1;ak0ithdra02o2r1;i02uY;k0v0;nd1pr04;ergoJoJ;ak0hHo3;e9h7lain,o6p5t4un3w1;o1um;rn;g,k;ol0reS;iQok0;ught,wn;ak0o1runk;ne,wn;en,wn;ewriNi1uJ;dd0s0;ut3ver1;do4se0t1;ak0h2;do2g1;roG;ne;ast0i7;iv0o1;ne,tt0;all0loBor1;bi3g2s1;ak0e0;iv0o9;dd0;ove,r1;a5eamt,iv0;hos0lu1;ng;e4i3lo2ui1;lt;wn;tt0;at0en,gun;r2w1;ak0ok0;is0;en",Gerund:"true\xa6accord0be0doin,go0result0stain0;ing",Expression:"true\xa6a0Yb0Uc0Sd0Oe0Mfarew0Lg0FhZjeez,lWmVnToOpLsJtIuFvEw7y0;a5e3i1u0;ck,p;k04p0;ee,pee;a0p,s;!h;!a,h,y;a5h2o1t0;af,f;rd up,w;atsoever,e1o0;a,ops;e,w;hoo,t;ery w06oi0L;gh,h0;! 0h,m;huh,oh;here nPsk,ut tut;h0ic;eesh,hh,it,oo;ff,h1l0ow,sst;ease,s,z;ew,ooey;h1i,mg,o0uch,w,y;h,o,ps;! 0h;hTmy go0wT;d,sh;a7evertheless,o0;!pe;eh,mm;ah,eh,m1ol0;!s;ao,fao;aCeBi9o2u0;h,mph,rra0zzC;h,y;l1o0;r6y9;la,y0;! 0;c1moCsmok0;es;ow;!p hip hoor0;ay;ck,e,llo,y;ha1i,lleluj0;ah;!ha;ah,ee4o1r0;eat scott,r;l1od0sh; grief,bye;ly;! whiz;ell;e0h,t cetera,ureka,ww,xcuse me;k,p;'oh,a0rat,uh;m0ng;mit,n0;!it;mon,o0;ngratulations,wabunga;a2oo1r0tw,ye;avo,r;!ya;h,m; 1h0ka,las,men,rgh,ye;!a,em,h,oy;la",Negative:"true\xa6n0;ever,o0;n,t",QuestionWord:"true\xa6how3wh0;at,e1ich,o0y;!m,se;n,re; come,'s",Reflexive:"true\xa6h4it5my5o1the0your2;ir1m1;ne3ur0;sel0;f,ves;er0im0;self",Plural:"true\xa6dick0gre0ones,records;ens","Unit|Noun":"true\xa6cEfDgChBinchAk9lb,m6newt5oz,p4qt,t1y0;ardEd;able1b0ea1sp;!l,sp;spo1;a,t,x;on9;!b,g,i1l,m,p0;h,s;!les;!b,elvin,g,m;!es;g,z;al,b;eet,oot,t;m,up0;!s",Value:"true\xa6a few",Imperative:"true\xa6bewa0come he0;re","Plural|Verb":"true\xa6leaves",Demonym:"true\xa60:15;1:12;a0Vb0Oc0Dd0Ce08f07g04h02iYjVkTlPmLnIomHpEqatari,rCs7t5u4v3welAz2;am0Gimbabwe0;enezuel0ietnam0I;gAkrai1;aiwTex0hai,rinida0Ju2;ni0Prkmen;a5cotti4e3ingapoOlovak,oma0Spaniard,udRw2y0W;ede,iss;negal0Cr09;sh;mo0uT;o5us0Jw2;and0;a2eru0Fhilippi0Nortugu07uerto r0S;kist3lesti1na2raguay0;ma1;ani;ami00i2orweP;caragu0geri2;an,en;a3ex0Lo2;ngo0Drocc0;cedo1la2;gasy,y07;a4eb9i2;b2thua1;e0Cy0;o,t01;azakh,eny0o2uwaiI;re0;a2orda1;ma0Ap2;anO;celandic,nd4r2sraeli,ta01vo05;a2iB;ni0qi;i0oneU;aiAin2ondur0unO;di;amEe2hanai0reek,uatemal0;or2rm0;gi0;ilipino,ren8;cuadoVgyp4mira3ngli2sto1thiopi0urope0;shm0;ti;ti0;aPominUut3;a9h6o4roat3ub0ze2;ch;!i0;lom2ngol5;bi0;a6i2;le0n2;ese;lifor1m2na3;bo2eroo1;di0;angladeshi,el6o4r3ul2;gaE;azi9it;li2s1;vi0;aru2gi0;si0;fAl7merBngol0r5si0us2;sie,tr2;a2i0;li0;genti2me1;ne;ba1ge2;ri0;ni0;gh0r2;ic0;an",Organization:"true\xa60:4Q;a3Tb3Bc2Od2He2Df27g1Zh1Ti1Pj1Nk1Ll1Gm12n0Po0Mp0Cqu0Br02sTtHuCv9w3xiaomi,y1;amaha,m1Bou1w1B;gov,tu3C;a4e2iki1orld trade organizati33;leaRped0O;lls fargo,st1;fie2Hinghou2R;l1rner br3U;gree3Jl street journ2Im1E;an halOeriz2Xisa,o1;dafo2Yl1;kswagMvo;b4kip,n2ps,s1;a tod3Aps;es3Mi1;lev3Fted natio3C;er,s; mobi32aco beRd bOe9gi frida3Lh3im horto3Amz,o1witt3D;shi49y1;ota,s r 05;e 1in lizzy;b3carpen3Jdaily ma3Dguess w2holli0s1w2;mashing pumpki35uprem0;ho;ea1lack eyed pe3Xyr0Q;ch bo3Dtl0;l2n3Qs1xas instrumen1U;co,la m1F;efoni0Kus;a8cientology,e5ieme2Ymirnoff,np,o3pice gir6quare0Ata1ubaru;rbuc1to34;ks;ny,undgard1;en;a2x pisto1;ls;g1Wrs;few2Minsbur31lesfor03msu2E;adiohead,b8e4o1yana3C;man empi1Xyal 1;b1dutch she4;ank;a3d 1max,vl20;bu1c2Ahot chili peppe2Ylobst2N;ll;ders dige1Ll madrid;c,s;ant3Aizn2Q;a8bs,e5fiz2Ihilip4i3r1;emier 1udenti1D;leagTo2K;nk floyd,zza hut; morrBs;psi2tro1uge0E;br33chi0Tn33;!co;lant2Un1yp16; 2ason27da2P;ld navy,pec,range juli2xf1;am;us;aAb9e6fl,h5i4o1sa,vid3wa;k2tre dame,vart1;is;ia;ke,ntendo,ss0QvZ;l,s;c,st1Otflix,w1; 1sweek;kids on the block,york0D;a,c;nd22s2t1;ional aca2Po,we0U;a,c02d0S;aDcdonalCe9i6lb,o3tv,y1;spa1;ce;b1Tnsanto,ody blu0t1;ley cr1or0T;ue;c2t1;as,subisO;helin,rosoft;dica2rcedes benz,talli1;ca;id,re;ds;cs milk,tt19z24;a3e1g,ittle caesa1P; ore09novo,x1;is,mark,us; 1bour party;pres0Dz boy;atv,fc,kk,lm,m1od1O;art;iffy lu0Roy divisi0Jpmorgan1sa;! cha09;bm,hop,k3n1tv;g,te1;l,rpol;ea;a5ewlett pack1Vi3o1sbc,yundai;me dep1n1P;ot;tac1zbollah;hi;lliburt08sbro;eneral 6hq,ithub,l5mb,o2reen d0Ou1;cci,ns n ros0;ldman sachs,o1;dye1g0H;ar;axo smith kli04encoW;electr0Nm1;oto0Z;a5bi,c barcelo4da,edex,i2leetwood m03o1rito l0G;rd,xcY;at,fa,nancial1restoZ; tim0;na;cebook,nnie mae;b0Asa,u3xxon1; m1m1;ob0J;!rosceptics;aiml0De5isney,o4u1;nkin donu2po0Zran dur1;an;ts;j,w jon0;a,f lepp12ll,peche mode,r spieg02stiny's chi1;ld;aJbc,hFiDloudflaCnn,o3r1;aigsli5eedence clearwater reviv1ossra09;al;c7inba6l4m1o0Est09;ca2p1;aq;st;dplSg1;ate;se;a c1o chanQ;ola;re;a,sco1tigroup;! systems;ev2i1;ck fil a,na daily;r1y;on;d2pital o1rls jr;ne;bury,ill1;ac;aEbc,eBf9l5mw,ni,o1p,rexiteeU;ei3mbardiIston 1;glo1pizza;be;ng;o2ue c1;roV;ckbuster video,omingda1;le; g1g1;oodriL;cht2e ge0rkshire hathaw1;ay;el;cardi,idu,nana republ3s1xt5y5;f,kin robbi1;ns;ic;bYcTdidSerosmith,iRlKmEnheuser busDol,ppleAr6s4u3v2y1;er;is,on;di,todesk;hland o1sociated E;il;b3g2m1;co;os;ys; compu1be0;te1;rs;ch;c,d,erican3t1;!r1;ak; ex1;pre1;ss; 5catel2ta1;ir;! lu1;ce1;nt;jazeera,qae1;da;g,rbnb;as;/dc,a3er,tivision1;! blizz1;ard;demy of scienc0;es;ba",Possessive:"true\xa6its,my,our0thy;!s","Noun|Verb":"true\xa60:9W;1:AA;2:96;3:A3;4:9R;5:A2;6:9K;7:8N;8:7L;9:A8;A:93;B:8D;C:8X;a9Ob8Qc7Id6Re6Gf5Sg5Hh55i4Xj4Uk4Rl4Em40n3Vo3Sp2Squ2Rr21s0Jt02u00vVwGyFzD;ip,oD;ne,om;awn,e6Fie68;aOeMhJiHoErD;ap,e9Oink2;nd0rDuC;kDry,sh5Hth;!shop;ck,nDpe,re,sh;!d,g;e86iD;p,sD;k,p0t2;aDed,lco8W;r,th0;it,lk,rEsDt4ve,x;h,te;!ehou1ra9;aGen5FiFoD;iDmAte,w;ce,d;be,ew,sA;cuum,l4B;pDr7;da5gra6Elo6A;aReQhrPiOoMrGuEwiDy5Z;n,st;nDrn;e,n7O;aGeFiEoDu6;t,ub2;bu5ck4Jgg0m,p;at,k,nd;ck,de,in,nsDp,v7J;f0i8R;ll,ne,p,r4Yss,t94uD;ch,r;ck,de,e,le,me,p,re;e5Wow,u6;ar,e,ll,mp0st,xt;g,lDng2rg7Ps5x;k,ly;a0Sc0Ne0Kh0Fi0Dk0Cl0Am08n06o05pXquaBtKuFwD;ea88iD;ng,pe,t4;bGit,m,ppErD;fa3ge,pri1v2U;lDo6S;e6Py;!je8;aMeLiKoHrEuDy2;dy,ff,mb2;a85eEiDo5Pugg2;ke,ng;am,ss,t4;ckEop,p,rD;e,m;ing,pi2;ck,nk,t4;er,m,p;ck,ff,ge,in,ke,lEmp,nd,p2rDte,y;!e,t;k,l;aJeIiHlGoFrDur,y;ay,e56inDu3;g,k2;ns8Bt;a5Qit;ll,n,r87te;ed,ll;m,n,rk;b,uC;aDee1Tow;ke,p;a5Je4FiDo53;le,rk;eep,iDou4;ce,p,t;ateboa7Ii;de,gnDl2Vnk,p,ze;!al;aGeFiEoDuff2;ck,p,re,w;ft,p,v0;d,i3Ylt0;ck,de,pe,re,ve;aEed,nDrv1It;se,t2N;l,r4t;aGhedu2oBrD;aEeDibb2o3Z;en,w;pe,t4;le,n,r2M;cDfegua72il,mp2;k,rifi3;aZeHhy6LiGoEuD;b,in,le,n,s5X;a6ck,ll,oDpe,u5;f,t;de,ng,ot,p,s1W;aTcSdo,el,fQgPje8lOmMnLo17pJque6sFturn,vDwa6V;eDi27;al,r1;er74oFpe8tEuD;lt,me;!a55;l71rt;air,eaDly,o53;l,t;dezvo2Zt;aDedy;ke,rk;ea1i4G;a6Iist0r5N;act6Yer1Vo71uD;nd,se;a38o6F;ch,s6G;c1Dge,iEke,lly,nDp1Wt1W;ge,k,t;n,se;es6Biv0;a04e00hYiXlToNrEsy4uD;mp,n4rcha1sh;aKeIiHoDu4O;be,ceFdu3fi2grDje8mi1p,te6;amDe6W;!me;ed,ss;ce,de,nt;sDy;er6Cs;cti3i1;iHlFoEp,re,sDuCw0;e,i5Yt;l,p;iDl;ce,sh;nt,s5V;aEce,e32uD;g,mp,n7;ce,nDy;!t;ck,le,n17pe,tNvot;a1oD;ne,tograph;ak,eFnErDt;fu55mA;!c32;!l,r;ckJiInHrFsEtDu1y;ch,e9;s,te;k,tD;!y;!ic;nt,r,se;!a7;bje8ff0il,oErDutli3Qver4B;bAd0ie9;ze;a4ReFoDur1;d,tD;e,i3;ed,gle8tD;!work;aMeKiIoEuD;rd0;ck,d3Rld,nEp,uDve;nt,th;it5EkD;ey;lk,n4Brr5CsDx;s,ta2B;asuBn4UrDss;ge,it;il,nFp,rk3WsEtD;ch,t0;h,k,t0;da5n0oeuvB;aLeJiHoEuD;mp,st;aEbby,ck,g,oDve;k,t;d,n;cDe,ft,mAnIst;en1k;aDc0Pe4vK;ch,d,k,p,se;bFcEnd,p,t4uD;gh,n4;e,k;el,o2U;eEiDno4E;ck,d,ll,ss;el,y;aEo1OuD;i3mp;m,zz;mpJnEr46ssD;ue;c1Rdex,fluGha2k,se2HteDvoi3;nt,rD;e6fa3viD;ew;en3;a8le2A;aJeHiGoEuD;g,nt;l3Ano2Dok,pDr1u1;!e;ghli1Fke,nt,re,t;aDd7lp;d,t;ck,mGndFrEsh,tDu9;ch,e;bo3Xm,ne4Eve6;!le;!m0;aMear,ift,lKossJrFuD;arDe4Alp,n;antee,d;aFiEoDumb2;uCwth;ll,nd,p;de,sp;ip;aBoDue;ss,w;g,in,me,ng,s,te,ze;aZeWiRlNoJrFuD;ck,el,nDss,zz;c38d;aEoDy;st,wn;cDgme,me,nchi1;tuB;cFg,il,ld,rD;ce,e29mDwa31;!at;us;aFe0Vip,oDy;at,ck,od,wD;!er;g,ke,me,re,sh,vo1E;eGgFlEnDre,sh,t,x;an3i0Q;e,m,t0;ht,uB;ld;aEeDn3;d,l;r,tuB;ce,il,ll,rm,vo2W;cho,d7ffe8nMsKxFyeD;!baD;ll;cGerci1hFpDtra8;eriDo0W;en3me9;au6ibA;el,han7u1;caDtima5;pe;count0d,vy;a01eSiMoJrEuDye;b,el,mp,pli2X;aGeFiEoD;ne,p;ft,ll,nk,p,ve;am,ss;ft,g,in;cEd7ubt,wnloD;ad;k,u0E;ge6p,sFt4vD;e,iDor3;de;char7gui1h,liEpD;at4lay,u5;ke;al,bKcJfeIlGmaCposAsEtaD;il;e07iD;gn,re;ay,ega5iD;ght;at,ct;li04rea1;a5ut;b,ma7n3rDte;e,t;a0Eent0Dh06irc2l03oKrFuD;be,e,rDt;b,e,l,ve;aGeFoEuDy;sh;p,ss,wd;dAep;ck,ft,sh;at,de,in,lTmMnFordina5py,re,st,uDv0;gh,nDp2rt;s01t;ceHdu8fli8glomeIsFtDveN;a8rD;a6ol;e9tru8;ct;ntDrn;ra5;bHfoGmFpD;leDouCromi1;me9;aCe9it,u5;rt;at,iD;ne;lap1oD;r,ur;aEiDoud,ub;ck,p;im,w;aEeDip;at,ck,er;iGllen7nErD;ge,m,t;ge,nD;el;n,r;er,re;ke,ll,mp,noe,pGrXsFtEuDve;se,ti0I;alog,ch;h,t;!tuB;re;a03eZiXlToPrHuEyD;pa11;bb2ck2dgEff0mp,rDst,zz;den,n;et;anJeHiFoadEuD;i1sh;ca6;be,d7;ge;aDed;ch,k;ch,d;aFg,mb,nEoDrd0tt2x,ycott;k,st,t;d,e;rd,st;aFeCiDoYur;nk,tz;nd;me;as,d,ke,nd,opsy,tD;!ch,e;aFef,lt,nDt;d,efA;it;r,t;ck,il,lan3nIrFsEtt2;le;e,h;!gDk;aDe;in;!d,g,k;bu1c05dZge,iYlVnTppQrLsIttGucEwaD;rd;tiD;on;aDempt;ck;k,sD;i6ocia5;st;chFmD;!oD;ur;!iD;ve;eEroa4;ch;al;chDg0sw0;or;aEt0;er;rm;d,m,r;dreHvD;an3oD;ca5;te;ce;ss;cDe,he,t;eFoD;rd,u9;nt;nt,ss;se",Actor:"true\xa60:7B;1:7G;2:6A;3:7F;4:7O;5:7K;a6Nb62c4Ud4Be41f3Sg3Bh30i2Uj2Qkin2Pl2Km26n1Zo1Sp0Vqu0Tr0JsQtJuHvEw8yo6;gi,ut6;h,ub0;aAe9i8o7r6;estl0it0;m2rk0;fe,nn0t2Bza2H;atherm2ld0;ge earn0it0nder0rri1;eter7i6oyF;ll5Qp,s3Z;an,ina2U;n6s0;c6Uder03;aoisea23e9herapi5iktok0o8r6ut1yco6S;a6endseLo43;d0mp,nscri0Bvel0;ddl0u1G;a0Qchn7en6na4st0;ag0;i3Oo0D;aiXcUeRhPiMki0mu26oJpGquaFtBu7wee6;p0theart;lt2per7r6;f0ge6Iviv1;h6inten0Ist5Ivis1;ero,um2;a8ep7r6;ang0eam0;bro2Nc2Ofa2Nmo2Nsi20;ff0tesm2;tt0;ec7ir2Do6;kesp59u0M;ia5Jt3;l7me6An,rcere6ul;r,ss;di0oi5;n7s6;sy,t0;g0n0;am2ephe1Iow6;girl,m2r2Q;cretInior cit3Fr6;gea4v6;a4it1;hol4Xi7reen6ulpt1;wr2C;e01on;l1nt;aEe9o8u6;l0nn6;er up,ingE;g40le mod3Zof0;a4Zc8fug2Ppo32searQv6;ere4Uolution6;ary;e6luYru22;ptio3T;bbi,dic5Vpp0;arter6e2Z;back;aYeWhSiRlOoKr8sycho7u6;nk,p31;logi5;aGeDiBo6;d9fess1g7ph47s6;pe2Ktitu51;en6ramm0;it1y;igy,uc0;est4Nme mini0Unce6s3E;!ss;a7si6;de4;ch0;ctiti39nk0P;dca0Oet,li6pula50rnst42;c2Itic6;al scie6i2;nti5;a6umb0;nn0y6;er,ma4Lwright;lgrim,one0;a8iloso7otogra7ra6ysi1V;se;ph0;ntom,rmaci5;r6ssi1T;form0s4O;i3El,nel3Yr8st1tr6wn;i6on;arWot;ent4Wi42tn0;ccupa4ffBp8r7ut6;ca5l0B;ac4Iganiz0ig2Fph2;er3t6;i1Jomet6;ri5;ic0spring;aBe9ie4Xo7u6;n,rser3J;b6mad,vi4V;le2Vo4D;i6mesis,phew;ce,ghb1;nny,rr3t1X;aEeDiAo7u6yst1Y;m8si16;der3gul,m7n6th0;arDk;!my;ni7s6;f02s0Jt0;on,st0;chan1Qnt1rcha4;gi9k0n8rtyr,t6y1;e,riar6;ch;ag0iac;ci2stra3I;a7e2Aieutena4o6;rd,s0v0;bor0d7ndlo6ss,urea3Fwy0ym2;rd;!y;!s28;e8o7u6;ggl0;gg0urna2U;st0;c3Hdol,llu3Ummigra4n6; l9c1Qfa4habi42nov3s7ve6;nt1stig3;pe0Nt6;a1Fig3ru0M;aw;airFeBistoAo8u6ygie1K;man6sba2H;!ita8;bo,st6usekN;age,e3P;ri2;ir,r6;m7o6;!ine;it;dress0sty2C;aLeIhostGirl26ladi3oCrand7u6;e5ru;c9daug0Jfa8m7pa6s2Y;!re4;a,o6;th0;hi1B;al7d6lf0;!de3A;ie,k6te26;eep0;!wr6;it0;isha,n6;i6tl04;us;mbl0rden0;aDella,iAo7r6;eela2Nie1P;e,re6ster pare4;be1Hm2r6st0;unn0;an2ZgZlmm17nanci0r6tt0;e6st la2H; marsh2OfigXm2;rm0th0;conoEdDlectriCm8n7x6;amin0cellency,i2A;emy,trepreneur,vironmenta1J;c8p6;er1loye6;e,r;ee;ci2;it1;mi5;aKeBi8ork,ri7u6we02;de,tche2H;ft0v0;ct3eti7plom2Hre6va;ct1;ci2ti2;aDcor3fencCi0InAput9s7tectLvel6;op0;ce1Ge6ign0;rt0;ee,y;iz6;en;em2;c1Ml0;d8nc0redev7ug6;ht0;il;!dy;a06e04fo,hXitizenWlToBr9u6;r3stomer6;! representat6;ive;e3it6;ic;lJmGnAord9rpor1Nu7w6;boy,ork0;n6ri0;ciTte1Q;in3;fidantAgressSs9t6;e0Kr6;ibut1o6;ll0;tab13ul1O;!e;edi2m6pos0rade;a0EeQissi6;on0;leag8on7um6;ni5;el;ue;e6own;an0r6;ic,k;!s;a9e7i6um;ld;erle6f;ad0;ir7nce6plFract0;ll1;m2wI;lebri6o;ty;dBptAr6shi0;e7pe6;nt0;r,t6;ak0;ain;et;aMeLiJlogg0oErBu6;dd0Fild0rgl9siness6;m2p7w6;om2;ers05;ar;i7o6;!k0th0;cklay0de,gadi0;hemi2oge8y6;!frie6;nd;ym2;an;cyc6sR;li5;atbox0ings;by,nk0r6;b0on7te6;nd0;!e07;c04dWge4nQpLrHsFtAu7yatull6;ah;nt7t6;h1oG;!ie;h8t6;e6orney;nda4;ie5le6;te;sis00tron6;aut,om0;chbis8isto7tis6;an,t;crU;hop;ost9p6;ari6rentiS;ti6;on;le;a9cest1im3nou8y6;bo6;dy;nc0;ly5rc6;hi5;mi8v6;entur0is1;er;ni7r6;al;str3;at1;or;counBquaintanArob9t6;ivi5or,re6;ss;st;at;ce;ta4;nt","Adj|Noun":"true\xa60:16;a1Db17c0Ud0Re0Mf0Dg0Ah08i06ju05l02mWnUoSpNrIsBt7u4v1watershed;a1ision0Z;gabo4nilla,ria1;b0Vnt;ndergr1pstairs;adua14ou1;nd;a3e1oken,ri0;en,r1;min0rori13;boo,n;age,e5ilv0Flack,o3quat,ta2u1well;bordina0Xper5;b0Lndard;ciali0Yl1vereign;e,ve16;cret,n1ri0;ior;a4e2ou1ubbiL;nd,tiY;ar,bBl0Wnt0p1side11;resent0Vublican;ci0Qsh;a4eriodic0last0Zotenti0r1;emi2incip0o1;!fession0;er,um;rall4st,tie0U;ff1pposi0Hv0;ens0Oi0C;agg01ov1uts;el;a5e3iniatJo1;bi01der07r1;al,t0;di1tr0N;an,um;le,riG;attOi2u1;sh;ber0ght,qC;stice,veniT;de0mpressioYn1;cumbe0Edividu0no0Dsta0Eterim;alf,o1umdrum;bby,melF;en2old,ra1;ph0Bve;er0ious;a7e5i4l3u1;git03t1;ure;uid;ne;llow,m1;aFiL;ir,t,vo1;riOuriO;l3p00x1;c1ecutUpeV;ess;d1iK;er;ar2e1;mographUrivO;k,l2;hiGlassSo2rude,unn1;ing;m5n1operK;creCstitueOte2vertab1;le;mpor1nt;ary;ic,m2p1;anion,lex;er2u1;ni8;ci0;al;e5lank,o4r1;i2u1;te;ef;ttom,urgeois;st;cadem9d6l2ntarct9r1;ab,ct8;e3tern1;at1;ive;rt;oles1ult;ce1;nt;ic","Adj|Past":"true\xa60:4Q;1:4C;2:4H;3:4E;a44b3Tc36d2Je29f20g1Wh1Si1Jj1Gkno1Fl1Am15n12o0Xp0Mqu0Kr08sLtEuAv9w4yellow0;a7ea6o4rinkl0;r4u3Y;n,ri0;k31th3;rp0sh0tZ;ari0e1O;n5p4s0;d1li1Rset;cov3derstood,i4;fi0t0;a8e3Rhr7i6ouTr4urn0wi4C;a4imm0ou2G;ck0in0pp0;ed,r0;eat2Qi37;m0nn0r4;get0ni2T;aOcKeIhGimFm0Hoak0pDt7u4;bsid3Ogge44s4;pe4ta2Y;ct0nd0;a8e7i2Eok0r5u4;ff0mp0nn0;ength2Hip4;ed,p0;am0reotyp0;in0t0;eci4ik0oH;al3Efi0;pRul1;a4ock0ut;d0r0;a4c1Jle2t31;l0s3Ut0;a6or5r4;at4e25;ch0;r0tt3;t4ut0;is2Mur1;aEe5o4;tt0;cAdJf2Bg9je2l8m0Knew0p7qu6s4;eTpe2t4;or0ri2;e3Dir0;e1lac0;at0e2Q;i0Rul1;eiv0o4ycl0;mme2Lrd0v3;in0lli0ti2A;a4ot0;li28;aCer30iBlAo9r5u4;mp0zzl0;e6i2Oo4;ce2Fd4lo1Anou30pos0te2v0;uc0;fe1CocCp0Iss0;i2Kli1L;ann0e2CuS;ck0erc0ss0;ck0i2Hr4st0;allLk0;bse7c6pp13rgan2Dver4;lo4whelm0;ok0;cupi0;rv0;aJe5o4;t0uri1A;ed0gle2;a6e5ix0o4ut0ys1N;di1Nt15u26;as0Clt0;n4rk0;ag0ufact0A;e6i5o4;ad0ck0st,v0;cens0m04st0;ft,v4;el0;tt0wn;a5o15u4;dg0s1B;gg0;llumSmpAn4sol1;br0cre1Ldebt0f8jZspir0t5v4;it0olv0;e4ox0Y;gr1n4re23;d0si15;e2l1o1Wuri1;li0o01r4;ov0;a6e1o4um03;ok0r4;ri0Z;mm3rm0;i6r5u4;a1Bid0;a0Ui0Rown;ft0;aAe9i8l6oc0Ir4;a4i0oz0Y;ctHg19m0;avo0Ju4;st3;ni08tt0x0;ar0;d0il0sc4;in1;dCl1mBn9quipp0s8x4;agger1c6p4te0T;a0Se4os0;ct0rie1D;it0;cap0tabliZ;cha0XgFha1As4;ur0;a0Zbarra0N;i0Buc1;aMeDi5r4;a01i0;gni08miniSre2s4;a9c6grun0Ft4;o4re0Hu17;rt0;iplWou4;nt0r4;ag0;bl0;cBdRf9l8p7ra6t5v4;elop0ot0;ail0ermQ;ng0;re07;ay0ight0;e4in0o0M;rr0;ay0enTor1;m5t0z4;ed,zl0;ag0p4;en0;aPeLhIlHo9r6u4;lt4r0stom03;iv1;a5owd0u4;sh0;ck0mp0;d0loAm7n4ok0v3;centr1f5s4troC;id3olid1;us0;b5pl4;ic1;in0;r0ur0;assi9os0utt3;ar5i4;ll0;g0m0;lebr1n6r4;ti4;fi0;tralJ;g0lcul1;aDewild3iCl9o7r5urn4;ed,t;ok4uis0;en;il0r0t4und;tl0;e5i4;nd0;ss0;as0;ffl0k0laMs0tt3;bPcNdKfIg0lFmaz0nDppBrm0ss9u5wa4;rd0;g5thor4;iz0;me4;nt0;o6u4;m0r0;li0re4;ci1;im1ticip1;at0;a5leg0t3;er0;rm0;fe2;ct0;ju5o7va4;nc0;st0;ce4knowledg0;pt0;and5so4;rb0;on0;ed",Singular:"true\xa60:5J;1:5H;2:4W;3:4S;4:52;5:57;6:5L;7:56;8:5B;a52b4Lc3Nd35e2Xf2Og2Jh28in24j23k22l1Um1Ln1Ho1Bp0Rqu0Qr0FsZtMuHvCw9x r58yo yo;a9ha3Po3Q;f3i4Rt0Gy9;! arou39;arCeAideo ga2Qo9;cabu4Jl5C;gOr9t;di4Zt1Y;iety,ni4P;nBp30rAs 9;do43s5E;bani1in0;coordinat3Ader9;estima1to24we41; rex,aKeJhHiFoErBuAv9;! show;m2On2rntLto1D;agedy,ib9o4E;e,u9;n0ta46;ni1p2rq3L;c,er,m9;etF;ing9ree26;!y;am,mp3F;ct2le6x return;aNcMeKhor4QiJkHoGpin off,tDuBy9;ll9ner7st4T;ab2X;b9i1n28per bowl,rro1X;st3Ltot0;atAipe2Go1Lrate7udent9;! lo0I;i39u1;ft ser4Lmeo1I;elet5i9;ll,r3V;b38gn2Tte;ab2Jc9min3B;t,urity gua2N;e6ho2Y;bbatic0la3Jndwi0Qpi5;av5eDhetor2iAo9;de6om,w;tAv9;erb2C;e,u0;bDcBf9publ2r10spi1;er9orm3;e6r0;i9ord label;p2Ht0;a1u46;estion mark,ot2F;aPeMhoLiIlGoErAu9yram1F;ddi3HpErpo1Js3J;eBo9;bl3Zs9;pe3Jta1;dic1Rmi1Fp1Qroga8ss relea1F;p9rt0;py;a9ebisci1;q2Dte;cn2eAg9;!gy;!r;ne call,tocoK;anut,dAr9t0yo1;cen3Jsp3K;al,est0;nop4rAt9;e,hog5;adi11i2V;atme0bj3FcBpia1rde0thers,utspok5ve9wn3;n,r9;ti0Pview;cuAe9;an;pi3;arBitAot9umb3;a2Fhi2R;e,ra1;cot2ra8;aFeCiAo9ur0;nopo4p18rni2Nsq1Rti36uld;c,li11n0As9tt5;chief,si34;dAnu,t9;al,i3;al,ic;gna1mm0nd15rsupi0te9yf4;ri0;aDegCiBu9;ddi1n9;ch;me,p09; Be0M;bor14y9; 9er;up;eyno1itt5;el4ourn0;cBdices,itia8ni25sAtel0Lvert9;eb1J;e28titu1;en8i2T;aIeEighDoAu9;man right,s22;me9rmoFsp1Ftb0K;! r9;un; scho0YriY;a9i1N;d9v5; start,pho9;ne;ndful,sh brown,v5ze;aBelat0Ilaci3r9ul4yp1S;an9enadi3id;a1Cd slam,ny;df4r9;l2ni1I;aGeti1HiFlu1oCrAun9;er0;ee market,i9onti3;ga1;l4ur9;so9;me;ePref4;br2mi4;conoFffi7gg,lecto0Rmbas1EnCpidem2s1Zth2venBxAyel9;id;ampZempl0Nte6;i19t;er7terp9;ri9;se;my;eLiEoBr9ump tru0U;agonf4i9;er,ve thru;cAg7i4or,ssi3wn9;side;to0EumenE;aEgniDnn3sAvide9;nd;conte6incen8p9tri11;osi9;ti0C;ta0H;le0X;athBcAf9ni0terre6;ault 05err0;al,im0;!b9;ed;aWeThMiLlJoDr9;edit caBuc9;ib9;le;rd;efficDke,lCmmuniqLnsApi3rr0t0Xus9yo1;in;erv9uI;ato02;ic,lQ;ie6;er7i9oth;e6n2;ty,vil wM;aDeqCick5ocoBr9;istmas car9ysanthemum;ol;la1;ue;ndeli3racteri9;st2;iAllEr9;e0tifica1;liZ;hi3nFpErCt9ucus;erpi9hedr0;ll9;ar;!bohyd9ri3;ra1;it0;aAe,nib0t9;on;l,ry;aMeLiop2leJoHrDu9;nny,r9tterf4;g9i0;la9;ry;eakAi9;ck;fa9throB;st;dy,ro9wl;ugh;mi9;sh;an,l4;nkiArri3;er;ng;cSdMlInFppeti1rDsBtt2utop9;sy;ic;ce6pe9;ct;r9sen0;ay;ecAoma4tiA;ly;do1;i5l9;er7y;gy;en; hominDjAvan9;tage;ec8;ti9;ve;em;cCeAqui9;tt0;ta1;te;iAru0;al;de6;nt","Person|Noun":"true\xa6a0Eb07c03dWeUfQgOhLjHkiGlFmCnBolive,p7r4s3trini06v1wa0;ng,rd,tts;an,enus,iol0;a,et;ky,onPumm09;ay,e1o0uby;bin,d,se;ed,x;a2e1o0;l,tt04;aLnJ;dYge,tR;at,orm;a0eloW;t0x,ya;!s;a9eo,iH;ng,tP;a2e1o0;lGy;an,w3;de,smi4y;a0erb,iOolBuntR;ll,z0;el;ail,e0iLuy;ne;a1ern,i0lo;elds,nn;ith,n0;ny;a0dEmir,ula,ve;rl;a4e3i1j,ol0;ly;ck,x0;ie;an,ja;i0wn;sy;am,h0liff,rystal;a0in,ristian;mbers,ri0;ty;a4e3i2o,r0ud;an0ook;dy;ll;nedict,rg;k0nks;er;l0rt;fredo,ma","Actor|Verb":"true\xa6aCb8c5doctor,engineAfool,g3host,judge,m2nerd,p1recruit,scout,ushAvolunteAwi0;mp,tneA;arent,ilot;an,ime;eek,oof,r0uide;adu8oom;ha1o0;ach,nscript,ok;mpion,uffeur;o2u0;lly,tch0;er;ss;ddi1ffili0rchite1;ate;ct",MaleName:"true\xa60:H6;1:FZ;2:DS;3:GQ;4:CZ;5:FV;6:GM;7:FP;8:GW;9:ET;A:C2;B:GD;aF8bE1cCQdBMeASfA1g8Yh88i7Uj6Sk6Bl5Mm48n3So3Ip33qu31r26s1Et0Ru0Ov0CwTxSyHzC;aCor0;cChC1karia,nAT;!hDkC;!aF6;!ar7CeF5;aJevgenBSoEuC;en,rFVsCu3FvEF;if,uf;nDs6OusC;ouf,s6N;aCg;s,tC;an,h0;hli,nCrosE1ss09;is,nC;!iBU;avi2ho5;aPeNiDoCyaEL;jcieBJlfgang,odrFutR;lFnC;f8TsC;lCt1;ow;bGey,frEhe4QlC;aE5iCy;am,e,s;ed8iC;d,ed;eAur;i,ndeD2rn2sC;!l9t1;lDyC;l1ne;lDtC;!er;aCHy;aKernDAiFladDoC;jteB0lodymyr;!iC;mFQsDB;cFha0ktBZnceDrgCOvC;a0ek;!nC;t,zo;!e4StBV;lCnC7sily;!entC;in9J;ghE2lCm70nax,ri,sm0;riCyss87;ch,k;aWeRhNiLoGrEuDyC;!l2roEDs1;n6r6E;avD0eCist0oy,um0;ntCRvBKy;bFdAWmCny;!asDmCoharu;aFFie,y;!z;iA6y;mCt4;!my,othy;adEeoDia0SomC;!as;!dor91;!de4;dFrC;enBKrC;anBJeCy;ll,nBI;!dy;dgh,ha,iCnn2req,tsu5V;cDAka;aYcotWeThPiMlobod0oKpenc2tEurDvenAEyCzym1;ed,lvest2;aj,e9V;anFeDuC;!aA;fan17phEQvCwaA;e77ie;!islaCl9;v,w;lom1rBuC;leymaDHta;dDgmu9UlCm1yabonga;as,v8B;!dhart8Yn9;aEeClo75;lCrm0;d1t1;h9Jne,qu1Jun,wn,yne;aDbastiEDk2Yl5Mpp,rgCth,ymoCU;e1Dio;m4n;!tC;!ie,y;eDPlFmEnCq67tosCMul;dCj2UtiA5;e01ro;!iATkeB6mC4u5;!ik,vato9K;aZeUheC8iRoGuDyC;an,ou;b99dDf4peAssC;!elEG;ol00y;an,bLc7MdJel,geIh0lHmGnEry,sDyC;!ce;ar7Ocoe,s;!aCnBU;ld,n;an,eo;a7Ef;l7Jr;e3Eg2n9olfo,riC;go;bBNeDH;cCl9;ar87c86h54kCo;!ey,ie,y;cFeA3gDid,ubByCza;an8Ln06;g85iC;naC6s;ep;ch8Kfa5hHin2je8HlGmFndEoHpha5sDul,wi36yC;an,mo8O;h9Im4;alDSol3O;iD0on;f,ph;ul;e9CinC;cy,t1;aOeLhilJiFrCyoG;aDeC;m,st1;ka85v2O;eDoC;tr;r8GtC;er,ro;!ipCl6H;!p6U;dCLrcy,tC;ar,e9JrC;!o7;b9Udra8So9UscAHtri62ulCv8I;!ie,o7;ctav6Ji2lImHndrBRrGsDtCum6wB;is,to;aDc6k6m0vCwaBE;al79;ma;i,vR;ar,er;aDeksandr,ivC;er,i2;f,v;aNeLguyBiFoCu3O;aDel,j4l0ma0rC;beAm0;h,m;cFels,g5i9EkDlC;es,s;!au,h96l78olaC;!i,y;hCkCol76;ol75;al,d,il,ls1vC;ilAF;hom,tC;e,hC;anCy;!a5i5;aYeViLoGuDyC;l4Nr1;hamDr84staC;fa,p6E;ed,mG;di10e,hamEis4JntDritz,sCussa;es,he;e,y;ad,ed,mC;ad,ed;cGgu5hai,kFlEnDtchC;!e8O;a9Pik;house,o7t1;ae73eC3ha8Iolaj;ah,hDkC;!ey,y;aDeC;al,l;el,l;hDlv3rC;le,ri8Ev4T;di,met;ay0c00gn4hWjd,ks2NlTmadZnSrKsXtDuric7VxC;imilBKwe8B;eHhEi69tCus,y69;!eo,hCia7;ew,i67;eDiC;as,eu,s;us,w;j,o;cHiGkFlEqu8Qsha83tCv3;iCy;!m,n;in,on;el,o7us;a6Yo7us;!elCin,o7us;!l8o;frAEi5Zny,u5;achDcoCik;lm;ai,y;amDdi,e5VmC;oud;adCm6W;ou;aulCi9P;ay;aWeOiMloyd,oJuDyC;le,nd1;cFdEiDkCth2uk;a7e;gi,s,z;ov7Cv6Hw6H;!as,iC;a6Een;g0nn52renDuCvA4we7D;!iS;!zo;am,n4oC;n5r;a9Yevi,la5KnHoFst2thaEvC;eCi;nte;bo;nCpo8V;!a82el,id;!nC;aAy;mEnd1rDsz73urenCwr6K;ce,t;ry,s;ar,beAont;aOeIhalHiFla4onr63rDu5SylC;e,s;istCzysztof;i0oph2;er0ngsl9p,rC;ilA9k,ollos;ed,id;en0iGnDrmCv4Z;it;!dDnCt1;e2Ny;ri4Z;r,th;cp2j4mEna8BrDsp6them,uC;ri;im,l;al,il;a03eXiVoFuC;an,lCst3;en,iC;an,en,o,us;aQeOhKkub4AnIrGsDzC;ef;eDhCi9Wue;!ua;!f,ph;dCge;i,on;!aCny;h,s,th6J;anDnC;!ath6Hie,n72;!nC;!es;!l,sCy;ph;o,qu3;an,mC;!i,m6V;d,ffFns,rCs4;a7JemDmai7QoCry;me,ni1H;i9Dy;!e73rC;ey,y;cKdBkImHrEsDvi2yC;dBs1;on,p2;ed,oDrCv67;e6Qod;d,s61;al,es5Wis1;a,e,oCub;b,v;ob,qu13;aTbNchiMgLke53lija,nuKonut,rIsEtCv0;ai,suC;ki;aDha0i8XmaCsac;el,il;ac,iaC;h,s;a,vinCw3;!g;k,nngu6X;nac1Xor;ka;ai,rahC;im;aReLoIuCyd6;beAgGmFsC;eyDsC;a3e3;in,n;ber5W;h,o;m2raDsse3wC;a5Pie;c49t1K;a0Qct3XiGnDrC;beAman08;dr7VrC;iCy2N;!k,q1R;n0Tt3S;bKlJmza,nIo,rEsDyC;a5KdB;an,s0;lEo67r2IuCv9;hi5Hki,tC;a,o;an,ey;k,s;!im;ib;a08e00iUlenToQrMuCyorgy;iHnFsC;!taC;f,vC;!e,o;n6tC;er,h2;do,lC;herDlC;auCerQ;me;aEegCov2;!g,orC;!io,y;dy,h7C;dfr9nza3XrDttfC;ri6C;an,d47;!n;acoGlEno,oCuseppe;rgiCvan6O;!o,s;be6Ies,lC;es;mo;oFrC;aDha4HrC;it,y;ld,rd8;ffErgC;!e7iCy;!os;!r9;bElBrCv3;eCla1Nr4Hth,y;th;e,rC;e3YielC;!i4;aXeSiQlOorrest,rCyod2E;aHedFiC;edDtC;s,z;ri18;!d42eri11riC;ck,k;nCs2;cEkC;ie,lC;in,yn;esLisC;!co,z3M;etch2oC;ri0yd;d5lConn;ip;deriFliEng,rC;dinaCg4nan0B;nd8;pe,x;co;bCdi,hd;iEriC;ce,zC;io;an,en,o;benez2dZfrYit0lTmMnJo3rFsteb0th0ugenEvCymBzra;an,eCge4D;ns,re3K;!e;gi,iDnCrol,v3w3;est8ie,st;cCk;!h,k;o0DriCzo;co,qC;ue;aHerGiDmC;aGe3A;lCrh0;!iC;a10o,s;s1y;nu5;beAd1iEliDm2t1viCwood;n,s;ot28s;!as,j5Hot,sC;ha;a3en;!dGg6mFoDua2QwC;a2Pin;arC;do;oZuZ;ie;a04eTiOmitrNoFrag0uEwDylC;an,l0;ay3Hig4D;a3Gdl9nc0st3;minFnDri0ugCvydGy2S;!lF;!a36nCov0;e1Eie,y;go,iDykC;as;cCk;!k;i,y;armuFetDll1mitri7neCon,rk;sh;er,m6riC;ch;id;andLepak,j0lbeAmetri4nIon,rGsEvDwCxt2;ay30ey;en,in;hawn,moC;nd;ek,riC;ck;is,nC;is,y;rt;re;an,le,mKnIrEvC;e,iC;!d;en,iEne0PrCyl;eCin,yl;l45n;n,o,us;!iCny;el,lo;iCon;an,en,on;a0Fe0Ch03iar0lRoJrFuDyrC;il,us;rtC;!is;aEistC;iaCob12;no;ig;dy,lInErC;ey,neliCy;s,us;nEor,rDstaC;nt3;ad;or;by,e,in,l3t1;aHeEiCyde;fCnt,ve;fo0Xt1;menDt4;us;s,t;rFuDyC;!t1;dCs;e,io;enC;ce;aHeGrisC;!toC;phCs;!eC;!r;st2t;d,rCs;b5leC;s,y;cDdrCs6;ic;il;lHmFrC;ey,lDroCy;ll;!o7t1;er1iC;lo;!eb,v3;a09eZiVjorn,laUoSrEuCyr1;ddy,rtKst2;er;aKeFiEuDyC;an,ce,on;ce,no;an,ce;nDtC;!t;dDtC;!on;an,on;dFnC;dDisC;lav;en,on;!foOl9y;bby,gd0rCyd;is;i0Lke;bElDshC;al;al,lL;ek;nIrCshoi;at,nEtC;!raC;m,nd;aDhaCie;rd;rd8;!iDjam3nCs1;ie,y;to;kaMlazs,nHrC;n9rDtC;!holomew;eCy;tt;ey;dCeD;ar,iC;le;ar1Nb1Dd16fon15gust3hm12i0Zja0Yl0Bm07nTputsiSrGsaFugustEveDyCziz;a0kh0;ry;o,us;hi;aMchiKiJjun,mHnEon,tCy0;em,hCie,ur8;ur;aDoC;!ld;ud,v;aCin;an,nd8;!el,ki;baCe;ld;ta;aq;aMdHgel8tCw6;hoFoC;iDnC;!i8y;ne;ny;er7rCy;eDzC;ej;!as,i,j,s,w;!s;s,tolC;iCy;!y;ar,iEmaCos;nu5r;el;ne,r,t;aVbSdBeJfHiGl01onFphonsEt1vC;aPin;on;e,o;so,zo;!sR;!onZrC;ed;c,jaHksFssaHxC;!andC;er,rC;e,os,u;andCei;ar,er,r;ndC;ro;en;eDrecC;ht;rt8;dd3in,n,sC;taC;ir;ni;dDm6;ar;an,en;ad,eC;d,t;in;so;aGi,olErDvC;ik;ian8;f8ph;!o;mCn;!a;dGeFraDuC;!bakr,lfazl;hCm;am;!l;allFel,oulaye,ulC;!lDrahm0;an;ah,o;ah;av,on",Uncountable:"true\xa60:2E;1:2L;2:33;a2Ub2Lc29d22e1Rf1Ng1Eh16i11j0Yk0Wl0Rm0Hn0Do0Cp03rZsLt9uran2Jv7w3you gu0E;a5his17i4oo3;d,l;ldlife,ne;rm8t1;apor,ernacul29i3;neg28ol1Otae;eDhBiAo8r4un3yranny;a,gst1B;aff2Oea1Ko4ue nor3;th;o08u3;bleshoot2Ose1Tt;night,othpas1Vwn3;foEsfoE;me off,n;er3und1;e,mod2S;a,nnis;aDcCeBhAi9ki8o7p6t4u3weepstak0;g1Unshi2Hshi;ati08e3;am,el;ace2Keci0;ap,cc1meth2C;n,ttl0;lk;eep,ingl0or1C;lf,na1Gri0;ene1Kisso1C;d0Wfe2l4nd,t3;i0Iurn;m1Ut;abi0e4ic3;e,ke15;c3i01laxa11search;ogni10rea10;a9e8hys7luto,o5re3ut2;amble,mis0s3ten20;en1Zs0L;l3rk;i28l0EyH; 16i28;a24tr0F;nt3ti0M;i0s;bstetri24vercrowd1Qxyg09;a5e4owada3utella;ys;ptu1Ows;il poliZtional securi2;aAe8o5u3;m3s1H;ps;n3o1K;ey,o3;gamy;a3cha0Elancholy,rchandi1Htallurgy;sl0t;chine3g1Aj1Hrs,thema1Q; learn1Cry;aught1e6i5ogi4u3;ck,g12;c,s1M;ce,ghtn18nguis1LteratWv1;ath1isVss;ara0EindergartPn3;icke0Aowled0Y;e3upit1;a3llyfiGwel0G;ns;ce,gnor6mp5n3;forma00ter3;net,sta07;atiSort3rov;an18;a7e6isto09o3ung1;ckey,mework,ne4o3rseradi8spitali2use arrest;ky;s2y;adquarteXre;ir,libut,ppiHs3;hi3te;sh;ene8l6o5r3um,ymnas11;a3eZ;niUss;lf,re;ut3yce0F;en; 3ti0W;edit0Hpo3;ol;aNicFlour,o4urnit3;ure;od,rgive3uri1wl;ness;arCcono0LducaBlectr9n7quip8thi0Pvery6x3;ist4per3;ti0B;en0J;body,o08th07;joy3tertain3;ment;ici2o3;ni0H;tiS;nings,th;emi02i6o4raugh3ynas2;ts;pe,wnstai3;rs;abet0ce,s3;honZrepu3;te;aDelciChAivi07l8o3urrency;al,ld w6mmenta5n3ral,ttIuscoB;fusiHt 3;ed;ry;ar;assi01oth0;es;aos,e3;eMwK;us;d,rO;a8i6lood,owlHread5u3;ntGtt1;er;!th;lliarJs3;on;g3ss;ga3;ge;cKdviJeroGirFmBn6ppeal court,r4spi3thleL;rin;ithmet3sen3;ic;i6y3;o4th3;ing;ne;se;en5n3;es2;ty;ds;craft;bi8d3nau7;yna3;mi6;ce;id,ous3;ti3;cs",Infinitive:"true\xa60:9G;1:9T;2:AD;3:90;4:9Z;5:84;6:AH;7:A9;8:92;9:A0;A:AG;B:AI;C:9V;D:8R;E:8O;F:97;G:6H;H:7D;a94b8Hc7Jd68e4Zf4Mg4Gh4Ai3Qj3Nk3Kl3Bm34nou48o2Vp2Equ2Dr1Es0CtZuTvRwI;aOeNiLors5rI;eJiI;ng,te;ak,st3;d5e8TthI;draw,er;a2d,ep;i2ke,nIrn;d1t;aIie;liADniAry;nJpI;ho8Llift;cov1dJear8Hfound8DlIplug,rav82tie,ve94;eaAo3X;erIo;cut,go,staAFvalA3w2G;aSeQhNoMrIu73;aIe72;ffi3Smp3nsI;aBfo7CpI;i8oD;pp3ugh5;aJiJrIwaD;eat5i2;nk;aImA0;ch,se;ck3ilor,keImp1r8L;! paD;a0Ic0He0Fh0Bi0Al08mugg3n07o05p02qu01tUuLwI;aJeeIim;p,t5;ll7Wy;bNccMffLggeCmmKppJrI;mouFpa6Zvi2;o0re6Y;ari0on;er,i4;e7Numb;li9KmJsiIveD;de,st;er9it;aMe8MiKrI;ang3eIi2;ng27w;fIng;f5le;b,gg1rI;t3ve;a4AiA;a4UeJit,l7DoI;il,of;ak,nd;lIot7Kw;icEve;atGeak,i0O;aIi6;m,y;ft,ng,t;aKi6CoJriIun;nk,v6Q;ot,rt5;ke,rp5tt1;eIll,nd,que8Gv1w;!k,m;aven9ul8W;dd5tis1Iy;a0FeKiJoI;am,t,ut;d,p5;a0Ab08c06d05f01group,hea00iZjoi4lXmWnVpTq3MsOtMup,vI;amp,eJiIo3B;sEve;l,rI;e,t;i8rI;ie2ofE;eLiKpo8PtIurfa4;o24rI;aHiBuctu8;de,gn,st;mb3nt;el,hra0lIreseF;a4e71;d1ew,o07;aHe3Fo2;a7eFiIo6Jy;e2nq41ve;mbur0nf38;r0t;inKleBocus,rJuI;el,rbiA;aBeA;an4e;aBu4;ei2k8Bla43oIyc3;gni39nci3up,v1;oot,uI;ff;ct,d,liIp;se,ze;tt3viA;aAenGit,o7;aWerUinpoiFlumm1LoTrLuI;b47ke,niArIt;poDsuI;aFe;eMoI;cKd,fe4XhibEmo7noJpo0sp1tru6vI;e,i6o5L;un4;la3Nu8;aGclu6dJf1occupy,sup0JvI;a6BeF;etermi4TiB;aGllu7rtr5Ksse4Q;cei2fo4NiAmea7plex,sIva6;eve8iCua6;mp1rItrol,ve;a6It6E;bOccuNmEpMutLverIwe;l07sJtu6Yu0wI;helm;ee,h1F;gr5Cnu2Cpa4;era7i4Ipo0;py,r;ey,seItaH;r2ss;aMe0ViJoIultiply;leCu6Pw;micJnIspla4;ce,g3us;!k;iIke,na9;m,ntaH;aPeLiIo0u3N;ke,ng1quIv5;eIi6S;fy;aKnIss5;d,gI;th5;rn,ve;ng2Gu1N;eep,idnJnI;e4Cow;ap;oHuI;gg3xtaI;po0;gno8mVnIrk;cTdRfQgeChPitia7ju8q1CsNtKun6EvI;a6eIo11;nt,rt,st;erJimi6BoxiPrI;odu4u6;aBn,pr03ru6C;iCpi8tIu8;all,il,ruB;abEibE;eCo3Eu0;iIul9;ca7;i7lu6;b5Xmer0pI;aLer4Uin9ly,oJrI;e3Ais6Bo2;rt,se,veI;riA;le,rt;aLeKiIoiCuD;de,jaInd1;ck;ar,iT;mp1ng,pp5raIve;ng5Mss;ath1et,iMle27oLrI;aJeIow;et;b,pp3ze;!ve5A;gg3ve;aTer45i5RlSorMrJuI;lf4Cndrai0r48;eJiIolic;ght5;e0Qsh5;b3XeLfeEgJsI;a3Dee;eIi2;!t;clo0go,shIwa4Z;ad3F;att1ee,i36;lt1st5;a0OdEl0Mm0FnXquip,rWsVtGvTxI;aRcPeDhOiNpJtIu6;ing0Yol;eKi8lIo0un9;aHoI;it,re;ct,di7l;st,t;a3oDu3B;e30lI;a10u6;lt,mi28;alua7oI;ke,l2;chew,pou0tab19;a0u4U;aYcVdTfSgQhan4joy,lPqOrNsuMtKvI;e0YisI;a9i50;er,i4rI;aHenGuC;e,re;iGol0F;ui8;ar9iC;a9eIra2ulf;nd1;or4;ang1oIu8;r0w;irc3lo0ou0ErJuI;mb1;oaGy4D;b3ct;bKer9pI;hasiIow1;ze;aKody,rI;a4oiI;d1l;lm,rk;ap0eBuI;ci40de;rIt;ma0Rn;a0Re04iKo,rIwind3;aw,ed9oI;wn;agno0e,ff1g,mi2Kne,sLvI;eIul9;rIst;ge,t;aWbVcQlod9mant3pNru3TsMtI;iIoDu37;lJngI;uiA;!l;ol2ua6;eJlIo0ro2;a4ea0;n0r0;a2Xe36lKoIu0S;uIv1;ra9;aIo0;im;a3Kur0;b3rm;af5b01cVduBep5fUliTmQnOpMrLsiCtaGvI;eIol2;lop;ch;a20i2;aDiBloIoD;re,y;oIy;te,un4;eJoI;liA;an;mEv1;a4i0Ao06raud,y;ei2iMla8oKrI;ee,yI;!pt;de,mIup3;missi34po0;de,ma7ph1;aJrief,uI;g,nk;rk;mp5rk5uF;a0Dea0h0Ai09l08oKrIurta1G;a2ea7ipp3uI;mb3;ales4e04habEinci6ll03m00nIrro6;cXdUfQju8no7qu1sLtKvI;eIin4;ne,r9y;aHin2Bribu7;er2iLoli2Epi8tJuI;lt,me;itu7raH;in;d1st;eKiJoIroFu0;rm;de,gu8rm;ss;eJoI;ne;mn,n0;eIlu6ur;al,i2;buCe,men4pI;eIi3ly;l,te;eBi6u6;r4xiC;ean0iT;rcumveFte;eJirp,oI;o0p;riAw;ncIre5t1ulk;el;a02eSi6lQoPrKuI;iXrIy;st,y;aLeaKiJoad5;en;ng;stfeLtX;ke;il,l11mba0WrrMth1;eIow;ed;!coQfrie1LgPhMliLqueaKstJtrIwild1;ay;ow;th;e2tt3;a2eJoI;ld;ad;!in,ui3;me;bysEckfi8ff3tI;he;b15c0Rd0Iff0Ggree,l0Cm09n03ppZrXsQttOuMvJwaE;it;eDoI;id;rt;gIto0X;meF;aIeCraB;ch,in;pi8sJtoI;niA;aKeIi04u8;mb3rt,ss;le;il;re;g0Hi0ou0rI;an9i2;eaKly,oiFrI;ai0o2;nt;r,se;aMi0GnJtI;icipa7;eJoIul;un4y;al;ly0;aJu0;se;lga08ze;iKlI;e9oIu6;t,w;gn;ix,oI;rd;a03jNmiKoJsoI;rb;pt,rn;niIt;st1;er;ouJuC;st;rn;cLhie2knowled9quiItiva7;es4re;ce;ge;eQliOoKrJusI;e,tom;ue;mIst;moJpI;any,liA;da7;ma7;te;pt;andPduBet,i6oKsI;coKol2;ve;liArt,uI;nd;sh;de;ct;on",Person:"true\xa60:1Q;a29b1Zc1Md1Ee18f15g13h0Ri0Qj0Nk0Jl0Gm09n06o05p00rPsItCusain bolt,v9w4xzibit,y1;anni,oko on2uji,v1;an,es;en,o;a3ednesday adams,i2o1;lfram,o0Q;ll ferrell,z khalifa;lt disn1Qr1;hol,r0G;a2i1oltai06;n dies0Zrginia wo17;lentino rossi,n goG;a4h3i2ripp,u1yra banks;lZpac shakur;ger woods,mba07;eresa may,or;kashi,t1ylor;um,ya1B;a5carlett johanss0h4i3lobodan milosevic,no2ocr1Lpider1uperm0Fwami; m0Em0E;op dogg,w whi1H;egfried,nbad;akespeaTerlock holm1Sia labeouf;ddam hussa16nt1;a cla11ig9;aAe6i5o3u1za;mi,n dmc,paul,sh limbau1;gh;bin hood,d stew16nald1thko;in0Mo;han0Yngo starr,valdo;ese witherspo0i1mbrandt;ll2nh1;old;ey,y;chmaninoff,ffi,iJshid,y roma1H;a4e3i2la16o1uff daddy;cahont0Ie;lar,p19;le,rZ;lm17ris hilt0;leg,prah winfr0Sra;a2e1iles cra1Bostradam0J; yo,l5tt06wmQ;pole0s;a5e4i2o1ubar03;by,lie5net,rriss0N;randa ju1tt romn0M;ly;rl0GssiaB;cklemo1rkov,s0ta hari,ya angelou;re;ady gaga,e1ibera0Pu;bron jam0Xch wale1e;sa;anye west,e3i1obe bryant;d cudi,efer suther1;la0P;ats,sha;a2effers0fk,k rowling,rr tolki1;en;ck the ripp0Mwaharlal nehru,y z;liTnez,ron m7;a7e5i3u1;lk hog5mphrey1sa01;! bog05;l1tl0H;de; m1dwig,nry 4;an;ile selassFlle ber4m3rrison1;! 1;ford;id,mo09;ry;ast0iannis,o1;odwPtye;ergus0lorence nightinga08r1;an1ederic chopN;s,z;ff5m2nya,ustaXzeki1;el;eril lagasse,i1;le zatop1nem;ek;ie;a6e4i2octor w1rake;ho;ck w1ego maradoC;olf;g1mi lovaOnzel washingt0;as;l1nHrth vadR;ai lNt0;a8h5lint0o1thulhu;n1olio;an,fuci1;us;on;aucKop2ristian baMy1;na;in;millo,ptain beefhe4r1;dinal wols2son1;! palmF;ey;art;a8e5hatt,i3oHro1;ck,n1;te;ll g1ng crosby;atB;ck,nazir bhut2rtil,yon1;ce;to;nksy,rack ob1;ama;l 6r3shton kutch2vril lavig8yn ra1;nd;er;chimed2istot1;le;es;capo2paci1;no;ne",Adjective:"true\xa60:AI;1:BS;2:BI;3:BA;4:A8;5:84;6:AV;7:AN;8:AF;9:7H;A:BQ;B:AY;C:BC;D:BH;E:9Y;aA2b9Ec8Fd7We79f6Ng6Eh61i4Xj4Wk4Tl4Im41n3Po36p2Oquart7Pr2Ds1Dt14uSvOwFye29;aMeKhIiHoF;man5oFrth7G;dADzy;despreB1n w97s86;acked1UoleF;!sa6;ather1PeFll o70ste1D;!k5;nt1Ist6Ate4;aHeGiFola5T;bBUce versa,gi3Lle;ng67rsa5R;ca1gBSluAV;lt0PnLpHrGsFttermoBL;ef9Ku3;b96ge1; Hb32pGsFtiAH;ca6ide d4R;er,i85;f52to da2;a0Fbeco0Hc0Bd04e02f01gu1XheaBGiXkn4OmUnTopp06pRrNsJtHus0wF;aFiel3K;nt0rra0P;app0eXoF;ld,uS;eHi37o5ApGuF;perv06spec39;e1ok9O;en,ttl0;eFu5;cogn06gul2RlGqu84sF;erv0olv0;at0en33;aFrecede0E;id,rallel0;am0otic0;aFet;rri0tF;ch0;nFq26vers3;sur0terFv7U;eFrupt0;st0;air,inish0orese98;mploy0n7Ov97xpF;ect0lain0;eHisFocume01ue;clFput0;os0;cid0rF;!a8Scov9ha8Jlyi8nea8Gprivileg0sMwF;aFei9I;t9y;hGircumcFonvin2U;is0;aFeck0;lleng0rt0;b20ppea85ssuGttend0uthorF;iz0;mi8;i4Ara;aLeIhoHip 25oGrF;anspare1encha1i2;geth9leADp notch,rpB;rny,ugh6H;ena8DmpGrFs6U;r49tia4;eCo8P;leFst4M;nt0;a0Dc09e07h06i04ki03l01mug,nobbi4XoVpRqueami4XtKuFymb94;bHccinAi generis,pFr5;erFre7N;! dup9b,vi70;du0li7Lp6IsFurb7J;eq9Atanda9X;aKeJi16o2QrGubboFy4Q;rn;aightFin5GungS; fFfF;or7V;adfa9Pri6;lwa6Ftu82;arHeGir6NlendBot Fry;on;c3Qe1S;k5se; call0lImb9phistic16rHuFviV;ndFth1B;proof;dBry;dFub6; o2A;e60ipF;pe4shod;ll0n d7R;g2HnF;ceEg6ist9;am3Se9;co1Zem5lfFn6Are7; suf4Xi43;aGholFient3A;ar5;rlFt4A;et;cr0me,tisfac7F;aOeIheumatoBiGoF;bu8Ztt7Gy3;ghtFv3; 1Sf6X;cJdu8PlInown0pro69sGtF;ard0;is47oF;lu2na1;e1Suc45;alcit8Xe1ondi2;bBci3mpa1;aSePicayu7laOoNrGuF;bl7Tnjabi;eKiIoF;b7VfGmi49pFxi2M;er,ort81;a7uD;maFor,sti7va2;!ry;ciDexis0Ima2CpaB;in55puli8G;cBid;ac2Ynt 3IrFti2;ma40tFv7W;!i3Z;i2YrFss7R;anoBtF; 5XiF;al,s5V;bSffQkPld OnMrLth9utKverF;!aIbMdHhGni75seas,t,wF;ei74rou74;a63e7A;ue;ll;do1Ger,si6A;d3Qg2Aotu5Z; bFbFe on o7g3Uli7;oa80;fashion0school;!ay; gua7XbFha5Uli7;eat;eHligGsF;ce7er0So1C;at0;diFse;a1e1;aOeNiMoGuF;anc0de; moEnHrthFt6V;!eFwe7L;a7Krn;chaGdescri7Iprof30sF;top;la1;ght5;arby,cessa4ighbor5wlyw0xt;k0usiaFv3;ti8;aQeNiLoHuF;dIltiF;facet0p6;deHlGnFot,rbBst;ochro4Xth5;dy;rn,st;ddle ag0nF;dbloZi,or;ag9diocEga,naGrFtropolit4Q;e,ry;ci8;cIgenta,inHj0Fkeshift,mmGnFri4Oscu61ver18;da5Dy;ali4Lo4U;!stream;abEho;aOeLiIoFumberi8;ngFuti1R;stan3RtF;erm,i4H;ghtGteraF;l,ry,te;heart0wei5O;ft JgFss9th3;al,eFi0M;nda4;nguBps0te5;apGind5noF;wi8;ut;ad0itte4uniW;ce co0Hgno6Mll0Cm04nHpso 2UrF;a2releF;va1; ZaYcoWdReQfOgrNhibi4Ri05nMoLsHtFvalu5M;aAeF;nDrdepe2K;a7iGolFuboI;ub6ve1;de,gF;nifica1;rdi5N;a2er;own;eriIiLluenVrF;ar0eq5H;pt,rt;eHiGoFul1O;or;e,reA;fiFpe26termi5E;ni2;mpFnsideCrreA;le2;ccuCdeq5Ene,ppr4J;fFsitu,vitro;ro1;mJpF;arHeGl15oFrop9;li2r11;n2LrfeA;ti3;aGeFi18;d4BnD;tuE;egGiF;c0YteC;al,iF;tiF;ma2;ld;aOelNiLoFuma7;a4meInHrrGsFur5;ti6;if4E;e58o3U; ma3GsF;ick;ghfalut2HspF;an49;li00pf33;i4llow0ndGrdFtM; 05coEworki8;sy,y;aLener44iga3Blob3oKrGuF;il1Nng ho;aFea1Fizzl0;cGtF;ef2Vis;ef2U;ld3Aod;iFuc2D;nf2R;aVeSiQlOoJrF;aGeFil5ug3;q43tf2O;gFnt3S;i6ra1;lk13oHrF; keeps,eFge0Vm9tu41;g0Ei2Ds3R;liF;sh;ag4Mowe4uF;e1or45;e4nF;al,i2;d Gmini7rF;ti6ve1;up;bl0lDmIr Fst pac0ux;oGreacF;hi8;ff;ed,ili0R;aXfVlTmQnOqu3rMthere3veryday,xF;aApIquisi2traHuF;be48lF;ta1;!va2L;edRlF;icF;it;eAstF;whi6; Famor0ough,tiE;rou2sui2;erGiF;ne1;ge1;dFe2Aoq34;er5;ficF;ie1;g9sF;t,ygF;oi8;er;aWeMiHoGrFue;ea4owY;ci6mina1ne,r31ti8ubQ;dact2Jfficult,m,sGverF;ge1se;creGePjoi1paCtF;a1inA;et,te; Nadp0WceMfiLgeneCliJmuEpeIreliAsGvoF;id,ut;pFtitu2ul1L;eCoF;nde1;ca2ghF;tf13;a1ni2;as0;facto;i5ngero0I;ar0Ce09h07i06l05oOrIuF;rmudgeon5stoma4teF;sy;ly;aIeHu1EystalF; cleFli7;ar;epy;fFv17z0;ty;erUgTloSmPnGrpoCunterclVveFy;rt;cLdJgr21jIsHtrF;aFi2;dic0Yry;eq1Yta1;oi1ug3;escenFuN;di8;a1QeFiD;it0;atoDmensuCpF;ass1SulF;so4;ni3ss3;e1niza1;ci1J;ockwiD;rcumspeAvil;eFintzy;e4wy;leGrtaF;in;ba2;diac,ef00;a00ePiLliJoGrFuck nak0;and new,isk,on22;gGldface,naF; fi05fi05;us;nd,tF;he;gGpartisFzarE;an;tiF;me;autifOhiNlLnHsFyoN;iWtselF;li8;eGiFt;gn;aFfi03;th;at0oF;v0w;nd;ul;ckwards,rF;e,rT; priori,b13c0Zd0Tf0Ng0Ihe0Hl09mp6nt06pZrTsQttracti0MuLvIwF;aGkF;wa1B;ke,re;ant garGeraF;ge;de;diIsteEtF;heFoimmu7;nt07;re;to4;hGlFtu2;eep;en;bitIchiv3roHtF;ifiFsy;ci3;ga1;ra4;ry;pFt;aHetizi8rF;oprF;ia2;llFre1;ed,i8;ng;iquFsy;at0e;ed;cohKiJkaHl,oGriFterX;ght;ne,of;li7;ne;ke,ve;olF;ic;ad;ain07gressiIi6rF;eeF;ab6;le;ve;fGraB;id;ectGlF;ue1;ioF;na2; JaIeGvF;erD;pt,qF;ua2;ma1;hoc,infinitum;cuCquiGtu3u2;al;esce1;ra2;erSjeAlPoNrKsGuF;nda1;e1olu2trF;aAuD;se;te;eaGuF;pt;st;aFve;rd;aFe;ze;ct;ra1;nt",Pronoun:"true\xa6elle,h3i2me,she,th0us,we,you;e0ou;e,m,y;!l,t;e,im",Preposition:"true\xa6aPbMcLdKexcept,fIinGmid,notwithstandiWoDpXqua,sCt7u4v2w0;/o,hereSith0;! whHin,oW;ersus,i0;a,s a vis;n1p0;!on;like,til;h1ill,oward0;!s;an,ereby,r0;ough0u;!oM;ans,ince,o that,uch G;f1n0ut;!to;!f;! 0to;effect,part;or,r0;om;espite,own,u3;hez,irca;ar1e0oBy;sides,tween;ri7;bo8cross,ft7lo6m4propos,round,s1t0;!op;! 0;a whole,long 0;as;id0ong0;!st;ng;er;ut",SportsTeam:"true\xa60:18;1:1E;2:1D;3:14;a1Db15c0Sd0Kfc dallas,g0Ihouston 0Hindiana0Gjacksonville jagua0k0El0Am01new UoRpKqueens parkJreal salt lake,sBt6utah jazz,vancouver whitecaps,w4yW;ashington 4h10;natio1Mredski2wizar0W;ampa bay 7e6o4;ronto 4ttenham hotspur;blue ja0Mrapto0;nnessee tita2xasD;buccanee0ra0K;a8eattle 6porting kansas0Wt4; louis 4oke0V;c1Drams;marine0s4;eah13ounH;cramento Rn 4;antonio spu0diego 4francisco gJjose earthquak1;char08paB; ran07;a9h6ittsburgh 5ortland t4;imbe0rail blaze0;pirat1steele0;il4oenix su2;adelphia 4li1;eagl1philNunE;dr1;akland 4klahoma city thunder,rlando magic;athle0Lrai4;de0;england 8orleans 7york 4;g5je3knYme3red bul0Xy4;anke1;ian3;pelica2sain3;patrio3revolut4;ion;anchEeAi4ontreal impact;ami 8lwaukee b7nnesota 4;t5vi4;kings;imberwolv1wi2;rewe0uc0J;dolphi2heat,marli2;mphis grizz4ts;li1;a6eic5os angeles 4;clippe0dodFlaB;esterV; galaxy,ke0;ansas city 4nF;chiefs,roya0D; pace0polis col3;astr05dynamo,rocke3texa2;olden state warrio0reen bay pac4;ke0;allas 8e4i04od6;nver 6troit 4;lio2pisto2ti4;ge0;broncYnugge3;cowbo5maver4;icZ;ys;arEelLhAincinnati 8leveland 6ol4;orado r4umbus crew sc;api7ocki1;brow2cavalie0guar4in4;dia2;bengaVre4;ds;arlotte horAicago 4;b5cubs,fire,wh4;iteB;ea0ulQ;diff4olina panthe0; city;altimore Alackburn rove0oston 6rooklyn 4uffalo bilN;ne3;ts;cel5red4; sox;tics;rs;oriol1rave2;rizona Ast8tlanta 4;brav1falco2h4;awA;ns;es;on villa,r4;os;c6di4;amondbac4;ks;ardi4;na4;ls",Unit:"true\xa6a07b04cXdWexVfTgRhePinYjoule0BkMlJmDnan08oCp9quart0Bsq ft,t7volts,w6y2ze3\xb01\xb50;g,s;c,f,n;dVear1o0;ttR; 0s 0;old;att,b;erNon0;!ne02;ascals,e1i0;cXnt00;rcent,tJ;hms,unceY;/s,e4i0m\xb2,\xb2,\xb3;/h,cro2l0;e0liK;!\xb2;grLsR;gCtJ;it1u0;menQx;erPreP;b5elvins,ilo1m0notO;/h,ph,\xb2;!byGgrEmCs;ct0rtzL;aJogrC;allonJb0ig3rB;ps;a0emtEl oz,t4;hrenheit,radG;aby9;eci3m1;aratDe1m0oulombD;\xb2,\xb3;lsius,nti0;gr2lit1m0;et0;er8;am7;b1y0;te5;l,ps;c2tt0;os0;econd1;re0;!s","Noun|Gerund":"true\xa60:3O;1:3M;2:3N;3:3D;4:32;5:2V;6:3E;7:3K;8:36;9:3J;A:3B;a3Pb37c2Jd27e23f1Vg1Sh1Mi1Ij1Gk1Dl18m13n11o0Wp0Pques0Sr0EsTtNunderMvKwFyDzB;eroi0oB;ni0o3P;aw2eB;ar2l3;aEed4hispe5i5oCrB;ap8est3i1;n0ErB;ki0r31;i1r2s9tc9;isualizi0oB;lunt1Vti0;stan4ta6;aFeDhin6iCraBy8;c6di0i2vel1M;mi0p8;aBs1;c9si0;l6n2s1;aUcReQhOiMkatKl2Wmo6nowJpeItFuCwB;ea5im37;b35f0FrB;fi0vB;e2Mi2J;aAoryt1KrCuB;d2KfS;etc9ugg3;l3n4;bCi0;ebBi0;oar4;gnBnAt1;a3i0;ip8oB;p8rte2u1;a1r27t1;hCo5reBulp1;a2Qe2;edu3oo3;i3yi0;aKeEi4oCuB;li0n2;oBwi0;fi0;aFcEhear7laxi0nDpor1sB;pon4tructB;r2Iu5;de5;or4yc3;di0so2;p8ti0;aFeacek20laEoCrBublis9;a1Teten4in1oces7;iso2siB;tio2;n2yi0;ckaAin1rB;ki0t1O;fEpeDrganiCvB;erco24ula1;si0zi0;ni0ra1;fe5;avi0QeBur7;gotia1twor6;aDeCi2oB;de3nito5;a2dita1e1ssaA;int0XnBrke1;ifUufactu5;aEeaDiBodAyi0;cen7f1mi1stB;e2i0;r2si0;n4ug9;iCnB;ea4it1;c6l3;ogAuB;dAgg3stif12;ci0llust0VmDnBro2;nova1sp0NterBven1;ac1vie02;agi2plo4;aDea1iCoBun1;l4w3;ki0ri0;nd3rB;roWvB;es1;aCene0Lli4rBui4;ee1ie0N;rde2the5;aHeGiDlCorBros1un4;e0Pmat1;ir1oo4;gh1lCnBs9;anZdi0;i0li0;e3nX;r0Zscina1;a1du01nCxB;erci7plo5;chan1di0ginB;ee5;aLeHiGoub1rCum8wB;el3;aDeCiB;bb3n6vi0;a0Qs7;wi0;rTscoDvi0;ba1coZlBvelo8;eCiB;ve5;ga1;nGti0;aVelebUhSlPoDrBur3yc3;aBos7yi0;f1w3;aLdi0lJmFnBo6pi0ve5;dDsCvinB;ci0;trBul1;uc1;muniDpB;lBo7;ai2;ca1;lBo5;ec1;c9ti0;ap8eaCimToBubT;ni0t9;ni0ri0;aBee5;n1t1;ra1;m8rCs1te5;ri0;vi0;aPeNitMlLoGrDuB;dge1il4llBr8;yi0;an4eat9oadB;cas1;di0;a1mEokB;i0kB;ee8;pi0;bi0;es7oa1;c9i0;gin2lonAt1;gi0;bysit1c6ki0tt3;li0;ki0;bando2cGdverti7gi0pproac9rgDssuCtB;trac1;mi0;ui0;hi0;si0;coun1ti0;ti0;ni0;ng",PhrasalVerb:"true\xa60:92;1:96;2:8H;3:8V;4:8A;5:83;6:85;7:98;8:90;9:8G;A:8X;B:8R;C:8U;D:8S;E:70;F:97;G:8Y;H:81;I:7H;J:79;a9Fb7Uc6Rd6Le6Jf5Ig50h4Biron0j47k40l3Em31n2Yo2Wp2Cquiet Hr1Xs0KtZuXvacuu6QwNyammerBzK;ero Dip LonK;e0k0;by,ov9up;aQeMhLiKor0Mrit19;mp0n3Fpe0r5s5;ackAeel Di0S;aLiKn33;gh 3Wrd0;n Dr K;do1in,oJ;it 79k5lk Lrm 69sh Kt83v60;aw3do1o7up;aw3in,oC;rgeBsK;e 2herE;a00eYhViRoQrMuKypP;ckErn K;do1in,oJup;aLiKot0y 30;ckl7Zp F;ck HdK;e 5Y;n7Wp 3Es5K;ck MdLe Kghten 6me0p o0Rre0;aw3ba4do1in,up;e Iy 2;by,oG;ink Lrow K;aw3ba4in,up;ba4ov9up;aKe 77ll62;m 2r 5M;ckBke Llk K;ov9shit,u47;aKba4do1in,leave,o4Dup;ba4ft9pa69w3;a0Vc0Te0Mh0Ii0Fl09m08n07o06p01quar5GtQuOwK;earMiK;ngLtch K;aw3ba4o8K; by;cKi6Bm 2ss0;k 64;aReQiPoNrKud35;aigh2Det75iK;ke 7Sng K;al6Yup;p Krm2F;by,in,oG;c3Ln3Lr 2tc4O;p F;c3Jmp0nd LrKveAy 2O;e Ht 2L;ba4do1up;ar3GeNiMlLrKurB;ead0ingBuc5;a49it 6H;c5ll o3Cn 2;ak Fe1Xll0;a3Bber 2rt0und like;ap 5Vow Duggl5;ash 6Noke0;eep NiKow 6;cLp K;o6Dup;e 68;in,oK;ff,v9;de19gn 4NnKt 6Gz5;gKkE; al6Ale0;aMoKu5W;ot Kut0w 7M;aw3ba4f48oC;c2WdeEk6EveA;e Pll1Nnd Orv5tK; Ktl5J;do1foLin,o7upK;!on;ot,r5Z;aw3ba4do1in,o33up;oCto;al66out0rK;ap65ew 6J;ilAv5;aXeUiSoOuK;b 5Yle0n Kstl5;aLba4do1inKo2Ith4Nu5P;!to;c2Xr8w3;ll Mot LpeAuK;g3Ind17;a2Wf3Po7;ar8in,o7up;ng 68p oKs5;ff,p18;aKelAinEnt0;c6Hd K;o4Dup;c27t0;aZeYiWlToQrOsyc35uK;ll Mn5Kt K;aKba4do1in,oJto47up;pa4Dw3;a3Jdo1in,o21to45up;attleBess KiNop 2;ah2Fon;iLp Kr4Zu1Gwer 6N;do1in,o6Nup;nt0;aLuK;gEmp 6;ce u20y 6D;ck Kg0le 4An 6p5B;oJup;el 5NncilE;c53ir 39n0ss MtLy K;ba4oG; Hc2R;aw3ba4in,oJ;pKw4Y;e4Xt D;aLerd0oK;dAt53;il Hrrow H;aTeQiPoLuK;ddl5ll I;c1FnkeyMp 6uthAve K;aKdo1in,o4Lup;l4Nw3; wi4K;ss0x 2;asur5e3SlLss K;a21up;t 6;ke Ln 6rKs2Ax0;k 6ryA;do,fun,oCsure,up;a02eViQoLuK;ck0st I;aNc4Fg MoKse0;k Kse4D;aft9ba4do1forw37in56o0Zu46;in,oJ;d 6;e NghtMnLsKve 00;ten F;e 2k 2; 2e46;ar8do1in;aMt LvelK; oC;do1go,in,o7up;nEve K;in,oK;pKut;en;c5p 2sh LtchBughAy K;do1o59;in4Po7;eMick Lnock K;do1oCup;oCup;eLy K;in,up;l Ip K;aw3ba4do1f04in,oJto,up;aMoLuK;ic5mpE;ke3St H;c43zz 2;a01eWiToPuK;nLrrKsh 6;y 2;keLt K;ar8do1;r H;lKneErse3K;d Ke 2;ba4dKfast,o0Cup;ear,o1;de Lt K;ba4on,up;aw3o7;aKlp0;d Ml Ir Kt 2;fKof;rom;f11in,o03uW;cPm 2nLsh0ve Kz2P;at,it,to;d Lg KkerP;do1in,o2Tup;do1in,oK;ut,v9;k 2;aZeTive Rloss IoMrLunK; f0S;ab hold,in43ow 2U; Kof 2I;aMb1Mit,oLr8th1IuK;nd9;ff,n,v9;bo7ft9hQw3;aw3bKdo1in,oJrise,up,w3;a4ir2H;ar 6ek0t K;aLb1Fdo1in,oKr8up;ff,n,ut,v9;cLhKl2Fr8t,w3;ead;ross;d aKng 2;bo7;a0Ee07iYlUoQrMuK;ck Ke2N;ar8up;eLighten KownBy 2;aw3oG;eKshe27; 2z5;g 2lMol Krk I;aKwi20;bo7r8;d 6low 2;aLeKip0;sh0;g 6ke0mKrKtten H;e F;gRlPnNrLsKzzle0;h F;e Km 2;aw3ba4up;d0isK;h 2;e Kl 1T;aw3fPin,o7;ht ba4ure0;ePnLsK;s 2;cMd K;fKoG;or;e D;d04l 2;cNll Krm0t1G;aLbKdo1in,o09sho0Eth08victim;a4ehi2O;pa0C;e K;do1oGup;at Kdge0nd 12y5;in,o7up;aOi1HoNrK;aLess 6op KuN;aw3b03in,oC;gBwB; Ile0ubl1B;m 2;a0Ah05l02oOrLut K;aw3ba4do1oCup;ackBeep LoKy0;ss Dwd0;by,do1in,o0Uup;me NoLuntK; o2A;k 6l K;do1oG;aRbQforOin,oNtKu0O;hLoKrue;geth9;rough;ff,ut,v9;th,wK;ard;a4y;paKr8w3;rt;eaLose K;in,oCup;n 6r F;aNeLiK;ll0pE;ck Der Kw F;on,up;t 2;lRncel0rOsMtch LveE; in;o1Nup;h Dt K;doubt,oG;ry LvK;e 08;aw3oJ;l Km H;aLba4do1oJup;ff,n,ut;r8w3;a0Ve0MiteAl0Fo04rQuK;bblNckl05il0Dlk 6ndl05rLsKtMy FzzA;t 00;n 0HsK;t D;e I;ov9;anWeaUiLush K;oGup;ghQng K;aNba4do1forMin,oLuK;nd9p;n,ut;th;bo7lKr8w3;ong;teK;n 2;k K;do1in,o7up;ch0;arTg 6iRn5oPrNssMttlLunce Kx D;aw3ba4;e 6; ar8;e H;do1;k Dt 2;e 2;l 6;do1up;d 2;aPeed0oKurt0;cMw K;aw3ba4do1o7up;ck;k K;in,oC;ck0nk0stA; oQaNef 2lt0nd K;do1ov9up;er;up;r Lt K;do1in,oCup;do1o7;ff,nK;to;ck Pil0nMrgLsK;h D;ainBe D;g DkB; on;in,o7;aw3do1in,oCup;ff,ut;ay;ct FdQir0sk MuctionA; oG;ff;ar8o7;ouK;nd; o7;d K;do1oKup;ff,n;wn;o7up;ut",ProperNoun:"true\xa6aIbDc8dalhousHe7f5gosford,h4iron maiden,kirby,landsdowne,m2nis,r1s0wembF;herwood,paldiB;iel,othwe1;cgi0ercedes,issy;ll;intBudsB;airview,lorence,ra0;mpt9nco;lmo,uro;a1h0;arlt6es5risti;rl0talina;et4i0;ng;arb3e0;et1nt0rke0;ley;on;ie;bid,jax","Person|Place":"true\xa6a8d6h4jordan,k3orlando,s1vi0;ctor9rgin9;a0ydney;lvador,mara,ntia4;ent,obe;amil0ous0;ton;arw2ie0;go;lexandr1ust0;in;ia",LastName:"true\xa60:BR;1:BF;2:B5;3:BH;4:AX;5:9Y;6:B6;7:BK;8:B0;9:AV;A:AL;B:8Q;C:8G;D:7K;E:BM;F:AH;aBDb9Zc8Wd88e81f7Kg6Wh64i60j5Lk4Vl4Dm39n2Wo2Op25quispe,r1Ls0Pt0Ev03wTxSyKzG;aIhGimmerm6A;aGou,u;ng,o;khar5ytsE;aKeun9BiHoGun;koya32shiBU;!lG;diGmaz;rim,z;maGng;da,g52mo83sGzaC;aChiBV;iao,u;aLeJiHoGright,u;jcA5lff,ng;lGmm0nkl0sniewsC;kiB1liams33s3;bGiss,lt0;b,er,st0;a6Vgn0lHtG;anabe,s3;k0sh,tG;e2Non;aLeKiHoGukD;gt,lk5roby5;dHllalGnogr3Kr1Css0val3S;ba,ob1W;al,ov4;lasHsel8W;lJn dIrgBEsHzG;qu7;ilyEqu7siljE;en b6Aijk,yk;enzueAIverde;aPeix1VhKi2j8ka43oJrIsui,uG;om5UrG;c2n0un1;an,emblA7ynisC;dorAMlst3Km4rrAth;atch0i8UoG;mHrG;are84laci79;ps3sG;en,on;hirDkah9Mnaka,te,varA;a06ch01eYhUiRmOoMtIuHvGzabo;en9Jobod3N;ar7bot4lliv2zuC;aIeHoG;i7Bj4AyanAB;ele,in2FpheBvens25;l8rm0;kol5lovy5re7Tsa,to,uG;ng,sa;iGy72;rn5tG;!h;l71mHnGrbu;at9cla9Egh;moBo7M;aIeGimizu;hu,vchG;en8Luk;la,r1G;gu9infe5YmGoh,pulveA7rra5P;jGyG;on5;evi6iltz,miHneid0roed0uGwarz;be3Elz;dHtG;!t,z;!t;ar4Th8ito,ka4OlJnGr4saCto,unde19v4;ch7dHtGz;a5Le,os;b53e16;as,ihDm4Po0Y;aVeSiPoJuHyG;a6oo,u;bio,iz,sG;so,u;bKc8Fdrigue67ge10j9YmJosevelt,sItHux,wG;e,li6;a9Ch;enb4Usi;a54e4L;erts15i93;bei4JcHes,vGzzo;as,e9;ci,hards12;ag2es,iHut0yG;es,nol5N;s,t0;dImHnGsmu97v6C;tan1;ir7os;ic,u;aUeOhMiJoHrGut8;asad,if6Zochazk27;lishc2GpGrti72u10we76;e3Aov51;cHe45nG;as,to;as70hl0;aGillips;k,m,n6I;a3Hde3Wete0Bna,rJtG;ersHrovGters54;!a,ic;!en,on;eGic,kiBss3;i9ra,tz,z;h86k,padopoulIrk0tHvG;ic,l4N;el,te39;os;bMconn2Ag2TlJnei6PrHsbor6XweBzG;dem7Rturk;ella4DtGwe6N;ega,iz;iGof7Hs8I;vGyn1R;ei9;aSri1;aPeNiJoGune50ym2;rHvGwak;ak4Qik5otn66;odahl,r4S;cholsZeHkolGls4Jx3;ic,ov84;ls1miG;!n1;ils3mG;co4Xec;gy,kaGray2sh,var38;jiGmu9shiG;ma;a07c04eZiWoMuHyeG;rs;lJnIrGssoli6S;atGp03r7C;i,ov4;oz,te58;d0l0;h2lOnNo0RrHsGza1A;er,s;aKeJiIoz5risHtG;e56on;!on;!n7K;au,i9no,t5J;!lA;r1Btgome59;i3El0;cracFhhail5kkeHlG;l0os64;ls1;hmeJiIj30lHn3Krci0ssiGyer2N;!er;n0Po;er,j0;dDti;cartHlG;aughl8e2;hy;dQe7Egnu68i0jer3TkPmNnMrItHyG;er,r;ei,ic,su21thews;iHkDquAroqu8tinG;ez,s;a5Xc,nG;!o;ci5Vn;a5UmG;ad5;ar5e6Kin1;rig77s1;aVeOiLoJuHyG;!nch;k4nGo;d,gu;mbarGpe3Fvr4we;di;!nGu,yana2B;coln,dG;b21holm,strom;bedEfeKhIitn0kaHn8rGw35;oy;!j;m11tG;in1on1;bvGvG;re;iGmmy,ng,rs2Qu,voie,ws3;ne,t1F;aZeYh2iWlUnez50oNrJuHvar2woG;k,n;cerGmar68znets5;a,o34;aHem0isGyeziu;h23t3O;m0sni4Fus3KvG;ch4O;bay57ch,rh0Usk16vaIwalGzl5;czGsC;yk;cIlG;!cGen4K;huk;!ev4ic,s;e8uiveG;rt;eff0kGl4mu9nnun1;ucF;ll0nnedy;hn,llKminsCne,pIrHstra3Qto,ur,yGzl5;a,s0;j0Rls22;l2oG;or;oe;aPenOha6im14oHuG;ng,r4;e32hInHrge32u6vG;anD;es,ss3;anHnsG;en,on,t3;nesGs1R;en,s1;kiBnings,s1;cJkob4EnGrv0E;kDsG;en,sG;en0Ion;ks3obs2A;brahimDglesi5Nke5Fl0Qno07oneIshikHto,vanoG;u,v54;awa;scu;aVeOiNjaltal8oIrist50uG;!aGb0ghAynh;m2ng;a6dz4fIjgaa3Hk,lHpUrGwe,x3X;ak1Gvat;mAt;er,fm3WmG;ann;ggiBtchcock;iJmingw4BnHrGss;nand7re9;deGriks1;rs3;kkiHnG;on1;la,n1;dz4g1lvoQmOns0ZqNrMsJuIwHyG;asFes;kiB;g1ng;anHhiG;mo14;i,ov0J;di6p0r10t;ue;alaG;in1;rs1;aVeorgUheorghe,iSjonRoLrJuGw3;errGnnar3Co,staf3Ctierr7zm2;a,eG;ro;ayli6ee2Lg4iffithGub0;!s;lIme0UnHodGrbachE;e,m2;calvAzale0S;dGubE;bGs0E;erg;aj,i;bs3l,mGordaO;en7;iev3U;gnMlJmaIndFo,rGsFuthi0;cGdn0za;ia;ge;eaHlG;agh0i,o;no;e,on;aVerQiLjeldsted,lKoIrHuG;chs,entAji41ll0;eem2iedm2;ntaGrt8urni0wl0;na;emi6orA;lipIsHtzgeraG;ld;ch0h0;ovG;!ic;hatDnanIrG;arGei9;a,i;deY;ov4;b0rre1D;dKinsJriksIsGvaB;cob3GpGtra3D;inoza,osiQ;en,s3;te8;er,is3warG;ds;aXePiNjurhuMoKrisco15uHvorakG;!oT;arte,boHmitru,nn,rGt3C;and,ic;is;g2he0Omingu7nErd1ItG;to;us;aGcki2Hmitr2Ossanayake,x3;s,z; JbnaIlHmirGrvisFvi,w2;!ov4;gado,ic;th;bo0groot,jo6lHsilGvriA;va;a cruz,e3uG;ca;hl,mcevsCnIt2WviG;dGes,s;ov,s3;ielsGku22;!en;ki;a0Be06hRiobQlarkPoIrGunningh1H;awfo0RivGuz;elli;h1lKntJoIrGs2Nx;byn,reG;a,ia;ke,p0;i,rer2K;em2liB;ns;!e;anu;aOeMiu,oIristGu6we;eGiaG;ns1;i,ng,p9uHwGy;!dH;dGng;huJ;!n,onGu6;!g;kJnIpm2ttHudhGv7;ry;erjee,o14;!d,g;ma,raboG;rty;bJl0Cng4rG;eghetHnG;a,y;ti;an,ota1C;cerAlder3mpbeLrIstGvadi0B;iGro;llo;doHl0Er,t0uGvalho;so;so,zo;ll;a0Fe01hYiXlUoNrKuIyG;rLtyG;qi;chan2rG;ke,ns;ank5iem,oGyant;oks,wG;ne;gdan5nIruya,su,uchaHyKziG;c,n5;rd;darGik;enG;ko;ov;aGond15;nco,zG;ev4;ancFshw16;a08oGuiy2;umGwmG;ik;ckRethov1gu,ktPnNrG;gJisInG;ascoGds1;ni;ha;er,mG;anG;!n;gtGit7nP;ss3;asF;hi;er,hG;am;b4ch,ez,hRiley,kk0ldw8nMrIshHtAu0;es;ir;bInHtlGua;ett;es,i0;ieYosa;dGik;a9yoG;padhyG;ay;ra;k,ng;ic;bb0Acos09d07g04kht05lZnPrLsl2tJyG;aHd8;in;la;chis3kiG;ns3;aImstro6sl2;an;ng;ujo,ya;dJgelHsaG;ri;ovG;!a;ersJov,reG;aGjEws;ss1;en;en,on,s3;on;eksejEiyEmeiIvG;ar7es;ez;da;ev;arwHuilG;ar;al;ams,l0;er;ta;as",Ordinal:"true\xa6eBf7nin5s3t0zeroE;enDhir1we0;lfCn7;d,t3;e0ixt8;cond,vent7;et0th;e6ie7;i2o0;r0urt3;tie4;ft1rst;ight0lev1;e0h,ie1;en0;th",Cardinal:"true\xa6bEeBf5mEnine7one,s4t0zero;en,h2rDw0;e0o;lve,n5;irt6ousands,ree;even2ix2;i3o0;r1ur0;!t2;ty;ft0ve;e2y;ight0lev1;!e0y;en;illions",Multiple:"true\xa6b3hundred,m3qu2se1t0;housand,r2;pt1xt1;adr0int0;illion",City:"true\xa60:74;1:61;2:6G;3:6J;4:5S;a68b53c4Id48e44f3Wg3Hh39i31j2Wk2Fl23m1Mn1Co19p0Wq0Ur0Os05tRuQvLwDxiBy9z5;a7h5i4Muri4O;a5e5ongsh0;ng3H;greb,nzib5G;ang2e5okoha3Sunfu;katerin3Hrev0;a5n0Q;m5Hn;arsBeAi6roclBu5;h0xi,zh5P;c7n5;d5nipeg,terth4;hoek,s1L;hi5Zkl3A;l63xford;aw;a8e6i5ladivost5Molgogr6L;en3lni6S;ni22r5;o3saill4N;lenc4Wncouv3Sr3ughn;lan bat1Crumqi,trecht;aFbilisi,eEheDiBo9r7u5;l21n63r5;in,ku;i5ondh62;es51poli;kyo,m2Zron1Pulo5;n,uS;an5jua3l2Tmisoa6Bra3;j4Tshui; hag62ssaloni2H;gucigal26hr0l av1U;briz,i6llinn,mpe56ng5rtu,shk2R;i3Esh0;an,chu1n0p2Eyu0;aEeDh8kopje,owe1Gt7u5;ra5zh4X;ba0Ht;aten is55ockholm,rasbou67uttga2V;an8e6i5;jiazhua1llo1m5Xy0;f50n5;ya1zh4H;gh3Kt4Q;att45o1Vv44;cramen16int ClBn5o paulo,ppo3Rrajevo; 7aa,t5;a 5o domin3E;a3fe,m1M;antonio,die3Cfrancisco,j5ped3Nsalvad0J;o5u0;se;em,t lake ci5Fz25;lou58peters24;a9e8i6o5;me,t59;ga,o5yadh;! de janei3F;cife,ims,nn3Jykjavik;b4Sip4lei2Inc2Pwalpindi;ingdao,u5;ez2i0Q;aFeEhDiCo9r7u6yong5;ya1;eb59ya1;a5etor3M;g52to;rt5zn0; 5la4Co;au prin0Melizabe24sa03;ls3Prae5Atts26;iladelph3Gnom pe1Aoenix;ki1tah tik3E;dua,lerYnaji,r4Ot5;na,r32;ak44des0Km1Mr6s5ttawa;a3Vlo;an,d06;a7ew5ing2Fovosibir1Jyc; 5cast36;del24orlea44taip14;g8iro4Wn5pl2Wshv33v0;ch6ji1t5;es,o1;a1o1;a6o5p4;ya;no,sa0W;aEeCi9o6u5;mb2Ani26sc3Y;gadishu,nt6s5;c13ul;evideo,pelli1Rre2Z;ami,l6n14s5;kolc,sissauga;an,waukee;cca,d5lbour2Mmph41ndo1Cssi3;an,ell2Xi3;cau,drAkass2Sl9n8r5shh4A;aca6ib5rakesh,se2L;or;i1Sy;a4EchFdal0Zi47;mo;id;aDeAi8o6u5vSy2;anMckn0Odhia3;n5s angel26;d2g bea1N;brev2Be3Lma5nz,sb2verpo28;!ss27; ma39i5;c5pzig;est16; p6g5ho2Wn0Cusan24;os;az,la33;aHharFiClaipeBo9rak0Du7y5;iv,o5;to;ala lump4n5;mi1sh0;hi0Hlka2Xpavog4si5wlo2;ce;da;ev,n5rkuk;gst2sha5;sa;k5toum;iv;bHdu3llakuric0Qmpa3Fn6ohsiu1ra5un1Iwaguc0Q;c0Pj;d5o,p4;ah1Ty;a7e6i5ohannesV;l1Vn0;dd36rusalem;ip4k5;ar2H;bad0mph1OnArkutUs7taXz5;mir,tapala5;pa;fah0l6tanb5;ul;am2Zi2H;che2d5;ianap2Mo20;aAe7o5yder2W; chi mi5ms,nolulu;nh;f6lsin5rakli2;ki;ei;ifa,lifax,mCn5rb1Dva3;g8nov01oi;aFdanEenDhCiPlasgBo9raz,u5;a5jr23;dal6ng5yaquil;zh1J;aja2Oupe;ld coa1Bthen5;bu2S;ow;ent;e0Uoa;sk;lw7n5za;dhi5gt1E;nag0U;ay;aisal29es,o8r6ukuya5;ma;ankfu5esno;rt;rt5sh0; wor6ale5;za;th;d5indhov0Pl paso;in5mont2;bur5;gh;aBe8ha0Xisp4o7resd0Lu5;b5esseldorf,nkirk,rb0shanbe;ai,l0I;ha,nggu0rtmu13;hradSl6nv5troit;er;hi;donghIe6k09l5masc1Zr es sala1KugavpiY;i0lU;gu,je2;aJebu,hAleve0Vo5raio02uriti1Q;lo7n6penhag0Ar5;do1Ok;akKst0V;gUm5;bo;aBen8i6ongqi1ristchur5;ch;ang m7ca5ttago1;go;g6n5;ai;du,zho1;ng5ttogr14;ch8sha,zh07;gliari,i9lga8mayenJn6pe town,r5tanO;acCdiff;ber1Ac5;un;ry;ro;aWeNhKirmingh0WoJr9u5;chareTdapeTenos air7r5s0tu0;g5sa;as;es;a9is6usse5;ls;ba6t5;ol;ne;sil8tisla7zzav5;il5;le;va;ia;goZst2;op6ubaneshw5;ar;al;iCl9ng8r5;g6l5n;in;en;aluru,hazi;fa6grade,o horizon5;te;st;ji1rut;ghd0BkFn9ot8r7s6yan n4;ur;el,r07;celo3i,ranquil09;ou;du1g6ja lu5;ka;alo6k5;ok;re;ng;ers5u;field;a05b02cc01ddis aba00gartaZhmedXizawl,lSmPnHqa00rEsBt7uck5;la5;nd;he7l5;an5;ta;ns;h5unci2;dod,gab5;at;li5;ngt2;on;a8c5kaOtwerp;hora6o3;na;ge;h7p5;ol5;is;eim;aravati,m0s5;terd5;am; 7buquerq6eppo,giers,ma5;ty;ue;basrah al qadim5mawsil al jadid5;ah;ab5;ad;la;ba;ra;idj0u dha5;bi;an;lbo6rh5;us;rg",Region:"true\xa60:2O;1:2L;2:2U;3:2F;a2Sb2Fc21d1Wes1Vf1Tg1Oh1Ki1Fj1Bk16l13m0Sn09o07pYqVrSsJtEuBverAw6y4zacatec2W;akut0o0Fu4;cat1k09;a5est 4isconsin,yomi1O;bengal,virgin0;rwick3shington4;! dc;acruz,mont;dmurt0t4;ah,tar4; 2Pa12;a6e5laxca1Vripu21u4;scaEva;langa2nnessee,x2J;bas10m4smQtar29;aulip2Hil nadu;a9elang07i7o5taf16u4ylh1J;ff02rr09s1E;me1Gno1Uuth 4;cZdY;ber0c4kkim,naloa;hu1ily;n5rawak,skatchew1xo4;ny; luis potosi,ta catari2;a4hodeA;j4ngp0C;asth1shahi;ingh29u4;e4intana roo;bec,en6retaro;aAe6rince edward4unjab; i4;sl0G;i,n5r4;ak,nambu0F;a0Rnsylv4;an0;ha0Pra4;!na;axa0Zdisha,h4klaho21ntar4reg7ss0Dx0I;io;aLeEo6u4;evo le4nav0X;on;r4tt18va scot0;f9mandy,th4; 4ampton3;c6d5yo4;rk3;ako1O;aroli2;olk;bras1Nva0Dw4; 6foundland4;! and labrad4;or;brunswick,hamp3jers5mexiTyork4;! state;ey;galPyarit;aAeghala0Mi6o4;nta2r4;dov0elos;ch6dlanDn5ss4zor11;issippi,ouri;as geraPneso18;ig1oac1;dhy12harasht0Gine,lac07ni5r4ssachusetts;anhao,i el,ylG;p4toba;ur;anca3e4incoln3ouisI;e4iR;ds;a6e5h4omi;aka06ul2;dah,lant1ntucky,ra01;bardino,lmyk0ns0Qr4;achay,el0nata0X;alis6har4iangxi;kh4;and;co;daho,llino7n4owa;d5gush4;et0;ia2;is;a6ert5i4un1;dalFm0D;ford3;mp3rya2waii;ansu,eorg0lou7oa,u4;an4izhou,jarat;ajuato,gdo4;ng;cester3;lori4uji1;da;sex;ageUe7o5uran4;go;rs4;et;lawaMrby3;aFeaEh9o4rim08umbr0;ahui7l6nnectic5rsi4ventry;ca;ut;i03orado;la;e5hattisgarh,i4uvash0;apRhuahua;chn5rke4;ss0;ya;ra;lGm4;bridge3peche;a9ihar,r8u4;ck4ryat0;ingham3;shi4;re;emen,itish columb0;h0ja cal8lk7s4v7;hkorto4que;st1;an;ar0;iforn0;ia;dygHguascalientes,lBndhr9r5ss4;am;izo2kans5un4;achal 7;as;na;a 4;pradesh;a6ber5t4;ai;ta;ba5s4;ka;ma;ea",Place:"true\xa60:4T;1:4V;2:44;3:4B;4:3I;a4Eb3Gc2Td2Ge26f25g1Vh1Ji1Fk1Cl14m0Vn0No0Jp08r04sTtNuLvJw7y5;a5o0Syz;kut1Bngtze;aDeChitBi9o5upatki,ycom2P;ki26o5;d5l1B;b3Ps5;i4to3Y;c0SllowbroCn5;c2Qgh2;by,chur1P;ed0ntw3Gs22;ke6r3St5;erf1f1; is0Gf3V;auxha3Mirgin is0Jost5;ok;laanbaatar,pto5xb3E;n,wn;a9eotihuac43h7ive49o6ru2Nsarskoe selo,u5;l2Dzigo47;nto,rquay,tt2J;am3e 5orn3E;bronx,hamptons;hiti,j mah0Iu1N;aEcotts bluff,eCfo,herbroQoApring9t7u5yd2F;dbu1Wn5;der03set3B;aff1ock2Nr5;atf1oud;hi37w24;ho,uth5; 1Iam1Zwo3E;a5i2O;f2Tt0;int lawrence riv3Pkhal2D;ayleigh,ed7i5oc1Z;chmo1Eo gran4ver5;be1Dfr09si4; s39cliffe,hi2Y;aCe9h8i5ompeii,utn2;c6ne5tcai2T; 2Pc0G;keri13t0;l,x;k,lh2mbr6n5r2J;n1Hzance;oke;cif38pahanaumokuak30r5;k5then0;si4w1K;ak7r6x5;f1l2X;ange county,d,f1inoco;mTw1G;e8i1Uo5;r5tt2N;th5wi0E; 0Sam19;uschwanste1Pw5; eng6a5h2market,po36;rk;la0P;a8co,e6i5uc;dt1Yll0Z;adow5ko0H;lands;chu picchu,gad2Ridsto1Ql8n7ple6r5;kh2; g1Cw11;hatt2Osf2B;ibu,t0ve1Z;a8e7gw,hr,in5owlOynd02;coln memori5dl2C;al;asi4w3;kefr7mbe1On5s,x;ca2Ig5si05;f1l27t0;ont;azan kreml14e6itchen2Gosrae,rasnoyar5ul;sk;ns0Hs1U;ax,cn,lf1n6ps5st;wiN;d5glew0Lverness;ian27ochina;aDeBi6kg,nd,ov5unti2H;d,enweep;gh6llc5;reL;bu03l5;and5;!s;r5yw0C;ef1tf1;libu24mp6r5stings;f1lem,row;stead,t0;aDodavari,r5uelph;avenAe5imsS;at 8en5; 6f1Fwi5;ch;acr3vall1H;brita0Flak3;hur5;st;ng3y villa0W;airhavHco,ra;aAgli9nf17ppi8u7ver6x5;et1Lf1;glad3t0;rope,st0;ng;nt0;rls1Ls5;t 5;e5si4;nd;aCe9fw,ig8o7ryd6u5xb;mfri3nstab00rh2tt0;en;nca18rcKv19wnt0B;by;n6r5vonpo1D;ry;!h2;nu8r5;l6t5;f1moor;ingt0;be;aLdg,eIgk,hClBo5royd0;l6m5rnwa0B;pt0;c7lingw6osse5;um;ood;he0S;earwat0St;a8el6i5uuk;chen itza,mney ro07natSricahua;m0Zt5;enh2;mor5rlottetPth2;ro;dar 5ntervilA;breaks,faZg5;rove;ld9m8r5versh2;lis6rizo pla5;in;le;bLpbellf1;weQ;aZcn,eNingl01kk,lackLolt0r5uckV;aGiAo5;ckt0ok5wns cany0;lyn,s5;i4to5;ne;de;dge6gh5;am,t0;n6t5;own;or5;th;ceb6m5;lNpt0;rid5;ge;bu5pool,wa8;rn;aconsfEdf1lBr9verly7x5;hi5;ll; hi5;lls;wi5;ck; air,l5;ingh2;am;ie5;ld;ltimore,rnsl6tters5;ea;ey;bLct0driadic,frica,ginJlGmFn9rc8s7tl6yleOzor3;es;!ant8;hcroft,ia; de triomphe,t6;adyr,ca8dov9tarct5;ic5; oce5;an;st5;er;ericas,s;be6dersh5hambra,list0;ot;rt0;cou5;rt;bot7i5;ngd0;on;sf1;ord",Country:"true\xa60:38;1:2L;2:3B;a2Xb2Ec22d1Ye1Sf1Mg1Ch1Ai14j12k0Zl0Um0Gn05om2pZqat1KrXsKtCu7v5wal4yemTz3;a25imbabwe;es,lis and futu2Y;a3enezue32ietnam;nuatu,tican city;gTk6nited 4ruXs3zbeE; 2Ca,sr;arab emirat0Kkingdom,states3;! of am2Y;!raiV;a8haCimor les0Co7rinidad 5u3;nis0rk3valu;ey,me2Zs and caic1V;and t3t3;oba1L;go,kel10nga;iw2ji3nz2T;ki2V;aDcotl1eCi9lov8o6pa2Dri lanka,u5w3yr0;az3edAitzerl1;il1;d2riname;lomon1Xmal0uth 3;afr2KkMsud2;ak0en0;erra leoFn3;gapo1Yt maart3;en;negLrb0ychellZ;int 3moa,n marino,udi arab0;hele26luc0mart21;epublic of ir0Eom2Euss0w3;an27;a4eIhilippinUitcairn1Mo3uerto riN;l1rtugF;ki2Dl4nama,pua new0Vra3;gu7;au,esti3;ne;aBe9i7or3;folk1Ith4w3;ay; k3ern mariana1D;or0O;caragua,ger3ue;!ia;p3ther1Aw zeal1;al;mib0u3;ru;a7exi6icro0Bo3yanm06;ldova,n3roc5zambA;a4gol0t3;enegro,serrat;co;cAdagasc01l7r5urit4yot3;te;an0i16;shall0Xtin3;ique;a4div3i,ta;es;wi,ys0;ao,ed02;a6e5i3uxembourg;b3echtenste12thu1G;er0ya;ban0Isotho;os,tv0;azakh1Fe4iriba04o3uwait,yrgyz1F;rXsovo;eling0Knya;a3erG;ma16p2;c7nd6r4s3taly,vory coast;le of m2rael;a3el1;n,q;ia,oJ;el1;aiTon3ungary;dur0Ng kong;aBermany,ha0QibraltAre8u3;a6ern5inea3ya0P;! biss3;au;sey;deloupe,m,tema0Q;e3na0N;ce,nl1;ar;bUmb0;a7i6r3;ance,ench 3;guia0Epoly3;nes0;ji,nl1;lklandUroeU;ast tim7cu6gypt,l salv6ngl1quatorial4ritr5st3thiop0;on0; guin3;ea;ad3;or;enmark,jibou5ominica4r con3;go;!n C;ti;aBentral african Ah8o5roat0u4yprRzech3; 9ia;ba,racao;c4lo3morQngo brazzaville,okGsta r04te de ivoiL;mb0;osE;i3ristmasG;le,na;republic;m3naUpe verde,ymanA;bod0ero3;on;aGeDhut2o9r5u3;lgar0r3;kina faso,ma,undi;azil,itish 3unei;virgin3; is3;lands;liv0nai5snia and herzegoviHtswaHuvet3; isl1;and;re;l3n8rmuG;ar3gium,ize;us;h4ngladesh,rbad3;os;am4ra3;in;as;fghaGlDmBn6r4ustr3zerbaij2;al0ia;genti3men0uba;na;dorra,g5t3;arct7igua and barbu3;da;o3uil3;la;er3;ica;b3ger0;an0;ia;ni3;st2;an",FirstName:"true\xa6aTblair,cQdOfrancoZgabMhinaLilya,jHkClBm6ni4quinn,re3s0;h0umit,yd;ay,e0iloh;a,lby;g9ne;co,ko0;!s;a1el0ina,org6;!okuhF;ds,naia,r1tt0xiB;i,y;ion,lo;ashawn,eif,uca;a3e1ir0rM;an;lsFn0rry;dall,yat5;i,sD;a0essIie,ude;i1m0;ie,mG;me;ta;rie0y;le;arcy,ev0;an,on;as1h0;arl8eyenne;ey,sidy;drien,kira,l4nd1ubr0vi;ey;i,r0;a,e0;a,y;ex2f1o0;is;ie;ei,is",WeekDay:"true\xa6fri2mon2s1t0wednesd3;hurs1ues1;aturd1und1;!d0;ay0;!s",Month:"true\xa6dec0february,july,nov0octo1sept0;em0;ber",Date:"true\xa6ago,on4som4t1week0yesterd5; end,ends;mr1o0;d2morrow;!w;ed0;ay",Duration:"true\xa6centurAd8h7m5q4se3w1y0;ear8r8;eek0k7;!end,s;ason,c5;tr,uarter;i0onth3;llisecond2nute2;our1r1;ay0ecade0;!s;ies,y",FemaleName:"true\xa60:J7;1:JB;2:IJ;3:IK;4:J1;5:IO;6:JS;7:JO;8:HB;9:JK;A:H4;B:I2;C:IT;D:JH;E:IX;F:BA;G:I4;aGTbFLcDRdD0eBMfB4gADh9Ti9Gj8Dk7Cl5Wm48n3Lo3Hp33qu32r29s15t0Eu0Cv02wVxiTyOzH;aLeIineb,oHsof3;e3Sf3la,ra;h2iKlIna,ynH;ab,ep;da,ma;da,h2iHra;nab;aKeJi0FolB7uIvH;et8onDP;i0na;le0sen3;el,gm3Hn,rGLs8W;aoHme0nyi;m5XyAD;aMendDZhiDGiH;dele9lJnH;if48niHo0;e,f47;a,helmi0lHma;a,ow;ka0nB;aNeKiHusa5;ck84kIl8oleAviH;anFenJ4;ky,toriBK;da,lA8rHs0;a,nHoniH9;a,iFR;leHnesH9;nILrH;i1y;g9rHs6xHA;su5te;aYeUhRiNoLrIuHy2;i,la;acJ3iHu0J;c3na,sH;hFta;nHr0F;iFya;aJffaEOnHs6;a,gtiH;ng;!nFSra;aIeHomasi0;a,l9Oo8Ares1;l3ndolwethu;g9Fo88rIssH;!a,ie;eHi,ri7;sa,za;bOlMmKnIrHs6tia0wa0;a60yn;iHya;a,ka,s6;arFe2iHm77ra;!ka;a,iH;a,t6;at6it6;a0Ecarlett,e0AhWiSkye,neza0oQri,tNuIyH;bIGlvi1;ha,mayIJniAsIzH;an3Net8ie,y;anHi7;!a,e,nH;aCe;aIeH;fan4l5Dphan6E;cI5r5;b3fiAAm0LnHphi1;d2ia,ja,ya;er2lJmon1nIobh8QtH;a,i;dy;lETv3;aMeIirHo0risFDy5;a,lDM;ba,e0i5lJrH;iHr6Jyl;!d8Ifa;ia,lDZ;hd,iMki2nJrIu0w0yH;la,ma,na;i,le9on,ron,yn;aIda,ia,nHon;a,on;!ya;k6mH;!aa;lJrItaye82vH;da,inj;e0ife;en1i0ma;anA9bLd5Oh1SiBkKlJmInd2rHs6vannaC;aCi0;ant6i2;lDOma,ome;ee0in8Tu2;in1ri0;a05eZhXiUoHuthDM;bScRghQl8LnPsJwIxH;anB3ie,y;an,e0;aIeHie,lD;ann7ll1marDGtA;!lHnn1;iHyn;e,nH;a,dF;da,i,na;ayy8G;hel67io;bDRerAyn;a,cIkHmas,nFta,ya;ki,o;h8Xki;ea,iannGMoH;da,n1P;an0bJemFgi0iInHta,y0;a8Bee;han86na;a,eH;cHkaC;a,ca;bi0chIe,i0mo0nHquETy0;di,ia;aERelHiB;!e,le;een4ia0;aPeOhMiLoJrHute6A;iHudenCV;scil3LyamvaB;lHrt3;i0ly;a,paluk;ilome0oebe,ylH;is,lis;ggy,nelope,r5t2;ige,m0VnKo5rvaDMtIulH;a,et8in1;ricHt4T;a,e,ia;do2i07;ctav3dIfD3is6ksa0lHphD3umC5yunbileg;a,ga,iv3;eHvAF;l3t8;aWeUiMoIurHy5;!ay,ul;a,eJor,rIuH;f,r;aCeEma;ll1mi;aNcLhariBQkKlaJna,sHta,vi;anHha;ur;!y;a,iDZki;hoGk9YolH;a,e4P;!mh;hir,lHna,risDEsreE;!a,lBV;asuMdLh3i6Dl5nKomi7rgEVtH;aHhal4;lHs6;i1ya;cy,et8;e9iF0ya;nngu2X;a0Ackenz4e02iMoJrignayani,uriDJyH;a,rH;a,iOlNna,tG;bi0i2llBJnH;a,iH;ca,ka,qD9;a,cUdo4ZkaTlOmi,nMrItzi,yH;ar;aJiIlH;anET;am;!l,nB;dy,eHh,n4;nhGrva;aKdJe0iCUlH;iHy;cent,e;red;!gros;!e5;ae5hH;ae5el3Z;ag5DgNi,lKrH;edi7AiIjem,on,yH;em,l;em,sCG;an4iHliCF;nHsCJ;a,da;!an,han;b09cASd07e,g05ha,i04ja,l02n00rLsoum5YtKuIv84xBKyHz4;bell,ra,soBB;d7rH;a,eE;h8Gild1t4;a,cUgQiKjor4l7Un4s6tJwa,yH;!aHbe6Xja9lAE;m,nBL;a,ha,in1;!aJbCGeIja,lDna,sHt63;!a,ol,sa;!l1D;!h,mInH;!a,e,n1;!awit,i;arJeIie,oHr48ueri8;!t;!ry;et46i3B;el4Xi7Cy;dHon,ue5;akranAy;ak,en,iHlo3S;a,ka,nB;a,re,s4te;daHg4;!l3E;alDd4elHge,isDJon0;ei9in1yn;el,le;a0Ne0CiXoQuLyH;d3la,nH;!a,dIe2OnHsCT;!a,e2N;a,sCR;aD4cJel0Pis1lIna,pHz;e,iA;a,u,wa;iHy;a0Se,ja,l2NnB;is,l1UrItt1LuHvel4;el5is1;aKeIi7na,rH;aADi7;lHn1tA;ei;!in1;aTbb9HdSepa,lNnKsJvIzH;!a,be5Ret8z4;!ia;a,et8;!a,dH;a,sHy;ay,ey,i,y;a,iJja,lH;iHy;aA8e;!aH;!nF;ia,ya;!nH;!a,ne;aPda,e0iNjYla,nMoKsJtHx93y5;iHt4;c3t3;e2PlCO;la,nHra;a,ie,o2;a,or1;a,gh,laH;!ni;!h,nH;a,d2e,n5V;cOdon9DiNkes6mi9Gna,rMtJurIvHxmi,y5;ern1in3;a,e5Aie,yn;as6iIoH;nya,ya;fa,s6;a,isA9;a,la;ey,ie,y;a04eZhXiOlASoNrJyH;lHra;a,ee,ie;istHy6I;a,en,iIyH;!na;!e,n5F;nul,ri,urtnB8;aOerNlB7mJrHzzy;a,stH;en,in;!berlImernH;aq;eHi,y;e,y;a,stE;!na,ra;aHei2ongordzol;dij1w5;el7UiKjsi,lJnIrH;a,i,ri;d2na,za;ey,i,lBLs4y;ra,s6;biAcARdiat7MeBAiSlQmPnyakuma1DrNss6NtKviAyH;!e,lH;a,eH;e,i8T;!a6HeIhHi4TlDri0y;ar8Her8Hie,leErBAy;!lyn8Ori0;a,en,iHl5Xoli0yn;!ma,nFs95;a5il1;ei8Mi,lH;e,ie;a,tl6O;a0AeZiWoOuH;anMdLlHst88;es,iH;a8NeHs8X;!n9tH;!a,te;e5Mi3My;a,iA;!anNcelDdMelGhan7VleLni,sIva0yH;a,ce;eHie;fHlDph7Y;a,in1;en,n1;i7y;!a,e,n45;lHng;!i1DlH;!i1C;anNle0nKrJsH;i8JsH;!e,i8I;i,ri;!a,elGif2CnH;a,et8iHy;!e,f2A;a,eJiInH;a,eIiH;e,n1;!t8;cMda,mi,nIque4YsminFvie2y9zH;min7;a7eIiH;ce,e,n1s;!lHs82t0F;e,le;inIk6HlDquelH;in1yn;da,ta;da,lRmPnOo0rNsIvaHwo0zaro;!a0lu,na;aJiIlaHob89;!n9R;do2;belHdo2;!a,e,l3B;a7Ben1i0ma;di2es,gr72ji;a9elBogH;en1;a,e9iHo0se;a0na;aSeOiJoHus7Kyacin2C;da,ll4rten24snH;a,i9U;lImaH;ri;aIdHlaI;a,egard;ry;ath1BiJlInrietArmi9sH;sa,t1A;en2Uga,mi;di;bi2Fil8MlNnMrJsItHwa,yl8M;i5Tt4;n60ti;iHmo51ri53;etH;!te;aCnaC;a,ey,l4;a02eWiRlPoNrKunJwH;enHyne1R;!dolD;ay,el;acieIetHiselB;a,chE;!la;ld1CogooH;sh;adys,enHor3yn2K;a,da,na;aKgi,lIna,ov8EselHta;a,e,le;da,liH;an;!n0;mLnJorgIrH;ald5Si,m3Etrud7;et8i4X;a,eHna;s29vieve;ma;bIle,mHrnet,yG;al5Si5;iIrielH;a,l1;!ja;aTeQiPlorOoz3rH;anJeIiH;da,eB;da,ja;!cH;esIiHoi0P;n1s66;!ca;a,enc3;en,o0;lIn0rnH;anB;ec3ic3;jr,nArKtHy7;emIiHma,oumaA;ha,ma,n;eh;ah,iBrah,za0;cr4Rd0Re0Qi0Pk0Ol07mXn54rUsOtNuMvHwa;aKelIiH;!e,ta;inFyn;!a;!ngel4V;geni1ni47;h5Yien9ta;mLperanKtH;eIhHrel5;er;l31r7;za;a,eralB;iHma,ne4Lyn;cHka,n;a,ka;aPeNiKmH;aHe21ie,y;!li9nuH;elG;lHn1;e7iHy;a,e,ja;lHrald;da,y;!nue5;aWeUiNlMma,no2oKsJvH;a,iH;na,ra;a,ie;iHuiH;se;a,en,ie,y;a0c3da,e,f,nMsJzaH;!betHveA;e,h;aHe,ka;!beH;th;!a,or;anor,nH;!a,i;!in1na;ate1Rta;leEs6;vi;eIiHna,wi0;e,th;l,n;aYeMh3iLjeneKoH;lor5Vminiq4Ln3FrHtt4;a,eEis,la,othHthy;ea,y;ba;an09naCon9ya;anQbPde,eOiMlJmetr3nHsir5M;a,iH;ce,se;a,iIla,orHphi9;es,is;a,l6F;dHrdH;re;!d5Ena;!b2ForaCraC;a,d2nH;!a,e;hl3i0l0GmNnLphn1rIvi1WyH;le,na;a,by,cIia,lH;a,en1;ey,ie;a,et8iH;!ca,el1Aka,z;arHia;is;a0Re0Nh04i02lUoJristIynH;di,th3;al,i0;lPnMrIurH;tn1D;aJd2OiHn2Ori9;!nH;a,e,n1;!l4;cepci5Cn4sH;tanHuelo;ce,za;eHleE;en,t8;aJeoIotH;il54;!pat2;ir7rJudH;et8iH;a,ne;a,e,iH;ce,sZ;a2er2ndH;i,y;aReNloe,rH;isJyH;stH;al;sy,tH;a1Sen,iHy;an1e,n1;deJlseIrH;!i7yl;a,y;li9;nMrH;isKlImH;ai9;a,eHot8;n1t8;!sa;d2elGtH;al,elG;cIlH;es8i47;el3ilH;e,ia,y;itlYlXmilWndVrMsKtHy5;aIeIhHri0;er1IleErDy;ri0;a38sH;a37ie;a,iOlLmeJolIrH;ie,ol;!e,in1yn;lHn;!a,la;a,eIie,otHy;a,ta;ne,y;na,s1X;a0Ii0I;a,e,l1;isAl4;in,yn;a0Ke02iZlXoUrH;andi7eRiJoIyH;an0nn;nwDoke;an3HdgMgiLtH;n31tH;!aInH;ey,i,y;ny;d,t8;etH;!t7;an0e,nH;da,na;bbi7glarIlo07nH;iAn4;ka;ancHythe;a,he;an1Clja0nHsm3M;iAtH;ou;aWcVlinUniArPssOtJulaCvH;!erlH;ey,y;hJsy,tH;e,iHy7;e,na;!anH;ie,y;!ie;nItHyl;ha,ie;adIiH;ce;et8i9;ay,da;ca,ky;!triH;ce,z;rbJyaH;rmH;aa;a2o2ra;a2Ub2Od25g21i1Sj5l18m0Zn0Boi,r06sWtVuPvOwa,yIzH;ra,u0;aKes6gJlIn,seH;!l;in;un;!nH;a,na;a,i2K;drLguJrIsteH;ja;el3;stH;in1;a,ey,i,y;aahua,he0;hIi2Gja,miAs2DtrH;id;aMlIraqHt21;at;eIi7yH;!n;e,iHy;gh;!nH;ti;iJleIo6piA;ta;en,n1t8;aHelG;!n1J;a01dje5eZgViTjRnKohito,toHya;inet8nH;el5ia;te;!aKeIiHmJ;e,ka;!mHtt7;ar4;!belIliHmU;sa;!l1;a,eliH;ca;ka,sHta;a,sa;elHie;a,iH;a,ca,n1qH;ue;!tH;a,te;!bImHstasiMya;ar3;el;aLberKeliJiHy;e,l3naH;!ta;a,ja;!ly;hGiIl3nB;da;a,ra;le;aWba,ePiMlKthJyH;a,c3sH;a,on,sa;ea;iHys0N;e,s0M;a,cIn1sHza;a,e,ha,on,sa;e,ia,ja;c3is6jaKksaKna,sJxH;aHia;!nd2;ia,saH;nd2;ra;ia;i0nIyH;ah,na;a,is,naCoud;la;c6da,leEmNnLsH;haClH;inHyY;g,n;!h;a,o,slH;ey;ee;en;at6g4nIusH;ti0;es;ie;aWdiTelMrH;eJiH;anMenH;a,e,ne;an0;na;!aLeKiIyH;nn;a,n1;a,e;!ne;!iH;de;e,lDsH;on;yn;!lH;i9yn;ne;aKbIiHrL;!e,gaK;ey,i7y;!e;gaH;il;dKliyJradhIs6;ha;ya;ah;a,ya",Honorific:"true\xa6director1field marsh2lieutenant1rear0sergeant major,vice0; admir1; gener0;al","Adj|Gerund":"true\xa60:3F;1:3H;2:31;3:2X;4:35;5:33;6:3C;7:2Z;8:36;9:29;a33b2Tc2Bd1Te1If19g12h0Zi0Rl0Nm0Gnu0Fo0Ap04rYsKtEuBvAw1Ayiel3;ar6e08;nBpA;l1Rs0B;fol3n1Zsett2;aEeDhrBi4ouc7rAwis0;e0Bif2oub2us0yi1;ea1SiA;l2vi1;l2mp0rr1J;nt1Vxi1;aMcreec7enten2NhLkyrocke0lo0Vmi2oJpHtDuBweA;e0Ul2;pp2ArA;gi1pri5roun3;aBea8iAri2Hun9;mula0r4;gge4rA;t2vi1;ark2eAraw2;e3llb2F;aAot7;ki1ri1;i9oc29;dYtisf6;aEeBive0oAus7;a4l2;assu4defi9fres7ig9juve07mai9s0vAwar3;ea2italiAol1G;si1zi1;gi1ll6mb2vi1;a6eDier23lun1VrAun2C;eBoA;mi5vo1Z;ce3s5vai2;n3rpleA;xi1;ffCpWutBverAwi1;arc7lap04p0Pri3whel8;goi1l6st1J;en3sA;et0;m2Jrtu4;aEeDiCoBuAyst0L;mb2;t1Jvi1;s5tiga0;an1Rl0n3smeri26;dAtu4;de9;aCeaBiAo0U;fesa0Tvi1;di1ni1;c1Fg19s0;llumiGmFnArri0R;cDfurHsCtBviA;go23ti1;e1Oimi21oxica0rig0V;pi4ul0;orpo20r0K;po5;na0;eaBorr02umilA;ia0;li1rtwar8;lFrA;atiDipCoBuelA;i1li1;undbrea10wi1;pi1;f6ng;a4ea8;a3etc7it0lEoCrBulfA;il2;ee1FighXust1L;rAun3;ebo3thco8;aCoA;a0wA;e4i1;mi1tte4;lectrJmHnExA;aCci0hBis0pA;an3lo3;aOila1B;c0spe1A;ab2coura0CdBergi13ga0Clive9ric7s02tA;hral2i0J;ea4u4;barras5er09pA;owe4;if6;aQeIiBrA;if0;sAzz6;aEgDhearCsen0tA;rAur11;ac0es5;te9;us0;ppoin0r8;biliGcDfi9gra3ligh0mBpres5sAvasG;erE;an3ea9orA;ali0L;a6eiBli9rA;ea5;vi1;ta0;maPri1s7un0zz2;aPhMlo5oAripp2ut0;mGnArrespon3;cer9fDspi4tA;inBrA;as0ibu0ol2;ui1;lic0u5;ni1;fDmCpA;eAromi5;l2ti1;an3;or0;aAil2;llenAnAr8;gi1;l8ptAri1;iva0;aff2eGin3lFoDrBuA;d3st2;eathtaAui5;ki1;gg2i2o8ri1unA;ci1;in3;co8wiA;lAtc7;de4;bsorVcOgonMlJmHnno6ppea2rFsA;pi4su4toA;nBun3;di1;is7;hi1;res0;li1;aFu5;si1;ar8lu4;ri1;mi1;iAzi1;zi1;cAhi1;eleDomA;moBpan6;yi1;da0;ra0;ti1;bi1;ng",Comparable:"true\xa60:3C;1:3Q;2:3F;a3Tb3Cc33d2Te2Mf2Ag1Wh1Li1Fj1Ek1Bl13m0Xn0So0Rp0Iqu0Gr07sHtCug0vAw4y3za0Q;el10ouN;ary,e6hi5i3ry;ck0Cde,l3n1ry,se;d,y;ny,te;a3i3R;k,ry;a3erda2ulgar;gue,in,st;a6en2Xhi5i4ouZr3;anqu2Cen1ue;dy,g36me0ny;ck,rs28;ll,me,rt,wd3I;aRcaPeOhMiLkin0BlImGoEpDt6u4w3;eet,ift;b3dd0Wperfi21rre28;sta26t21;a8e7iff,r4u3;pUr1;a4ict,o3;ng;ig2Vn0N;a1ep,rn;le,rk,te0;e1Si2Vright0;ci1Yft,l3on,re;emn,id;a3el0;ll,rt;e4i3y;g2Mm0Z;ek,nd2T;ck24l0mp1L;a3iRrill,y;dy,l01rp;ve0Jxy;n1Jr3;ce,y;d,fe,int0l1Hv0V;a8e6i5o3ude;mantic,o19sy,u3;gh;pe,t1P;a3d,mo0A;dy,l;gg4iFndom,p3re,w;id;ed;ai2i3;ck,et;hoAi1Fl9o8r5u3;ny,r3;e,p11;egna2ic4o3;fouSud;ey,k0;liXor;ain,easa2;ny;dd,i0ld,ranL;aive,e5i4o3u14;b0Sisy,rm0Ysy;bb0ce,mb0R;a3r1w;r,t;ad,e5ild,o4u3;nda12te;ist,o1;a4ek,l3;low;s0ty;a8e7i6o3ucky;f0Jn4o15u3ve0w10y0N;d,sy;e0g;ke0l,mp,tt0Eve0;e1Qwd;me,r3te;ge;e4i3;nd;en;ol0ui19;cy,ll,n3;secu6t3;e3ima4;llege2rmedia3;te;re;aAe7i6o5u3;ge,m3ng1C;bYid;me0t;gh,l0;a3fXsita2;dy,rWv3;en0y;nd13ppy,r3;d3sh;!y;aFenEhCiBlAoofy,r3;a8e6i5o3ue0Z;o3ss;vy;m,s0;at,e3y;dy,n;nd,y;ad,ib,ooD;a2d1;a3o3;st0;tDuiS;u1y;aCeebBi9l8o6r5u3;ll,n3r0N;!ny;aCesh,iend0;a3nd,rmD;my;at,ir7;erce,nan3;ci9;le;r,ul3;ty;a6erie,sse4v3xtre0B;il;nti3;al;r4s3;tern,y;ly,th0;appZe9i5ru4u3;mb;nk;r5vi4z3;zy;ne;e,ty;a3ep,n9;d3f,r;!ly;agey,h8l7o5r4u3;dd0r0te;isp,uel;ar3ld,mmon,st0ward0zy;se;evKou1;e3il0;ap,e3;sy;aHiFlCoAr5u3;ff,r0sy;ly;a6i3oad;g4llia2;nt;ht;sh,ve;ld,un3;cy;a4o3ue;nd,o1;ck,nd;g,tt3;er;d,ld,w1;dy;bsu6ng5we3;so3;me;ry;rd",Adverb:"true\xa6a08b05d00eYfSheQinPjustOkinda,likewiZmMnJoEpCquite,r9s5t2u0very,well;ltima01p0; to,wards5;h1iny bit,o0wiO;o,t6;en,us;eldom,o0uch;!me1rt0; of;how,times,w0C;a1e0;alS;ndomRth05;ar excellenEer0oint blank; Lhaps;f3n0utright;ce0ly;! 0;ag05moX; courGten;ewJo0; longWt 0;onHwithstand9;aybe,eanwhiNore0;!ovT;! aboX;deed,steY;lla,n0;ce;or3u0;ck1l9rther0;!moK;ing; 0evK;exampCgood,suH;n mas0vI;se;e0irect2; 2fini0;te0;ly;juAtrop;ackward,y 0;far,no0; means,w; GbroFd nauseam,gEl7ny5part,s4t 2w0;ay,hi0;le;be7l0mo7wor7;arge,ea6; soon,i4;mo0way;re;l 3mo2ongsi1ready,so,togeth0ways;er;de;st;b1t0;hat;ut;ain;ad;lot,posteriori",Conjunction:"true\xa6aXbTcReNhowMiEjust00noBo9p8supposing,t5wh0yet;e1il0o3;e,st;n1re0thN; if,by,vM;evL;h0il,o;erefOo0;!uU;lus,rovided th9;r0therwiM;! not; mattEr,w0;! 0;since,th4w7;f4n0; 0asmuch;as mIcaForder t0;h0o;at;! 0;only,t0w0;hen;!ev3;ith2ven0;! 0;if,tB;er;o0uz;s,z;e0ut,y the time;cau1f0;ore;se;lt3nd,s 0;far1if,m0soon1t2;uch0; as;hou0;gh",Currency:"true\xa6$,aud,bQcOdJeurIfHgbp,hkd,iGjpy,kElDp8r7s3usd,x2y1z0\xa2,\xa3,\xa5,\u0434\u0435\u043d,\u043b\u0432,\u0440\u0443\u0431,\u0e3f,\u20a1,\u20a8,\u20ac,\u20ad,\ufdfc;lotyQ\u0142;en,uanP;af,of;h0t5;e0il5;k0q0;elK;oubleJp,upeeJ;e2ound st0;er0;lingG;n0soF;ceEnies;empi7i7;n,r0wanzaCyatC;!onaBw;ls,nr;ori7ranc9;!os;en3i2kk,o0;b0ll2;ra5;me4n0rham4;ar3;e0ny;nt1;aht,itcoin0;!s",Determiner:"true\xa6aBboth,d9e6few,le5mu8neiDplenty,s4th2various,wh0;at0ich0;evC;a0e4is,ose;!t;everal,ome;!ast,s;a1l0very;!se;ch;e0u;!s;!n0;!o0y;th0;er","Adj|Present":"true\xa6a07b04cVdQeNfJhollIidRlEmCnarrIoBp9qua8r7s3t2uttFw0;aKet,ro0;ng,u08;endChin;e2hort,l1mooth,our,pa9tray,u0;re,speU;i2ow;cu6da02leSpaN;eplica01i02;ck;aHerfePr0;eseUime,omV;bscu1pen,wn;atu0e3odeH;re;a2e1ive,ow0;er;an;st,y;ow;a2i1oul,r0;ee,inge;rm;iIke,ncy,st;l1mpty,x0;emHpress;abo4ic7;amp,e2i1oub0ry,ull;le;ffu9re6;fu8libe0;raE;alm,l5o0;mpleCn3ol,rr1unterfe0;it;e0u7;ct;juga8sum7;ea1o0;se;n,r;ankru1lu0;nt;pt;li2pproxi0rticula1;ma0;te;ght","Person|Adj":"true\xa6b3du2earnest,frank,mi2r0san1woo1;an0ich,u1;dy;sty;ella,rown",Modal:"true\xa6c5lets,m4ought3sh1w0;ill,o5;a0o4;ll,nt;! to,a;ight,ust;an,o0;uld",Verb:"true\xa6born,cannot,gonna,has,keep tabs,msg","Person|Verb":"true\xa6b8ch7dr6foster,gra5ja9lan4ma2ni9ollie,p1rob,s0wade;kip,pike,t5ue;at,eg,ier2;ck,r0;k,shal;ce;ce,nt;ew;ase,u1;iff,l1ob,u0;ck;aze,ossom","Person|Date":"true\xa6a2j0sep;an0une;!uary;p0ugust,v0;ril"},kwe=36,Cwe="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",Swe=Cwe.split("").reduce((function(e,t,n){return e[t]=n,e}),{}),Ewe=function(e){if(void 0!==Swe[e])return Swe[e];let t=0,n=1,r=kwe,o=1;for(;n<e.length;t+=r,n++,r*=kwe);for(let a=e.length-1;a>=0;a--,o*=kwe){let n=e.charCodeAt(a)-48;n>10&&(n-=7),t+=n*o}return t},Nwe=function(e){const t=new RegExp("([0-9A-Z]+):([0-9A-Z]+)");for(let n=0;n<e.nodes.length;n++){const r=t.exec(e.nodes[n]);if(!r){e.symCount=n;break}e.syms[Ewe(r[1])]=Ewe(r[2])}e.nodes=e.nodes.slice(e.symCount,e.nodes.length)},Iwe=function(e,t,n){const r=Ewe(t);return r<e.symCount?e.syms[r]:n+r+1-e.symCount},$we=function(e){const t={nodes:e.split(";"),syms:[],symCount:0};return e.match(":")&&Nwe(t),function(e){const t=[],n=(r,o)=>{let a=e.nodes[r];"!"===a[0]&&(t.push(o),a=a.slice(1));const i=a.split(/([A-Z0-9,]+)/g);for(let s=0;s<i.length;s+=2){const a=i[s],l=i[s+1];if(!a)continue;const u=o+a;if(","===l||void 0===l){t.push(u);continue}const c=Iwe(e,l,r);n(c,u)}};return n(0,""),t}(t)},Twe=function(e){if(!e)return{};const t=e.split("|").reduce(((e,t)=>{const n=t.split("\xa6");return e[n[0]]=n[1],e}),{}),n={};return Object.keys(t).forEach((function(e){const r=$we(t[e]);"true"===e&&(e=!0);for(let t=0;t<r.length;t++){const o=r[t];!0===n.hasOwnProperty(o)?!1===Array.isArray(n[o])?n[o]=[n[o],e]:n[o].push(e):n[o]=e}})),n},Awe=["Possessive","Pronoun"];const Owe={a:[[/(antenn|formul|nebul|vertebr|vit)a$/i,"$1ae"],[/ia$/i,"ia"]],e:[[/(kn|l|w)ife$/i,"$1ives"],[/(hive)$/i,"$1s"],[/([m|l])ouse$/i,"$1ice"],[/([m|l])ice$/i,"$1ice"]],f:[[/^(dwar|handkerchie|hoo|scar|whar)f$/i,"$1ves"],[/^((?:ca|e|ha|(?:our|them|your)?se|she|wo)l|lea|loa|shea|thie)f$/i,"$1ves"]],i:[[/(octop|vir)i$/i,"$1i"]],m:[[/([ti])um$/i,"$1a"]],n:[[/^(oxen)$/i,"$1"]],o:[[/(al|ad|at|er|et|ed)o$/i,"$1oes"]],s:[[/(ax|test)is$/i,"$1es"],[/(alias|status)$/i,"$1es"],[/sis$/i,"ses"],[/(bu)s$/i,"$1ses"],[/(sis)$/i,"ses"],[/^(?!talis|.*hu)(.*)man$/i,"$1men"],[/(octop|vir|radi|nucle|fung|cact|stimul)us$/i,"$1i"]],x:[[/(matr|vert|ind|cort)(ix|ex)$/i,"$1ices"],[/^(ox)$/i,"$1en"]],y:[[/([^aeiouy]|qu)y$/i,"$1ies"]],z:[[/(quiz)$/i,"$1zes"]]},Rwe=/([xsz]|ch|sh)$/,Pwe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,{irregularPlurals:n,uncountable:r}=t.two;if(r.hasOwnProperty(e))return e;if(n.hasOwnProperty(e))return n[e];let o=function(e){let t=e[e.length-1];if(!0===Owe.hasOwnProperty(t))for(let n=0;n<Owe[t].length;n+=1){let r=Owe[t][n][0];if(!0===r.test(e))return e.replace(r,Owe[t][n][1])}return null}(e);return null!==o?o:Rwe.test(e)?e+"es":e+"s"},Dwe=/\|/;let Fwe={"20th century fox":"Organization","7 eleven":"Organization","motel 6":"Organization",g8:"Organization",vh1:"Organization","76ers":"SportsTeam","49ers":"SportsTeam",q1:"Date",q2:"Date",q3:"Date",q4:"Date",km2:"Unit",m2:"Unit",dm2:"Unit",cm2:"Unit",mm2:"Unit",mile2:"Unit",in2:"Unit",yd2:"Unit",ft2:"Unit",m3:"Unit",dm3:"Unit",cm3:"Unit",in3:"Unit",ft3:"Unit",yd3:"Unit","at&t":"Organization","black & decker":"Organization","h & m":"Organization","johnson & johnson":"Organization","procter & gamble":"Organization","ben & jerry's":"Organization","&":"Conjunction",i:["Pronoun","Singular"],he:["Pronoun","Singular"],she:["Pronoun","Singular"],it:["Pronoun","Singular"],they:["Pronoun","Plural"],we:["Pronoun","Plural"],was:["Copula","PastTense"],is:["Copula","PresentTense"],are:["Copula","PresentTense"],am:["Copula","PresentTense"],were:["Copula","PastTense"],her:Awe,his:Awe,hers:Awe,their:Awe,theirs:Awe,themselves:Awe,your:Awe,our:Awe,ours:Awe,my:Awe,its:Awe,vs:["Conjunction","Abbreviation"],if:["Condition","Preposition"],closer:"Comparative",closest:"Superlative",much:"Adverb",may:"Modal",babysat:"PastTense",blew:"PastTense",drank:"PastTense",drove:"PastTense",forgave:"PastTense",skiied:"PastTense",spilt:"PastTense",stung:"PastTense",swam:"PastTense",swung:"PastTense",guaranteed:"PastTense",shrunk:"PastTense",nears:"PresentTense",nearing:"Gerund",neared:"PastTense",no:["Negative","Expression"]},_we={};const Mwe={two:{irregularPlurals:wwe,uncountable:{}}};Object.keys(xwe).forEach((e=>{let t=Twe(xwe[e]);Dwe.test(e)?Object.keys(t).forEach((t=>{if(_we[t]=e,"Noun|Verb"===e){let e=Pwe(t,Mwe);_we[e]="Plural|Verb"}})):Object.keys(t).forEach((t=>{Fwe[t]=e}))})),[":(",":)",":P",":p",":O",";(",";)",";P",";p",";O",":3",":|",":/",":\\",":$",":*",":@",":-(",":-)",":-P",":-p",":-O",":-3",":-|",":-/",":-\\",":-$",":-*",":-@",":^(",":^)",":^P",":^p",":^O",":^3",":^|",":^/",":^\\",":^$",":^*",":^@","):","(:","$:","*:",")-:","(-:","$-:","*-:",")^:","(^:","$^:","*^:","<3","</3","<\\3","=("].forEach((e=>Fwe[e]="Emoticon")),delete Fwe[""],delete Fwe.null,delete Fwe[" "];const zwe="Singular",Lwe={beforeTags:{Determiner:zwe,Possessive:zwe,Acronym:zwe,Noun:zwe,Adjective:zwe,PresentTense:zwe,Gerund:zwe,PastTense:zwe,Infinitive:zwe,Date:zwe,Ordinal:zwe,Demonym:zwe},afterTags:{Value:zwe,Modal:zwe,Copula:zwe,PresentTense:zwe,PastTense:zwe,Demonym:zwe,Actor:zwe},beforeWords:{the:zwe,with:zwe,without:zwe,of:zwe,for:zwe,any:zwe,all:zwe,on:zwe,cut:zwe,cuts:zwe,increase:zwe,decrease:zwe,raise:zwe,drop:zwe,save:zwe,saved:zwe,saves:zwe,make:zwe,makes:zwe,made:zwe,minus:zwe,plus:zwe,than:zwe,another:zwe,versus:zwe,neither:zwe,about:zwe,favorite:zwe,best:zwe,daily:zwe,weekly:zwe,linear:zwe,binary:zwe,mobile:zwe,lexical:zwe,technical:zwe,computer:zwe,scientific:zwe,security:zwe,government:zwe,popular:zwe,formal:zwe,no:zwe,more:zwe,one:zwe,let:zwe,her:zwe,his:zwe,their:zwe,our:zwe,us:zwe,sheer:zwe,monthly:zwe,yearly:zwe,current:zwe,previous:zwe,upcoming:zwe,last:zwe,next:zwe,main:zwe,initial:zwe,final:zwe,beginning:zwe,end:zwe,top:zwe,bottom:zwe,future:zwe,past:zwe,major:zwe,minor:zwe,side:zwe,central:zwe,peripheral:zwe,public:zwe,private:zwe},afterWords:{of:zwe,system:zwe,aid:zwe,method:zwe,utility:zwe,tool:zwe,reform:zwe,therapy:zwe,philosophy:zwe,room:zwe,authority:zwe,says:zwe,said:zwe,wants:zwe,wanted:zwe,is:zwe,did:zwe,do:zwe,can:zwe,wise:zwe}},Bwe="Infinitive",jwe={beforeTags:{Modal:Bwe,Adverb:Bwe,Negative:Bwe,Plural:Bwe},afterTags:{Determiner:Bwe,Adverb:Bwe,Possessive:Bwe,Reflexive:Bwe,Preposition:Bwe,Cardinal:Bwe,Comparative:Bwe,Superlative:Bwe},beforeWords:{i:Bwe,we:Bwe,you:Bwe,they:Bwe,to:Bwe,please:Bwe,will:Bwe,have:Bwe,had:Bwe,would:Bwe,could:Bwe,should:Bwe,do:Bwe,did:Bwe,does:Bwe,can:Bwe,must:Bwe,us:Bwe,me:Bwe,let:Bwe,even:Bwe,when:Bwe,help:Bwe,he:Bwe,she:Bwe,it:Bwe,being:Bwe,bi:Bwe,co:Bwe,contra:Bwe,de:Bwe,inter:Bwe,intra:Bwe,mis:Bwe,pre:Bwe,out:Bwe,counter:Bwe,nobody:Bwe,somebody:Bwe,anybody:Bwe,everybody:Bwe},afterWords:{the:Bwe,me:Bwe,you:Bwe,him:Bwe,us:Bwe,her:Bwe,his:Bwe,them:Bwe,they:Bwe,it:Bwe,himself:Bwe,herself:Bwe,itself:Bwe,myself:Bwe,ourselves:Bwe,themselves:Bwe,something:Bwe,anything:Bwe,a:Bwe,an:Bwe,up:Bwe,down:Bwe,by:Bwe,out:Bwe,off:Bwe,under:Bwe,what:Bwe,all:Bwe,to:Bwe,because:Bwe,although:Bwe,how:Bwe,otherwise:Bwe,together:Bwe,though:Bwe,into:Bwe,yet:Bwe,more:Bwe,here:Bwe,there:Bwe,away:Bwe}},Hwe={beforeTags:Object.assign({},jwe.beforeTags,Lwe.beforeTags,{}),afterTags:Object.assign({},jwe.afterTags,Lwe.afterTags,{}),beforeWords:Object.assign({},jwe.beforeWords,Lwe.beforeWords,{}),afterWords:Object.assign({},jwe.afterWords,Lwe.afterWords,{})},Vwe="Adjective",Wwe={beforeTags:{Determiner:Vwe,Possessive:Vwe,Hyphenated:Vwe},afterTags:{Adjective:Vwe},beforeWords:{seem:Vwe,seemed:Vwe,seems:Vwe,feel:Vwe,feels:Vwe,felt:Vwe,stay:Vwe,appear:Vwe,appears:Vwe,appeared:Vwe,also:Vwe,over:Vwe,under:Vwe,too:Vwe,it:Vwe,but:Vwe,still:Vwe,really:Vwe,quite:Vwe,well:Vwe,very:Vwe,truly:Vwe,how:Vwe,deeply:Vwe,hella:Vwe,profoundly:Vwe,extremely:Vwe,so:Vwe,badly:Vwe,mostly:Vwe,totally:Vwe,awfully:Vwe,rather:Vwe,nothing:Vwe,something:Vwe,anything:Vwe,not:Vwe,me:Vwe,is:Vwe,face:Vwe,faces:Vwe,faced:Vwe,look:Vwe,looks:Vwe,looked:Vwe,reveal:Vwe,reveals:Vwe,revealed:Vwe,sound:Vwe,sounded:Vwe,sounds:Vwe,remains:Vwe,remained:Vwe,prove:Vwe,proves:Vwe,proved:Vwe,becomes:Vwe,stays:Vwe,tastes:Vwe,taste:Vwe,smells:Vwe,smell:Vwe,gets:Vwe,grows:Vwe,as:Vwe,rings:Vwe,radiates:Vwe,conveys:Vwe,convey:Vwe,conveyed:Vwe,of:Vwe},afterWords:{too:Vwe,also:Vwe,or:Vwe,enough:Vwe,as:Vwe}},Gwe="Gerund",Uwe={beforeTags:{Adverb:Gwe,Preposition:Gwe,Conjunction:Gwe},afterTags:{Adverb:Gwe,Possessive:Gwe,Person:Gwe,Pronoun:Gwe,Determiner:Gwe,Copula:Gwe,Preposition:Gwe,Conjunction:Gwe,Comparative:Gwe},beforeWords:{been:Gwe,keep:Gwe,continue:Gwe,stop:Gwe,am:Gwe,be:Gwe,me:Gwe,began:Gwe,start:Gwe,starts:Gwe,started:Gwe,stops:Gwe,stopped:Gwe,help:Gwe,helps:Gwe,avoid:Gwe,avoids:Gwe,love:Gwe,loves:Gwe,loved:Gwe,hate:Gwe,hates:Gwe,hated:Gwe},afterWords:{you:Gwe,me:Gwe,her:Gwe,him:Gwe,his:Gwe,them:Gwe,their:Gwe,it:Gwe,this:Gwe,there:Gwe,on:Gwe,about:Gwe,for:Gwe,up:Gwe,down:Gwe}},Kwe="Gerund",qwe="Adjective",Xwe={beforeTags:Object.assign({},Wwe.beforeTags,Uwe.beforeTags,{Imperative:Kwe,Infinitive:qwe,Plural:Kwe}),afterTags:Object.assign({},Wwe.afterTags,Uwe.afterTags,{Noun:qwe}),beforeWords:Object.assign({},Wwe.beforeWords,Uwe.beforeWords,{is:qwe,are:Kwe,was:qwe,of:qwe,suggest:Kwe,suggests:Kwe,suggested:Kwe,recommend:Kwe,recommends:Kwe,recommended:Kwe,imagine:Kwe,imagines:Kwe,imagined:Kwe,consider:Kwe,considered:Kwe,considering:Kwe,resist:Kwe,resists:Kwe,resisted:Kwe,avoid:Kwe,avoided:Kwe,avoiding:Kwe,except:qwe,accept:qwe,assess:Kwe,explore:Kwe,fear:Kwe,fears:Kwe,appreciate:Kwe,question:Kwe,help:Kwe,embrace:Kwe,with:qwe}),afterWords:Object.assign({},Wwe.afterWords,Uwe.afterWords,{to:Kwe,not:Kwe,the:Kwe})},Jwe={beforeTags:{Determiner:void 0,Cardinal:"Noun",PhrasalVerb:"Adjective"},afterTags:{}},Ywe={beforeTags:Object.assign({},Wwe.beforeTags,Lwe.beforeTags,Jwe.beforeTags),afterTags:Object.assign({},Wwe.afterTags,Lwe.afterTags,Jwe.afterTags),beforeWords:Object.assign({},Wwe.beforeWords,Lwe.beforeWords,{are:"Adjective",is:"Adjective",was:"Adjective",be:"Adjective",off:"Adjective",out:"Adjective"}),afterWords:Object.assign({},Wwe.afterWords,Lwe.afterWords)};let Qwe="PastTense",Zwe="Adjective";const exe={beforeTags:{Adverb:Qwe,Pronoun:Qwe,ProperNoun:Qwe,Auxiliary:Qwe,Noun:Qwe},afterTags:{Possessive:Qwe,Pronoun:Qwe,Determiner:Qwe,Adverb:Qwe,Comparative:Qwe,Date:Qwe,Gerund:Qwe},beforeWords:{be:Qwe,who:Qwe,get:Zwe,had:Qwe,has:Qwe,have:Qwe,been:Qwe,it:Qwe,as:Qwe,for:Zwe,more:Zwe,always:Zwe},afterWords:{by:Qwe,back:Qwe,out:Qwe,in:Qwe,up:Qwe,down:Qwe,before:Qwe,after:Qwe,for:Qwe,the:Qwe,with:Qwe,as:Qwe,on:Qwe,at:Qwe,between:Qwe,to:Qwe,into:Qwe,us:Qwe,them:Qwe,his:Qwe,her:Qwe,their:Qwe,our:Qwe,me:Qwe,about:Zwe}},txe={beforeTags:Object.assign({},Wwe.beforeTags,exe.beforeTags),afterTags:Object.assign({},Wwe.afterTags,exe.afterTags),beforeWords:Object.assign({},Wwe.beforeWords,exe.beforeWords),afterWords:Object.assign({},Wwe.afterWords,exe.afterWords)},nxe={afterTags:{Noun:"Adjective",Conjunction:void 0}},rxe={beforeTags:Object.assign({},Wwe.beforeTags,jwe.beforeTags,{Adverb:void 0,Negative:void 0}),afterTags:Object.assign({},Wwe.afterTags,jwe.afterTags,nxe.afterTags),beforeWords:Object.assign({},Wwe.beforeWords,jwe.beforeWords,{have:void 0,had:void 0,not:void 0,went:"Adjective",goes:"Adjective",got:"Adjective",be:"Adjective"}),afterWords:Object.assign({},Wwe.afterWords,jwe.afterWords,{to:void 0,as:"Adjective"})},oxe={Copula:"Gerund",PastTense:"Gerund",PresentTense:"Gerund",Infinitive:"Gerund"},axe={Value:"Gerund"},ixe={are:"Gerund",were:"Gerund",be:"Gerund",no:"Gerund",without:"Gerund",you:"Gerund",we:"Gerund",they:"Gerund",he:"Gerund",she:"Gerund",us:"Gerund",them:"Gerund"},sxe={the:"Gerund",this:"Gerund",that:"Gerund",me:"Gerund",us:"Gerund",them:"Gerund"},lxe={beforeTags:Object.assign({},Uwe.beforeTags,Lwe.beforeTags,oxe),afterTags:Object.assign({},Uwe.afterTags,Lwe.afterTags,axe),beforeWords:Object.assign({},Uwe.beforeWords,Lwe.beforeWords,ixe),afterWords:Object.assign({},Uwe.afterWords,Lwe.afterWords,sxe)},uxe="Singular",cxe="Infinitive",dxe={beforeTags:Object.assign({},jwe.beforeTags,Lwe.beforeTags,{Adjective:uxe,Particle:uxe}),afterTags:Object.assign({},jwe.afterTags,Lwe.afterTags,{ProperNoun:cxe,Gerund:cxe,Adjective:cxe,Copula:uxe}),beforeWords:Object.assign({},jwe.beforeWords,Lwe.beforeWords,{is:uxe,was:uxe,of:uxe,have:null}),afterWords:Object.assign({},jwe.afterWords,Lwe.afterWords,{instead:cxe,about:cxe,his:cxe,her:cxe,to:null,by:null,in:null})},hxe="Person",pxe={beforeTags:{Honorific:hxe,Person:hxe},afterTags:{Person:hxe,ProperNoun:hxe,Verb:hxe},ownTags:{ProperNoun:hxe},beforeWords:{hi:hxe,hey:hxe,yo:hxe,dear:hxe,hello:hxe},afterWords:{said:hxe,says:hxe,told:hxe,tells:hxe,feels:hxe,felt:hxe,seems:hxe,thinks:hxe,thought:hxe,spends:hxe,spendt:hxe,plays:hxe,played:hxe,sing:hxe,sang:hxe,learn:hxe,learned:hxe,wants:hxe,wanted:hxe}},fxe="Month",mxe={beforeTags:{Date:fxe,Value:fxe},afterTags:{Date:fxe,Value:fxe},beforeWords:{by:fxe,in:fxe,on:fxe,during:fxe,after:fxe,before:fxe,between:fxe,until:fxe,til:fxe,sometime:fxe,of:fxe,this:fxe,next:fxe,last:fxe,previous:fxe,following:fxe,with:"Person"},afterWords:{sometime:fxe,in:fxe,of:fxe,until:fxe,the:fxe}},gxe={beforeTags:Object.assign({},pxe.beforeTags,mxe.beforeTags),afterTags:Object.assign({},pxe.afterTags,mxe.afterTags),beforeWords:Object.assign({},pxe.beforeWords,mxe.beforeWords),afterWords:Object.assign({},pxe.afterWords,mxe.afterWords)},vxe="Place",bxe={beforeTags:{Place:vxe},afterTags:{Place:vxe,Abbreviation:vxe},beforeWords:{in:vxe,by:vxe,near:vxe,from:vxe,to:vxe},afterWords:{in:vxe,by:vxe,near:vxe,from:vxe,to:vxe,government:vxe,council:vxe,region:vxe,city:vxe}};let yxe="Unit";const wxe={"Actor|Verb":Hwe,"Adj|Gerund":Xwe,"Adj|Noun":Ywe,"Adj|Past":txe,"Adj|Present":rxe,"Noun|Verb":dxe,"Noun|Gerund":lxe,"Person|Noun":{beforeTags:Object.assign({},Lwe.beforeTags,pxe.beforeTags),afterTags:Object.assign({},Lwe.afterTags,pxe.afterTags),beforeWords:Object.assign({},Lwe.beforeWords,pxe.beforeWords,{i:"Infinitive",we:"Infinitive"}),afterWords:Object.assign({},Lwe.afterWords,pxe.afterWords)},"Person|Date":gxe,"Person|Verb":{beforeTags:Object.assign({},Lwe.beforeTags,pxe.beforeTags,jwe.beforeTags),afterTags:Object.assign({},Lwe.afterTags,pxe.afterTags,jwe.afterTags),beforeWords:Object.assign({},Lwe.beforeWords,pxe.beforeWords,jwe.beforeWords),afterWords:Object.assign({},Lwe.afterWords,pxe.afterWords,jwe.afterWords)},"Person|Place":{beforeTags:Object.assign({},bxe.beforeTags,pxe.beforeTags),afterTags:Object.assign({},bxe.afterTags,pxe.afterTags),beforeWords:Object.assign({},bxe.beforeWords,pxe.beforeWords),afterWords:Object.assign({},bxe.afterWords,pxe.afterWords)},"Person|Adj":{beforeTags:Object.assign({},pxe.beforeTags,Wwe.beforeTags),afterTags:Object.assign({},pxe.afterTags,Wwe.afterTags),beforeWords:Object.assign({},pxe.beforeWords,Wwe.beforeWords),afterWords:Object.assign({},pxe.afterWords,Wwe.afterWords)},"Unit|Noun":{beforeTags:{Value:yxe},afterTags:{},beforeWords:{per:yxe,every:yxe,each:yxe,square:yxe,cubic:yxe,sq:yxe,metric:yxe},afterWords:{per:yxe,squared:yxe,cubed:yxe,long:yxe}}},xxe=(e,t)=>{let n=Object.keys(e).reduce(((t,n)=>(t[n]="Infinitive"===e[n]?"PresentTense":"Plural",t)),{});return Object.assign(n,t)};wxe["Plural|Verb"]={beforeWords:xxe(wxe["Noun|Verb"].beforeWords,{had:"Plural",have:"Plural"}),afterWords:xxe(wxe["Noun|Verb"].afterWords,{his:"PresentTense",her:"PresentTense",its:"PresentTense",in:null,to:null,is:"PresentTense",by:"PresentTense"}),beforeTags:xxe(wxe["Noun|Verb"].beforeTags,{Conjunction:"PresentTense",Noun:void 0,ProperNoun:"PresentTense"}),afterTags:xxe(wxe["Noun|Verb"].afterTags,{Gerund:"Plural",Noun:"PresentTense",Value:"PresentTense"})};const kxe=wxe,Cxe="Adjective",Sxe="Infinitive",Exe="PresentTense",Nxe="Singular",Ixe="PastTense",$xe="Adverb",Txe="Plural",Axe="Actor",Oxe="Verb",Rxe="Noun",Pxe="LastName",Dxe="Modal",Fxe="Place",_xe="Participle",Mxe=[null,null,{ea:Nxe,ia:Rxe,ic:Cxe,ly:$xe,"'n":Oxe,"'t":Oxe},{oed:Ixe,ued:Ixe,xed:Ixe," so":$xe,"'ll":Dxe,"'re":"Copula",azy:Cxe,eer:Rxe,end:Oxe,ped:Ixe,ffy:Cxe,ify:Sxe,ing:"Gerund",ize:Sxe,ibe:Sxe,lar:Cxe,mum:Cxe,nes:Exe,nny:Cxe,ous:Cxe,que:Cxe,ger:Rxe,ber:Rxe,rol:Nxe,sis:Nxe,ogy:Nxe,oid:Nxe,ian:Nxe,zes:Exe,eld:Ixe,ken:_xe,ven:_xe,ten:_xe,ect:Sxe,ict:Sxe,ign:Sxe,oze:Sxe,ful:Cxe,bal:Cxe,ton:Rxe,pur:Fxe},{amed:Ixe,aped:Ixe,ched:Ixe,lked:Ixe,rked:Ixe,reed:Ixe,nded:Ixe,mned:Cxe,cted:Ixe,dged:Ixe,ield:Nxe,akis:Pxe,cede:Sxe,chuk:Pxe,czyk:Pxe,ects:Exe,iend:Nxe,ends:Oxe,enko:Pxe,ette:Nxe,iary:Nxe,wner:Nxe,fies:Exe,fore:$xe,gate:Sxe,gone:Cxe,ices:Txe,ints:Txe,ruct:Sxe,ines:Txe,ions:Txe,ners:Txe,pers:Txe,lers:Txe,less:Cxe,llen:Cxe,made:Cxe,nsen:Pxe,oses:Exe,ould:Dxe,some:Cxe,sson:Pxe,ians:Txe,tion:Nxe,tage:Rxe,ique:Nxe,tive:Cxe,tors:Rxe,vice:Nxe,lier:Nxe,fier:Nxe,wned:Ixe,gent:Nxe,tist:Axe,pist:Axe,rist:Axe,mist:Axe,yist:Axe,vist:Axe,ists:Axe,lite:Nxe,site:Nxe,rite:Nxe,mite:Nxe,bite:Nxe,mate:Nxe,date:Nxe,ndal:Nxe,vent:Nxe,uist:Axe,gist:Axe,note:Nxe,cide:Nxe,ence:Nxe,wide:Cxe,vide:Sxe,ract:Sxe,duce:Sxe,pose:Sxe,eive:Sxe,lyze:Sxe,lyse:Sxe,iant:Cxe,nary:Cxe,ghty:Cxe,uent:Cxe,erer:Axe,bury:Fxe,dorf:Rxe,esty:Rxe,wych:Fxe,dale:Fxe,folk:Fxe,vale:Fxe,abad:Fxe,sham:Fxe,wick:Fxe,view:Fxe},{elist:Axe,holic:Nxe,phite:Nxe,tized:Ixe,urned:Ixe,eased:Ixe,ances:Txe,bound:Cxe,ettes:Txe,fully:$xe,ishes:Exe,ities:Txe,marek:Pxe,nssen:Pxe,ology:Rxe,osome:Nxe,tment:Nxe,ports:Txe,rough:Cxe,tches:Exe,tieth:"Ordinal",tures:Txe,wards:$xe,where:$xe,archy:Rxe,pathy:Rxe,opoly:Rxe,embly:Rxe,phate:Rxe,ndent:Nxe,scent:Nxe,onist:Axe,anist:Axe,alist:Axe,olist:Axe,icist:Axe,ounce:Sxe,iable:Cxe,borne:Cxe,gnant:Cxe,inant:Cxe,igent:Cxe,atory:Cxe,rient:Nxe,dient:Nxe,maker:Axe,burgh:Fxe,mouth:Fxe,ceter:Fxe,ville:Fxe,hurst:Fxe,stead:Fxe,endon:Fxe,brook:Fxe,shire:Fxe,worth:Rxe,field:"ProperNoun",ridge:Fxe},{auskas:Pxe,parent:Nxe,cedent:Nxe,ionary:Nxe,cklist:Nxe,brooke:Fxe,keeper:Axe,logist:Axe,teenth:"Value",worker:Axe,master:Axe,writer:Axe,brough:Fxe,cester:Fxe,ington:Fxe,cliffe:Fxe,ingham:Fxe},{chester:Fxe,logists:Axe,opoulos:Pxe,borough:Fxe,sdottir:Pxe}],zxe="Adjective",Lxe="Noun",Bxe="Verb",jxe=[null,null,{},{neo:Lxe,bio:Lxe,"de-":Bxe,"re-":Bxe,"un-":Bxe,"ex-":Lxe},{anti:Lxe,auto:Lxe,faux:zxe,hexa:Lxe,kilo:Lxe,mono:Lxe,nano:Lxe,octa:Lxe,poly:Lxe,semi:zxe,tele:Lxe,"pro-":zxe,"mis-":Bxe,"dis-":Bxe,"pre-":zxe},{anglo:Lxe,centi:Lxe,ethno:Lxe,ferro:Lxe,grand:Lxe,hepta:Lxe,hydro:Lxe,intro:Lxe,macro:Lxe,micro:Lxe,milli:Lxe,nitro:Lxe,penta:Lxe,quasi:zxe,radio:Lxe,tetra:Lxe,"omni-":zxe,"post-":zxe},{pseudo:zxe,"extra-":zxe,"hyper-":zxe,"inter-":zxe,"intra-":zxe,"deca-":zxe},{electro:Lxe}],Hxe="Adjective",Vxe="Infinitive",Wxe="PresentTense",Gxe="Singular",Uxe="PastTense",Kxe="Adverb",qxe="Expression",Xxe="Actor",Jxe="Verb",Yxe="Noun",Qxe="LastName",Zxe={a:[[/.[aeiou]na$/,Yxe,"tuna"],[/.[oau][wvl]ska$/,Qxe],[/.[^aeiou]ica$/,Gxe,"harmonica"],[/^([hyj]a+)+$/,qxe,"haha"]],c:[[/.[^aeiou]ic$/,Hxe]],d:[[/[aeiou](pp|ll|ss|ff|gg|tt|rr|bb|nn|mm)ed$/,Uxe,"popped"],[/.[aeo]{2}[bdgmnprvz]ed$/,Uxe,"rammed"],[/.[aeiou][sg]hed$/,Uxe,"gushed"],[/.[aeiou]red$/,Uxe,"hired"],[/.[aeiou]r?ried$/,Uxe,"hurried"],[/[^aeiou]ard$/,Gxe,"steward"],[/[aeiou][^aeiou]id$/,Hxe,""],[/.[vrl]id$/,Hxe,"livid"],[/..led$/,Uxe,"hurled"],[/.[iao]sed$/,Uxe,""],[/[aeiou]n?[cs]ed$/,Uxe,""],[/[aeiou][rl]?[mnf]ed$/,Uxe,""],[/[aeiou][ns]?c?ked$/,Uxe,"bunked"],[/[aeiou]gned$/,Uxe],[/[aeiou][nl]?ged$/,Uxe],[/.[tdbwxyz]ed$/,Uxe],[/[^aeiou][aeiou][tvx]ed$/,Uxe],[/.[cdflmnprstv]ied$/,Uxe,"emptied"]],e:[[/.[lnr]ize$/,Vxe,"antagonize"],[/.[^aeiou]ise$/,Vxe,"antagonise"],[/.[aeiou]te$/,Vxe,"bite"],[/.[^aeiou][ai]ble$/,Hxe,"fixable"],[/.[^aeiou]eable$/,Hxe,"maleable"],[/.[ts]ive$/,Hxe,"festive"],[/[a-z]-like$/,Hxe,"woman-like"]],h:[[/.[^aeiouf]ish$/,Hxe,"cornish"],[/.v[iy]ch$/,Qxe,"..ovich"],[/^ug?h+$/,qxe,"ughh"],[/^uh[ -]?oh$/,qxe,"uhoh"],[/[a-z]-ish$/,Hxe,"cartoon-ish"]],i:[[/.[oau][wvl]ski$/,Qxe,"polish-male"]],k:[[/^(k){2}$/,qxe,"kkkk"]],l:[[/.[gl]ial$/,Hxe,"familial"],[/.[^aeiou]ful$/,Hxe,"fitful"],[/.[nrtumcd]al$/,Hxe,"natal"],[/.[^aeiou][ei]al$/,Hxe,"familial"]],m:[[/.[^aeiou]ium$/,Gxe,"magnesium"],[/[^aeiou]ism$/,Gxe,"schism"],[/^[hu]m+$/,qxe,"hmm"],[/^\d+ ?[ap]m$/,"Date","3am"]],n:[[/.[lsrnpb]ian$/,Hxe,"republican"],[/[^aeiou]ician$/,Xxe,"musician"],[/[aeiou][ktrp]in'$/,"Gerund","cookin'"]],o:[[/^no+$/,qxe,"noooo"],[/^(yo)+$/,qxe,"yoo"],[/^wo{2,}[pt]?$/,qxe,"woop"]],r:[[/.[bdfklmst]ler$/,"Noun"],[/[aeiou][pns]er$/,Gxe],[/[^i]fer$/,Vxe],[/.[^aeiou][ao]pher$/,Xxe],[/.[lk]er$/,"Noun"],[/.ier$/,"Comparative"]],t:[[/.[di]est$/,"Superlative"],[/.[icldtgrv]ent$/,Hxe],[/[aeiou].*ist$/,Hxe],[/^[a-z]et$/,Jxe]],s:[[/.[^aeiou]ises$/,Wxe],[/.[rln]ates$/,Wxe],[/.[^z]ens$/,Jxe],[/.[lstrn]us$/,Gxe],[/.[aeiou]sks$/,Wxe],[/.[aeiou]kes$/,Wxe],[/[aeiou][^aeiou]is$/,Gxe],[/[a-z]'s$/,Yxe],[/^yes+$/,qxe]],v:[[/.[^aeiou][ai][kln]ov$/,Qxe]],y:[[/.[cts]hy$/,Hxe],[/.[st]ty$/,Hxe],[/.[tnl]ary$/,Hxe],[/.[oe]ry$/,Gxe],[/[rdntkbhs]ly$/,Kxe],[/.(gg|bb|zz)ly$/,Hxe],[/...lly$/,Kxe],[/.[gk]y$/,Hxe],[/[bszmp]{2}y$/,Hxe],[/.[ai]my$/,Hxe],[/[ea]{2}zy$/,Hxe],[/.[^aeiou]ity$/,Gxe]]},eke="Verb",tke="Noun",nke={leftTags:[["Adjective",tke],["Possessive",tke],["Determiner",tke],["Adverb",eke],["Pronoun",eke],["Value",tke],["Ordinal",tke],["Modal",eke],["Superlative",tke],["Demonym",tke],["Honorific","Person"]],leftWords:[["i",eke],["first",tke],["it",eke],["there",eke],["not",eke],["because",tke],["if",tke],["but",tke],["who",eke],["this",tke],["his",tke],["when",tke],["you",eke],["very","Adjective"],["old",tke],["never",eke],["before",tke],["a",tke],["the",tke],["been",eke]],rightTags:[["Copula",tke],["PastTense",tke],["Conjunction",tke],["Modal",tke]],rightWords:[["there",eke],["me",eke],["man","Adjective"],["him",eke],["it",eke],["were",tke],["took",tke],["himself",eke],["went",tke],["who",tke],["jr","Person"]]},rke={fwd:"3:ser,ier\xa61er:h,t,f,l,n\xa61r:e\xa62er:ss,or,om",both:"3er:ver,ear,alm\xa63ner:hin\xa63ter:lat\xa62mer:im\xa62er:ng,rm,mb\xa62ber:ib\xa62ger:ig\xa61er:w,p,k,d\xa6ier:y",rev:"1:tter,yer\xa62:uer,ver,ffer,oner,eler,ller,iler,ster,cer,uler,sher,ener,gher,aner,adder,nter,eter,rter,hter,rner,fter\xa63:oser,ooler,eafer,user,airer,bler,maler,tler,eater,uger,rger,ainer,urer,ealer,icher,pler,emner,icter,nser,iser\xa64:arser,viner,ucher,rosser,somer,ndomer,moter,oother,uarer,hiter\xa65:nuiner,esser,emier\xa6ar:urther",ex:"worse:bad\xa6better:good\xa64er:fair,gray,poor\xa61urther:far\xa63ter:fat,hot,wet\xa63der:mad,sad\xa63er:shy,fun\xa64der:glad\xa6:\xa64r:cute,dire,fake,fine,free,lame,late,pale,rare,ripe,rude,safe,sore,tame,wide\xa65r:eerie,stale"},oke={fwd:"1:nning,tting,rring,pping,eing,mming,gging,dding,bbing,kking\xa62:eking,oling,eling,eming\xa63:velling,siting,uiting,fiting,loting,geting,ialing,celling\xa64:graming",both:"1:aing,iing,fing,xing,ying,oing,hing,wing\xa62:tzing,rping,izzing,bting,mning,sping,wling,rling,wding,rbing,uping,lming,wning,mping,oning,lting,mbing,lking,fting,hting,sking,gning,pting,cking,ening,nking,iling,eping,ering,rting,rming,cting,lping,ssing,nting,nding,lding,sting,rning,rding,rking\xa63:belling,siping,toming,yaking,uaking,oaning,auling,ooping,aiding,naping,euring,tolling,uzzing,ganing,haning,ualing,halling,iasing,auding,ieting,ceting,ouling,voring,ralling,garing,joring,oaming,oaking,roring,nelling,ooring,uelling,eaming,ooding,eaping,eeting,ooting,ooming,xiting,keting,ooking,ulling,airing,oaring,biting,outing,oiting,earing,naling,oading,eeding,ouring,eaking,aiming,illing,oining,eaning,onging,ealing,aining,eading\xa64:thoming,melling,aboring,ivoting,weating,dfilling,onoring,eriting,imiting,tialling,rgining,otoring,linging,winging,lleting,louding,spelling,mpelling,heating,feating,opelling,choring,welling,ymaking,ctoring,calling,peating,iloring,laiting,utoring,uditing,mmaking,loating,iciting,waiting,mbating,voiding,otalling,nsoring,nselling,ocusing,itoring,eloping\xa65:rselling,umpeting,atrolling,treating,tselling,rpreting,pringing,ummeting,ossoming,elmaking,eselling,rediting,totyping,onmaking,rfeiting,ntrolling\xa65e:chmaking,dkeeping,severing,erouting,ecreting,ephoning,uthoring,ravening,reathing,pediting,erfering,eotyping,fringing,entoring,ombining,ompeting\xa64e:emaking,eething,twining,rruling,chuting,xciting,rseding,scoping,edoring,pinging,lunging,agining,craping,pleting,eleting,nciting,nfining,ncoding,tponing,ecoding,writing,esaling,nvening,gnoring,evoting,mpeding,rvening,dhering,mpiling,storing,nviting,ploring\xa63e:tining,nuring,saking,miring,haling,ceding,xuding,rining,nuting,laring,caring,miling,riding,hoking,piring,lading,curing,uading,noting,taping,futing,paring,hading,loding,siring,guring,vading,voking,during,niting,laning,caping,luting,muting,ruding,ciding,juring,laming,caling,hining,uoting,liding,ciling,duling,tuting,puting,cuting,coring,uiding,tiring,turing,siding,rading,enging,haping,buting,lining,taking,anging,haring,uiring,coming,mining,moting,suring,viding,luding\xa62e:tring,zling,uging,oging,gling,iging,vring,fling,lging,obing,psing,pling,ubing,cling,dling,wsing,iking,rsing,dging,kling,ysing,tling,rging,eging,nsing,uning,osing,uming,using,ibing,bling,aging,ising,asing,ating\xa62ie:rlying\xa61e:zing,uing,cing,ving",rev:"ying:ie\xa61ing:se,ke,te,we,ne,re,de,pe,me,le,c,he\xa62ing:ll,ng,dd,ee,ye,oe,rg,us\xa62ning:un\xa62ging:og,ag,ug,ig,eg\xa62ming:um\xa62bing:ub,ab,eb,ob\xa63ning:lan,can,hin,pin,win\xa63ring:cur,lur,tir,tar,pur,car\xa63ing:ait,del,eel,fin,eat,oat,eem,lel,ool,ein,uin\xa63ping:rop,rap,top,uip,wap,hip,hop,lap,rip,cap\xa63ming:tem,wim,rim,kim,lim\xa63ting:mat,cut,pot,lit,lot,hat,set,pit,put\xa63ding:hed,bed,bid\xa63king:rek\xa63ling:cil,pel\xa63bing:rib\xa64ning:egin\xa64ing:isit,ruit,ilot,nsit,dget,rkel,ival,rcel\xa64ring:efer,nfer\xa64ting:rmit,mmit,ysit,dmit,emit,bmit,tfit,gret\xa64ling:evel,xcel,ivel\xa64ding:hred\xa65ing:arget,posit,rofit\xa65ring:nsfer\xa65ting:nsmit,orget,cquit\xa65ling:ancel,istil",ex:"3:adding,eating,aiming,aiding,airing,outing,gassing,setting,getting,putting,cutting,winning,sitting,betting,mapping,tapping,letting,bidding,hitting,tanning,netting,popping,fitting,capping,lapping,barring,banning,vetting,topping,rotting,tipping,potting,wetting,pitting,dipping,budding,hemming,pinning,jetting,kidding,padding,podding,sipping,wedding,bedding,donning,warring,penning,gutting,cueing,wadding,petting,ripping,napping,matting,tinning,binning,dimming,hopping,mopping,nodding,panning,rapping,ridding,sinning\xa64:selling,falling,calling,waiting,editing,telling,rolling,heating,boating,hanging,beating,coating,singing,tolling,felling,polling,discing,seating,voiding,gelling,yelling,baiting,reining,ruining,seeking,spanning,stepping,knitting,emitting,slipping,quitting,dialing,omitting,clipping,shutting,skinning,abutting,flipping,trotting,cramming,fretting,suiting\xa65:bringing,treating,spelling,stalling,trolling,expelling,rivaling,wringing,deterring,singeing,befitting,refitting\xa66:enrolling,distilling,scrolling,strolling,caucusing,travelling\xa67:installing,redefining,stencilling,recharging,overeating,benefiting,unraveling,programing\xa69:reprogramming\xa6is:being\xa62e:using,aging,owing\xa63e:making,taking,coming,noting,hiring,filing,coding,citing,doping,baking,coping,hoping,lading,caring,naming,voting,riding,mining,curing,lining,ruling,typing,boring,dining,firing,hiding,piling,taping,waning,baling,boning,faring,honing,wiping,luring,timing,wading,piping,fading,biting,zoning,daring,waking,gaming,raking,ceding,tiring,coking,wining,joking,paring,gaping,poking,pining,coring,liming,toting,roping,wiring,aching\xa64e:writing,storing,eroding,framing,smoking,tasting,wasting,phoning,shaking,abiding,braking,flaking,pasting,priming,shoring,sloping,withing,hinging\xa65e:defining,refining,renaming,swathing,fringing,reciting\xa61ie:dying,tying,lying,vying\xa67e:sunbathing"},ake={fwd:"1:mt\xa62:llen\xa63:iven,aken\xa6:ne\xa6y:in",both:"1:wn\xa62:me,aten\xa63:seen,bidden,isen\xa64:roven,asten\xa63l:pilt\xa63d:uilt\xa62e:itten\xa61im:wum\xa61eak:poken\xa61ine:hone\xa61ose:osen\xa61in:gun\xa61ake:woken\xa6ear:orn\xa6eal:olen\xa6eeze:ozen\xa6et:otten\xa6ink:unk\xa6ing:ung",rev:"2:un\xa6oken:eak\xa6ought:eek\xa6oven:eave\xa61ne:o\xa61own:ly\xa61den:de\xa61in:ay\xa62t:am\xa62n:ee\xa63en:all\xa64n:rive,sake,take\xa65n:rgive",ex:"2:been\xa63:seen,run\xa64:given,taken\xa65:shaken\xa62eak:broken\xa61ive:dove\xa62y:flown\xa63e:hidden,ridden\xa61eek:sought\xa61ake:woken\xa61eave:woven"},ike={fwd:"1:oes\xa61ve:as",both:"1:xes\xa62:zzes,ches,shes,sses\xa63:iases\xa62y:llies,plies\xa61y:cies,bies,ties,vies,nies,pies,dies,ries,fies\xa6:s",rev:"1ies:ly\xa62es:us,go,do\xa63es:cho,eto",ex:"2:does,goes\xa63:gasses\xa65:focuses\xa6is:are\xa63y:relies\xa62y:flies\xa62ve:has"},ske={fwd:"1st:e\xa61est:l,m,f,s\xa61iest:cey\xa62est:or,ir\xa63est:ver",both:"4:east\xa65:hwest\xa65lest:erful\xa64est:weet,lgar,tter,oung\xa64most:uter\xa63est:ger,der,rey,iet,ong,ear\xa63test:lat\xa63most:ner\xa62est:pt,ft,nt,ct,rt,ht\xa62test:it\xa62gest:ig\xa61est:b,k,n,p,h,d,w\xa6iest:y",rev:"1:ttest,nnest,yest\xa62:sest,stest,rmest,cest,vest,lmest,olest,ilest,ulest,ssest,imest,uest\xa63:rgest,eatest,oorest,plest,allest,urest,iefest,uelest,blest,ugest,amest,yalest,ealest,illest,tlest,itest\xa64:cerest,eriest,somest,rmalest,ndomest,motest,uarest,tiffest\xa65:leverest,rangest\xa6ar:urthest\xa63ey:riciest",ex:"best:good\xa6worst:bad\xa65est:great\xa64est:fast,full,fair,dull\xa63test:hot,wet,fat\xa64nest:thin\xa61urthest:far\xa63est:gay,shy,ill\xa64test:neat\xa64st:late,wide,fine,safe,cute,fake,pale,rare,rude,sore,ripe,dire\xa66st:severe"},lke={fwd:"1:tistic,eable,lful,sful,ting,tty\xa62:onate,rtable,geous,ced,seful,ctful\xa63:ortive,ented\xa6arity:ear\xa6y:etic\xa6fulness:begone\xa61ity:re\xa61y:tiful,gic\xa62ity:ile,imous,ilous,ime\xa62ion:ated\xa62eness:iving\xa62y:trious\xa62ation:iring\xa62tion:vant\xa63ion:ect\xa63ce:mant,mantic\xa63tion:irable\xa63y:est,estic\xa63m:mistic,listic\xa63ess:ning\xa64n:utious\xa64on:rative,native,vative,ective\xa64ce:erant",both:"1:king,wing\xa62:alous,ltuous,oyful,rdous\xa63:gorous,ectable,werful,amatic\xa64:oised,usical,agical,raceful,ocused,lined,ightful\xa65ness:stful,lding,itous,nuous,ulous,otous,nable,gious,ayful,rvous,ntous,lsive,peful,entle,ciful,osive,leful,isive,ncise,reful,mious\xa65ty:ivacious\xa65ties:ubtle\xa65ce:ilient,adiant,atient\xa65cy:icient\xa65sm:gmatic\xa65on:sessive,dictive\xa65ity:pular,sonal,eative,entic\xa65sity:uminous\xa65ism:conic\xa65nce:mperate\xa65ility:mitable\xa65ment:xcited\xa65n:bitious\xa64cy:brant,etent,curate\xa64ility:erable,acable,icable,ptable\xa64ty:nacious,aive,oyal,dacious\xa64n:icious\xa64ce:vient,erent,stent,ndent,dient,quent,ident\xa64ness:adic,ound,hing,pant,sant,oing,oist,tute\xa64icity:imple\xa64ment:fined,mused\xa64ism:otic\xa64ry:dantic\xa64ity:tund,eral\xa64edness:hand\xa64on:uitive\xa64lity:pitable\xa64sm:eroic,namic\xa64sity:nerous\xa63th:arm\xa63ility:pable,bable,dable,iable\xa63cy:hant,nant,icate\xa63ness:red,hin,nse,ict,iet,ite,oud,ind,ied,rce\xa63ion:lute\xa63ity:ual,gal,volous,ial\xa63ce:sent,fensive,lant,gant,gent,lent,dant\xa63on:asive\xa63m:fist,sistic,iastic\xa63y:terious,xurious,ronic,tastic\xa63ur:amorous\xa63e:tunate\xa63ation:mined\xa63sy:rteous\xa63ty:ain\xa63ry:ave\xa63ment:azed\xa62ness:de,on,ue,rn,ur,ft,rp,pe,om,ge,rd,od,ay,ss,er,ll,oy,ap,ht,ld,ad,rt\xa62inousness:umous\xa62ity:neous,ene,id,ane\xa62cy:bate,late\xa62ation:ized\xa62ility:oble,ible\xa62y:odic\xa62e:oving,aring\xa62s:ost\xa62itude:pt\xa62dom:ee\xa62ance:uring\xa62tion:reet\xa62ion:oted\xa62sion:ending\xa62liness:an\xa62or:rdent\xa61th:ung\xa61e:uable\xa61ness:w,h,k,f\xa61ility:mble\xa61or:vent\xa61ement:ging\xa61tiquity:ncient\xa61ment:hed\xa6verty:or\xa6ength:ong\xa6eat:ot\xa6pth:ep\xa6iness:y",rev:"",ex:"5:forceful,humorous\xa68:charismatic\xa613:understanding\xa65ity:active\xa611ness:adventurous,inquisitive,resourceful\xa68on:aggressive,automatic,perceptive\xa67ness:amorous,fatuous,furtive,ominous,serious\xa65ness:ample,sweet\xa612ness:apprehensive,cantankerous,contemptuous,ostentatious\xa613ness:argumentative,conscientious\xa69ness:assertive,facetious,imperious,inventive,oblivious,rapacious,receptive,seditious,whimsical\xa610ness:attractive,expressive,impressive,loquacious,salubrious,thoughtful\xa63edom:boring\xa64ness:calm,fast,keen,tame\xa68ness:cheerful,gracious,specious,spurious,timorous,unctuous\xa65sity:curious\xa69ion:deliberate\xa68ion:desperate\xa66e:expensive\xa67ce:fragrant\xa63y:furious\xa69ility:ineluctable\xa66ism:mystical\xa68ity:physical,proactive,sensitive,vertical\xa65cy:pliant\xa67ity:positive\xa69ity:practical\xa612ism:professional\xa66ce:prudent\xa63ness:red\xa66cy:vagrant\xa63dom:wise"},uke=/^([0-9]+)/,cke=function(e){let t=function(e){let t={};return e.split("\xa6").forEach((e=>{let[n,r]=e.split(":");r=(r||"").split(","),r.forEach((e=>{t[e]=n}))})),t}(e);return Object.keys(t).reduce(((e,n)=>(e[n]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t=String(t);let n=t.match(uke);if(null===n)return t;let r=Number(n[1])||0;return e.substring(0,r)+t.replace(uke,"")}(n,t[n]),e)),{})},dke=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"string"===typeof e&&(e=JSON.parse(e)),e.fwd=cke(e.fwd||""),e.both=cke(e.both||""),e.rev=cke(e.rev||""),e.ex=cke(e.ex||""),e},hke=function(e){return Object.entries(e).reduce(((e,t)=>(e[t[1]]=t[0],e)),{})},pke=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{reversed:!0,both:hke(e.both),ex:hke(e.ex),fwd:e.rev||{}}},fke=dke({fwd:"1:tted,wed,gged,nned,een,rred,pped,yed,bbed,oed,dded,rd,wn,mmed\xa62:eed,nded,et,hted,st,oled,ut,emed,eled,lded,ken,rt,nked,apt,ant,eped,eked\xa63:eared,eat,eaded,nelled,ealt,eeded,ooted,eaked,eaned,eeted,mited,bid,uit,ead,uited,ealed,geted,velled,ialed,belled\xa64:ebuted,hined,comed\xa6y:ied\xa6ome:ame\xa6ear:ore\xa6ind:ound\xa6ing:ung,ang\xa6ep:pt\xa6ink:ank,unk\xa6ig:ug\xa6all:ell\xa6ee:aw\xa6ive:ave\xa6eeze:oze\xa6old:eld\xa6ave:ft\xa6ake:ook\xa6ell:old\xa6ite:ote\xa6ide:ode\xa6ine:one\xa6in:un,on\xa6eal:ole\xa6im:am\xa6ie:ay\xa6and:ood\xa61ise:rose\xa61eak:roke\xa61ing:rought\xa61ive:rove\xa61el:elt\xa61id:bade\xa61et:got\xa61y:aid\xa61it:sat\xa63e:lid\xa63d:pent",both:"1:aed,fed,xed,hed\xa62:sged,xted,wled,rped,lked,kied,lmed,lped,uped,bted,rbed,rked,wned,rled,mped,fted,mned,mbed,zzed,omed,ened,cked,gned,lted,sked,ued,zed,nted,ered,rted,rmed,ced,sted,rned,ssed,rded,pted,ved,cted\xa63:cled,eined,siped,ooned,uked,ymed,jored,ouded,ioted,oaned,lged,asped,iged,mured,oided,eiled,yped,taled,moned,yled,lit,kled,oaked,gled,naled,fled,uined,oared,valled,koned,soned,aided,obed,ibed,meted,nicked,rored,micked,keted,vred,ooped,oaded,rited,aired,auled,filled,ouled,ooded,ceted,tolled,oited,bited,aped,tled,vored,dled,eamed,nsed,rsed,sited,owded,pled,sored,rged,osed,pelled,oured,psed,oated,loned,aimed,illed,eured,tred,ioned,celled,bled,wsed,ooked,oiled,itzed,iked,iased,onged,ased,ailed,uned,umed,ained,auded,nulled,ysed,eged,ised,aged,oined,ated,used,dged,doned\xa64:ntied,efited,uaked,caded,fired,roped,halled,roked,himed,culed,tared,lared,tuted,uared,routed,pited,naked,miled,houted,helled,hared,cored,caled,tired,peated,futed,ciled,called,tined,moted,filed,sided,poned,iloted,honed,lleted,huted,ruled,cured,named,preted,vaded,sured,talled,haled,peded,gined,nited,uided,ramed,feited,laked,gured,ctored,unged,pired,cuted,voked,eloped,ralled,rined,coded,icited,vided,uaded,voted,mined,sired,noted,lined,nselled,luted,jured,fided,puted,piled,pared,olored,cided,hoked,enged,tured,geoned,cotted,lamed,uiled,waited,udited,anged,luded,mired,uired,raded\xa65:modelled,izzled,eleted,umpeted,ailored,rseded,treated,eduled,ecited,rammed,eceded,atrolled,nitored,basted,twined,itialled,ncited,gnored,ploded,xcited,nrolled,namelled,plored,efeated,redited,ntrolled,nfined,pleted,llided,lcined,eathed,ibuted,lloted,dhered,cceded\xa63ad:sled\xa62aw:drew\xa62ot:hot\xa62ke:made\xa62ow:hrew,grew\xa62ose:hose\xa62d:ilt\xa62in:egan\xa61un:ran\xa61ink:hought\xa61ick:tuck\xa61ike:ruck\xa61eak:poke,nuck\xa61it:pat\xa61o:did\xa61ow:new\xa61ake:woke\xa6go:went",rev:"3:rst,hed,hut,cut,set\xa64:tbid\xa65:dcast,eread,pread,erbid\xa6ought:uy,eek\xa61ied:ny,ly,dy,ry,fy,py,vy,by,ty,cy\xa61ung:ling,ting,wing\xa61pt:eep\xa61ank:rink\xa61ore:bear,wear\xa61ave:give\xa61oze:reeze\xa61ound:rind,wind\xa61ook:take,hake\xa61aw:see\xa61old:sell\xa61ote:rite\xa61ole:teal\xa61unk:tink\xa61am:wim\xa61ay:lie\xa61ood:tand\xa61eld:hold\xa62d:he,ge,re,le,leed,ne,reed,be,ye,lee,pe,we\xa62ed:dd,oy,or,ey,gg,rr,us,ew,to\xa62ame:ecome,rcome\xa62ped:ap\xa62ged:ag,og,ug,eg\xa62bed:ub,ab,ib,ob\xa62lt:neel\xa62id:pay\xa62ang:pring\xa62ove:trive\xa62med:um\xa62ode:rride\xa62at:ysit\xa63ted:mit,hat,mat,lat,pot,rot,bat\xa63ed:low,end,tow,und,ond,eem,lay,cho,dow,xit,eld,ald,uld,law,lel,eat,oll,ray,ank,fin,oam,out,how,iek,tay,haw,ait,vet,say,cay,bow\xa63d:ste,ede,ode,ete,ree,ude,ame,oke,ote,ime,ute,ade\xa63red:lur,cur,pur,car\xa63ped:hop,rop,uip,rip,lip,tep,top\xa63ded:bed,rod,kid\xa63ade:orbid\xa63led:uel\xa63ned:lan,can,kin,pan,tun\xa63med:rim,lim\xa64ted:quit,llot\xa64ed:pear,rrow,rand,lean,mand,anel,pand,reet,link,abel,evel,imit,ceed,ruit,mind,peal,veal,hool,head,pell,well,mell,uell,band,hear,weak\xa64led:nnel,qual,ebel,ivel\xa64red:nfer,efer,sfer\xa64n:sake,trew\xa64d:ntee\xa64ded:hred\xa64ned:rpin\xa65ed:light,nceal,right,ndear,arget,hread,eight,rtial,eboot\xa65d:edite,nvite\xa65ted:egret\xa65led:ravel",ex:"2:been,upped\xa63:added,aged,aided,aimed,aired,bid,died,dyed,egged,erred,eyed,fit,gassed,hit,lied,owed,pent,pied,tied,used,vied,oiled,outed,banned,barred,bet,canned,cut,dipped,donned,ended,feed,inked,jarred,let,manned,mowed,netted,padded,panned,pitted,popped,potted,put,set,sewn,sowed,tanned,tipped,topped,vowed,weed,bowed,jammed,binned,dimmed,hopped,mopped,nodded,pinned,rigged,sinned,towed,vetted\xa64:ached,baked,baled,boned,bored,called,caned,cared,ceded,cited,coded,cored,cubed,cured,dared,dined,edited,exited,faked,fared,filed,fined,fired,fuelled,gamed,gelled,hired,hoped,joked,lined,mined,named,noted,piled,poked,polled,pored,pulled,reaped,roamed,rolled,ruled,seated,shed,sided,timed,tolled,toned,voted,waited,walled,waned,winged,wiped,wired,zoned,yelled,tamed,lubed,roped,faded,mired,caked,honed,banged,culled,heated,raked,welled,banded,beat,cast,cooled,cost,dealt,feared,folded,footed,handed,headed,heard,hurt,knitted,landed,leaked,leapt,linked,meant,minded,molded,neared,needed,peaked,plodded,plotted,pooled,quit,read,rooted,sealed,seeded,seeped,shipped,shunned,skimmed,slammed,sparred,stemmed,stirred,suited,thinned,twinned,swayed,winked,dialed,abutted,blotted,fretted,healed,heeded,peeled,reeled\xa65:basted,cheated,equalled,eroded,exiled,focused,opined,pleated,primed,quoted,scouted,shored,sloped,smoked,sniped,spelled,spouted,routed,staked,stored,swelled,tasted,treated,wasted,smelled,dwelled,honored,prided,quelled,eloped,scared,coveted,sweated,breaded,cleared,debuted,deterred,freaked,modeled,pleaded,rebutted,speeded\xa66:anchored,defined,endured,impaled,invited,refined,revered,strolled,cringed,recast,thrust,unfolded\xa67:authored,combined,competed,conceded,convened,excreted,extruded,redefined,restored,secreted,rescinded,welcomed\xa68:expedited,infringed\xa69:interfered,intervened,persevered\xa610:contravened\xa6eat:ate\xa6is:was\xa6go:went\xa6are:were\xa63d:bent,lent,rent,sent\xa63e:bit,fled,hid,lost\xa63ed:bled,bred\xa62ow:blew,grew\xa61uy:bought\xa62tch:caught\xa61o:did\xa61ive:dove,gave\xa62aw:drew\xa62ed:fed\xa62y:flew,laid,paid,said\xa61ight:fought\xa61et:got\xa62ve:had\xa61ang:hung\xa62ad:led\xa62ght:lit\xa62ke:made\xa62et:met\xa61un:ran\xa61ise:rose\xa61it:sat\xa61eek:sought\xa61each:taught\xa61ake:woke,took\xa61eave:wove\xa62ise:arose\xa61ear:bore,tore,wore\xa61ind:bound,found,wound\xa62eak:broke\xa62ing:brought,wrung\xa61ome:came\xa62ive:drove\xa61ig:dug\xa61all:fell\xa62el:felt\xa64et:forgot\xa61old:held\xa62ave:left\xa61ing:rang,sang\xa61ide:rode\xa61ink:sank\xa61ee:saw\xa62ine:shone\xa64e:slid\xa61ell:sold,told\xa64d:spent\xa62in:spun\xa61in:won"}),mke=dke(ike),gke=dke(oke),vke=dke(ake),bke=pke(fke),yke=pke(mke),wke=pke(gke),xke=pke(vke),kke=dke(rke),Cke=dke(ske),Ske={fromPast:fke,fromPresent:mke,fromGerund:gke,fromParticiple:vke,toPast:bke,toPresent:yke,toGerund:wke,toParticiple:xke,toComparative:kke,toSuperlative:Cke,fromComparative:pke(kke),fromSuperlative:pke(Cke),adjToNoun:dke(lke)},Eke=["academy","administration","agence","agences","agencies","agency","airlines","airways","army","assoc","associates","association","assurance","authority","autorite","aviation","bank","banque","board","boys","brands","brewery","brotherhood","brothers","bureau","cafe","co","caisse","capital","care","cathedral","center","centre","chemicals","choir","chronicle","church","circus","clinic","clinique","club","co","coalition","coffee","collective","college","commission","committee","communications","community","company","comprehensive","computers","confederation","conference","conseil","consulting","containers","corporation","corps","corp","council","crew","data","departement","department","departments","design","development","directorate","division","drilling","education","eglise","electric","electricity","energy","ensemble","enterprise","enterprises","entertainment","estate","etat","faculty","faction","federation","financial","fm","foundation","fund","gas","gazette","girls","government","group","guild","herald","holdings","hospital","hotel","hotels","inc","industries","institut","institute","institutes","insurance","international","interstate","investment","investments","investors","journal","laboratory","labs","llc","ltd","limited","machines","magazine","management","marine","marketing","markets","media","memorial","ministere","ministry","military","mobile","motor","motors","musee","museum","news","observatory","office","oil","optical","orchestra","organization","partners","partnership","petrol","petroleum","pharmacare","pharmaceutical","pharmaceuticals","pizza","plc","police","politburo","polytechnic","post","power","press","productions","quartet","radio","reserve","resources","restaurant","restaurants","savings","school","securities","service","services","societe","subsidiary","society","sons","subcommittee","syndicat","systems","telecommunications","telegraph","television","times","tribunal","tv","union","university","utilities","workers"].reduce(((e,t)=>(e[t]=!0,e)),{}),Nke=["atoll","basin","bay","beach","bluff","bog","camp","canyon","canyons","cape","cave","caves","cliffs","coast","cove","coves","crater","crossing","creek","desert","dune","dunes","downs","estates","escarpment","estuary","falls","fjord","fjords","forest","forests","glacier","gorge","gorges","grove","gulf","gully","highland","heights","hollow","hill","hills","inlet","island","islands","isthmus","junction","knoll","lagoon","lake","lakeshore","marsh","marshes","mount","mountain","mountains","narrows","peninsula","plains","plateau","pond","rapids","ravine","reef","reefs","ridge","river","rivers","sandhill","shoal","shore","shoreline","shores","strait","straits","springs","stream","swamp","tombolo","trail","trails","trench","valley","vallies","village","volcano","waterfall","watershed","wetland","woods","acres","burough","county","district","municipality","prefecture","province","region","reservation","state","territory","borough","metropolis","downtown","uptown","midtown","city","town","township","hamlet","country","kingdom","enclave","neighbourhood","neighborhood","kingdom","ward","zone","airport","amphitheater","arch","arena","auditorium","bar","barn","basilica","battlefield","bridge","building","castle","centre","coliseum","cineplex","complex","dam","farm","field","fort","garden","gardens","gymnasium","hall","house","levee","library","manor","memorial","monument","museum","gallery","palace","pillar","pits","plantation","playhouse","quarry","sportsfield","sportsplex","stadium","terrace","terraces","theater","tower","park","parks","site","ranch","raceway","sportsplex","ave","st","street","rd","road","lane","landing","crescent","cr","way","tr","terrace","avenue"].reduce(((e,t)=>(e[t]=!0,e)),{}),Ike=[[/([^v])ies$/i,"$1y"],[/(ise)s$/i,"$1"],[/(kn|[^o]l|w)ives$/i,"$1ife"],[/^((?:ca|e|ha|(?:our|them|your)?se|she|wo)l|lea|loa|shea|thie)ves$/i,"$1f"],[/^(dwar|handkerchie|hoo|scar|whar)ves$/i,"$1f"],[/(antenn|formul|nebul|vertebr|vit)ae$/i,"$1a"],[/(octop|vir|radi|nucle|fung|cact|stimul)(i)$/i,"$1us"],[/(buffal|tomat|tornad)(oes)$/i,"$1o"],[/(ause)s$/i,"$1"],[/(ease)s$/i,"$1"],[/(ious)es$/i,"$1"],[/(ouse)s$/i,"$1"],[/(ose)s$/i,"$1"],[/(..ase)s$/i,"$1"],[/(..[aeiu]s)es$/i,"$1"],[/(vert|ind|cort)(ices)$/i,"$1ex"],[/(matr|append)(ices)$/i,"$1ix"],[/([xo]|ch|ss|sh)es$/i,"$1"],[/men$/i,"man"],[/(n)ews$/i,"$1ews"],[/([ti])a$/i,"$1um"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/(s)eries$/i,"$1eries"],[/(m)ovies$/i,"$1ovie"],[/(cris|ax|test)es$/i,"$1is"],[/(alias|status)es$/i,"$1"],[/(ss)$/i,"$1"],[/(ic)s$/i,"$1"],[/s$/i,""]],$ke=function(e,t){const{irregularPlurals:n}=t.two;let r=(o=n,Object.keys(o).reduce(((e,t)=>(e[o[t]]=t,e)),{}));var o;if(r.hasOwnProperty(e))return r[e];for(let a=0;a<Ike.length;a++)if(!0===Ike[a][0].test(e))return e=e.replace(Ike[a][0],Ike[a][1]);return e},Tke={toPlural:Pwe,toSingular:$ke,all:function(e,t){let n=[e],r=Pwe(e,t);r!==e&&n.push(r);let o=$ke(e,t);return o!==e&&n.push(o),n}},Ake=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.hasOwnProperty(e)?t[e]:null}(e,t.ex);return n=n||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let n=0;n<t.length;n+=1)if(e.endsWith(t[n]))return e;return null}(e,t.same),n=n||function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=t||{};for(let r=e.length-1;r>=1;r-=1){let o=e.length-r,a=e.substring(o,e.length);if(!0===t.hasOwnProperty(a))return e.slice(0,o)+t[a];if(!0===n.hasOwnProperty(a))return e.slice(0,o)+n[a]}return t.hasOwnProperty("")?e+t[""]:n.hasOwnProperty("")?e+n[""]:null}(e,t.fwd,t.both),n=n||e,n};let Oke={Gerund:["ing"],Actor:["erer"],Infinitive:["ate","ize","tion","rify","then","ress","ify","age","nce","ect","ise","ine","ish","ace","ash","ure","tch","end","ack","and","ute","ade","ock","ite","ase","ose","use","ive","int","nge","lay","est","ain","ant","ent","eed","er","le","unk","ung","upt","en"],PastTense:["ept","ed","lt","nt","ew","ld"],PresentTense:["rks","cks","nks","ngs","mps","tes","zes","ers","les","acks","ends","ands","ocks","lays","eads","lls","els","ils","ows","nds","ays","ams","ars","ops","ffs","als","urs","lds","ews","ips","es","ts","ns"],Participle:["ken","wn"]};Oke=Object.keys(Oke).reduce(((e,t)=>(Oke[t].forEach((n=>e[n]=t)),e)),{});const Rke=Oke,Pke=function(e){let t=e.substring(e.length-3);if(!0===Rke.hasOwnProperty(t))return Rke[t];let n=e.substring(e.length-2);return!0===Rke.hasOwnProperty(n)?Rke[n]:"s"===e.substring(e.length-1)?"PresentTense":null},Dke={are:"be",were:"be",been:"be",is:"be",am:"be",was:"be",be:"be",being:"be"},Fke=function(e,t,n){const{fromPast:r,fromPresent:o,fromGerund:a,fromParticiple:i}=t.two.models;let{prefix:s,verb:l,particle:u}=function(e,t){let n="",r={};t.one&&t.one.prefixes&&(r=t.one.prefixes);let[o,a]=e.split(/ /);return a&&!0===r[o]&&(n=o,o=a,a=""),{prefix:n,verb:o,particle:a}}(e,t),c="";if(n||(n=Pke(e)),Dke.hasOwnProperty(e))c=Dke[e];else if("Participle"===n)c=Ake(l,i);else if("PastTense"===n)c=Ake(l,r);else if("PresentTense"===n)c=Ake(l,o);else{if("Gerund"!==n)return e;c=Ake(l,a)}return u&&(c+=" "+u),s&&(c=s+" "+c),c},_ke=function(e,t){const{toPast:n,toPresent:r,toGerund:o,toParticiple:a}=t.two.models;if("be"===e)return{Infinitive:e,Gerund:"being",PastTense:"was",PresentTense:"is"};let[i,s]=(e=>/ /.test(e)?e.split(/ /):[e,""])(e),l={Infinitive:i,PastTense:Ake(i,n),PresentTense:Ake(i,r),Gerund:Ake(i,o),FutureTense:"will "+i},u=Ake(i,a);if(u!==e&&u!==l.PastTense){let n=t.one.lexicon||{};"Participle"!==n[u]&&"Adjective"!==n[u]||("play"===e&&(u="played"),l.Participle=u)}return s&&Object.keys(l).forEach((e=>{l[e]+=" "+s})),l},Mke={toInfinitive:Fke,conjugate:_ke,all:function(e,t){let n=_ke(e,t);return delete n.FutureTense,Object.values(n).filter((e=>e))}},zke=function(e,t){const n=t.two.models.toSuperlative;return Ake(e,n)},Lke=function(e,t){const n=t.two.models.toComparative;return Ake(e,n)},Bke=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=e.length;for(let r=n<=6?n-1:6;r>=1;r-=1){let o=e.substring(n-r,e.length);if(!0===t[o.length].hasOwnProperty(o)){return e.slice(0,n-r)+t[o.length][o]}}return null},jke="ically",Hke=new Set(["analyt"+jke,"chem"+jke,"class"+jke,"clin"+jke,"crit"+jke,"ecolog"+jke,"electr"+jke,"empir"+jke,"frant"+jke,"grammat"+jke,"ident"+jke,"ideolog"+jke,"log"+jke,"mag"+jke,"mathemat"+jke,"mechan"+jke,"med"+jke,"method"+jke,"method"+jke,"mus"+jke,"phys"+jke,"phys"+jke,"polit"+jke,"pract"+jke,"rad"+jke,"satir"+jke,"statist"+jke,"techn"+jke,"technolog"+jke,"theoret"+jke,"typ"+jke,"vert"+jke,"whims"+jke]),Vke=[null,{},{ly:""},{ily:"y",bly:"ble",ply:"ple"},{ally:"al",rply:"rp"},{ually:"ual",ially:"ial",cally:"cal",eally:"eal",rally:"ral",nally:"nal",mally:"mal",eeply:"eep",eaply:"eap"},{ically:"ic"}],Wke=new Set(["early","only","hourly","daily","weekly","monthly","yearly","mostly","duly","unduly","especially","undoubtedly","conversely","namely","exceedingly","presumably","accordingly","overly","best","latter","little","long","low"]),Gke={wholly:"whole",fully:"full",truly:"true",gently:"gentle",singly:"single",customarily:"customary",idly:"idle",publically:"public",quickly:"quick",superbly:"superb",cynically:"cynical",well:"good"},Uke=[null,{y:"ily"},{ly:"ly",ic:"ically"},{ial:"ially",ual:"ually",tle:"tly",ble:"bly",ple:"ply",ary:"arily"},{},{},{}],Kke={cool:"cooly",whole:"wholly",full:"fully",good:"well",idle:"idly",public:"publicly",single:"singly",special:"especially"},qke=function(e){if(Kke.hasOwnProperty(e))return Kke[e];let t=Bke(e,Uke);return t||(t=e+"ly"),t},Xke={toSuperlative:zke,toComparative:Lke,toAdverb:qke,toNoun:function(e,t){const n=t.two.models.adjToNoun;return Ake(e,n)},fromAdverb:function(e){return e.endsWith("ly")?Hke.has(e)?e.replace(/ically/,"ical"):Wke.has(e)?null:Gke.hasOwnProperty(e)?Gke[e]:Bke(e,Vke)||e:null},fromSuperlative:function(e,t){const n=t.two.models.fromSuperlative;return Ake(e,n)},fromComparative:function(e,t){const n=t.two.models.fromComparative;return Ake(e,n)},all:function(e,t){let n=[e];return n.push(zke(e,t)),n.push(Lke(e,t)),n.push(qke(e)),n=n.filter((e=>e)),n=new Set(n),Array.from(n)}},Jke={noun:Tke,verb:Mke,adjective:Xke},Yke={Singular:(e,t,n,r)=>{let o=r.one.lexicon,a=n.two.transform.noun.toPlural(e,r);o[a]||(t[a]=t[a]||"Plural")},Actor:(e,t,n,r)=>{let o=r.one.lexicon,a=n.two.transform.noun.toPlural(e,r);o[a]||(t[a]=t[a]||["Plural","Actor"])},Comparable:(e,t,n,r)=>{let o=r.one.lexicon,{toSuperlative:a,toComparative:i}=n.two.transform.adjective,s=a(e,r);o[s]||(t[s]=t[s]||"Superlative");let l=i(e,r);o[l]||(t[l]=t[l]||"Comparative"),t[e]="Adjective"},Demonym:(e,t,n,r)=>{let o=n.two.transform.noun.toPlural(e,r);t[o]=t[o]||["Demonym","Plural"]},Infinitive:(e,t,n,r)=>{let o=r.one.lexicon,a=n.two.transform.verb.conjugate(e,r);Object.entries(a).forEach((e=>{o[e[1]]||t[e[1]]||"FutureTense"===e[0]||(t[e[1]]=e[0])}))},PhrasalVerb:(e,t,n,r)=>{let o=r.one.lexicon;t[e]=["PhrasalVerb","Infinitive"];let a=r.one._multiCache,[i,s]=e.split(" ");o[i]||(t[i]=t[i]||"Infinitive");let l=n.two.transform.verb.conjugate(i,r);delete l.FutureTense,Object.entries(l).forEach((e=>{if("Actor"===e[0]||""===e[1])return;t[e[1]]||o[e[1]]||(t[e[1]]=e[0]),a[e[1]]=2;let n=e[1]+" "+s;t[n]=t[n]||[e[0],"PhrasalVerb"]}))},Multiple:(e,t)=>{t[e]=["Multiple","Cardinal"],t[e+"th"]=["Multiple","Ordinal"],t[e+"ths"]=["Multiple","Fraction"]},Cardinal:(e,t)=>{t[e]=["TextValue","Cardinal"]},Ordinal:(e,t)=>{t[e]=["TextValue","Ordinal"],t[e+"s"]=["TextValue","Fraction"]},Place:(e,t)=>{t[e]=["Place","ProperNoun"]},Region:(e,t)=>{t[e]=["Region","ProperNoun"]}},Qke=function(e,t){const{methods:n,model:r}=t;let o={},a={};return Object.keys(e).forEach((t=>{let i=e[t],s=(t=(t=t.toLowerCase().trim()).replace(/'s\b/,"")).split(/ /);s.length>1&&(void 0===a[s[0]]||s.length>a[s[0]])&&(a[s[0]]=s.length),!0===Yke.hasOwnProperty(i)&&Yke[i](t,o,n,r),o[t]=o[t]||i})),delete o[""],delete o.null,delete o[" "],{lex:o,_multi:a}},Zke=function(e){const t=/[,:;]/;let n=[];return e.forEach((e=>{let r=0;e.forEach(((o,a)=>{t.test(o.post)&&function(e,t){const n=/^[0-9]+$/;let r=e[t];if(!r)return!1;const o=new Set(["may","april","august","jan"]);if("like"===r.normal||o.has(r.normal))return!1;if(r.tags.has("Place")||r.tags.has("Date"))return!1;if(e[t-1]){let n=e[t-1];if(n.tags.has("Date")||o.has(n.normal))return!1;if(n.tags.has("Adjective")||r.tags.has("Adjective"))return!1}let a=r.normal;return 1!==a.length&&2!==a.length&&4!==a.length||!n.test(a)}(e,a+1)&&(n.push(e.slice(r,a+1)),r=a+1)})),r<e.length&&n.push(e.slice(r,e.length))})),n},eCe={e:["mice","louse","antennae","formulae","nebulae","vertebrae","vitae"],i:["tia","octopi","viri","radii","nuclei","fungi","cacti","stimuli"],n:["men"],t:["feet"]},tCe=new Set(["israelis","menus","logos"]),nCe=["bus","mas","was","ias","xas","vas","cis","lis","nis","ois","ris","sis","tis","xis","aus","cus","eus","fus","gus","ius","lus","nus","das","ous","pus","rus","sus","tus","xus","aos","igos","ados","ogos","'s","ss"],rCe=function(e){if(!e||e.length<=3)return!1;if(tCe.has(e))return!0;let t=e[e.length-1];return eCe.hasOwnProperty(t)?eCe[t].find((t=>e.endsWith(t))):"s"===t&&!nCe.find((t=>e.endsWith(t)))},oCe={two:{quickSplit:Zke,expandLexicon:Qke,transform:Jke,looksPlural:rCe}},aCe=function(e){const{irregularPlurals:t}=e.two,{lexicon:n}=e.one;return Object.entries(t).forEach((e=>{n[e[0]]=n[e[0]]||"Singular",n[e[1]]=n[e[1]]||"Plural"})),e};let iCe={one:{lexicon:{}},two:{models:Ske}};const sCe={"Actor|Verb":"Actor","Adj|Gerund":"Adjective","Adj|Noun":"Adjective","Adj|Past":"Adjective","Adj|Present":"Adjective","Noun|Verb":"Singular","Noun|Gerund":"Gerund","Person|Noun":"Noun","Person|Date":"Month","Person|Verb":"FirstName","Person|Place":"Person","Person|Adj":"Comparative","Plural|Verb":"Plural","Unit|Noun":"Noun"},lCe=function(e,t){const n={model:t,methods:oCe};let{lex:r,_multi:o}=oCe.two.expandLexicon(e,n);return Object.assign(t.one.lexicon,r),Object.assign(t.one._multiCache,o),t},uCe=function(e,t,n){let r=_ke(e,iCe);t[r.PastTense]=t[r.PastTense]||"PastTense",t[r.Gerund]=t[r.Gerund]||"Gerund",!0===n&&(t[r.PresentTense]=t[r.PresentTense]||"PresentTense")},cCe=function(e,t,n){let r=zke(e,n);t[r]=t[r]||"Superlative";let o=Lke(e,n);t[o]=t[o]||"Comparative"},dCe=function(e,t){let n={};const r=t.one.lexicon;return Object.keys(e).forEach((o=>{const a=e[o];if(n[o]=sCe[a],"Noun|Verb"!==a&&"Person|Verb"!==a&&"Actor|Verb"!==a||uCe(o,r,!1),"Adj|Present"===a&&(uCe(o,r,!0),cCe(o,r,t)),"Person|Adj"===a&&cCe(o,r,t),"Adj|Gerund"===a||"Noun|Gerund"===a){let e=Fke(o,iCe,"Gerund");r[e]||(n[e]="Infinitive")}if("Noun|Gerund"!==a&&"Adj|Noun"!==a&&"Person|Noun"!==a||function(e,t,n){let r=Pwe(e,n);t[r]=t[r]||"Plural"}(o,r,t),"Adj|Past"===a){let e=Fke(o,iCe,"PastTense");r[e]||(n[e]="Infinitive")}})),t=lCe(n,t)},hCe=function(e){return e=function(e,t){return Object.keys(e).forEach((n=>{"Uncountable"===e[n]&&(t.two.uncountable[n]=!0,e[n]="Uncountable")})),t}((e=lCe(e.one.lexicon,e)).one.lexicon,e),e=dCe(e.two.switches,e),e=aCe(e)};let pCe={one:{_multiCache:{},lexicon:Fwe,frozenLex:{"20th century fox":"Organization","7 eleven":"Organization","motel 6":"Organization","excuse me":"Expression","financial times":"Organization","guns n roses":"Organization","la z boy":"Organization","labour party":"Organization","new kids on the block":"Organization","new york times":"Organization","the guess who":"Organization","thin lizzy":"Organization","prime minister":"Actor","free market":"Singular","lay up":"Singular","living room":"Singular","living rooms":"Plural","spin off":"Singular","appeal court":"Uncountable","cold war":"Uncountable","gene pool":"Uncountable","machine learning":"Uncountable","nail polish":"Uncountable","time off":"Uncountable","take part":"Infinitive","bill gates":"Person","doctor who":"Person","dr who":"Person","he man":"Person","iron man":"Person","kid cudi":"Person","run dmc":"Person","rush limbaugh":"Person","snow white":"Person","tiger woods":"Person","brand new":"Adjective","en route":"Adjective","left wing":"Adjective","off guard":"Adjective","on board":"Adjective","part time":"Adjective","right wing":"Adjective","so called":"Adjective","spot on":"Adjective","straight forward":"Adjective","super duper":"Adjective","tip top":"Adjective","top notch":"Adjective","up to date":"Adjective","win win":"Adjective","brooklyn nets":"SportsTeam","chicago bears":"SportsTeam","houston astros":"SportsTeam","houston dynamo":"SportsTeam","houston rockets":"SportsTeam","houston texans":"SportsTeam","minnesota twins":"SportsTeam","orlando magic":"SportsTeam","san antonio spurs":"SportsTeam","san diego chargers":"SportsTeam","san diego padres":"SportsTeam","iron maiden":"ProperNoun","isle of man":"Country","united states":"Country","united states of america":"Country","prince edward island":"Region","cedar breaks":"Place","cedar falls":"Place","point blank":"Adverb","tiny bit":"Adverb","by the time":"Conjunction","no matter":"Conjunction","civil wars":"Plural","credit cards":"Plural","default rates":"Plural","free markets":"Plural","head starts":"Plural","home runs":"Plural","lay ups":"Plural","phone calls":"Plural","press releases":"Plural","record labels":"Plural","soft serves":"Plural","student loans":"Plural","tax returns":"Plural","tv shows":"Plural","video games":"Plural","took part":"PastTense","takes part":"PresentTense","taking part":"Gerund","taken part":"Participle","light bulb":"Noun","rush hour":"Noun","fluid ounce":"Unit","the rolling stones":"Organization"}},two:{irregularPlurals:wwe,models:Ske,suffixPatterns:Mxe,prefixPatterns:jxe,endsWith:Zxe,neighbours:nke,regexNormal:[[/^[\w.]+@[\w.]+\.[a-z]{2,3}$/,"Email"],[/^(https?:\/\/|www\.)+\w+\.[a-z]{2,3}/,"Url","http.."],[/^[a-z0-9./].+\.(com|net|gov|org|ly|edu|info|biz|dev|ru|jp|de|in|uk|br|io|ai)/,"Url",".com"],[/^[PMCE]ST$/,"Timezone","EST"],[/^ma?c'[a-z]{3}/,"LastName","mc'neil"],[/^o'[a-z]{3}/,"LastName","o'connor"],[/^ma?cd[aeiou][a-z]{3}/,"LastName","mcdonald"],[/^(lol)+[sz]$/,"Expression","lol"],[/^wo{2,}a*h?$/,"Expression","wooah"],[/^(hee?){2,}h?$/,"Expression","hehe"],[/^(un|de|re)\\-[a-z\u00C0-\u00FF]{2}/,"Verb","un-vite"],[/^(m|k|cm|km)\/(s|h|hr)$/,"Unit","5 k/m"],[/^(ug|ng|mg)\/(l|m3|ft3)$/,"Unit","ug/L"],[/[^:/]\/\p{Letter}/u,"SlashedTerm","love/hate"]],regexText:[[/^#[\p{Number}_]*\p{Letter}/u,"HashTag"],[/^@\w{2,}$/,"AtMention"],[/^([A-Z]\.){2}[A-Z]?/i,["Acronym","Noun"],"F.B.I"],[/.{3}[lkmnp]in['\u2018\u2019\u201b\u2035\u2032`\xb4]$/,"Gerund","chillin'"],[/.{4}s['\u2018\u2019\u201b\u2035\u2032`\xb4]$/,"Possessive","flanders'"],[/^[\p{Emoji_Presentation}\p{Extended_Pictographic}]/u,"Emoji","emoji-class"]],regexNumbers:[[/^@1?[0-9](am|pm)$/i,"Time","3pm"],[/^@1?[0-9]:[0-9]{2}(am|pm)?$/i,"Time","3:30pm"],[/^'[0-9]{2}$/,"Year"],[/^[012]?[0-9](:[0-5][0-9])(:[0-5][0-9])$/,"Time","3:12:31"],[/^[012]?[0-9](:[0-5][0-9])?(:[0-5][0-9])? ?(am|pm)$/i,"Time","1:12pm"],[/^[012]?[0-9](:[0-5][0-9])(:[0-5][0-9])? ?(am|pm)?$/i,"Time","1:12:31pm"],[/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}/i,"Date","iso-date"],[/^[0-9]{1,4}-[0-9]{1,2}-[0-9]{1,4}$/,"Date","iso-dash"],[/^[0-9]{1,4}\/[0-9]{1,2}\/([0-9]{4}|[0-9]{2})$/,"Date","iso-slash"],[/^[0-9]{1,4}\.[0-9]{1,2}\.[0-9]{1,4}$/,"Date","iso-dot"],[/^[0-9]{1,4}-[a-z]{2,9}-[0-9]{1,4}$/i,"Date","12-dec-2019"],[/^utc ?[+-]?[0-9]+$/,"Timezone","utc-9"],[/^(gmt|utc)[+-][0-9]{1,2}$/i,"Timezone","gmt-3"],[/^[0-9]{3}-[0-9]{4}$/,"PhoneNumber","421-0029"],[/^(\+?[0-9][ -])?[0-9]{3}[ -]?[0-9]{3}-[0-9]{4}$/,"PhoneNumber","1-800-"],[/^[-+]?\p{Currency_Symbol}[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?([kmb]|bn)?\+?$/u,["Money","Value"],"$5.30"],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?\p{Currency_Symbol}\+?$/u,["Money","Value"],"5.30\xa3"],[/^[-+]?[$\xa3]?[0-9]([0-9,.])+(usd|eur|jpy|gbp|cad|aud|chf|cny|hkd|nzd|kr|rub)$/i,["Money","Value"],"$400usd"],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?\+?$/,["Cardinal","NumericValue"],"5,999"],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?(st|nd|rd|r?th)$/,["Ordinal","NumericValue"],"53rd"],[/^\.[0-9]+\+?$/,["Cardinal","NumericValue"],".73th"],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?%\+?$/,["Percent","Cardinal","NumericValue"],"-4%"],[/^\.[0-9]+%$/,["Percent","Cardinal","NumericValue"],".3%"],[/^[0-9]{1,4}\/[0-9]{1,4}(st|nd|rd|th)?s?$/,["Fraction","NumericValue"],"2/3rds"],[/^[0-9.]{1,3}[a-z]{0,2}[-\u2013\u2014][0-9]{1,3}[a-z]{0,2}$/,["Value","NumberRange"],"3-4"],[/^[0-9]{1,2}(:[0-9][0-9])?(am|pm)? ?[-\u2013\u2014] ?[0-9]{1,2}(:[0-9][0-9])?(am|pm)$/,["Time","NumberRange"],"3-4pm"],[/^[0-9.]+([a-z\xb0]{1,4})$/,"NumericValue","9km"]],switches:_we,clues:kxe,uncountable:{},orgWords:Eke,placeWords:Nke}};pCe=hCe(pCe);const fCe=pCe,mCe=function(e,t,n,r){const o=r.methods.one.setTag;if(0===t&&e.length>=3){const t=/:/;if(e[0].post.match(t)){let t=e[1];if(t.tags.has("Value")||t.tags.has("Email")||t.tags.has("PhoneNumber"))return;o([e[0]],"Expression",r,null,"2-punct-colon''")}}},gCe=function(e,t,n,r){const o=r.methods.one.setTag;"-"===e[t].post&&e[t+1]&&o([e[t],e[t+1]],"Hyphenated",r,null,"1-punct-hyphen''")},vCe=/^(under|over|mis|re|un|dis|semi)-?/,bCe=function(e,t,n){const r=n.two.switches;let o=e[t];if(r.hasOwnProperty(o.normal))o.switch=r[o.normal];else if(vCe.test(o.normal)){let e=o.normal.replace(vCe,"");e.length>3&&r.hasOwnProperty(e)&&(o.switch=r[e])}},yCe=function(e,t,n){if(!t||0===t.length)return;if(!0===e.frozen)return;const r="undefined"===typeof process?self.env||{}:{NODE_ENV:"production",PUBLIC_URL:"/websm",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0};r&&r.DEBUG_TAGS&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=e.text||"["+e.implicit+"]";var o;"string"!==typeof t&&t.length>2&&(t=t.slice(0,2).join(", #")+" +"),t="string"!==typeof t?t.join(", #"):t,console.log(` ${(o=r,"\x1b[33m\x1b[3m"+o+"\x1b[0m").padEnd(24)} \x1b[32m\u2192\x1b[0m #${t.padEnd(22)}  ${(e=>"\x1b[3m"+e+"\x1b[0m")(n)}`)}(e,t,n),e.tags=e.tags||new Set,"string"===typeof t?e.tags.add(t):t.forEach((t=>e.tags.add(t)))},wCe=["Acronym","Abbreviation","ProperNoun","Uncountable","Possessive","Pronoun","Activity","Honorific","Month"],xCe=function(e,t,n){let r=e[t],o=Array.from(r.tags);for(let a=0;a<o.length;a+=1)if(n.one.tagSet[o[a]]){let e=n.one.tagSet[o[a]].parents;yCe(r,e,` -inferred by #${o[a]}`)}!function(e){!e.tags.has("Noun")||e.tags.has("Plural")||e.tags.has("Singular")||wCe.find((t=>e.tags.has(t)))||(rCe(e.normal)?yCe(e,"Plural","3-plural-guess"):yCe(e,"Singular","3-singular-guess"))}(r),function(e){let t=e.tags;if(t.has("Verb")&&1===t.size){let t=Pke(e.normal);t&&yCe(e,t,"3-verb-tense-guess")}}(r)},kCe=/^\p{Lu}[\p{Ll}'\u2019]/u,CCe=/[0-9]/,SCe=["Date","Month","WeekDay","Unit","Expression"],ECe=/[IVX]/,NCe=/^[IVXLCDM]{2,}$/,ICe=/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/,$Ce={li:!0,dc:!0,md:!0,dm:!0,ml:!0},TCe=function(e,t,n){let r=e[t];r.index=r.index||[0,0];let o=r.index[1],a=r.text||"";return 0!==o&&!0===kCe.test(a)&&!1===CCe.test(a)?SCe.find((e=>r.tags.has(e)))||r.pre.match(/["']$/)||"the"===r.normal?null:(xCe(e,t,n),r.tags.has("Noun")||r.frozen||r.tags.clear(),yCe(r,"ProperNoun","2-titlecase"),!0):a.length>=2&&NCe.test(a)&&ECe.test(a)&&ICe.test(a)&&!$Ce[r.normal]?(yCe(r,"RomanNumeral","2-xvii"),!0):null},ACe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=e.length;let r=7;n<=r&&(r=n-1);for(let o=r;o>1;o-=1){let r=e.substring(n-o,n);if(!0===t[r.length].hasOwnProperty(r)){return t[r.length][r]}}return null},OCe=function(e,t,n){let r=e[t];if(0===r.tags.size){let e=ACe(r.normal,n.two.suffixPatterns);if(null!==e)return yCe(r,e,"2-suffix"),r.confidence=.7,!0;if(r.implicit&&(e=ACe(r.implicit,n.two.suffixPatterns),null!==e))return yCe(r,e,"2-implicit-suffix"),r.confidence=.7,!0}return null},RCe=/['\u2018\u2019\u201b\u2035\u2032`\xb4]/,PCe=function(e,t){for(let n=0;n<t.length;n+=1)if(!0===t[n][0].test(e))return t[n];return null},DCe=function(e,t,n,r){const o=r.methods.one.setTag;let{regexText:a,regexNormal:i,regexNumbers:s,endsWith:l}=n.two,u=e[t],c=u.machine||u.normal,d=u.text;RCe.test(u.post)&&!RCe.test(u.pre)&&(d+=u.post.trim());let h=PCe(d,a)||PCe(c,i);return!h&&/[0-9]/.test(c)&&(h=PCe(c,s)),h||0!==u.tags.size||(h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=e[e.length-1];if(!0===t.hasOwnProperty(n)){let r=t[n]||[];for(let t=0;t<r.length;t+=1)if(!0===r[t][0].test(e))return r[t]}return null}(c,l)),h?(o([u],h[1],r,null,`2-regex-'${h[2]||h[0]}'`),u.confidence=.6,!0):null},FCe=function(e,t,n){let r=e[t];if(0===r.tags.size){let e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=e.length;let r=7;r>n-3&&(r=n-3);for(let o=r;o>2;o-=1){let n=e.substring(0,o);if(!0===t[n.length].hasOwnProperty(n))return t[n.length][n]}return null}(r.normal,n.two.prefixPatterns);if(null!==e)return yCe(r,e,"2-prefix"),r.confidence=.5,!0}return null},_Ce=new Set(["in","on","by","until","for","to","during","throughout","through","within","before","after","of","this","next","last","circa","around","post","pre","budget","classic","plan","may"]),MCe=function(e){if(!e)return!1;let t=e.normal||e.implicit;return!!_Ce.has(t)||(!!(e.tags.has("Date")||e.tags.has("Month")||e.tags.has("WeekDay")||e.tags.has("Year"))||!!e.tags.has("ProperNoun"))},zCe=function(e){return!!e&&(!!e.tags.has("Ordinal")||(!!(e.tags.has("Cardinal")&&e.normal.length<3)||("is"===e.normal||"was"===e.normal)))},LCe=function(e){return e&&(e.tags.has("Date")||e.tags.has("Month")||e.tags.has("WeekDay")||e.tags.has("Year"))},BCe=function(e,t){const n=e[t];if(n.tags.has("NumericValue")&&n.tags.has("Cardinal")&&4===n.normal.length){let r=Number(n.normal);if(r&&!isNaN(r)&&r>1400&&r<2100){let o=e[t-1],a=e[t+1];if(MCe(o)||MCe(a))return yCe(n,"Year","2-tagYear");if(r>=1920&&r<2025){if(zCe(o)||zCe(a))return yCe(n,"Year","2-tagYear-close");if(LCe(e[t-2])||LCe(e[t+2]))return yCe(n,"Year","2-tagYear-far");if(o&&(o.tags.has("Determiner")||o.tags.has("Possessive"))&&a&&a.tags.has("Noun")&&!a.tags.has("Plural"))return yCe(n,"Year","2-tagYear-noun")}}}return null},jCe=function(e,t,n,r){const o=r.methods.one.setTag,a=e[t],i=["PastTense","PresentTense","Auxiliary","Modal","Particle"];if(a.tags.has("Verb")){i.find((e=>a.tags.has(e)))||o([a],"Infinitive",r,null,"2-verb-type''")}},HCe=/^[A-Z]('s|,)?$/,VCe=/^[A-Z-]+$/,WCe=/^[A-Z]+s$/,GCe=/([A-Z]\.)+[A-Z]?,?$/,UCe=/[A-Z]{2,}('s|,)?$/,KCe=/([a-z]\.)+[a-z]\.?$/,qCe={I:!0,A:!0},XCe={la:!0,ny:!0,us:!0,dc:!0,gb:!0},JCe=function(e,t,n){let r=e[t];return r.tags.has("RomanNumeral")||r.tags.has("Acronym")||r.frozen?null:function(e,t){let n=e.text;if(!1===VCe.test(n)){if(!(n.length>3&&!0===WCe.test(n)))return!1;n=n.replace(/s$/,"")}return!(n.length>5)&&!qCe.hasOwnProperty(n)&&!t.one.lexicon.hasOwnProperty(e.normal)&&(!0===GCe.test(n)||!0===KCe.test(n)||!0===HCe.test(n)||!0===UCe.test(n))}(r,n)?(r.tags.clear(),yCe(r,["Acronym","Noun"],"3-no-period-acronym"),!0===XCe[r.normal]&&yCe(r,"Place","3-place-acronym"),!0===WCe.test(r.text)&&yCe(r,"Plural","3-plural-acronym"),!0):!qCe.hasOwnProperty(r.text)&&HCe.test(r.text)?(r.tags.clear(),yCe(r,["Acronym","Noun"],"3-one-letter-acronym"),!0):r.tags.has("Organization")&&r.text.length<=3?(yCe(r,"Acronym","3-org-acronym"),!0):r.tags.has("Organization")&&VCe.test(r.text)&&r.text.length<=6?(yCe(r,"Acronym","3-titlecase-acronym"),!0):null},YCe=function(e,t){if(!e)return null;let n=t.find((t=>e.normal===t[0]));return n?n[1]:null},QCe=function(e,t){if(!e)return null;let n=t.find((t=>e.tags.has(t[0])));return n?n[1]:null},ZCe=function(e,t,n){const{leftTags:r,leftWords:o,rightWords:a,rightTags:i}=n.two.neighbours;let s=e[t];if(0===s.tags.size){let l=null;if(l=l||YCe(e[t-1],o),l=l||YCe(e[t+1],a),l=l||QCe(e[t-1],r),l=l||QCe(e[t+1],i),l)return yCe(s,l,"3-[neighbour]"),xCe(e,t,n),e[t].confidence=.2,!0}return null},eSe=function(e,t,n){return!!e&&(!e.tags.has("FirstName")&&!e.tags.has("Place")&&(!!(e.tags.has("ProperNoun")||e.tags.has("Organization")||e.tags.has("Acronym"))||!(n||(r=e.text,!/^\p{Lu}[\p{Ll}'\u2019]/u.test(r)))&&(0!==t||e.tags.has("Singular"))));var r},tSe=function(e,t,n,r){const o=n.model.two.orgWords,a=n.methods.one.setTag;let i=e[t];if(!0===o[i.machine||i.normal]&&eSe(e[t-1],t-1,r)){a([e[t]],"Organization",n,null,"3-[org-word]");for(let o=t;o>=0&&eSe(e[o],o,r);o-=1)a([e[o]],"Organization",n,null,"3-[org-word]")}return null},nSe=/'s$/,rSe=new Set(["athletic","city","community","eastern","federal","financial","great","historic","historical","local","memorial","municipal","national","northern","provincial","southern","state","western","spring","pine","sunset","view","oak","maple","spruce","cedar","willow"]),oSe=new Set(["center","centre","way","range","bar","bridge","field","pit"]),aSe=function(e,t,n){if(!e)return!1;let r=e.tags;return!(r.has("Organization")||r.has("Possessive")||nSe.test(e.normal))&&(!(!r.has("ProperNoun")&&!r.has("Place"))||!(n||(o=e.text,!/^\p{Lu}[\p{Ll}'\u2019]/u.test(o)))&&(0!==t||r.has("Singular")));var o},iSe=function(e,t,n,r){const o=n.model.two.placeWords,a=n.methods.one.setTag;let i=e[t],s=i.machine||i.normal;if(!0===o[s]){for(let o=t-1;o>=0;o-=1)if(!rSe.has(e[o].normal)){if(!aSe(e[o],o,r))break;a(e.slice(o,t+1),"Place",n,null,"3-[place-of-foo]")}if(oSe.has(s))return!1;for(let o=t+1;o<e.length;o+=1){if(aSe(e[o],o,r))return a(e.slice(t,o+1),"Place",n,null,"3-[foo-place]"),!0;if("of"!==e[o].normal&&!rSe.has(e[o].normal))break}}return null},sSe=function(e,t,n){let r=!1,o=e[t].tags;(0===o.size||1===o.size&&(o.has("Hyphenated")||o.has("HashTag")||o.has("Prefix")||o.has("SlashedTerm")))&&(r=!0),r&&(yCe(e[t],"Noun","3-[fallback]"),xCe(e,t,n),e[t].confidence=.1)},lSe=/^[A-Z][a-z]/,uSe=(e,t)=>e[t].tags.has("ProperNoun")&&lSe.test(e[t].text)?"Noun":null,cSe=(e,t,n)=>0!==t||e[1]?null:n,dSe={"Adj|Gerund":(e,t)=>uSe(e,t),"Adj|Noun":(e,t)=>uSe(e,t)||function(e,t){return!e[t+1]&&e[t-1]&&e[t-1].tags.has("Determiner")?"Noun":null}(e,t),"Actor|Verb":(e,t)=>uSe(e,t),"Adj|Past":(e,t)=>uSe(e,t),"Adj|Present":(e,t)=>uSe(e,t),"Noun|Gerund":(e,t)=>uSe(e,t),"Noun|Verb":(e,t)=>t>0&&uSe(e,t)||cSe(e,t,"Infinitive"),"Plural|Verb":(e,t)=>uSe(e,t)||cSe(e,t,"PresentTense")||function(e,t,n){return 0===t&&e.length>3?n:null}(e,t,"Plural"),"Person|Noun":(e,t)=>uSe(e,t),"Person|Verb":(e,t)=>0!==t?uSe(e,t):null,"Person|Adj":(e,t)=>0===t&&e.length>1||uSe(e,t)?"Person":null},hSe=dSe,pSe="undefined"===typeof process?self.env||{}:{NODE_ENV:"production",PUBLIC_URL:"/websm",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},fSe=/^(under|over|mis|re|un|dis|semi)-?/,mSe=(e,t)=>{if(!e||!t)return null;let n=e.normal||e.implicit,r=null;return t.hasOwnProperty(n)&&(r=t[n]),r&&pSe.DEBUG_TAGS&&console.log(`\n  \x1b[2m\x1b[3m     \u2193 - '${n}' \x1b[0m`),r},gSe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(!e||!t)return null;let r=Array.from(e.tags).sort(((e,t)=>(n[e]?n[e].parents.length:0)>(n[t]?n[t].parents.length:0)?-1:1)),o=r.find((e=>t[e]));return o&&pSe.DEBUG_TAGS&&console.log(`  \x1b[2m\x1b[3m      \u2193 - '${e.normal||e.implicit}' (#${o})  \x1b[0m`),o=t[o],o},vSe=function(e,t,n){const r=n.model,o=n.methods.one.setTag,{switches:a,clues:i}=r.two,s=e[t];let l=s.normal||s.implicit||"";if(fSe.test(l)&&!a[l]&&(l=l.replace(fSe,"")),s.switch){let a=s.switch;if(s.tags.has("Acronym")||s.tags.has("PhrasalVerb"))return;let u=function(e,t,n,r){if(!n)return null;const o="also"!==e[t-1]?.text?t-1:Math.max(0,t-2),a=r.one.tagSet;let i=mSe(e[t+1],n.afterWords);return i=i||mSe(e[o],n.beforeWords),i=i||gSe(e[o],n.beforeTags,a),i=i||gSe(e[t+1],n.afterTags,a),i}(e,t,i[a],r);hSe[a]&&(u=hSe[a](e,t)||u),u?(o([s],u,n,null,`3-[switch] (${a})`),xCe(e,t,r)):pSe.DEBUG_TAGS&&console.log(`\n -> X  - '${l}'  : (${a})  `)}},bSe={there:!0,this:!0,it:!0,him:!0,her:!0,us:!0},ySe=function(e,t){const n=t.methods.one.setTag,r=t.model.one._multiCache||{};let o=e[0];if(("Noun|Verb"===o.switch||o.tags.has("Infinitive"))&&e.length>=2){if(e.length<4&&!bSe[e[1].normal])return;if(!o.tags.has("PhrasalVerb")&&r.hasOwnProperty(o.normal))return;if(e[1].tags.has("Noun")||e[1].tags.has("Determiner")){e.slice(1,3).some((e=>e.tags.has("Verb")))&&!o.tags.has("#PhrasalVerb")||n([o],"Imperative",t,null,"3-[imperative]")}}},wSe=function(e){if(e.filter((e=>!e.tags.has("ProperNoun"))).length<=3)return!1;const t=/^[a-z]/;return e.every((e=>!t.test(e.text)))},xSe=function(e,t,n,r){for(let o=0;o<e.length;o+=1)!0!==e[o].frozen&&(bCe(e,o,t),!1===r&&TCe(e,o,t),OCe(e,o,t),DCe(e,o,t,n),FCe(e,o,t),BCe(e,o,t))},kSe=function(e,t,n,r){for(let o=0;o<e.length;o+=1){let n=JCe(e,o,t);xCe(e,o,t),n=n||ZCe(e,o,t),n=n||sSe(e,o,t)}for(let o=0;o<e.length;o+=1)!0!==e[o].frozen&&(tSe(e,o,n,r),iSe(e,o,n,r),vSe(e,o,n),jCe(e,o,t,n),gCe(e,o,t,n));ySe(e,n)},CSe=function(e){const{methods:t,model:n,world:r}=e;let o=e.docs;!function(e,t,n){e.forEach((e=>{mCe(e,0,t,n)}))}(o,n,r);let a=t.two.quickSplit(o);for(let i=0;i<a.length;i+=1){let e=a[i];const t=wSe(e);xSe(e,n,r,t),kSe(e,n,r,t)}return a},SSe={Possessive:e=>{let t=e.machine||e.normal||e.text;return t=t.replace(/'s$/,""),t},Plural:(e,t)=>{let n=e.machine||e.normal||e.text;return t.methods.two.transform.noun.toSingular(n,t.model)},Copula:()=>"is",PastTense:(e,t)=>{let n=e.machine||e.normal||e.text;return t.methods.two.transform.verb.toInfinitive(n,t.model,"PastTense")},Gerund:(e,t)=>{let n=e.machine||e.normal||e.text;return t.methods.two.transform.verb.toInfinitive(n,t.model,"Gerund")},PresentTense:(e,t)=>{let n=e.machine||e.normal||e.text;return e.tags.has("Infinitive")?n:t.methods.two.transform.verb.toInfinitive(n,t.model,"PresentTense")},Comparative:(e,t)=>{let n=e.machine||e.normal||e.text;return t.methods.two.transform.adjective.fromComparative(n,t.model)},Superlative:(e,t)=>{let n=e.machine||e.normal||e.text;return t.methods.two.transform.adjective.fromSuperlative(n,t.model)},Adverb:(e,t)=>{const{fromAdverb:n}=t.methods.two.transform.adjective;return n(e.machine||e.normal||e.text)}},ESe=function(e){const t=e.world,n=Object.keys(SSe);e.docs.forEach((e=>{for(let r=0;r<e.length;r+=1){const o=e[r];for(let e=0;e<n.length;e+=1)if(o.tags.has(n[e])){let r=(0,SSe[n[e]])(o,t);o.normal!==r&&(o.root=r);break}}}))},NSe={Adverb:"RB",Comparative:"JJR",Superlative:"JJS",Adjective:"JJ",TO:"Conjunction",Modal:"MD",Auxiliary:"MD",Gerund:"VBG",PastTense:"VBD",Participle:"VBN",PresentTense:"VBZ",Infinitive:"VB",Particle:"RP",Verb:"VB",Pronoun:"PRP",Cardinal:"CD",Conjunction:"CC",Determiner:"DT",Preposition:"IN",QuestionWord:"WP",Expression:"UH",Possessive:"POS",ProperNoun:"NNP",Person:"NNP",Place:"NNP",Organization:"NNP",Singular:"NN",Plural:"NNS",Noun:"NN",There:"EX"},ISe=function(e){e.compute("tagRank"),e.docs.forEach((e=>{e.forEach((e=>{e.penn=function(e){if(e.tags.has("ProperNoun")&&e.tags.has("Plural"))return"NNPS";if(e.tags.has("Possessive")&&e.tags.has("Pronoun"))return"PRP$";if("there"===e.normal)return"EX";if("to"===e.normal)return"TO";let t=e.tagRank||[];for(let n=0;n<t.length;n+=1)if(NSe.hasOwnProperty(t[n]))return NSe[t[n]];return null}(e)}))}))},$Se={preTagger:CSe,root:ESe,penn:ISe},TSe=["Person","Place","Organization"],ASe={Noun:{not:["Verb","Adjective","Adverb","Value","Determiner"]},Singular:{is:"Noun",not:["Plural","Uncountable"]},ProperNoun:{is:"Noun"},Person:{is:"Singular",also:["ProperNoun"],not:["Place","Organization","Date"]},FirstName:{is:"Person"},MaleName:{is:"FirstName",not:["FemaleName","LastName"]},FemaleName:{is:"FirstName",not:["MaleName","LastName"]},LastName:{is:"Person",not:["FirstName"]},Honorific:{is:"Person",not:["FirstName","LastName","Value"]},Place:{is:"Singular",not:["Person","Organization"]},Country:{is:"Place",also:["ProperNoun"],not:["City"]},City:{is:"Place",also:["ProperNoun"],not:["Country"]},Region:{is:"Place",also:["ProperNoun"]},Address:{},Organization:{is:"ProperNoun",not:["Person","Place"]},SportsTeam:{is:"Organization"},School:{is:"Organization"},Company:{is:"Organization"},Plural:{is:"Noun",not:["Singular","Uncountable"]},Uncountable:{is:"Noun"},Pronoun:{is:"Noun",not:TSe},Actor:{is:"Noun",not:["Place","Organization"]},Activity:{is:"Noun",not:["Person","Place"]},Unit:{is:"Noun",not:TSe},Demonym:{is:"Noun",also:["ProperNoun"],not:TSe},Possessive:{is:"Noun"},Reflexive:{is:"Pronoun"}},OSe={Adjective:{not:["Noun","Verb","Adverb","Value"]},Comparable:{is:"Adjective"},Comparative:{is:"Adjective"},Superlative:{is:"Adjective",not:["Comparative"]},NumberRange:{},Adverb:{not:["Noun","Verb","Adjective","Value"]},Determiner:{not:["Noun","Verb","Adjective","Adverb","QuestionWord","Conjunction"]},Conjunction:{not:["Noun","Verb","Adjective","Adverb","Value","QuestionWord"]},Preposition:{not:["Noun","Verb","Adjective","Adverb","QuestionWord","Determiner"]},QuestionWord:{not:["Determiner"]},Currency:{is:"Noun"},Expression:{not:["Noun","Adjective","Verb","Adverb"]},Abbreviation:{},Url:{not:["HashTag","PhoneNumber","Verb","Adjective","Value","AtMention","Email","SlashedTerm"]},PhoneNumber:{not:["HashTag","Verb","Adjective","Value","AtMention","Email"]},HashTag:{},AtMention:{is:"Noun",not:["HashTag","Email"]},Emoji:{not:["HashTag","Verb","Adjective","Value","AtMention"]},Emoticon:{not:["HashTag","Verb","Adjective","Value","AtMention","SlashedTerm"]},SlashedTerm:{not:["Emoticon","Url","Value"]},Email:{not:["HashTag","Verb","Adjective","Value","AtMention"]},Acronym:{not:["Plural","RomanNumeral","Pronoun","Date"]},Negative:{not:["Noun","Adjective","Value","Expression"]},Condition:{not:["Verb","Adjective","Noun","Value"]},There:{not:["Verb","Adjective","Noun","Value","Conjunction","Preposition"]},Prefix:{not:["Abbreviation","Acronym","ProperNoun"]},Hyphenated:{}};let RSe=Object.assign({},ASe,{Verb:{not:["Noun","Adjective","Adverb","Value","Expression"]},PresentTense:{is:"Verb",not:["PastTense","FutureTense"]},Infinitive:{is:"PresentTense",not:["Gerund"]},Imperative:{is:"Verb",not:["PastTense","Gerund","Copula"]},Gerund:{is:"PresentTense",not:["Copula"]},PastTense:{is:"Verb",not:["PresentTense","Gerund","FutureTense"]},FutureTense:{is:"Verb",not:["PresentTense","PastTense"]},Copula:{is:"Verb"},Modal:{is:"Verb",not:["Infinitive"]},Participle:{is:"PastTense"},Auxiliary:{is:"Verb",not:["PastTense","PresentTense","Gerund","Conjunction"]},PhrasalVerb:{is:"Verb"},Particle:{is:"PhrasalVerb",not:["PastTense","PresentTense","Copula","Gerund"]},Passive:{is:"Verb"}},{Value:{not:["Verb","Adjective","Adverb"]},Ordinal:{is:"Value",not:["Cardinal"]},Cardinal:{is:"Value",not:["Ordinal"]},Fraction:{is:"Value",not:["Noun"]},Multiple:{is:"TextValue"},RomanNumeral:{is:"Cardinal",not:["TextValue"]},TextValue:{is:"Value",not:["NumericValue"]},NumericValue:{is:"Value",not:["TextValue"]},Money:{is:"Cardinal"},Percent:{is:"Value"}},{Date:{not:["Verb","Adverb","Adjective"]},Month:{is:"Date",also:["Noun"],not:["Year","WeekDay","Time"]},WeekDay:{is:"Date",also:["Noun"]},Year:{is:"Date",not:["RomanNumeral"]},FinancialQuarter:{is:"Date",not:"Fraction"},Holiday:{is:"Date",also:["Noun"]},Season:{is:"Date"},Timezone:{is:"Date",also:["Noun"],not:["ProperNoun"]},Time:{is:"Date",not:["AtMention"]},Duration:{is:"Date",also:["Noun"]}},OSe);const PSe={compute:$Se,methods:oCe,model:fCe,tags:RSe,hooks:["preTagger"]},DSe=/[,)"';:\-\u2013\u2014.\u2026]/,FSe=function(e,t){if(!e.found)return;let n=e.termList();for(let r=0;r<n.length-1;r++){const e=n[r];if(DSe.test(e.post))return}n[0].implicit=n[0].normal,n[0].text+=t,n[0].normal+=t,n.slice(1).forEach((e=>{e.implicit=e.normal,e.text="",e.normal=""}));for(let r=0;r<n.length-1;r++)n[r].post=n[r].post.replace(/ /,"")},_Se=function(){let e=this.not("@hasContraction"),t=e.match("(we|they|you) are");return FSe(t,"'re"),t=e.match("(he|she|they|it|we|you) will"),FSe(t,"'ll"),t=e.match("(he|she|they|it|we) is"),FSe(t,"'s"),t=e.match("#Person is"),FSe(t,"'s"),t=e.match("#Person would"),FSe(t,"'d"),t=e.match("(is|was|had|would|should|could|do|does|have|has|can) not"),FSe(t,"n't"),t=e.match("(i|we|they) have"),FSe(t,"'ve"),t=e.match("(would|should|could) have"),FSe(t,"'ve"),t=e.match("i am"),FSe(t,"'m"),t=e.match("going to"),this},MSe=/^\p{Lu}[\p{Ll}'\u2019]/u,zSe=function(e){class t extends e{constructor(e,t,n){super(e,t,n),this.viewType="Contraction"}expand(){return this.docs.forEach((e=>{let t=MSe.test(e[0].text);e.forEach(((t,n)=>{t.text=t.implicit||"",delete t.implicit,n<e.length-1&&""===t.post&&(t.post+=" "),t.dirty=!0})),t&&(e[0].text=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e=e.replace(/^ *[a-z\u00C0-\u00FF]/,(e=>e.toUpperCase())),e}(e[0].text))})),this.compute("normal"),this}}e.prototype.contractions=function(){let e=this.match("@hasContraction+");return new t(this.document,e.pointer)},e.prototype.contract=_Se},LSe=function(e,t,n){let[r,o]=t;n&&0!==n.length&&(n=n.map(((e,t)=>(e.implicit=e.text,e.machine=e.text,e.pre="",e.post="",e.text="",e.normal="",e.index=[r,o+t],e))),n[0]&&(n[0].pre=e[r][o].pre,n[n.length-1].post=e[r][o].post,n[0].text=e[r][o].text,n[0].normal=e[r][o].normal),e[r].splice(o,1,...n))},BSe=/'/,jSe=new Set(["been","become"]),HSe=new Set(["what","how","when","if","too"]);let VSe=new Set(["too","also","enough"]);const WSe=function(e,t){let n=e[t].normal.split(BSe)[0];if("let"===n)return[n,"us"];if("there"===n){let r=e[t+1];if(r&&r.tags.has("Plural"))return[n,"are"]}return"has"===((e,t)=>{for(let n=t+1;n<e.length;n+=1){let t=e[n];if(jSe.has(t.normal))return"has";if(HSe.has(t.normal))return"is";if(t.tags.has("Gerund"))return"is";if(t.tags.has("Determiner"))return"is";if(t.tags.has("Adjective"))return"is";if("Adj|Past"===t.switch&&e[n+1]){if(VSe.has(e[n+1].normal))return"is";if(e[n+1].tags.has("Preposition"))return"is"}if(t.tags.has("PastTense"))return e[n+1]&&"for"===e[n+1].normal?"is":"has"}return"is"})(e,t)?[n,"has"]:[n,"is"]},GSe=/'/,USe=new Set(["better","done","before","it","had"]),KSe=new Set(["have","be"]),qSe=function(e,t){let n=e[t].normal.split(GSe)[0];return"how"===n||"what"===n?[n,"did"]:"had"===((e,t)=>{for(let n=t+1;n<e.length;n+=1){let t=e[n];if(USe.has(t.normal))return"had";if(KSe.has(t.normal))return"would";if(t.tags.has("PastTense")||"Adj|Past"===t.switch)return"had";if(t.tags.has("PresentTense")||t.tags.has("Infinitive"))return"would";if(t.tags.has("#Determiner"))return"had";if(t.tags.has("Adjective"))return"would"}return!1})(e,t)?[n,"had"]:[n,"would"]},XSe=function(e,t){if("ain't"===e[t].normal||"aint"===e[t].normal){if(e[t+1]&&"never"===e[t+1].normal)return["have"];let n=function(e,t){for(let n=t-1;n>=0;n-=1)if(e[n].tags.has("Noun")||e[n].tags.has("Pronoun")||e[n].tags.has("Plural")||e[n].tags.has("Singular"))return e[n];return null}(e,t);if(n){if("we"===n.normal||"they"===n.normal)return["are","not"];if("i"===n.normal)return["am","not"];if(n.tags&&n.tags.has("Plural"))return["are","not"]}return["is","not"]}return[e[t].normal.replace(/n't/,""),"not"]},JSe={that:!0,there:!0,let:!0,here:!0,everywhere:!0},YSe={in:!0,by:!0,for:!0};let QSe=new Set(["too","also","enough","about"]),ZSe=new Set(["is","are","did","were","could","should","must","had","have"]);const eEe=(e,t)=>{let n=e[t];if(JSe.hasOwnProperty(n.machine||n.normal))return!1;if(n.tags.has("Possessive"))return!0;if(n.tags.has("QuestionWord"))return!1;if("he's"===n.normal||"she's"===n.normal)return!1;let r=e[t+1];if(!r)return!0;if("it's"===n.normal)return!!r.tags.has("#Noun");if("Noun|Gerund"==r.switch){let r=e[t+2];return r?!!r.tags.has("Copula")||("on"===r.normal||r.normal,!1):!(!n.tags.has("Actor")&&!n.tags.has("ProperNoun"))}if(r.tags.has("Verb"))return!!r.tags.has("Infinitive")||!r.tags.has("Gerund")&&!!r.tags.has("PresentTense");if("Adj|Noun"===r.switch){let n=e[t+2];if(!n)return!1;if(ZSe.has(n.normal))return!0;if(QSe.has(n.normal))return!1}if(r.tags.has("Noun")){let e=r.machine||r.normal;return"here"!==e&&"there"!==e&&"everywhere"!==e&&(!r.tags.has("Possessive")&&!(r.tags.has("ProperNoun")&&!n.tags.has("ProperNoun")))}if(e[t-1]&&!0===YSe[e[t-1].normal])return!0;if(r.tags.has("Adjective")){let n=e[t+2];if(!n)return!1;if(n.tags.has("Noun")&&!n.tags.has("Pronoun")){let e=r.normal;return"above"!==e&&"below"!==e&&"behind"!==e}return"Noun|Verb"===n.switch}return!!r.tags.has("Value")},tEe=/'/,nEe=function(e,t,n,r){let o=t.update();o.document=[e];let a=n+r;n>0&&(n-=1),e[a]&&(a+=1),o.ptrs=[[0,n,a]],o.compute(["freeze","lexicon","preTagger","unfreeze"]),function(e){e.forEach(((e,t)=>{e.index&&(e.index[1]=t)}))}(e)},rEe={d:(e,t)=>qSe(e,t),t:(e,t)=>XSe(e,t),s:(e,t,n)=>eEe(e,t)?n.methods.one.setTag([e[t]],"Possessive",n,null,"2-contraction"):WSe(e,t)},oEe=function(e,t){let n=t.fromText(e.join(" "));return n.compute("id"),n.docs[0]},aEe={contractionTwo:e=>{let{world:t,document:n}=e;n.forEach(((r,o)=>{for(let a=r.length-1;a>=0;a-=1){if(r[a].implicit)continue;let i=null;!0===tEe.test(r[a].normal)&&(i=r[a].normal.split(tEe)[1]);let s=null;rEe.hasOwnProperty(i)&&(s=rEe[i](r,a,t)),s&&(s=oEe(s,e),LSe(n,[o,a],s),nEe(n[o],e,a,s.length))}}))}},iEe={compute:aEe,api:zSe,hooks:["contractionTwo"]},sEe="(hard|fast|late|early|high|right|deep|close|direct)",lEe="(i|we|they)";let uEe=[].concat([{match:"(got|were|was|is|are|am) (#PastTense|#Participle)",tag:"Passive",reason:"got-walked"},{match:"(was|were|is|are|am) being (#PastTense|#Participle)",tag:"Passive",reason:"was-being"},{match:"(had|have|has) been (#PastTense|#Participle)",tag:"Passive",reason:"had-been"},{match:"will be being? (#PastTense|#Participle)",tag:"Passive",reason:"will-be-cleaned"},{match:"#Noun [(#PastTense|#Participle)] by (the|a) #Noun",group:0,tag:"Passive",reason:"suffered-by"}],[{match:"[(all|both)] #Determiner #Noun",group:0,tag:"Noun",reason:"all-noun"},{match:"#Copula [(just|alone)]$",group:0,tag:"Adjective",reason:"not-adverb"},{match:"#Singular is #Adverb? [#PastTense$]",group:0,tag:"Adjective",reason:"is-filled"},{match:"[#PastTense] #Singular is",group:0,tag:"Adjective",reason:"smoked-poutine"},{match:"[#PastTense] #Plural are",group:0,tag:"Adjective",reason:"baked-onions"},{match:"well [#PastTense]",group:0,tag:"Adjective",reason:"well-made"},{match:"#Copula [fucked up?]",group:0,tag:"Adjective",reason:"swears-adjective"},{match:"#Singular (seems|appears) #Adverb? [#PastTense$]",group:0,tag:"Adjective",reason:"seems-filled"},{match:"#Copula #Adjective? [(out|in|through)]$",group:0,tag:"Adjective",reason:"still-out"},{match:"^[#Adjective] (the|your) #Noun",group:0,notIf:"(all|even)",tag:"Infinitive",reason:"shut-the"},{match:"the [said] #Noun",group:0,tag:"Adjective",reason:"the-said-card"},{match:"[#Hyphenated (#Hyphenated && #PastTense)] (#Noun|#Conjunction)",group:0,tag:"Adjective",notIf:"#Adverb",reason:"faith-based"},{match:"[#Hyphenated (#Hyphenated && #Gerund)] (#Noun|#Conjunction)",group:0,tag:"Adjective",notIf:"#Adverb",reason:"self-driving"},{match:"[#PastTense (#Hyphenated && #PhrasalVerb)] (#Noun|#Conjunction)",group:0,tag:"Adjective",reason:"dammed-up"},{match:"(#Hyphenated && #Value) fold",tag:"Adjective",reason:"two-fold"},{match:"must (#Hyphenated && #Infinitive)",tag:"Adjective",reason:"must-win"},{match:"(#Hyphenated && #Infinitive) #Hyphenated",tag:"Adjective",notIf:"#PhrasalVerb",reason:"vacuum-sealed"},{match:"too much",tag:"Adverb Adjective",reason:"bit-4"},{match:"a bit much",tag:"Determiner Adverb Adjective",reason:"bit-3"},{match:"[(un|contra|extra|inter|intra|macro|micro|mid|mis|mono|multi|pre|sub|tri|ex)] #Adjective",group:0,tag:["Adjective","Prefix"],reason:"un-skilled"}],[{match:"#Adverb [#Adverb] (and|or|then)",group:0,tag:"Adjective",reason:"kinda-sparkly-and"},{match:"[(dark|bright|flat|light|soft|pale|dead|dim|faux|little|wee|sheer|most|near|good|extra|all)] #Adjective",group:0,tag:"Adverb",reason:"dark-green"},{match:"#Copula [far too] #Adjective",group:0,tag:"Adverb",reason:"far-too"},{match:"#Copula [still] (in|#Gerund|#Adjective)",group:0,tag:"Adverb",reason:"was-still-walking"},{match:`#Plural ${sEe}`,tag:"#PresentTense #Adverb",reason:"studies-hard"},{match:`#Verb [${sEe}] !#Noun?`,group:0,notIf:"(#Copula|get|got|getting|become|became|becoming|feel|feels|feeling|#Determiner|#Preposition)",tag:"Adverb",reason:"shops-direct"},{match:"[#Plural] a lot",tag:"PresentTense",reason:"studies-a-lot"}],[{match:"as [#Gerund] as",group:0,tag:"Adjective",reason:"as-gerund-as"},{match:"more [#Gerund] than",group:0,tag:"Adjective",reason:"more-gerund-than"},{match:"(so|very|extremely) [#Gerund]",group:0,tag:"Adjective",reason:"so-gerund"},{match:"(found|found) it #Adverb? [#Gerund]",group:0,tag:"Adjective",reason:"found-it-gerund"},{match:"a (little|bit|wee) bit? [#Gerund]",group:0,tag:"Adjective",reason:"a-bit-gerund"},{match:"#Gerund [#Gerund]",group:0,tag:"Adjective",notIf:"(impersonating|practicing|considering|assuming)",reason:"looking-annoying"},{match:"(looked|look|looks) #Adverb? [%Adj|Gerund%]",group:0,tag:"Adjective",notIf:"(impersonating|practicing|considering|assuming)",reason:"looked-amazing"},{match:"[%Adj|Gerund%] #Determiner",group:0,tag:"Gerund",reason:"developing-a"},{match:"#Possessive [%Adj|Gerund%] #Noun",group:0,tag:"Adjective",reason:"leading-manufacturer"},{match:"%Noun|Gerund% %Adj|Gerund%",tag:"Gerund #Adjective",reason:"meaning-alluring"},{match:"(face|embrace|reveal|stop|start|resume) %Adj|Gerund%",tag:"#PresentTense #Adjective",reason:"face-shocking"},{match:"(are|were) [%Adj|Gerund%] #Plural",group:0,tag:"Adjective",reason:"are-enduring-symbols"}],[{match:"#Determiner [#Adjective] #Copula",group:0,tag:"Noun",reason:"the-adj-is"},{match:"#Adjective [#Adjective] #Copula",group:0,tag:"Noun",reason:"adj-adj-is"},{match:"(his|its) [%Adj|Noun%]",group:0,tag:"Noun",notIf:"#Hyphenated",reason:"his-fine"},{match:"#Copula #Adverb? [all]",group:0,tag:"Noun",reason:"is-all"},{match:"(have|had) [#Adjective] #Preposition .",group:0,tag:"Noun",reason:"have-fun"},{match:"#Gerund (giant|capital|center|zone|application)",tag:"Noun",reason:"brewing-giant"},{match:"#Preposition (a|an) [#Adjective]$",group:0,tag:"Noun",reason:"an-instant"},{match:"no [#Adjective] #Modal",group:0,tag:"Noun",reason:"no-golden"},{match:"[brand #Gerund?] new",group:0,tag:"Adverb",reason:"brand-new"},{match:"(#Determiner|#Comparative|new|different) [kind]",group:0,tag:"Noun",reason:"some-kind"},{match:"#Possessive [%Adj|Noun%] #Noun",group:0,tag:"Adjective",reason:"her-favourite"},{match:"must && #Hyphenated .",tag:"Adjective",reason:"must-win"},{match:"#Determiner [#Adjective]$",tag:"Noun",notIf:"(this|that|#Comparative|#Superlative)",reason:"the-south"},{match:"(#Noun && #Hyphenated) (#Adjective && #Hyphenated)",tag:"Adjective",notIf:"(this|that|#Comparative|#Superlative)",reason:"company-wide"},{match:"#Determiner [#Adjective] (#Copula|#Determiner)",notIf:"(#Comparative|#Superlative)",group:0,tag:"Noun",reason:"the-poor"},{match:"[%Adj|Noun%] #Noun",notIf:"(#Pronoun|#ProperNoun)",group:0,tag:"Adjective",reason:"stable-foundations"}],[{match:"[still] #Adjective",group:0,tag:"Adverb",reason:"still-advb"},{match:"[still] #Verb",group:0,tag:"Adverb",reason:"still-verb"},{match:"[so] #Adjective",group:0,tag:"Adverb",reason:"so-adv"},{match:"[way] #Comparative",group:0,tag:"Adverb",reason:"way-adj"},{match:"[way] #Adverb #Adjective",group:0,tag:"Adverb",reason:"way-too-adj"},{match:"[all] #Verb",group:0,tag:"Adverb",reason:"all-verb"},{match:"#Verb  [like]",group:0,notIf:"(#Modal|#PhrasalVerb)",tag:"Adverb",reason:"verb-like"},{match:"(barely|hardly) even",tag:"Adverb",reason:"barely-even"},{match:"[even] #Verb",group:0,tag:"Adverb",reason:"even-walk"},{match:"[even] #Comparative",group:0,tag:"Adverb",reason:"even-worse"},{match:"[even] (#Determiner|#Possessive)",group:0,tag:"#Adverb",reason:"even-the"},{match:"even left",tag:"#Adverb #Verb",reason:"even-left"},{match:"[way] #Adjective",group:0,tag:"#Adverb",reason:"way-over"},{match:"#PresentTense [(hard|quick|bright|slow|fast|backwards|forwards)]",notIf:"#Copula",group:0,tag:"Adverb",reason:"lazy-ly"},{match:"[much] #Adjective",group:0,tag:"Adverb",reason:"bit-1"},{match:"#Copula [#Adverb]$",group:0,tag:"Adjective",reason:"is-well"},{match:"a [(little|bit|wee) bit?] #Adjective",group:0,tag:"Adverb",reason:"a-bit-cold"},{match:"[(super|pretty)] #Adjective",group:0,tag:"Adverb",reason:"super-strong"},{match:"(become|fall|grow) #Adverb? [#PastTense]",group:0,tag:"Adjective",reason:"overly-weakened"},{match:"(a|an) #Adverb [#Participle] #Noun",group:0,tag:"Adjective",reason:"completely-beaten"},{match:"#Determiner #Adverb? [close]",group:0,tag:"Adjective",reason:"a-close"},{match:"#Gerund #Adverb? [close]",group:0,tag:"Adverb",notIf:"(getting|becoming|feeling)",reason:"being-close"},{match:"(the|those|these|a|an) [#Participle] #Noun",group:0,tag:"Adjective",reason:"blown-motor"},{match:"(#PresentTense|#PastTense) [back]",group:0,tag:"Adverb",notIf:"(#PhrasalVerb|#Copula)",reason:"charge-back"},{match:"#Verb [around]",group:0,tag:"Adverb",notIf:"#PhrasalVerb",reason:"send-around"},{match:"[later] #PresentTense",group:0,tag:"Adverb",reason:"later-say"},{match:"#Determiner [well] !#PastTense?",group:0,tag:"Noun",reason:"the-well"},{match:"#Adjective [enough]",group:0,tag:"Adverb",reason:"high-enough"}],[{match:"[sun] the #Ordinal",tag:"WeekDay",reason:"sun-the-5th"},{match:"[sun] #Date",group:0,tag:"WeekDay",reason:"sun-feb"},{match:"#Date (on|this|next|last|during)? [sun]",group:0,tag:"WeekDay",reason:"1pm-sun"},{match:"(in|by|before|during|on|until|after|of|within|all) [sat]",group:0,tag:"WeekDay",reason:"sat"},{match:"(in|by|before|during|on|until|after|of|within|all) [wed]",group:0,tag:"WeekDay",reason:"wed"},{match:"(in|by|before|during|on|until|after|of|within|all) [march]",group:0,tag:"Month",reason:"march"},{match:"[sat] #Date",group:0,tag:"WeekDay",reason:"sat-feb"},{match:"#Preposition [(march|may)]",group:0,tag:"Month",reason:"in-month"},{match:"(this|next|last) (march|may) !#Infinitive?",tag:"#Date #Month",reason:"this-month"},{match:"(march|may) the? #Value",tag:"#Month #Date #Date",reason:"march-5th"},{match:"#Value of? (march|may)",tag:"#Date #Date #Month",reason:"5th-of-march"},{match:"[(march|may)] .? #Date",group:0,tag:"Month",reason:"march-and-feb"},{match:"#Date .? [(march|may)]",group:0,tag:"Month",reason:"feb-and-march"},{match:"#Adverb [(march|may)]",group:0,tag:"Verb",reason:"quickly-march"},{match:"[(march|may)] #Adverb",group:0,tag:"Verb",reason:"march-quickly"},{match:"#Value (am|pm)",tag:"Time",reason:"2-am"}],[{match:"#Holiday (day|eve)",tag:"Holiday",reason:"holiday-day"},{match:"#Value of #Month",tag:"Date",reason:"value-of-month"},{match:"#Cardinal #Month",tag:"Date",reason:"cardinal-month"},{match:"#Month #Value to #Value",tag:"Date",reason:"value-to-value"},{match:"#Month the #Value",tag:"Date",reason:"month-the-value"},{match:"(#WeekDay|#Month) #Value",tag:"Date",reason:"date-value"},{match:"#Value (#WeekDay|#Month)",tag:"Date",reason:"value-date"},{match:"(#TextValue && #Date) #TextValue",tag:"Date",reason:"textvalue-date"},{match:"#Month #NumberRange",tag:"Date",reason:"aug 20-21"},{match:"#WeekDay #Month #Ordinal",tag:"Date",reason:"week mm-dd"},{match:"#Month #Ordinal #Cardinal",tag:"Date",reason:"mm-dd-yyy"},{match:"(#Place|#Demonmym|#Time) (standard|daylight|central|mountain)? time",tag:"Timezone",reason:"std-time"},{match:"(eastern|mountain|pacific|central|atlantic) (standard|daylight|summer)? time",tag:"Timezone",reason:"eastern-time"},{match:"#Time [(eastern|mountain|pacific|central|est|pst|gmt)]",group:0,tag:"Timezone",reason:"5pm-central"},{match:"(central|western|eastern) european time",tag:"Timezone",reason:"cet"}],[{match:"(the|any) [more]",group:0,tag:"Singular",reason:"more-noun"},{match:"[more] #Noun",group:0,tag:"Adjective",reason:"more-noun"},{match:"(right|rights) of .",tag:"Noun",reason:"right-of"},{match:"a [bit]",group:0,tag:"Singular",reason:"bit-2"},{match:"a [must]",group:0,tag:"Singular",reason:"must-2"},{match:"(we|us) [all]",group:0,tag:"Noun",reason:"we all"},{match:"due to [#Verb]",group:0,tag:"Noun",reason:"due-to"},{match:"some [#Verb] #Plural",group:0,tag:"Noun",reason:"determiner6"},{match:"#Possessive #Ordinal [#PastTense]",group:0,tag:"Noun",reason:"first-thought"},{match:"(the|this|those|these) #Adjective [%Verb|Noun%]",group:0,tag:"Noun",notIf:"#Copula",reason:"the-adj-verb"},{match:"(the|this|those|these) #Adverb #Adjective [#Verb]",group:0,tag:"Noun",reason:"determiner4"},{match:"the [#Verb] #Preposition .",group:0,tag:"Noun",reason:"determiner1"},{match:"(a|an|the) [#Verb] of",group:0,tag:"Noun",reason:"the-verb-of"},{match:"#Determiner #Noun of [#Verb]",group:0,tag:"Noun",notIf:"#Gerund",reason:"noun-of-noun"},{match:"#PastTense #Preposition [#PresentTense]",group:0,notIf:"#Gerund",tag:"Noun",reason:"ended-in-ruins"},{match:"#Conjunction [u]",group:0,tag:"Pronoun",reason:"u-pronoun-2"},{match:"[u] #Verb",group:0,tag:"Pronoun",reason:"u-pronoun-1"},{match:"#Determiner [(western|eastern|northern|southern|central)] #Noun",group:0,tag:"Noun",reason:"western-line"},{match:"(#Singular && @hasHyphen) #PresentTense",tag:"Noun",reason:"hyphen-verb"},{match:"is no [#Verb]",group:0,tag:"Noun",reason:"is-no-verb"},{match:"do [so]",group:0,tag:"Noun",reason:"so-noun"},{match:"#Determiner [(shit|damn|hell)]",group:0,tag:"Noun",reason:"swears-noun"},{match:"to [(shit|hell)]",group:0,tag:"Noun",reason:"to-swears"},{match:"(the|these) [#Singular] (were|are)",group:0,tag:"Plural",reason:"singular-were"},{match:"a #Noun+ or #Adverb+? [#Verb]",group:0,tag:"Noun",reason:"noun-or-noun"},{match:"(the|those|these|a|an) #Adjective? [#PresentTense #Particle?]",group:0,tag:"Noun",notIf:"(seem|appear|include|#Gerund|#Copula)",reason:"det-inf"},{match:"#Noun #Actor",tag:"Actor",notIf:"(#Person|#Pronoun)",reason:"thing-doer"},{match:"#Gerund #Actor",tag:"Actor",reason:"gerund-doer"},{match:"co #Singular",tag:"Actor",reason:"co-noun"},{match:"[#Noun+] #Actor",group:0,tag:"Actor",notIf:"(#Honorific|#Pronoun|#Possessive)",reason:"air-traffic-controller"},{match:"(urban|cardiac|cardiovascular|respiratory|medical|clinical|visual|graphic|creative|dental|exotic|fine|certified|registered|technical|virtual|professional|amateur|junior|senior|special|pharmaceutical|theoretical)+ #Noun? #Actor",tag:"Actor",reason:"fine-artist"},{match:"#Noun+ (coach|chef|king|engineer|fellow|personality|boy|girl|man|woman|master)",tag:"Actor",reason:"dance-coach"},{match:"chief . officer",tag:"Actor",reason:"chief-x-officer"},{match:"chief of #Noun+",tag:"Actor",reason:"chief-of-police"},{match:"senior? vice? president of #Noun+",tag:"Actor",reason:"president-of"},{match:"#Determiner [sun]",group:0,tag:"Singular",reason:"the-sun"},{match:"#Verb (a|an) [#Value]$",group:0,tag:"Singular",reason:"did-a-value"},{match:"the [(can|will|may)]",group:0,tag:"Singular",reason:"the can"},{match:"#FirstName #Acronym? (#Possessive && #LastName)",tag:"Possessive",reason:"name-poss"},{match:"#Organization+ #Possessive",tag:"Possessive",reason:"org-possessive"},{match:"#Place+ #Possessive",tag:"Possessive",reason:"place-possessive"},{match:"#Possessive #PresentTense #Particle?",notIf:"(#Gerund|her)",tag:"Noun",reason:"possessive-verb"},{match:"(my|our|their|her|his|its) [(#Plural && #Actor)] #Noun",tag:"Possessive",reason:"my-dads"},{match:"#Value of a [second]",group:0,unTag:"Value",tag:"Singular",reason:"10th-of-a-second"},{match:"#Value [seconds]",group:0,unTag:"Value",tag:"Plural",reason:"10-seconds"},{match:"in [#Infinitive]",group:0,tag:"Singular",reason:"in-age"},{match:"a [#Adjective] #Preposition",group:0,tag:"Noun",reason:"a-minor-in"},{match:"#Determiner [#Singular] said",group:0,tag:"Actor",reason:"the-actor-said"},{match:"#Determiner #Noun [(feel|sense|process|rush|side|bomb|bully|challenge|cover|crush|dump|exchange|flow|function|issue|lecture|limit|march|process)] !(#Preposition|to|#Adverb)?",group:0,tag:"Noun",reason:"the-noun-sense"},{match:"[#PresentTense] (of|by|for) (a|an|the) #Noun #Copula",group:0,tag:"Plural",reason:"photographs-of"},{match:"#Infinitive and [%Noun|Verb%]",group:0,tag:"Infinitive",reason:"fight and win"},{match:"#Noun and [#Verb] and #Noun",group:0,tag:"Noun",reason:"peace-and-flowers"},{match:"the #Cardinal [%Adj|Noun%]",group:0,tag:"Noun",reason:"the-1992-classic"},{match:"#Copula the [%Adj|Noun%] #Noun",group:0,tag:"Adjective",reason:"the-premier-university"},{match:"i #Verb [me] #Noun",group:0,tag:"Possessive",reason:"scottish-me"},{match:"[#PresentTense] (music|class|lesson|night|party|festival|league|ceremony)",group:0,tag:"Noun",reason:"dance-music"},{match:"[wit] (me|it)",group:0,tag:"Presposition",reason:"wit-me"},{match:"#PastTense #Possessive [#Verb]",group:0,tag:"Noun",notIf:"(saw|made)",reason:"left-her-boots"},{match:"#Value [%Plural|Verb%]",group:0,tag:"Plural",notIf:"(one|1|a|an)",reason:"35-signs"},{match:"had [#PresentTense]",group:0,tag:"Noun",notIf:"(#Gerund|come|become)",reason:"had-time"},{match:"%Adj|Noun% %Noun|Verb%",tag:"#Adjective #Noun",notIf:"#ProperNoun #Noun",reason:"instant-access"},{match:"#Determiner [%Adj|Noun%] #Conjunction",group:0,tag:"Noun",reason:"a-rep-to"},{match:"#Adjective #Noun [%Plural|Verb%]$",group:0,tag:"Plural",notIf:"#Pronoun",reason:"near-death-experiences"},{match:"#Possessive #Noun [%Plural|Verb%]$",group:0,tag:"Plural",reason:"your-guild-colors"}],[{match:"(this|that|the|a|an) [#Gerund #Infinitive]",group:0,tag:"Singular",reason:"the-planning-process"},{match:"(that|the) [#Gerund #PresentTense]",group:0,ifNo:"#Copula",tag:"Plural",reason:"the-paving-stones"},{match:"#Determiner [#Gerund] #Noun",group:0,tag:"Adjective",reason:"the-gerund-noun"},{match:"#Pronoun #Infinitive [#Gerund] #PresentTense",group:0,tag:"Noun",reason:"tipping-sucks"},{match:"#Adjective [#Gerund]",group:0,tag:"Noun",notIf:"(still|even|just)",reason:"early-warning"},{match:"[#Gerund] #Adverb? not? #Copula",group:0,tag:"Activity",reason:"gerund-copula"},{match:"#Copula [(#Gerund|#Activity)] #Copula",group:0,tag:"Gerund",reason:"are-doing-is"},{match:"[#Gerund] #Modal",group:0,tag:"Activity",reason:"gerund-modal"},{match:"#Singular for [%Noun|Gerund%]",group:0,tag:"Gerund",reason:"noun-for-gerund"},{match:"#Comparative (for|at) [%Noun|Gerund%]",group:0,tag:"Gerund",reason:"better-for-gerund"},{match:"#PresentTense the [#Gerund]",group:0,tag:"Noun",reason:"keep-the-touching"}],[{match:"#Infinitive (this|that|the) [#Infinitive]",group:0,tag:"Noun",reason:"do-this-dance"},{match:"#Gerund #Determiner [#Infinitive]",group:0,tag:"Noun",reason:"running-a-show"},{match:"#Determiner (only|further|just|more|backward) [#Infinitive]",group:0,tag:"Noun",reason:"the-only-reason"},{match:"(the|this|a|an) [#Infinitive] #Adverb? #Verb",group:0,tag:"Noun",reason:"determiner5"},{match:"#Determiner #Adjective #Adjective? [#Infinitive]",group:0,tag:"Noun",reason:"a-nice-inf"},{match:"#Determiner #Demonym [#PresentTense]",group:0,tag:"Noun",reason:"mexican-train"},{match:"#Adjective #Noun+ [#Infinitive] #Copula",group:0,tag:"Noun",reason:"career-move"},{match:"at some [#Infinitive]",group:0,tag:"Noun",reason:"at-some-inf"},{match:"(go|goes|went) to [#Infinitive]",group:0,tag:"Noun",reason:"goes-to-verb"},{match:"(a|an) #Adjective? #Noun [#Infinitive] (#Preposition|#Noun)",group:0,notIf:"from",tag:"Noun",reason:"a-noun-inf"},{match:"(a|an) #Noun [#Infinitive]$",group:0,tag:"Noun",reason:"a-noun-inf2"},{match:"#Gerund #Adjective? for [#Infinitive]",group:0,tag:"Noun",reason:"running-for"},{match:"about [#Infinitive]",group:0,tag:"Singular",reason:"about-love"},{match:"#Plural on [#Infinitive]",group:0,tag:"Noun",reason:"on-stage"},{match:"any [#Infinitive]",group:0,tag:"Noun",reason:"any-charge"},{match:"no [#Infinitive]",group:0,tag:"Noun",reason:"no-doubt"},{match:"number of [#PresentTense]",group:0,tag:"Noun",reason:"number-of-x"},{match:"(taught|teaches|learns|learned) [#PresentTense]",group:0,tag:"Noun",reason:"teaches-x"},{match:"(try|use|attempt|build|make) [#Verb #Particle?]",notIf:"(#Copula|#Noun|sure|fun|up)",group:0,tag:"Noun",reason:"do-verb"},{match:"^[#Infinitive] (is|was)",group:0,tag:"Noun",reason:"checkmate-is"},{match:"#Infinitive much [#Infinitive]",group:0,tag:"Noun",reason:"get-much"},{match:"[cause] #Pronoun #Verb",group:0,tag:"Conjunction",reason:"cause-cuz"},{match:"the #Singular [#Infinitive] #Noun",group:0,tag:"Noun",notIf:"#Pronoun",reason:"cardio-dance"},{match:"#Determiner #Modal [#Noun]",group:0,tag:"PresentTense",reason:"should-smoke"},{match:"this [#Plural]",group:0,tag:"PresentTense",notIf:"(#Preposition|#Date)",reason:"this-verbs"},{match:"#Noun that [#Plural]",group:0,tag:"PresentTense",notIf:"(#Preposition|#Pronoun|way)",reason:"voice-that-rocks"},{match:"that [#Plural] to",group:0,tag:"PresentTense",notIf:"#Preposition",reason:"that-leads-to"},{match:"(let|make|made) (him|her|it|#Person|#Place|#Organization)+ [#Singular] (a|an|the|it)",group:0,tag:"Infinitive",reason:"let-him-glue"},{match:"#Verb (all|every|each|most|some|no) [#PresentTense]",notIf:"#Modal",group:0,tag:"Noun",reason:"all-presentTense"},{match:"(had|have|#PastTense) #Adjective [#PresentTense]",group:0,tag:"Noun",notIf:"better",reason:"adj-presentTense"},{match:"#Value #Adjective [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"one-big-reason"},{match:"#PastTense #Adjective+ [#PresentTense]",group:0,tag:"Noun",notIf:"(#Copula|better)",reason:"won-wide-support"},{match:"(many|few|several|couple) [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"many-poses"},{match:"#Determiner #Adverb #Adjective [%Noun|Verb%]",group:0,tag:"Noun",notIf:"#Copula",reason:"very-big-dream"},{match:"from #Noun to [%Noun|Verb%]",group:0,tag:"Noun",reason:"start-to-finish"},{match:"(for|with|of) #Noun (and|or|not) [%Noun|Verb%]",group:0,tag:"Noun",notIf:"#Pronoun",reason:"for-food-and-gas"},{match:"#Adjective #Adjective [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"adorable-little-store"},{match:"#Gerund #Adverb? #Comparative [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"higher-costs"},{match:"(#Noun && @hasComma) #Noun (and|or) [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"noun-list"},{match:"(many|any|some|several) [#PresentTense] for",group:0,tag:"Noun",reason:"any-verbs-for"},{match:"to #PresentTense #Noun [#PresentTense] #Preposition",group:0,tag:"Noun",reason:"gas-exchange"},{match:"#PastTense (until|as|through|without) [#PresentTense]",group:0,tag:"Noun",reason:"waited-until-release"},{match:"#Gerund like #Adjective? [#PresentTense]",group:0,tag:"Plural",reason:"like-hot-cakes"},{match:"some #Adjective [#PresentTense]",group:0,tag:"Noun",reason:"some-reason"},{match:"for some [#PresentTense]",group:0,tag:"Noun",reason:"for-some-reason"},{match:"(same|some|the|that|a) kind of [#PresentTense]",group:0,tag:"Noun",reason:"some-kind-of"},{match:"(same|some|the|that|a) type of [#PresentTense]",group:0,tag:"Noun",reason:"some-type-of"},{match:"#Gerund #Adjective #Preposition [#PresentTense]",group:0,tag:"Noun",reason:"doing-better-for-x"},{match:"(get|got|have) #Comparative [#PresentTense]",group:0,tag:"Noun",reason:"got-better-aim"},{match:"whose [#PresentTense] #Copula",group:0,tag:"Noun",reason:"whos-name-was"},{match:"#PhrasalVerb #Particle #Preposition [#PresentTense]",group:0,tag:"Noun",reason:"given-up-on-x"},{match:"there (are|were) #Adjective? [#PresentTense]",group:0,tag:"Plural",reason:"there-are"},{match:"#Value [#PresentTense] of",group:0,notIf:"(one|1|#Copula|#Infinitive)",tag:"Plural",reason:"2-trains"},{match:"[#PresentTense] (are|were) #Adjective",group:0,tag:"Plural",reason:"compromises-are-possible"},{match:"^[(hope|guess|thought|think)] #Pronoun #Verb",group:0,tag:"Infinitive",reason:"suppose-i"},{match:"#Possessive #Adjective [#Verb]",group:0,tag:"Noun",notIf:"#Copula",reason:"our-full-support"},{match:"[(tastes|smells)] #Adverb? #Adjective",group:0,tag:"PresentTense",reason:"tastes-good"},{match:"#Copula #Gerund [#PresentTense] !by?",group:0,tag:"Noun",notIf:"going",reason:"ignoring-commute"},{match:"#Determiner #Adjective? [(shed|thought|rose|bid|saw|spelt)]",group:0,tag:"Noun",reason:"noun-past"},{match:"how to [%Noun|Verb%]",group:0,tag:"Infinitive",reason:"how-to-noun"},{match:"which [%Noun|Verb%] #Noun",group:0,tag:"Infinitive",reason:"which-boost-it"},{match:"#Gerund [%Plural|Verb%]",group:0,tag:"Plural",reason:"asking-questions"},{match:"(ready|available|difficult|hard|easy|made|attempt|try) to [%Noun|Verb%]",group:0,tag:"Infinitive",reason:"ready-to-noun"},{match:"(bring|went|go|drive|run|bike) to [%Noun|Verb%]",group:0,tag:"Noun",reason:"bring-to-noun"},{match:"#Modal #Noun [%Noun|Verb%]",group:0,tag:"Infinitive",reason:"would-you-look"},{match:"#Copula just [#Infinitive]",group:0,tag:"Noun",reason:"is-just-spam"},{match:"^%Noun|Verb% %Plural|Verb%",tag:"Imperative #Plural",reason:"request-copies"},{match:"#Adjective #Plural and [%Plural|Verb%]",group:0,tag:"#Plural",reason:"pickles-and-drinks"},{match:"#Determiner #Year [#Verb]",group:0,tag:"Noun",reason:"the-1968-film"},{match:"#Determiner [#PhrasalVerb #Particle]",group:0,tag:"Noun",reason:"the-break-up"},{match:"#Determiner [%Adj|Noun%] #Noun",group:0,tag:"Adjective",notIf:"(#Pronoun|#Possessive|#ProperNoun)",reason:"the-individual-goals"},{match:"[%Noun|Verb%] or #Infinitive",group:0,tag:"Infinitive",reason:"work-or-prepare"},{match:"to #Infinitive [#PresentTense]",group:0,tag:"Noun",notIf:"(#Gerund|#Copula|help)",reason:"to-give-thanks"},{match:"[#Noun] me",group:0,tag:"Verb",reason:"kills-me"},{match:"%Plural|Verb% %Plural|Verb%",tag:"#PresentTense #Plural",reason:"removes-wrinkles"}],[{match:"#Money and #Money #Currency?",tag:"Money",reason:"money-and-money"},{match:"#Value #Currency [and] #Value (cents|ore|centavos|sens)",group:0,tag:"money",reason:"and-5-cents"},{match:"#Value (mark|rand|won|rub|ore)",tag:"#Money #Currency",reason:"4-mark"},{match:"a pound",tag:"#Money #Unit",reason:"a-pound"},{match:"#Value (pound|pounds)",tag:"#Money #Unit",reason:"4-pounds"}],[{match:"[(half|quarter)] of? (a|an)",group:0,tag:"Fraction",reason:"millionth"},{match:"#Adverb [half]",group:0,tag:"Fraction",reason:"nearly-half"},{match:"[half] the",group:0,tag:"Fraction",reason:"half-the"},{match:"#Cardinal and a half",tag:"Fraction",reason:"and-a-half"},{match:"#Value (halves|halfs|quarters)",tag:"Fraction",reason:"two-halves"},{match:"a #Ordinal",tag:"Fraction",reason:"a-quarter"},{match:"[#Cardinal+] (#Fraction && /s$/)",tag:"Fraction",reason:"seven-fifths"},{match:"[#Cardinal+ #Ordinal] of .",group:0,tag:"Fraction",reason:"ordinal-of"},{match:"[(#NumericValue && #Ordinal)] of .",group:0,tag:"Fraction",reason:"num-ordinal-of"},{match:"(a|one) #Cardinal?+ #Ordinal",tag:"Fraction",reason:"a-ordinal"},{match:"#Cardinal+ out? of every? #Cardinal",tag:"Fraction",reason:"out-of"}],[{match:"#Cardinal [second]",tag:"Unit",reason:"one-second"},{match:"!once? [(a|an)] (#Duration|hundred|thousand|million|billion|trillion)",group:0,tag:"Value",reason:"a-is-one"},{match:"1 #Value #PhoneNumber",tag:"PhoneNumber",reason:"1-800-Value"},{match:"#NumericValue #PhoneNumber",tag:"PhoneNumber",reason:"(800) PhoneNumber"},{match:"#Demonym #Currency",tag:"Currency",reason:"demonym-currency"},{match:"#Value [(buck|bucks|grand)]",group:0,tag:"Currency",reason:"value-bucks"},{match:"[#Value+] #Currency",group:0,tag:"Money",reason:"15 usd"},{match:"[second] #Noun",group:0,tag:"Ordinal",reason:"second-noun"},{match:"#Value+ [#Currency]",group:0,tag:"Unit",reason:"5-yan"},{match:"#Value [(foot|feet)]",group:0,tag:"Unit",reason:"foot-unit"},{match:"#Value [#Abbreviation]",group:0,tag:"Unit",reason:"value-abbr"},{match:"#Value [k]",group:0,tag:"Unit",reason:"value-k"},{match:"#Unit an hour",tag:"Unit",reason:"unit-an-hour"},{match:"(minus|negative) #Value",tag:"Value",reason:"minus-value"},{match:"#Value (point|decimal) #Value",tag:"Value",reason:"value-point-value"},{match:"#Determiner [(half|quarter)] #Ordinal",group:0,tag:"Value",reason:"half-ordinal"},{match:"#Multiple+ and #Value",tag:"Value",reason:"magnitude-and-value"},{match:"#Value #Unit [(per|an) (hr|hour|sec|second|min|minute)]",group:0,tag:"Unit",reason:"12-miles-per-second"},{match:"#Value [(square|cubic)] #Unit",group:0,tag:"Unit",reason:"square-miles"}],[{match:"#Copula [(#Noun|#PresentTense)] #LastName",group:0,tag:"FirstName",reason:"copula-noun-lastname"},{match:"(sister|pope|brother|father|aunt|uncle|grandpa|grandfather|grandma) #ProperNoun",tag:"Person",reason:"lady-titlecase",safe:!0},{match:"#FirstName [#Determiner #Noun] #LastName",group:0,tag:"Person",reason:"first-noun-last"},{match:"#ProperNoun (b|c|d|e|f|g|h|j|k|l|m|n|o|p|q|r|s|t|u|v|w|x|y|z) #ProperNoun",tag:"Person",reason:"titlecase-acronym-titlecase",safe:!0},{match:"#Acronym #LastName",tag:"Person",reason:"acronym-lastname",safe:!0},{match:"#Person (jr|sr|md)",tag:"Person",reason:"person-honorific"},{match:"#Honorific #Acronym",tag:"Person",reason:"Honorific-TitleCase"},{match:"#Person #Person the? #RomanNumeral",tag:"Person",reason:"roman-numeral"},{match:"#FirstName [/^[^aiurck]$/]",group:0,tag:["Acronym","Person"],reason:"john-e"},{match:"#Noun van der? #Noun",tag:"Person",reason:"van der noun",safe:!0},{match:"(king|queen|prince|saint|lady) of #Noun",tag:"Person",reason:"king-of-noun",safe:!0},{match:"(prince|lady) #Place",tag:"Person",reason:"lady-place"},{match:"(king|queen|prince|saint) #ProperNoun",tag:"Person",notIf:"#Place",reason:"saint-foo"},{match:"al (#Person|#ProperNoun)",tag:"Person",reason:"al-borlen",safe:!0},{match:"#FirstName de #Noun",tag:"Person",reason:"bill-de-noun"},{match:"#FirstName (bin|al) #Noun",tag:"Person",reason:"bill-al-noun"},{match:"#FirstName #Acronym #ProperNoun",tag:"Person",reason:"bill-acronym-title"},{match:"#FirstName #FirstName #ProperNoun",tag:"Person",reason:"bill-firstname-title"},{match:"#Honorific #FirstName? #ProperNoun",tag:"Person",reason:"dr-john-Title"},{match:"#FirstName the #Adjective",tag:"Person",reason:"name-the-great"},{match:"#ProperNoun (van|al|bin) #ProperNoun",tag:"Person",reason:"title-van-title",safe:!0},{match:"#ProperNoun (de|du) la? #ProperNoun",tag:"Person",notIf:"#Place",reason:"title-de-title"},{match:"#Singular #Acronym #LastName",tag:"#FirstName #Person .",reason:"title-acro-noun",safe:!0},{match:"[#ProperNoun] #Person",group:0,tag:"Person",reason:"proper-person",safe:!0},{match:"#Person [#ProperNoun #ProperNoun]",group:0,tag:"Person",notIf:"#Possessive",reason:"three-name-person",safe:!0},{match:"#FirstName #Acronym? [#ProperNoun]",group:0,tag:"LastName",notIf:"#Possessive",reason:"firstname-titlecase"},{match:"#FirstName [#FirstName]",group:0,tag:"LastName",reason:"firstname-firstname"},{match:"#FirstName #Acronym #Noun",tag:"Person",reason:"n-acro-noun",safe:!0},{match:"#FirstName [(de|di|du|van|von)] #Person",group:0,tag:"LastName",reason:"de-firstname"},{match:"[(lieutenant|corporal|sergeant|captain|qeen|king|admiral|major|colonel|marshal|president|queen|king)+] #ProperNoun",group:0,tag:"Honorific",reason:"seargeant-john"},{match:"[(private|general|major|rear|prime|field|count|miss)] #Honorific? #Person",group:0,tag:["Honorific","Person"],reason:"ambg-honorifics"},{match:"#Honorific #FirstName [#Singular]",group:0,tag:"LastName",notIf:"#Possessive",reason:"dr-john-foo",safe:!0},{match:"[(his|her) (majesty|honour|worship|excellency|honorable)] #Person",group:0,tag:"Honorific",reason:"his-excellency"},{match:"#Honorific #Actor",tag:"Honorific",reason:"Lieutenant colonel"},{match:"(first|second|third|1st|2nd|3rd) #Actor",tag:"Honorific",reason:"first lady"},{match:"#Person #RomanNumeral",tag:"Person",reason:"louis-IV"}],[{match:"#FirstName #Noun$",tag:". #LastName",notIf:"(#Possessive|#Organization|#Place|#Pronoun|@hasTitleCase)",reason:"firstname-noun"},{match:"%Person|Date% #Acronym? #ProperNoun",tag:"Person",reason:"jan-thierson"},{match:"%Person|Noun% #Acronym? #ProperNoun",tag:"Person",reason:"switch-person",safe:!0},{match:"%Person|Noun% #Organization",tag:"Organization",reason:"olive-garden"},{match:"%Person|Verb% #Acronym? #ProperNoun",tag:"Person",reason:"verb-propernoun",ifNo:"#Actor"},{match:"[%Person|Verb%] (will|had|has|said|says|told|did|learned|wants|wanted)",group:0,tag:"Person",reason:"person-said"},{match:"[%Person|Place%] (harbor|harbour|pier|town|city|place|dump|landfill)",group:0,tag:"Place",reason:"sydney-harbour"},{match:"(west|east|north|south) [%Person|Place%]",group:0,tag:"Place",reason:"east-sydney"},{match:"#Modal [%Person|Verb%]",group:0,tag:"Verb",reason:"would-mark"},{match:"#Adverb [%Person|Verb%]",group:0,tag:"Verb",reason:"really-mark"},{match:"[%Person|Verb%] (#Adverb|#Comparative)",group:0,tag:"Verb",reason:"drew-closer"},{match:"%Person|Verb% #Person",tag:"Person",reason:"rob-smith"},{match:"%Person|Verb% #Acronym #ProperNoun",tag:"Person",reason:"rob-a-smith"},{match:"[will] #Verb",group:0,tag:"Modal",reason:"will-verb"},{match:"(will && @isTitleCase) #ProperNoun",tag:"Person",reason:"will-name"},{match:"(#FirstName && !#Possessive) [#Singular] #Verb",group:0,safe:!0,tag:"LastName",reason:"jack-layton"},{match:"^[#Singular] #Person #Verb",group:0,safe:!0,tag:"Person",reason:"sherwood-anderson"},{match:"(a|an) [#Person]$",group:0,unTag:"Person",reason:"a-warhol"}],[{match:"#Copula (pretty|dead|full|well|sure) (#Adjective|#Noun)",tag:"#Copula #Adverb #Adjective",reason:"sometimes-adverb"},{match:"(#Pronoun|#Person) (had|#Adverb)? [better] #PresentTense",group:0,tag:"Modal",reason:"i-better"},{match:"(#Modal|i|they|we|do) not? [like]",group:0,tag:"PresentTense",reason:"modal-like"},{match:"#Noun #Adverb? [left]",group:0,tag:"PastTense",reason:"left-verb"},{match:"will #Adverb? not? #Adverb? [be] #Gerund",group:0,tag:"Copula",reason:"will-be-copula"},{match:"will #Adverb? not? #Adverb? [be] #Adjective",group:0,tag:"Copula",reason:"be-copula"},{match:"[march] (up|down|back|toward)",notIf:"#Date",group:0,tag:"Infinitive",reason:"march-to"},{match:"#Modal [march]",group:0,tag:"Infinitive",reason:"must-march"},{match:"[may] be",group:0,tag:"Verb",reason:"may-be"},{match:"[(subject|subjects|subjected)] to",group:0,tag:"Verb",reason:"subject to"},{match:"[home] to",group:0,tag:"PresentTense",reason:"home to"},{match:"[open] #Determiner",group:0,tag:"Infinitive",reason:"open-the"},{match:"(were|was) being [#PresentTense]",group:0,tag:"PastTense",reason:"was-being"},{match:"(had|has|have) [been /en$/]",group:0,tag:"Auxiliary Participle",reason:"had-been-broken"},{match:"(had|has|have) [been /ed$/]",group:0,tag:"Auxiliary PastTense",reason:"had-been-smoked"},{match:"(had|has) #Adverb? [been] #Adverb? #PastTense",group:0,tag:"Auxiliary",reason:"had-been-adj"},{match:"(had|has) to [#Noun] (#Determiner|#Possessive)",group:0,tag:"Infinitive",reason:"had-to-noun"},{match:"have [#PresentTense]",group:0,tag:"PastTense",notIf:"(come|gotten)",reason:"have-read"},{match:"(does|will|#Modal) that [work]",group:0,tag:"PastTense",reason:"does-that-work"},{match:"[(sound|sounds)] #Adjective",group:0,tag:"PresentTense",reason:"sounds-fun"},{match:"[(look|looks)] #Adjective",group:0,tag:"PresentTense",reason:"looks-good"},{match:"[(start|starts|stop|stops|begin|begins)] #Gerund",group:0,tag:"Verb",reason:"starts-thinking"},{match:"(have|had) read",tag:"Modal #PastTense",reason:"read-read"},{match:"(is|was|were) [(under|over) #PastTense]",group:0,tag:"Adverb Adjective",reason:"was-under-cooked"},{match:"[shit] (#Determiner|#Possessive|them)",group:0,tag:"Verb",reason:"swear1-verb"},{match:"[damn] (#Determiner|#Possessive|them)",group:0,tag:"Verb",reason:"swear2-verb"},{match:"[fuck] (#Determiner|#Possessive|them)",group:0,tag:"Verb",reason:"swear3-verb"},{match:"#Plural that %Noun|Verb%",tag:". #Preposition #Infinitive",reason:"jobs-that-work"},{match:"[works] for me",group:0,tag:"PresentTense",reason:"works-for-me"},{match:"as #Pronoun [please]",group:0,tag:"Infinitive",reason:"as-we-please"},{match:"[(co|mis|de|inter|intra|pre|re|un|out|under|over|counter)] #Verb",group:0,tag:["Verb","Prefix"],notIf:"(#Copula|#PhrasalVerb)",reason:"co-write"},{match:"#PastTense and [%Adj|Past%]",group:0,tag:"PastTense",reason:"dressed-and-left"},{match:"[%Adj|Past%] and #PastTense",group:0,tag:"PastTense",reason:"dressed-and-left"},{match:"#Copula #Pronoun [%Adj|Past%]",group:0,tag:"Adjective",reason:"is-he-stoked"},{match:"to [%Noun|Verb%] #Preposition",group:0,tag:"Infinitive",reason:"to-dream-of"}],[{match:"(slowly|quickly) [#Adjective]",group:0,tag:"Verb",reason:"slowly-adj"},{match:"does (#Adverb|not)? [#Adjective]",group:0,tag:"PresentTense",reason:"does-mean"},{match:"[(fine|okay|cool|ok)] by me",group:0,tag:"Adjective",reason:"okay-by-me"},{match:"i (#Adverb|do)? not? [mean]",group:0,tag:"PresentTense",reason:"i-mean"},{match:"will #Adjective",tag:"Auxiliary Infinitive",reason:"will-adj"},{match:"#Pronoun [#Adjective] #Determiner #Adjective? #Noun",group:0,tag:"Verb",reason:"he-adj-the"},{match:"#Copula [%Adj|Present%] to #Verb",group:0,tag:"Verb",reason:"adj-to"},{match:"#Copula [#Adjective] (well|badly|quickly|slowly)",group:0,tag:"Verb",reason:"done-well"},{match:"#Adjective and [#Gerund] !#Preposition?",group:0,tag:"Adjective",reason:"rude-and-x"},{match:"#Copula #Adverb? (over|under) [#PastTense]",group:0,tag:"Adjective",reason:"over-cooked"},{match:"#Copula #Adjective+ (and|or) [#PastTense]$",group:0,tag:"Adjective",reason:"bland-and-overcooked"},{match:"got #Adverb? [#PastTense] of",group:0,tag:"Adjective",reason:"got-tired-of"},{match:"(seem|seems|seemed|appear|appeared|appears|feel|feels|felt|sound|sounds|sounded) (#Adverb|#Adjective)? [#PastTense]",group:0,tag:"Adjective",reason:"felt-loved"},{match:"(seem|feel|seemed|felt) [#PastTense #Particle?]",group:0,tag:"Adjective",reason:"seem-confused"},{match:"a (bit|little|tad) [#PastTense #Particle?]",group:0,tag:"Adjective",reason:"a-bit-confused"},{match:"not be [%Adj|Past% #Particle?]",group:0,tag:"Adjective",reason:"do-not-be-confused"},{match:"#Copula just [%Adj|Past% #Particle?]",group:0,tag:"Adjective",reason:"is-just-right"},{match:"as [#Infinitive] as",group:0,tag:"Adjective",reason:"as-pale-as"},{match:"[%Adj|Past%] and #Adjective",group:0,tag:"Adjective",reason:"faled-and-oppressive"},{match:"or [#PastTense] #Noun",group:0,tag:"Adjective",notIf:"(#Copula|#Pronoun)",reason:"or-heightened-emotion"},{match:"(become|became|becoming|becomes) [#Verb]",group:0,tag:"Adjective",reason:"become-verb"},{match:"#Possessive [#PastTense] #Noun",group:0,tag:"Adjective",reason:"declared-intentions"},{match:"#Copula #Pronoun [%Adj|Present%]",group:0,tag:"Adjective",reason:"is-he-cool"},{match:"#Copula [%Adj|Past%] with",group:0,tag:"Adjective",notIf:"(associated|worn|baked|aged|armed|bound|fried|loaded|mixed|packed|pumped|filled|sealed)",reason:"is-crowded-with"},{match:"#Copula #Adverb? [%Adj|Present%]$",group:0,tag:"Adjective",reason:"was-empty$"}],[{match:"will (#Adverb|not)+? [have] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"will-have-vb"},{match:"[#Copula] (#Adverb|not)+? (#Gerund|#PastTense)",group:0,tag:"Auxiliary",reason:"copula-walking"},{match:"[(#Modal|did)+] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"modal-verb"},{match:"#Modal (#Adverb|not)+? [have] (#Adverb|not)+? [had] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"would-have"},{match:"[(has|had)] (#Adverb|not)+? #PastTense",group:0,tag:"Auxiliary",reason:"had-walked"},{match:"[(do|does|did|will|have|had|has|got)] (not|#Adverb)+? #Verb",group:0,tag:"Auxiliary",reason:"have-had"},{match:"[about to] #Adverb? #Verb",group:0,tag:["Auxiliary","Verb"],reason:"about-to"},{match:"#Modal (#Adverb|not)+? [be] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"would-be"},{match:"[(#Modal|had|has)] (#Adverb|not)+? [been] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"had-been"},{match:"[(be|being|been)] #Participle",group:0,tag:"Auxiliary",reason:"being-driven"},{match:"[may] #Adverb? #Infinitive",group:0,tag:"Auxiliary",reason:"may-want"},{match:"#Copula (#Adverb|not)+? [(be|being|been)] #Adverb+? #PastTense",group:0,tag:"Auxiliary",reason:"being-walked"},{match:"will [be] #PastTense",group:0,tag:"Auxiliary",reason:"will-be-x"},{match:"[(be|been)] (#Adverb|not)+? #Gerund",group:0,tag:"Auxiliary",reason:"been-walking"},{match:"[used to] #PresentTense",group:0,tag:"Auxiliary",reason:"used-to-walk"},{match:"#Copula (#Adverb|not)+? [going to] #Adverb+? #PresentTense",group:0,tag:"Auxiliary",reason:"going-to-walk"},{match:"#Imperative [(me|him|her)]",group:0,tag:"Reflexive",reason:"tell-him"},{match:"(is|was) #Adverb? [no]",group:0,tag:"Negative",reason:"is-no"},{match:"[(been|had|became|came)] #PastTense",group:0,notIf:"#PhrasalVerb",tag:"Auxiliary",reason:"been-told"},{match:"[(being|having|getting)] #Verb",group:0,tag:"Auxiliary",reason:"being-born"},{match:"[be] #Gerund",group:0,tag:"Auxiliary",reason:"be-walking"},{match:"[better] #PresentTense",group:0,tag:"Modal",notIf:"(#Copula|#Gerund)",reason:"better-go"},{match:"even better",tag:"Adverb #Comparative",reason:"even-better"}],[{match:"(#Verb && @hasHyphen) up",tag:"PhrasalVerb",reason:"foo-up"},{match:"(#Verb && @hasHyphen) off",tag:"PhrasalVerb",reason:"foo-off"},{match:"(#Verb && @hasHyphen) over",tag:"PhrasalVerb",reason:"foo-over"},{match:"(#Verb && @hasHyphen) out",tag:"PhrasalVerb",reason:"foo-out"},{match:"[#Verb (in|out|up|down|off|back)] (on|in)",notIf:"#Copula",tag:"PhrasalVerb Particle",reason:"walk-in-on"},{match:"(lived|went|crept|go) [on] for",group:0,tag:"PhrasalVerb",reason:"went-on"},{match:"#Verb (up|down|in|on|for)$",tag:"PhrasalVerb #Particle",notIf:"#PhrasalVerb",reason:"come-down$"},{match:"help [(stop|end|make|start)]",group:0,tag:"Infinitive",reason:"help-stop"},{match:"#PhrasalVerb (in && #Particle) #Determiner",tag:"#Verb #Preposition #Determiner",unTag:"PhrasalVerb",reason:"work-in-the"},{match:"[(stop|start|finish|help)] #Gerund",group:0,tag:"Infinitive",reason:"start-listening"},{match:"#Verb (him|her|it|us|himself|herself|itself|everything|something) [(up|down)]",group:0,tag:"Adverb",reason:"phrasal-pronoun-advb"}],[{match:"^do not? [#Infinitive #Particle?]",notIf:lEe,group:0,tag:"Imperative",reason:"do-eat"},{match:"^please do? not? [#Infinitive #Particle?]",group:0,tag:"Imperative",reason:"please-go"},{match:"^just do? not? [#Infinitive #Particle?]",group:0,tag:"Imperative",reason:"just-go"},{match:"^[#Infinitive] it #Comparative",notIf:lEe,group:0,tag:"Imperative",reason:"do-it-better"},{match:"^[#Infinitive] it (please|now|again|plz)",notIf:lEe,group:0,tag:"Imperative",reason:"do-it-please"},{match:"^[#Infinitive] (#Adjective|#Adverb)$",group:0,tag:"Imperative",notIf:"(so|such|rather|enough)",reason:"go-quickly"},{match:"^[#Infinitive] (up|down|over) #Determiner",group:0,tag:"Imperative",reason:"turn-down"},{match:"^[#Infinitive] (your|my|the|a|an|any|each|every|some|more|with|on)",group:0,notIf:"like",tag:"Imperative",reason:"eat-my-shorts"},{match:"^[#Infinitive] (him|her|it|us|me|there)",group:0,tag:"Imperative",reason:"tell-him"},{match:"^[#Infinitive] #Adjective #Noun$",group:0,tag:"Imperative",reason:"avoid-loud-noises"},{match:"^[#Infinitive] (#Adjective|#Adverb)? and #Infinitive",group:0,tag:"Imperative",reason:"call-and-reserve"},{match:"^(go|stop|wait|hurry) please?$",tag:"Imperative",reason:"go"},{match:"^(somebody|everybody) [#Infinitive]",group:0,tag:"Imperative",reason:"somebody-call"},{match:"^let (us|me) [#Infinitive]",group:0,tag:"Imperative",reason:"lets-leave"},{match:"^[(shut|close|open|start|stop|end|keep)] #Determiner #Noun",group:0,tag:"Imperative",reason:"shut-the-door"},{match:"^[#PhrasalVerb #Particle] #Determiner #Noun",group:0,tag:"Imperative",reason:"turn-off-the-light"},{match:"^[go] to .",group:0,tag:"Imperative",reason:"go-to-toronto"},{match:"^#Modal you [#Infinitive]",group:0,tag:"Imperative",reason:"would-you-"},{match:"^never [#Infinitive]",group:0,tag:"Imperative",reason:"never-stop"},{match:"^come #Infinitive",tag:"Imperative",notIf:"on",reason:"come-have"},{match:"^come and? #Infinitive",tag:"Imperative . Imperative",notIf:"#PhrasalVerb",reason:"come-and-have"},{match:"^stay (out|away|back)",tag:"Imperative",reason:"stay-away"},{match:"^[(stay|be|keep)] #Adjective",group:0,tag:"Imperative",reason:"stay-cool"},{match:"^[keep it] #Adjective",group:0,tag:"Imperative",reason:"keep-it-cool"},{match:"^do not [#Infinitive]",group:0,tag:"Imperative",reason:"do-not-be"},{match:"[#Infinitive] (yourself|yourselves)",group:0,tag:"Imperative",reason:"allow-yourself"},{match:"[#Infinitive] what .",group:0,tag:"Imperative",reason:"look-what"},{match:"^[#Infinitive] #Gerund",group:0,tag:"Imperative",reason:"keep-playing"},{match:"^[#Infinitive] (to|for|into|toward|here|there)",group:0,tag:"Imperative",reason:"go-to"},{match:"^[#Infinitive] (and|or) #Infinitive",group:0,tag:"Imperative",reason:"inf-and-inf"},{match:"^[%Noun|Verb%] to",group:0,tag:"Imperative",reason:"commit-to"},{match:"^[#Infinitive] #Adjective? #Singular #Singular",group:0,tag:"Imperative",reason:"maintain-eye-contact"},{match:"do not (forget|omit|neglect) to [#Infinitive]",group:0,tag:"Imperative",reason:"do-not-forget"},{match:"^[(ask|wear|pay|look|help|show|watch|act|fix|kill|stop|start|turn|try|win)] #Noun",group:0,tag:"Imperative",reason:"pay-attention"}],[{match:"(that|which) were [%Adj|Gerund%]",group:0,tag:"Gerund",reason:"that-were-growing"},{match:"#Gerund [#Gerund] #Plural",group:0,tag:"Adjective",reason:"hard-working-fam"}],[{match:"u r",tag:"#Pronoun #Copula",reason:"u r"},{match:"#Noun [(who|whom)]",group:0,tag:"Determiner",reason:"captain-who"},{match:"[had] #Noun+ #PastTense",group:0,tag:"Condition",reason:"had-he"},{match:"[were] #Noun+ to #Infinitive",group:0,tag:"Condition",reason:"were-he"},{match:"some sort of",tag:"Adjective Noun Conjunction",reason:"some-sort-of"},{match:"of some sort",tag:"Conjunction Adjective Noun",reason:"of-some-sort"},{match:"[such] (a|an|is)? #Noun",group:0,tag:"Determiner",reason:"such-skill"},{match:"[right] (before|after|in|into|to|toward)",group:0,tag:"#Adverb",reason:"right-into"},{match:"#Preposition [about]",group:0,tag:"Adjective",reason:"at-about"},{match:"(are|#Modal|see|do|for) [ya]",group:0,tag:"Pronoun",reason:"are-ya"},{match:"[long live] .",group:0,tag:"#Adjective #Infinitive",reason:"long-live"},{match:"[plenty] of",group:0,tag:"#Uncountable",reason:"plenty-of"},{match:"(always|nearly|barely|practically) [there]",group:0,tag:"Adjective",reason:"always-there"},{match:"[there] (#Adverb|#Pronoun)? #Copula",group:0,tag:"There",reason:"there-is"},{match:"#Copula [there] .",group:0,tag:"There",reason:"is-there"},{match:"#Modal #Adverb? [there]",group:0,tag:"There",reason:"should-there"},{match:"^[do] (you|we|they)",group:0,tag:"QuestionWord",reason:"do-you"},{match:"^[does] (he|she|it|#ProperNoun)",group:0,tag:"QuestionWord",reason:"does-he"},{match:"#Determiner #Noun+ [who] #Verb",group:0,tag:"Preposition",reason:"the-x-who"},{match:"#Determiner #Noun+ [which] #Verb",group:0,tag:"Preposition",reason:"the-x-which"},{match:"a [while]",group:0,tag:"Noun",reason:"a-while"},{match:"guess who",tag:"#Infinitive #QuestionWord",reason:"guess-who"},{match:"[fucking] !#Verb",group:0,tag:"#Gerund",reason:"f-as-gerund"}],[{match:"university of #Place",tag:"Organization",reason:"university-of-Foo"},{match:"#Noun (&|n) #Noun",tag:"Organization",reason:"Noun-&-Noun"},{match:"#Organization of the? #ProperNoun",tag:"Organization",reason:"org-of-place",safe:!0},{match:"#Organization #Country",tag:"Organization",reason:"org-country"},{match:"#ProperNoun #Organization",tag:"Organization",notIf:"#FirstName",reason:"titlecase-org"},{match:"#ProperNoun (ltd|co|inc|dept|assn|bros)",tag:"Organization",reason:"org-abbrv"},{match:"the [#Acronym]",group:0,tag:"Organization",reason:"the-acronym",safe:!0},{match:"government of the? [#Place+]",tag:"Organization",reason:"government-of-x"},{match:"(health|school|commerce) board",tag:"Organization",reason:"school-board"},{match:"(nominating|special|conference|executive|steering|central|congressional) committee",tag:"Organization",reason:"special-comittee"},{match:"(world|global|international|national|#Demonym) #Organization",tag:"Organization",reason:"global-org"},{match:"#Noun+ (public|private) school",tag:"School",reason:"noun-public-school"},{match:"#Place+ #SportsTeam",tag:"SportsTeam",reason:"place-sportsteam"},{match:"(dc|atlanta|minnesota|manchester|newcastle|sheffield) united",tag:"SportsTeam",reason:"united-sportsteam"},{match:"#Place+ fc",tag:"SportsTeam",reason:"fc-sportsteam"},{match:"#Place+ #Noun{0,2} (club|society|group|team|committee|commission|association|guild|crew)",tag:"Organization",reason:"place-noun-society"}],[{match:"(west|north|south|east|western|northern|southern|eastern)+ #Place",tag:"Region",reason:"west-norfolk"},{match:"#City [(al|ak|az|ar|ca|ct|dc|fl|ga|id|il|nv|nh|nj|ny|oh|pa|sc|tn|tx|ut|vt|pr)]",group:0,tag:"Region",reason:"us-state"},{match:"portland [or]",group:0,tag:"Region",reason:"portland-or"},{match:"#ProperNoun+ (cliff|place|range|pit|place|point|room|grounds|ruins)",tag:"Place",reason:"foo-point"},{match:"in [#ProperNoun] #Place",group:0,tag:"Place",reason:"propernoun-place"},{match:"#Value #Noun (st|street|rd|road|crescent|cr|way|tr|terrace|avenue|ave)",tag:"Address",reason:"address-st"},{match:"(port|mount|mt) #ProperName",tag:"Place",reason:"port-name"}],[{match:"[so] #Noun",group:0,tag:"Conjunction",reason:"so-conj"},{match:"[(who|what|where|why|how|when)] #Noun #Copula #Adverb? (#Verb|#Adjective)",group:0,tag:"Conjunction",reason:"how-he-is-x"},{match:"#Copula [(who|what|where|why|how|when)] #Noun",group:0,tag:"Conjunction",reason:"when-he"},{match:"#Verb [that] #Pronoun",group:0,tag:"Conjunction",reason:"said-that-he"},{match:"#Noun [that] #Copula",group:0,tag:"Conjunction",reason:"that-are"},{match:"#Noun [that] #Verb #Adjective",group:0,tag:"Conjunction",reason:"that-seem"},{match:"#Noun #Copula not? [that] #Adjective",group:0,tag:"Adverb",reason:"that-adj"},{match:"#Verb #Adverb? #Noun [(that|which)]",group:0,tag:"Preposition",reason:"that-prep"},{match:"@hasComma [which] (#Pronoun|#Verb)",group:0,tag:"Preposition",reason:"which-copula"},{match:"#Noun [like] #Noun",group:0,tag:"Preposition",reason:"noun-like"},{match:"^[like] #Determiner",group:0,tag:"Preposition",reason:"like-the"},{match:"a #Noun [like] (#Noun|#Determiner)",group:0,tag:"Preposition",reason:"a-noun-like"},{match:"#Adverb [like]",group:0,tag:"Verb",reason:"really-like"},{match:"(not|nothing|never) [like]",group:0,tag:"Preposition",reason:"nothing-like"},{match:"#Infinitive #Pronoun [like]",group:0,tag:"Preposition",reason:"treat-them-like"},{match:"[#QuestionWord] (#Pronoun|#Determiner)",group:0,tag:"Preposition",reason:"how-he"},{match:"[#QuestionWord] #Participle",group:0,tag:"Preposition",reason:"when-stolen"},{match:"[how] (#Determiner|#Copula|#Modal|#PastTense)",group:0,tag:"QuestionWord",reason:"how-is"},{match:"#Plural [(who|which|when)] .",group:0,tag:"Preposition",reason:"people-who"}],[{match:"holy (shit|fuck|hell)",tag:"Expression",reason:"swears-expression"},{match:"^[(well|so|okay|now)] !#Adjective?",group:0,tag:"Expression",reason:"well-"},{match:"^come on",tag:"Expression",reason:"come-on"},{match:"(say|says|said) [sorry]",group:0,tag:"Expression",reason:"say-sorry"},{match:"^(ok|alright|shoot|hell|anyways)",tag:"Expression",reason:"ok-"},{match:"^(say && @hasComma)",tag:"Expression",reason:"say-"},{match:"^(like && @hasComma)",tag:"Expression",reason:"like-"},{match:"^[(dude|man|girl)] #Pronoun",group:0,tag:"Expression",reason:"dude-i"}]);let cEe=null;const dEe={postTagger:function(e){const{world:t}=e,{model:n,methods:r}=t;cEe=cEe||r.one.buildNet(n.two.matches,t);let o=r.two.quickSplit(e.document).map((e=>{let t=e[0];return[t.index[0],t.index[1],t.index[1]+e.length]})),a=e.update(o);return a.cache(),a.sweep(cEe),e.uncache(),e.unfreeze(),e},tagger:e=>e.compute(["freeze","lexicon","preTagger","postTagger","unfreeze"])};const hEe={api:function(e){e.prototype.confidence=function(){let e=0,t=0;return this.docs.forEach((n=>{n.forEach((n=>{t+=1,e+=n.confidence||1}))})),0===t?1:(e=>Math.round(100*e)/100)(e/t)},e.prototype.tagger=function(){return this.compute(["tagger"])}},compute:dEe,model:{two:{matches:uEe}},hooks:["postTagger"]},pEe=hEe,fEe=function(e,t){let n=function(e){return Object.keys(e.hooks).filter((e=>!e.startsWith("#")&&!e.startsWith("%")))}(t);if(0===n.length)return e;e._cache||e.cache();let r=e._cache;return e.filter(((e,t)=>n.some((e=>r[t].has(e)))))},mEe=function(e,t){let n=t;"string"===typeof t&&(n=this.buildNet([{match:t}]));let r=this.tokenize(e),o=fEe(r,n);return o.found?(o.compute(["index","tagger"]),o.match(t)):r.none()},gEe={lib:{lazy:mEe}},vEe=function(e,t){let n=t;return e.forEach((e=>{e.has("#Infinitive")||(n=function(e,t){let n=(0,e.methods.two.transform.verb.conjugate)(t,e.model);return e.has("#Gerund")?n.Gerund:e.has("#PastTense")?n.PastTense:e.has("#PresentTense")?n.PresentTense:e.has("#Gerund")?n.Gerund:t}(e,t)),e.replaceWith(n)})),e},bEe=function(e,t,n){let r=e.split(/ /g).map((e=>e.toLowerCase().trim()));r=r.filter((e=>e)),r=r.map((e=>`{${e}}`)).join(" ");let o=this.match(r);return n&&(o=o.if(n)),o.has("#Verb")?vEe(o,t):o.has("#Noun")?function(e,t){let n=t;e.has("#Plural")&&(n=(0,e.methods.two.transform.noun.toPlural)(t,e.model));e.replaceWith(n,{possessives:!0})}(o,t):o.has("#Adverb")?function(e,t){const{toAdverb:n}=e.methods.two.transform.adjective;let r=n(t);r&&e.replaceWith(r)}(o,t):o.has("#Adjective")?function(e,t){const{toComparative:n,toSuperlative:r}=e.methods.two.transform.adjective;let o=t;e.has("#Comparative")?o=n(o,e.model):e.has("#Superlative")&&(o=r(o,e.model)),o&&e.replaceWith(o)}(o,t):this},yEe={api:function(e){e.prototype.swap=bEe}};ywe.plugin(PSe),ywe.plugin(iEe),ywe.plugin(pEe),ywe.plugin(gEe),ywe.plugin(yEe);const wEe=ywe,xEe=function(e){const{fromComparative:t,fromSuperlative:n}=e.methods.two.transform.adjective;let r=e.text("normal");return e.has("#Comparative")?t(r,e.model):e.has("#Superlative")?n(r,e.model):r},kEe={api:function(e){class t extends e{constructor(e,t,n){super(e,t,n),this.viewType="Adjectives"}json(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{toAdverb:t,toNoun:n,toSuperlative:r,toComparative:o}=this.methods.two.transform.adjective;return e.normal=!0,this.map((a=>{let i=a.toView().json(e)[0]||{},s=xEe(a);return i.adjective={adverb:t(s,this.model),noun:n(s,this.model),superlative:r(s,this.model),comparative:o(s,this.model)},i}),[])}adverbs(){return this.before("#Adverb+$").concat(this.after("^#Adverb+"))}conjugate(e){const{toComparative:t,toSuperlative:n,toNoun:r,toAdverb:o}=this.methods.two.transform.adjective;return this.getNth(e).map((e=>{let a=xEe(e);return{Adjective:a,Comparative:t(a,this.model),Superlative:n(a,this.model),Noun:r(a,this.model),Adverb:o(a,this.model)}}),[])}toComparative(e){const{toComparative:t}=this.methods.two.transform.adjective;return this.getNth(e).map((e=>{let n=xEe(e),r=t(n,this.model);return e.replaceWith(r)}))}toSuperlative(e){const{toSuperlative:t}=this.methods.two.transform.adjective;return this.getNth(e).map((e=>{let n=xEe(e),r=t(n,this.model);return e.replaceWith(r)}))}toAdverb(e){const{toAdverb:t}=this.methods.two.transform.adjective;return this.getNth(e).map((e=>{let n=xEe(e),r=t(n,this.model);return e.replaceWith(r)}))}toNoun(e){const{toNoun:t}=this.methods.two.transform.adjective;return this.getNth(e).map((e=>{let n=xEe(e),r=t(n,this.model);return e.replaceWith(r)}))}}e.prototype.adjectives=function(e){let n=this.match("#Adjective");return n=n.getNth(e),new t(n.document,n.pointer)},e.prototype.superlatives=function(e){let n=this.match("#Superlative");return n=n.getNth(e),new t(n.document,n.pointer)},e.prototype.comparatives=function(e){let n=this.match("#Comparative");return n=n.getNth(e),new t(n.document,n.pointer)}}},CEe={api:function(e){class t extends e{constructor(e,t,n){super(e,t,n),this.viewType="Adverbs"}conjugate(e){return this.getNth(e).map((e=>{let t=function(e){return e.compute("root").text("root")}(e);return{Adverb:e.text("normal"),Adjective:t}}),[])}json(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.methods.two.transform.adjective.fromAdverb;return e.normal=!0,this.map((n=>{let r=n.toView().json(e)[0]||{};return r.adverb={adjective:t(r.normal)},r}),[])}}e.prototype.adverbs=function(e){let n=this.match("#Adverb");return n=n.getNth(e),new t(n.document,n.pointer)}}},SEe=function(e){let t=this;t=function(e){let t=e.parentheses();return t=t.filter((e=>e.wordCount()>=3&&e.has("#Verb")&&e.has("#Noun"))),e.splitOn(t)}(t),t=function(e){let t=e.quotations();return t=t.filter((e=>e.wordCount()>=3&&e.has("#Verb")&&e.has("#Noun"))),e.splitOn(t)}(t),t=function(e){let t=e.match("@hasComma");return t=t.filter((e=>{if(1===e.growLeft(".").wordCount())return!1;if(1===e.growRight(". .").wordCount())return!1;let t=e.grow(".");return t=t.ifNo("@hasComma @hasComma"),t=t.ifNo("@hasComma (and|or) ."),t=t.ifNo("(#City && @hasComma) #Country"),t=t.ifNo("(#WeekDay && @hasComma) #Date"),t=t.ifNo("(#Date+ && @hasComma) #Value"),t=t.ifNo("(#Adjective && @hasComma) #Adjective"),t.found})),e.splitAfter(t)}(t),t=t.splitAfter("(@hasEllipses|@hasSemicolon|@hasDash|@hasColon)"),t=t.splitAfter("^#Pronoun (said|says)"),t=t.splitBefore("(said|says) #ProperNoun$"),t=t.splitBefore(". . if .{4}"),t=t.splitBefore("and while"),t=t.splitBefore("now that"),t=t.splitBefore("ever since"),t=t.splitBefore("(supposing|although)"),t=t.splitBefore("even (while|if|though)"),t=t.splitBefore("(whereas|whose)"),t=t.splitBefore("as (though|if)"),t=t.splitBefore("(til|until)");let n=t.match("#Verb .* [but] .* #Verb",0);n.found&&(t=t.splitBefore(n));let r=t.if("if .{2,9} then .").match("then");return t=t.splitBefore(r),"number"===typeof e&&(t=t.get(e)),t},EEe=function(e){let t=[],n=null;return e.clauses().docs.forEach((e=>{e.forEach((e=>{e.chunk&&e.chunk===n?t[t.length-1][2]=e.index[1]+1:(n=e.chunk,t.push([e.index[0],e.index[1],e.index[1]+1]))})),n=null})),e.update(t)},NEe=function(e){class t extends e{constructor(e,t,n){super(e,t,n),this.viewType="Chunks"}isVerb(){return this.filter((e=>e.has("<Verb>")))}isNoun(){return this.filter((e=>e.has("<Noun>")))}isAdjective(){return this.filter((e=>e.has("<Adjective>")))}isPivot(){return this.filter((e=>e.has("<Pivot>")))}debug(){return this.toView().debug("chunks"),this}update(e){let n=new t(this.document,e);return n._cache=this._cache,n}}e.prototype.chunks=function(e){let n=EEe(this);return n=n.getNth(e),new t(this.document,n.pointer)},e.prototype.clauses=SEe},IEe={this:"Noun",then:"Pivot"},$Ee=function(e){for(let t=0;t<e.length;t+=1)for(let n=0;n<e[t].length;n+=1){let r=e[t][n];!0!==IEe.hasOwnProperty(r.normal)?r.tags.has("Verb")?r.chunk="Verb":r.tags.has("Noun")||r.tags.has("Determiner")||r.tags.has("Value")?r.chunk="Noun":r.tags.has("QuestionWord")&&(r.chunk="Pivot"):r.chunk=IEe[r.normal]}},TEe=function(e){for(let t=0;t<e.length;t+=1)for(let n=0;n<e[t].length;n+=1){let r=e[t][n];if(r.chunk)continue;let o=e[t][n+1],a=e[t][n-1];if(r.tags.has("Adjective")){if(a&&a.tags.has("Copula")){r.chunk="Adjective";continue}if(a&&a.tags.has("Determiner")){r.chunk="Noun";continue}if(o&&o.tags.has("Noun")){r.chunk="Noun";continue}}else if(r.tags.has("Adverb")||r.tags.has("Negative")){if(a&&a.tags.has("Adjective")){r.chunk="Adjective";continue}if(a&&a.tags.has("Verb")){r.chunk="Verb";continue}if(o&&o.tags.has("Adjective")){r.chunk="Adjective";continue}if(o&&o.tags.has("Verb")){r.chunk="Verb";continue}}}},AEe=[{match:"[that] #Determiner #Noun",group:0,chunk:"Pivot"},{match:"#PastTense [that]",group:0,chunk:"Pivot"},{match:"[so] #Determiner",group:0,chunk:"Pivot"},{match:"#Copula #Adverb+? [#Adjective]",group:0,chunk:"Adjective"},{match:"#Adjective and #Adjective",chunk:"Adjective"},{match:"#Adverb+ and #Adverb #Verb",chunk:"Verb"},{match:"#Gerund #Adjective$",chunk:"Verb"},{match:"#Gerund to #Verb",chunk:"Verb"},{match:"#PresentTense and #PresentTense",chunk:"Verb"},{match:"#Adverb #Negative",chunk:"Verb"},{match:"(want|wants|wanted) to #Infinitive",chunk:"Verb"},{match:"#Verb #Reflexive",chunk:"Verb"},{match:"#Verb [to] #Adverb? #Infinitive",group:0,chunk:"Verb"},{match:"[#Preposition] #Gerund",group:0,chunk:"Verb"},{match:"#Infinitive [that] <Noun>",group:0,chunk:"Verb"},{match:"#Noun of #Determiner? #Noun",chunk:"Noun"},{match:"#Value+ #Adverb? #Adjective",chunk:"Noun"},{match:"the [#Adjective] #Noun",chunk:"Noun"},{match:"#Singular in #Determiner? #Singular",chunk:"Noun"},{match:"#Plural [in] #Determiner? #Noun",group:0,chunk:"Pivot"},{match:"#Noun and #Determiner? #Noun",notIf:"(#Possessive|#Pronoun)",chunk:"Noun"}];let OEe=null;const REe=function(e,t,n){const{methods:r}=n;OEe=OEe||r.one.buildNet(AEe,n),e.sweep(OEe)},PEe=function(e,t){if(("undefined"===typeof process?self.env||{}:{NODE_ENV:"production",PUBLIC_URL:"/websm",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).DEBUG_CHUNKS){let n=(e.normal+"'").padEnd(8);console.log(`  | '${n}  \u2192  \x1b[34m${t.padEnd(12)}\x1b[0m \x1b[2m -fallback- \x1b[0m`)}e.chunk=t},DEe=function(e){for(let t=0;t<e.length;t+=1)for(let n=0;n<e[t].length;n+=1){let r=e[t][n];void 0===r.chunk&&(r.tags.has("Conjunction")||r.tags.has("Preposition")?PEe(r,"Pivot"):r.tags.has("Adverb")?PEe(r,"Verb"):r.chunk="Noun")}},FEe=function(e){let t=[],n=null;e.forEach((e=>{for(let r=0;r<e.length;r+=1){let o=e[r];n&&o.chunk===n?t[t.length-1].terms.push(o):(t.push({chunk:o.chunk,terms:[o]}),n=o.chunk)}})),t.forEach((e=>{if("Verb"===e.chunk){const t=e.terms.find((e=>e.tags.has("Verb")));t||e.terms.forEach((e=>e.chunk=null))}}))},_Ee={chunks:function(e){const{document:t,world:n}=e;$Ee(t),TEe(t),REe(e,t,n),DEe(t,n),FEe(t,n)}},MEe={compute:_Ee,api:NEe,hooks:["chunks"]},zEe=/\./g,LEe=function(e){class t extends e{constructor(e,t,n){super(e,t,n),this.viewType="Acronyms"}strip(){return this.docs.forEach((e=>{e.forEach((e=>{e.text=e.text.replace(zEe,""),e.normal=e.normal.replace(zEe,"")}))})),this}addPeriods(){return this.docs.forEach((e=>{e.forEach((e=>{e.text=e.text.replace(zEe,""),e.normal=e.normal.replace(zEe,""),e.text=e.text.split("").join(".")+".",e.normal=e.normal.split("").join(".")+"."}))})),this}}e.prototype.acronyms=function(e){let n=this.match("#Acronym");return n=n.getNth(e),new t(n.document,n.pointer)}},BEe=/\(/,jEe=/\)/,HEe=function(e,t){for(;t<e.length;t+=1)if(e[t].post&&jEe.test(e[t].post)){let[,n]=e[t].index;return n=n||0,n}return null},VEe=function(e){class t extends e{constructor(e,t,n){super(e,t,n),this.viewType="Possessives"}strip(){return function(e){return e.docs.forEach((e=>{e[0].pre=e[0].pre.replace(BEe,"");let t=e[e.length-1];t.post=t.post.replace(jEe,"")})),e}(this)}}e.prototype.parentheses=function(e){let n=function(e){let t=[];return e.docs.forEach((e=>{for(let n=0;n<e.length;n+=1){let r=e[n];if(r.pre&&BEe.test(r.pre)){let r=HEe(e,n);if(null!==r){let[o,a]=e[n].index;t.push([o,a,r+1,e[n].id]),n=r}}}})),e.update(t)}(this);return n=n.getNth(e),new t(n.document,n.pointer)}},WEe=/'s$/,GEe=function(e){class t extends e{constructor(e,t,n){super(e,t,n),this.viewType="Possessives"}strip(){return this.docs.forEach((e=>{e.forEach((e=>{e.text=e.text.replace(WEe,""),e.normal=e.normal.replace(WEe,"")}))})),this}}e.prototype.possessives=function(e){let n=function(e){let t=e.match("#Possessive+");return t.has("#Person")&&(t=t.growLeft("#Person+")),t.has("#Place")&&(t=t.growLeft("#Place+")),t.has("#Organization")&&(t=t.growLeft("#Organization+")),t}(this);return n=n.getNth(e),new t(n.document,n.pointer)}},UEe={'"':'"',"\uff02":"\uff02","'":"'","\u201c":"\u201d","\u2018":"\u2019","\u201f":"\u201d","\u201b":"\u2019","\u201e":"\u201d","\u2e42":"\u201d","\u201a":"\u2019","\xab":"\xbb","\u2039":"\u203a","\u2035":"\u2032","\u2036":"\u2033","\u2037":"\u2034","\u301d":"\u301e","`":"\xb4","\u301f":"\u301e"},KEe=RegExp("["+Object.keys(UEe).join("")+"]"),qEe=RegExp("["+Object.values(UEe).join("")+"]"),XEe=function(e,t){const n=e[t].pre.match(KEe)[0]||"";if(!n||!UEe[n])return null;const r=UEe[n];for(;t<e.length;t+=1)if(e[t].post&&e[t].post.match(r))return t;return null},JEe=function(e){class t extends e{constructor(e,t,n){super(e,t,n),this.viewType="Possessives"}strip(){return function(e){e.docs.forEach((e=>{e[0].pre=e[0].pre.replace(KEe,"");let t=e[e.length-1];t.post=t.post.replace(qEe,"")}))}(this)}}e.prototype.quotations=function(e){let n=function(e){let t=[];return e.docs.forEach((e=>{for(let n=0;n<e.length;n+=1){let r=e[n];if(r.pre&&KEe.test(r.pre)){let r=XEe(e,n);if(null!==r){let[o,a]=e[n].index;t.push([o,a,r+1,e[n].id]),n=r}}}})),e.update(t)}(this);return n=n.getNth(e),new t(n.document,n.pointer)}},YEe=function(e){let t=this.splitAfter("@hasComma");return t=t.match("#PhoneNumber+"),t=t.getNth(e),t},QEe=[["hyphenated","@hasHyphen ."],["hashTags","#HashTag"],["emails","#Email"],["emoji","#Emoji"],["emoticons","#Emoticon"],["atMentions","#AtMention"],["urls","#Url"],["conjunctions","#Conjunction"],["prepositions","#Preposition"],["abbreviations","#Abbreviation"],["honorifics","#Honorific"]];let ZEe=[["emojis","emoji"],["atmentions","atMentions"]];const eNe=function(e){QEe.forEach((t=>{e.prototype[t[0]]=function(e){let n=this.match(t[1]);return"number"===typeof e?n.get(e):n}})),e.prototype.phoneNumbers=YEe,ZEe.forEach((t=>{e.prototype[t[0]]=e.prototype[t[1]]}))},tNe=/\//,nNe=function(e){class t extends e{constructor(e,t,n){super(e,t,n),this.viewType="Slashes"}split(){return this.map((e=>{let t=e.text().split(tNe);return(e=e.replaceWith(t.join(" "))).growRight("("+t.join("|")+")+")}))}}e.prototype.slashes=function(e){let n=this.match("#SlashedTerm");return n=n.getNth(e),new t(n.document,n.pointer)}},rNe={api:function(e){LEe(e),VEe(e),GEe(e),JEe(e),eNe(e),nNe(e)}},oNe=function(e,t){e.docs.forEach((e=>{e.forEach(t)}))},aNe={case:e=>{oNe(e,(e=>{e.text=e.text.toLowerCase()}))},unicode:e=>{const t=e.world,n=t.methods.one.killUnicode;oNe(e,(e=>e.text=n(e.text,t)))},whitespace:e=>{oNe(e,(e=>{e.post=e.post.replace(/\s+/g," "),e.post=e.post.replace(/\s([.,?!:;])/g,"$1"),e.pre=e.pre.replace(/\s+/g,"")}))},punctuation:e=>{oNe(e,(e=>{e.post=e.post.replace(/[\u2013\u2014-]/g," "),e.post=e.post.replace(/[,:;]/g,""),e.post=e.post.replace(/\.{2,}/g,""),e.post=e.post.replace(/\?{2,}/g,"?"),e.post=e.post.replace(/!{2,}/g,"!"),e.post=e.post.replace(/\?!+/g,"?")}));let t=e.docs,n=t[t.length-1];if(n&&n.length>0){let e=n[n.length-1];e.post=e.post.replace(/ /g,"")}},contractions:e=>{e.contractions().expand()},acronyms:e=>{e.acronyms().strip()},parentheses:e=>{e.parentheses().strip()},possessives:e=>{e.possessives().strip()},quotations:e=>{e.quotations().strip()},emoji:e=>{e.emojis().remove()},honorifics:e=>{e.match("#Honorific+ #Person").honorifics().remove()},adverbs:e=>{e.adverbs().remove()},nouns:e=>{e.nouns().toSingular()},verbs:e=>{e.verbs().toInfinitive()},numbers:e=>{e.numbers().toNumber()},debullet:e=>{const t=/^\s*([-\u2013\u2014*\u2022])\s*$/;return e.docs.forEach((e=>{t.test(e[0].pre)&&(e[0].pre=e[0].pre.replace(t,""))})),e}},iNe=e=>e.split("|").reduce(((e,t)=>(e[t]=!0,e)),{}),sNe="unicode|punctuation|whitespace|acronyms",lNe="|case|contractions|parentheses|quotations|emoji|honorifics|debullet",uNe={light:iNe(sNe),medium:iNe(sNe+lNe),heavy:iNe(sNe+lNe+"|possessives|adverbs|nouns|verbs")};const cNe={api:function(e){e.prototype.normalize=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"string"===typeof e&&(e=uNe[e]),Object.keys(e).forEach((t=>{aNe.hasOwnProperty(t)&&aNe[t](this,e[t])})),this}}},dNe=function(e){let t=e.clauses().match("<Noun>"),n=t.match("@hasComma");return n=n.not("#Place"),n.found&&(t=t.splitAfter(n)),t=t.splitOn("#Expression"),t=t.splitOn("(he|she|we|you|they|i)"),t=t.splitOn("(#Noun|#Adjective) [(he|him|she|it)]",0),t=t.splitOn("[(he|him|she|it)] (#Determiner|#Value)",0),t=t.splitBefore("#Noun [(the|a|an)] #Adjective? #Noun",0),t=t.splitOn("[(here|there)] #Noun",0),t=t.splitOn("[#Noun] (here|there)",0),t=t.splitBefore("(our|my|their|your)"),t=t.splitOn("#Noun [#Determiner]",0),t=t.if("#Noun"),t},hNe=["after","although","as if","as long as","as","because","before","even if","even though","ever since","if","in order that","provided that","since","so that","than","that","though","unless","until","what","whatever","when","whenever","where","whereas","wherever","whether","which","whichever","who","whoever","whom","whomever","whose"],pNe=function(e){if(e.before("#Preposition$").found)return!0;if(!e.before().found)return!1;for(let t=0;t<hNe.length;t+=1)if(e.has(hNe[t]))return!0;return!1},fNe=function(e,t){if(e.has("#Plural"))return!0;if(e.has("#Noun and #Noun"))return!0;if(e.has("(we|they)"))return!0;if(!0===t.has("(#Pronoun|#Place|#Value|#Person|#Uncountable|#Month|#WeekDay|#Holiday|#Possessive)"))return!1;if(e.has("#Singular"))return!1;let n=t.text("normal");return n.length>3&&n.endsWith("s")&&!n.endsWith("ss")},mNe=function(e){let t=function(e){let t=e.clone();return t=t.match("#Noun+"),t=t.remove("(#Adjective|#Preposition|#Determiner|#Value)"),t=t.not("#Possessive"),t=t.first(),t.found?t:e}(e);return{determiner:e.match("#Determiner").eq(0),adjectives:e.match("#Adjective"),number:e.values(),isPlural:fNe(e,t),isSubordinate:pNe(e),root:t}},gNe=e=>e.text(),vNe=e=>e.json({terms:!1,normal:!0}).map((e=>e.normal)),bNe=function(e){if(!e.found)return null;let t=e.values(0);if(t.found){return(t.parse()[0]||{}).num}return null},yNe=function(e){let t=mNe(e);return{root:gNe(t.root),number:bNe(t.number),determiner:gNe(t.determiner),adjectives:vNe(t.adjectives),isPlural:t.isPlural,isSubordinate:t.isSubordinate}},wNe=function(e){return!e.has("^(#Uncountable|#ProperNoun|#Place|#Pronoun|#Acronym)+$")},xNe={tags:!0},kNe=function(e,t){if(!0===t.isPlural)return e;if(t.root.has("#Possessive")&&(t.root=t.root.possessives().strip()),!wNe(t.root))return e;const{methods:n,model:r}=e.world,{toPlural:o}=n.two.transform.noun;let a=o(t.root.text({keepPunct:!1}),r);e.match(t.root).replaceWith(a,xNe).tag("Plural","toPlural"),t.determiner.has("(a|an)")&&e.remove(t.determiner);let i=t.root.after("not? #Adverb+? [#Copula]",0);return i.found&&(i.has("is")?e.replace(i,"are"):i.has("was")&&e.replace(i,"were")),e},CNe={tags:!0},SNe=function(e,t){if(!1===t.isPlural)return e;const{methods:n,model:r}=e.world,{toSingular:o}=n.two.transform.noun;let a=o(t.root.text("normal"),r);return e.replace(t.root,a,CNe).tag("Singular","toPlural"),e},ENe=function(e){class t extends e{constructor(e,t,n){super(e,t,n),this.viewType="Nouns"}parse(e){return this.getNth(e).map(mNe)}json(e){let t="object"===typeof e?e:{};return this.getNth(e).map((e=>{let n=e.toView().json(t)[0]||{};return t&&!1!==t.noun&&(n.noun=yNe(e)),n}),[])}conjugate(e){const t=this.world.methods.two.transform.noun;return this.getNth(e).map((e=>{let n=mNe(e),r=n.root.compute("root").text("root"),o={Singular:r};return wNe(n.root)&&(o.Plural=t.toPlural(r,this.model)),o.Singular===o.Plural&&delete o.Plural,o}),[])}isPlural(e){let t=this.filter((e=>mNe(e).isPlural));return t.getNth(e)}isSingular(e){let t=this.filter((e=>!mNe(e).isPlural));return t.getNth(e)}adjectives(e){let t=this.update([]);return this.forEach((e=>{let n=mNe(e).adjectives;n.found&&(t=t.concat(n))})),t.getNth(e)}toPlural(e){return this.getNth(e).map((e=>kNe(e,mNe(e))))}toSingular(e){return this.getNth(e).map((e=>{let t=mNe(e);return SNe(e,t)}))}update(e){let n=new t(this.document,e);return n._cache=this._cache,n}}e.prototype.nouns=function(e){let n=dNe(this);return n=n.getNth(e),new t(this.document,n.pointer)}},NNe={api:ENe},INe=function(e,t){let n=e.match("#Fraction+");return n=n.filter((e=>!e.lookBehind("#Value and$").found)),n=n.notIf("#Value seconds"),"number"===typeof t&&(n=n.eq(t)),n},$Ne=e=>{const t=[{reg:/^(minus|negative)[\s-]/i,mult:-1},{reg:/^(a\s)?half[\s-](of\s)?/i,mult:.5}];for(let n=0;n<t.length;n++)if(!0===t[n].reg.test(e))return{amount:t[n].mult,str:e.replace(t[n].reg,"")};return{amount:1,str:e}},TNe={ones:{zeroth:0,first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,zero:0,one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9},teens:{tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,sixteen:16,seventeen:17,eighteen:18,nineteen:19},tens:{twentieth:20,thirtieth:30,fortieth:40,fourtieth:40,fiftieth:50,sixtieth:60,seventieth:70,eightieth:80,ninetieth:90,twenty:20,thirty:30,forty:40,fourty:40,fifty:50,sixty:60,seventy:70,eighty:80,ninety:90},multiples:{hundredth:100,thousandth:1e3,millionth:1e6,billionth:1e9,trillionth:1e12,quadrillionth:1e15,quintillionth:1e18,sextillionth:1e21,septillionth:1e24,hundred:100,thousand:1e3,million:1e6,billion:1e9,trillion:1e12,quadrillion:1e15,quintillion:1e18,sextillion:1e21,septillion:1e24,grand:1e3}},ANe=(e,t)=>{if(TNe.ones.hasOwnProperty(e)){if(t.ones||t.teens)return!1}else if(TNe.teens.hasOwnProperty(e)){if(t.ones||t.teens||t.tens)return!1}else if(TNe.tens.hasOwnProperty(e)&&(t.ones||t.teens||t.tens))return!1;return!0},ONe=function(e){let t="0.";for(let n=0;n<e.length;n++){let r=e[n];if(!0===TNe.ones.hasOwnProperty(r))t+=TNe.ones[r];else if(!0===TNe.teens.hasOwnProperty(r))t+=TNe.teens[r];else if(!0===TNe.tens.hasOwnProperty(r))t+=TNe.tens[r];else{if(!0!==/^[0-9]$/.test(r))return 0;t+=r}}return parseFloat(t)},RNe=e=>e=(e=(e=(e=(e=(e=(e=(e=e.replace(/1st$/,"1")).replace(/2nd$/,"2")).replace(/3rd$/,"3")).replace(/([4567890])r?th$/,"$1")).replace(/^[$\u20ac\xa5\xa3\xa2]/,"")).replace(/[%$\u20ac\xa5\xa3\xa2]$/,"")).replace(/,/g,"")).replace(/([0-9])([a-z\u00C0-\u00FF]{1,2})$/,"$1"),PNe=/^([0-9,. ]+)\/([0-9,. ]+)$/,DNe={"a few":3,"a couple":2,"a dozen":12,"two dozen":24,zero:0},FNe=e=>Object.keys(e).reduce(((t,n)=>t+=e[n]),0),_Ne=function(e){if(!0===DNe.hasOwnProperty(e))return DNe[e];if("a"===e||"an"===e)return 1;const t=$Ne(e);let n=null,r={},o=0,a=!1;const i=(e=t.str).split(/[ -]/);for(let s=0;s<i.length;s++){let e=i[s];if(e=RNe(e),!e||"and"===e)continue;if("-"===e||"negative"===e){a=!0;continue}if("-"===e.charAt(0)&&(a=!0,e=e.substring(1)),"point"===e)return o+=FNe(r),o+=ONe(i.slice(s+1,i.length)),o*=t.amount,o;const l=e.match(PNe);if(l){const e=parseFloat(l[1].replace(/[, ]/g,"")),t=parseFloat(l[2].replace(/[, ]/g,""));t&&(o+=e/t||0)}else{if(TNe.tens.hasOwnProperty(e)&&r.ones&&1===Object.keys(r).length&&(o=100*r.ones,r={}),!1===ANe(e,r))return null;if(/^[0-9.]+$/.test(e))r.ones=parseFloat(e);else if(!0===TNe.ones.hasOwnProperty(e))r.ones=TNe.ones[e];else if(!0===TNe.teens.hasOwnProperty(e))r.teens=TNe.teens[e];else if(!0===TNe.tens.hasOwnProperty(e))r.tens=TNe.tens[e];else if(!0===TNe.multiples.hasOwnProperty(e)){let t=TNe.multiples[e];if(t===n)return null;if(100===t&&void 0!==i[s+1]){const e=i[s+1];TNe.multiples[e]&&(t*=TNe.multiples[e],s+=1)}null===n||t<n?(o+=(FNe(r)||1)*t,n=t,r={}):(o+=FNe(r),n=t,o=(o||1)*t,r={})}}}return o+=FNe(r),o*=t.amount,o*=a?-1:1,0===o&&0===Object.keys(r).length?null:o},MNe=/s$/,zNe=function(e){let t=e.text("reduced");return _Ne(t)};let LNe={half:2,halve:2,quarter:4};const BNe=function(e){let t=function(e){let t=e.text("reduced");return LNe.hasOwnProperty(t)?{numerator:1,denominator:LNe[t]}:null}(e=e.clone())||function(e){let t=e.text("reduced").match(/^([-+]?[0-9]+)\/([-+]?[0-9]+)(st|nd|rd|th)?s?$/);return t&&t[1]&&t[0]?{numerator:Number(t[1]),denominator:Number(t[2])}:null}(e)||function(e){let t=e.match("[<num>#Value+] out of every? [<den>#Value+]");if(!0!==t.found)return null;let{num:n,den:r}=t.groups();return n&&r?(n=zNe(n),r=zNe(r),n&&r&&"number"===typeof n&&"number"===typeof r?{numerator:n,denominator:r}:null):null}(e)||function(e){let t=e.match("[<num>(#Cardinal|a)+] [<den>#Fraction+]");if(!0!==t.found)return null;let{num:n,den:r}=t.groups();n=n.has("a")?1:zNe(n);let o=r.text("reduced");return MNe.test(o)&&(o=o.replace(MNe,""),r=r.replaceWith(o)),r=LNe.hasOwnProperty(o)?LNe[o]:zNe(r),"number"===typeof n&&"number"===typeof r?{numerator:n,denominator:r}:null}(e)||function(e){let t=e.match("^#Ordinal$");if(!0!==t.found)return null;if(e.lookAhead("^of ."))return{numerator:1,denominator:zNe(t)};return null}(e)||null;return null!==t&&t.numerator&&t.denominator&&(t.decimal=t.numerator/t.denominator,t.decimal=(e=>{let t=Math.round(1e3*e)/1e3;return 0===t&&0!==e?e:t})(t.decimal)),t},jNe=function(e){if(e<1e6)return String(e);let t;return t="number"===typeof e?e.toFixed(0):e,-1===t.indexOf("e+")?t:t.replace(".","").split("e+").reduce((function(e,t){return e+Array(t-e.length+2).join(0)}))},HNe=[["ninety",90],["eighty",80],["seventy",70],["sixty",60],["fifty",50],["forty",40],["thirty",30],["twenty",20]],VNe=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],WNe=[[1e24,"septillion"],[1e20,"hundred sextillion"],[1e21,"sextillion"],[1e20,"hundred quintillion"],[1e18,"quintillion"],[1e17,"hundred quadrillion"],[1e15,"quadrillion"],[1e14,"hundred trillion"],[1e12,"trillion"],[1e11,"hundred billion"],[1e9,"billion"],[1e8,"hundred million"],[1e6,"million"],[1e5,"hundred thousand"],[1e3,"thousand"],[100,"hundred"],[1,"one"]],GNe=function(e){let t=[];if(e>100)return t;for(let n=0;n<HNe.length;n++)e>=HNe[n][1]&&(e-=HNe[n][1],t.push(HNe[n][0]));return VNe[e]&&t.push(VNe[e]),t},UNe=function(e){let t=e.num;if(0===t||"0"===t)return"zero";t>1e21&&(t=jNe(t));let n=[];t<0&&(n.push("minus"),t=Math.abs(t));let r=function(e){let t=e,n=[];return WNe.forEach((r=>{if(e>=r[0]){let e=Math.floor(t/r[0]);t-=e*r[0],e&&n.push({unit:r[1],count:e})}})),n}(t);for(let o=0;o<r.length;o++){let e=r[o].unit;"one"===e&&(e="",n.length>1&&n.push("and")),n=n.concat(GNe(r[o].count)),n.push(e)}return n=n.concat((e=>{const t=["zero","one","two","three","four","five","six","seven","eight","nine"];let n=[],r=jNe(e).match(/\.([0-9]+)/);if(!r||!r[0])return n;n.push("point");let o=r[0].split("");for(let a=0;a<o.length;a++)n.push(t[o[a]]);return n})(t)),n=n.filter((e=>e)),0===n.length&&(n[0]=""),n.join(" ")},KNe=function(e){if(!e.numerator||!e.denominator)return"";return`${UNe({num:e.numerator})} out of ${UNe({num:e.denominator})}`},qNe={one:"first",two:"second",three:"third",five:"fifth",eight:"eighth",nine:"ninth",twelve:"twelfth",twenty:"twentieth",thirty:"thirtieth",forty:"fortieth",fourty:"fourtieth",fifty:"fiftieth",sixty:"sixtieth",seventy:"seventieth",eighty:"eightieth",ninety:"ninetieth"},XNe=e=>{let t=UNe(e).split(" "),n=t[t.length-1];return qNe.hasOwnProperty(n)?t[t.length-1]=qNe[n]:t[t.length-1]=n.replace(/y$/,"i")+"th",t.join(" ")},JNe=function(e){if(!e.numerator||!e.denominator)return"";let t=UNe({num:e.numerator}),n=XNe({num:e.denominator});return 2===e.denominator&&(n="half"),t&&n?(1!==e.numerator&&(n+="s"),`${t} ${n}`):""},YNe=function(e){class t extends e{constructor(e,t,n){super(e,t,n),this.viewType="Fractions"}parse(e){return this.getNth(e).map(BNe)}get(e){return this.getNth(e).map(BNe)}json(e){return this.getNth(e).map((t=>{let n=t.toView().json(e)[0],r=BNe(t);return n.fraction=r,n}),[])}toDecimal(e){return this.getNth(e).forEach((e=>{let{decimal:t}=BNe(e);(e=e.replaceWith(String(t),!0)).tag("NumericValue"),e.unTag("Fraction")})),this}toFraction(e){return this.getNth(e).forEach((e=>{let t=BNe(e);if(t&&"number"===typeof t.numerator&&"number"===typeof t.denominator){let n=`${t.numerator}/${t.denominator}`;this.replace(e,n)}})),this}toOrdinal(e){return this.getNth(e).forEach((e=>{let t=BNe(e),n=JNe(t);e.after("^#Noun").found&&(n+=" of"),e.replaceWith(n)})),this}toCardinal(e){return this.getNth(e).forEach((e=>{let t=BNe(e),n=KNe(t);e.replaceWith(n)})),this}toPercentage(e){return this.getNth(e).forEach((e=>{let{decimal:t}=BNe(e),n=100*t;n=Math.round(100*n)/100,e.replaceWith(`${n}%`)})),this}}e.prototype.fractions=function(e){let n=INe(this);return n=n.getNth(e),new t(this.document,n.pointer)}},QNe="twenty|thirty|forty|fifty|sixty|seventy|eighty|ninety|fourty",ZNe=function(e){let t=e.match("#Value+");if(t.has("#NumericValue #NumericValue")&&(t.has("#Value @hasComma #Value")?t.splitAfter("@hasComma"):t.has("#NumericValue #Fraction")?t.splitAfter("#NumericValue #Fraction"):t=t.splitAfter("#NumericValue")),t.has("#Value #Value #Value")&&!t.has("#Multiple")&&t.has("("+QNe+") #Cardinal #Cardinal")&&(t=t.splitAfter("("+QNe+") #Cardinal")),t.has("#Value #Value")){t.has("#NumericValue #NumericValue")&&(t=t.splitOn("#Year")),t.has("("+QNe+") (eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen)")&&(t=t.splitAfter("("+QNe+")"));let e=t.match("#Cardinal #Cardinal");if(e.found&&!t.has("(point|decimal|#Fraction)")&&!e.has("#Cardinal (#Multiple|point|decimal)")){let n=t.has(`(one|two|three|four|five|six|seven|eight|nine) (${QNe})`),r=e.has("("+QNe+") #Cardinal"),o=e.has("#Multiple #Value");n||r||o||e.terms().forEach((e=>{t=t.splitOn(e)}))}t.match("#Ordinal #Ordinal").match("#TextValue").found&&!t.has("#Multiple")&&(t.has("("+QNe+") #Ordinal")||(t=t.splitAfter("#Ordinal"))),t=t.splitBefore("#Ordinal [#Cardinal]",0),t.has("#TextValue #NumericValue")&&!t.has("("+QNe+"|#Multiple)")&&(t=t.splitBefore("#TextValue #NumericValue"))}return t=t.splitAfter("#NumberRange"),t=t.splitBefore("#Year"),t},eIe=function(e){if("string"===typeof e)return{num:_Ne(e)};let t=e.text("reduced"),n=e.growRight("#Unit").match("#Unit$").text("machine"),r=/[0-9],[0-9]/.test(e.text("text"));if(1===e.terms().length&&!e.has("#Multiple")){let o=function(e,t){let n=(e=e.replace(/,/g,"")).split(/([0-9.,]*)/),[r,o]=n,a=n.slice(2).join("");return""!==o&&t.length<2?(o=Number(o||e),"number"!==typeof o&&(o=null),a=a||"","st"!==a&&"nd"!==a&&"rd"!==a&&"th"!==a||(a=""),{prefix:r||"",num:o,suffix:a}):null}(t,e);if(null!==o)return o.hasComma=r,o.unit=n,o}let o=e.match("#Fraction{2,}$");o=!1===o.found?e.match("^#Fraction$"):o;let a=null;o.found&&(o.has("#Value and #Value #Fraction")&&(o=o.match("and #Value #Fraction")),a=BNe(o),t=(e=(e=e.not(o)).not("and$")).text("reduced"));let i=0;return t&&(i=_Ne(t)||0),a&&a.decimal&&(i+=a.decimal),{hasComma:r,prefix:"",num:i,suffix:"",isOrdinal:e.has("#Ordinal"),isText:e.has("#TextValue"),isFraction:e.has("#Fraction"),isMoney:e.has("#Money"),unit:n}},tIe=function(e){let t=e.num;if(!t&&0!==t)return null;let n=t%100;if(n>10&&n<20)return String(t)+"th";const r={0:"th",1:"st",2:"nd",3:"rd"};let o=jNe(t),a=o.slice(o.length-1,o.length);return o+=r[a]?r[a]:"th",o},nIe={"\xa2":"cents",$:"dollars","\xa3":"pounds","\xa5":"yen","\u20ac":"euros","\u20a1":"col\xf3n","\u0e3f":"baht","\u20ad":"kip","\u20a9":"won","\u20b9":"rupees","\u20bd":"ruble","\u20ba":"liras"},rIe={"%":"percent","\xb0":"degrees"},oIe=function(e){let t={suffix:"",prefix:e.prefix};return nIe.hasOwnProperty(e.prefix)&&(t.suffix+=" "+nIe[e.prefix],t.prefix=""),rIe.hasOwnProperty(e.suffix)&&(t.suffix+=" "+rIe[e.suffix]),t.suffix&&1===e.num&&(t.suffix=t.suffix.replace(/s$/,"")),!t.suffix&&e.suffix&&(t.suffix+=" "+e.suffix),t},aIe=function(e,t){if("TextOrdinal"===t){let{prefix:t,suffix:n}=oIe(e);return t+XNe(e)+n}if("Ordinal"===t)return e.prefix+tIe(e)+e.suffix;if("TextCardinal"===t){let{prefix:t,suffix:n}=oIe(e);return t+UNe(e)+n}let n=e.num;return e.hasComma&&(n=n.toLocaleString()),e.prefix+String(n)+e.suffix},iIe=function(e){if("string"===typeof e||"number"===typeof e){let t={};return t[e]=!0,t}return t=e,"[object Array]"===Object.prototype.toString.call(t)?e.reduce(((e,t)=>(e[t]=!0,e)),{}):e||{};var t},sIe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=iIe(t),e.filter((e=>{let{unit:n}=eIe(e);return!(!n||!0!==t[n])}))},lIe=function(e){class t extends e{constructor(e,t,n){super(e,t,n),this.viewType="Numbers"}parse(e){return this.getNth(e).map(eIe)}get(e){return this.getNth(e).map(eIe).map((e=>e.num))}json(e){let t="object"===typeof e?e:{};return this.getNth(e).map((e=>{let n=e.toView().json(t)[0],r=eIe(e);return n.number={prefix:r.prefix,num:r.num,suffix:r.suffix,hasComma:r.hasComma,unit:r.unit},n}),[])}units(){return this.growRight("#Unit").match("#Unit$")}isUnit(e){return sIe(this,e)}isOrdinal(){return this.if("#Ordinal")}isCardinal(){return this.if("#Cardinal")}toNumber(){let e=this.map((e=>{if(!this.has("#TextValue"))return e;let t=eIe(e);if(null===t.num)return e;let n=e.has("#Ordinal")?"Ordinal":"Cardinal",r=aIe(t,n);return e.replaceWith(r,{tags:!0}),e.tag("NumericValue")}));return new t(e.document,e.pointer)}toLocaleString(){return this.forEach((e=>{let t=eIe(e);if(null===t.num)return;let n=t.num.toLocaleString();if(e.has("#Ordinal")){let e=aIe(t,"Ordinal").match(/[a-z]+$/);e&&(n+=e[0]||"")}e.replaceWith(n,{tags:!0})})),this}toText(){let e=this.map((e=>{if(e.has("#TextValue"))return e;let t=eIe(e);if(null===t.num)return e;let n=e.has("#Ordinal")?"TextOrdinal":"TextCardinal",r=aIe(t,n);return e.replaceWith(r,{tags:!0}),e.tag("TextValue"),e}));return new t(e.document,e.pointer)}toCardinal(){let e=this.map((e=>{if(!e.has("#Ordinal"))return e;let t=eIe(e);if(null===t.num)return e;let n=e.has("#TextValue")?"TextCardinal":"Cardinal",r=aIe(t,n);return e.replaceWith(r,{tags:!0}),e.tag("Cardinal"),e}));return new t(e.document,e.pointer)}toOrdinal(){let e=this.map((e=>{if(e.has("#Ordinal"))return e;let t=eIe(e);if(null===t.num)return e;let n=e.has("#TextValue")?"TextOrdinal":"Ordinal",r=aIe(t,n);return e.replaceWith(r,{tags:!0}),e.tag("Ordinal"),e}));return new t(e.document,e.pointer)}isEqual(e){return this.filter((t=>eIe(t).num===e))}greaterThan(e){return this.filter((t=>eIe(t).num>e))}lessThan(e){return this.filter((t=>eIe(t).num<e))}between(e,t){return this.filter((n=>{let r=eIe(n).num;return r>e&&r<t}))}set(e){if(void 0===e)return this;"string"===typeof e&&(e=eIe(e).num);let n=this.map((t=>{let n=eIe(t);if(n.num=e,null===n.num)return t;let r=t.has("#Ordinal")?"Ordinal":"Cardinal";t.has("#TextValue")&&(r=t.has("#Ordinal")?"TextOrdinal":"TextCardinal");let o=aIe(n,r);return n.hasComma&&"Cardinal"===r&&(o=Number(o).toLocaleString()),(t=t.not("#Currency")).replaceWith(o,{tags:!0}),t}));return new t(n.document,n.pointer)}add(e){if(!e)return this;"string"===typeof e&&(e=eIe(e).num);let n=this.map((t=>{let n=eIe(t);if(null===n.num)return t;n.num+=e;let r=t.has("#Ordinal")?"Ordinal":"Cardinal";n.isText&&(r=t.has("#Ordinal")?"TextOrdinal":"TextCardinal");let o=aIe(n,r);return t.replaceWith(o,{tags:!0}),t}));return new t(n.document,n.pointer)}subtract(e,t){return this.add(-1*e,t)}increment(e){return this.add(1,e)}decrement(e){return this.add(-1,e)}update(e){let n=new t(this.document,e);return n._cache=this._cache,n}}t.prototype.toNice=t.prototype.toLocaleString,t.prototype.isBetween=t.prototype.between,t.prototype.minus=t.prototype.subtract,t.prototype.plus=t.prototype.add,t.prototype.equals=t.prototype.isEqual,e.prototype.numbers=function(e){let n=ZNe(this);return n=n.getNth(e),new t(this.document,n.pointer)},e.prototype.percentages=function(e){let n=ZNe(this);return n=n.filter((e=>e.has("#Percent")||e.after("^percent"))),n=n.getNth(e),new t(this.document,n.pointer)},e.prototype.money=function(e){let n=ZNe(this);return n=n.filter((e=>e.has("#Money")||e.after("^#Currency"))),n=n.getNth(e),new t(this.document,n.pointer)},e.prototype.values=e.prototype.numbers},uIe={api:function(e){YNe(e),lIe(e)}},cIe={people:!0,emails:!0,phoneNumbers:!0,places:!0},dIe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Object.assign({},cIe,e),!1!==e.people&&this.people().replaceWith("\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588"),!1!==e.emails&&this.emails().replaceWith("\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588"),!1!==e.places&&this.places().replaceWith("\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588"),!1!==e.phoneNumbers&&this.phoneNumbers().replaceWith("\u2588\u2588\u2588\u2588\u2588\u2588\u2588"),this},hIe={api:function(e){e.prototype.redact=dIe}},pIe=hIe,fIe=function(e){const t=/\?/,{document:n}=e;return e.filter((e=>{let r=e.docs[0]||[],o=r[r.length-1];return!(!o||n[o.index[0]].length!==r.length)&&(!!t.test(o.post)||function(e){let t=e.clauses();return!/\.\.$/.test(e.out("text"))&&(!e.has("^#QuestionWord")||!e.has("@hasComma"))&&(!!e.has("or not$")||!!e.has("^#QuestionWord")||!!e.has("^(do|does|did|is|was|can|could|will|would|may) #Noun")||!!e.has("^(have|must) you")||!!t.has("(do|does|is|was) #Noun+ #Adverb? (#Adjective|#Infinitive)$"))}(e))}))},mIe=function(e){let t=e;return 1===t.length?t:(t=t.if("#Verb"),1===t.length?t:(t=t.ifNo("(after|although|as|because|before|if|since|than|that|though|when|whenever|where|whereas|wherever|whether|while|why|unless|until|once)"),t=t.ifNo("^even (if|though)"),t=t.ifNo("^so that"),t=t.ifNo("^rather than"),t=t.ifNo("^provided that"),1===t.length?t:(t=t.ifNo("(that|which|whichever|who|whoever|whom|whose|whomever)"),1===t.length?t:(t=t.ifNo("(^despite|^during|^before|^through|^throughout)"),1===t.length?t:(t=t.ifNo("^#Gerund"),1===t.length?t:(0===t.length&&(t=e),t.eq(0)))))))},gIe=function(e){let t=null;return e.has("#PastTense")?t="PastTense":e.has("#FutureTense")?t="FutureTense":e.has("#PresentTense")&&(t="PresentTense"),{tense:t}},vIe=function(e){let t=e.clauses(),n=mIe(t).chunks(),r=e.none(),o=e.none(),a=e.none();return n.forEach(((e,t)=>{0!==t||e.has("<Verb>")?o.found||!e.has("<Verb>")?o.found&&(a=a.concat(e)):o=e:r=e})),o.found&&!r.found&&(r=o.before("<Noun>+").first()),{subj:r,verb:o,pred:a,grammar:gIe(o)}},bIe=function(e){let t=e.verbs(),n=t.eq(0);if(n.has("#PastTense"))return e;if(n.toPastTense(),t.length>1){t=t.slice(1),t=t.filter((e=>!e.lookBehind("to$").found)),t=t.if("#PresentTense"),t=t.notIf("#Gerund");let n=e.match("to #Verb+ #Conjunction #Verb").terms();t=t.not(n),t.found&&t.verbs().toPastTense()}return e},yIe=function(e){let t=e.verbs();return t.eq(0).toPresentTense(),t.length>1&&(t=t.slice(1),t=t.filter((e=>!e.lookBehind("to$").found)),t=t.notIf("#Gerund"),t.found&&t.verbs().toPresentTense()),e},wIe=function(e){let t=e.verbs();if(t.eq(0).toFutureTense(),t=(e=e.fullSentence()).verbs(),t.length>1){t=t.slice(1);let e=t.filter((e=>!e.lookBehind("to$").found&&(!!e.has("#Copula #Gerund")||!e.has("#Gerund")&&(!!e.has("#Copula")||!(e.has("#PresentTense")&&!e.has("#Infinitive")&&e.lookBefore("(he|she|it|that|which)$").found)))));e.found&&e.forEach((e=>{if(e.has("#Copula"))return e.match("was").replaceWith("is"),void e.match("is").replaceWith("will be");e.toInfinitive()}))}return e},xIe=function(e){return e.verbs().toInfinitive(),e},kIe=function(e){class t extends e{constructor(e,t,n){super(e,t,n),this.viewType="Sentences"}json(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.map((t=>{let n=t.toView().json(e)[0]||{},{subj:r,verb:o,pred:a,grammar:i}=vIe(t);return n.sentence={subject:r.text("normal"),verb:o.text("normal"),predicate:a.text("normal"),grammar:i},n}),[])}toPastTense(e){return this.getNth(e).map((e=>{let t=vIe(e);return bIe(e,t)}))}toPresentTense(e){return this.getNth(e).map((e=>{let t=vIe(e);return yIe(e,t)}))}toFutureTense(e){return this.getNth(e).map((e=>{let t=vIe(e);return e=wIe(e,t)}))}toInfinitive(e){return this.getNth(e).map((e=>{let t=vIe(e);return xIe(e,t)}))}toNegative(e){return this.getNth(e).map((e=>{vIe(e);return function(e){return e.verbs().first().toNegative().compute("chunks"),e}(e)}))}toPositive(e){return this.getNth(e).map((e=>{vIe(e);return function(e){return e.verbs().first().toPositive().compute("chunks"),e}(e)}))}isQuestion(e){return this.questions(e)}isExclamation(e){let t=this.filter((e=>e.lastTerm().has("@hasExclamation")));return t.getNth(e)}isStatement(e){let t=this.filter((e=>!e.isExclamation().found&&!e.isQuestion().found));return t.getNth(e)}update(e){let n=new t(this.document,e);return n._cache=this._cache,n}}t.prototype.toPresent=t.prototype.toPresentTense,t.prototype.toPast=t.prototype.toPastTense,t.prototype.toFuture=t.prototype.toFutureTense;const n={sentences:function(e){let n=this.map((e=>e.fullSentence()));return n=n.getNth(e),new t(this.document,n.pointer)},questions:function(e){return fIe(this).getNth(e)}};Object.assign(e.prototype,n)},CIe={api:kIe},SIe=function(e){let t=e.splitAfter("@hasComma");t=t.match("#Honorific+? #Person+");let n=t.match("#Possessive").notIf("(his|her)");return t=t.splitAfter(n),t},EIe=function(e){let t={};t.firstName=e.match("#FirstName+"),t.lastName=e.match("#LastName+"),t.honorific=e.match("#Honorific+");let n=t.lastName,r=t.firstName;return r.found&&n.found||r.found||n.found||!e.has("^#Honorific .$")||(t.lastName=e.match(".$")),t},NIe="male",IIe="female",$Ie={mr:NIe,mrs:IIe,miss:IIe,madam:IIe,king:NIe,queen:IIe,duke:NIe,duchess:IIe,baron:NIe,baroness:IIe,count:NIe,countess:IIe,prince:NIe,princess:IIe,sire:NIe,dame:IIe,lady:IIe,ayatullah:NIe,congressman:NIe,congresswoman:IIe,"first lady":IIe,mx:null},TIe=function(e,t){let{firstName:n,honorific:r}=e;if(n.has("#FemaleName"))return IIe;if(n.has("#MaleName"))return NIe;if(r.found){let e=r.text("normal");if(e=e.replace(/\./g,""),$Ie.hasOwnProperty(e))return $Ie[e];if(/^her /.test(e))return IIe;if(/^his /.test(e))return NIe}let o=t.after();if(!o.has("#Person")&&o.has("#Pronoun")){let e=o.match("#Pronoun");if(e.has("(they|their)"))return null;let t=e.has("(he|his)"),n=e.has("(she|her|hers)");if(t&&!n)return NIe;if(n&&!t)return IIe}return null},AIe=function(e){class t extends e{constructor(e,t,n){super(e,t,n),this.viewType="People"}parse(e){return this.getNth(e).map(EIe)}json(e){let t="object"===typeof e?e:{};return this.getNth(e).map((e=>{let n=e.toView().json(t)[0],r=EIe(e);return n.person={firstName:r.firstName.text("normal"),lastName:r.lastName.text("normal"),honorific:r.honorific.text("normal"),presumed_gender:TIe(r,e)},n}),[])}presumedMale(){return this.filter((e=>e.has("(#MaleName|mr|mister|sr|jr|king|pope|prince|sir)")))}presumedFemale(){return this.filter((e=>e.has("(#FemaleName|mrs|miss|queen|princess|madam)")))}update(e){let n=new t(this.document,e);return n._cache=this._cache,n}}e.prototype.people=function(e){let n=SIe(this);return n=n.getNth(e),new t(this.document,n.pointer)}},OIe=function(e){let t=e.match("(#Place|#Address)+"),n=t.match("@hasComma");return n=n.filter((e=>!!e.has("(asia|africa|europe|america)$")||(!e.has("(#City|#Region|#ProperNoun)$")||!e.after("^(#Country|#Region)").found))),t=t.splitAfter(n),t},RIe=function(e){e.prototype.places=function(t){let n=OIe(this);return n=n.getNth(t),new e(this.document,n.pointer)}},PIe=function(e){e.prototype.organizations=function(e){return this.match("#Organization+").getNth(e)}},DIe=function(e){let t=this.clauses(),n=t.people();return n=n.concat(t.places()),n=n.concat(t.organizations()),n=n.not("(someone|man|woman|mother|brother|sister|father)"),n=n.sort("seq"),n=n.getNth(e),n},FIe=function(e){e.prototype.topics=DIe},_Ie={api:function(e){AIe(e),RIe(e),PIe(e),FIe(e)}},MIe=function(e){let t=e.match("<Verb>");return t=t.not("#Conjunction"),t=t.not("#Preposition"),t=t.splitAfter("@hasComma"),t=t.splitAfter("[(do|did|am|was|is|will)] (is|was)",0),t=t.splitBefore("(#Verb && !#Copula) [being] #Verb",0),t=t.splitBefore("#Verb [to be] #Verb",0),t=t.splitAfter("[help] #PresentTense",0),t=t.splitBefore("(#PresentTense|#PastTense) [#Copula]$",0),t=t.splitBefore("(#PresentTense|#PastTense) [will be]$",0),t=t.splitBefore("(#PresentTense|#PastTense) [(had|has)]",0),t=t.not("#Reflexive$"),t=t.not("#Adjective"),t=t.splitAfter("[#PastTense] #PastTense",0),t=t.splitAfter("[#PastTense] #Auxiliary+ #PastTense",0),t=t.splitAfter("#Copula [#Gerund] #PastTense",0),t=t.if("#Verb"),t.has("(#Verb && !#Auxiliary) #Adverb+? #Copula")&&(t=t.splitBefore("#Copula")),t},zIe=function(e){let t=e;return e.wordCount()>1&&(t=e.not("(#Negative|#Auxiliary|#Modal|#Adverb|#Prefix)")),t.length>1&&!t.has("#Phrasal #Particle")&&(t=t.last()),t=t.not("(want|wants|wanted) to"),t.found||(t=e.not("#Negative")),t},LIe=function(e,t){let n={pre:e.none(),post:e.none()};if(!e.has("#Adverb"))return n;let r=e.splitOn(t);return 3===r.length?{pre:r.eq(0).adverbs(),post:r.eq(2).adverbs()}:r.eq(0).isDoc(t)?(n.post=r.eq(1).adverbs(),n):(n.pre=r.eq(0).adverbs(),n)},BIe=function(e,t){let n=e.splitBefore(t);if(n.length<=1)return e.none();let r=n.eq(0);return r=r.not("(#Adverb|#Negative|#Prefix)"),r},jIe=function(e){return e.match("#Negative")},HIe=function(e){if(!e.has("(#Particle|#PhrasalVerb)"))return{verb:e.none(),particle:e.none()};let t=e.match("#Particle$");return{verb:e.not(t),particle:t}},VIe=function(e){let t=e.clone();t.contractions().expand();const n=zIe(t);return{root:n,prefix:t.match("#Prefix"),adverbs:LIe(t,n),auxiliary:BIe(t,n),negative:jIe(t),phrasal:HIe(n)}},WIe={tense:"PresentTense"},GIe={conditional:!0},UIe={tense:"FutureTense"},KIe={progressive:!0},qIe={tense:"PastTense"},XIe={complete:!0,progressive:!1},JIe={passive:!0},YIe=function(e){let t={};return e.forEach((e=>{Object.assign(t,e)})),t},QIe={imperative:[["#Imperative",[]]],"want-infinitive":[["^(want|wants|wanted) to #Infinitive$",[WIe]],["^wanted to #Infinitive$",[qIe]],["^will want to #Infinitive$",[UIe]]],"gerund-phrase":[["^#PastTense #Gerund$",[qIe]],["^#PresentTense #Gerund$",[WIe]],["^#Infinitive #Gerund$",[WIe]],["^will #Infinitive #Gerund$",[UIe]],["^have #PastTense #Gerund$",[qIe]],["^will have #PastTense #Gerund$",[qIe]]],"simple-present":[["^#PresentTense$",[WIe]],["^#Infinitive$",[WIe]]],"simple-past":[["^#PastTense$",[qIe]]],"simple-future":[["^will #Adverb? #Infinitive",[UIe]]],"present-progressive":[["^(is|are|am) #Gerund$",[WIe,KIe]]],"past-progressive":[["^(was|were) #Gerund$",[qIe,KIe]]],"future-progressive":[["^will be #Gerund$",[UIe,KIe]]],"present-perfect":[["^(has|have) #PastTense$",[qIe,XIe]]],"past-perfect":[["^had #PastTense$",[qIe,XIe]],["^had #PastTense to #Infinitive",[qIe,XIe]]],"future-perfect":[["^will have #PastTense$",[UIe,XIe]]],"present-perfect-progressive":[["^(has|have) been #Gerund$",[qIe,KIe]]],"past-perfect-progressive":[["^had been #Gerund$",[qIe,KIe]]],"future-perfect-progressive":[["^will have been #Gerund$",[UIe,KIe]]],"passive-past":[["(got|were|was) #Passive",[qIe,JIe]],["^(was|were) being #Passive",[qIe,JIe]],["^(had|have) been #Passive",[qIe,JIe]]],"passive-present":[["^(is|are|am) #Passive",[WIe,JIe]],["^(is|are|am) being #Passive",[WIe,JIe]],["^has been #Passive",[WIe,JIe]]],"passive-future":[["will have been #Passive",[UIe,JIe,GIe]],["will be being? #Passive",[UIe,JIe,GIe]]],"present-conditional":[["would be #PastTense",[WIe,GIe]]],"past-conditional":[["would have been #PastTense",[qIe,GIe]]],"auxiliary-future":[["(is|are|am|was) going to (#Infinitive|#PresentTense)",[UIe]]],"auxiliary-past":[["^did #Infinitive$",[qIe,{plural:!1}]],["^used to #Infinitive$",[qIe,XIe]]],"auxiliary-present":[["^(does|do) #Infinitive$",[WIe,XIe,{plural:!0}]]],"modal-past":[["^(could|must|should|shall) have #PastTense$",[qIe]]],"modal-infinitive":[["^#Modal #Infinitive$",[]]],infinitive:[["^#Infinitive$",[]]]};let ZIe=[];Object.keys(QIe).map((e=>{QIe[e].forEach((t=>{ZIe.push({name:e,match:t[0],data:YIe(t[1])})}))}));const e$e=ZIe,t$e=function(e,t){let n={};e=function(e,t){return e=e.clone(),t.adverbs.post&&t.adverbs.post.found&&e.remove(t.adverbs.post),t.adverbs.pre&&t.adverbs.pre.found&&e.remove(t.adverbs.pre),e.has("#Negative")&&(e=e.remove("#Negative")),e.has("#Prefix")&&(e=e.remove("#Prefix")),t.root.has("#PhrasalVerb #Particle")&&e.remove("#Particle$"),e.not("#Adverb")}(e,t);for(let r=0;r<e$e.length;r+=1){let t=e$e[r];if(!0===e.has(t.match)){n.form=t.name,Object.assign(n,t.data);break}}return n.form||e.has("^#Verb$")&&(n.form="infinitive"),n.tense||(n.tense=t.root.has("#PastTense")?"PastTense":"PresentTense"),n.copula=t.root.has("#Copula"),n.isInfinitive=function(e){if(e.has("#Infinitive")&&e.growLeft("to").has("^to #Infinitive"))return!0;return!1}(e),n},n$e=function(e){if(e.length<=1)return!1;return(e.parse()[0]||{}).isSubordinate},r$e=function(e,t){return!!t.has("(are|were|does)")||(!!e.has("(those|they|we)")||!(!e.found||!e.isPlural)&&e.isPlural().found)},o$e=function(e){let t=function(e){let t=e.before();t=function(e){let t=e.clauses();return t=t.filter(((e,t)=>!e.has("^(if|unless|while|but|for|per|at|by|that|which|who|from)")&&!(t>0&&e.has("^#Verb . #Noun+$"))&&!(t>0&&e.has("^#Adverb")))),0===t.length?e:t}(t);let n=t.nouns(),r=n.last(),o=r.match("(i|he|she|we|you|they)");if(o.found)return o.nouns();let a=n.if("^(that|this|those)");return a.found||!1===n.found&&(a=t.match("^(that|this|those)"),a.found)?a:(r=n.last(),n$e(r)&&(n.remove(r),r=n.last()),n$e(r)&&(n.remove(r),r=n.last()),r)}(e);return{subject:t,plural:r$e(t,e)}},a$e=e=>e,i$e=(e,t)=>{let n=o$e(e,t),r=n.subject;return!(!r.has("i")&&!r.has("we"))||n.plural},s$e=function(e,t){if(e.has("were"))return"are";let{subject:n,plural:r}=o$e(e,t);return n.has("i")?"am":n.has("we")||r?"are":"is"},l$e=function(e,t){let n=o$e(e,t),r=n.subject;return r.has("i")||r.has("we")||n.plural?"do":"does"},u$e=function(e){return e.has("#Infinitive")?"Infinitive":e.has("#Participle")?"Participle":e.has("#PastTense")?"PastTense":e.has("#Gerund")?"Gerund":e.has("#PresentTense")?"PresentTense":void 0},c$e=function(e,t){const{toInfinitive:n}=e.methods.two.transform.verb;let r=t.root.text({keepPunct:!1});return r=n(r,e.model,u$e(e)),r&&e.replace(t.root,r),e},d$e=e=>e.has("will not")?e.replace("will not","have not"):e.remove("will"),h$e=function(e){if(!e||!e.isView)return[];return e.json({normal:!0,terms:!1,text:!1}).map((e=>e.normal))},p$e=function(e){return e&&e.isView?e.text("normal"):""},f$e=function(e){const{toInfinitive:t}=e.methods.two.transform.verb;return t(e.text("normal"),e.model,u$e(e))},m$e=function(e){let t=VIe(e);e=e.clone().toView();const n=t$e(e,t);return{root:t.root.text(),preAdverbs:h$e(t.adverbs.pre),postAdverbs:h$e(t.adverbs.post),auxiliary:p$e(t.auxiliary),negative:t.negative.found,prefix:p$e(t.prefix),infinitive:f$e(t.root),grammar:n}},g$e={tags:!0},v$e=function(e,t){const{toInfinitive:n}=e.methods.two.transform.verb,{root:r,auxiliary:o}=t;let a=o.terms().harden(),i=r.text("normal");if(i=n(i,e.model,u$e(r)),i&&e.replace(r,i,g$e).tag("Verb").firstTerm().tag("Infinitive"),a.found&&e.remove(a),t.negative.found){e.has("not")||e.prepend("not");let n=l$e(e,t);e.prepend(n)}return e.fullSentence().compute(["freeze","lexicon","preTagger","postTagger","unfreeze","chunks"]),e},b$e={tags:!0},y$e={noAux:(e,t)=>(t.auxiliary.found&&(e=e.remove(t.auxiliary)),e),simple:(e,t)=>{const{conjugate:n,toInfinitive:r}=e.methods.two.transform.verb,o=t.root;if(o.has("#Modal"))return e;let a=o.text({keepPunct:!1});return a=r(a,e.model,u$e(o)),a=n(a,e.model).PastTense,a="been"===a?"was":a,"was"===a&&(a=((e,t)=>{let{subject:n,plural:r}=o$e(e,t);return r||n.has("we")?"were":"was"})(e,t)),a&&e.replace(o,a,b$e),e},both:function(e,t){return t.negative.found?(e.replace("will","did"),e):(e=y$e.simple(e,t),e=y$e.noAux(e,t))},hasHad:e=>(e.replace("has","had",b$e),e),hasParticiple:(e,t)=>{const{conjugate:n,toInfinitive:r}=e.methods.two.transform.verb,o=t.root;let a=o.text("normal");return a=r(a,e.model,u$e(o)),n(a,e.model).Participle}},w$e={infinitive:y$e.simple,"simple-present":y$e.simple,"simple-past":a$e,"simple-future":y$e.both,"present-progressive":e=>(e.replace("are","were",b$e),e.replace("(is|are|am)","was",b$e),e),"past-progressive":a$e,"future-progressive":(e,t)=>(e.match(t.root).insertBefore("was"),e.remove("(will|be)"),e),"present-perfect":y$e.hasHad,"past-perfect":a$e,"future-perfect":(e,t)=>(e.match(t.root).insertBefore("had"),e.has("will")&&(e=d$e(e)),e.remove("have"),e),"present-perfect-progressive":y$e.hasHad,"past-perfect-progressive":a$e,"future-perfect-progressive":e=>(e.remove("will"),e.replace("have","had",b$e),e),"passive-past":e=>(e.replace("have","had",b$e),e),"passive-present":e=>(e.replace("(is|are)","was",b$e),e),"passive-future":(e,t)=>(t.auxiliary.has("will be")&&(e.match(t.root).insertBefore("had been"),e.remove("(will|be)")),t.auxiliary.has("will have been")&&(e.replace("have","had",b$e),e.remove("will")),e),"present-conditional":e=>(e.replace("be","have been"),e),"past-conditional":a$e,"auxiliary-future":e=>(e.replace("(is|are|am)","was",b$e),e),"auxiliary-past":a$e,"auxiliary-present":e=>(e.replace("(do|does)","did",b$e),e),"modal-infinitive":(e,t)=>(e.has("can")?e.replace("can","could",b$e):(y$e.simple(e,t),e.match("#Modal").insertAfter("have").tag("Auxiliary")),e),"modal-past":a$e,"want-infinitive":e=>(e.replace("(want|wants)","wanted",b$e),e.remove("will"),e),"gerund-phrase":(e,t)=>(t.root=t.root.not("#Gerund$"),y$e.simple(e,t),d$e(e),e)},x$e=function(e,t,n){return w$e.hasOwnProperty(n)?((e=w$e[n](e,t)).fullSentence().compute(["tagger","chunks"]),e):e},k$e=function(e,t){let n=o$e(e,t),r=n.subject;return r.has("(i|we|you)")?"have":!1===n.plural||r.has("he")||r.has("she")||r.has("#Person")?"has":"have"},C$e=(e,t)=>{const{conjugate:n,toInfinitive:r}=e.methods.two.transform.verb,{root:o,auxiliary:a}=t;if(o.has("#Modal"))return e;let i=o.text({keepPunct:!1});i=r(i,e.model,u$e(o));let s=n(i,e.model);if(i=s.Participle||s.PastTense,i){e=e.replace(o,i);let n=k$e(e,t);e.prepend(n).match(n).tag("Auxiliary"),e.remove(a)}return e},S$e={infinitive:C$e,"simple-present":C$e,"simple-future":(e,t)=>e.replace("will",k$e(e,t)),"present-perfect":a$e,"past-perfect":a$e,"future-perfect":(e,t)=>e.replace("will have",k$e(e,t)),"present-perfect-progressive":a$e,"past-perfect-progressive":a$e,"future-perfect-progressive":a$e},E$e=function(e,t,n){return S$e.hasOwnProperty(n)?((e=S$e[n](e,t)).fullSentence().compute(["tagger","chunks"]),e):((e=C$e(e,t)).fullSentence().compute(["tagger","chunks"]),e)},N$e={tags:!0},I$e=(e,t)=>{const{conjugate:n,toInfinitive:r}=e.methods.two.transform.verb,o=t.root;let a=o.text("normal");return a=r(a,e.model,u$e(o)),!1===i$e(e,t)&&(a=n(a,e.model).PresentTense),o.has("#Copula")&&(a=s$e(e,t)),a&&(e=e.replace(o,a,N$e)).not("#Particle").tag("PresentTense"),e},$$e=(e,t)=>{const{conjugate:n,toInfinitive:r}=e.methods.two.transform.verb,o=t.root;let a=o.text("normal");return a=r(a,e.model,u$e(o)),!1===i$e(e,t)&&(a=n(a,e.model).Gerund),a&&(e=e.replace(o,a,N$e)).not("#Particle").tag("Gerund"),e},T$e={infinitive:I$e,"simple-present":(e,t)=>{const{conjugate:n}=e.methods.two.transform.verb;let{root:r}=t;if(!r.has("#Infinitive"))return I$e(e,t);{let o=o$e(e,t).subject;if(i$e(e,t)||o.has("i"))return e;let a=r.text("normal"),i=n(a,e.model).PresentTense;a!==i&&e.replace(r,i,N$e)}return e},"simple-past":I$e,"simple-future":(e,t)=>{const{root:n,auxiliary:r}=t;if(r.has("will")&&n.has("be")){let r=s$e(e,t);e.replace(n,r),(e=e.remove("will")).replace("not "+r,r+" not")}else I$e(e,t),e=e.remove("will");return e},"present-progressive":a$e,"past-progressive":(e,t)=>{let n=s$e(e,t);return e.replace("(were|was)",n,N$e)},"future-progressive":e=>(e.match("will").insertBefore("is"),e.remove("be"),e.remove("will")),"present-perfect":(e,t)=>(I$e(e,t),e=e.remove("(have|had|has)")),"past-perfect":(e,t)=>{let n=o$e(e,t).subject;return i$e(e,t)||n.has("i")?((e=c$e(e,t)).remove("had"),e):(e.replace("had","has",N$e),e)},"future-perfect":e=>(e.match("will").insertBefore("has"),e.remove("have").remove("will")),"present-perfect-progressive":a$e,"past-perfect-progressive":e=>e.replace("had","has",N$e),"future-perfect-progressive":e=>(e.match("will").insertBefore("has"),e.remove("have").remove("will")),"passive-past":(e,t)=>{let n=s$e(e,t);return e.has("(had|have|has)")&&e.has("been")?(e.replace("(had|have|has)",n,N$e),e.replace("been","being"),e):e.replace("(got|was|were)",n)},"passive-present":a$e,"passive-future":e=>(e.replace("will","is"),e.replace("be","being")),"present-conditional":a$e,"past-conditional":e=>(e.replace("been","be"),e.remove("have")),"auxiliary-future":(e,t)=>($$e(e,t),e.remove("(going|to)"),e),"auxiliary-past":(e,t)=>{if(t.auxiliary.has("did")){let n=l$e(e,t);return e.replace(t.auxiliary,n),e}return $$e(e,t),e.replace(t.auxiliary,"is"),e},"auxiliary-present":a$e,"modal-infinitive":a$e,"modal-past":(e,t)=>(((e,t)=>{const{toInfinitive:n}=e.methods.two.transform.verb,r=t.root;let o=t.root.text("normal");o=n(o,e.model,u$e(r)),o&&(e=e.replace(t.root,o,N$e))})(e,t),e.remove("have")),"gerund-phrase":(e,t)=>(t.root=t.root.not("#Gerund$"),I$e(e,t),e.remove("(will|have)")),"want-infinitive":(e,t)=>{let n="wants";return i$e(e,t)&&(n="want"),e.replace("(want|wanted|wants)",n,N$e),e.remove("will"),e}},A$e=function(e,t,n){return T$e.hasOwnProperty(n)?((e=T$e[n](e,t)).fullSentence().compute(["tagger","chunks"]),e):e},O$e={tags:!0},R$e=(e,t)=>{const{toInfinitive:n}=e.methods.two.transform.verb,{root:r,auxiliary:o}=t;if(r.has("#Modal"))return e;let a=r.text("normal");return a=n(a,e.model,u$e(r)),a&&(e=e.replace(r,a,O$e)).not("#Particle").tag("Verb"),e.prepend("will").match("will").tag("Auxiliary"),e.remove(o),e},P$e=(e,t)=>{const{conjugate:n,toInfinitive:r}=e.methods.two.transform.verb,{root:o,auxiliary:a}=t;let i=o.text("normal");return i=r(i,e.model,u$e(o)),i&&(i=n(i,e.model).Gerund,e.replace(o,i,O$e),e.not("#Particle").tag("PresentTense")),e.remove(a),e.prepend("will be").match("will be").tag("Auxiliary"),e},D$e={infinitive:R$e,"simple-present":R$e,"simple-past":R$e,"simple-future":a$e,"present-progressive":P$e,"past-progressive":P$e,"future-progressive":a$e,"present-perfect":e=>(e.match("(have|has)").replaceWith("will have"),e),"past-perfect":e=>e.replace("(had|has)","will have"),"future-perfect":a$e,"present-perfect-progressive":e=>e.replace("has","will have"),"past-perfect-progressive":e=>e.replace("had","will have"),"future-perfect-progressive":a$e,"passive-past":e=>e.has("got")?e.replace("got","will get"):e.has("(was|were)")?(e.replace("(was|were)","will be"),e.remove("being")):e.has("(have|has|had) been")?e.replace("(have|has|had) been","will be"):e,"passive-present":e=>(e.replace("being","will be"),e.remove("(is|are|am)"),e),"passive-future":a$e,"present-conditional":e=>e.replace("would","will"),"past-conditional":e=>e.replace("would","will"),"auxiliary-future":a$e,"auxiliary-past":e=>e.has("used")&&e.has("to")?(e.replace("used","will"),e.remove("to")):(e.replace("did","will"),e),"auxiliary-present":e=>e.replace("(do|does)","will"),"modal-infinitive":a$e,"modal-past":a$e,"gerund-phrase":(e,t)=>(t.root=t.root.not("#Gerund$"),R$e(e,t),e.remove("(had|have)")),"want-infinitive":e=>(e.replace("(want|wants|wanted)","will want"),e)},F$e=function(e,t,n){return e.has("will")||e.has("going to")?e:D$e.hasOwnProperty(n)?((e=D$e[n](e,t)).fullSentence().compute(["tagger","chunks"]),e):e},_$e={tags:!0},M$e=function(e,t){const{toInfinitive:n,conjugate:r}=e.methods.two.transform.verb,{root:o,auxiliary:a}=t;if(e.has("#Gerund"))return e;let i=o.text("normal");i=n(i,e.model,u$e(o));let s=r(i,e.model).Gerund;if(s){let n=s$e(e,t);e.replace(o,s,_$e),e.remove(a),e.prepend(n)}return e.replace("not is","is not"),e.replace("not are","are not"),e.fullSentence().compute(["tagger","chunks"]),e},z$e={tags:!0},L$e=function(e,t){let n=l$e(e,t);return e.prepend(n+" not"),e},B$e=function(e){let t=e.match("be");return t.found?(t.prepend("not"),e):(t=e.match("(is|was|am|are|will|were)"),t.found?(t.append("not"),e):e)},j$e=e=>e.has("(is|was|am|are|will|were|be)"),H$e={"simple-present":(e,t)=>!0===j$e(e)?B$e(e):(e=c$e(e,t),e=L$e(e,t)),"simple-past":(e,t)=>!0===j$e(e)?B$e(e):((e=c$e(e,t)).prepend("did not"),e),imperative:e=>(e.prepend("do not"),e),infinitive:(e,t)=>!0===j$e(e)?B$e(e):L$e(e,t),"passive-past":e=>{if(e.has("got"))return e.replace("got","get",z$e),e.prepend("did not"),e;let t=e.match("(was|were|had|have)");return t.found&&t.append("not"),e},"auxiliary-past":e=>{if(e.has("used"))return e.prepend("did not"),e;let t=e.match("(did|does|do)");return t.found&&t.append("not"),e},"want-infinitive":(e,t)=>e=(e=L$e(e,t)).replace("wants","want",z$e)},V$e=function(e,t,n){if(e.has("#Negative"))return e;if(H$e.hasOwnProperty(n))return e=H$e[n](e,t);let r=e.matchOne("be");return r.found?(r.prepend("not"),e):!0===j$e(e)?B$e(e):(r=e.matchOne("(will|had|have|has|did|does|do|#Modal)"),r.found?(r.append("not"),e):e)},W$e=function(e){class t extends e{constructor(e,t,n){super(e,t,n),this.viewType="Verbs"}parse(e){return this.getNth(e).map(VIe)}json(e,t){let n=this.getNth(t).map((t=>{let n=t.toView().json(e)[0]||{};return n.verb=m$e(t),n}),[]);return n}subjects(e){return this.getNth(e).map((e=>{let t=VIe(e);return o$e(e,t).subject}))}adverbs(e){return this.getNth(e).map((e=>e.match("#Adverb")))}isSingular(e){return this.getNth(e).filter((e=>!0!==o$e(e).plural))}isPlural(e){return this.getNth(e).filter((e=>!0===o$e(e).plural))}isImperative(e){return this.getNth(e).filter((e=>e.has("#Imperative")))}toInfinitive(e){return this.getNth(e).map((e=>{let t=VIe(e),n=t$e(e,t);return v$e(e,t,n.form)}))}toPresentTense(e){return this.getNth(e).map((e=>{let t=VIe(e),n=t$e(e,t);return n.isInfinitive?e:A$e(e,t,n.form)}))}toPastTense(e){return this.getNth(e).map((e=>{let t=VIe(e),n=t$e(e,t);return n.isInfinitive?e:x$e(e,t,n.form)}))}toFutureTense(e){return this.getNth(e).map((e=>{let t=VIe(e),n=t$e(e,t);return n.isInfinitive?e:F$e(e,t,n.form)}))}toGerund(e){return this.getNth(e).map((e=>{let t=VIe(e),n=t$e(e,t);return n.isInfinitive?e:M$e(e,t,n.form)}))}toPastParticiple(e){return this.getNth(e).map((e=>{let t=VIe(e),n=t$e(e,t);return n.isInfinitive?e:E$e(e,t,n.form)}))}conjugate(e){const{conjugate:t,toInfinitive:n}=this.world.methods.two.transform.verb;return this.getNth(e).map((e=>{let r=VIe(e),o=t$e(e,r);"imperative"===o.form&&(o.form="simple-present");let a=r.root.text("normal");if(!r.root.has("#Infinitive")){let t=u$e(r.root);a=n(a,e.model,t)||a}return t(a,e.model)}),[])}isNegative(){return this.if("#Negative")}isPositive(){return this.ifNo("#Negative")}toPositive(){let e=this.match("do not #Verb");return e.found&&e.remove("do not"),this.remove("#Negative")}toNegative(e){return this.getNth(e).map((e=>{let t=VIe(e),n=t$e(e,t);return V$e(e,t,n.form)}))}update(e){let n=new t(this.document,e);return n._cache=this._cache,n}}t.prototype.toPast=t.prototype.toPastTense,t.prototype.toPresent=t.prototype.toPresentTense,t.prototype.toFuture=t.prototype.toFutureTense,e.prototype.verbs=function(e){let n=MIe(this);return n=n.getNth(e),new t(this.document,n.pointer)}},G$e={api:W$e},U$e=function(e,t){let n=t.match(e);if(n.found){let e=n.pronouns().refersTo();if(e.found)return e}return t.none()},K$e=function(e){if(!e.found)return e;let[t]=e.fullPointer[0];return t&&t>0?e.update([[t-1]]):e.none()},q$e=function(e,t){let n=e.people();return n=function(e,t){return"m"===t?e.filter((e=>!e.presumedFemale().found)):"f"===t?e.filter((e=>!e.presumedMale().found)):e}(n,t),n.found?n.last():(n=e.nouns("#Actor"),n.found?n.last():"f"===t?U$e("(she|her|hers)",e):"m"===t?U$e("(he|him|his)",e):e.none())},X$e=function(e){let t=e.nouns(),n=t.isPlural().notIf("#Pronoun");if(n.found)return n.last();let r=U$e("(they|their|theirs)",e);return r.found?r:(n=t.match("(somebody|nobody|everybody|anybody|someone|noone|everyone|anyone)"),n.found?n.last():e.none())},J$e=function(e,t){let n=e.before(),r=t(n);return r.found?r:(n=K$e(e),r=t(n),r.found?r:(n=K$e(n),r=t(n),r.found?r:e.none()))},Y$e=function(e){e.pronouns().if("(he|him|his|she|her|hers|they|their|theirs|it|its)").forEach((e=>{let t=null;e.has("(he|him|his)")?t=J$e(e,(e=>q$e(e,"m"))):e.has("(she|her|hers)")?t=J$e(e,(e=>q$e(e,"f"))):e.has("(they|their|theirs)")&&(t=J$e(e,X$e)),t&&t.found&&function(e,t){t&&t.found&&(e.docs[0][0].reference=t.ptrs[0])}(e,t)}))},Q$e=function(e){class t extends e{constructor(e,t,n){super(e,t,n),this.viewType="Pronouns"}hasReference(){return this.compute("coreference"),this.filter((e=>e.docs[0][0].reference))}refersTo(){return this.compute("coreference"),this.map((e=>{if(!e.found)return e.none();let t=e.docs[0][0];return t.reference?e.update([t.reference]):e.none()}))}update(e){let n=new t(this.document,e);return n._cache=this._cache,n}}e.prototype.pronouns=function(e){let n=this.match("#Pronoun");return n=n.getNth(e),new t(n.document,n.pointer)}},Z$e={compute:{coreference:Y$e},api:Q$e};wEe.plugin(kEe),wEe.plugin(CEe),wEe.plugin(MEe),wEe.plugin(Z$e),wEe.plugin(rNe),wEe.plugin(cNe),wEe.plugin(NNe),wEe.plugin(uIe),wEe.plugin(pIe),wEe.plugin(CIe),wEe.plugin(_Ie),wEe.plugin(G$e);const eTe=wEe;let tTe;const nTe=async()=>(tTe||(tTe=await function(e){return Ope(this,void 0,void 0,(function(){var t;return Rpe(this,(function(n){switch(n.label){case 0:return[4,(t=new jpe).load(e)];case 1:return n.sent(),[2,t]}}))}))}()),tTe),rTe=async(e,t)=>{if(!e||!t)return 0;await nTe();const n=await tTe.embed([e,t]),r=n.arraySync()[0],o=n.arraySync()[1];return 1-mj.cosineDistance(JL(r),JL(o),0).dataSync()[0]},oTe=e=>{const t=eTe(e).topics().out("array");return t.length>3?t.slice(0,3):t};nTe();const{Header:aTe,Content:iTe,Footer:sTe}=_a,{Search:lTe}=Sh,uTe=()=>{const[e,t]=(0,I.useState)([]),[n,r]=(0,I.useState)([]),[o,a]=(0,I.useState)(!1);(0,I.useEffect)((()=>{r(e)}),[e]);const i=[{title:"Name",dataIndex:"name",key:"name"},{title:"Abstract",dataIndex:"abstract",key:"abstract",render:e=>(0,wA.jsxs)("span",{title:e,children:[null===e||void 0===e?void 0:e.slice(0,100),"..."]})},{title:"Abstract Keywords",dataIndex:"abstract_keywords",key:"abstract_keywords",render:(e,t)=>{var n;return null!==(n=null===t||void 0===t?void 0:t.abstract_keywords)&&void 0!==n?n:"not calculated"}},{title:"Title Score",dataIndex:"title_score",key:"title_score",render:(e,t)=>{var n;return null!==(n=null===t||void 0===t?void 0:t.title_score)&&void 0!==n?n:"not calculated"}},{title:"Abstract Score",dataIndex:"abstract_score",key:"abstract_score",render:(e,t)=>{var n;return null!==(n=null===t||void 0===t?void 0:t.abstract_score)&&void 0!==n?n:"not calculated"}}];return(0,wA.jsxs)(_a,{children:[(0,wA.jsx)(aTe,{children:(0,wA.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,wA.jsxs)(yf,{align:"center",children:[(0,wA.jsx)(xA,{setData:t}),(0,wA.jsx)(SA,{setData:t}),(0,wA.jsx)(Td,{onClick:()=>{t(e.map((e=>({...e,abstract_keywords:oTe(e.abstract)}))))},type:"default",children:"Predict Abstract Keywords"})]}),(0,wA.jsx)(lTe,{placeholder:"input classigy text",allowClear:!0,enterButton:"Classify",style:{width:"30%",paddingLeft:"2em"},onSearch:n=>{e.length>0?(console.log(n),(async(e,t)=>{const n=await Promise.all(e.map((async e=>{const n=await rTe(e.abstract,t),r=await rTe(e.title,t);return{...e,abstract_score:n,title_score:r}})));return console.log(n),n})(e,n).then((e=>{t(e)})).catch((e=>{cf.error("Error classifying data:",e)}))):cf.error("Write a term")}}),(0,wA.jsx)(Td,{type:"default",onClick:()=>{e.length>0?((e,t)=>{const n=[],r=Object.keys(e[0]).filter((e=>t.includes(e)));n.push(r.join(","));for(const l of e){const e=r.map((e=>`"${String(l[e]).replace(/"/g,'""')}"`));n.push(e.join(","))}const o=n.join("\n"),a=new Blob([o],{type:"text/csv"}),i=URL.createObjectURL(a),s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download","data.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)})(e,["name","abstract","abstract_score","title_score","abstract_keywords"]):cf.error("No data to download")},style:{marginLeft:"auto"},children:"Export as CSV"})]})}),(0,wA.jsxs)(iTe,{style:{padding:"50px",textAlign:"center"},children:[(0,wA.jsx)("div",{style:{marginBottom:"20px",maxWidth:"600px",margin:"auto"},children:(0,wA.jsx)(lTe,{placeholder:"Filter articles",onSearch:t=>{a(!0);const n=e.filter((e=>e.name.toLowerCase().includes(t.toLowerCase())));r(n),a(!1)},enterButton:!0,style:{width:"100%"}})}),0===e.length?(0,wA.jsx)("div",{style:{textAlign:"center",padding:"50px 0"},children:(0,wA.jsx)(rv,{children:"Upload a BibTeX or CSV to start"})}):(0,wA.jsx)($$,{dataSource:n,columns:i,pagination:{pageSize:5},loading:o,style:{margin:"auto",maxWidth:"1000px"}})]}),(0,wA.jsxs)(sTe,{style:{textAlign:"center"},children:["WebsmApp \xa92024 Created by Caleb | ",(0,wA.jsx)("a",{href:"https://github.com/EsdrasCaleb",children:"My GitHub"})]})]})},cTe=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:o,getLCP:a,getTTFB:i}=t;n(e),r(e),o(e),a(e),i(e)}))};T.createRoot(document.getElementById("root")).render((0,wA.jsx)(I.StrictMode,{children:(0,wA.jsx)(uTe,{})})),cTe()})()})();
//# sourceMappingURL=main.6a2f2e1b.js.map